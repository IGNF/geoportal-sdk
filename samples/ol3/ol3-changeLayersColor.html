<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <link rel="stylesheet" href="../../dist/ol3/GpOl3.css" type="text/css">
        <style>
        #geoportalMap {
            height: 400px;
            width: 600px;
        }
        #geoportalMap2 {
            height: 400px;
            width: 600px;
        }
        </style>
        <script src="../../dist/ol3/GpOl3-src.js"></script>
    </head>
    <body>
        <h1>changeLayerColor</h1>
        <div id="geoportalMap"></div>
        <div id="BoutonDiv">
            <input type="button" name="export" onclick="changeLayerColor('GEOGRAPHICALGRIDSYSTEMS.MAPS');" value="changeLayerColor(maCoucheGP)"/><br/>
            <input type="button" name="export" onclick="changeLayerColor('maCoucheWFS');" value="changeLayerColor(maCoucheWFS)"/><br/>
            <input type="button" name="export" onclick="changeLayerColor('maCoucheWMS');" value="changeLayerColor(maCoucheWMS)"/><br/>
            <input type="button" name="export" onclick="changeLayerColor('maCoucheWMS2');" value="changeLayerColor(maCoucheWMS2)"/><br/>
            <input type="button" name="export" onclick="changeLayerColor('maCoucheWMS3');" value="changeLayerColor(maCoucheWMS3)"/><br/>
            <input type="button" name="export" onclick="changeLayerColor('GEOGRAPHICALGRIDSYSTEMS.MAPS::GEOPORTAIL:OGC:WMTS');" value="changeLayerColor(maCoucheWMTS)"/><br/>
            <input type="button" name="export" onclick="changeLayerColor('maCoucheOSM');" value="changeLayerColor(maCoucheOSM)"/><br/>
        </div>
        <script type="text/javascript">

            var map = Gp.Map.load('geoportalMap',{
                apiKey : "jhyvi0fgmnuxvfv0zjzorvdn",
                layersOptions : {
                    'GEOGRAPHICALGRIDSYSTEMS.MAPS' : {
                      title: "maCoucheGP"
                    },
                    maCoucheWFS : {
                        title: "maCoucheWFS",
                        format :"wfs",
                        url : "http://wxs.ign.fr/an7nvfzojv5wa96dsga5nk8w/geoportail/wfs",
                        typeNames : "BDTOPOMILLESIMEE-RESEAU-ROUTIER-2012_SYMBO_BDD_WLD_WGS84G_WFS1:limites_adm",
                        version : "2.0.0",
                        outputFormat : "application/json",
                        maxFeatures : 200,
                        projection : "EPSG:4326",
                        visibility : true
                    },
                    maCoucheWMS : {
                        title: "maCoucheWMS",
                        format:'wms',
                        queryable : true,
                        tiled : false, //pour test
                        url:"http://wxs.ign.fr/an7nvfzojv5wa96dsga5nk8w/geoportail/v/wms",
                        layers:["UTILITYANDGOVERNMENTALSERVICES.IGN.POI.ENSEIGNEMENTPRIMAIRE"],
                        outputFormat:'image/png'
                    },
                    maCoucheWMS2 : {
                        title: "maCoucheWMS2",
                        format:'wms',
                        queryable : true,
                        tiled : true,
                        url:'https://wxs.ign.fr/an7nvfzojv5wa96dsga5nk8w/proxy',
                        layers:['IRSTEA_CLPA.TEMOIGNAGE'],
                        outputFormat:'image/png'
                    },
                    maCoucheWMS3 : {
                        title: "maCoucheWMS3",
                        format:'wms',
                        queryable : true,
                        tiled : true,
                        url:'http://services.data.shom.fr/INSPIRE/wms/r',
                        layers:['BATHY-DALLE_PYR-PNG_3857_WMSR'],
                        outputFormat:'image/png'
                    },
                    "GEOGRAPHICALGRIDSYSTEMS.MAPS::GEOPORTAIL:OGC:WMTS" : {
                        title: "maCoucheWMTS",
                        format : "wmts",
                        minZoom : 0,
                        maxZoom : 16,
                        visibility : true,
                        opacity : 1 ,
                        url : "http://wxs.ign.fr/an7nvfzojv5wa96dsga5nk8w/geoportail/wmts",
                        layer : "GEOGRAPHICALGRIDSYSTEMS.MAPS",
                        tileMatrixSet : "PM",
                        styleName : "normal",
                        outputFormat : "image/jpeg",
                    },
                    maCoucheOSM : {
                        title: "maCoucheOSM",
                        format :"osm",
                        opacity : 0.7,
                        minZoom : 8,
                        maxZoom : 13,
                        visibility : true,
                        url : "http://{a-c}.tile.opencyclemap.org/cycle/{z}/{x}/{y}.png"
                    }
                },
                controlsOptions : {
                    'layerSwitcher' : {
                        maximised : true
                    }
                },
                zoom : 10
            });

            var layerColored = {
              'GEOGRAPHICALGRIDSYSTEMS.MAPS': false,
              'maCoucheWFS': false,
              'maCoucheWMS': false,
              'maCoucheWMS2': false,
              'maCoucheWMS3': false,
              'GEOGRAPHICALGRIDSYSTEMS.MAPS::GEOPORTAIL:OGC:WMTS': false,
              'maCoucheOSM': false,
            }

            function changeLayerColor(layerId) {
                // map.changeLayerColor(layerColored[layerId],layerId) ;
                var layersOptions = new Object();
                layerColored[layerId] = !layerColored[layerId];
                layersOptions[layerId] = {
                    grayScaled: layerColored[layerId]
                };
                map.modifyLayers(layersOptions);
            }

        </script>
    </body>
</html>
