{{#extend "sample-bundle-layout-2d"}}

{{#content "head"}}
    <title>Sample SDK 2D Layers Options</title>
{{/content}}

{{#content "style"}}
    <style>
        #geoportalMap {
            height: 600px;
            width: 100%;
        }
    </style>
{{/content}}

{{#content "body"}}
    <h1>Ajout d'une carte avec Gp.Map.load() et l'ensemble des options possibles de layerOptions </h1>
    <div id="geoportalMap"></div>
    <input type="button" value="addLayer" onclick="addLayer();"/><br>
{{/content}}

{{#content "js"}}
    <script>
        var map = Gp.Map.load(
            'geoportalMap',
            {
                apiKey : "{{apikey}}",
                center : {
                    /* x,y coordinates + projection EPSG:4326 */
                    x : 2.345274398,
                    y : 48.860832558,
                    projection : "EPSG:4326"
                },
                zoom : 13,
                layersOptions : {
                    /* couche WMTS Géoportail */
                    'GEOGRAPHICALGRIDSYSTEMS.MAPS': {
                        position : 1,
                    },
                    /* couche WMTS externe */
                    // 'RPG.2012' : {
                    //     /* common properties */
                    //     format : "wmts",
                    //     url : "https://wxs.ign.fr/CLE_AVEC_LA_RESSOURCE/geoportail/wmts",
                    //     title : "RPG 2012",
                    //     description : "description du RPG 2012",
                    //     opacity : 0.5,
                    //     visibility : true,
                    //     minZoom : 6,
                    //     maxZoom : 16,
                    //     position : 3,
                    //     originators : [],
                    //     metadata : [],
                    //     legends : [],
                    //     /* WMTS specific properties */
                    //     layer : "LANDUSE.AGRICULTURE2012",
                    //     queryable : true,
                    //     gfiFormat : "text/html",
                    //     tileMatrixSet : "PM",
                    //     styleName : "normal",
                    //     outputFormat : "image/png"
                    // },
                    /* couche WMS Géoportail */
                    'ORTHOIMAGERY.ORTHOPHOTOS': {
                        format : "wms",
                        position : 2
                    },
                   /* couche WMS externe */
                    // "ecoles" : {
                    //     /* common properties */
                    //     format : "wms",
                    //     url : "https://wxs.ign.fr/CLE_AVEC_LA_RESSOURCE/geoportail/v/wms",
                    //     title : "Ecoles maternelles et élémentaires",
                    //     description : "L'école maternelle peut accueillir les enfants avant l'instruction obligatoire qui débute à 6 ans. L'école élémentaire accueille les enfants scolarisés de 6 à 11 ans. Elle est mixte et gratuite si elle est publique. <a href='http://www.education.gouv.fr/pid24/les-niveaux-et-les-etablissements-d-enseignement.html'>En savoir plus.</a>. Source des données : MENESR février 2014, BD TOPO 2016",
                    //     opacity : 0.5,
                    //     visibility : true,
                    //     minZoom : 10,
                    //     maxZoom : 21,
                    //     position : 3,
                    //     legends : [
                    //         {
                    //             format : "image/jpg",
                    //             url : "http://www.geoportail.gouv.fr/depot/api/legende/LEG_GEOGRAPHICALGRIDSYSTEMS_FRANCERASTER_1250.jpg",
                    //             minScaleDenominator : 1250
                    //         },
                    //         {
                    //             format : "image/jpg",
                    //             url : "http://www.geoportail.gouv.fr/depot/api/legende/LEG_GEOGRAPHICALGRIDSYSTEMS_FRANCERASTER_250000.jpg",
                    //             minScaleDenominator : 250000
                    //         }
                    //     ],
                    //     metadata : [
                    //         {
                    //             "format":"xml",
                    //             "url":"https://wxs.ign.fr/geoportail/csw?service=CSW&version=2.0.2&request=GetRecordById&Id=ECOLES.xml"
                    //         }
                    //     ],
                    //     originators: [
                    //         {
                    //             "name":"IGN",
                    //             "attribution":"Institut national de l'information géographique et forestière",
                    //             "logo":"https://wxs.ign.fr/static/logos/IGN/IGN.gif",
                    //             "url":"http://www.ign.fr",
                    //             "constraints":[
                    //                 {
                    //                     "crs":"EPSG:4326",
                    //                     "bbox":{
                    //                         "left":-63.09696,
                    //                         "right":55.826077,
                    //                         "top":51.073032,
                    //                         "bottom":-21.385712
                    //                     },
                    //                     "minScaleDenominator":0,
                    //                     "maxScaleDenominator":559082265,
                    //                     "temporalExtent":["2016-02-18","2016-02-18"]
                    //                 }
                    //             ]
                    //         },
                    //         {
                    //             "name":"MEN",
                    //             "attribution":"Ministère de l’Education nationale",
                    //             "logo":"https://wxs.ign.fr/static/logos/MEN/MEN.gif",
                    //             "url":"http://www.education.gouv.fr",
                    //             "constraints":[
                    //                 {
                    //                     "crs":"EPSG:4326",
                    //                     "bbox":{
                    //                         "left":-63.09696,
                    //                         "right":55.826077,
                    //                         "top":51.073032,
                    //                         "bottom":-21.385712
                    //                     },
                    //                     "minScaleDenominator":0,
                    //                     "maxScaleDenominator":559082265,
                    //                     "temporalExtent":["2016-02-18","2016-02-18"]
                    //                 }
                    //             ]
                    //         }
                    //     ],
                    //     /* WMS specific properties */
                    //     layers : ["UTILITYANDGOVERNMENTALSERVICES.IGN.POI.ENSEIGNEMENTPRIMAIRE"],
                    //     queryable : true,
                    //     gfiFormat : "text/plain",
                    //     // stylesNames : [""],
                    //     version : "1.3.0",
                    //     outputFormat : "image/png",
                    //     tiled : true,
                    //     quicklookUrl : "https://wxs.ign.fr/static/pictures/NOPIC.JPG",
                    // },
                    maCoucheWFS : {
                        format :"wfs",
                        url : "https://wxs.ign.fr/{{apikey2}}/geoportail/wfs",
                        typeNames : "BDPARCELLAIRE-VECTEUR_WLD_BDD_WGS84G:parcelle",
                        version : "2.0.0",
                        outputFormat : "application/json",
                        maxFeatures : 200,
                        projection : "EPSG:4326",
                        visibility : true,
                        position : 5
                    },
                    maCoucheKML : {
                        format : "kml",
                        url : "{{resources}}/KML/croquis.kml",
                        title : "Croquis KML",
                        description : "Croquis KML vers Place d'Italie",
                        opacity : 0.7,
                        minZoom : 12,
                        maxZoom : 14,
                        position : 5,
                        visibility : true,
                        extractStyles : true,
                        showPointNames : false,
                        projection : "EPSG:4326"
                    },
                    maCoucheGPX : {
                        format : "gpx",
                        url : "{{resources}}/GPX/Campomoro-Tizzano-Sartene_3029.gpx",
                        title : "Trace GPX",
                        description : "Parcours GPX en Corse",
                        opacity : 0.9,
                        minZoom : 1,
                        maxZoom : 21,
                        visibility : true,
                        position : 4
                    }
                },
                controlsOptions : {
                    overview : {
                        maximised : true,
                        layers : ["GEOGRAPHICALGRIDSYSTEMS.MAPS.OVERVIEW"],
                        projection : "EPSG:3857",
                        minZoom : 1,
                        maxZoom : 7
                    },
                    attributions : {
                        maximised : true
                    },
                    layerSwitcher : {
                        maximised : false
                    },
                    zoom : {
                    },
                    mousePosition : {
                    },
                    layerimport : {
                    }
                },
                minZoom : 3,
                maxZoom : 16,
                // proxyUrl : "{{ resources }}/proxy/proxy.php?url="
            }
        );

        function addLayer() {
           map.addLayers({
               'GEOGRAPHICALGRIDSYSTEMS.MAPS': {
                    title : "Cartes modifiées",
                    legends : [{
                       format : "image/gif",
                       url : "http://www.geoportail.gouv.fr/depot/fiches/cartesIGN/legendes/25k.gif"
                   }]
               },
               "kml" : {
                   title : "Couche KML",
                   url : "{{resources}}/KML/S_TOP100.kml",
                   format : "kml",
                   originators : [{
                       logo : "http://www.ign.fr/sites/all/themes/ign_portail/logo.png",
                       url : "http://www.ign.fr",
                       name : "IGN"
                   }]
               },
               "MigrationKML" : {
                   title : "Couche KML (migration)",
                   format : "kml",
                   url : "{{resources}}/KML/1160569.kml",
                   originators : [{
                       logo : "http://www.ign.fr/sites/all/themes/ign_portail/logo.png",
                       url : "http://www.ign.fr",
                       name : "IGN"
                   }]
               }
           }) ;
        }
    </script>
{{/content}}
{{/extend}}
