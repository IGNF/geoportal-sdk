/*!
 * @brief French Geoportal SDK based on OpenLayers (2D) and iTowns (3D) libraries
 *
 * This software is released under the licence CeCILL-B (Free BSD compatible)
 * @see http://www.cecill.info/licences/Licence_CeCILL-B_V1-en.txt
 * @see http://www.cecill.info/licences/Licence_CeCILL-B_V1-fr.txt
 * @see http://www.cecill.info/
 *
 * @copyright copyright (c) IGN
 * @license CeCILL-B
 * @author IGN
 * @version 3.3.6
 * @date 28/01/2022
 * @build
 *    date   : 1/28/2022, 4:00:03 PM
 *    branch : tags/3.3.6
 *    commit : baa4a21
 *    dirty  : false
 */
/*!
 * geoportal-extensions-openlayers. See https://github.com/IGNF/geoportal-extensions
 * @license https://github.com/IGNF/geoportal-extensions/blob/master/LICENCE.md
 * @version 3.2.7
 */
/*!
 * @overview  ol-mapbox-style - Use Mapbox Style objects with OpenLayers
 * @copyright Copyright (c) 2016 openlayers
 * @license   BSD 2-Clause "Simplified" License
 *            See https://raw.githubusercontent.com/openlayers/ol-mapbox-style/master/LICENSE
 * @version   6.7.0
 */
/*!
 * @overview   OpenLayers. See http://openlayers.org/
 * @copyright  Copyright 2005-present, OpenLayers Contributors All rights reserved.
 * @license    BSD 2-Clause "Simplified" License
 *             See https://raw.githubusercontent.com/openlayers/openlayers/master/LICENCE.md
 * @version    6.9.0
 */
/*!
 * Sortable -- JavaScript library for reorderable drag-and-drop lists on modern
 * browsers and touch devices. No jQuery required. Supports Meteor, AngularJS,
 * React, Polymer, Vue, Knockout and any CSS library, e.g. Bootstrap.
 *
 * Released under MIT LICENSE
 *
 * Copyright Lebedev Konstantin <ibnRubaXa@gmail.com>
 * https://github.com/SortableJS/Sortable
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * @version v1.8.4
 */
/*!
 * @overview  es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.4
 */
/*!
 * @overview   Proj4js - Javascript reprojection library.
 *
 * @authors
 * - Mike Adair madairATdmsolutions.ca
 * - Richard Greenwood richATgreenwoodmap.com
 * - Didier Richard didier.richardATign.fr
 * - Stephen Irons stephen.ironsATclear.net.nz
 * - Olivier Terral oterralATgmail.com
 * - Calvin Metcalf cmetcalfATappgeo.com
 *
 * @copyright Copyright (c) 2014, Mike Adair, Richard Greenwood, Didier Richard, Stephen Irons, Olivier Terral and Calvin Metcalf
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/proj4js/proj4js/master/LICENSE.md
 * @version   2.7.2
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("node-fetch"),require("xmldom")):"function"==typeof define&&define.amd?define("Gp",["require","require"],t):"object"==typeof exports?exports.Gp=t(require("node-fetch"),require("xmldom")):e.Gp=t(e[void 0],e[void 0])}(window,(function(e,t){return function(e){function t(t){for(var o,r,i=t[0],s=t[1],a=0,c=[];a<i.length;a++)r=i[a],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&c.push(n[r][0]),n[r]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);for(l&&l(t);c.length;)c.shift()()}var o={},n={1:0};function r(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.e=function(e){var t=[],o=n[e];if(0!==o)if(o)t.push(o[2]);else{var i=new Promise((function(t,r){o=n[e]=[t,r]}));t.push(o[2]=i);var s,a=document.createElement("script");a.charset="utf-8",a.timeout=120,r.nc&&a.setAttribute("nonce",r.nc),a.src=function(e){return r.p+""+({0:"chunk-geotiff"}[e]||e)+".js"}(e);var l=new Error;s=function(t){a.onerror=a.onload=null,clearTimeout(c);var o=n[e];if(0!==o){if(o){var r=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+r+": "+i+")",l.name="ChunkLoadError",l.type=r,l.request=i,o[1](l)}n[e]=void 0}};var c=setTimeout((function(){s({type:"timeout",target:a})}),12e4);a.onerror=a.onload=s,document.head.appendChild(a)}return Promise.all(t)},r.m=e,r.c=o,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r.oe=function(e){throw console.error(e),e};var i=window.webpackJsonpGp=window.webpackJsonpGp||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var a=0;a<i.length;a++)t(i[a]);var l=s;return r(r.s=0)}({"./node_modules/@mapbox/mapbox-gl-style-spec/dist/index.es.js":function(e,t,o){"use strict";(function(e,n){o.d(t,"a",(function(){return Q})),o.d(t,"b",(function(){return wo})),o.d(t,"c",(function(){return $o})),o.d(t,"d",(function(){return ho})),o.d(t,"e",(function(){return en})),o.d(t,"f",(function(){return r}));var r={$version:8,$root:{version:{required:!0,type:"enum",values:[8],doc:"Style specification version number. Must be 8.",example:8},name:{type:"string",doc:"A human-readable name for the style.",example:"Bright"},metadata:{type:"*",doc:"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},center:{type:"array",value:"number",doc:"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:[-73.9749,40.7736]},zoom:{type:"number",doc:"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:12.5},bearing:{type:"number",default:0,period:360,units:"degrees",doc:'Default bearing, in degrees. The bearing is the compass direction that is "up"; for example, a bearing of 90Â° orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).',example:29},pitch:{type:"number",default:0,units:"degrees",doc:"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:50},light:{type:"light",doc:"The global light source.",example:{anchor:"viewport",color:"white",intensity:.4}},terrain:{type:"terrain",doc:"A global modifier that elevates layers and markers based on a DEM data source."},fog:{type:"fog",doc:"A global effect that fades layers and markers based on their distance to the camera. The fog can be used to approximate the effect of atmosphere on distant objects and enhance the depth perception of the map when used with terrain or 3D features."},sources:{required:!0,type:"sources",doc:"Data source specifications.",example:{"mapbox-streets":{type:"vector",url:"mapbox://mapbox.mapbox-streets-v6"}}},sprite:{type:"string",doc:"A base URL for retrieving the sprite image and metadata. The extensions `.png`, `.json` and scale factor `@2x.png` will be automatically appended. This property is required if any layer uses the `background-pattern`, `fill-pattern`, `line-pattern`, `fill-extrusion-pattern`, or `icon-image` properties. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://sprites/mapbox/bright-v8"},glyphs:{type:"string",doc:"A URL template for loading signed-distance-field glyph sets in PBF format. The URL must include `{fontstack}` and `{range}` tokens. This property is required if any layer uses the `text-field` layout property. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},transition:{type:"transition",doc:"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style's `transition` property.",example:{duration:300,delay:0}},layers:{required:!0,type:"array",value:"layer",doc:"Layers will be drawn in the order of this array.",example:[{id:"water",source:"mapbox-streets","source-layer":"water",type:"fill",paint:{"fill-color":"#00ffff"}}]}},sources:{"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},source_raster:{type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default"},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},filter:{type:"*",doc:"An expression for filtering features prior to processing them for rendering."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n * `cluster` Is `true` if the point is a cluster \n * `cluster_id` A unqiue id for the cluster to be used in conjunction with the [cluster inspection methods](https://www.mapbox.com/mapbox-gl-js/api/#geojsonsource#getclusterexpansionzoom)\n * `point_count` Number of original points grouped into this cluster\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},clusterMinPoints:{type:"number",doc:"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`) â it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},source_video:{type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},source_image:{type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},layer:{id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. Currently, the implementation only supports Mapbox Terrain RGB and Mapzen Terrarium tiles.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},sky:{doc:"A spherical dome around the map that is always rendered behind all other layers.","sdk-support":{"basic functionality":{js:"2.0.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:"A expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `feature-state` expression is not supported in filter expressions."},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"2.0.0"}},"property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{doc:"The label is placed at the point where the geometry is located."},line:{doc:"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{doc:"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},default:"point",doc:"Label placement relative to its geometry.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`line-center` value":{js:"0.47.0",android:"6.4.0",ios:"4.3.0",macos:"0.10.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",doc:"Distance between two symbol anchors.",requires:[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,doc:"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don't have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like Mapbox GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"},"data-driven styling":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{doc:"Sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},source:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},default:"auto",doc:"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{js:"0.49.0",android:"6.6.0",ios:"4.5.0",macos:"0.12.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,doc:"If true, the icon will be visible even if it collides with other previously drawn symbols.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the icon.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,doc:"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},viewport:{doc:"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",doc:"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{doc:"The icon is displayed at its intrinsic aspect ratio."},width:{doc:"The icon is scaled in the x-dimension to fit the width of the text."},height:{doc:"The icon is scaled in the y-dimension to fit the height of the text."},both:{doc:"The icon is scaled in both x- and y-dimensions."}},default:"none",doc:"Scales the icon to fit around the associated text.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"stretchable icons":{js:"1.6.0",android:"9.2.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",doc:"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",doc:"Name of image in sprite to use for drawing an image background.",tokens:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the icon clockwise.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the icon bounding box used for detecting symbol collisions.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,doc:"If true, the icon may be flipped to prevent it from being rendered upside-down.",requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],doc:"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{doc:"The center of the icon is placed closest to the anchor."},left:{doc:"The left side of the icon is placed closest to the anchor."},right:{doc:"The right side of the icon is placed closest to the anchor."},top:{doc:"The top of the icon is placed closest to the anchor."},bottom:{doc:"The bottom of the icon is placed closest to the anchor."},"top-left":{doc:"The top left corner of the icon is placed closest to the anchor."},"top-right":{doc:"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the icon is placed closest to the anchor."}},default:"center",doc:"Part of the icon placed closest to the anchor.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{doc:"The icon is aligned to the plane of the map."},viewport:{doc:"The icon is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `icon-rotation-alignment`."}},default:"auto",doc:"Orientation of icon when map is pitched.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{doc:"The text is aligned to the plane of the map."},viewport:{doc:"The text is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `text-rotation-alignment`."}},default:"auto",doc:"Orientation of text when map is pitched.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},viewport:{doc:"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,doc:"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],doc:"Font stack to use for displaying text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",doc:"Font size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",doc:"The maximum line width for text wrapping.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",doc:"Text leading value for multi-line text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",doc:"Text tracking amount.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{doc:"The text is aligned towards the anchor position."},left:{doc:"The text is aligned to the left."},center:{doc:"The text is centered."},right:{doc:"The text is aligned to the right."}},default:"center",doc:"Text justification options.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},auto:{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,doc:"Radial offset of text, in the direction of the symbol's anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"},"data-driven styling":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},requires:["text-field",{"symbol-placement":["point"]}],doc:"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},default:"center",doc:"Part of the text placed closest to the anchor.",requires:["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",doc:"Maximum angle change between adjacent characters.",requires:["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{doc:"If a text's language supports horizontal writing mode, symbols with point placement would be laid out horizontally."},vertical:{doc:"If a text's language supports vertical writing mode, symbols with point placement would be laid out vertically."}},doc:"The property allows control over a symbol's orientation. Note that the property values act as a hint, so that a symbol whose language doesnât support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single 'vertical' enum value. The order of elements in an array define priority order for the placement of an orientation variant.",requires:["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{js:"1.3.0",android:"8.3.0",ios:"5.3.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the text clockwise.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the text bounding box used for detecting symbol collisions.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,doc:"If true, the text may be flipped vertically to prevent it from being rendered upside-down.",requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{doc:"The text is not altered."},uppercase:{doc:"Forces all letters to be displayed in uppercase."},lowercase:{doc:"Forces all letters to be displayed in lowercase."}},default:"none",doc:"Specifies how to capitalize text, similar to the CSS `text-transform` property.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",doc:"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,doc:"If true, the text will be visible even if it collides with other previously drawn symbols.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,doc:"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.",requires:["text-field","icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},filter:{type:"array",value:"*",doc:"A filter selects specific features from a layer."},filter_operator:{type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key] â  value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key] â¥ value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key] â¤ value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key] â {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key] â {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0 â§ ... â§ fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0 â¨ ... â¨ fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `Â¬f0 â§ ... â§ Â¬fn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'},within:{doc:'`["within", object]` feature geometry is within object geometry'}},doc:"The filter operator."},geometry_type:{type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:"A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:\n* In categorical functions, when the feature value does not match any of the stop domain values.\n* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.\n* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a `circle-color` property but the feature property value is not a string or not a valid color).\n* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.\nIf no default is provided, the style property's default is used in these circumstances."}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},expression:{type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},expression_name:{doc:"",type:"enum",values:{let:{doc:'Binds expressions to named variables, which can then be referenced in the result expression using ["var", "variable_name"].',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},var:{doc:'References variable bound using "let".',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},literal:{doc:"Provides a literal array or object value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},array:{doc:"Asserts that the input is an array (optionally with a specific item type and length).  If, when the input expression is evaluated, it is not of the asserted type, then this assertion will cause the whole expression to be aborted.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},at:{doc:"Retrieves an item from an array.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},in:{doc:"Determines whether an item exists in an array or a substring exists in a string.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.6.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"index-of":{doc:"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},slice:{doc:"Returns an item from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},case:{doc:"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},match:{doc:'Selects the output for which the label value matches the input value, or the fallback value if no match is found. The input can be any expression (for example, `["get", "building_type"]`). Each label must be unique, and must be either:\n - a single literal value; or\n - an array of literal values, the values of which must be all strings or all numbers (for example `[100, 101]` or `["c", "b"]`).\n\nThe input matches if any of the values in the array matches using strict equality, similar to the `"in"` operator.\nIf the input type does not match the type of the labels, the result will be the fallback value.',group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},coalesce:{doc:"Evaluates each expression in turn until the first non-null value is obtained, and returns that value.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},step:{doc:'Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. Returns the output value of the stop just less than the input, or the first output if the input is less than the first stop.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},interpolate:{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, or `color`.\n\nInterpolation types:\n- `["linear"]`: Interpolates linearly between the pair of stops just less than and just greater than the input.\n- `["exponential", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\n- `["cubic-bezier", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"interpolate-hcl":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the Hue-Chroma-Luminance color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},"interpolate-lab":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the CIELAB color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},ln2:{doc:"Returns mathematical constant ln(2).",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},pi:{doc:"Returns the mathematical constant pi.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},e:{doc:"Returns the mathematical constant e.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},typeof:{doc:"Returns a string describing the type of the given value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},string:{doc:"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},number:{doc:"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},boolean:{doc:"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},object:{doc:"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},collator:{doc:"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.",group:"Types","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},format:{doc:'Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#types-image) expression. Strings may be followed by a style override object that supports the following properties:\n- `"text-font"`: Overrides the font stack specified by the root layout property.\n- `"text-color"`: Overrides the color specified by the root paint property.\n- `"font-scale"`: Applies a scaling factor on `text-size` as specified by the root layout property.',group:"Types","sdk-support":{"basic functionality":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-font":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"font-scale":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-color":{js:"1.3.0",android:"7.3.0",ios:"4.10.0",macos:"0.14.0"},image:{js:"1.6.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},image:{doc:"Returns an `image` type for use in `icon-image`, `*-pattern` entries and as a section in the `format` expression. If set, the `image` argument will check that the requested image exists in the style and will return either the resolved image name or `null`, depending on whether or not the image is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `image` argument.",group:"Types","sdk-support":{"basic functionality":{js:"1.4.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},"number-format":{doc:"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.",group:"Types","sdk-support":{"basic functionality":{js:"0.54.0"}}},"to-string":{doc:'Converts the input value to a string. If the input is `null`, the result is `""`. If the input is a boolean, the result is `"true"` or `"false"`. If the input is a number, it is converted to a string as specified by the ["NumberToString" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a color, it is converted to a string of the form `"rgba(r,g,b,a)"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-number":{doc:'Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the ["ToNumber Applied to the String Type" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-boolean":{doc:"Converts the input value to a boolean. The result is `false` when then input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-rgba":{doc:"Returns a four-element array containing the input color's red, green, blue, and alpha components, in that order.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-color":{doc:"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgb:{doc:"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgba:{doc:"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},get:{doc:"Retrieves a property value from the current feature's properties, or from another object if a second argument is provided. Returns null if the requested property is missing.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},has:{doc:"Tests for the presence of an property value in the current feature's properties, or from another object if a second argument is provided.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},length:{doc:"Gets the length of an array or string.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},properties:{doc:'Gets the feature properties object.  Note that in some cases, it may be more efficient to use ["get", "property_name"] directly.',group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"feature-state":{doc:"Retrieves a property value from the current feature's state. Returns null if the requested property is not present on the feature's state. A feature's state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. Features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. Note that [\"feature-state\"] can only be used with paint properties that support data-driven styling.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.46.0"}}},"geometry-type":{doc:"Gets the feature's geometry type: `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},id:{doc:"Gets the feature's id, if it has one.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},zoom:{doc:'Gets the current zoom level.  Note that in style layout and paint properties, ["zoom"] may only appear as the input to a top-level "step" or "interpolate" expression.',group:"Zoom","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"heatmap-density":{doc:"Gets the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.",group:"Heatmap","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"line-progress":{doc:"Gets the progress along a gradient line. Can only be used in the `line-gradient` property.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.6.0",macos:"0.12.0"}}},"sky-radial-progress":{doc:"Gets the distance of a point on the sky from the sun position. Returns 0 at sun position and 1 when the distance reaches `sky-gradient-radius`. Can only be used in the `sky-gradient` property.",group:"sky","sdk-support":{"basic functionality":{js:"2.0.0"}}},accumulated:{doc:"Gets the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.53.0"}}},"+":{doc:"Returns the sum of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"*":{doc:"Returns the product of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"-":{doc:"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"/":{doc:"Returns the result of floating point division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"%":{doc:"Returns the remainder after integer division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"^":{doc:"Returns the result of raising the first input to the power specified by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sqrt:{doc:"Returns the square root of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log10:{doc:"Returns the base-ten logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ln:{doc:"Returns the natural logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log2:{doc:"Returns the base-two logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sin:{doc:"Returns the sine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},cos:{doc:"Returns the cosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},tan:{doc:"Returns the tangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},asin:{doc:"Returns the arcsine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},acos:{doc:"Returns the arccosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},atan:{doc:"Returns the arctangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},min:{doc:"Returns the minimum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},max:{doc:"Returns the maximum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},round:{doc:'Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `["round", -1.5]` evaluates to -2.',group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},abs:{doc:"Returns the absolute value of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ceil:{doc:"Returns the smallest integer that is greater than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},floor:{doc:"Returns the largest integer that is less than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},distance:{doc:"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.",group:"Math","sdk-support":{"basic functionality":{android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}}},"==":{doc:"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"!=":{doc:"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">":{doc:"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<":{doc:"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">=":{doc:"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<=":{doc:"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},all:{doc:"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},any:{doc:"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"!":{doc:"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},within:{doc:"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line's endpoint is on the boundary.",group:"Decision","sdk-support":{"basic functionality":{js:"1.9.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"is-supported-script":{doc:"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the the `mapbox-gl-rtl-text` plugin is not in use in Mapbox GL JS).",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.6.0"}}},upcase:{doc:"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},downcase:{doc:"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},concat:{doc:"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"resolved-locale":{doc:"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"The start and end distance range in which fog fades from fully transparent to fully opaque. The distance to the point at the center of the map is defined as zero, so that negative range values are closer to the camera, and positive values are farther away.",example:[.5,10],"sdk-support":{"basic functionality":{js:"2.3.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the fog. Using opacity is recommended only for smoothly transitioning fog on/off as anything less than 100% opacity results in more tiles loaded and drawn.","sdk-support":{"basic functionality":{js:"2.3.0"}}},"horizon-blend":{type:"number","property-type":"data-constant",default:.1,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Horizon blend applies a smooth fade from the color of the fog to the color of the sky. A value of zero leaves a sharp transition from fog to sky. Increasing the value blends the color of fog into increasingly high angles of the sky.","sdk-support":{"basic functionality":{js:"2.3.0"}}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0Â° (0Â° when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0Â° when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0Â°, directly above, to 180Â°, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}}},terrain:{source:{type:"string",doc:"Name of a source of `raster_dem` type to be used for terrain elevation.",required:!0,"sdk-support":{"basic functionality":{js:"2.0.0"}}},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Exaggerates the elevation of the terrain by multiplying the data from the DEM with this value.","sdk-support":{"basic functionality":{js:"2.0.0"}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",ios:"4.7.0",macos:"0.13.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:"Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. Note that GeoJSON sources with `lineMetrics: true` specified won't render dashed lines to the expected scale. Also note that zoom-dependent expressions will be evaluated only at integer zoom levels.",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0",macos:"0.11.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,doc:"The color of the icon. This can only be used with sdf icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0",macos:"0.9.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,doc:"The direction of the light source used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",doc:"The shading color of areas that face away from the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{doc:"Renders the sky with a gradient that can be configured with `sky-gradient-radius` and `sky-gradient`."},atmosphere:{doc:"Renders the sky with a simulated atmospheric scattering algorithm, the sun direction can be attached to the light position or explicitly set through `sky-atmosphere-sun`."}},default:"atmosphere",doc:"The type of the sky","sdk-support":{"basic functionality":{js:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the sun center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the sun relative to 0Â° north, where degrees proceed clockwise. The polar angle indicates the height of the sun, where 0Â° is directly above, at zenith, and 90Â° at the horizon. When this property is ommitted, the sun center is directly inherited from the light position.","sdk-support":{"basic functionality":{js:"2.0.0"}},requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,doc:"Intensity of the sun as a light source in the atmosphere (on a scale from 0 to a 100). Setting higher values will brighten up the sky.","sdk-support":{"basic functionality":{js:"2.0.0"}},"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the gradient center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the gradient center relative to 0Â° north, where degrees proceed clockwise. The polar angle indicates the height of the gradient center, where 0Â° is directly above, at zenith, and 90Â° at the horizon.","sdk-support":{"basic functionality":{js:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,doc:"The angular distance (measured in degrees) from `sky-gradient-center` up to which the gradient extends. A value of 180 causes the gradient to wrap around to the opposite direction from `sky-gradient-center`.","sdk-support":{"basic functionality":{js:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],doc:"Defines a radial color gradient with which to color the sky. The color values can be interpolated with an expression using `sky-radial-progress`. The range [0, 1] for the interpolant covers a radial distance (in degrees) of [0, `sky-gradient-radius`] centered at the position specified by `sky-gradient-center`.",transition:!1,requires:[{"sky-type":"gradient"}],"sdk-support":{"basic functionality":{js:"2.0.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",doc:"A color applied to the atmosphere sun halo. The alpha channel describes how strongly the sun halo is represented in an atmosphere sky layer.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0"}},"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",doc:"A color used to tweak the main atmospheric scattering coefficients. Using white applies the default coefficients giving the natural blue color to the atmosphere. This color affects how heavily the corresponding wavelength is represented during scattering. The alpha channel describes the density of the atmosphere, with 1 maximum density and 0 no density.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0"}},"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire sky layer.",transition:!0,"sdk-support":{"basic functionality":{js:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"cross-faded":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms."},"cross-faded-data-driven":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms. It can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:{"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}}};var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{};function s(e){var t={exports:{}};return e(t,t.exports),t.exports}function a(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets option of @rollup/plugin-commonjs appropriately for this require call to behave properly.')}
/*! https://mths.be/punycode v1.3.2 by @mathias */var l=s((function(e,t){!function(o){var n=t&&!t.nodeType&&t,r=e&&!e.nodeType&&e,s="object"==typeof i&&i;s.global!==s&&s.window!==s&&s.self!==s||(o=s);var a,l,c=2147483647,u=/^xn--/,d=/[^\x20-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,m=String.fromCharCode;function g(e){throw RangeError(p[e])}function y(e,t){for(var o=e.length,n=[];o--;)n[o]=t(e[o]);return n}function v(e,t){var o=e.split("@"),n="";return o.length>1&&(n=o[0]+"@",e=o[1]),n+y((e=e.replace(h,".")).split("."),t).join(".")}function _(e){for(var t,o,n=[],r=0,i=e.length;r<i;)(t=e.charCodeAt(r++))>=55296&&t<=56319&&r<i?56320==(64512&(o=e.charCodeAt(r++)))?n.push(((1023&t)<<10)+(1023&o)+65536):(n.push(t),r--):n.push(t);return n}function b(e){return y(e,(function(e){var t="";return e>65535&&(t+=m((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=m(e)})).join("")}function w(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function E(e,t,o){var n=0;for(e=o?f(e/700):e>>1,e+=f(e/t);e>455;n+=36)e=f(e/35);return f(n+36*e/(e+38))}function O(e){var t,o,n,r,i,s,a,l,u,d,h,p=[],m=e.length,y=0,v=128,_=72;for((o=e.lastIndexOf("-"))<0&&(o=0),n=0;n<o;++n)e.charCodeAt(n)>=128&&g("not-basic"),p.push(e.charCodeAt(n));for(r=o>0?o+1:0;r<m;){for(i=y,s=1,a=36;r>=m&&g("invalid-input"),((l=(h=e.charCodeAt(r++))-48<10?h-22:h-65<26?h-65:h-97<26?h-97:36)>=36||l>f((c-y)/s))&&g("overflow"),y+=l*s,!(l<(u=a<=_?1:a>=_+26?26:a-_));a+=36)s>f(c/(d=36-u))&&g("overflow"),s*=d;_=E(y-i,t=p.length+1,0==i),f(y/t)>c-v&&g("overflow"),v+=f(y/t),y%=t,p.splice(y++,0,v)}return b(p)}function S(e){var t,o,n,r,i,s,a,l,u,d,h,p,y,v,b,O=[];for(p=(e=_(e)).length,t=128,o=0,i=72,s=0;s<p;++s)(h=e[s])<128&&O.push(m(h));for(n=r=O.length,r&&O.push("-");n<p;){for(a=c,s=0;s<p;++s)(h=e[s])>=t&&h<a&&(a=h);for(a-t>f((c-o)/(y=n+1))&&g("overflow"),o+=(a-t)*y,t=a,s=0;s<p;++s)if((h=e[s])<t&&++o>c&&g("overflow"),h==t){for(l=o,u=36;!(l<(d=u<=i?1:u>=i+26?26:u-i));u+=36)b=l-d,v=36-d,O.push(m(w(d+b%v,0))),l=f(b/v);O.push(m(w(l,0))),i=E(o,y,n==r),o=0,++n}++o,++t}return O.join("")}if(a={version:"1.3.2",ucs2:{decode:_,encode:b},decode:O,encode:S,toASCII:function(e){return v(e,(function(e){return d.test(e)?"xn--"+S(e):e}))},toUnicode:function(e){return v(e,(function(e){return u.test(e)?O(e.slice(4).toLowerCase()):e}))}},n&&r)if(e.exports==n)r.exports=a;else for(l in a)a.hasOwnProperty(l)&&(n[l]=a[l]);else o.punycode=a}(i)})),c=function(e){return"string"==typeof e},u=function(e){return"object"==typeof e&&null!==e},d=function(e){return null===e},h=function(e){return null==e};function p(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var f=function(e,t,o,n){t=t||"&",o=o||"=";var r={};if("string"!=typeof e||0===e.length)return r;var i=/\+/g;e=e.split(t);var s=1e3;n&&"number"==typeof n.maxKeys&&(s=n.maxKeys);var a=e.length;s>0&&a>s&&(a=s);for(var l=0;l<a;++l){var c,u,d,h,f=e[l].replace(i,"%20"),m=f.indexOf(o);m>=0?(c=f.substr(0,m),u=f.substr(m+1)):(c=f,u=""),d=decodeURIComponent(c),h=decodeURIComponent(u),p(r,d)?Array.isArray(r[d])?r[d].push(h):r[d]=[r[d],h]:r[d]=h}return r},m=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},g=function(e,t,o,n){return t=t||"&",o=o||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map((function(n){var r=encodeURIComponent(m(n))+o;return Array.isArray(e[n])?e[n].map((function(e){return r+encodeURIComponent(m(e))})).join(t):r+encodeURIComponent(m(e[n]))})).join(t):n?encodeURIComponent(m(n))+o+encodeURIComponent(m(e)):""},y=s((function(e,t){t.decode=t.parse=f,t.encode=t.stringify=g}));function v(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var _=/^([a-z0-9.+-]+:)/i,b=/:[0-9]*$/,w=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,E=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),O=["'"].concat(E),S=["%","/","?",";","#"].concat(O),x=["/","?","#"],C=/^[+a-z0-9A-Z_-]{0,63}$/,j=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,P={javascript:!0,"javascript:":!0},T={javascript:!0,"javascript:":!0},A={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function M(e,t,o){if(e&&u(e)&&e instanceof v)return e;var n=new v;return n.parse(e,t,o),n}v.prototype.parse=function(e,t,o){if(!c(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),r=-1!==n&&n<e.indexOf("#")?"?":"#",i=e.split(r);i[0]=i[0].replace(/\\/g,"/");var s=e=i.join(r);if(s=s.trim(),!o&&1===e.split("#").length){var a=w.exec(s);if(a)return this.path=s,this.href=s,this.pathname=a[1],a[2]?(this.search=a[2],this.query=t?y.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var u=_.exec(s);if(u){var d=(u=u[0]).toLowerCase();this.protocol=d,s=s.substr(u.length)}if(o||u||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var h="//"===s.substr(0,2);!h||u&&T[u]||(s=s.substr(2),this.slashes=!0)}if(!T[u]&&(h||u&&!A[u])){for(var p,f,m=-1,g=0;g<x.length;g++){-1!==(v=s.indexOf(x[g]))&&(-1===m||v<m)&&(m=v)}-1!==(f=-1===m?s.lastIndexOf("@"):s.lastIndexOf("@",m))&&(p=s.slice(0,f),s=s.slice(f+1),this.auth=decodeURIComponent(p)),m=-1;for(g=0;g<S.length;g++){var v;-1!==(v=s.indexOf(S[g]))&&(-1===m||v<m)&&(m=v)}-1===m&&(m=s.length),this.host=s.slice(0,m),s=s.slice(m),this.parseHost(),this.hostname=this.hostname||"";var b="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!b)for(var E=this.hostname.split(/\./),M=(g=0,E.length);g<M;g++){var I=E[g];if(I&&!I.match(C)){for(var R="",L=0,k=I.length;L<k;L++)I.charCodeAt(L)>127?R+="x":R+=I[L];if(!R.match(C)){var G=E.slice(0,g),N=E.slice(g+1),D=I.match(j);D&&(G.push(D[1]),N.unshift(D[2])),N.length&&(s="/"+N.join(".")+s),this.hostname=G.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),b||(this.hostname=l.toASCII(this.hostname));var F=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+F,this.href+=this.host,b&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!P[d])for(g=0,M=O.length;g<M;g++){var B=O[g];if(-1!==s.indexOf(B)){var z=encodeURIComponent(B);z===B&&(z=escape(B)),s=s.split(B).join(z)}}var V=s.indexOf("#");-1!==V&&(this.hash=s.substr(V),s=s.slice(0,V));var W=s.indexOf("?");if(-1!==W?(this.search=s.substr(W),this.query=s.substr(W+1),t&&(this.query=y.parse(this.query)),s=s.slice(0,W)):t&&(this.search="",this.query={}),s&&(this.pathname=s),A[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){F=this.pathname||"";var q=this.search||"";this.path=F+q}return this.href=this.format(),this},v.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",o=this.pathname||"",n=this.hash||"",r=!1,i="";this.host?r=e+this.host:this.hostname&&(r=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&u(this.query)&&Object.keys(this.query).length&&(i=y.stringify(this.query));var s=this.search||i&&"?"+i||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||A[t])&&!1!==r?(r="//"+(r||""),o&&"/"!==o.charAt(0)&&(o="/"+o)):r||(r=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),t+r+(o=o.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(s=s.replace("#","%23"))+n},v.prototype.resolve=function(e){return this.resolveObject(M(e,!1,!0)).format()},v.prototype.resolveObject=function(e){if(c(e)){var t=new v;t.parse(e,!1,!0),e=t}for(var o=new v,n=Object.keys(this),r=0;r<n.length;r++){var i=n[r];o[i]=this[i]}if(o.hash=e.hash,""===e.href)return o.href=o.format(),o;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),a=0;a<s.length;a++){var l=s[a];"protocol"!==l&&(o[l]=e[l])}return A[o.protocol]&&o.hostname&&!o.pathname&&(o.path=o.pathname="/"),o.href=o.format(),o}if(e.protocol&&e.protocol!==o.protocol){if(!A[e.protocol]){for(var u=Object.keys(e),p=0;p<u.length;p++){var f=u[p];o[f]=e[f]}return o.href=o.format(),o}if(o.protocol=e.protocol,e.host||T[e.protocol])o.pathname=e.pathname;else{for(var m=(e.pathname||"").split("/");m.length&&!(e.host=m.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==m[0]&&m.unshift(""),m.length<2&&m.unshift(""),o.pathname=m.join("/")}if(o.search=e.search,o.query=e.query,o.host=e.host||"",o.auth=e.auth,o.hostname=e.hostname||e.host,o.port=e.port,o.pathname||o.search){var g=o.pathname||"",y=o.search||"";o.path=g+y}return o.slashes=o.slashes||e.slashes,o.href=o.format(),o}var _=o.pathname&&"/"===o.pathname.charAt(0),b=e.host||e.pathname&&"/"===e.pathname.charAt(0),w=b||_||o.host&&e.pathname,E=w,O=o.pathname&&o.pathname.split("/")||[],S=(m=e.pathname&&e.pathname.split("/")||[],o.protocol&&!A[o.protocol]);if(S&&(o.hostname="",o.port=null,o.host&&(""===O[0]?O[0]=o.host:O.unshift(o.host)),o.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===m[0]?m[0]=e.host:m.unshift(e.host)),e.host=null),w=w&&(""===m[0]||""===O[0])),b)o.host=e.host||""===e.host?e.host:o.host,o.hostname=e.hostname||""===e.hostname?e.hostname:o.hostname,o.search=e.search,o.query=e.query,O=m;else if(m.length)O||(O=[]),O.pop(),O=O.concat(m),o.search=e.search,o.query=e.query;else if(!h(e.search)){if(S)o.hostname=o.host=O.shift(),(M=!!(o.host&&o.host.indexOf("@")>0)&&o.host.split("@"))&&(o.auth=M.shift(),o.host=o.hostname=M.shift());return o.search=e.search,o.query=e.query,d(o.pathname)&&d(o.search)||(o.path=(o.pathname?o.pathname:"")+(o.search?o.search:"")),o.href=o.format(),o}if(!O.length)return o.pathname=null,o.search?o.path="/"+o.search:o.path=null,o.href=o.format(),o;for(var x=O.slice(-1)[0],C=(o.host||e.host||O.length>1)&&("."===x||".."===x)||""===x,j=0,P=O.length;P>=0;P--)"."===(x=O[P])?O.splice(P,1):".."===x?(O.splice(P,1),j++):j&&(O.splice(P,1),j--);if(!w&&!E)for(;j--;j)O.unshift("..");!w||""===O[0]||O[0]&&"/"===O[0].charAt(0)||O.unshift(""),C&&"/"!==O.join("/").substr(-1)&&O.push("");var M,I=""===O[0]||O[0]&&"/"===O[0].charAt(0);S&&(o.hostname=o.host=I?"":O.length?O.shift():"",(M=!!(o.host&&o.host.indexOf("@")>0)&&o.host.split("@"))&&(o.auth=M.shift(),o.host=o.hostname=M.shift()));return(w=w||o.host&&O.length)&&!I&&O.unshift(""),O.length?o.pathname=O.join("/"):(o.pathname=null,o.path=null),d(o.pathname)&&d(o.search)||(o.path=(o.pathname?o.pathname:"")+(o.search?o.search:"")),o.auth=e.auth||o.auth,o.slashes=o.slashes||e.slashes,o.href=o.format(),o},v.prototype.parseHost=function(){var e=this.host,t=b.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};function I(e,...t){for(const o of t)for(const t in o)e[t]=o[t];return e}class R extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class L{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[e,o]of t)this.bindings[e]=o}concat(e){return new L(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const k={kind:"null"},G={kind:"number"},N={kind:"string"},D={kind:"boolean"},F={kind:"color"},U={kind:"object"},B={kind:"value"},z={kind:"collator"},V={kind:"formatted"},W={kind:"resolvedImage"};function q(e,t){return{kind:"array",itemType:e,N:t}}function H(e){if("array"===e.kind){const t=H(e.itemType);return"number"==typeof e.N?`array<${t}, ${e.N}>`:"value"===e.itemType.kind?"array":`array<${t}>`}return e.kind}const Y=[k,G,N,D,F,V,U,q(B),W];function X(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!X(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(const e of Y)if(!X(e,t))return null}return`Expected ${H(e)} but found ${H(t)} instead.`}function Z(e,t){return t.some(t=>t.kind===e.kind)}function K(e,t){return t.some(t=>"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e)}var J=s((function(e,t){var o={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function n(e){return(e=Math.round(e))<0?0:e>255?255:e}function r(e){return e<0?0:e>1?1:e}function i(e){return"%"===e[e.length-1]?n(parseFloat(e)/100*255):n(parseInt(e))}function s(e){return"%"===e[e.length-1]?r(parseFloat(e)/100):r(parseFloat(e))}function a(e,t,o){return o<0?o+=1:o>1&&(o-=1),6*o<1?e+(t-e)*o*6:2*o<1?t:3*o<2?e+(t-e)*(2/3-o)*6:e}try{t.parseCSSColor=function(e){var t,r=e.replace(/ /g,"").toLowerCase();if(r in o)return o[r].slice();if("#"===r[0])return 4===r.length?(t=parseInt(r.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===r.length&&(t=parseInt(r.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var l=r.indexOf("("),c=r.indexOf(")");if(-1!==l&&c+1===r.length){var u=r.substr(0,l),d=r.substr(l+1,c-(l+1)).split(","),h=1;switch(u){case"rgba":if(4!==d.length)return null;h=s(d.pop());case"rgb":return 3!==d.length?null:[i(d[0]),i(d[1]),i(d[2]),h];case"hsla":if(4!==d.length)return null;h=s(d.pop());case"hsl":if(3!==d.length)return null;var p=(parseFloat(d[0])%360+360)%360/360,f=s(d[1]),m=s(d[2]),g=m<=.5?m*(f+1):m+f-m*f,y=2*m-g;return[n(255*a(y,g,p+1/3)),n(255*a(y,g,p)),n(255*a(y,g,p-1/3)),h];default:return null}}return null}}catch(e){}}));class Q{constructor(e,t,o,n=1){this.r=e,this.g=t,this.b=o,this.a=n}static parse(e){if(!e)return;if(e instanceof Q)return e;if("string"!=typeof e)return;const t=J.parseCSSColor(e);return t?new Q(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3]):void 0}toString(){const[e,t,o,n]=this.toArray();return`rgba(${Math.round(e)},${Math.round(t)},${Math.round(o)},${n})`}toArray(){const{r:e,g:t,b:o,a:n}=this;return 0===n?[0,0,0,0]:[255*e/n,255*t/n,255*o/n,n]}}Q.black=new Q(0,0,0,1),Q.white=new Q(1,1,1,1),Q.transparent=new Q(0,0,0,0),Q.red=new Q(1,0,0,1),Q.blue=new Q(0,0,1,1);class ${constructor(e,t,o){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=o,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ee{constructor(e,t,o,n,r){this.text=e,this.image=t,this.scale=o,this.fontStack=n,this.textColor=r}}class te{constructor(e){this.sections=e}static fromString(e){return new te([new ee(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(e=>0!==e.text.length||e.image&&0!==e.image.name.length)}static factory(e){return e instanceof te?e:te.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const t of this.sections){if(t.image){e.push(["image",t.image.name]);continue}e.push(t.text);const o={};t.fontStack&&(o["text-font"]=["literal",t.fontStack.split(",")]),t.scale&&(o["font-scale"]=t.scale),t.textColor&&(o["text-color"]=["rgba"].concat(t.textColor.toArray())),e.push(o)}return e}}class oe{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new oe({name:e,available:!1}):null}serialize(){return["image",this.name]}}function ne(e,t,o,n){if(!("number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof o&&o>=0&&o<=255)){return`Invalid rgba value [${("number"==typeof n?[e,t,o,n]:[e,t,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}return void 0===n||"number"==typeof n&&n>=0&&n<=1?null:`Invalid rgba value [${[e,t,o,n].join(", ")}]: 'a' must be between 0 and 1.`}function re(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof Q)return!0;if(e instanceof $)return!0;if(e instanceof te)return!0;if(e instanceof oe)return!0;if(Array.isArray(e)){for(const t of e)if(!re(t))return!1;return!0}if("object"==typeof e){for(const t in e)if(!re(e[t]))return!1;return!0}return!1}function ie(e){if(null===e)return k;if("string"==typeof e)return N;if("boolean"==typeof e)return D;if("number"==typeof e)return G;if(e instanceof Q)return F;if(e instanceof $)return z;if(e instanceof te)return V;if(e instanceof oe)return W;if(Array.isArray(e)){const t=e.length;let o;for(const t of e){const e=ie(t);if(o){if(o===e)continue;o=B;break}o=e}return q(o||B,t)}return U}function se(e){const t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof Q||e instanceof te||e instanceof oe?e.toString():JSON.stringify(e)}class ae{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(2!==e.length)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!re(e[1]))return t.error("invalid value");const o=e[1];let n=ie(o);const r=t.expectedType;return"array"!==n.kind||0!==n.N||!r||"array"!==r.kind||"number"==typeof r.N&&0!==r.N||(n=r),new ae(n,o)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Q?["rgba"].concat(this.value.toArray()):this.value instanceof te?this.value.serialize():this.value}}class le{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const ce={string:N,number:G,boolean:D,object:U};class ue{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let o,n=1;const r=e[0];if("array"===r){let r,i;if(e.length>2){const o=e[1];if("string"!=typeof o||!(o in ce)||"object"===o)return t.error('The item type argument of "array" must be one of string, number, boolean',1);r=ce[o],n++}else r=B;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);i=e[2],n++}o=q(r,i)}else o=ce[r];const i=[];for(;n<e.length;n++){const o=t.parse(e[n],n,B);if(!o)return null;i.push(o)}return new ue(o,i)}evaluate(e){for(let t=0;t<this.args.length;t++){const o=this.args[t].evaluate(e);if(!X(this.type,ie(o)))return o;if(t===this.args.length-1)throw new le(`Expected value to be of type ${H(this.type)}, but found ${H(ie(o))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,t=[e.kind];if("array"===e.kind){const o=e.itemType;if("string"===o.kind||"number"===o.kind||"boolean"===o.kind){t.push(o.kind);const n=e.N;("number"==typeof n||this.args.length>1)&&t.push(n)}}return t.concat(this.args.map(e=>e.serialize()))}}class de{constructor(e){this.type=V,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const o=e[1];if(!Array.isArray(o)&&"object"==typeof o)return t.error("First argument must be an image or text section.");const n=[];let r=!1;for(let o=1;o<=e.length-1;++o){const i=e[o];if(r&&"object"==typeof i&&!Array.isArray(i)){r=!1;let e=null;if(i["font-scale"]&&(e=t.parse(i["font-scale"],1,G),!e))return null;let o=null;if(i["text-font"]&&(o=t.parse(i["text-font"],1,q(N)),!o))return null;let s=null;if(i["text-color"]&&(s=t.parse(i["text-color"],1,F),!s))return null;const a=n[n.length-1];a.scale=e,a.font=o,a.textColor=s}else{const i=t.parse(e[o],1,B);if(!i)return null;const s=i.type.kind;if("string"!==s&&"value"!==s&&"null"!==s&&"resolvedImage"!==s)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");r=!0,n.push({content:i,scale:null,font:null,textColor:null})}}return new de(n)}evaluate(e){return new te(this.sections.map(t=>{const o=t.content.evaluate(e);return ie(o)===W?new ee("",o,null,null,null):new ee(se(o),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)}))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const t of this.sections){e.push(t.content.serialize());const o={};t.scale&&(o["font-scale"]=t.scale.serialize()),t.font&&(o["text-font"]=t.font.serialize()),t.textColor&&(o["text-color"]=t.textColor.serialize()),e.push(o)}return e}}class he{constructor(e){this.type=W,this.input=e}static parse(e,t){if(2!==e.length)return t.error("Expected two arguments.");const o=t.parse(e[1],1,N);return o?new he(o):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),o=oe.fromString(t);return o&&e.availableImages&&(o.available=e.availableImages.indexOf(t)>-1),o}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const pe={"to-boolean":D,"to-color":F,"to-number":G,"to-string":N};class fe{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const o=e[0];if(("to-boolean"===o||"to-string"===o)&&2!==e.length)return t.error("Expected one argument.");const n=pe[o],r=[];for(let o=1;o<e.length;o++){const n=t.parse(e[o],o,B);if(!n)return null;r.push(n)}return new fe(n,r)}evaluate(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){let t,o;for(const n of this.args){if(t=n.evaluate(e),o=null,t instanceof Q)return t;if("string"==typeof t){const o=e.parseColor(t);if(o)return o}else if(Array.isArray(t)&&(o=t.length<3||t.length>4?`Invalid rbga value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:ne(t[0],t[1],t[2],t[3]),!o))return new Q(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new le(o||`Could not parse color from value '${"string"==typeof t?t:String(JSON.stringify(t))}'`)}if("number"===this.type.kind){let t=null;for(const o of this.args){if(t=o.evaluate(e),null===t)return 0;const n=Number(t);if(!isNaN(n))return n}throw new le(`Could not convert ${JSON.stringify(t)} to number.`)}return"formatted"===this.type.kind?te.fromString(se(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?oe.fromString(se(this.args[0].evaluate(e))):se(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if("formatted"===this.type.kind)return new de([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new he(this.args[0]).serialize();const e=["to-"+this.type.kind];return this.eachChild(t=>{e.push(t.serialize())}),e}}const me=["Unknown","Point","LineString","Polygon"];class ge{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?me[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=Q.parse(e)),t}}class ye{constructor(e,t,o,n){this.name=e,this.type=t,this._evaluate=o,this.args=n}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,t){const o=e[0],n=ye.definitions[o];if(!n)return t.error(`Unknown expression "${o}". If you wanted a literal array, use ["literal", [...]].`,0);const r=Array.isArray(n)?n[0]:n.type,i=Array.isArray(n)?[[n[1],n[2]]]:n.overloads,s=i.filter(([t])=>!Array.isArray(t)||t.length===e.length-1);let a=null;for(const[n,i]of s){a=new Ue(t.registry,t.path,null,t.scope);const s=[];let l=!1;for(let t=1;t<e.length;t++){const o=e[t],r=Array.isArray(n)?n[t-1]:n.type,i=a.parse(o,1+s.length,r);if(!i){l=!0;break}s.push(i)}if(!l)if(Array.isArray(n)&&n.length!==s.length)a.error(`Expected ${n.length} arguments, but found ${s.length} instead.`);else{for(let e=0;e<s.length;e++){const t=Array.isArray(n)?n[e]:n.type,o=s[e];a.concat(e+1).checkSubtype(t,o.type)}if(0===a.errors.length)return new ye(o,r,i,s)}}if(1===s.length)t.errors.push(...a.errors);else{const o=(s.length?s:i).map(([e])=>{return t=e,Array.isArray(t)?`(${t.map(H).join(", ")})`:`(${H(t.type)}...)`;var t}).join(" | "),n=[];for(let o=1;o<e.length;o++){const r=t.parse(e[o],1+n.length);if(!r)return null;n.push(H(r.type))}t.error(`Expected arguments of type ${o}, but found (${n.join(", ")}) instead.`)}return null}static register(e,t){ye.definitions=t;for(const o in t)e[o]=ye}}class ve{constructor(e,t,o){this.type=z,this.locale=o,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(2!==e.length)return t.error("Expected one argument.");const o=e[1];if("object"!=typeof o||Array.isArray(o))return t.error("Collator options argument must be an object.");const n=t.parse(void 0!==o["case-sensitive"]&&o["case-sensitive"],1,D);if(!n)return null;const r=t.parse(void 0!==o["diacritic-sensitive"]&&o["diacritic-sensitive"],1,D);if(!r)return null;let i=null;return o.locale&&(i=t.parse(o.locale,1,N),!i)?null:new ve(n,r,i)}evaluate(e){return new $(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}function _e(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function be(e,t){return!(e[0]<=t[0])&&(!(e[2]>=t[2])&&(!(e[1]<=t[1])&&!(e[3]>=t[3])))}function we(e,t){const o=(180+e[0])/360;const n=(r=e[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360);var r;const i=Math.pow(2,t.z);return[Math.round(o*i*8192),Math.round(n*i*8192)]}function Ee(e,t,o){const n=e[0]-t[0],r=e[1]-t[1],i=e[0]-o[0],s=e[1]-o[1];return n*s-i*r==0&&n*i<=0&&r*s<=0}function Oe(e,t){let o=!1;for(let s=0,a=t.length;s<a;s++){const a=t[s];for(let t=0,s=a.length;t<s-1;t++){if(Ee(e,a[t],a[t+1]))return!1;n=e,r=a[t],i=a[t+1],r[1]>n[1]!=i[1]>n[1]&&n[0]<(i[0]-r[0])*(n[1]-r[1])/(i[1]-r[1])+r[0]&&(o=!o)}}var n,r,i;return o}function Se(e,t){for(let o=0;o<t.length;o++)if(Oe(e,t[o]))return!0;return!1}function xe(e,t,o,n){const r=e[0]-o[0],i=e[1]-o[1],s=t[0]-o[0],a=t[1]-o[1],l=n[0]-o[0],c=n[1]-o[1],u=r*c-l*i,d=s*c-l*a;return u>0&&d<0||u<0&&d>0}function Ce(e,t,o,n){const r=[t[0]-e[0],t[1]-e[1]],i=[n[0]-o[0],n[1]-o[1]];return 0!=(s=i)[0]*(a=r)[1]-s[1]*a[0]&&!(!xe(e,t,o,n)||!xe(o,n,e,t));var s,a}function je(e,t,o){for(const n of o)for(let o=0;o<n.length-1;++o)if(Ce(e,t,n[o],n[o+1]))return!0;return!1}function Pe(e,t){for(let o=0;o<e.length;++o)if(!Oe(e[o],t))return!1;for(let o=0;o<e.length-1;++o)if(je(e[o],e[o+1],t))return!1;return!0}function Te(e,t){for(let o=0;o<t.length;o++)if(Pe(e,t[o]))return!0;return!1}function Ae(e,t,o){const n=[];for(let r=0;r<e.length;r++){const i=[];for(let n=0;n<e[r].length;n++){const s=we(e[r][n],o);_e(t,s),i.push(s)}n.push(i)}return n}function Me(e,t,o){const n=[];for(let r=0;r<e.length;r++){const i=Ae(e[r],t,o);n.push(i)}return n}function Ie(e,t,o,n){if(e[0]<o[0]||e[0]>o[2]){const t=.5*n;let r=e[0]-o[0]>t?-n:o[0]-e[0]>t?n:0;0===r&&(r=e[0]-o[2]>t?-n:o[2]-e[0]>t?n:0),e[0]+=r}_e(t,e)}function Re(e,t,o,n){const r=8192*Math.pow(2,n.z),i=[8192*n.x,8192*n.y],s=[];for(const n of e)for(const e of n){const n=[e.x+i[0],e.y+i[1]];Ie(n,t,o,r),s.push(n)}return s}function Le(e,t,o,n){const r=8192*Math.pow(2,n.z),i=[8192*n.x,8192*n.y],s=[];for(const o of e){const e=[];for(const n of o){const o=[n.x+i[0],n.y+i[1]];_e(t,o),e.push(o)}s.push(e)}if(t[2]-t[0]<=r/2){(a=t)[0]=a[1]=1/0,a[2]=a[3]=-1/0;for(const e of s)for(const n of e)Ie(n,t,o,r)}var a;return s}class ke{constructor(e,t){this.type=D,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(re(e[1])){const t=e[1];if("FeatureCollection"===t.type)for(let e=0;e<t.features.length;++e){const o=t.features[e].geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new ke(t,t.features[e].geometry)}else if("Feature"===t.type){const e=t.geometry.type;if("Polygon"===e||"MultiPolygon"===e)return new ke(t,t.geometry)}else if("Polygon"===t.type||"MultiPolygon"===t.type)return new ke(t,t)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){const o=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],r=e.canonicalID();if("Polygon"===t.type){const i=Ae(t.coordinates,n,r),s=Re(e.geometry(),o,n,r);if(!be(o,n))return!1;for(const e of s)if(!Oe(e,i))return!1}if("MultiPolygon"===t.type){const i=Me(t.coordinates,n,r),s=Re(e.geometry(),o,n,r);if(!be(o,n))return!1;for(const e of s)if(!Se(e,i))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){const o=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],r=e.canonicalID();if("Polygon"===t.type){const i=Ae(t.coordinates,n,r),s=Le(e.geometry(),o,n,r);if(!be(o,n))return!1;for(const e of s)if(!Pe(e,i))return!1}if("MultiPolygon"===t.type){const i=Me(t.coordinates,n,r),s=Le(e.geometry(),o,n,r);if(!be(o,n))return!1;for(const e of s)if(!Te(e,i))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function Ge(e){if(e instanceof ye){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof ke)return!1;let t=!0;return e.eachChild(e=>{t&&!Ge(e)&&(t=!1)}),t}function Ne(e){if(e instanceof ye&&"feature-state"===e.name)return!1;let t=!0;return e.eachChild(e=>{t&&!Ne(e)&&(t=!1)}),t}function De(e,t){if(e instanceof ye&&t.indexOf(e.name)>=0)return!1;let o=!0;return e.eachChild(e=>{o&&!De(e,t)&&(o=!1)}),o}class Fe{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");const o=e[1];return t.scope.has(o)?new Fe(o,t.scope.get(o)):t.error(`Unknown variable "${o}". Make sure "${o}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class Ue{constructor(e,t=[],o,n=new L,r=[]){this.registry=e,this.path=t,this.key=t.map(e=>`[${e}]`).join(""),this.scope=n,this.errors=r,this.expectedType=o}parse(e,t,o,n,r={}){return t?this.concat(t,o,n)._parse(e,r):this._parse(e,r)}_parse(e,t){function o(e,t,o){return"assert"===o?new ue(t,[e]):"coerce"===o?new fe(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const n=e[0];if("string"!=typeof n)return this.error(`Expression name must be a string, but found ${typeof n} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const r=this.registry[n];if(r){let n=r.parse(e,this);if(!n)return null;if(this.expectedType){const e=this.expectedType,r=n.type;if("string"!==e.kind&&"number"!==e.kind&&"boolean"!==e.kind&&"object"!==e.kind&&"array"!==e.kind||"value"!==r.kind)if("color"!==e.kind&&"formatted"!==e.kind&&"resolvedImage"!==e.kind||"value"!==r.kind&&"string"!==r.kind){if(this.checkSubtype(e,r))return null}else n=o(n,e,t.typeAnnotation||"coerce");else n=o(n,e,t.typeAnnotation||"assert")}if(!(n instanceof ae)&&"resolvedImage"!==n.type.kind&&function e(t){if(t instanceof Fe)return e(t.boundExpression);if(t instanceof ye&&"error"===t.name)return!1;if(t instanceof ve)return!1;if(t instanceof ke)return!1;const o=t instanceof fe||t instanceof ue;let n=!0;if(t.eachChild(t=>{n=o?n&&e(t):n&&t instanceof ae}),!n)return!1;return Ge(t)&&De(t,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script"])}(n)){const e=new ge;try{n=new ae(n.type,n.evaluate(e))}catch(e){return this.error(e.message),null}}return n}return this.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0)}return void 0===e?this.error("'undefined' value invalid. Use null instead."):"object"==typeof e?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,o){const n="number"==typeof e?this.path.concat(e):this.path,r=o?this.scope.concat(o):this.scope;return new Ue(this.registry,n,t||null,r,this.errors)}error(e,...t){const o=`${this.key}${t.map(e=>`[${e}]`).join("")}`;this.errors.push(new R(o,e))}checkSubtype(e,t){const o=X(e,t);return o&&this.error(o),o}}function Be(e,t){const o=e.length-1;let n,r,i=0,s=o,a=0;for(;i<=s;)if(a=Math.floor((i+s)/2),n=e[a],r=e[a+1],n<=t){if(a===o||t<r)return a;i=a+1}else{if(!(n>t))throw new le("Input is not a number.");s=a-1}return 0}class ze{constructor(e,t,o){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[e,t]of o)this.labels.push(e),this.outputs.push(t)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");const o=t.parse(e[1],1,G);if(!o)return null;const n=[];let r=null;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);for(let o=1;o<e.length;o+=2){const i=1===o?-1/0:e[o],s=e[o+1],a=o,l=o+1;if("number"!=typeof i)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',a);if(n.length&&n[n.length-1][0]>=i)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',a);const c=t.parse(s,l,r);if(!c)return null;r=r||c.type,n.push([i,c])}return new ze(r,o,n)}evaluate(e){const t=this.labels,o=this.outputs;if(1===t.length)return o[0].evaluate(e);const n=this.input.evaluate(e);if(n<=t[0])return o[0].evaluate(e);const r=t.length;if(n>=t[r-1])return o[r-1].evaluate(e);return o[Be(t,n)].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}var Ve=We;function We(e,t,o,n){this.cx=3*e,this.bx=3*(o-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(n-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=n,this.p2x=o,this.p2y=n}function qe(e,t,o){return e*(1-o)+t*o}We.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},We.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},We.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},We.prototype.solveCurveX=function(e,t){var o,n,r,i,s;for(void 0===t&&(t=1e-6),r=e,s=0;s<8;s++){if(i=this.sampleCurveX(r)-e,Math.abs(i)<t)return r;var a=this.sampleCurveDerivativeX(r);if(Math.abs(a)<1e-6)break;r-=i/a}if((r=e)<(o=0))return o;if(r>(n=1))return n;for(;o<n;){if(i=this.sampleCurveX(r),Math.abs(i-e)<t)return r;e>i?o=r:n=r,r=.5*(n-o)+o}return r},We.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var He=Object.freeze({__proto__:null,number:qe,color:function(e,t,o){return new Q(qe(e.r,t.r,o),qe(e.g,t.g,o),qe(e.b,t.b,o),qe(e.a,t.a,o))},array:function(e,t,o){return e.map((e,n)=>qe(e,t[n],o))}});const Ye=6/29,Xe=3*Ye*Ye,Ze=Math.PI/180,Ke=180/Math.PI;function Je(e){return e>.008856451679035631?Math.pow(e,1/3):e/Xe+4/29}function Qe(e){return e>Ye?e*e*e:Xe*(e-4/29)}function $e(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function et(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function tt(e){const t=et(e.r),o=et(e.g),n=et(e.b),r=Je((.4124564*t+.3575761*o+.1804375*n)/.95047),i=Je((.2126729*t+.7151522*o+.072175*n)/1);return{l:116*i-16,a:500*(r-i),b:200*(i-Je((.0193339*t+.119192*o+.9503041*n)/1.08883)),alpha:e.a}}function ot(e){let t=(e.l+16)/116,o=isNaN(e.a)?t:t+e.a/500,n=isNaN(e.b)?t:t-e.b/200;return t=1*Qe(t),o=.95047*Qe(o),n=1.08883*Qe(n),new Q($e(3.2404542*o-1.5371385*t-.4985314*n),$e(-.969266*o+1.8760108*t+.041556*n),$e(.0556434*o-.2040259*t+1.0572252*n),e.alpha)}function nt(e,t,o){const n=t-e;return e+o*(n>180||n<-180?n-360*Math.round(n/360):n)}const rt={forward:tt,reverse:ot,interpolate:function(e,t,o){return{l:qe(e.l,t.l,o),a:qe(e.a,t.a,o),b:qe(e.b,t.b,o),alpha:qe(e.alpha,t.alpha,o)}}},it={forward:function(e){const{l:t,a:o,b:n}=tt(e),r=Math.atan2(n,o)*Ke;return{h:r<0?r+360:r,c:Math.sqrt(o*o+n*n),l:t,alpha:e.a}},reverse:function(e){const t=e.h*Ze,o=e.c;return ot({l:e.l,a:Math.cos(t)*o,b:Math.sin(t)*o,alpha:e.alpha})},interpolate:function(e,t,o){return{h:nt(e.h,t.h,o),c:qe(e.c,t.c,o),l:qe(e.l,t.l,o),alpha:qe(e.alpha,t.alpha,o)}}};var st=Object.freeze({__proto__:null,lab:rt,hcl:it});class at{constructor(e,t,o,n,r){this.type=e,this.operator=t,this.interpolation=o,this.input=n,this.labels=[],this.outputs=[];for(const[e,t]of r)this.labels.push(e),this.outputs.push(t)}static interpolationFactor(e,t,o,n){let r=0;if("exponential"===e.name)r=lt(t,e.base,o,n);else if("linear"===e.name)r=lt(t,1,o,n);else if("cubic-bezier"===e.name){const i=e.controlPoints;r=new Ve(i[0],i[1],i[2],i[3]).solve(lt(t,1,o,n))}return r}static parse(e,t){let[o,n,r,...i]=e;if(!Array.isArray(n)||0===n.length)return t.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){const e=n[1];if("number"!=typeof e)return t.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:e}}else{if("cubic-bezier"!==n[0])return t.error("Unknown interpolation type "+String(n[0]),1,0);{const e=n.slice(1);if(4!==e.length||e.some(e=>"number"!=typeof e||e<0||e>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:e}}}if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(r=t.parse(r,2,G),!r)return null;const s=[];let a=null;"interpolate-hcl"===o||"interpolate-lab"===o?a=F:t.expectedType&&"value"!==t.expectedType.kind&&(a=t.expectedType);for(let e=0;e<i.length;e+=2){const o=i[e],n=i[e+1],r=e+3,l=e+4;if("number"!=typeof o)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',r);if(s.length&&s[s.length-1][0]>=o)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',r);const c=t.parse(n,l,a);if(!c)return null;a=a||c.type,s.push([o,c])}return"number"===a.kind||"color"===a.kind||"array"===a.kind&&"number"===a.itemType.kind&&"number"==typeof a.N?new at(a,o,n,r,s):t.error(`Type ${H(a)} is not interpolatable.`)}evaluate(e){const t=this.labels,o=this.outputs;if(1===t.length)return o[0].evaluate(e);const n=this.input.evaluate(e);if(n<=t[0])return o[0].evaluate(e);const r=t.length;if(n>=t[r-1])return o[r-1].evaluate(e);const i=Be(t,n),s=t[i],a=t[i+1],l=at.interpolationFactor(this.interpolation,n,s,a),c=o[i].evaluate(e),u=o[i+1].evaluate(e);return"interpolate"===this.operator?He[this.type.kind.toLowerCase()](c,u,l):"interpolate-hcl"===this.operator?it.reverse(it.interpolate(it.forward(c),it.forward(u),l)):rt.reverse(rt.interpolate(rt.forward(c),rt.forward(u),l))}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const t=[this.operator,e,this.input.serialize()];for(let e=0;e<this.labels.length;e++)t.push(this.labels[e],this.outputs[e].serialize());return t}}function lt(e,t,o,n){const r=n-o,i=e-o;return 0===r?0:1===t?i/r:(Math.pow(t,i)-1)/(Math.pow(t,r)-1)}class ct{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expectected at least one argument.");let o=null;const n=t.expectedType;n&&"value"!==n.kind&&(o=n);const r=[];for(const n of e.slice(1)){const e=t.parse(n,1+r.length,o,void 0,{typeAnnotation:"omit"});if(!e)return null;o=o||e.type,r.push(e)}const i=n&&r.some(e=>X(n,e.type));return new ct(i?B:o,r)}evaluate(e){let t,o=null,n=0;for(const r of this.args)if(n++,o=r.evaluate(e),o&&o instanceof oe&&!o.available&&(t||(t=o.name),o=null,n===this.args.length&&(o=t)),null!==o)break;return o}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(t=>{e.push(t.serialize())}),e}}class ut{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const o=[];for(let n=1;n<e.length-1;n+=2){const r=e[n];if("string"!=typeof r)return t.error(`Expected string, but found ${typeof r} instead.`,n);if(/[^a-zA-Z0-9_]/.test(r))return t.error("Variable names must contain only alphanumeric characters or '_'.",n);const i=t.parse(e[n+1],n+1);if(!i)return null;o.push([r,i])}const n=t.parse(e[e.length-1],e.length-1,t.expectedType,o);return n?new ut(o,n):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[t,o]of this.bindings)e.push(t,o.serialize());return e.push(this.result.serialize()),e}}class dt{constructor(e,t,o){this.type=e,this.index=t,this.input=o}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const o=t.parse(e[1],1,G),n=t.parse(e[2],2,q(t.expectedType||B));if(!o||!n)return null;const r=n.type;return new dt(r.itemType,o,n)}evaluate(e){const t=this.index.evaluate(e),o=this.input.evaluate(e);if(t<0)throw new le(`Array index out of bounds: ${t} < 0.`);if(t>=o.length)throw new le(`Array index out of bounds: ${t} > ${o.length-1}.`);if(t!==Math.floor(t))throw new le(`Array index must be an integer, but found ${t} instead.`);return o[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class ht{constructor(e,t){this.type=D,this.needle=e,this.haystack=t}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const o=t.parse(e[1],1,B),n=t.parse(e[2],2,B);return o&&n?Z(o.type,[D,N,G,k,B])?new ht(o,n):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${H(o.type)} instead`):null}evaluate(e){const t=this.needle.evaluate(e),o=this.haystack.evaluate(e);if(!o)return!1;if(!K(t,["boolean","string","number","null"]))throw new le(`Expected first argument to be of type boolean, string, number or null, but found ${H(ie(t))} instead.`);if(!K(o,["string","array"]))throw new le(`Expected second argument to be of type array or string, but found ${H(ie(o))} instead.`);return o.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class pt{constructor(e,t,o){this.type=G,this.needle=e,this.haystack=t,this.fromIndex=o}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const o=t.parse(e[1],1,B),n=t.parse(e[2],2,B);if(!o||!n)return null;if(!Z(o.type,[D,N,G,k,B]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${H(o.type)} instead`);if(4===e.length){const r=t.parse(e[3],3,G);return r?new pt(o,n,r):null}return new pt(o,n)}evaluate(e){const t=this.needle.evaluate(e),o=this.haystack.evaluate(e);if(!K(t,["boolean","string","number","null"]))throw new le(`Expected first argument to be of type boolean, string, number or null, but found ${H(ie(t))} instead.`);if(!K(o,["string","array"]))throw new le(`Expected second argument to be of type array or string, but found ${H(ie(o))} instead.`);if(this.fromIndex){const n=this.fromIndex.evaluate(e);return o.indexOf(t,n)}return o.indexOf(t)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class ft{constructor(e,t,o,n,r,i){this.inputType=e,this.type=t,this.input=o,this.cases=n,this.outputs=r,this.otherwise=i}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return t.error("Expected an even number of arguments.");let o,n;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);const r={},i=[];for(let s=2;s<e.length-1;s+=2){let a=e[s];const l=e[s+1];Array.isArray(a)||(a=[a]);const c=t.concat(s);if(0===a.length)return c.error("Expected at least one branch label.");for(const e of a){if("number"!=typeof e&&"string"!=typeof e)return c.error("Branch labels must be numbers or strings.");if("number"==typeof e&&Math.abs(e)>Number.MAX_SAFE_INTEGER)return c.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof e&&Math.floor(e)!==e)return c.error("Numeric branch labels must be integer values.");if(o){if(c.checkSubtype(o,ie(e)))return null}else o=ie(e);if(void 0!==r[String(e)])return c.error("Branch labels must be unique.");r[String(e)]=i.length}const u=t.parse(l,s,n);if(!u)return null;n=n||u.type,i.push(u)}const s=t.parse(e[1],1,B);if(!s)return null;const a=t.parse(e[e.length-1],e.length-1,n);return a?"value"!==s.type.kind&&t.concat(1).checkSubtype(o,s.type)?null:new ft(o,n,s,r,i,a):null}evaluate(e){const t=this.input.evaluate(e);return(ie(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],t=Object.keys(this.cases).sort(),o=[],n={};for(const e of t){const t=n[this.cases[e]];void 0===t?(n[this.cases[e]]=o.length,o.push([this.cases[e],[e]])):o[t][1].push(e)}const r=e=>"number"===this.inputType.kind?Number(e):e;for(const[t,n]of o)1===n.length?e.push(r(n[0])):e.push(n.map(r)),e.push(this.outputs[t].serialize());return e.push(this.otherwise.serialize()),e}}class mt{constructor(e,t,o){this.type=e,this.branches=t,this.otherwise=o}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return t.error("Expected an odd number of arguments.");let o;t.expectedType&&"value"!==t.expectedType.kind&&(o=t.expectedType);const n=[];for(let r=1;r<e.length-1;r+=2){const i=t.parse(e[r],r,D);if(!i)return null;const s=t.parse(e[r+1],r+1,o);if(!s)return null;n.push([i,s]),o=o||s.type}const r=t.parse(e[e.length-1],e.length-1,o);return r?new mt(o,n,r):null}evaluate(e){for(const[t,o]of this.branches)if(t.evaluate(e))return o.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,o]of this.branches)e(t),e(o);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(t=>{e.push(t.serialize())}),e}}class gt{constructor(e,t,o,n){this.type=e,this.input=t,this.beginIndex=o,this.endIndex=n}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const o=t.parse(e[1],1,B),n=t.parse(e[2],2,G);if(!o||!n)return null;if(!Z(o.type,[q(B),N,B]))return t.error(`Expected first argument to be of type array or string, but found ${H(o.type)} instead`);if(4===e.length){const r=t.parse(e[3],3,G);return r?new gt(o.type,o,n,r):null}return new gt(o.type,o,n)}evaluate(e){const t=this.input.evaluate(e),o=this.beginIndex.evaluate(e);if(!K(t,["string","array"]))throw new le(`Expected first argument to be of type array or string, but found ${H(ie(t))} instead.`);if(this.endIndex){const n=this.endIndex.evaluate(e);return t.slice(o,n)}return t.slice(o)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function yt(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function vt(e,t,o,n){return 0===n.compare(t,o)}function _t(e,t,o){const n="=="!==e&&"!="!==e;return class r{constructor(e,t,o){this.type=D,this.lhs=e,this.rhs=t,this.collator=o,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}static parse(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");const o=e[0];let i=t.parse(e[1],1,B);if(!i)return null;if(!yt(o,i.type))return t.concat(1).error(`"${o}" comparisons are not supported for type '${H(i.type)}'.`);let s=t.parse(e[2],2,B);if(!s)return null;if(!yt(o,s.type))return t.concat(2).error(`"${o}" comparisons are not supported for type '${H(s.type)}'.`);if(i.type.kind!==s.type.kind&&"value"!==i.type.kind&&"value"!==s.type.kind)return t.error(`Cannot compare types '${H(i.type)}' and '${H(s.type)}'.`);n&&("value"===i.type.kind&&"value"!==s.type.kind?i=new ue(s.type,[i]):"value"!==i.type.kind&&"value"===s.type.kind&&(s=new ue(i.type,[s])));let a=null;if(4===e.length){if("string"!==i.type.kind&&"string"!==s.type.kind&&"value"!==i.type.kind&&"value"!==s.type.kind)return t.error("Cannot use collator to compare non-string types.");if(a=t.parse(e[3],3,z),!a)return null}return new r(i,s,a)}evaluate(r){const i=this.lhs.evaluate(r),s=this.rhs.evaluate(r);if(n&&this.hasUntypedArgument){const t=ie(i),o=ie(s);if(t.kind!==o.kind||"string"!==t.kind&&"number"!==t.kind)throw new le(`Expected arguments for "${e}" to be (string, string) or (number, number), but found (${t.kind}, ${o.kind}) instead.`)}if(this.collator&&!n&&this.hasUntypedArgument){const e=ie(i),o=ie(s);if("string"!==e.kind||"string"!==o.kind)return t(r,i,s)}return this.collator?o(r,i,s,this.collator.evaluate(r)):t(r,i,s)}eachChild(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}outputDefined(){return!0}serialize(){const t=[e];return this.eachChild(e=>{t.push(e.serialize())}),t}}}const bt=_t("==",(function(e,t,o){return t===o}),vt),wt=_t("!=",(function(e,t,o){return t!==o}),(function(e,t,o,n){return!vt(0,t,o,n)})),Et=_t("<",(function(e,t,o){return t<o}),(function(e,t,o,n){return n.compare(t,o)<0})),Ot=_t(">",(function(e,t,o){return t>o}),(function(e,t,o,n){return n.compare(t,o)>0})),St=_t("<=",(function(e,t,o){return t<=o}),(function(e,t,o,n){return n.compare(t,o)<=0})),xt=_t(">=",(function(e,t,o){return t>=o}),(function(e,t,o,n){return n.compare(t,o)>=0}));class Ct{constructor(e,t,o,n,r){this.type=N,this.number=e,this.locale=t,this.currency=o,this.minFractionDigits=n,this.maxFractionDigits=r}static parse(e,t){if(3!==e.length)return t.error("Expected two arguments.");const o=t.parse(e[1],1,G);if(!o)return null;const n=e[2];if("object"!=typeof n||Array.isArray(n))return t.error("NumberFormat options argument must be an object.");let r=null;if(n.locale&&(r=t.parse(n.locale,1,N),!r))return null;let i=null;if(n.currency&&(i=t.parse(n.currency,1,N),!i))return null;let s=null;if(n["min-fraction-digits"]&&(s=t.parse(n["min-fraction-digits"],1,G),!s))return null;let a=null;return n["max-fraction-digits"]&&(a=t.parse(n["max-fraction-digits"],1,G),!a)?null:new Ct(o,r,i,s,a)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class jt{constructor(e){this.type=G,this.input=e}static parse(e,t){if(2!==e.length)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const o=t.parse(e[1],1);return o?"array"!==o.type.kind&&"string"!==o.type.kind&&"value"!==o.type.kind?t.error(`Expected argument of type string or array, but found ${H(o.type)} instead.`):new jt(o):null}evaluate(e){const t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new le(`Expected value to be of type string or array, but found ${H(ie(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(t=>{e.push(t.serialize())}),e}}const Pt={"==":bt,"!=":wt,">":Ot,"<":Et,">=":xt,"<=":St,array:ue,at:dt,boolean:ue,case:mt,coalesce:ct,collator:ve,format:de,image:he,in:ht,"index-of":pt,interpolate:at,"interpolate-hcl":at,"interpolate-lab":at,length:jt,let:ut,literal:ae,match:ft,number:ue,"number-format":Ct,object:ue,slice:gt,step:ze,string:ue,"to-boolean":fe,"to-color":fe,"to-number":fe,"to-string":fe,var:Fe,within:ke};function Tt(e,[t,o,n,r]){t=t.evaluate(e),o=o.evaluate(e),n=n.evaluate(e);const i=r?r.evaluate(e):1,s=ne(t,o,n,i);if(s)throw new le(s);return new Q(t/255*i,o/255*i,n/255*i,i)}function At(e,t){return e in t}function Mt(e,t){const o=t[e];return void 0===o?null:o}function It(e){return{type:e}}function Rt(e){return{result:"success",value:e}}function Lt(e){return{result:"error",value:e}}function kt(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function Gt(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Nt(e){return!!e.expression&&e.expression.interpolated}function Dt(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function Ft(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function Ut(e){return e}function Bt(e,t){const o="color"===t.type,n=e.stops&&"object"==typeof e.stops[0][0],r=n||void 0!==e.property,i=n||!r,s=e.type||(Nt(t)?"exponential":"interval");if(o&&((e=I({},e)).stops&&(e.stops=e.stops.map(e=>[e[0],Q.parse(e[1])])),e.default?e.default=Q.parse(e.default):e.default=Q.parse(t.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!st[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);let a,l,c;if("exponential"===s)a=qt;else if("interval"===s)a=Wt;else if("categorical"===s){a=Vt,l=Object.create(null);for(const t of e.stops)l[t[0]]=t[1];c=typeof e.stops[0][0]}else{if("identity"!==s)throw new Error(`Unknown function type "${s}"`);a=Ht}if(n){const o={},n=[];for(let t=0;t<e.stops.length;t++){const r=e.stops[t],i=r[0].zoom;void 0===o[i]&&(o[i]={zoom:i,type:e.type,property:e.property,default:e.default,stops:[]},n.push(i)),o[i].stops.push([r[0].value,r[1]])}const r=[];for(const e of n)r.push([o[e].zoom,Bt(o[e],t)]);const i={name:"linear"};return{kind:"composite",interpolationType:i,interpolationFactor:at.interpolationFactor.bind(void 0,i),zoomStops:r.map(e=>e[0]),evaluate:({zoom:o},n)=>qt({stops:r,base:e.base},t,o).evaluate(o,n)}}if(i){const o="exponential"===s?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:o,interpolationFactor:at.interpolationFactor.bind(void 0,o),zoomStops:e.stops.map(e=>e[0]),evaluate:({zoom:o})=>a(e,t,o,l,c)}}return{kind:"source",evaluate(o,n){const r=n&&n.properties?n.properties[e.property]:void 0;return void 0===r?zt(e.default,t.default):a(e,t,r,l,c)}}}function zt(e,t,o){return void 0!==e?e:void 0!==t?t:void 0!==o?o:void 0}function Vt(e,t,o,n,r){return zt(typeof o===r?n[o]:void 0,e.default,t.default)}function Wt(e,t,o){if("number"!==Dt(o))return zt(e.default,t.default);const n=e.stops.length;if(1===n)return e.stops[0][1];if(o<=e.stops[0][0])return e.stops[0][1];if(o>=e.stops[n-1][0])return e.stops[n-1][1];const r=Be(e.stops.map(e=>e[0]),o);return e.stops[r][1]}function qt(e,t,o){const n=void 0!==e.base?e.base:1;if("number"!==Dt(o))return zt(e.default,t.default);const r=e.stops.length;if(1===r)return e.stops[0][1];if(o<=e.stops[0][0])return e.stops[0][1];if(o>=e.stops[r-1][0])return e.stops[r-1][1];const i=Be(e.stops.map(e=>e[0]),o),s=function(e,t,o,n){const r=n-o,i=e-o;return 0===r?0:1===t?i/r:(Math.pow(t,i)-1)/(Math.pow(t,r)-1)}(o,n,e.stops[i][0],e.stops[i+1][0]),a=e.stops[i][1],l=e.stops[i+1][1];let c=He[t.type]||Ut;if(e.colorSpace&&"rgb"!==e.colorSpace){const t=st[e.colorSpace];c=(e,o)=>t.reverse(t.interpolate(t.forward(e),t.forward(o),s))}return"function"==typeof a.evaluate?{evaluate(...e){const t=a.evaluate.apply(void 0,e),o=l.evaluate.apply(void 0,e);if(void 0!==t&&void 0!==o)return c(t,o,s)}}:c(a,l,s)}function Ht(e,t,o){return"color"===t.type?o=Q.parse(o):"formatted"===t.type?o=te.fromString(o.toString()):"resolvedImage"===t.type?o=oe.fromString(o.toString()):Dt(o)===t.type||"enum"===t.type&&t.values[o]||(o=void 0),zt(o,e.default,t.default)}ye.register(Pt,{error:[{kind:"error"},[N],(e,[t])=>{throw new le(t.evaluate(e))}],typeof:[N,[B],(e,[t])=>H(ie(t.evaluate(e)))],"to-rgba":[q(G,4),[F],(e,[t])=>t.evaluate(e).toArray()],rgb:[F,[G,G,G],Tt],rgba:[F,[G,G,G,G],Tt],has:{type:D,overloads:[[[N],(e,[t])=>At(t.evaluate(e),e.properties())],[[N,U],(e,[t,o])=>At(t.evaluate(e),o.evaluate(e))]]},get:{type:B,overloads:[[[N],(e,[t])=>Mt(t.evaluate(e),e.properties())],[[N,U],(e,[t,o])=>Mt(t.evaluate(e),o.evaluate(e))]]},"feature-state":[B,[N],(e,[t])=>Mt(t.evaluate(e),e.featureState||{})],properties:[U,[],e=>e.properties()],"geometry-type":[N,[],e=>e.geometryType()],id:[B,[],e=>e.id()],zoom:[G,[],e=>e.globals.zoom],"heatmap-density":[G,[],e=>e.globals.heatmapDensity||0],"line-progress":[G,[],e=>e.globals.lineProgress||0],"sky-radial-progress":[G,[],e=>e.globals.skyRadialProgress||0],accumulated:[B,[],e=>void 0===e.globals.accumulated?null:e.globals.accumulated],"+":[G,It(G),(e,t)=>{let o=0;for(const n of t)o+=n.evaluate(e);return o}],"*":[G,It(G),(e,t)=>{let o=1;for(const n of t)o*=n.evaluate(e);return o}],"-":{type:G,overloads:[[[G,G],(e,[t,o])=>t.evaluate(e)-o.evaluate(e)],[[G],(e,[t])=>-t.evaluate(e)]]},"/":[G,[G,G],(e,[t,o])=>t.evaluate(e)/o.evaluate(e)],"%":[G,[G,G],(e,[t,o])=>t.evaluate(e)%o.evaluate(e)],ln2:[G,[],()=>Math.LN2],pi:[G,[],()=>Math.PI],e:[G,[],()=>Math.E],"^":[G,[G,G],(e,[t,o])=>Math.pow(t.evaluate(e),o.evaluate(e))],sqrt:[G,[G],(e,[t])=>Math.sqrt(t.evaluate(e))],log10:[G,[G],(e,[t])=>Math.log(t.evaluate(e))/Math.LN10],ln:[G,[G],(e,[t])=>Math.log(t.evaluate(e))],log2:[G,[G],(e,[t])=>Math.log(t.evaluate(e))/Math.LN2],sin:[G,[G],(e,[t])=>Math.sin(t.evaluate(e))],cos:[G,[G],(e,[t])=>Math.cos(t.evaluate(e))],tan:[G,[G],(e,[t])=>Math.tan(t.evaluate(e))],asin:[G,[G],(e,[t])=>Math.asin(t.evaluate(e))],acos:[G,[G],(e,[t])=>Math.acos(t.evaluate(e))],atan:[G,[G],(e,[t])=>Math.atan(t.evaluate(e))],min:[G,It(G),(e,t)=>Math.min(...t.map(t=>t.evaluate(e)))],max:[G,It(G),(e,t)=>Math.max(...t.map(t=>t.evaluate(e)))],abs:[G,[G],(e,[t])=>Math.abs(t.evaluate(e))],round:[G,[G],(e,[t])=>{const o=t.evaluate(e);return o<0?-Math.round(-o):Math.round(o)}],floor:[G,[G],(e,[t])=>Math.floor(t.evaluate(e))],ceil:[G,[G],(e,[t])=>Math.ceil(t.evaluate(e))],"filter-==":[D,[N,B],(e,[t,o])=>e.properties()[t.value]===o.value],"filter-id-==":[D,[B],(e,[t])=>e.id()===t.value],"filter-type-==":[D,[N],(e,[t])=>e.geometryType()===t.value],"filter-<":[D,[N,B],(e,[t,o])=>{const n=e.properties()[t.value],r=o.value;return typeof n==typeof r&&n<r}],"filter-id-<":[D,[B],(e,[t])=>{const o=e.id(),n=t.value;return typeof o==typeof n&&o<n}],"filter->":[D,[N,B],(e,[t,o])=>{const n=e.properties()[t.value],r=o.value;return typeof n==typeof r&&n>r}],"filter-id->":[D,[B],(e,[t])=>{const o=e.id(),n=t.value;return typeof o==typeof n&&o>n}],"filter-<=":[D,[N,B],(e,[t,o])=>{const n=e.properties()[t.value],r=o.value;return typeof n==typeof r&&n<=r}],"filter-id-<=":[D,[B],(e,[t])=>{const o=e.id(),n=t.value;return typeof o==typeof n&&o<=n}],"filter->=":[D,[N,B],(e,[t,o])=>{const n=e.properties()[t.value],r=o.value;return typeof n==typeof r&&n>=r}],"filter-id->=":[D,[B],(e,[t])=>{const o=e.id(),n=t.value;return typeof o==typeof n&&o>=n}],"filter-has":[D,[B],(e,[t])=>t.value in e.properties()],"filter-has-id":[D,[],e=>null!==e.id()&&void 0!==e.id()],"filter-type-in":[D,[q(N)],(e,[t])=>t.value.indexOf(e.geometryType())>=0],"filter-id-in":[D,[q(B)],(e,[t])=>t.value.indexOf(e.id())>=0],"filter-in-small":[D,[N,q(B)],(e,[t,o])=>o.value.indexOf(e.properties()[t.value])>=0],"filter-in-large":[D,[N,q(B)],(e,[t,o])=>function(e,t,o,n){for(;o<=n;){const r=o+n>>1;if(t[r]===e)return!0;t[r]>e?n=r-1:o=r+1}return!1}(e.properties()[t.value],o.value,0,o.value.length-1)],all:{type:D,overloads:[[[D,D],(e,[t,o])=>t.evaluate(e)&&o.evaluate(e)],[It(D),(e,t)=>{for(const o of t)if(!o.evaluate(e))return!1;return!0}]]},any:{type:D,overloads:[[[D,D],(e,[t,o])=>t.evaluate(e)||o.evaluate(e)],[It(D),(e,t)=>{for(const o of t)if(o.evaluate(e))return!0;return!1}]]},"!":[D,[D],(e,[t])=>!t.evaluate(e)],"is-supported-script":[D,[N],(e,[t])=>{const o=e.globals&&e.globals.isSupportedScript;return!o||o(t.evaluate(e))}],upcase:[N,[N],(e,[t])=>t.evaluate(e).toUpperCase()],downcase:[N,[N],(e,[t])=>t.evaluate(e).toLowerCase()],concat:[N,It(B),(e,t)=>t.map(t=>se(t.evaluate(e))).join("")],"resolved-locale":[N,[z],(e,[t])=>t.evaluate(e).resolvedLocale()]});class Yt{constructor(e,t){var o;this.expression=e,this._warningHistory={},this._evaluator=new ge,this._defaultValue=t?"color"===(o=t).type&&Ft(o.default)?new Q(0,0,0,0):"color"===o.type?Q.parse(o.default)||null:void 0===o.default?null:o.default:null,this._enumValues=t&&"enum"===t.type?t.values:null}evaluateWithoutErrorHandling(e,t,o,n,r,i){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=o,this._evaluator.canonical=n,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=i,this.expression.evaluate(this._evaluator)}evaluate(e,t,o,n,r,i){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=o||null,this._evaluator.canonical=n,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=i||null;try{const e=this.expression.evaluate(this._evaluator);if(null==e||"number"==typeof e&&e!=e)return this._defaultValue;if(this._enumValues&&!(e in this._enumValues))throw new le(`Expected value to be one of ${Object.keys(this._enumValues).map(e=>JSON.stringify(e)).join(", ")}, but found ${JSON.stringify(e)} instead.`);return e}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}}}function Xt(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in Pt}function Zt(e,t){const o=new Ue(Pt,[],t?function(e){const t={color:F,string:N,number:G,enum:N,boolean:D,formatted:V,resolvedImage:W};if("array"===e.type)return q(t[e.value]||B,e.length);return t[e.type]}(t):void 0),n=o.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return n?Rt(new Yt(n,t)):Lt(o.errors)}class Kt{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!Ne(t.expression)}evaluateWithoutErrorHandling(e,t,o,n,r,i){return this._styleExpression.evaluateWithoutErrorHandling(e,t,o,n,r,i)}evaluate(e,t,o,n,r,i){return this._styleExpression.evaluate(e,t,o,n,r,i)}}class Jt{constructor(e,t,o,n){this.kind=e,this.zoomStops=o,this._styleExpression=t,this.isStateDependent="camera"!==e&&!Ne(t.expression),this.interpolationType=n}evaluateWithoutErrorHandling(e,t,o,n,r,i){return this._styleExpression.evaluateWithoutErrorHandling(e,t,o,n,r,i)}evaluate(e,t,o,n,r,i){return this._styleExpression.evaluate(e,t,o,n,r,i)}interpolationFactor(e,t,o){return this.interpolationType?at.interpolationFactor(this.interpolationType,e,t,o):0}}function Qt(e,t){if("error"===(e=Zt(e,t)).result)return e;const o=e.value.expression,n=Ge(o);if(!n&&!kt(t))return Lt([new R("","data expressions not supported")]);const r=De(o,["zoom"]);if(!r&&!Gt(t))return Lt([new R("","zoom expressions not supported")]);const i=function e(t){let o=null;if(t instanceof ut)o=e(t.result);else if(t instanceof ct){for(const n of t.args)if(o=e(n),o)break}else(t instanceof ze||t instanceof at)&&t.input instanceof ye&&"zoom"===t.input.name&&(o=t);if(o instanceof R)return o;return t.eachChild(t=>{const n=e(t);n instanceof R?o=n:!o&&n?o=new R("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):o&&n&&o!==n&&(o=new R("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),o}(o);if(!i&&!r)return Lt([new R("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(i instanceof R)return Lt([i]);if(i instanceof at&&!Nt(t))return Lt([new R("",'"interpolate" expressions cannot be used with this property')]);if(!i)return Rt(new Kt(n?"constant":"source",e.value));const s=i instanceof at?i.interpolation:void 0;return Rt(new Jt(n?"camera":"composite",e.value,i.labels,s))}class $t{constructor(e,t){this._parameters=e,this._specification=t,I(this,Bt(this._parameters,this._specification))}static deserialize(e){return new $t(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function eo(e){return"object"==typeof e?["literal",e]:e}function to(e,t){let o=e.stops;if(!o)return function(e,t){const o=["get",e.property];if(void 0===e.default)return"string"===t.type?["string",o]:o;if("enum"===t.type)return["match",o,Object.keys(t.values),o,e.default];{const n=["color"===t.type?"to-color":t.type,o,eo(e.default)];return"array"===t.type&&n.splice(1,0,t.value,t.length||null),n}}(e,t);const n=o&&"object"==typeof o[0][0],r=n||void 0!==e.property,i=n||!r;return o=o.map(e=>!r&&t.tokens&&"string"==typeof e[1]?[e[0],lo(e[1])]:[e[0],eo(e[1])]),n?function(e,t,o){const n={},r={},i=[];for(let t=0;t<o.length;t++){const s=o[t],a=s[0].zoom;void 0===n[a]&&(n[a]={zoom:a,type:e.type,property:e.property,default:e.default},r[a]=[],i.push(a)),r[a].push([s[0].value,s[1]])}if("exponential"===ao({},t)){const o=[oo(e),["linear"],["zoom"]];for(const e of i){const i=ro(n[e],t,r[e]);so(o,e,i,!1)}return o}{const e=["step",["zoom"]];for(const o of i){const i=ro(n[o],t,r[o]);so(e,o,i,!0)}return io(e),e}}(e,t,o):i?function(e,t,o,n=["zoom"]){const r=ao(e,t);let i,s=!1;if("interval"===r)i=["step",n],s=!0;else{if("exponential"!==r)throw new Error(`Unknown zoom function type "${r}"`);{const t=void 0!==e.base?e.base:1;i=[oo(e),1===t?["linear"]:["exponential",t],n]}}for(const e of o)so(i,e[0],e[1],s);return io(i),i}(e,t,o):ro(e,t,o)}function oo(e){switch(e.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function no(e,t){const o=eo((n=e.default,r=t.default,void 0!==n?n:void 0!==r?r:void 0));var n,r;return void 0===o&&"resolvedImage"===t.type?"":o}function ro(e,t,o){const n=ao(e,t),r=["get",e.property];if("categorical"===n&&"boolean"==typeof o[0][0]){const n=["case"];for(const e of o)n.push(["==",r,e[0]],e[1]);return n.push(no(e,t)),n}if("categorical"===n){const n=["match",r];for(const e of o)so(n,e[0],e[1],!1);return n.push(no(e,t)),n}if("interval"===n){const t=["step",["number",r]];for(const e of o)so(t,e[0],e[1],!0);return io(t),void 0===e.default?t:["case",["==",["typeof",r],"number"],t,eo(e.default)]}if("exponential"===n){const t=void 0!==e.base?e.base:1,n=[oo(e),1===t?["linear"]:["exponential",t],["number",r]];for(const e of o)so(n,e[0],e[1],!1);return void 0===e.default?n:["case",["==",["typeof",r],"number"],n,eo(e.default)]}throw new Error("Unknown property function type "+n)}function io(e){"step"===e[0]&&3===e.length&&(e.push(0),e.push(e[3]))}function so(e,t,o,n){e.length>3&&t===e[e.length-2]||(n&&2===e.length||e.push(t),e.push(o))}function ao(e,t){return e.type?e.type:t.expression.interpolated?"exponential":"interval"}function lo(e){const t=["concat"],o=/{([^{}]+)}/g;let n=0;for(let r=o.exec(e);null!==r;r=o.exec(e)){const i=e.slice(n,o.lastIndex-r[0].length);n=o.lastIndex,i.length>0&&t.push(i),t.push(["get",r[1]])}if(1===t.length)return e;if(n<e.length)t.push(e.slice(n));else if(2===t.length)return["to-string",t[1]];return t}function co(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(const t of e.slice(1))if(!co(t)&&"boolean"!=typeof t)return!1;return!0;default:return!0}}const uo={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ho(e){if(null==e)return{filter:()=>!0,needGeometry:!1};co(e)||(e=fo(e));const t=Zt(e,uo);if("error"===t.result)throw new Error(t.value.map(e=>`${e.key}: ${e.message}`).join(", "));return{filter:(e,o,n)=>t.value.evaluate(e,o,{},n),needGeometry:function e(t){if(!Array.isArray(t))return!1;if("within"===t[0])return!0;for(let o=1;o<t.length;o++)if(e(t[o]))return!0;return!1}(e)}}function po(e,t){return e<t?-1:e>t?1:0}function fo(e){if(!e)return!0;const t=e[0];if(e.length<=1)return"any"!==t;var o;return"=="===t?mo(e[1],e[2],"=="):"!="===t?vo(mo(e[1],e[2],"==")):"<"===t||">"===t||"<="===t||">="===t?mo(e[1],e[2],t):"any"===t?(o=e.slice(1),["any"].concat(o.map(fo))):"all"===t?["all"].concat(e.slice(1).map(fo)):"none"===t?["all"].concat(e.slice(1).map(fo).map(vo)):"in"===t?go(e[1],e.slice(2)):"!in"===t?vo(go(e[1],e.slice(2))):"has"===t?yo(e[1]):"!has"===t?vo(yo(e[1])):"within"!==t||e}function mo(e,t,o){switch(e){case"$type":return["filter-type-"+o,t];case"$id":return["filter-id-"+o,t];default:return["filter-"+o,e,t]}}function go(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(e=>typeof e!=typeof t[0])?["filter-in-large",e,["literal",t.sort(po)]]:["filter-in-small",e,["literal",t]]}}function yo(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function vo(e){return["!",e]}var _o=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function bo(e,t){const o={};for(const t in e)"ref"!==t&&(o[t]=e[t]);return _o.forEach(e=>{e in t&&(o[e]=t[e])}),o}function wo(e){e=e.slice();const t=Object.create(null);for(let o=0;o<e.length;o++)t[e[o].id]=e[o];for(let o=0;o<e.length;o++)"ref"in e[o]&&(e[o]=bo(e[o],t[e[o].ref]));return e}class Eo{constructor(e,t,o,n){this.message=(e?e+": ":"")+o,n&&(this.identifier=n),null!=t&&t.__line__&&(this.line=t.__line__)}}class Oo{constructor(e){this.error=e,this.message=e.message;const t=e.message.match(/line (\d+)/);this.line=t?parseInt(t[1],10):0}}function So(e){const t=e.key,o=e.value;return o?[new Eo(t,o,"constants have been deprecated as of v8")]:[]}function xo(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Co(e){if(Array.isArray(e))return e.map(Co);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){const t={};for(const o in e)t[o]=Co(e[o]);return t}return xo(e)}function jo(e){const t=e.key,o=e.value,n=e.valueSpec||{},r=e.objectElementValidators||{},i=e.style,s=e.styleSpec;let a=[];const l=Dt(o);if("object"!==l)return[new Eo(t,o,`object expected, ${l} found`)];for(const e in o){const l=e.split(".")[0],c=n[l]||n["*"];let u;if(r[l])u=r[l];else if(n[l])u=qo;else if(r["*"])u=r["*"];else{if(!n["*"]){a.push(new Eo(t,o[e],`unknown property "${e}"`));continue}u=qo}a=a.concat(u({key:(t?t+".":t)+e,value:o[e],valueSpec:c,style:i,styleSpec:s,object:o,objectKey:e},o))}for(const e in n)r[e]||n[e].required&&void 0===n[e].default&&void 0===o[e]&&a.push(new Eo(t,o,`missing required property "${e}"`));return a}function Po(e){const t=e.value,o=e.valueSpec,n=e.style,r=e.styleSpec,i=e.key,s=e.arrayElementValidator||qo;if("array"!==Dt(t))return[new Eo(i,t,`array expected, ${Dt(t)} found`)];if(o.length&&t.length!==o.length)return[new Eo(i,t,`array length ${o.length} expected, length ${t.length} found`)];if(o["min-length"]&&t.length<o["min-length"])return[new Eo(i,t,`array length at least ${o["min-length"]} expected, length ${t.length} found`)];let a={type:o.value,values:o.values,minimum:o.minimum,maximum:o.maximum};r.$version<7&&(a.function=o.function),"object"===Dt(o.value)&&(a=o.value);let l=[];for(let e=0;e<t.length;e++)l=l.concat(s({array:t,arrayIndex:e,value:t[e],valueSpec:a,style:n,styleSpec:r,key:`${i}[${e}]`}));return l}function To(e){const t=e.key,o=e.value,n=e.valueSpec;let r=Dt(o);if("number"===r&&o!=o&&(r="NaN"),"number"!==r)return[new Eo(t,o,`number expected, ${r} found`)];if("minimum"in n){let r=n.minimum;if("array"===Dt(n.minimum)){const t=e.arrayIndex;r=n.minimum[t]}if(o<r)return[new Eo(t,o,`${o} is less than the minimum value ${r}`)]}if("maximum"in n){let r=n.maximum;if("array"===Dt(n.maximum)){const t=e.arrayIndex;r=n.maximum[t]}if(o>r)return[new Eo(t,o,`${o} is greater than the maximum value ${r}`)]}return[]}function Ao(e){const t=e.valueSpec,o=xo(e.value.type);let n,r,i,s={};const a="categorical"!==o&&void 0===e.value.property,l=!a,c="array"===Dt(e.value.stops)&&"array"===Dt(e.value.stops[0])&&"object"===Dt(e.value.stops[0][0]),u=jo({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===o)return[new Eo(e.key,e.value,'identity function may not have a "stops" property')];let t=[];const n=e.value;t=t.concat(Po({key:e.key,value:n,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:d})),"array"===Dt(n)&&0===n.length&&t.push(new Eo(e.key,n,"array must have at least one stop"));return t},default:function(e){return qo({key:e.key,value:e.value,valueSpec:t,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===o&&a&&u.push(new Eo(e.key,e.value,'missing required property "property"')),"identity"===o||e.value.stops||u.push(new Eo(e.key,e.value,'missing required property "stops"')),"exponential"===o&&e.valueSpec.expression&&!Nt(e.valueSpec)&&u.push(new Eo(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l&&!kt(e.valueSpec)?u.push(new Eo(e.key,e.value,"property functions not supported")):a&&!Gt(e.valueSpec)&&u.push(new Eo(e.key,e.value,"zoom functions not supported"))),"categorical"!==o&&!c||void 0!==e.value.property||u.push(new Eo(e.key,e.value,'"property" property is required')),u;function d(e){let o=[];const n=e.value,a=e.key;if("array"!==Dt(n))return[new Eo(a,n,`array expected, ${Dt(n)} found`)];if(2!==n.length)return[new Eo(a,n,`array length 2 expected, length ${n.length} found`)];if(c){if("object"!==Dt(n[0]))return[new Eo(a,n,`object expected, ${Dt(n[0])} found`)];if(void 0===n[0].zoom)return[new Eo(a,n,"object stop key must have zoom")];if(void 0===n[0].value)return[new Eo(a,n,"object stop key must have value")];if(i&&i>xo(n[0].zoom))return[new Eo(a,n[0].zoom,"stop zoom values must appear in ascending order")];xo(n[0].zoom)!==i&&(i=xo(n[0].zoom),r=void 0,s={}),o=o.concat(jo({key:a+"[0]",value:n[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:To,value:h}}))}else o=o.concat(h({key:a+"[0]",value:n[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},n));return Xt(Co(n[1]))?o.concat([new Eo(a+"[1]",n[1],"expressions are not allowed in function stops.")]):o.concat(qo({key:a+"[1]",value:n[1],valueSpec:t,style:e.style,styleSpec:e.styleSpec}))}function h(e,i){const a=Dt(e.value),l=xo(e.value),c=null!==e.value?e.value:i;if(n){if(a!==n)return[new Eo(e.key,c,`${a} stop domain type must match previous stop domain type ${n}`)]}else n=a;if("number"!==a&&"string"!==a&&"boolean"!==a)return[new Eo(e.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==a&&"categorical"!==o){let n=`number expected, ${a} found`;return kt(t)&&void 0===o&&(n+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Eo(e.key,c,n)]}return"categorical"!==o||"number"!==a||isFinite(l)&&Math.floor(l)===l?"categorical"!==o&&"number"===a&&void 0!==r&&l<r?[new Eo(e.key,c,"stop domain values must appear in ascending order")]:(r=l,"categorical"===o&&l in s?[new Eo(e.key,c,"stop domain values must be unique")]:(s[l]=!0,[])):[new Eo(e.key,c,"integer expected, found "+l)]}}function Mo(e){const t=("property"===e.expressionContext?Qt:Zt)(Co(e.value),e.valueSpec);if("error"===t.result)return t.value.map(t=>new Eo(`${e.key}${t.key}`,e.value,t.message));const o=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!o.outputDefined())return[new Eo(e.key,e.value,`Invalid data expression for "${e.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===e.expressionContext&&"layout"===e.propertyType&&!Ne(o))return[new Eo(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext&&!Ne(o))return[new Eo(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!De(o,["zoom","feature-state"]))return[new Eo(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!Ge(o))return[new Eo(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Io(e){const t=e.key,o=e.value,n=e.valueSpec,r=[];return Array.isArray(n.values)?-1===n.values.indexOf(xo(o))&&r.push(new Eo(t,o,`expected one of [${n.values.join(", ")}], ${JSON.stringify(o)} found`)):-1===Object.keys(n.values).indexOf(xo(o))&&r.push(new Eo(t,o,`expected one of [${Object.keys(n.values).join(", ")}], ${JSON.stringify(o)} found`)),r}function Ro(e){return co(Co(e.value))?Mo(I({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function e(t){const o=t.value,n=t.key;if("array"!==Dt(o))return[new Eo(n,o,`array expected, ${Dt(o)} found`)];const r=t.styleSpec;let i,s=[];if(o.length<1)return[new Eo(n,o,"filter array must have at least 1 element")];switch(s=s.concat(Io({key:n+"[0]",value:o[0],valueSpec:r.filter_operator,style:t.style,styleSpec:t.styleSpec})),xo(o[0])){case"<":case"<=":case">":case">=":o.length>=2&&"$type"===xo(o[1])&&s.push(new Eo(n,o,`"$type" cannot be use with operator "${o[0]}"`));case"==":case"!=":3!==o.length&&s.push(new Eo(n,o,`filter array for operator "${o[0]}" must have 3 elements`));case"in":case"!in":o.length>=2&&(i=Dt(o[1]),"string"!==i&&s.push(new Eo(n+"[1]",o[1],`string expected, ${i} found`)));for(let e=2;e<o.length;e++)i=Dt(o[e]),"$type"===xo(o[1])?s=s.concat(Io({key:`${n}[${e}]`,value:o[e],valueSpec:r.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&s.push(new Eo(`${n}[${e}]`,o[e],`string, number, or boolean expected, ${i} found`));break;case"any":case"all":case"none":for(let r=1;r<o.length;r++)s=s.concat(e({key:`${n}[${r}]`,value:o[r],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":i=Dt(o[1]),2!==o.length?s.push(new Eo(n,o,`filter array for "${o[0]}" operator must have 2 elements`)):"string"!==i&&s.push(new Eo(n+"[1]",o[1],`string expected, ${i} found`));break;case"within":i=Dt(o[1]),2!==o.length?s.push(new Eo(n,o,`filter array for "${o[0]}" operator must have 2 elements`)):"object"!==i&&s.push(new Eo(n+"[1]",o[1],`object expected, ${i} found`))}return s}(e)}function Lo(e,t){const o=e.key,n=e.style,r=e.styleSpec,i=e.value,s=e.objectKey,a=r[`${t}_${e.layerType}`];if(!a)return[];const l=s.match(/^(.*)-transition$/);if("paint"===t&&l&&a[l[1]]&&a[l[1]].transition)return qo({key:o,value:i,valueSpec:r.transition,style:n,styleSpec:r});const c=e.valueSpec||a[s];if(!c)return[new Eo(o,i,`unknown property "${s}"`)];let u;if("string"===Dt(i)&&kt(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(i)))return[new Eo(o,i,`"${s}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(u[1])} }\`.`)];const d=[];return"symbol"===e.layerType&&("text-field"===s&&n&&!n.glyphs&&d.push(new Eo(o,i,'use of "text-field" requires a style "glyphs" property')),"text-font"===s&&Ft(Co(i))&&"identity"===xo(i.type)&&d.push(new Eo(o,i,'"text-font" does not support identity functions'))),d.concat(qo({key:e.key,value:i,valueSpec:c,style:n,styleSpec:r,expressionContext:"property",propertyType:t,propertyKey:s}))}function ko(e){return Lo(e,"paint")}function Go(e){return Lo(e,"layout")}function No(e){let t=[];const o=e.value,n=e.key,r=e.style,i=e.styleSpec;o.type||o.ref||t.push(new Eo(n,o,'either "type" or "ref" is required'));let s=xo(o.type);const a=xo(o.ref);if(o.id){const i=xo(o.id);for(let s=0;s<e.arrayIndex;s++){const e=r.layers[s];xo(e.id)===i&&t.push(new Eo(n,o.id,`duplicate layer id "${o.id}", previously used at line ${e.id.__line__}`))}}if("ref"in o){let e;["type","source","source-layer","filter","layout"].forEach(e=>{e in o&&t.push(new Eo(n,o[e],`"${e}" is prohibited for ref layers`))}),r.layers.forEach(t=>{xo(t.id)===a&&(e=t)}),e?e.ref?t.push(new Eo(n,o.ref,"ref cannot reference another ref layer")):s=xo(e.type):t.push(new Eo(n,o.ref,`ref layer "${a}" not found`))}else if("background"!==s&&"sky"!==s)if(o.source){const e=r.sources&&r.sources[o.source],i=e&&xo(e.type);e?"vector"===i&&"raster"===s?t.push(new Eo(n,o.source,`layer "${o.id}" requires a raster source`)):"raster"===i&&"raster"!==s?t.push(new Eo(n,o.source,`layer "${o.id}" requires a vector source`)):"vector"!==i||o["source-layer"]?"raster-dem"===i&&"hillshade"!==s?t.push(new Eo(n,o.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!o.paint||!o.paint["line-gradient"]||"geojson"===i&&e.lineMetrics||t.push(new Eo(n,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new Eo(n,o,`layer "${o.id}" must specify a "source-layer"`)):t.push(new Eo(n,o.source,`source "${o.source}" not found`))}else t.push(new Eo(n,o,'missing required property "source"'));return t=t.concat(jo({key:n,value:o,valueSpec:i.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":()=>[],type:()=>qo({key:n+".type",value:o.type,valueSpec:i.layer.type,style:e.style,styleSpec:e.styleSpec,object:o,objectKey:"type"}),filter:Ro,layout:e=>jo({layer:o,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>Go(I({layerType:s},e))}}),paint:e=>jo({layer:o,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>ko(I({layerType:s},e))}})}})),t}function Do(e){const t=e.value,o=e.key,n=Dt(t);return"string"!==n?[new Eo(o,t,`string expected, ${n} found`)]:[]}const Fo={promoteId:function({key:e,value:t}){if("string"===Dt(t))return Do({key:e,value:t});{const o=[];for(const n in t)o.push(...Do({key:`${e}.${n}`,value:t[n]}));return o}}};function Uo(e){const t=e.value,o=e.key,n=e.styleSpec,r=e.style;if(!t.type)return[new Eo(o,t,'"type" is required')];const i=xo(t.type);let s;switch(i){case"vector":case"raster":case"raster-dem":return s=jo({key:o,value:t,valueSpec:n["source_"+i.replace("-","_")],style:e.style,styleSpec:n,objectElementValidators:Fo}),s;case"geojson":if(s=jo({key:o,value:t,valueSpec:n.source_geojson,style:r,styleSpec:n,objectElementValidators:Fo}),t.cluster)for(const e in t.clusterProperties){const[n,r]=t.clusterProperties[e],i="string"==typeof n?[n,["accumulated"],["get",e]]:n;s.push(...Mo({key:`${o}.${e}.map`,value:r,expressionContext:"cluster-map"})),s.push(...Mo({key:`${o}.${e}.reduce`,value:i,expressionContext:"cluster-reduce"}))}return s;case"video":return jo({key:o,value:t,valueSpec:n.source_video,style:r,styleSpec:n});case"image":return jo({key:o,value:t,valueSpec:n.source_image,style:r,styleSpec:n});case"canvas":return[new Eo(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Io({key:o+".type",value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:r,styleSpec:n})}}function Bo(e){const t=e.value,o=e.styleSpec,n=o.light,r=e.style;let i=[];const s=Dt(t);if(void 0===t)return i;if("object"!==s)return i=i.concat([new Eo("light",t,`object expected, ${s} found`)]),i;for(const e in t){const s=e.match(/^(.*)-transition$/);i=s&&n[s[1]]&&n[s[1]].transition?i.concat(qo({key:e,value:t[e],valueSpec:o.transition,style:r,styleSpec:o})):n[e]?i.concat(qo({key:e,value:t[e],valueSpec:n[e],style:r,styleSpec:o})):i.concat([new Eo(e,t[e],`unknown property "${e}"`)])}return i}function zo(e){const t=e.value,o=e.key,n=e.style,r=e.styleSpec,i=r.terrain;let s=[];const a=Dt(t);if(void 0===t)return s;if("object"!==a)return s=s.concat([new Eo("terrain",t,`object expected, ${a} found`)]),s;for(const e in t){const o=e.match(/^(.*)-transition$/);s=o&&i[o[1]]&&i[o[1]].transition?s.concat(qo({key:e,value:t[e],valueSpec:r.transition,style:n,styleSpec:r})):i[e]?s.concat(qo({key:e,value:t[e],valueSpec:i[e],style:n,styleSpec:r})):s.concat([new Eo(e,t[e],`unknown property "${e}"`)])}if(t.source){const e=n.sources&&n.sources[t.source],r=e&&xo(e.type);e?"raster-dem"!==r&&s.push(new Eo(o,t.source,`terrain cannot be used with a source of type ${r}, it only be used with a "raster-dem" source type`)):s.push(new Eo(o,t.source,`source "${t.source}" not found`))}else s.push(new Eo(o,t,'terrain is missing required property "source"'));return s}function Vo(e){const t=e.value,o=e.style,n=e.styleSpec,r=n.fog;let i=[];const s=Dt(t);if(void 0===t)return i;if("object"!==s)return i=i.concat([new Eo("fog",t,`object expected, ${s} found`)]),i;for(const e in t){const s=e.match(/^(.*)-transition$/);i=s&&r[s[1]]&&r[s[1]].transition?i.concat(qo({key:e,value:t[e],valueSpec:n.transition,style:o,styleSpec:n})):r[e]?i.concat(qo({key:e,value:t[e],valueSpec:r[e],style:o,styleSpec:n})):i.concat([new Eo(e,t[e],`unknown property "${e}"`)])}return i}const Wo={"*":()=>[],array:Po,boolean:function(e){const t=e.value,o=e.key,n=Dt(t);return"boolean"!==n?[new Eo(o,t,`boolean expected, ${n} found`)]:[]},number:To,color:function(e){const t=e.key,o=e.value,n=Dt(o);return"string"!==n?[new Eo(t,o,`color expected, ${n} found`)]:null===J.parseCSSColor(o)?[new Eo(t,o,`color expected, "${o}" found`)]:[]},constants:So,enum:Io,filter:Ro,function:Ao,layer:No,object:jo,source:Uo,light:Bo,terrain:zo,fog:Vo,string:Do,formatted:function(e){return 0===Do(e).length?[]:Mo(e)},resolvedImage:function(e){return 0===Do(e).length?[]:Mo(e)}};function qo(e){const t=e.value,o=e.valueSpec,n=e.styleSpec;if(o.expression&&Ft(xo(t)))return Ao(e);if(o.expression&&Xt(Co(t)))return Mo(e);if(o.type&&Wo[o.type])return Wo[o.type](e);return jo(I({},e,{valueSpec:o.type?n[o.type]:o}))}function Ho(e){const t=e.value,o=e.key,n=Do(e);return n.length||(-1===t.indexOf("{fontstack}")&&n.push(new Eo(o,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&n.push(new Eo(o,t,'"glyphs" url must include a "{range}" token'))),n}function Yo(e,t=r){let o=[];return o=o.concat(qo({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:Ho,"*":()=>[]}})),e.constants&&(o=o.concat(So({key:"constants",value:e.constants,style:e,styleSpec:t}))),Xo(o)}function Xo(e){return[].concat(e).sort((e,t)=>e.line-t.line)}function Zo(e){return function(...t){return Xo(e.apply(this,t))}}Yo.source=Zo(Uo),Yo.light=Zo(Bo),Yo.terrain=Zo(zo),Yo.fog=Zo(Vo),Yo.layer=Zo(No),Yo.filter=Zo(Ro),Yo.paintProperty=Zo(ko),Yo.layoutProperty=Zo(Go);var Ko=s((function(e,t){var o=function(){var e=function(e,t,o,n){for(o=o||{},n=e.length;n--;o[e[n]]=t);return o},t=[1,12],o=[1,13],n=[1,9],r=[1,10],i=[1,11],s=[1,14],a=[1,15],l=[14,18,22,24],c=[18,22],u=[22,24],d={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(e,t,o,n,r,i,s){var a=i.length-1;switch(r){case 1:this.$=new String(e.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b")),this.$.__line__=this._$.first_line;break;case 2:this.$=new Number(e),this.$.__line__=this._$.first_line;break;case 3:this.$=null;break;case 4:this.$=new Boolean(!0),this.$.__line__=this._$.first_line;break;case 5:this.$=new Boolean(!1),this.$.__line__=this._$.first_line;break;case 6:return this.$=i[a-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=i[a-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[i[a-2],i[a]];break;case 16:this.$={},this.$[i[a][0]]=i[a][1];break;case 17:this.$=i[a-2],i[a-2][i[a][0]]=i[a][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[i[a]];break;case 21:this.$=i[a-2],i[a-2].push(i[a])}},table:[{3:5,4:t,5:6,6:o,7:3,8:n,9:4,10:r,11:i,12:1,13:2,15:7,16:8,17:s,23:a},{1:[3]},{14:[1,16]},e(l,[2,7]),e(l,[2,8]),e(l,[2,9]),e(l,[2,10]),e(l,[2,11]),e(l,[2,12]),e(l,[2,3]),e(l,[2,4]),e(l,[2,5]),e([14,18,21,22,24],[2,1]),e(l,[2,2]),{3:20,4:t,18:[1,17],19:18,20:19},{3:5,4:t,5:6,6:o,7:3,8:n,9:4,10:r,11:i,13:23,15:7,16:8,17:s,23:a,24:[1,21],25:22},{1:[2,6]},e(l,[2,13]),{18:[1,24],22:[1,25]},e(c,[2,16]),{21:[1,26]},e(l,[2,18]),{22:[1,28],24:[1,27]},e(u,[2,20]),e(l,[2,14]),{3:20,4:t,20:29},{3:5,4:t,5:6,6:o,7:3,8:n,9:4,10:r,11:i,13:30,15:7,16:8,17:s,23:a},e(l,[2,19]),{3:5,4:t,5:6,6:o,7:3,8:n,9:4,10:r,11:i,13:31,15:7,16:8,17:s,23:a},e(c,[2,17]),e(c,[2,15]),e(u,[2,21])],defaultActions:{16:[2,6]},parseError:function(e,t){if(!t.recoverable)throw new Error(e);this.trace(e)},parse:function(e){var t=this,o=[0],n=[null],r=[],i=this.table,s="",a=0,l=0,c=2,u=1,d=r.slice.call(arguments,1),h=Object.create(this.lexer),p={yy:{}};for(var f in this.yy)Object.prototype.hasOwnProperty.call(this.yy,f)&&(p.yy[f]=this.yy[f]);h.setInput(e,p.yy),p.yy.lexer=h,p.yy.parser=this,void 0===h.yylloc&&(h.yylloc={});var m=h.yylloc;r.push(m);var g=h.options&&h.options.ranges;function y(){var e;return"number"!=typeof(e=h.lex()||u)&&(e=t.symbols_[e]||e),e}"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var v,_,b,w,E,O,S,x,C={};;){if(_=o[o.length-1],this.defaultActions[_]?b=this.defaultActions[_]:(null==v&&(v=y()),b=i[_]&&i[_][v]),void 0===b||!b.length||!b[0]){var j="";for(E in x=[],i[_])this.terminals_[E]&&E>c&&x.push("'"+this.terminals_[E]+"'");j=h.showPosition?"Parse error on line "+(a+1)+":\n"+h.showPosition()+"\nExpecting "+x.join(", ")+", got '"+(this.terminals_[v]||v)+"'":"Parse error on line "+(a+1)+": Unexpected "+(v==u?"end of input":"'"+(this.terminals_[v]||v)+"'"),this.parseError(j,{text:h.match,token:this.terminals_[v]||v,line:h.yylineno,loc:m,expected:x})}if(b[0]instanceof Array&&b.length>1)throw new Error("Parse Error: multiple actions possible at state: "+_+", token: "+v);switch(b[0]){case 1:o.push(v),n.push(h.yytext),r.push(h.yylloc),o.push(b[1]),v=null,l=h.yyleng,s=h.yytext,a=h.yylineno,m=h.yylloc;break;case 2:if(O=this.productions_[b[1]][1],C.$=n[n.length-O],C._$={first_line:r[r.length-(O||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(O||1)].first_column,last_column:r[r.length-1].last_column},g&&(C._$.range=[r[r.length-(O||1)].range[0],r[r.length-1].range[1]]),void 0!==(w=this.performAction.apply(C,[s,l,a,p.yy,b[1],n,r].concat(d))))return w;O&&(o=o.slice(0,-1*O*2),n=n.slice(0,-1*O),r=r.slice(0,-1*O)),o.push(this.productions_[b[1]][0]),n.push(C.$),r.push(C._$),S=i[o[o.length-2]][o[o.length-1]],o.push(S);break;case 3:return!0}}return!0}},h={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,o=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),o.length-1&&(this.yylineno-=o.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:o?(o.length===n.length?this.yylloc.first_column:0)+n[n.length-o.length].length-o[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var o,n,r;if(this.options.backtrack_lexer&&(r={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(r.yylloc.range=this.yylloc.range.slice(0))),(n=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],o=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),o)return o;if(this._backtrack){for(var i in r)this[i]=r[i];return!1}return!1},next:function(){if(this.done)return this.EOF;var e,t,o,n;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),i=0;i<r.length;i++)if((o=this._input.match(this.rules[r[i]]))&&(!t||o[0].length>t[0].length)){if(t=o,n=i,this.options.backtrack_lexer){if(!1!==(e=this.test_match(o,r[i])))return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?!1!==(e=this.test_match(t,r[n]))&&e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return(e=this.conditionStack.length-1-Math.abs(e||0))>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(e,t,o,n){switch(o){case 0:break;case 1:return 6;case 2:return t.yytext=t.yytext.substr(1,t.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};function p(){this.yy={}}return d.lexer=h,p.prototype=d,d.Parser=p,new p}();void 0!==a&&(t.parser=o,t.Parser=o.Parser,t.parse=function(){return o.parse.apply(o,arguments)})}));function Jo(e){if(e instanceof String||"string"==typeof e||e instanceof n)try{return Ko.parse(e.toString())}catch(e){throw new Oo(e)}return e}function Qo(e,t=r){let o=e;try{o=Jo(o)}catch(e){return[e]}return Yo(o,t)}new Set(["vector","raster","raster-dem"]);const $o={StyleExpression:Yt,isExpression:Xt,isExpressionFilter:co,createExpression:Zt,createPropertyExpression:Qt,normalizePropertyExpression:function(e,t){if(Ft(e))return new $t(e,t);if(Xt(e)){const o=Qt(e,t);if("error"===o.result)throw new Error(o.value.map(e=>`${e.key}: ${e.message}`).join(", "));return o.value}{let o=e;return"string"==typeof e&&"color"===t.type&&(o=Q.parse(e)),{kind:"constant",evaluate:()=>o}}},ZoomConstantExpression:Kt,ZoomDependentExpression:Jt,StylePropertyFunction:$t},en={convertFunction:to,createFunction:Bt,isFunction:Ft};Qo.parsed=Qo,Qo.latest=Qo}).call(this,o("./node_modules/webpack/buildin/global.js"),o("./node_modules/buffer/index.js").Buffer)},"./node_modules/base64-js/index.js":function(e,t,o){"use strict";t.byteLength=function(e){var t=c(e),o=t[0],n=t[1];return 3*(o+n)/4-n},t.toByteArray=function(e){var t,o,n=c(e),s=n[0],a=n[1],l=new i(function(e,t,o){return 3*(t+o)/4-o}(0,s,a)),u=0,d=a>0?s-4:s;for(o=0;o<d;o+=4)t=r[e.charCodeAt(o)]<<18|r[e.charCodeAt(o+1)]<<12|r[e.charCodeAt(o+2)]<<6|r[e.charCodeAt(o+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;2===a&&(t=r[e.charCodeAt(o)]<<2|r[e.charCodeAt(o+1)]>>4,l[u++]=255&t);1===a&&(t=r[e.charCodeAt(o)]<<10|r[e.charCodeAt(o+1)]<<4|r[e.charCodeAt(o+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t);return l},t.fromByteArray=function(e){for(var t,o=e.length,r=o%3,i=[],s=0,a=o-r;s<a;s+=16383)i.push(u(e,s,s+16383>a?a:s+16383));1===r?(t=e[o-1],i.push(n[t>>2]+n[t<<4&63]+"==")):2===r&&(t=(e[o-2]<<8)+e[o-1],i.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return i.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=s.length;a<l;++a)n[a]=s[a],r[s.charCodeAt(a)]=a;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var o=e.indexOf("=");return-1===o&&(o=t),[o,o===t?0:4-o%4]}function u(e,t,o){for(var r,i,s=[],a=t;a<o;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(n[(i=r)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},"./node_modules/buffer/index.js":function(e,t,o){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var n=o("./node_modules/base64-js/index.js"),r=o("./node_modules/ieee754/index.js"),i=o("./node_modules/isarray/index.js");function s(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,o){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,o);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return c(this,e,t,o)}function c(e,t,o,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,o,n){if(t.byteLength,o<0||t.byteLength<o)throw new RangeError("'offset' is out of bounds");if(t.byteLength<o+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===o&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,o):new Uint8Array(t,o,n);l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=h(e,t);return e}(e,t,o,n):"string"==typeof t?function(e,t,o){"string"==typeof o&&""!==o||(o="utf8");if(!l.isEncoding(o))throw new TypeError('"encoding" must be a valid string encoding');var n=0|f(t,o),r=(e=a(e,n)).write(t,o);r!==n&&(e=e.slice(0,r));return e}(e,t,o):function(e,t){if(l.isBuffer(t)){var o=0|p(t.length);return 0===(e=a(e,o)).length||t.copy(e,0,0,o),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?a(e,0):h(e,t);if("Buffer"===t.type&&i(t.data))return h(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(u(t),e=a(e,t<0?0:0|p(t)),!l.TYPED_ARRAY_SUPPORT)for(var o=0;o<t;++o)e[o]=0;return e}function h(e,t){var o=t.length<0?0:0|p(t.length);e=a(e,o);for(var n=0;n<o;n+=1)e[n]=255&t[n];return e}function p(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function f(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var o=e.length;if(0===o)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return o;case"utf8":case"utf-8":case void 0:return U(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*o;case"hex":return o>>>1;case"base64":return B(e).length;default:if(n)return U(e).length;t=(""+t).toLowerCase(),n=!0}}function m(e,t,o){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===o||o>this.length)&&(o=this.length),o<=0)return"";if((o>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,o);case"utf8":case"utf-8":return C(this,t,o);case"ascii":return j(this,t,o);case"latin1":case"binary":return P(this,t,o);case"base64":return x(this,t,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,o);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function g(e,t,o){var n=e[t];e[t]=e[o],e[o]=n}function y(e,t,o,n,r){if(0===e.length)return-1;if("string"==typeof o?(n=o,o=0):o>2147483647?o=2147483647:o<-2147483648&&(o=-2147483648),o=+o,isNaN(o)&&(o=r?0:e.length-1),o<0&&(o=e.length+o),o>=e.length){if(r)return-1;o=e.length-1}else if(o<0){if(!r)return-1;o=0}if("string"==typeof t&&(t=l.from(t,n)),l.isBuffer(t))return 0===t.length?-1:v(e,t,o,n,r);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,o):Uint8Array.prototype.lastIndexOf.call(e,t,o):v(e,[t],o,n,r);throw new TypeError("val must be string, number or Buffer")}function v(e,t,o,n,r){var i,s=1,a=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,l/=2,o/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(r){var u=-1;for(i=o;i<a;i++)if(c(e,i)===c(t,-1===u?0:i-u)){if(-1===u&&(u=i),i-u+1===l)return u*s}else-1!==u&&(i-=i-u),u=-1}else for(o+l>a&&(o=a-l),i=o;i>=0;i--){for(var d=!0,h=0;h<l;h++)if(c(e,i+h)!==c(t,h)){d=!1;break}if(d)return i}return-1}function _(e,t,o,n){o=Number(o)||0;var r=e.length-o;n?(n=Number(n))>r&&(n=r):n=r;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[o+s]=a}return s}function b(e,t,o,n){return z(U(t,e.length-o),e,o,n)}function w(e,t,o,n){return z(function(e){for(var t=[],o=0;o<e.length;++o)t.push(255&e.charCodeAt(o));return t}(t),e,o,n)}function E(e,t,o,n){return w(e,t,o,n)}function O(e,t,o,n){return z(B(t),e,o,n)}function S(e,t,o,n){return z(function(e,t){for(var o,n,r,i=[],s=0;s<e.length&&!((t-=2)<0);++s)o=e.charCodeAt(s),n=o>>8,r=o%256,i.push(r),i.push(n);return i}(t,e.length-o),e,o,n)}function x(e,t,o){return 0===t&&o===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,o))}function C(e,t,o){o=Math.min(e.length,o);for(var n=[],r=t;r<o;){var i,s,a,l,c=e[r],u=null,d=c>239?4:c>223?3:c>191?2:1;if(r+d<=o)switch(d){case 1:c<128&&(u=c);break;case 2:128==(192&(i=e[r+1]))&&(l=(31&c)<<6|63&i)>127&&(u=l);break;case 3:i=e[r+1],s=e[r+2],128==(192&i)&&128==(192&s)&&(l=(15&c)<<12|(63&i)<<6|63&s)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:i=e[r+1],s=e[r+2],a=e[r+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&(l=(15&c)<<18|(63&i)<<12|(63&s)<<6|63&a)>65535&&l<1114112&&(u=l)}null===u?(u=65533,d=1):u>65535&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|1023&u),n.push(u),r+=d}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var o="",n=0;for(;n<t;)o+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return o}(n)}t.Buffer=l,t.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,o){return c(null,e,t,o)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,o){return function(e,t,o,n){return u(t),t<=0?a(e,t):void 0!==o?"string"==typeof n?a(e,t).fill(o,n):a(e,t).fill(o):a(e,t)}(null,e,t,o)},l.allocUnsafe=function(e){return d(null,e)},l.allocUnsafeSlow=function(e){return d(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var o=e.length,n=t.length,r=0,i=Math.min(o,n);r<i;++r)if(e[r]!==t[r]){o=e[r],n=t[r];break}return o<n?-1:n<o?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var o;if(void 0===t)for(t=0,o=0;o<e.length;++o)t+=e[o].length;var n=l.allocUnsafe(t),r=0;for(o=0;o<e.length;++o){var s=e[o];if(!l.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,r),r+=s.length}return n},l.byteLength=f,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?C(this,0,e):m.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",o=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,o).match(/.{2}/g).join(" "),this.length>o&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,o,n,r){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===o&&(o=e?e.length:0),void 0===n&&(n=0),void 0===r&&(r=this.length),t<0||o>e.length||n<0||r>this.length)throw new RangeError("out of range index");if(n>=r&&t>=o)return 0;if(n>=r)return-1;if(t>=o)return 1;if(this===e)return 0;for(var i=(r>>>=0)-(n>>>=0),s=(o>>>=0)-(t>>>=0),a=Math.min(i,s),c=this.slice(n,r),u=e.slice(t,o),d=0;d<a;++d)if(c[d]!==u[d]){i=c[d],s=u[d];break}return i<s?-1:s<i?1:0},l.prototype.includes=function(e,t,o){return-1!==this.indexOf(e,t,o)},l.prototype.indexOf=function(e,t,o){return y(this,e,t,o,!0)},l.prototype.lastIndexOf=function(e,t,o){return y(this,e,t,o,!1)},l.prototype.write=function(e,t,o,n){if(void 0===t)n="utf8",o=this.length,t=0;else if(void 0===o&&"string"==typeof t)n=t,o=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(o)?(o|=0,void 0===n&&(n="utf8")):(n=o,o=void 0)}var r=this.length-t;if((void 0===o||o>r)&&(o=r),e.length>0&&(o<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return _(this,e,t,o);case"utf8":case"utf-8":return b(this,e,t,o);case"ascii":return w(this,e,t,o);case"latin1":case"binary":return E(this,e,t,o);case"base64":return O(this,e,t,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,o);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function j(e,t,o){var n="";o=Math.min(e.length,o);for(var r=t;r<o;++r)n+=String.fromCharCode(127&e[r]);return n}function P(e,t,o){var n="";o=Math.min(e.length,o);for(var r=t;r<o;++r)n+=String.fromCharCode(e[r]);return n}function T(e,t,o){var n=e.length;(!t||t<0)&&(t=0),(!o||o<0||o>n)&&(o=n);for(var r="",i=t;i<o;++i)r+=F(e[i]);return r}function A(e,t,o){for(var n=e.slice(t,o),r="",i=0;i<n.length;i+=2)r+=String.fromCharCode(n[i]+256*n[i+1]);return r}function M(e,t,o){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>o)throw new RangeError("Trying to access beyond buffer length")}function I(e,t,o,n,r,i){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<i)throw new RangeError('"value" argument is out of bounds');if(o+n>e.length)throw new RangeError("Index out of range")}function R(e,t,o,n){t<0&&(t=65535+t+1);for(var r=0,i=Math.min(e.length-o,2);r<i;++r)e[o+r]=(t&255<<8*(n?r:1-r))>>>8*(n?r:1-r)}function L(e,t,o,n){t<0&&(t=4294967295+t+1);for(var r=0,i=Math.min(e.length-o,4);r<i;++r)e[o+r]=t>>>8*(n?r:3-r)&255}function k(e,t,o,n,r,i){if(o+n>e.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("Index out of range")}function G(e,t,o,n,i){return i||k(e,0,o,4),r.write(e,t,o,n,23,4),o+4}function N(e,t,o,n,i){return i||k(e,0,o,8),r.write(e,t,o,n,52,8),o+8}l.prototype.slice=function(e,t){var o,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(o=this.subarray(e,t)).__proto__=l.prototype;else{var r=t-e;o=new l(r,void 0);for(var i=0;i<r;++i)o[i]=this[i+e]}return o},l.prototype.readUIntLE=function(e,t,o){e|=0,t|=0,o||M(e,t,this.length);for(var n=this[e],r=1,i=0;++i<t&&(r*=256);)n+=this[e+i]*r;return n},l.prototype.readUIntBE=function(e,t,o){e|=0,t|=0,o||M(e,t,this.length);for(var n=this[e+--t],r=1;t>0&&(r*=256);)n+=this[e+--t]*r;return n},l.prototype.readUInt8=function(e,t){return t||M(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||M(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||M(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,o){e|=0,t|=0,o||M(e,t,this.length);for(var n=this[e],r=1,i=0;++i<t&&(r*=256);)n+=this[e+i]*r;return n>=(r*=128)&&(n-=Math.pow(2,8*t)),n},l.prototype.readIntBE=function(e,t,o){e|=0,t|=0,o||M(e,t,this.length);for(var n=t,r=1,i=this[e+--n];n>0&&(r*=256);)i+=this[e+--n]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*t)),i},l.prototype.readInt8=function(e,t){return t||M(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||M(e,2,this.length);var o=this[e]|this[e+1]<<8;return 32768&o?4294901760|o:o},l.prototype.readInt16BE=function(e,t){t||M(e,2,this.length);var o=this[e+1]|this[e]<<8;return 32768&o?4294901760|o:o},l.prototype.readInt32LE=function(e,t){return t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||M(e,4,this.length),r.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||M(e,4,this.length),r.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||M(e,8,this.length),r.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||M(e,8,this.length),r.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,o,n){(e=+e,t|=0,o|=0,n)||I(this,e,t,o,Math.pow(2,8*o)-1,0);var r=1,i=0;for(this[t]=255&e;++i<o&&(r*=256);)this[t+i]=e/r&255;return t+o},l.prototype.writeUIntBE=function(e,t,o,n){(e=+e,t|=0,o|=0,n)||I(this,e,t,o,Math.pow(2,8*o)-1,0);var r=o-1,i=1;for(this[t+r]=255&e;--r>=0&&(i*=256);)this[t+r]=e/i&255;return t+o},l.prototype.writeUInt8=function(e,t,o){return e=+e,t|=0,o||I(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,o){return e=+e,t|=0,o||I(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):R(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,o){return e=+e,t|=0,o||I(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):R(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,o){return e=+e,t|=0,o||I(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):L(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,o){return e=+e,t|=0,o||I(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,o,n){if(e=+e,t|=0,!n){var r=Math.pow(2,8*o-1);I(this,e,t,o,r-1,-r)}var i=0,s=1,a=0;for(this[t]=255&e;++i<o&&(s*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+o},l.prototype.writeIntBE=function(e,t,o,n){if(e=+e,t|=0,!n){var r=Math.pow(2,8*o-1);I(this,e,t,o,r-1,-r)}var i=o-1,s=1,a=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+o},l.prototype.writeInt8=function(e,t,o){return e=+e,t|=0,o||I(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,o){return e=+e,t|=0,o||I(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):R(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,o){return e=+e,t|=0,o||I(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):R(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,o){return e=+e,t|=0,o||I(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):L(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,o){return e=+e,t|=0,o||I(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,o){return G(this,e,t,!0,o)},l.prototype.writeFloatBE=function(e,t,o){return G(this,e,t,!1,o)},l.prototype.writeDoubleLE=function(e,t,o){return N(this,e,t,!0,o)},l.prototype.writeDoubleBE=function(e,t,o){return N(this,e,t,!1,o)},l.prototype.copy=function(e,t,o,n){if(o||(o=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<o&&(n=o),n===o)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(o<0||o>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-o&&(n=e.length-t+o);var r,i=n-o;if(this===e&&o<t&&t<n)for(r=i-1;r>=0;--r)e[r+t]=this[r+o];else if(i<1e3||!l.TYPED_ARRAY_SUPPORT)for(r=0;r<i;++r)e[r+t]=this[r+o];else Uint8Array.prototype.set.call(e,this.subarray(o,o+i),t);return i},l.prototype.fill=function(e,t,o,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,o=this.length):"string"==typeof o&&(n=o,o=this.length),1===e.length){var r=e.charCodeAt(0);r<256&&(e=r)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<o)throw new RangeError("Out of range index");if(o<=t)return this;var i;if(t>>>=0,o=void 0===o?this.length:o>>>0,e||(e=0),"number"==typeof e)for(i=t;i<o;++i)this[i]=e;else{var s=l.isBuffer(e)?e:U(new l(e,n).toString()),a=s.length;for(i=0;i<o-t;++i)this[i+t]=s[i%a]}return this};var D=/[^+\/0-9A-Za-z-_]/g;function F(e){return e<16?"0"+e.toString(16):e.toString(16)}function U(e,t){var o;t=t||1/0;for(var n=e.length,r=null,i=[],s=0;s<n;++s){if((o=e.charCodeAt(s))>55295&&o<57344){if(!r){if(o>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&i.push(239,191,189);continue}r=o;continue}if(o<56320){(t-=3)>-1&&i.push(239,191,189),r=o;continue}o=65536+(r-55296<<10|o-56320)}else r&&(t-=3)>-1&&i.push(239,191,189);if(r=null,o<128){if((t-=1)<0)break;i.push(o)}else if(o<2048){if((t-=2)<0)break;i.push(o>>6|192,63&o|128)}else if(o<65536){if((t-=3)<0)break;i.push(o>>12|224,o>>6&63|128,63&o|128)}else{if(!(o<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}}return i}function B(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(D,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function z(e,t,o,n){for(var r=0;r<n&&!(r+o>=t.length||r>=e.length);++r)t[r+o]=e[r];return r}}).call(this,o("./node_modules/webpack/buildin/global.js"))},"./node_modules/debug/src/browser.js":function(e,t,o){(function(n){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const o="color: "+this.color;t.splice(1,0,o,"color: inherit");let n=0,r=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(r=n))}),t.splice(r,0,o)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=o("./node_modules/debug/src/common.js")(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,o("./node_modules/process/browser.js"))},"./node_modules/debug/src/common.js":function(e,t,o){e.exports=function(e){function t(e){let o,r,i,s=null;function a(...e){if(!a.enabled)return;const n=a,r=Number(new Date),i=r-(o||r);n.diff=i,n.prev=o,n.curr=r,o=r,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(o,r)=>{if("%%"===o)return"%";s++;const i=t.formatters[r];if("function"==typeof i){const t=e[s];o=i.call(n,t),e.splice(s,1),s--}return o}),t.formatArgs.call(n,e);(n.log||t.log).apply(n,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=n,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(r!==t.namespaces&&(r=t.namespaces,i=t.enabled(e)),i),set:e=>{s=e}}),"function"==typeof t.init&&t.init(a),a}function n(e,o){const n=t(this.namespace+(void 0===o?":":o)+e);return n.log=this.log,n}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(r),...t.skips.map(r).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){let o;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length;for(o=0;o<r;o++)n[o]&&("-"===(e=n[o].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let o,n;for(o=0,n=t.skips.length;o<n;o++)if(t.skips[o].test(e))return!1;for(o=0,n=t.names.length;o<n;o++)if(t.names[o].test(e))return!0;return!1},t.humanize=o("./node_modules/ms/index.js"),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(o=>{t[o]=e[o]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let o=0;for(let t=0;t<e.length;t++)o=(o<<5)-o+e.charCodeAt(t),o|=0;return t.colors[Math.abs(o)%t.colors.length]},t.enable(t.load()),t}},"./node_modules/es6-promise/dist/es6-promise.js":function(e,t,o){(function(t,o){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */var n;n=function(){"use strict";function e(e){return"function"==typeof e}var n=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},r=0,i=void 0,s=void 0,a=function(e,t){f[r]=e,f[r+1]=t,2===(r+=2)&&(s?s(m):b())},l="undefined"!=typeof window?window:void 0,c=l||{},u=c.MutationObserver||c.WebKitMutationObserver,d="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function p(){var e=setTimeout;return function(){return e(m,1)}}var f=new Array(1e3);function m(){for(var e=0;e<r;e+=2)(0,f[e])(f[e+1]),f[e]=void 0,f[e+1]=void 0;r=0}var g,y,v,_,b=void 0;function w(e,t){var o=this,n=new this.constructor(S);void 0===n[O]&&L(n);var r=o._state;if(r){var i=arguments[r-1];a((function(){return I(r,n,i,o._result)}))}else A(o,n,e,t);return n}function E(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(S);return C(t,e),t}d?b=function(){return t.nextTick(m)}:u?(y=0,v=new u(m),_=document.createTextNode(""),v.observe(_,{characterData:!0}),b=function(){_.data=y=++y%2}):h?((g=new MessageChannel).port1.onmessage=m,b=function(){return g.port2.postMessage(0)}):b=void 0===l?function(){try{var e=Function("return this")().require("vertx");return void 0!==(i=e.runOnLoop||e.runOnContext)?function(){i(m)}:p()}catch(e){return p()}}():p();var O=Math.random().toString(36).substring(2);function S(){}function x(t,o,n){o.constructor===t.constructor&&n===w&&o.constructor.resolve===E?function(e,t){1===t._state?P(e,t._result):2===t._state?T(e,t._result):A(t,void 0,(function(t){return C(e,t)}),(function(t){return T(e,t)}))}(t,o):void 0===n?P(t,o):e(n)?function(e,t,o){a((function(e){var n=!1,r=function(e,t,o,n){try{e.call(t,o,n)}catch(e){return e}}(o,t,(function(o){n||(n=!0,t!==o?C(e,o):P(e,o))}),(function(t){n||(n=!0,T(e,t))}),e._label);!n&&r&&(n=!0,T(e,r))}),e)}(t,o,n):P(t,o)}function C(e,t){if(e===t)T(e,new TypeError("You cannot resolve a promise with itself"));else if(r=typeof(n=t),null===n||"object"!==r&&"function"!==r)P(e,t);else{var o=void 0;try{o=t.then}catch(t){return void T(e,t)}x(e,t,o)}var n,r}function j(e){e._onerror&&e._onerror(e._result),M(e)}function P(e,t){void 0===e._state&&(e._result=t,e._state=1,0!==e._subscribers.length&&a(M,e))}function T(e,t){void 0===e._state&&(e._state=2,e._result=t,a(j,e))}function A(e,t,o,n){var r=e._subscribers,i=r.length;e._onerror=null,r[i]=t,r[i+1]=o,r[i+2]=n,0===i&&e._state&&a(M,e)}function M(e){var t=e._subscribers,o=e._state;if(0!==t.length){for(var n=void 0,r=void 0,i=e._result,s=0;s<t.length;s+=3)n=t[s],r=t[s+o],n?I(o,n,r,i):r(i);e._subscribers.length=0}}function I(t,o,n,r){var i=e(n),s=void 0,a=void 0,l=!0;if(i){try{s=n(r)}catch(e){l=!1,a=e}if(o===s)return void T(o,new TypeError("A promises callback cannot return that same promise."))}else s=r;void 0!==o._state||(i&&l?C(o,s):!1===l?T(o,a):1===t?P(o,s):2===t&&T(o,s))}var R=0;function L(e){e[O]=R++,e._state=void 0,e._result=void 0,e._subscribers=[]}var k=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(S),this.promise[O]||L(this.promise),n(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?P(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&P(this.promise,this._result))):T(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;void 0===this._state&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var o=this._instanceConstructor,n=o.resolve;if(n===E){var r=void 0,i=void 0,s=!1;try{r=e.then}catch(e){s=!0,i=e}if(r===w&&void 0!==e._state)this._settledAt(e._state,t,e._result);else if("function"!=typeof r)this._remaining--,this._result[t]=e;else if(o===G){var a=new o(S);s?T(a,i):x(a,e,r),this._willSettleAt(a,t)}else this._willSettleAt(new o((function(t){return t(e)})),t)}else this._willSettleAt(n(e),t)},e.prototype._settledAt=function(e,t,o){var n=this.promise;void 0===n._state&&(this._remaining--,2===e?T(n,o):this._result[t]=o),0===this._remaining&&P(n,this._result)},e.prototype._willSettleAt=function(e,t){var o=this;A(e,void 0,(function(e){return o._settledAt(1,t,e)}),(function(e){return o._settledAt(2,t,e)}))},e}(),G=function(){function t(e){this[O]=R++,this._result=this._state=void 0,this._subscribers=[],S!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(e,t){try{t((function(t){C(e,t)}),(function(t){T(e,t)}))}catch(t){T(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(t){var o=this.constructor;return e(t)?this.then((function(e){return o.resolve(t()).then((function(){return e}))}),(function(e){return o.resolve(t()).then((function(){throw e}))})):this.then(t,t)},t}();return G.prototype.then=w,G.all=function(e){return new k(this,e).promise},G.race=function(e){var t=this;return n(e)?new t((function(o,n){for(var r=e.length,i=0;i<r;i++)t.resolve(e[i]).then(o,n)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))},G.resolve=E,G.reject=function(e){var t=new this(S);return T(t,e),t},G._setScheduler=function(e){s=e},G._setAsap=function(e){a=e},G._asap=a,G.polyfill=function(){var e=void 0;if(void 0!==o)e=o;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=G},G.Promise=G,G},e.exports=n()}).call(this,o("./node_modules/process/browser.js"),o("./node_modules/webpack/buildin/global.js"))},"./node_modules/eslint-loader/dist/cjs.js?!./src/Utils/dist-openlayers/index.js":function(e,t,o){"use strict";o.r(t);var n,r,i=o("./node_modules/ol/AssertionError.js"),s=o("./node_modules/ol/Collection.js"),a=o("./node_modules/ol/Tile.js"),l=o("./node_modules/ol/TileState.js"),c=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),u=function(e){function t(t){var o=this,n=l.a.IDLE;return(o=e.call(this,t.tileCoord,n,{transition:t.transition})||this).loader_=t.loader,o.data_=null,o.error_=null,o}return c(t,e),t.prototype.getData=function(){return this.data_},t.prototype.getError=function(){return this.error_},t.prototype.load=function(){this.state=l.a.LOADING,this.changed();var e=this;this.loader_().then((function(t){e.data_=t,e.state=l.a.LOADED,e.changed()})).catch((function(t){e.error_=t,e.state=l.a.ERROR,e.changed()}))},t}(a.a),d=o("./node_modules/ol/Disposable.js"),h=o("./node_modules/ol/Feature.js"),p=o("./node_modules/ol/events/Event.js"),f=o("./node_modules/ol/Object.js"),m=o("./node_modules/ol/events/EventType.js"),g=o("./node_modules/ol/geom/Polygon.js"),y=o("./node_modules/ol/proj.js"),v=o("./node_modules/ol/math.js"),_=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),b="accuracy",w="accuracyGeometry",E="altitude",O="altitudeAccuracy",S="heading",x="position",C="projection",j="speed",P="tracking",T="trackingOptions",A=function(e){function t(t){var o=e.call(this,m.a.ERROR)||this;return o.code=t.code,o.message=t.message,o}return _(t,e),t}(p.a),M=function(e){function t(t){var o=e.call(this)||this;o.on,o.once,o.un;var n=t||{};return o.position_=null,o.transform_=y.y,o.watchId_=void 0,o.addChangeListener(C,o.handleProjectionChanged_),o.addChangeListener(P,o.handleTrackingChanged_),void 0!==n.projection&&o.setProjection(n.projection),void 0!==n.trackingOptions&&o.setTrackingOptions(n.trackingOptions),o.setTracking(void 0!==n.tracking&&n.tracking),o}return _(t,e),t.prototype.disposeInternal=function(){this.setTracking(!1),e.prototype.disposeInternal.call(this)},t.prototype.handleProjectionChanged_=function(){var e=this.getProjection();e&&(this.transform_=Object(y.w)(Object(y.t)("EPSG:4326"),e),this.position_&&this.set(x,this.transform_(this.position_)))},t.prototype.handleTrackingChanged_=function(){if("geolocation"in navigator){var e=this.getTracking();e&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):e||void 0===this.watchId_||(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}},t.prototype.positionChange_=function(e){var t=e.coords;this.set(b,t.accuracy),this.set(E,null===t.altitude?void 0:t.altitude),this.set(O,null===t.altitudeAccuracy?void 0:t.altitudeAccuracy),this.set(S,null===t.heading?void 0:Object(v.j)(t.heading)),this.position_?(this.position_[0]=t.longitude,this.position_[1]=t.latitude):this.position_=[t.longitude,t.latitude];var o=this.transform_(this.position_);this.set(x,o),this.set(j,null===t.speed?void 0:t.speed);var n=Object(g.a)(this.position_,t.accuracy);n.applyTransform(this.transform_),this.set(w,n),this.changed()},t.prototype.positionError_=function(e){this.dispatchEvent(new A(e))},t.prototype.getAccuracy=function(){return this.get(b)},t.prototype.getAccuracyGeometry=function(){return this.get(w)||null},t.prototype.getAltitude=function(){return this.get(E)},t.prototype.getAltitudeAccuracy=function(){return this.get(O)},t.prototype.getHeading=function(){return this.get(S)},t.prototype.getPosition=function(){return this.get(x)},t.prototype.getProjection=function(){return this.get(C)},t.prototype.getSpeed=function(){return this.get(j)},t.prototype.getTracking=function(){return this.get(P)},t.prototype.getTrackingOptions=function(){return this.get(T)},t.prototype.setProjection=function(e){this.set(C,Object(y.t)(e))},t.prototype.setTracking=function(e){this.set(P,e)},t.prototype.setTrackingOptions=function(e){this.set(T,e)},t}(f.b),I=o("./node_modules/ol/Image.js"),R=o("./node_modules/ol/ImageBase.js"),L=o("./node_modules/ol/ImageState.js"),k=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),G=function(e){function t(t,o,n,r,i){var s=this,a=void 0!==i?L.a.IDLE:L.a.LOADED;return(s=e.call(this,t,o,n,a)||this).loader_=void 0!==i?i:null,s.canvas_=r,s.error_=null,s}return k(t,e),t.prototype.getError=function(){return this.error_},t.prototype.handleLoad_=function(e){e?(this.error_=e,this.state=L.a.ERROR):this.state=L.a.LOADED,this.changed()},t.prototype.load=function(){this.state==L.a.IDLE&&(this.state=L.a.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))},t.prototype.getImage=function(){return this.canvas_},t}(R.a),N=o("./node_modules/ol/ImageTile.js"),D=o("./node_modules/ol/Kinetic.js"),F=o("./node_modules/ol/Map.js"),U=o("./node_modules/ol/MapBrowserEvent.js"),B=o("./node_modules/ol/MapBrowserEventHandler.js"),z=o("./node_modules/ol/MapEvent.js"),V=o("./node_modules/ol/Observable.js"),W=o("./node_modules/ol/Overlay.js"),q=o("./node_modules/ol/PluggableMap.js"),H=o("./node_modules/ol/TileCache.js"),Y=o("./node_modules/ol/TileQueue.js"),X=o("./node_modules/ol/TileRange.js"),Z=o("./node_modules/ol/VectorRenderTile.js"),K=o("./node_modules/ol/VectorTile.js"),J=o("./node_modules/ol/View.js"),Q=o("./node_modules/ol/array.js"),$=o("./node_modules/ol/asserts.js"),ee=o("./node_modules/ol/centerconstraint.js"),te=o("./node_modules/ol/color.js"),oe=o("./node_modules/ol/colorlike.js"),ne=o("./node_modules/ol/control.js"),re=o("./node_modules/ol/coordinate.js"),ie=o("./node_modules/ol/css.js"),se=o("./node_modules/ol/dom.js"),ae=o("./node_modules/ol/easing.js"),le=o("./node_modules/ol/events.js"),ce=o("./node_modules/ol/extent.js"),ue=o("./node_modules/ol/featureloader.js"),de=o("./node_modules/ol/functions.js"),he=o("./node_modules/ol/has.js"),pe=o("./node_modules/ol/interaction.js"),fe=o("./node_modules/ol/loadingstrategy.js"),me=o("./node_modules/ol/net.js"),ge=o("./node_modules/ol/obj.js"),ye=o("./node_modules/ol/render.js"),ve=o("./node_modules/ol/reproj.js"),_e=o("./node_modules/ol/resolutionconstraint.js"),be=o("./node_modules/ol/rotationconstraint.js"),we=o("./node_modules/ol/size.js"),Ee=o("./node_modules/ol/sphere.js"),Oe=o("./node_modules/ol/string.js"),Se=o("./node_modules/ol/tilecoord.js"),xe=o("./node_modules/ol/tilegrid.js"),Ce=o("./node_modules/ol/tileurlfunction.js"),je=o("./node_modules/ol/transform.js"),Pe=o("./node_modules/ol/uri.js"),Te=o("./node_modules/ol/util.js"),Ae=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function Me(e,t){for(var o=Ae.length,n=0;n<o;++n)try{var r=e.getContext(Ae[n],t);if(r)return r}catch(e){}return null}var Ie=o("./node_modules/ol/xml.js"),Re=35044;function Le(e){switch(e){case 34962:return Float32Array;case 34963:return Uint32Array;default:return Float32Array}}var ke=function(){function e(e,t){this.array=null,this.type=e,Object($.a)(34962===e||34963===e,62),this.usage=void 0!==t?t:Re}return e.prototype.ofSize=function(e){this.array=new(Le(this.type))(e)},e.prototype.fromArray=function(e){var t=Le(this.type);this.array=t.from?t.from(e):new t(e)},e.prototype.fromArrayBuffer=function(e){this.array=new(Le(this.type))(e)},e.prototype.getType=function(){return this.type},e.prototype.getArray=function(){return this.array},e.prototype.getUsage=function(){return this.usage},e.prototype.getSize=function(){return this.array?this.array.length:0},e}(),Ge="webglcontextlost",Ne="webglcontextrestored",De=function(){function e(e){this.gl_=e.webGlContext;var t=this.gl_;this.scaleRatio_=e.scaleRatio||1,this.renderTargetTexture_=t.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=t.createFramebuffer();var o=t.createShader(t.VERTEX_SHADER);t.shaderSource(o,e.vertexShader||"\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n"),t.compileShader(o);var n=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(n,e.fragmentShader||"\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord);\n  }\n"),t.compileShader(n),this.renderTargetProgram_=t.createProgram(),t.attachShader(this.renderTargetProgram_,o),t.attachShader(this.renderTargetProgram_,n),t.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),t.STATIC_DRAW),this.renderTargetAttribLocation_=t.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetTextureLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],e.uniforms&&Object.keys(e.uniforms).forEach(function(o){this.uniforms_.push({value:e.uniforms[o],location:t.getUniformLocation(this.renderTargetProgram_,o)})}.bind(this))}return e.prototype.getGL=function(){return this.gl_},e.prototype.init=function(e){var t=this.getGL(),o=[t.drawingBufferWidth*this.scaleRatio_,t.drawingBufferHeight*this.scaleRatio_];if(t.bindFramebuffer(t.FRAMEBUFFER,this.getFrameBuffer()),t.viewport(0,0,o[0],o[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==o[0]||this.renderTargetTextureSize_[1]!==o[1]){this.renderTargetTextureSize_=o;var n=t.RGBA,r=t.RGBA,i=t.UNSIGNED_BYTE;t.bindTexture(t.TEXTURE_2D,this.renderTargetTexture_),t.texImage2D(t.TEXTURE_2D,0,n,o[0],o[1],0,r,i,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.renderTargetTexture_,0)}},e.prototype.apply=function(e,t){var o=this.getGL(),n=e.size;o.bindFramebuffer(o.FRAMEBUFFER,t?t.getFrameBuffer():null),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,this.renderTargetTexture_),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT),o.enable(o.BLEND),o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA),o.viewport(0,0,o.drawingBufferWidth,o.drawingBufferHeight),o.bindBuffer(o.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),o.useProgram(this.renderTargetProgram_),o.enableVertexAttribArray(this.renderTargetAttribLocation_),o.vertexAttribPointer(this.renderTargetAttribLocation_,2,o.FLOAT,!1,0,0),o.uniform2f(this.renderTargetUniformLocation_,n[0],n[1]),o.uniform1i(this.renderTargetTextureLocation_,0),this.applyUniforms(e),o.drawArrays(o.TRIANGLES,0,6)},e.prototype.getFrameBuffer=function(){return this.frameBuffer_},e.prototype.applyUniforms=function(e){var t,o=this.getGL(),n=1;this.uniforms_.forEach((function(r){if((t="function"==typeof r.value?r.value(e):r.value)instanceof HTMLCanvasElement||t instanceof ImageData)r.texture||(r.texture=o.createTexture()),o.activeTexture(o["TEXTURE"+n]),o.bindTexture(o.TEXTURE_2D,r.texture),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),t instanceof ImageData?o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,t.width,t.height,0,o.UNSIGNED_BYTE,new Uint8Array(t.data)):o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,t),o.uniform1i(r.location,n++);else if(Array.isArray(t))switch(t.length){case 2:return void o.uniform2f(r.location,t[0],t[1]);case 3:return void o.uniform3f(r.location,t[0],t[1],t[2]);case 4:return void o.uniform4f(r.location,t[0],t[1],t[2],t[3]);default:return}else"number"==typeof t&&o.uniform1f(r.location,t)}))},e}();function Fe(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Ue(e,t){return e[0]=t[0],e[1]=t[1],e[4]=t[2],e[5]=t[3],e[12]=t[4],e[13]=t[5],e}var Be=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),ze="u_projectionMatrix",Ve="u_offsetScaleMatrix",We="u_offsetRotateMatrix",qe="u_time",He="u_zoom",Ye="u_resolution",Xe={UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126};function Ze(e){for(var t=0,o=0;o<e.length;o++){var n=e[o];t+=n.size*Ke(n.type)}return t}function Ke(e){switch(e){case Xe.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case Xe.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case Xe.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case Xe.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}var Je=function(e){function t(t){var o=e.call(this)||this,n=t||{};o.boundHandleWebGLContextLost_=o.handleWebGLContextLost.bind(o),o.boundHandleWebGLContextRestored_=o.handleWebGLContextRestored.bind(o),o.canvas_=document.createElement("canvas"),o.canvas_.style.position="absolute",o.canvas_.style.left="0",o.gl_=Me(o.canvas_);var r=o.getGL();if(o.bufferCache_={},o.extensionCache_={},o.currentProgram_=null,o.canvas_.addEventListener(Ge,o.boundHandleWebGLContextLost_),o.canvas_.addEventListener(Ne,o.boundHandleWebGLContextRestored_),o.offsetRotateMatrix_=Object(je.d)(),o.offsetScaleMatrix_=Object(je.d)(),o.tmpMat4_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],o.uniformLocations_={},o.attribLocations_={},o.uniforms_=[],n.uniforms)for(var i in n.uniforms)o.uniforms_.push({name:i,value:n.uniforms[i]});return o.postProcessPasses_=n.postProcesses?n.postProcesses.map((function(e){return new De({webGlContext:r,scaleRatio:e.scaleRatio,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms})})):[new De({webGlContext:r})],o.shaderCompileErrors_=null,o.startTime_=Date.now(),o}return Be(t,e),t.prototype.getExtension=function(e){if(e in this.extensionCache_)return this.extensionCache_[e];var t=this.gl_.getExtension(e);return this.extensionCache_[e]=t,t},t.prototype.bindBuffer=function(e){var t=this.getGL(),o=Object(Te.c)(e),n=this.bufferCache_[o];n||(n={buffer:e,webGlBuffer:t.createBuffer()},this.bufferCache_[o]=n);t.bindBuffer(e.getType(),n.webGlBuffer)},t.prototype.flushBufferData=function(e){var t=this.getGL();this.bindBuffer(e),t.bufferData(e.getType(),e.getArray(),e.getUsage())},t.prototype.deleteBuffer=function(e){var t=this.getGL(),o=Object(Te.c)(e),n=this.bufferCache_[o];n&&!t.isContextLost()&&t.deleteBuffer(n.webGlBuffer),delete this.bufferCache_[o]},t.prototype.disposeInternal=function(){this.canvas_.removeEventListener(Ge,this.boundHandleWebGLContextLost_),this.canvas_.removeEventListener(Ne,this.boundHandleWebGLContextRestored_);var e=this.gl_.getExtension("WEBGL_lose_context");e&&e.loseContext(),delete this.gl_,delete this.canvas_},t.prototype.prepareDraw=function(e,t){var o=this.getGL(),n=this.getCanvas(),r=e.size,i=e.pixelRatio;n.width=r[0]*i,n.height=r[1]*i,n.style.width=r[0]+"px",n.style.height=r[1]+"px",o.useProgram(this.currentProgram_);for(var s=this.postProcessPasses_.length-1;s>=0;s--)this.postProcessPasses_[s].init(e);o.bindTexture(o.TEXTURE_2D,null),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT),o.enable(o.BLEND),o.blendFunc(o.ONE,t?o.ZERO:o.ONE_MINUS_SRC_ALPHA),o.useProgram(this.currentProgram_),this.applyFrameState(e),this.applyUniforms(e)},t.prototype.prepareDrawToRenderTarget=function(e,t,o){var n=this.getGL(),r=t.getSize();n.bindFramebuffer(n.FRAMEBUFFER,t.getFramebuffer()),n.viewport(0,0,r[0],r[1]),n.bindTexture(n.TEXTURE_2D,t.getTexture()),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.enable(n.BLEND),n.blendFunc(n.ONE,o?n.ZERO:n.ONE_MINUS_SRC_ALPHA),n.useProgram(this.currentProgram_),this.applyFrameState(e),this.applyUniforms(e)},t.prototype.drawElements=function(e,t){var o=this.getGL();this.getExtension("OES_element_index_uint");var n=o.UNSIGNED_INT,r=t-e,i=4*e;o.drawElements(o.TRIANGLES,r,n,i)},t.prototype.finalizeDraw=function(e){for(var t=0;t<this.postProcessPasses_.length;t++)this.postProcessPasses_[t].apply(e,this.postProcessPasses_[t+1]||null)},t.prototype.getCanvas=function(){return this.canvas_},t.prototype.getGL=function(){return this.gl_},t.prototype.applyFrameState=function(e){var t=e.size,o=e.viewState.rotation,n=Object(je.j)(this.offsetScaleMatrix_);Object(je.l)(n,2/t[0],2/t[1]);var r=Object(je.j)(this.offsetRotateMatrix_);0!==o&&Object(je.k)(r,-o),this.setUniformMatrixValue(Ve,Ue(this.tmpMat4_,n)),this.setUniformMatrixValue(We,Ue(this.tmpMat4_,r)),this.setUniformFloatValue(qe,.001*(Date.now()-this.startTime_)),this.setUniformFloatValue(He,e.viewState.zoom),this.setUniformFloatValue(Ye,e.viewState.resolution)},t.prototype.applyUniforms=function(e){var t,o=this.getGL(),n=0;this.uniforms_.forEach(function(r){if((t="function"==typeof r.value?r.value(e):r.value)instanceof HTMLCanvasElement||t instanceof HTMLImageElement||t instanceof ImageData)r.texture||(r.prevValue=void 0,r.texture=o.createTexture()),o.activeTexture(o["TEXTURE"+n]),o.bindTexture(o.TEXTURE_2D,r.texture),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),(!(t instanceof HTMLImageElement)||t.complete)&&r.prevValue!==t&&(r.prevValue=t,o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,t)),o.uniform1i(this.getUniformLocation(r.name),n++);else if(Array.isArray(t)&&6===t.length)this.setUniformMatrixValue(r.name,Ue(this.tmpMat4_,t));else if(Array.isArray(t)&&t.length<=4)switch(t.length){case 2:return void o.uniform2f(this.getUniformLocation(r.name),t[0],t[1]);case 3:return void o.uniform3f(this.getUniformLocation(r.name),t[0],t[1],t[2]);case 4:return void o.uniform4f(this.getUniformLocation(r.name),t[0],t[1],t[2],t[3]);default:return}else"number"==typeof t&&o.uniform1f(this.getUniformLocation(r.name),t)}.bind(this))},t.prototype.useProgram=function(e){return e!=this.currentProgram_&&(this.getGL().useProgram(e),this.currentProgram_=e,this.uniformLocations_={},this.attribLocations_={},!0)},t.prototype.compileShader=function(e,t){var o=this.getGL(),n=o.createShader(t);return o.shaderSource(n,e),o.compileShader(n),n},t.prototype.getProgram=function(e,t){var o=this.getGL(),n=this.compileShader(e,o.FRAGMENT_SHADER),r=this.compileShader(t,o.VERTEX_SHADER),i=o.createProgram();if(o.attachShader(i,n),o.attachShader(i,r),o.linkProgram(i),!o.getShaderParameter(n,o.COMPILE_STATUS)){var s="Fragment shader compliation failed: "+o.getShaderInfoLog(n);throw new Error(s)}if(o.deleteShader(n),!o.getShaderParameter(r,o.COMPILE_STATUS)){s="Vertex shader compilation failed: "+o.getShaderInfoLog(r);throw new Error(s)}if(o.deleteShader(r),!o.getProgramParameter(i,o.LINK_STATUS)){s="GL program linking failed: "+o.getShaderInfoLog(r);throw new Error(s)}return i},t.prototype.getUniformLocation=function(e){return void 0===this.uniformLocations_[e]&&(this.uniformLocations_[e]=this.getGL().getUniformLocation(this.currentProgram_,e)),this.uniformLocations_[e]},t.prototype.getAttributeLocation=function(e){return void 0===this.attribLocations_[e]&&(this.attribLocations_[e]=this.getGL().getAttribLocation(this.currentProgram_,e)),this.attribLocations_[e]},t.prototype.makeProjectionTransform=function(e,t){var o=e.size,n=e.viewState.rotation,r=e.viewState.resolution,i=e.viewState.center;return Object(je.j)(t),Object(je.b)(t,0,0,2/(r*o[0]),2/(r*o[1]),-n,-i[0],-i[1]),t},t.prototype.setUniformFloatValue=function(e,t){this.getGL().uniform1f(this.getUniformLocation(e),t)},t.prototype.setUniformMatrixValue=function(e,t){this.getGL().uniformMatrix4fv(this.getUniformLocation(e),!1,t)},t.prototype.enableAttributeArray_=function(e,t,o,n,r){var i=this.getAttributeLocation(e);i<0||(this.getGL().enableVertexAttribArray(i),this.getGL().vertexAttribPointer(i,t,o,!1,n,r))},t.prototype.enableAttributes=function(e){for(var t=Ze(e),o=0,n=0;n<e.length;n++){var r=e[n];this.enableAttributeArray_(r.name,r.size,r.type||5126,t,o),o+=r.size*Ke(r.type)}},t.prototype.handleWebGLContextLost=function(){Object(ge.b)(this.bufferCache_),this.currentProgram_=null},t.prototype.handleWebGLContextRestored=function(){},t.prototype.createTexture=function(e,t,o){var n=this.getGL(),r=o||n.createTexture(),i=n.RGBA,s=n.RGBA,a=n.UNSIGNED_BYTE;return n.bindTexture(n.TEXTURE_2D,r),t?n.texImage2D(n.TEXTURE_2D,0,i,s,a,t):n.texImage2D(n.TEXTURE_2D,0,i,e[0],e[1],0,s,a,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),r},t}(d.a),Qe=new Uint8Array(4),$e=function(){function e(e,t){this.helper_=e;var o=e.getGL();this.texture_=o.createTexture(),this.framebuffer_=o.createFramebuffer(),this.size_=t||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}return e.prototype.setSize=function(e){Object(Q.b)(e,this.size_)||(this.size_[0]=e[0],this.size_[1]=e[1],this.updateSize_())},e.prototype.getSize=function(){return this.size_},e.prototype.clearCachedData=function(){this.dataCacheDirty_=!0},e.prototype.readAll=function(){if(this.dataCacheDirty_){var e=this.size_,t=this.helper_.getGL();t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer_),t.readPixels(0,0,e[0],e[1],t.RGBA,t.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_},e.prototype.readPixel=function(e,t){if(e<0||t<0||e>this.size_[0]||t>=this.size_[1])return Qe[0]=0,Qe[1]=0,Qe[2]=0,Qe[3]=0,Qe;this.readAll();var o=Math.floor(e)+(this.size_[1]-Math.floor(t)-1)*this.size_[0];return Qe[0]=this.data_[4*o],Qe[1]=this.data_[4*o+1],Qe[2]=this.data_[4*o+2],Qe[3]=this.data_[4*o+3],Qe},e.prototype.getTexture=function(){return this.texture_},e.prototype.getFramebuffer=function(){return this.framebuffer_},e.prototype.updateSize_=function(){var e=this.size_,t=this.helper_.getGL();this.texture_=this.helper_.createTexture(e,null,this.texture_),t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer_),t.viewport(0,0,e[0],e[1]),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture_,0),this.data_=new Uint8Array(e[0]*e[1]*4)},e}(),et=o("./node_modules/ol/structs/LRUCache.js"),tt=o("./node_modules/ol/source/State.js"),ot=o("./node_modules/ol/events/Target.js"),nt=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();function rt(e,t){e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR)}function it(e,t,o,n,r){var i,s,a=e.getGL();switch(rt(a,t),r){case 1:i=a.LUMINANCE;break;case 2:i=a.LUMINANCE_ALPHA;break;case 3:i=a.RGB;break;case 4:i=a.RGBA;break;default:throw new Error("Unsupported number of bands: "+r)}o instanceof Float32Array?(s=a.FLOAT,e.getExtension("OES_texture_float"),e.getExtension("OES_texture_float_linear")):s=a.UNSIGNED_BYTE,a.texImage2D(a.TEXTURE_2D,0,i,n[0],n[1],0,i,s,o)}var st=function(e){function t(t,o,n){var r=e.call(this)||this;r.tile,r.textures=[],r.handleTileChange_=r.handleTileChange_.bind(r),r.size=Object(we.d)(o.getTileSize(t.tileCoord[0])),r.bandCount=NaN,r.helper_=n;var i=new ke(34962,35044);return i.fromArray([0,1,1,1,1,0,0,0]),n.flushBufferData(i),r.coords=i,r.setTile(t),r}return nt(t,e),t.prototype.setTile=function(e){e!==this.tile&&(this.tile&&this.tile.removeEventListener(m.a.CHANGE,this.handleTileChange_),this.tile=e,this.textures.length=0,this.loaded=e.getState()===l.a.LOADED,this.loaded?this.uploadTile_():e.addEventListener(m.a.CHANGE,this.handleTileChange_))},t.prototype.uploadTile_=function(){var e=this.helper_,t=e.getGL(),o=this.tile;if(o instanceof N.a){var n=t.createTexture();return this.textures.push(n),this.bandCount=4,void function(e,t,o){rt(e,t),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,o)}(t,n,o.getImage())}var r=o.getData(),i=r instanceof Float32Array,s=this.size[0]*this.size[1];this.bandCount=r.byteLength/(i?4:1)/s;var a=Math.ceil(this.bandCount/4);if(1===a){n=t.createTexture();return this.textures.push(n),void it(e,n,r,this.size,this.bandCount)}for(var l=i?Float32Array:Uint8Array,c=new Array(a),u=0;u<a;++u){n=t.createTexture();this.textures.push(n);var d=u<a-1?4:this.bandCount%4;c[u]=new l(s*d)}for(var h=s*this.bandCount,p=0;p<h;++p){var f=p%this.bandCount,m=f%4,g=(d=(u=Math.floor(f/4))<a-1?4:this.bandCount%4,Math.floor(p/this.bandCount));c[u][g*d+m]=r[p]}for(u=0;u<a;++u){d=u<a-1?4:this.bandCount%4;it(e,n=this.textures[u],c[u],this.size,d)}},t.prototype.handleTileChange_=function(){this.tile.getState()===l.a.LOADED&&(this.loaded=!0,this.uploadTile_(),this.dispatchEvent(m.a.CHANGE))},t.prototype.disposeInternal=function(){var e=this.helper_.getGL();this.helper_.deleteBuffer(this.coords);for(var t=0;t<this.textures.length;++t)e.deleteTexture(this.textures[t]);this.tile.removeEventListener(m.a.CHANGE,this.handleTileChange_)},t}(ot.a),at=o("./node_modules/ol/renderer/Layer.js"),lt=o("./node_modules/ol/render/Event.js"),ct=o("./node_modules/ol/render/EventType.js"),ut=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),dt="GENERATE_BUFFERS",ht=function(e){function t(t,o){var n=e.call(this,t)||this,r=o||{};return n.helper=new Je({postProcesses:r.postProcesses,uniforms:r.uniforms}),void 0!==r.className&&(n.helper.getCanvas().className=r.className),n}return ut(t,e),t.prototype.disposeInternal=function(){this.helper.dispose(),delete this.helper,e.prototype.disposeInternal.call(this)},t.prototype.dispatchRenderEvent_=function(e,t){var o=this.getLayer();if(o.hasListener(e)){var n=new lt.a(e,null,t,null);o.dispatchEvent(n)}},t.prototype.preRender=function(e){this.dispatchRenderEvent_(ct.a.PRERENDER,e)},t.prototype.postRender=function(e){this.dispatchRenderEvent_(ct.a.POSTRENDER,e)},t}(at.a),pt=[],ft={vertexPosition:0,indexPosition:0};function mt(e,t,o,n,r){e[t+0]=o,e[t+1]=n,e[t+2]=r}function gt(e,t){var o=t||[];return o[0]=Math.floor(e/256/256/256)/255,o[1]=Math.floor(e/256/256)%256/255,o[2]=Math.floor(e/256)%256/255,o[3]=e%256/255,o}function yt(e){var t=0;return t+=Math.round(256*e[0]*256*256*255),t+=Math.round(256*e[1]*256*255),t+=Math.round(256*e[2]*255),t+=Math.round(255*e[3])}var vt=ht,_t=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),bt={TILE_TEXTURE_PREFIX:"u_tileTexture",TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",RESOLUTION:"u_resolution",ZOOM:"u_zoom"},wt={TEXTURE_COORD:"a_textureCoord"},Et=[{name:wt.TEXTURE_COORD,size:2,type:Xe.FLOAT}],Ot={};function St(e){return 2*(1-1/(e+1))-1}function xt(e,t,o){o in e||(e[o]=[]),e[o].push(t)}function Ct(e,t){var o=e.layerStatesArray[e.layerIndex];return o.extent&&(t=Object(ce.H)(t,Object(y.r)(o.extent,e.viewState.projection))),t}var jt=function(e){function t(t,o){var n=e.call(this,t,{uniforms:o.uniforms,className:o.className})||this;n.tileTransform_=Object(je.d)(),n.tempMat4_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],n.tempTileRange_=new X.b(0,0,0,0),n.tempTileCoord_=Object(Se.a)(0,0,0),n.tempSize_=[0,0],n.program_=n.helper.getProgram(o.fragmentShader,o.vertexShader);var r=new ke(34963,35044);r.fromArray([0,1,3,1,2,3]),n.helper.flushBufferData(r),n.indices_=r;var i=void 0!==o.cacheSize?o.cacheSize:512;return n.tileTextureCache_=new et.a(i),n.renderedOpacity_=NaN,n}return _t(t,e),t.prototype.isDrawableTile=function(e){var t=this.getLayer(),o=e.getState(),n=t.getUseInterimTilesOnError();return o==l.a.LOADED||o==l.a.EMPTY||o==l.a.ERROR&&!n},t.prototype.prepareFrame=function(e){if(Object(ce.Q)(Ct(e,e.extent)))return!1;var t=this.getLayer().getSource();return!!t&&t.getState()===tt.a.READY},t.prototype.enqueueTiles=function(e,t,o,n){var r=e.viewState,i=this.getLayer().getSource(),s=i.getTileGridForProjection(r.projection),a=this.tileTextureCache_,c=s.getTileRangeForExtentAndZ(t,o),u=Object(Te.c)(i);u in e.wantedTiles||(e.wantedTiles[u]={});for(var d=e.wantedTiles[u],h=s.getResolution(o),p=c.minX;p<=c.maxX;++p)for(var f=c.minY;f<=c.maxY;++f){var m=Object(Se.a)(o,p,f,this.tempTileCoord_),g=Object(Se.d)(m),y=void 0,v=void 0;a.containsKey(g)&&(v=(y=a.get(g)).tile),y&&y.tile.key===i.getKey()||(v=i.getTile(o,p,f,e.pixelRatio,r.projection),y?y.setTile(this.isDrawableTile(v)?v:v.getInterimTile()):(y=new st(v,s,this.helper),a.set(g,y))),xt(n,y,o);var _=v.getKey();d[_]=!0,v.getState()===l.a.IDLE&&(e.tileQueue.isKeyQueued(_)||e.tileQueue.enqueue([v,u,s.getTileCoordCenter(m),h]))}},t.prototype.renderFrame=function(e){this.preRender(e);var t=e.viewState,o=e.layerStatesArray[e.layerIndex],n=Ct(e,e.extent),r=this.getLayer().getSource(),i=r.getTileGridForProjection(t.projection),s=i.getZForResolution(t.resolution,r.zDirection),a={};if(e.nextExtent){var l=i.getZForResolution(t.nextResolution,r.zDirection),c=Ct(e,e.nextExtent);this.enqueueTiles(e,c,l,a)}this.enqueueTiles(e,n,s,a);for(var u={},d=Object(Te.c)(this),h=e.time,p=!1,f=a[s],m=0,g=f.length;m<g;++m){var y=(L=(q=f[m]).tile).tileCoord;if(q.loaded){if(1===(k=L.getAlpha(d,h))){L.endTransition(d);continue}p=!0,u[G=Object(Se.d)(y)]=k}if(!this.findAltTiles_(i,y,s+1,a))for(var v=s-1;v>=i.minZoom;--v){if(this.findAltTiles_(i,y,v,a))break}}this.helper.useProgram(this.program_),this.helper.prepareDraw(e,!p);for(var _=Object.keys(a).map(Number).sort(Q.i),b=this.helper.getGL(),w=t.center[0],E=t.center[1],O=0,S=_.length;O<S;++O){var x=_[O],C=i.getResolution(x),j=Object(we.d)(i.getTileSize(x),this.tempSize_),P=i.getOrigin(x),T=(w-P[0])/(j[0]*C),A=(P[1]-E)/(j[1]*C),M=t.resolution/C,I=St(x),R=a[x];for(m=0,g=R.length;m<g;++m){if((q=R[m]).loaded){y=(L=q.tile).tileCoord;var L,k,G=Object(Se.d)(y),N=y[1],D=y[2];Object(je.b)(this.tileTransform_,0,0,2/(e.size[0]*M/j[0]),-2/(e.size[1]*M/j[1]),t.rotation,-(T-N),-(A-D)),this.helper.setUniformMatrixValue(bt.TILE_TRANSFORM,Ue(this.tempMat4_,this.tileTransform_)),this.helper.bindBuffer(q.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(Et);for(var F=0;F<q.textures.length;++F){var U="TEXTURE"+F,B=bt.TILE_TEXTURE_PREFIX+F;b.activeTexture(b[U]),b.bindTexture(b.TEXTURE_2D,q.textures[F]),b.uniform1i(this.helper.getUniformLocation(B),F)}(k=G in u?u[G]:1)<1&&(e.animate=!0),this.helper.setUniformFloatValue(bt.TRANSITION_ALPHA,k),this.helper.setUniformFloatValue(bt.DEPTH,I),this.helper.setUniformFloatValue(bt.TEXTURE_PIXEL_WIDTH,j[0]),this.helper.setUniformFloatValue(bt.TEXTURE_PIXEL_HEIGHT,j[1]),this.helper.setUniformFloatValue(bt.RESOLUTION,t.resolution),this.helper.setUniformFloatValue(bt.ZOOM,t.zoom),this.helper.drawElements(0,this.indices_.getSize())}}}this.helper.finalizeDraw(e);var z=this.helper.getCanvas(),V=o.opacity;this.renderedOpacity_!==V&&(z.style.opacity=String(V),this.renderedOpacity_=V);for(var W=this.tileTextureCache_;W.canExpireCache();){var q;(q=W.pop()).dispose()}return e.postRenderFunctions.push((function(e,t){r.expireCache(r.getProjection(),Ot)})),this.postRender(e),z},t.prototype.findAltTiles_=function(e,t,o,n){var r=e.getTileRangeForTileCoordAndZ(t,o,this.tempTileRange_);if(!r)return!1;for(var i=!0,s=this.tileTextureCache_,a=r.minX;a<=r.maxX;++a)for(var l=r.minY;l<=r.maxY;++l){var c=Object(Se.e)(o,a,l),u=!1;if(s.containsKey(c)){var d=s.get(c);d.loaded&&(xt(n,d,o),u=!0)}u||(i=!1)}return i},t.prototype.disposeInternal=function(){var t=this.helper,o=t.getGL();t.deleteBuffer(this.indices_),delete this.indices_,o.deleteProgram(this.program_),delete this.program_;var n=this.tileTextureCache_;n.forEach((function(e){e.dispose()})),n.clear(),delete this.tileTextureCache_,e.prototype.disposeInternal.call(this)},t}(vt);jt.prototype.getLayer;var Pt=jt,Tt=1,At=2,Mt=4,It=8,Rt=16,Lt=31,kt=0,Gt={};function Nt(e){if("number"==typeof e)return Tt;if("boolean"==typeof e)return It;if("string"==typeof e)return Object(te.d)(e)?Mt|At:At;if(!Array.isArray(e))throw new Error("Unhandled value type: "+JSON.stringify(e));var t=e;if(t.every((function(e){return"number"==typeof e})))return 3===t.length||4===t.length?Mt|Rt:Rt;if("string"!=typeof t[0])throw new Error("Expected an expression operator but received: "+JSON.stringify(t));var o=Gt[t[0]];if(void 0===o)throw new Error("Unrecognized expression operator: "+JSON.stringify(t));return o.getReturnType(t.slice(1))}function Dt(e){return Object(v.d)(e)%1==0}function Ft(e){var t=e.toString();return-1===t.indexOf(".")?t+".0":t}function Ut(e){if(e.length<2||e.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return"vec"+e.length+"("+e.map(Ft).join(", ")+")"}function Bt(e){var t=Object(te.a)(e).slice();return t.length<4&&t.push(1),Ut(t.map((function(e,t){return t<3?e/255:e})))}function zt(e,t){return void 0===e.stringLiteralsMap[t]&&(e.stringLiteralsMap[t]=Object.keys(e.stringLiteralsMap).length),e.stringLiteralsMap[t]}function Vt(e,t){return Ft(zt(e,t))}function Wt(e,t,o){if(Array.isArray(t)&&"string"==typeof t[0]){var n=Gt[t[0]];if(void 0===n)throw new Error("Unrecognized expression operator: "+JSON.stringify(t));return n.toGlsl(e,t.slice(1),o)}var r=Nt(t);if((r&Tt)>0)return Ft(t);if((r&It)>0)return t.toString();if((r&At)>0&&(void 0===o||o==At))return Vt(e,t.toString());if((r&Mt)>0&&(void 0===o||o==Mt))return Bt(t);if((r&Rt)>0)return Ut(t);throw new Error("Unexpected expression "+t+" (expected type "+o+")")}function qt(e){if(!(Nt(e)&Tt))throw new Error("A numeric value was expected, got "+JSON.stringify(e)+" instead")}function Ht(e){for(var t=0;t<e.length;t++)qt(e[t])}function Yt(e){if(!(Nt(e)&At))throw new Error("A string value was expected, got "+JSON.stringify(e)+" instead")}function Xt(e){if(!(Nt(e)&It))throw new Error("A boolean value was expected, got "+JSON.stringify(e)+" instead")}function Zt(e,t){if(e.length!==t)throw new Error("Exactly "+t+" arguments were expected, got "+e.length+" instead")}function Kt(e,t){if(e.length<t)throw new Error("At least "+t+" arguments were expected, got "+e.length+" instead")}function Jt(e,t){if(e.length>t)throw new Error("At most "+t+" arguments were expected, got "+e.length+" instead")}function Qt(e){if(e.length%2!=0)throw new Error("An even amount of arguments was expected, got "+e+" instead")}function $t(e,t){if(!Dt(t))throw new Error("Could not infer only one type from the following expression: "+JSON.stringify(e))}function eo(e){return"u_var_"+e}function to(e){return{getReturnType:function(e){return It},toGlsl:function(t,o){Zt(o,2);for(var n=Lt,r=0;r<o.length;r++)n&=Nt(o[r]);if(n===kt)throw new Error("All arguments should be of compatible type, got "+JSON.stringify(o)+" instead");return n&=~Mt,"("+Wt(t,o[0],n)+" "+e+" "+Wt(t,o[1],n)+")"}}}function oo(e){return{getReturnType:function(e){return It},toGlsl:function(t,o){Kt(o,2);for(var n=0;n<o.length;n++)Xt(o[n]);return"("+o.map((function(e){return Wt(t,e)})).join(" "+e+" ")+")"}}}Gt.get={getReturnType:function(e){return Lt},toGlsl:function(e,t){Zt(t,1),Yt(t[0]);var o=t[0].toString();return-1===e.attributes.indexOf(o)&&e.attributes.push(o),(e.inFragmentShader?"v_":"a_")+o}},Gt.var={getReturnType:function(e){return Lt},toGlsl:function(e,t){Zt(t,1),Yt(t[0]);var o=t[0].toString();return-1===e.variables.indexOf(o)&&e.variables.push(o),eo(o)}},Gt.band={getReturnType:function(e){return Tt},toGlsl:function(e,t){Kt(t,1),Jt(t,3);var o=t[0];if("number"!=typeof o)throw new Error("Band index must be a number");var n=o-1,r=Math.floor(n/4),i=n%4;if(o===e.bandCount&&1===i&&(i=3),1===t.length)return"color"+r+"["+i+"]";var s=t[1],a=t[2]||0;return qt(s),qt(a),"texture2D("+(bt.TILE_TEXTURE_PREFIX+r)+", v_textureCoord + vec2("+Wt(e,s)+" / "+bt.TEXTURE_PIXEL_WIDTH+", "+Wt(e,a)+" / "+bt.TEXTURE_PIXEL_HEIGHT+"))["+i+"]"}},Gt.time={getReturnType:function(e){return Tt},toGlsl:function(e,t){return Zt(t,0),"u_time"}},Gt.zoom={getReturnType:function(e){return Tt},toGlsl:function(e,t){return Zt(t,0),"u_zoom"}},Gt.resolution={getReturnType:function(e){return Tt},toGlsl:function(e,t){return Zt(t,0),"u_resolution"}},Gt["*"]={getReturnType:function(e){return Tt},toGlsl:function(e,t){return Zt(t,2),Ht(t),"("+Wt(e,t[0])+" * "+Wt(e,t[1])+")"}},Gt["/"]={getReturnType:function(e){return Tt},toGlsl:function(e,t){return Zt(t,2),Ht(t),"("+Wt(e,t[0])+" / "+Wt(e,t[1])+")"}},Gt["+"]={getReturnType:function(e){return Tt},toGlsl:function(e,t){return Zt(t,2),Ht(t),"("+Wt(e,t[0])+" + "+Wt(e,t[1])+")"}},Gt["-"]={getReturnType:function(e){return Tt},toGlsl:function(e,t){return Zt(t,2),Ht(t),"("+Wt(e,t[0])+" - "+Wt(e,t[1])+")"}},Gt.clamp={getReturnType:function(e){return Tt},toGlsl:function(e,t){Zt(t,3),Ht(t);var o=Wt(e,t[1]),n=Wt(e,t[2]);return"clamp("+Wt(e,t[0])+", "+o+", "+n+")"}},Gt["%"]={getReturnType:function(e){return Tt},toGlsl:function(e,t){return Zt(t,2),Ht(t),"mod("+Wt(e,t[0])+", "+Wt(e,t[1])+")"}},Gt["^"]={getReturnType:function(e){return Tt},toGlsl:function(e,t){return Zt(t,2),Ht(t),"pow("+Wt(e,t[0])+", "+Wt(e,t[1])+")"}},Gt.abs={getReturnType:function(e){return Tt},toGlsl:function(e,t){return Zt(t,1),Ht(t),"abs("+Wt(e,t[0])+")"}},Gt.sin={getReturnType:function(e){return Tt},toGlsl:function(e,t){return Zt(t,1),Ht(t),"sin("+Wt(e,t[0])+")"}},Gt.cos={getReturnType:function(e){return Tt},toGlsl:function(e,t){return Zt(t,1),Ht(t),"cos("+Wt(e,t[0])+")"}},Gt.atan={getReturnType:function(e){return Tt},toGlsl:function(e,t){return Kt(t,1),Jt(t,2),Ht(t),2===t.length?"atan("+Wt(e,t[0])+", "+Wt(e,t[1])+")":"atan("+Wt(e,t[0])+")"}},Gt[">"]={getReturnType:function(e){return It},toGlsl:function(e,t){return Zt(t,2),Ht(t),"("+Wt(e,t[0])+" > "+Wt(e,t[1])+")"}},Gt[">="]={getReturnType:function(e){return It},toGlsl:function(e,t){return Zt(t,2),Ht(t),"("+Wt(e,t[0])+" >= "+Wt(e,t[1])+")"}},Gt["<"]={getReturnType:function(e){return It},toGlsl:function(e,t){return Zt(t,2),Ht(t),"("+Wt(e,t[0])+" < "+Wt(e,t[1])+")"}},Gt["<="]={getReturnType:function(e){return It},toGlsl:function(e,t){return Zt(t,2),Ht(t),"("+Wt(e,t[0])+" <= "+Wt(e,t[1])+")"}},Gt["=="]=to("=="),Gt["!="]=to("!="),Gt["!"]={getReturnType:function(e){return It},toGlsl:function(e,t){return Zt(t,1),Xt(t[0]),"(!"+Wt(e,t[0])+")"}},Gt.all=oo("&&"),Gt.any=oo("||"),Gt.between={getReturnType:function(e){return It},toGlsl:function(e,t){Zt(t,3),Ht(t);var o=Wt(e,t[1]),n=Wt(e,t[2]),r=Wt(e,t[0]);return"("+r+" >= "+o+" && "+r+" <= "+n+")"}},Gt.array={getReturnType:function(e){return Rt},toGlsl:function(e,t){Kt(t,2),Jt(t,4),Ht(t);var o=t.map((function(t){return Wt(e,t,Tt)}));return"vec"+t.length+"("+o.join(", ")+")"}},Gt.color={getReturnType:function(e){return Mt},toGlsl:function(e,t){Kt(t,3),Jt(t,4),Ht(t);var o=t;3===t.length&&o.push(1);var n=t.map((function(t,o){return Wt(e,t,Tt)+(o<3?" / 255.0":"")}));return"vec"+t.length+"("+n.join(", ")+")"}},Gt.interpolate={getReturnType:function(e){for(var t=Mt|Tt,o=3;o<e.length;o+=2)t&=Nt(e[o]);return t},toGlsl:function(e,t,o){Qt(t),Kt(t,6);var n,r=t[0];switch(r[0]){case"linear":n=1;break;case"exponential":n=r[1];break;default:n=null}if(!n)throw new Error('Invalid interpolation type for "interpolate" operator, received: '+JSON.stringify(r));var i=void 0!==o?o:Lt,s=Gt.interpolate.getReturnType(t)&i;$t(t,s);for(var a=Wt(e,t[1]),l=Ft(n),c="",u=2;u<t.length-2;u+=2){var d=Wt(e,t[u]),h=c||Wt(e,t[u+1],s),p=Wt(e,t[u+2]);c="mix("+h+", "+Wt(e,t[u+3],s)+", pow(clamp(("+a+" - "+d+") / ("+p+" - "+d+"), 0.0, 1.0), "+l+"))"}return c}},Gt.match={getReturnType:function(e){for(var t=Lt,o=2;o<e.length;o+=2)t&=Nt(e[o]);return t&=Nt(e[e.length-1])},toGlsl:function(e,t,o){Qt(t),Kt(t,4);var n=void 0!==o?o:Lt,r=Gt.match.getReturnType(t)&n;$t(t,r);for(var i=Wt(e,t[0]),s=Wt(e,t[t.length-1],r),a=null,l=t.length-3;l>=1;l-=2){a="("+i+" == "+Wt(e,t[l])+" ? "+Wt(e,t[l+1],r)+" : "+(a||s)+")"}return a}},Gt.case={getReturnType:function(e){for(var t=Lt,o=1;o<e.length;o+=2)t&=Nt(e[o]);return t&=Nt(e[e.length-1])},toGlsl:function(e,t,o){!function(e){if(e.length%2==0)throw new Error("An odd amount of arguments was expected, got "+e+" instead")}(t),Kt(t,3);var n=void 0!==o?o:Lt,r=Gt.case.getReturnType(t)&n;$t(t,r);for(var i=0;i<t.length-1;i+=2)Xt(t[i]);var s=Wt(e,t[t.length-1],r),a=null;for(i=t.length-3;i>=0;i-=2){a="("+Wt(e,t[i])+" ? "+Wt(e,t[i+1],r)+" : "+(a||s)+")"}return a}};var no=function(){function e(){this.uniforms=[],this.attributes=[],this.varyings=[],this.sizeExpression="vec2(1.0)",this.rotationExpression="0.0",this.offsetExpression="vec2(0.0)",this.colorExpression="vec4(1.0)",this.texCoordExpression="vec4(0.0, 0.0, 1.0, 1.0)",this.discardExpression="false",this.rotateWithView=!1}return e.prototype.addUniform=function(e){return this.uniforms.push(e),this},e.prototype.addAttribute=function(e){return this.attributes.push(e),this},e.prototype.addVarying=function(e,t,o){return this.varyings.push({name:e,type:t,expression:o}),this},e.prototype.setSizeExpression=function(e){return this.sizeExpression=e,this},e.prototype.setRotationExpression=function(e){return this.rotationExpression=e,this},e.prototype.setSymbolOffsetExpression=function(e){return this.offsetExpression=e,this},e.prototype.setColorExpression=function(e){return this.colorExpression=e,this},e.prototype.setTextureCoordinateExpression=function(e){return this.texCoordExpression=e,this},e.prototype.setFragmentDiscardExpression=function(e){return this.discardExpression=e,this},e.prototype.setSymbolRotateWithView=function(e){return this.rotateWithView=e,this},e.prototype.getSizeExpression=function(){return this.sizeExpression},e.prototype.getOffsetExpression=function(){return this.offsetExpression},e.prototype.getColorExpression=function(){return this.colorExpression},e.prototype.getTextureCoordinateExpression=function(){return this.texCoordExpression},e.prototype.getFragmentDiscardExpression=function(){return this.discardExpression},e.prototype.getSymbolVertexShader=function(e){var t=this.rotateWithView?"u_offsetScaleMatrix * u_offsetRotateMatrix":"u_offsetScaleMatrix",o=this.attributes,n=this.varyings;return e&&(o=o.concat("vec4 a_hitColor"),n=n.concat({name:"v_hitColor",type:"vec4",expression:"a_hitColor"})),"precision mediump float;\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_time;\nuniform float u_zoom;\nuniform float u_resolution;\n"+this.uniforms.map((function(e){return"uniform "+e+";"})).join("\n")+"\nattribute vec2 a_position;\nattribute float a_index;\n"+o.map((function(e){return"attribute "+e+";"})).join("\n")+"\nvarying vec2 v_texCoord;\nvarying vec2 v_quadCoord;\n"+n.map((function(e){return"varying "+e.type+" "+e.name+";"})).join("\n")+"\nvoid main(void) {\n  mat4 offsetMatrix = "+t+";\n  vec2 halfSize = "+this.sizeExpression+" * 0.5;\n  vec2 offset = "+this.offsetExpression+";\n  float angle = "+this.rotationExpression+";\n  float offsetX;\n  float offsetY;\n  if (a_index == 0.0) {\n    offsetX = (offset.x - halfSize.x) * cos(angle) + (offset.y - halfSize.y) * sin(angle);\n    offsetY = (offset.y - halfSize.y) * cos(angle) - (offset.x - halfSize.x) * sin(angle);\n  } else if (a_index == 1.0) {\n    offsetX = (offset.x + halfSize.x) * cos(angle) + (offset.y - halfSize.y) * sin(angle);\n    offsetY = (offset.y - halfSize.y) * cos(angle) - (offset.x + halfSize.x) * sin(angle);\n  } else if (a_index == 2.0) {\n    offsetX = (offset.x + halfSize.x) * cos(angle) + (offset.y + halfSize.y) * sin(angle);\n    offsetY = (offset.y + halfSize.y) * cos(angle) - (offset.x + halfSize.x) * sin(angle);\n  } else {\n    offsetX = (offset.x - halfSize.x) * cos(angle) + (offset.y + halfSize.y) * sin(angle);\n    offsetY = (offset.y + halfSize.y) * cos(angle) - (offset.x - halfSize.x) * sin(angle);\n  }\n  vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n  vec4 texCoord = "+this.texCoordExpression+";\n  float u = a_index == 0.0 || a_index == 3.0 ? texCoord.s : texCoord.p;\n  float v = a_index == 2.0 || a_index == 3.0 ? texCoord.t : texCoord.q;\n  v_texCoord = vec2(u, v);\n  u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n  v = a_index == 2.0 || a_index == 3.0 ? 0.0 : 1.0;\n  v_quadCoord = vec2(u, v);\n"+n.map((function(e){return"  "+e.name+" = "+e.expression+";"})).join("\n")+"\n}"},e.prototype.getSymbolFragmentShader=function(e){var t=e?"  if (gl_FragColor.a < 0.1) { discard; } gl_FragColor = v_hitColor;":"",o=this.varyings;return e&&(o=o.concat({name:"v_hitColor",type:"vec4",expression:"a_hitColor"})),"precision mediump float;\nuniform float u_time;\nuniform float u_zoom;\nuniform float u_resolution;\n"+this.uniforms.map((function(e){return"uniform "+e+";"})).join("\n")+"\nvarying vec2 v_texCoord;\nvarying vec2 v_quadCoord;\n"+o.map((function(e){return"varying "+e.type+" "+e.name+";"})).join("\n")+"\nvoid main(void) {\n  if ("+this.discardExpression+") { discard; }\n  gl_FragColor = "+this.colorExpression+";\n  gl_FragColor.rgb *= gl_FragColor.a;\n"+t+"\n}"},e}();function ro(e){var t=e.symbol,o=void 0!==t.size?t.size:1,n=t.color||"white",r=t.textureCoord||[0,0,1,1],i=t.offset||[0,0],s=void 0!==t.opacity?t.opacity:1,a=void 0!==t.rotation?t.rotation:0,l={inFragmentShader:!1,variables:[],attributes:[],stringLiteralsMap:{}},c=Wt(l,o,Rt|Tt),u=Wt(l,i,Rt),d=Wt(l,r,Rt),h=Wt(l,a,Tt),p={inFragmentShader:!0,variables:l.variables,attributes:[],stringLiteralsMap:l.stringLiteralsMap},f=Wt(p,n,Mt),m=Wt(p,s,Tt),g="1.0",y="vec2("+Wt(p,o,Rt|Tt)+").x";switch(t.symbolType){case"square":case"image":break;case"circle":g="(1.0-smoothstep(1.-4./"+y+",1.,dot(v_quadCoord-.5,v_quadCoord-.5)*4.))";break;case"triangle":var v="(v_quadCoord*2.-1.)",_="(atan("+v+".x,"+v+".y))";g="(1.0-smoothstep(.5-3./"+y+",.5,cos(floor(.5+"+_+"/2.094395102)*2.094395102-"+_+")*length("+v+")))";break;default:throw new Error("Unexpected symbol type: "+t.symbolType)}var b=(new no).setSizeExpression("vec2("+c+")").setRotationExpression(h).setSymbolOffsetExpression(u).setTextureCoordinateExpression(d).setSymbolRotateWithView(!!t.rotateWithView).setColorExpression("vec4("+f+".rgb, "+f+".a * "+m+" * "+g+")");if(e.filter){var w=Wt(p,e.filter,It);b.setFragmentDiscardExpression("!"+w)}var E={};if(p.variables.forEach((function(t){var o=eo(t);b.addUniform("float "+o),E[o]=function(){if(!e.variables||void 0===e.variables[t])throw new Error("The following variable is missing from the style: "+t);var o=e.variables[t];return"string"==typeof o&&(o=zt(l,o)),void 0!==o?o:-9999999}})),"image"===t.symbolType&&t.src){var O=new Image;O.src=t.src,b.addUniform("sampler2D u_texture").setColorExpression(b.getColorExpression()+" * texture2D(u_texture, v_texCoord)"),E.u_texture=O}return p.attributes.forEach((function(e){-1===l.attributes.indexOf(e)&&l.attributes.push(e),b.addVarying("v_"+e,"float","a_"+e)})),l.attributes.forEach((function(e){b.addAttribute("float a_"+e)})),{builder:b,attributes:l.attributes.map((function(e){return{name:e,callback:function(t,o){var n=o[e];return"string"==typeof n&&(n=zt(l,n)),void 0!==n?n:-9999999}}})),uniforms:E}}var io=o("./node_modules/ol/tilegrid/TileGrid.js"),so=o("./node_modules/ol/tilegrid/WMTS.js"),ao=o("./node_modules/ol/tilegrid/common.js"),lo=o("./node_modules/ol/style/Circle.js"),co=o("./node_modules/ol/style/Fill.js"),uo=o("./node_modules/ol/style/Icon.js"),ho=o("./node_modules/ol/style/IconImage.js"),po=o("./node_modules/ol/style/IconImageCache.js"),fo=o("./node_modules/ol/style/Image.js"),mo=o("./node_modules/ol/style/RegularShape.js"),go=o("./node_modules/ol/style/Stroke.js"),yo=o("./node_modules/ol/style/Style.js"),vo=o("./node_modules/ol/style/Text.js"),_o=function(){function e(e){this.first_,this.last_,this.head_,this.circular_=void 0===e||e,this.length_=0}return e.prototype.insertItem=function(e){var t={prev:void 0,next:void 0,data:e},o=this.head_;if(o){var n=o.next;t.prev=o,t.next=n,o.next=t,n&&(n.prev=t),o===this.last_&&(this.last_=t)}else this.first_=t,this.last_=t,this.circular_&&(t.next=t,t.prev=t);this.head_=t,this.length_++},e.prototype.removeItem=function(){var e=this.head_;if(e){var t=e.next,o=e.prev;t&&(t.prev=o),o&&(o.next=t),this.head_=t||o,this.first_===this.last_?(this.head_=void 0,this.first_=void 0,this.last_=void 0):this.first_===e?this.first_=this.head_:this.last_===e&&(this.last_=o?this.head_.prev:this.head_),this.length_--}},e.prototype.firstItem=function(){if(this.head_=this.first_,this.head_)return this.head_.data},e.prototype.lastItem=function(){if(this.head_=this.last_,this.head_)return this.head_.data},e.prototype.nextItem=function(){if(this.head_&&this.head_.next)return this.head_=this.head_.next,this.head_.data},e.prototype.getNextItem=function(){if(this.head_&&this.head_.next)return this.head_.next.data},e.prototype.prevItem=function(){if(this.head_&&this.head_.prev)return this.head_=this.head_.prev,this.head_.data},e.prototype.getPrevItem=function(){if(this.head_&&this.head_.prev)return this.head_.prev.data},e.prototype.getCurrItem=function(){if(this.head_)return this.head_.data},e.prototype.setFirstItem=function(){this.circular_&&this.head_&&(this.first_=this.head_,this.last_=this.head_.prev)},e.prototype.concat=function(e){if(e.head_){if(this.head_){var t=this.head_.next;this.head_.next=e.first_,e.first_.prev=this.head_,t.prev=e.last_,e.last_.next=t,this.length_+=e.length_}else this.head_=e.head_,this.first_=e.first_,this.last_=e.last_,this.length_=e.length_;e.head_=void 0,e.first_=void 0,e.last_=void 0,e.length_=0}},e.prototype.getLength=function(){return this.length_},e}(),bo=o("./node_modules/ol/structs/PriorityQueue.js"),wo=o("./node_modules/ol/structs/RBush.js"),Eo=o("./node_modules/ol/source/TileImage.js"),Oo=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();function So(e){var t,o,n=e[0],r=new Array(n),i=1<<n-1;for(t=0;t<n;++t)o=48,e[1]&i&&(o+=1),e[2]&i&&(o+=2),r[t]=String.fromCharCode(o),i>>=1;return r.join("")}var xo=function(e){function t(t){var o=this,n=void 0!==t.hidpi&&t.hidpi;(o=e.call(this,{cacheSize:t.cacheSize,crossOrigin:"anonymous",imageSmoothing:t.imageSmoothing,opaque:!0,projection:Object(y.t)("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:tt.a.LOADING,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:n?2:1,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection})||this).hidpi_=n,o.culture_=void 0!==t.culture?t.culture:"en-us",o.maxZoom_=void 0!==t.maxZoom?t.maxZoom:-1,o.apiKey_=t.key,o.imagerySet_=t.imagerySet;var r="https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+o.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+o.apiKey_+"&c="+o.culture_;return Object(me.d)(r,o.handleImageryMetadataResponse.bind(o),void 0,"jsonp"),o}return Oo(t,e),t.prototype.getApiKey=function(){return this.apiKey_},t.prototype.getImagerySet=function(){return this.imagerySet_},t.prototype.handleImageryMetadataResponse=function(e){if(200==e.statusCode&&"OK"==e.statusDescription&&"ValidCredentials"==e.authenticationResultCode&&1==e.resourceSets.length&&1==e.resourceSets[0].resources.length){var t=e.resourceSets[0].resources[0],o=-1==this.maxZoom_?t.zoomMax:this.maxZoom_,n=this.getProjection(),r=Object(xe.d)(n),i=this.hidpi_?2:1,s=t.imageWidth==t.imageHeight?t.imageWidth/i:[t.imageWidth/i,t.imageHeight/i],a=Object(xe.c)({extent:r,minZoom:t.zoomMin,maxZoom:o,tileSize:s});this.tileGrid=a;var l=this.culture_,c=this.hidpi_;if(this.tileUrlFunction=Object(Ce.c)(t.imageUrlSubdomains.map((function(e){var o=[0,0,0],n=t.imageUrl.replace("{subdomain}",e).replace("{culture}",l);return function(e,t,r){if(e){Object(Se.a)(e[0],e[1],e[2],o);var i=n;return c&&(i+="&dpi=d1&device=mobile"),i.replace("{quadkey}",So(o))}}}))),t.imageryProviders){var u=Object(y.w)(Object(y.t)("EPSG:4326"),this.getProjection());this.setAttributions(function(e){var o=[],n=e.viewState,r=this.getTileGrid(),i=r.getZForResolution(n.resolution,this.zDirection),s=r.getTileCoordForCoordAndZ(n.center,i)[0];return t.imageryProviders.map((function(t){for(var n=!1,r=t.coverageAreas,i=0,a=r.length;i<a;++i){var l=r[i];if(s>=l.zoomMin&&s<=l.zoomMax){var c=l.bbox,d=[c[1],c[0],c[3],c[2]],h=Object(ce.a)(d,u);if(Object(ce.O)(h,e.extent)){n=!0;break}}}n&&o.push(t.attribution)})),o.push('<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html" target="_blank">Terms of Use</a>'),o}.bind(this))}this.setState(tt.a.READY)}else this.setState(tt.a.ERROR)},t}(Eo.a),Co=o("./node_modules/ol/source/XYZ.js"),jo=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Po=function(e){function t(t){var o=e.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,maxZoom:void 0!==t.maxZoom?t.maxZoom:18,minZoom:t.minZoom,projection:t.projection,transition:t.transition,wrapX:t.wrapX,zDirection:t.zDirection})||this;return o.account_=t.account,o.mapId_=t.map||"",o.config_=t.config||{},o.templateCache_={},o.initializeMap_(),o}return jo(t,e),t.prototype.getConfig=function(){return this.config_},t.prototype.updateConfig=function(e){Object(ge.a)(this.config_,e),this.initializeMap_()},t.prototype.setConfig=function(e){this.config_=e||{},this.initializeMap_()},t.prototype.initializeMap_=function(){var e=JSON.stringify(this.config_);if(this.templateCache_[e])this.applyTemplate_(this.templateCache_[e]);else{var t="https://"+this.account_+".carto.com/api/v1/map";this.mapId_&&(t+="/named/"+this.mapId_);var o=new XMLHttpRequest;o.addEventListener("load",this.handleInitResponse_.bind(this,e)),o.addEventListener("error",this.handleInitError_.bind(this)),o.open("POST",t),o.setRequestHeader("Content-type","application/json"),o.send(JSON.stringify(this.config_))}},t.prototype.handleInitResponse_=function(e,t){var o=t.target;if(!o.status||o.status>=200&&o.status<300){var n=void 0;try{n=JSON.parse(o.responseText)}catch(e){return void this.setState(tt.a.ERROR)}this.applyTemplate_(n),this.templateCache_[e]=n,this.setState(tt.a.READY)}else this.setState(tt.a.ERROR)},t.prototype.handleInitError_=function(e){this.setState(tt.a.ERROR)},t.prototype.applyTemplate_=function(e){var t="https://"+e.cdn_url.https+"/"+this.account_+"/api/v1/map/"+e.layergroupid+"/{z}/{x}/{y}.png";this.setUrl(t)},t}(Co.a),To=o("./node_modules/ol/geom/GeometryType.js"),Ao=o("./node_modules/ol/geom/Point.js"),Mo=o("./node_modules/ol/source/Vector.js"),Io=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Ro=function(e){function t(t){var o=e.call(this,{attributions:t.attributions,wrapX:t.wrapX})||this;return o.resolution=void 0,o.distance=void 0!==t.distance?t.distance:20,o.minDistance=t.minDistance||0,o.interpolationRatio=0,o.features=[],o.geometryFunction=t.geometryFunction||function(e){var t=e.getGeometry();return Object($.a)(t.getType()==To.a.POINT,10),t},o.createCustomCluster_=t.createCluster,o.source=null,o.boundRefresh_=o.refresh.bind(o),o.updateDistance(o.distance,o.minDistance),o.setSource(t.source||null),o}return Io(t,e),t.prototype.clear=function(t){this.features.length=0,e.prototype.clear.call(this,t)},t.prototype.getDistance=function(){return this.distance},t.prototype.getSource=function(){return this.source},t.prototype.loadFeatures=function(e,t,o){this.source.loadFeatures(e,t,o),t!==this.resolution&&(this.resolution=t,this.refresh())},t.prototype.setDistance=function(e){this.updateDistance(e,this.minDistance)},t.prototype.setMinDistance=function(e){this.updateDistance(this.distance,e)},t.prototype.getMinDistance=function(){return this.minDistance},t.prototype.setSource=function(e){this.source&&this.source.removeEventListener(m.a.CHANGE,this.boundRefresh_),this.source=e,e&&e.addEventListener(m.a.CHANGE,this.boundRefresh_),this.refresh()},t.prototype.refresh=function(){this.clear(),this.cluster(),this.addFeatures(this.features)},t.prototype.updateDistance=function(e,t){var o=0===e?0:Math.min(t,e)/e,n=e!==this.distance||this.interpolationRatio!==o;this.distance=e,this.minDistance=t,this.interpolationRatio=o,n&&this.refresh()},t.prototype.cluster=function(){if(void 0!==this.resolution&&this.source)for(var e=Object(ce.k)(),t=this.distance*this.resolution,o=this.source.getFeatures(),n={},r=0,i=o.length;r<i;r++){var s=o[r];if(!(Object(Te.c)(s)in n)){var a=this.geometryFunction(s);if(a){var l=a.getCoordinates();Object(ce.n)(l,e),Object(ce.d)(e,t,e);var c=this.source.getFeaturesInExtent(e).filter((function(e){var t=Object(Te.c)(e);return!(t in n)&&(n[t]=!0,!0)}));this.features.push(this.createCluster(c,e))}}}},t.prototype.createCluster=function(e,t){for(var o=[0,0],n=e.length-1;n>=0;--n){var r=this.geometryFunction(e[n]);r?Object(re.a)(o,r.getCoordinates()):e.splice(n,1)}Object(re.k)(o,1/e.length);var i=Object(ce.C)(t),s=this.interpolationRatio,a=new Ao.a([o[0]*(1-s)+i[0]*s,o[1]*(1-s)+i[1]*s]);return this.createCustomCluster_?this.createCustomCluster_(a,e):new h.b({geometry:a,features:e})},t}(Mo.b),Lo=o("./node_modules/ol/source/TileEventType.js"),ko=o("./node_modules/ol/source/Tile.js"),Go=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),No=function(e){function t(t){var o=this,n=void 0===t.projection?"EPSG:3857":t.projection,r=t.tileGrid;return void 0===r&&n&&(r=Object(xe.c)({extent:Object(xe.d)(n),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize})),(o=e.call(this,{cacheSize:.1,projection:n,tileGrid:r,opaque:t.opaque,state:t.state,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition})||this).tileLoadingKeys_={},o.loader_=t.loader,o.handleTileChange_=o.handleTileChange_.bind(o),o.bandCount=void 0===t.bandCount?4:t.bandCount,o}return Go(t,e),t.prototype.setLoader=function(e){this.loader_=e},t.prototype.getTile=function(e,t,o,n,r){var i=Object(Se.e)(e,t,o);if(this.tileCache.containsKey(i))return this.tileCache.get(i);var s=this.loader_;var a=new u(Object(ge.a)({tileCoord:[e,t,o],loader:function(){return s(e,t,o)}},this.tileOptions));return a.key=this.getKey(),a.addEventListener(m.a.CHANGE,this.handleTileChange_),this.tileCache.set(i,a),a},t.prototype.handleTileChange_=function(e){var t,o=e.target,n=Object(Te.c)(o),r=o.getState();r==l.a.LOADING?(this.tileLoadingKeys_[n]=!0,t=Lo.a.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],t=r==l.a.ERROR?Lo.a.TILELOADERROR:r==l.a.LOADED?Lo.a.TILELOADEND:void 0),t&&this.dispatchEvent(new ko.a(t,o))},t}(ko.b);let Do;function Fo(){return Do||(Do=function(){try{throw new Error}catch(e){const t=(""+e.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\/\/[^)\n]+/g);if(t)return(""+t[0]).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\/\/.+)?\/[^/]+(?:\?.*)?$/,"$1")+"/"}return"/"}()),Do}const Uo="undefined"!=typeof navigator&&navigator.hardwareConcurrency?navigator.hardwareConcurrency:4,Bo=e=>/^[a-zA-Z][a-zA-Z\d+\-.]*:/.test(e);function zo(e){const t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}let Vo;function Wo(){return Vo||(Vo=function(){if("undefined"==typeof Worker)return class{constructor(){throw Error("No web worker implementation available. You might have tried to spawn a worker within a worker in a browser that doesn't support workers in workers.")}};class e extends Worker{constructor(e,t){var o,n;"string"==typeof e&&t&&t._baseURL?e=new URL(e,t._baseURL):"string"==typeof e&&!Bo(e)&&Fo().match(/^file:\/\//i)&&(e=new URL(e,Fo().replace(/\/[^\/]+$/,"/")),(null===(o=null==t?void 0:t.CORSWorkaround)||void 0===o||o)&&(e=zo(`importScripts(${JSON.stringify(e)});`))),"string"==typeof e&&Bo(e)&&(null===(n=null==t?void 0:t.CORSWorkaround)||void 0===n||n)&&(e=zo(`importScripts(${JSON.stringify(e)});`)),super(e,t)}}class t extends e{constructor(e,t){super(window.URL.createObjectURL(e),t)}static fromText(e,o){const n=new window.Blob([e],{type:"text/javascript"});return new t(n,o)}}return{blob:t,default:e}}()),Vo}Wo().blob;const qo=Wo().default;var Ho,Yo=o("./node_modules/debug/src/browser.js"),Xo=o.n(Yo),Zo=o("./node_modules/observable-fns/dist.esm/subject.js"),Ko=o("./node_modules/observable-fns/dist.esm/multicast.js"),Jo=o("./node_modules/observable-fns/dist.esm/observable.js");function Qo(e){return Promise.all(e.map(e=>{const t=e=>({status:"fulfilled",value:e}),o=e=>({status:"rejected",reason:e}),n=Promise.resolve(e);try{return n.then(t,o)}catch(e){return Promise.reject(e)}}))}!function(e){e.initialized="initialized",e.taskCanceled="taskCanceled",e.taskCompleted="taskCompleted",e.taskFailed="taskFailed",e.taskQueued="taskQueued",e.taskQueueDrained="taskQueueDrained",e.taskStart="taskStart",e.terminated="terminated"}(Ho||(Ho={}));var $o=o("./node_modules/threads/dist-esm/symbols.js");function en(e){throw Error(e)}const tn={errors:e=>e[$o.a]||en("Error observable not found. Make sure to pass a thread instance as returned by the spawn() promise."),events:e=>e[$o.b]||en("Events observable not found. Make sure to pass a thread instance as returned by the spawn() promise."),terminate:e=>e[$o.c]()};var on=function(e,t,o,n){return new(o||(o=Promise))((function(r,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};let nn=1;class rn{constructor(e,t){this.eventSubject=new Zo.a,this.initErrors=[],this.isClosing=!1,this.nextTaskID=1,this.taskQueue=[];const o="number"==typeof t?{size:t}:t||{},{size:n=Uo}=o;this.debug=Xo()("threads:pool:"+(o.name||String(nn++)).replace(/\W/g," ").trim().replace(/\s+/g,"-")),this.options=o,this.workers=function(e,t){return function(e){const t=[];for(let o=0;o<e;o++)t.push(o);return t}(t).map(()=>({init:e(),runningTasks:[]}))}(e,n),this.eventObservable=Object(Ko.a)(Jo.a.from(this.eventSubject)),Promise.all(this.workers.map(e=>e.init)).then(()=>this.eventSubject.next({type:Ho.initialized,size:this.workers.length}),e=>{this.debug("Error while initializing pool worker:",e),this.eventSubject.error(e),this.initErrors.push(e)})}findIdlingWorker(){const{concurrency:e=1}=this.options;return this.workers.find(t=>t.runningTasks.length<e)}runPoolTask(e,t){return on(this,void 0,void 0,(function*(){const o=this.workers.indexOf(e)+1;this.debug(`Running task #${t.id} on worker #${o}...`),this.eventSubject.next({type:Ho.taskStart,taskID:t.id,workerID:o});try{const n=yield t.run(yield e.init);this.debug(`Task #${t.id} completed successfully`),this.eventSubject.next({type:Ho.taskCompleted,returnValue:n,taskID:t.id,workerID:o})}catch(e){this.debug(`Task #${t.id} failed`),this.eventSubject.next({type:Ho.taskFailed,taskID:t.id,error:e,workerID:o})}}))}run(e,t){return on(this,void 0,void 0,(function*(){const o=(()=>on(this,void 0,void 0,(function*(){var n;yield(n=0,new Promise(e=>setTimeout(e,n)));try{yield this.runPoolTask(e,t)}finally{e.runningTasks=e.runningTasks.filter(e=>e!==o),this.isClosing||this.scheduleWork()}})))();e.runningTasks.push(o)}))}scheduleWork(){this.debug("Attempt de-queueing a task in order to run it...");const e=this.findIdlingWorker();if(!e)return;const t=this.taskQueue.shift();if(!t)return this.debug("Task queue is empty"),void this.eventSubject.next({type:Ho.taskQueueDrained});this.run(e,t)}taskCompletion(e){return new Promise((t,o)=>{const n=this.events().subscribe(r=>{r.type===Ho.taskCompleted&&r.taskID===e?(n.unsubscribe(),t(r.returnValue)):r.type===Ho.taskFailed&&r.taskID===e?(n.unsubscribe(),o(r.error)):r.type===Ho.terminated&&(n.unsubscribe(),o(Error("Pool has been terminated before task was run.")))})})}settled(e=!1){return on(this,void 0,void 0,(function*(){const t=()=>{return e=this.workers,t=e=>e.runningTasks,e.reduce((e,o)=>[...e,...t(o)],[]);var e,t},o=[],n=this.eventObservable.subscribe(e=>{e.type===Ho.taskFailed&&o.push(e.error)});return this.initErrors.length>0?Promise.reject(this.initErrors[0]):e&&0===this.taskQueue.length?(yield Qo(t()),o):(yield new Promise((e,t)=>{const o=this.eventObservable.subscribe({next(t){t.type===Ho.taskQueueDrained&&(o.unsubscribe(),e(void 0))},error:t})}),yield Qo(t()),n.unsubscribe(),o)}))}completed(e=!1){return on(this,void 0,void 0,(function*(){const t=this.settled(e),o=new Promise((e,o)=>{const n=this.eventObservable.subscribe({next(r){r.type===Ho.taskQueueDrained?(n.unsubscribe(),e(t)):r.type===Ho.taskFailed&&(n.unsubscribe(),o(r.error))},error:o})}),n=yield Promise.race([t,o]);if(n.length>0)throw n[0]}))}events(){return this.eventObservable}queue(e){const{maxQueuedJobs:t=1/0}=this.options;if(this.isClosing)throw Error("Cannot schedule pool tasks after terminate() has been called.");if(this.initErrors.length>0)throw this.initErrors[0];const o=this.nextTaskID++,n=this.taskCompletion(o);n.catch(e=>{this.debug(`Task #${o} errored:`,e)});const r={id:o,run:e,cancel:()=>{-1!==this.taskQueue.indexOf(r)&&(this.taskQueue=this.taskQueue.filter(e=>e!==r),this.eventSubject.next({type:Ho.taskCanceled,taskID:r.id}))},then:n.then.bind(n)};if(this.taskQueue.length>=t)throw Error("Maximum number of pool tasks queued. Refusing to queue another one.\nThis usually happens for one of two reasons: We are either at peak workload right now or some tasks just won't finish, thus blocking the pool.");return this.debug(`Queueing task #${r.id}...`),this.taskQueue.push(r),this.eventSubject.next({type:Ho.taskQueued,taskID:r.id}),this.scheduleWork(),r}terminate(e){return on(this,void 0,void 0,(function*(){this.isClosing=!0,e||(yield this.completed(!0)),this.eventSubject.next({type:Ho.terminated,remainingQueue:[...this.taskQueue]}),this.eventSubject.complete(),yield Promise.all(this.workers.map(e=>on(this,void 0,void 0,(function*(){return tn.terminate(yield e.init)}))))}))}}function sn(e,t){return new rn(e,t)}rn.EventType=Ho,sn.EventType=Ho;const an=sn;var ln=o("./node_modules/threads/dist-esm/master/spawn.js"),cn=o("./node_modules/threads/dist-esm/transferable.js");const un="undefined"!=typeof navigator?navigator.hardwareConcurrency:null;var dn=class{constructor(e=un,t=new qo("./decoder.worker.js")){this.pool=an(()=>Object(ln.a)(t),e)}async decode(e,t){return new Promise((o,n)=>{this.pool.queue(async r=>{try{const n=await r(e,Object(cn.a)(t));o(n)}catch(e){n(e)}})})}destroy(){this.pool.terminate(!0)}};function hn(e){return(t,...o)=>fn(e,t,o)}function pn(e,t){return hn(vn(e,t).get)}const{apply:fn,construct:mn,defineProperty:gn,get:yn,getOwnPropertyDescriptor:vn,getPrototypeOf:_n,has:bn,ownKeys:wn,set:En,setPrototypeOf:On}=Reflect,Sn=(Proxy,Number),{isFinite:xn,isNaN:Cn}=Sn,{iterator:jn,species:Pn,toStringTag:Tn,for:An}=Symbol,Mn=Object,{create:In,defineProperty:Rn,freeze:Ln,is:kn}=Mn,Gn=Mn.prototype,Nn=(hn(Gn.isPrototypeOf),Mn.hasOwn||hn(Gn.hasOwnProperty),Array),Dn=(Nn.isArray,Nn.prototype),Fn=(hn(Dn.join),hn(Dn.push),hn(Dn.toLocaleString),Dn[jn]),Un=hn(Fn),Bn=(Math.trunc,ArrayBuffer),zn=(Bn.isView,hn(Bn.prototype.slice),pn(Bn.prototype,"byteLength"),"undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:null),Vn=(zn&&pn(zn.prototype,"byteLength"),_n(Uint8Array)),Wn=(Vn.from,Vn.prototype),qn=(Wn[jn],hn(Wn.keys),hn(Wn.values),hn(Wn.entries),hn(Wn.set),hn(Wn.reverse),hn(Wn.fill),hn(Wn.copyWithin),hn(Wn.sort),hn(Wn.slice),hn(Wn.subarray),pn(Wn,"buffer"),pn(Wn,"byteOffset"),pn(Wn,"length"),pn(Wn,Tn),Uint16Array,Uint32Array),Hn=Float32Array,Yn=_n([][jn]()),Xn=hn(Yn.next),Zn=hn(function*(){}().next),Kn=_n(Yn),Jn=DataView.prototype,Qn=hn(Jn.getUint16),$n=(hn(Jn.setUint16),TypeError,RangeError,Set.prototype),er=(hn($n.add),hn($n.has),WeakMap),tr=er.prototype,or=hn(tr.get),nr=(hn(tr.has),hn(tr.set)),rr=new er,ir=In(null,{next:{value:function(){const e=or(rr,this);return Xn(e)}},[jn]:{value:function(){return this}}});function sr(e){if(e[jn]===Fn)return e;const t=In(ir);return nr(rr,t,Un(e)),t}const ar=new er,lr=In(Kn,{next:{value:function(){const e=or(ar,this);return Zn(e)},writable:!0,configurable:!0}});for(const e of wn(Yn))"next"!==e&&Rn(lr,e,vn(Yn,e));const cr=new Bn(4),ur=new Hn(cr),dr=new qn(cr),hr=new qn(512),pr=new qn(512);for(let e=0;e<256;++e){const t=e-127;t<-27?(hr[e]=0,hr[256|e]=32768,pr[e]=24,pr[256|e]=24):t<-14?(hr[e]=1024>>-t-14,hr[256|e]=1024>>-t-14|32768,pr[e]=-t-1,pr[256|e]=-t-1):t<=15?(hr[e]=t+15<<10,hr[256|e]=t+15<<10|32768,pr[e]=13,pr[256|e]=13):t<128?(hr[e]=31744,hr[256|e]=64512,pr[e]=24,pr[256|e]=24):(hr[e]=31744,hr[256|e]=64512,pr[e]=13,pr[256|e]=13)}const fr=new qn(2048),mr=new qn(64),gr=new qn(64);fr[0]=0;for(let e=1;e<1024;++e){let t=e<<13,o=0;for(;0==(8388608&t);)o-=8388608,t<<=1;t&=-8388609,o+=947912704,fr[e]=t|o}for(let e=1024;e<2048;++e)fr[e]=939524096+(e-1024<<13);mr[0]=0;for(let e=1;e<31;++e)mr[e]=e<<23;mr[31]=1199570944,mr[32]=2147483648;for(let e=33;e<63;++e)mr[e]=2147483648+(e-32<<23);mr[63]=3347054592,gr[0]=0;for(let e=1;e<64;++e)gr[e]=32===e?0:1024;function yr(e,t,...o){return function(e){const t=e>>10;return dr[0]=fr[gr[t]+(1023&e)]+mr[t],ur[0]}(Qn(e,t,...sr(o)))}var vr=o("./node_modules/xml-utils/get-attribute.js"),_r=o.n(vr),br=o("./node_modules/xml-utils/find-tags-by-name.js"),wr=o.n(br),Er=o("./node_modules/geotiff/src/globals.js");const Or=new Map;function Sr(e,t){Array.isArray(e)||(e=[e]),e.forEach(e=>Or.set(e,t))}function xr(e,t,o,n=1){return new(Object.getPrototypeOf(e).constructor)(t*o*n)}function Cr(e,t,o){return(1-o)*e+o*t}function jr(e,t,o,n,r,i="nearest"){switch(i.toLowerCase()){case"nearest":return function(e,t,o,n,r){const i=t/n,s=o/r;return e.map(e=>{const a=xr(e,n,r);for(let l=0;l<r;++l){const r=Math.min(Math.round(s*l),o-1);for(let o=0;o<n;++o){const s=Math.min(Math.round(i*o),t-1),c=e[r*t+s];a[l*n+o]=c}}return a})}(e,t,o,n,r);case"bilinear":case"linear":return function(e,t,o,n,r){const i=t/n,s=o/r;return e.map(e=>{const a=xr(e,n,r);for(let l=0;l<r;++l){const r=s*l,c=Math.floor(r),u=Math.min(Math.ceil(r),o-1);for(let o=0;o<n;++o){const s=i*o,d=s%1,h=Math.floor(s),p=Math.min(Math.ceil(s),t-1),f=e[c*t+h],m=e[c*t+p],g=e[u*t+h],y=e[u*t+p],v=Cr(Cr(f,m,d),Cr(g,y,d),r%1);a[l*n+o]=v}}return a})}(e,t,o,n,r);default:throw new Error(`Unsupported resampling method: '${i}'`)}}function Pr(e,t,o,n,r,i,s="nearest"){switch(s.toLowerCase()){case"nearest":return function(e,t,o,n,r,i){const s=t/n,a=o/r,l=xr(e,n,r,i);for(let c=0;c<r;++c){const r=Math.min(Math.round(a*c),o-1);for(let o=0;o<n;++o){const a=Math.min(Math.round(s*o),t-1);for(let s=0;s<i;++s){const u=e[r*t*i+a*i+s];l[c*n*i+o*i+s]=u}}}return l}(e,t,o,n,r,i);case"bilinear":case"linear":return function(e,t,o,n,r,i){const s=t/n,a=o/r,l=xr(e,n,r,i);for(let c=0;c<r;++c){const r=a*c,u=Math.floor(r),d=Math.min(Math.ceil(r),o-1);for(let o=0;o<n;++o){const a=s*o,h=a%1,p=Math.floor(a),f=Math.min(Math.ceil(a),t-1);for(let s=0;s<i;++s){const a=e[u*t*i+p*i+s],m=e[u*t*i+f*i+s],g=e[d*t*i+p*i+s],y=e[d*t*i+f*i+s],v=Cr(Cr(a,m,h),Cr(g,y,h),r%1);l[c*n*i+o*i+s]=v}}}return l}(e,t,o,n,r,i);default:throw new Error(`Unsupported resampling method: '${s}'`)}}function Tr(e,t,o){let n=0;for(let r=t;r<o;++r)n+=e[r];return n}function Ar(e,t,o){switch(e){case 1:if(t<=8)return new Uint8Array(o);if(t<=16)return new Uint16Array(o);if(t<=32)return new Uint32Array(o);break;case 2:if(8===t)return new Int8Array(o);if(16===t)return new Int16Array(o);if(32===t)return new Int32Array(o);break;case 3:switch(t){case 16:case 32:return new Float32Array(o);case 64:return new Float64Array(o)}}throw Error("Unsupported data format/bitsPerSample")}Sr([void 0,1],()=>o.e(0).then(o.bind(null,"./node_modules/geotiff/src/compression/raw.js")).then(e=>e.default)),Sr(5,()=>o.e(0).then(o.bind(null,"./node_modules/geotiff/src/compression/lzw.js")).then(e=>e.default)),Sr(6,()=>{throw new Error("old style JPEG compression is not supported.")}),Sr(7,()=>o.e(0).then(o.bind(null,"./node_modules/geotiff/src/compression/jpeg.js")).then(e=>e.default)),Sr([8,32946],()=>o.e(0).then(o.bind(null,"./node_modules/geotiff/src/compression/deflate.js")).then(e=>e.default)),Sr(32773,()=>o.e(0).then(o.bind(null,"./node_modules/geotiff/src/compression/packbits.js")).then(e=>e.default)),Sr(34887,()=>o.e(0).then(o.bind(null,"./node_modules/geotiff/src/compression/lerc.js")).then(e=>e.default));var Mr=class{constructor(e,t,o,n,r,i){this.fileDirectory=e,this.geoKeys=t,this.dataView=o,this.littleEndian=n,this.tiles=r?{}:null,this.isTiled=!e.StripOffsets;const s=e.PlanarConfiguration;if(this.planarConfiguration=void 0===s?1:s,1!==this.planarConfiguration&&2!==this.planarConfiguration)throw new Error("Invalid planar configuration.");this.source=i}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return void 0!==this.fileDirectory.SamplesPerPixel?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:void 0!==this.fileDirectory.RowsPerStrip?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(e){return this.isTiled||(e+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-e*this.getTileHeight()}getBytesPerPixel(){let e=0;for(let t=0;t<this.fileDirectory.BitsPerSample.length;++t)e+=this.getSampleByteSize(t);return e}getSampleByteSize(e){if(e>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${e} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[e]/8)}getReaderForSample(e){const t=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1,o=this.fileDirectory.BitsPerSample[e];switch(t){case 1:if(o<=8)return DataView.prototype.getUint8;if(o<=16)return DataView.prototype.getUint16;if(o<=32)return DataView.prototype.getUint32;break;case 2:if(o<=8)return DataView.prototype.getInt8;if(o<=16)return DataView.prototype.getInt16;if(o<=32)return DataView.prototype.getInt32;break;case 3:switch(o){case 16:return function(e,t){return yr(this,e,t)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(e=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1}getBitsPerSample(e=0){return this.fileDirectory.BitsPerSample[e]}getArrayForSample(e,t){return Ar(this.getSampleFormat(e),this.getBitsPerSample(e),t)}async getTileOrStrip(e,t,o,n,r){const i=Math.ceil(this.getWidth()/this.getTileWidth()),s=Math.ceil(this.getHeight()/this.getTileHeight());let a;const{tiles:l}=this;let c,u;1===this.planarConfiguration?a=t*i+e:2===this.planarConfiguration&&(a=o*i*s+t*i+e),this.isTiled?(c=this.fileDirectory.TileOffsets[a],u=this.fileDirectory.TileByteCounts[a]):(c=this.fileDirectory.StripOffsets[a],u=this.fileDirectory.StripByteCounts[a]);const d=(await this.source.fetch([{offset:c,length:u}],r))[0];let h;return null!==l&&l[a]?h=l[a]:(h=(async()=>{let e=await n.decode(this.fileDirectory,d);const o=this.getSampleFormat(),r=this.getBitsPerSample();return function(e,t){return(1!==e&&2!==e||!(t<=32)||t%8!=0)&&(3!==e||16!==t&&32!==t&&64!==t)}(o,r)&&(e=function(e,t,o,n,r,i,s){const a=new DataView(e),l=2===o?1:n,c=Ar(t,r,2===o?s*i:s*i*n),u=parseInt("1".repeat(r),2);if(1===t){let e;e=1===o?n*r:r;let t=i*e;0!=(7&t)&&(t=t+7&-8);for(let e=0;e<s;++e){const o=e*t;for(let t=0;t<i;++t){const n=o+t*l*r;for(let o=0;o<l;++o){const s=n+o*r,d=(e*i+t)*l+o,h=Math.floor(s/8),p=s%8;if(p+r<=8)c[d]=a.getUint8(h)>>8-r-p&u;else if(p+r<=16)c[d]=a.getUint16(h)>>16-r-p&u;else if(p+r<=24){const e=a.getUint16(h)<<8|a.getUint8(h+2);c[d]=e>>24-r-p&u}else c[d]=a.getUint32(h)>>32-r-p&u}}}}return c.buffer}(e,o,this.planarConfiguration,this.getSamplesPerPixel(),r,this.getTileWidth(),this.getBlockHeight(t))),e})(),null!==l&&(l[a]=h)),{x:e,y:t,sample:o,data:await h}}async _readRaster(e,t,o,n,r,i,s,a,l){const c=this.getTileWidth(),u=this.getTileHeight(),d=this.getWidth(),h=this.getHeight(),p=Math.max(Math.floor(e[0]/c),0),f=Math.min(Math.ceil(e[2]/c),Math.ceil(d/c)),m=Math.max(Math.floor(e[1]/u),0),g=Math.min(Math.ceil(e[3]/u),Math.ceil(h/u)),y=e[2]-e[0];let v=this.getBytesPerPixel();const _=[],b=[];for(let e=0;e<t.length;++e)1===this.planarConfiguration?_.push(Tr(this.fileDirectory.BitsPerSample,0,t[e])/8):_.push(0),b.push(this.getReaderForSample(t[e]));const w=[],{littleEndian:E}=this;for(let i=m;i<g;++i)for(let s=p;s<f;++s)for(let a=0;a<t.length;++a){const p=a,f=t[a];2===this.planarConfiguration&&(v=this.getSampleByteSize(a));const m=this.getTileOrStrip(s,i,f,r,l);w.push(m),m.then(r=>{const i=r.data,s=new DataView(i),a=this.getBlockHeight(r.y),l=r.y*u,f=r.x*c,m=l+a,g=(r.x+1)*c,w=b[p],O=Math.min(a,a-(m-e[3]),h-l),S=Math.min(c,c-(g-e[2]),d-f);for(let r=Math.max(0,e[1]-l);r<O;++r)for(let i=Math.max(0,e[0]-f);i<S;++i){const a=(r*c+i)*v,u=w.call(s,a+_[p],E);let d;n?(d=(r+l-e[1])*y*t.length+(i+f-e[0])*t.length+p,o[d]=u):(d=(r+l-e[1])*y+i+f-e[0],o[p][d]=u)}})}if(await Promise.all(w),i&&e[2]-e[0]!==i||s&&e[3]-e[1]!==s){let r;return r=n?Pr(o,e[2]-e[0],e[3]-e[1],i,s,t.length,a):jr(o,e[2]-e[0],e[3]-e[1],i,s,a),r.width=i,r.height=s,r}return o.width=i||e[2]-e[0],o.height=s||e[3]-e[1],o}async readRasters({window:e,samples:t=[],interleave:o,pool:n=null,width:r,height:i,resampleMethod:s,fillValue:a,signal:l}={}){const c=e||[0,0,this.getWidth(),this.getHeight()];if(c[0]>c[2]||c[1]>c[3])throw new Error("Invalid subsets");const u=(c[2]-c[0])*(c[3]-c[1]),d=this.getSamplesPerPixel();if(t&&t.length){for(let e=0;e<t.length;++e)if(t[e]>=d)return Promise.reject(new RangeError(`Invalid sample index '${t[e]}'.`))}else for(let e=0;e<d;++e)t.push(e);let h;if(o){h=Ar(this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,Math.max.apply(null,this.fileDirectory.BitsPerSample),u*t.length),a&&h.fill(a)}else{h=[];for(let e=0;e<t.length;++e){const o=this.getArrayForSample(t[e],u);Array.isArray(a)&&e<a.length?o.fill(a[e]):a&&!Array.isArray(a)&&o.fill(a),h.push(o)}}const p=n||await async function(e){const t=Or.get(e.Compression);if(!t)throw new Error("Unknown compression method identifier: "+e.Compression);return new(await t())(e)}(this.fileDirectory);return await this._readRaster(c,t,h,o,p,r,i,s,l)}async readRGB({window:e,interleave:t=!0,pool:o=null,width:n,height:r,resampleMethod:i,enableAlpha:s=!1,signal:a}={}){const l=e||[0,0,this.getWidth(),this.getHeight()];if(l[0]>l[2]||l[1]>l[3])throw new Error("Invalid subsets");const c=this.fileDirectory.PhotometricInterpretation;if(c===Er.j.RGB){let l=[0,1,2];if(this.fileDirectory.ExtraSamples!==Er.a.Unspecified&&s){l=[];for(let e=0;e<this.fileDirectory.BitsPerSample.length;e+=1)l.push(e)}return this.readRasters({window:e,interleave:t,samples:l,pool:o,width:n,height:r,resampleMethod:i,signal:a})}let u;switch(c){case Er.j.WhiteIsZero:case Er.j.BlackIsZero:case Er.j.Palette:u=[0];break;case Er.j.CMYK:u=[0,1,2,3];break;case Er.j.YCbCr:case Er.j.CIELab:u=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const d={window:l,interleave:!0,samples:u,pool:o,width:n,height:r,resampleMethod:i,signal:a},{fileDirectory:h}=this,p=await this.readRasters(d),f=2**this.fileDirectory.BitsPerSample[0];let m;switch(c){case Er.j.WhiteIsZero:m=function(e,t){const{width:o,height:n}=e,r=new Uint8Array(o*n*3);let i;for(let o=0,n=0;o<e.length;++o,n+=3)i=256-e[o]/t*256,r[n]=i,r[n+1]=i,r[n+2]=i;return r}(p,f);break;case Er.j.BlackIsZero:m=function(e,t){const{width:o,height:n}=e,r=new Uint8Array(o*n*3);let i;for(let o=0,n=0;o<e.length;++o,n+=3)i=e[o]/t*256,r[n]=i,r[n+1]=i,r[n+2]=i;return r}(p,f);break;case Er.j.Palette:m=function(e,t){const{width:o,height:n}=e,r=new Uint8Array(o*n*3),i=t.length/3,s=t.length/3*2;for(let o=0,n=0;o<e.length;++o,n+=3){const a=e[o];r[n]=t[a]/65536*256,r[n+1]=t[a+i]/65536*256,r[n+2]=t[a+s]/65536*256}return r}(p,h.ColorMap);break;case Er.j.CMYK:m=function(e){const{width:t,height:o}=e,n=new Uint8Array(t*o*3);for(let t=0,o=0;t<e.length;t+=4,o+=3){const r=e[t],i=e[t+1],s=e[t+2],a=e[t+3];n[o]=(255-r)/256*255*((255-a)/256),n[o+1]=(255-i)/256*255*((255-a)/256),n[o+2]=(255-s)/256*255*((255-a)/256)}return n}(p);break;case Er.j.YCbCr:m=function(e){const{width:t,height:o}=e,n=new Uint8ClampedArray(t*o*3);for(let t=0,o=0;t<e.length;t+=3,o+=3){const r=e[t],i=e[t+1],s=e[t+2];n[o]=r+1.402*(s-128),n[o+1]=r-.34414*(i-128)-.71414*(s-128),n[o+2]=r+1.772*(i-128)}return n}(p);break;case Er.j.CIELab:m=function(e){const{width:t,height:o}=e,n=new Uint8Array(t*o*3);for(let t=0,o=0;t<e.length;t+=3,o+=3){let r,i,s,a=(e[t+0]+16)/116,l=(e[t+1]<<24>>24)/500+a,c=a-(e[t+2]<<24>>24)/200;l=.95047*(l*l*l>.008856?l*l*l:(l-16/116)/7.787),a=1*(a*a*a>.008856?a*a*a:(a-16/116)/7.787),c=1.08883*(c*c*c>.008856?c*c*c:(c-16/116)/7.787),r=3.2406*l+-1.5372*a+-.4986*c,i=-.9689*l+1.8758*a+.0415*c,s=.0557*l+-.204*a+1.057*c,r=r>.0031308?1.055*r**(1/2.4)-.055:12.92*r,i=i>.0031308?1.055*i**(1/2.4)-.055:12.92*i,s=s>.0031308?1.055*s**(1/2.4)-.055:12.92*s,n[o]=255*Math.max(0,Math.min(1,r)),n[o+1]=255*Math.max(0,Math.min(1,i)),n[o+2]=255*Math.max(0,Math.min(1,s))}return n}(p);break;default:throw new Error("Unsupported photometric interpretation.")}if(!t){const e=new Uint8Array(m.length/3),t=new Uint8Array(m.length/3),o=new Uint8Array(m.length/3);for(let n=0,r=0;n<m.length;n+=3,++r)e[r]=m[n],t[r]=m[n+1],o[r]=m[n+2];m=[e,t,o]}return m.width=p.width,m.height=p.height,m}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const e=[];for(let t=0;t<this.fileDirectory.ModelTiepoint.length;t+=6)e.push({i:this.fileDirectory.ModelTiepoint[t],j:this.fileDirectory.ModelTiepoint[t+1],k:this.fileDirectory.ModelTiepoint[t+2],x:this.fileDirectory.ModelTiepoint[t+3],y:this.fileDirectory.ModelTiepoint[t+4],z:this.fileDirectory.ModelTiepoint[t+5]});return e}getGDALMetadata(e=null){const t={};if(!this.fileDirectory.GDAL_METADATA)return null;const o=this.fileDirectory.GDAL_METADATA;let n=wr()(o,"Item");null!==e&&(n=n.filter(t=>Number(_r()(t,"sample"))===e));for(let e=0;e<n.length;++e){const o=n[e];t[_r()(o,"name")]=o.inner}return t}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const e=this.fileDirectory.GDAL_NODATA;return Number(e.substring(0,e.length-1))}getOrigin(){const e=this.fileDirectory.ModelTiepoint,t=this.fileDirectory.ModelTransformation;if(e&&6===e.length)return[e[3],e[4],e[5]];if(t)return[t[3],t[7],t[11]];throw new Error("The image does not have an affine transformation.")}getResolution(e=null){const t=this.fileDirectory.ModelPixelScale,o=this.fileDirectory.ModelTransformation;if(t)return[t[0],-t[1],t[2]];if(o)return[o[0],o[5],o[10]];if(e){const[t,o,n]=e.getResolution();return[t*e.getWidth()/this.getWidth(),o*e.getHeight()/this.getHeight(),n*e.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return 1===this.geoKeys.GTRasterTypeGeoKey}getBoundingBox(){const e=this.getOrigin(),t=this.getResolution(),o=e[0],n=e[1],r=o+t[0]*this.getWidth(),i=n+t[1]*this.getHeight();return[Math.min(o,r),Math.min(n,i),Math.max(o,r),Math.max(n,i)]}};class Ir{constructor(e){this._dataView=new DataView(e)}get buffer(){return this._dataView.buffer}getUint64(e,t){const o=this.getUint32(e,t),n=this.getUint32(e+4,t);let r;if(t){if(r=o+2**32*n,!Number.isSafeInteger(r))throw new Error(r+" exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues");return r}if(r=2**32*o+n,!Number.isSafeInteger(r))throw new Error(r+" exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues");return r}getInt64(e,t){let o=0;const n=(128&this._dataView.getUint8(e+(t?7:0)))>0;let r=!0;for(let i=0;i<8;i++){let s=this._dataView.getUint8(e+(t?i:7-i));n&&(r?0!==s&&(s=255&~(s-1),r=!1):s=255&~s),o+=s*256**i}return n&&(o=-o),o}getUint8(e,t){return this._dataView.getUint8(e,t)}getInt8(e,t){return this._dataView.getInt8(e,t)}getUint16(e,t){return this._dataView.getUint16(e,t)}getInt16(e,t){return this._dataView.getInt16(e,t)}getUint32(e,t){return this._dataView.getUint32(e,t)}getInt32(e,t){return this._dataView.getInt32(e,t)}getFloat16(e,t){return yr(this._dataView,e,t)}getFloat32(e,t){return this._dataView.getFloat32(e,t)}getFloat64(e,t){return this._dataView.getFloat64(e,t)}}class Rr{constructor(e,t,o,n){this._dataView=new DataView(e),this._sliceOffset=t,this._littleEndian=o,this._bigTiff=n}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(e,t){return this.sliceOffset<=e&&this.sliceTop>=e+t}readUint8(e){return this._dataView.getUint8(e-this._sliceOffset,this._littleEndian)}readInt8(e){return this._dataView.getInt8(e-this._sliceOffset,this._littleEndian)}readUint16(e){return this._dataView.getUint16(e-this._sliceOffset,this._littleEndian)}readInt16(e){return this._dataView.getInt16(e-this._sliceOffset,this._littleEndian)}readUint32(e){return this._dataView.getUint32(e-this._sliceOffset,this._littleEndian)}readInt32(e){return this._dataView.getInt32(e-this._sliceOffset,this._littleEndian)}readFloat32(e){return this._dataView.getFloat32(e-this._sliceOffset,this._littleEndian)}readFloat64(e){return this._dataView.getFloat64(e-this._sliceOffset,this._littleEndian)}readUint64(e){const t=this.readUint32(e),o=this.readUint32(e+4);let n;if(this._littleEndian){if(n=t+2**32*o,!Number.isSafeInteger(n))throw new Error(n+" exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues");return n}if(n=2**32*t+o,!Number.isSafeInteger(n))throw new Error(n+" exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues");return n}readInt64(e){let t=0;const o=(128&this._dataView.getUint8(e+(this._littleEndian?7:0)))>0;let n=!0;for(let r=0;r<8;r++){let i=this._dataView.getUint8(e+(this._littleEndian?r:7-r));o&&(n?0!==i&&(i=255&~(i-1),n=!1):i=255&~i),t+=i*256**r}return o&&(t=-t),t}readOffset(e){return this._bigTiff?this.readUint64(e):this.readUint32(e)}}function Lr(e){if(void 0!==Object.fromEntries)return Object.fromEntries(e);const t={};for(const[o,n]of e)t[o.toLowerCase()]=n;return t}function kr(e){return Lr(e.split("\r\n").map(e=>{const t=e.split(":").map(e=>e.trim());return t[0]=t[0].toLowerCase(),t}))}function Gr(e){let t,o,n;return e&&([,t,o,n]=e.match(/bytes (\d+)-(\d+)\/(\d+)/),t=parseInt(t,10),o=parseInt(o,10),n=parseInt(n,10)),{start:t,end:o,total:n}}var Nr=o("./node_modules/geotiff/src/source/basesource.js"),Dr=o("./node_modules/geotiff/node_modules/lru-cache/index.js"),Fr=o.n(Dr),Ur=o("./node_modules/geotiff/src/utils.js");class Br{constructor(e,t,o=null){this.offset=e,this.length=t,this.data=o}get top(){return this.offset+this.length}}class zr{constructor(e,t,o){this.offset=e,this.length=t,this.blockIds=o}}class Vr extends Nr.a{constructor(e,{blockSize:t=65536,cacheSize:o=100}={}){super(),this.source=e,this.blockSize=t,this.blockCache=new Fr.a({max:o}),this.blockRequests=new Map,this.blockIdsToFetch=new Set}get fileSize(){return this.source.fileSize}async fetch(e,t){const o=new Map,n=new Map,r=new Set;for(const{offset:t,length:i}of e){let e=t+i;const{fileSize:s}=this;null!==s&&(e=Math.min(e,s));for(let i=Math.floor(t/this.blockSize)*this.blockSize;i<e;i+=this.blockSize){const e=Math.floor(i/this.blockSize);this.blockCache.has(e)?o.set(e,this.blockCache.get(e)):this.blockRequests.has(e)?n.set(e,this.blockRequests.get(e)):(this.blockIdsToFetch.has(e)||this.blockIdsToFetch.add(e),r.add(e))}}await Object(Ur.h)(),this.fetchBlocks(t);for(const e of r){const t=this.blockRequests.get(e),r=this.blockCache.get(e);if(t)n.set(e,t);else{if(!r)throw new Error(`Block ${e} is not in the block requests`);o.set(e,r)}}let i=await Promise.allSettled(Array.from(n.values()));if(i.some(e=>"rejected"===e.status)){const e=new Set;for(const[o,r]of Object(Ur.i)(n.keys(),i)){const{rejected:n,reason:i}=r;n&&"AbortError"===i.name&&i.signal!==t&&(this.blockIdsToFetch.add(o),e.add(o))}if(this.blockIdsToFetch.length>0){this.fetchBlocks(t);for(const t of e){const e=this.blockRequests.get(t);if(!e)throw new Error(`Block ${t} is not in the block requests`);n.set(t,e)}i=await Promise.allSettled(Array.from(n.values()))}}if(i.some(e=>"rejected"===e.status)){if(t&&t.aborted)throw new Ur.a("Request was aborted");throw new Ur.b(i.filter(e=>"rejected"===e.status).map(e=>e.reason),"Request failed")}const s=i.map(e=>e.value),a=new Map(Object(Ur.i)(Array.from(n.keys()),s));for(const[e,t]of o)a.set(e,t);return this.readSliceData(e,a)}fetchBlocks(e){if(this.blockIdsToFetch.size>0){const t=this.groupBlocks(this.blockIdsToFetch),o=this.source.fetch(t,e);for(let n=0;n<t.length;++n){const r=t[n];for(const t of r.blockIds){const r=(async()=>{try{const e=(await o)[n],r=t*this.blockSize,i=r-e.offset,s=Math.min(i+this.blockSize,e.data.byteLength),a=e.data.slice(i,s),l=new Br(r,a.byteLength,a);return this.blockCache.set(t,l),l}catch(t){throw"AbortError"===t.name&&(t.signal=e),t}finally{this.blockRequests.delete(t)}})();this.blockRequests.set(t,r)}}this.blockIdsToFetch.clear()}}groupBlocks(e){const t=Array.from(e).sort((e,t)=>e-t);if(0===t.length)return[];let o=[],n=null;const r=[];for(const e of t)null===n||n+1===e?(o.push(e),n=e):(r.push(new zr(o[0]*this.blockSize,o.length*this.blockSize,o)),o=[e],n=e);return r.push(new zr(o[0]*this.blockSize,o.length*this.blockSize,o)),r}readSliceData(e,t){return e.map(e=>{const o=e.offset+e.length,n=Math.floor(e.offset/this.blockSize),r=Math.floor((e.offset+e.length)/this.blockSize),i=new ArrayBuffer(e.length),s=new Uint8Array(i);for(let i=n;i<=r;++i){const n=t.get(i),r=n.offset-e.offset,a=n.top-o;let l,c=0,u=0;r<0?c=-r:r>0&&(u=r),l=a<0?n.length-c:o-n.offset-c;const d=new Uint8Array(n.data,c,l);s.set(d,u)}return i})}}var Wr=o("./node_modules/geotiff/src/source/client/base.js");class qr extends Wr.b{constructor(e){super(),this.response=e}get status(){return this.response.status}getHeader(e){return this.response.headers.get(e)}async getData(){return this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer}}class Hr extends Wr.a{constructor(e,t){super(e),this.credentials=t}async request({headers:e,credentials:t,signal:o}={}){const n=await fetch(this.url,{headers:e,credentials:t,signal:o});return new qr(n)}}class Yr extends Wr.b{constructor(e,t){super(),this.xhr=e,this.data=t}get status(){return this.xhr.status}getHeader(e){return this.xhr.getResponseHeader(e)}async getData(){return this.data}}class Xr extends Wr.a{constructRequest(e,t){return new Promise((o,n)=>{const r=new XMLHttpRequest;r.open("GET",this.url),r.responseType="arraybuffer";for(const[t,o]of Object.entries(e))r.setRequestHeader(t,o);r.onload=()=>{const e=r.response;o(new Yr(r,e))},r.onerror=n,r.onabort=()=>n(new Ur.a("Request aborted")),r.send(),t&&(t.aborted&&r.abort(),t.addEventListener("abort",()=>r.abort()))})}async request({headers:e,signal:t}={}){return await this.constructRequest(e,t)}}var Zr=o("./node_modules/geotiff/src/source/client/http.js");class Kr extends Nr.a{constructor(e,t,o,n){super(),this.client=e,this.headers=t,this.maxRanges=o,this.allowFullFile=n,this._fileSize=null}async fetch(e,t){return this.maxRanges>=e.length?this.fetchSlices(e,t):(this.maxRanges>0&&e.length,Promise.all(e.map(e=>this.fetchSlice(e,t))))}async fetchSlices(e,t){const o=await this.client.request({headers:{...this.headers,Range:"bytes="+e.map(({offset:e,length:t})=>`${e}-${e+t}`).join(",")},signal:t});if(o.ok){if(206===o.status){const{type:n,params:r}=function(e){const[t,...o]=e.split(";").map(e=>e.trim());return{type:t,params:Lr(o.map(e=>e.split("=")))}}(o.getHeader("content-type"));if("multipart/byteranges"===n){const e=function(e,t){let o=null;const n=new TextDecoder("ascii"),r=[],i="--"+t,s=i+"--";for(let t=0;t<10;++t){n.decode(new Uint8Array(e,t,i.length))===i&&(o=t)}if(null===o)throw new Error("Could not find initial boundary");for(;o<e.byteLength;){const t=n.decode(new Uint8Array(e,o,Math.min(i.length+1024,e.byteLength-o)));if(0===t.length||t.startsWith(s))break;if(!t.startsWith(i))throw new Error("Part does not start with boundary");const a=t.substr(i.length+2);if(0===a.length)break;const l=a.indexOf("\r\n\r\n"),c=kr(a.substr(0,l)),{start:u,end:d,total:h}=Gr(c["content-range"]),p=o+i.length+l+"\r\n\r\n".length,f=parseInt(d,10)+1-parseInt(u,10);r.push({headers:c,data:e.slice(p,p+f),offset:u,length:f,fileSize:h}),o=p+f+4}return r}(await o.getData(),r.boundary);return this._fileSize=e[0].fileSize||null,e}const i=await o.getData(),{start:s,end:a,total:l}=Gr(o.getHeader("content-range"));this._fileSize=l||null;const c=[{data:i,offset:s,length:a-s}];if(e.length>1){const o=await Promise.all(e.slice(1).map(e=>this.fetchSlice(e,t)));return c.concat(o)}return c}{if(!this.allowFullFile)throw new Error("Server responded with full file");const e=await o.getData();return this._fileSize=e.byteLength,[{data:e,offset:0,length:e.byteLength}]}}throw new Error("Error fetching data.")}async fetchSlice(e,t){const{offset:o,length:n}=e,r=await this.client.request({headers:{...this.headers,Range:`bytes=${o}-${o+n}`},signal:t});if(r.ok){if(206===r.status){const e=await r.getData(),{total:t}=Gr(r.getHeader("content-range"));return this._fileSize=t||null,{data:e,offset:o,length:n}}{if(!this.allowFullFile)throw new Error("Server responded with full file");const e=await r.getData();return this._fileSize=e.byteLength,{data:e,offset:0,length:e.byteLength}}}throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}}function Jr(e,{blockSize:t,cacheSize:o}){return null===t?e:new Vr(e,t,o)}function Qr(e,{forceXHR:t=!1,...o}={}){return"function"!=typeof fetch||t?"undefined"!=typeof XMLHttpRequest?function(e,{headers:t={},maxRanges:o=0,allowFullFile:n=!1,...r}={}){const i=new Xr(e);return Jr(new Kr(i,t,o,n),r)}(e,o):function(e,{headers:t={},maxRanges:o=0,allowFullFile:n=!1,...r}={}){const i=new Zr.a(e);return Jr(new Kr(i,t,o,n),r)}(e,o):function(e,{headers:t={},credentials:o,maxRanges:n=0,allowFullFile:r=!1,...i}={}){const s=new Hr(e,o);return Jr(new Kr(s,t,n,r),i)}(e,o)}Nr.a;Nr.a;o("./node_modules/geotiff/src/source/file.js");const $r=Object(Ur.f)(Er.e),ei=Object(Ur.f)(Er.i),ti={};Object(Ur.c)(ti,$r),Object(Ur.c)(ti,ei);Object(Ur.f)(Er.g);const oi={nextZero:(e,t)=>{let o=t;for(;0!==e[o];)o++;return o},readUshort:(e,t)=>e[t]<<8|e[t+1],readShort:(e,t)=>{const o=oi.ui8;return o[0]=e[t+1],o[1]=e[t+0],oi.i16[0]},readInt:(e,t)=>{const o=oi.ui8;return o[0]=e[t+3],o[1]=e[t+2],o[2]=e[t+1],o[3]=e[t+0],oi.i32[0]},readUint:(e,t)=>{const o=oi.ui8;return o[0]=e[t+3],o[1]=e[t+2],o[2]=e[t+1],o[3]=e[t+0],oi.ui32[0]},readASCII:(e,t,o)=>o.map(o=>String.fromCharCode(e[t+o])).join(""),readFloat:(e,t)=>{const o=oi.ui8;return Object(Ur.g)(4,n=>{o[n]=e[t+3-n]}),oi.fl32[0]},readDouble:(e,t)=>{const o=oi.ui8;return Object(Ur.g)(8,n=>{o[n]=e[t+7-n]}),oi.fl64[0]},writeUshort:(e,t,o)=>{e[t]=o>>8&255,e[t+1]=255&o},writeUint:(e,t,o)=>{e[t]=o>>24&255,e[t+1]=o>>16&255,e[t+2]=o>>8&255,e[t+3]=o>>0&255},writeASCII:(e,t,o)=>{Object(Ur.g)(o.length,n=>{e[t+n]=o.charCodeAt(n)})},ui8:new Uint8Array(8)};oi.fl64=new Float64Array(oi.ui8.buffer),oi.writeDouble=(e,t,o)=>{oi.fl64[0]=o,Object(Ur.g)(8,o=>{e[t+o]=oi.ui8[7-o]})};function ni(e){switch(e){case Er.h.BYTE:case Er.h.ASCII:case Er.h.SBYTE:case Er.h.UNDEFINED:return 1;case Er.h.SHORT:case Er.h.SSHORT:return 2;case Er.h.LONG:case Er.h.SLONG:case Er.h.FLOAT:case Er.h.IFD:return 4;case Er.h.RATIONAL:case Er.h.SRATIONAL:case Er.h.DOUBLE:case Er.h.LONG8:case Er.h.SLONG8:case Er.h.IFD8:return 8;default:throw new RangeError("Invalid field type: "+e)}}function ri(e,t,o,n){let r=null,i=null;const s=ni(t);switch(t){case Er.h.BYTE:case Er.h.ASCII:case Er.h.UNDEFINED:r=new Uint8Array(o),i=e.readUint8;break;case Er.h.SBYTE:r=new Int8Array(o),i=e.readInt8;break;case Er.h.SHORT:r=new Uint16Array(o),i=e.readUint16;break;case Er.h.SSHORT:r=new Int16Array(o),i=e.readInt16;break;case Er.h.LONG:case Er.h.IFD:r=new Uint32Array(o),i=e.readUint32;break;case Er.h.SLONG:r=new Int32Array(o),i=e.readInt32;break;case Er.h.LONG8:case Er.h.IFD8:r=new Array(o),i=e.readUint64;break;case Er.h.SLONG8:r=new Array(o),i=e.readInt64;break;case Er.h.RATIONAL:r=new Uint32Array(2*o),i=e.readUint32;break;case Er.h.SRATIONAL:r=new Int32Array(2*o),i=e.readInt32;break;case Er.h.FLOAT:r=new Float32Array(o),i=e.readFloat32;break;case Er.h.DOUBLE:r=new Float64Array(o),i=e.readFloat64;break;default:throw new RangeError("Invalid field type: "+t)}if(t!==Er.h.RATIONAL&&t!==Er.h.SRATIONAL)for(let t=0;t<o;++t)r[t]=i.call(e,n+t*s);else for(let t=0;t<o;t+=2)r[t]=i.call(e,n+t*s),r[t+1]=i.call(e,n+(t*s+4));return t===Er.h.ASCII?new TextDecoder("utf-8").decode(r):r}class ii{constructor(e,t,o){this.fileDirectory=e,this.geoKeyDirectory=t,this.nextIFDByteOffset=o}}class si extends Error{constructor(e){super("No image at index "+e),this.index=e}}class ai{async readRasters(e={}){const{window:t,width:o,height:n}=e;let{resX:r,resY:i,bbox:s}=e;const a=await this.getImage();let l=a;const c=await this.getImageCount(),u=a.getBoundingBox();if(t&&s)throw new Error('Both "bbox" and "window" passed.');if(o||n){if(t){const[e,o]=a.getOrigin(),[n,r]=a.getResolution();s=[e+t[0]*n,o+t[1]*r,e+t[2]*n,o+t[3]*r]}const e=s||u;if(o){if(r)throw new Error("Both width and resX passed");r=(e[2]-e[0])/o}if(n){if(i)throw new Error("Both width and resY passed");i=(e[3]-e[1])/n}}if(r||i){const e=[];for(let t=0;t<c;++t){const o=await this.getImage(t),{SubfileType:n,NewSubfileType:r}=o.fileDirectory;(0===t||2===n||1&r)&&e.push(o)}e.sort((e,t)=>e.getWidth()-t.getWidth());for(let t=0;t<e.length;++t){const o=e[t],n=(u[2]-u[0])/o.getWidth(),s=(u[3]-u[1])/o.getHeight();if(l=o,r&&r>n||i&&i>s)break}}let d=t;if(s){const[e,t]=a.getOrigin(),[o,n]=l.getResolution(a);d=[Math.round((s[0]-e)/o),Math.round((s[1]-t)/n),Math.round((s[2]-e)/o),Math.round((s[3]-t)/n)],d=[Math.min(d[0],d[2]),Math.min(d[1],d[3]),Math.max(d[0],d[2]),Math.max(d[1],d[3])]}return l.readRasters({...e,window:d})}}class li extends ai{constructor(e,t,o,n,r={}){super(),this.source=e,this.littleEndian=t,this.bigTiff=o,this.firstIFDOffset=n,this.cache=r.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(e,t){const o=this.bigTiff?4048:1024;return new Rr((await this.source.fetch([{offset:e,length:void 0!==t?t:o}]))[0],e,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(e){const t=this.bigTiff?20:12,o=this.bigTiff?8:2;let n=await this.getSlice(e);const r=this.bigTiff?n.readUint64(e):n.readUint16(e),i=r*t+(this.bigTiff?16:6);n.covers(e,i)||(n=await this.getSlice(e,i));const s={};let a=e+(this.bigTiff?8:2);for(let e=0;e<r;a+=t,++e){const e=n.readUint16(a),t=n.readUint16(a+2),o=this.bigTiff?n.readUint64(a+4):n.readUint32(a+4);let r,i;const l=ni(t),c=a+(this.bigTiff?12:8);if(l*o<=(this.bigTiff?8:4))r=ri(n,t,o,c);else{const e=n.readOffset(c),i=ni(t)*o;if(n.covers(e,i))r=ri(n,t,o,e);else{r=ri(await this.getSlice(e,i),t,o,e)}}i=1===o&&-1===Er.d.indexOf(e)&&t!==Er.h.RATIONAL&&t!==Er.h.SRATIONAL?r[0]:r,s[Er.e[e]]=i}const l=function(e){const t=e.GeoKeyDirectory;if(!t)return null;const o={};for(let n=4;n<=4*t[3];n+=4){const r=Er.i[t[n]],i=t[n+1]?Er.e[t[n+1]]:null,s=t[n+2],a=t[n+3];let l=null;if(i){if(l=e[i],null==l)throw new Error(`Could not get value of geoKey '${r}'.`);"string"==typeof l?l=l.substring(a,a+s-1):l.subarray&&(l=l.subarray(a,a+s),1===s&&(l=l[0]))}else l=a;o[r]=l}return o}(s),c=n.readOffset(e+o+t*r);return new ii(s,l,c)}async requestIFD(e){if(this.ifdRequests[e])return this.ifdRequests[e];if(0===e)return this.ifdRequests[e]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[e];if(!this.ifdRequests[e-1])try{this.ifdRequests[e-1]=this.requestIFD(e-1)}catch(t){if(t instanceof si)throw new si(e);throw t}return this.ifdRequests[e]=(async()=>{const t=await this.ifdRequests[e-1];if(0===t.nextIFDByteOffset)throw new si(e);return this.parseFileDirectoryAt(t.nextIFDByteOffset)})(),this.ifdRequests[e]}async getImage(e=0){const t=await this.requestIFD(e);return new Mr(t.fileDirectory,t.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let e=0,t=!0;for(;t;)try{await this.requestIFD(e),++e}catch(e){if(!(e instanceof si))throw e;t=!1}return e}async getGhostValues(){const e=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;const t="GDAL_STRUCTURAL_METADATA_SIZE=",o=t.length+100;let n=await this.getSlice(e,o);if(t===ri(n,Er.h.ASCII,t.length,e)){const t=ri(n,Er.h.ASCII,o,e).split("\n")[0],r=Number(t.split("=")[1].split(" ")[0])+t.length;r>o&&(n=await this.getSlice(e,r));const i=ri(n,Er.h.ASCII,r,e);this.ghostValues={},i.split("\n").filter(e=>e.length>0).map(e=>e.split("=")).forEach(([e,t])=>{this.ghostValues[e]=t})}return this.ghostValues}static async fromSource(e,t,o){const n=(await e.fetch([{offset:0,length:1024}],o))[0],r=new Ir(n),i=r.getUint16(0,0);let s;if(18761===i)s=!0;else{if(19789!==i)throw new TypeError("Invalid byte order value.");s=!1}const a=r.getUint16(2,s);let l;if(42===a)l=!1;else{if(43!==a)throw new TypeError("Invalid magic number.");l=!0;if(8!==r.getUint16(4,s))throw new Error("Unsupported offset byte-size.")}const c=l?r.getUint64(8,s):r.getUint32(4,s);return new li(e,s,l,c,t)}close(){return"function"==typeof this.source.close&&this.source.close()}}class ci extends ai{constructor(e,t){super(),this.mainFile=e,this.overviewFiles=t,this.imageFiles=[e].concat(t),this.fileDirectoriesPerFile=null,this.fileDirectoriesPerFileParsing=null,this.imageCount=null}async parseFileDirectoriesPerFile(){const e=[this.mainFile.parseFileDirectoryAt(this.mainFile.firstIFDOffset)].concat(this.overviewFiles.map(e=>e.parseFileDirectoryAt(e.firstIFDOffset)));return this.fileDirectoriesPerFile=await Promise.all(e),this.fileDirectoriesPerFile}async getImage(e=0){await this.getImageCount(),await this.parseFileDirectoriesPerFile();let t=0,o=0;for(let n=0;n<this.imageFiles.length;n++){const r=this.imageFiles[n];for(let i=0;i<this.imageCounts[n];i++){if(e===t){const e=await r.requestIFD(o);return new Mr(e.fileDirectory,e.geoKeyDirectory,r.dataView,r.littleEndian,r.cache,r.source)}t++,o++}o=0}throw new RangeError("Invalid image index")}async getImageCount(){if(null!==this.imageCount)return this.imageCount;const e=[this.mainFile.getImageCount()].concat(this.overviewFiles.map(e=>e.getImageCount()));return this.imageCounts=await Promise.all(e),this.imageCount=this.imageCounts.reduce((e,t)=>e+t,0),this.imageCount}}var ui=new Blob(['function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function asyncGeneratorStep(e,t,r,n,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,a)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){asyncGeneratorStep(i,n,a,o,s,"next",e)}function s(e){asyncGeneratorStep(i,n,a,o,s,"throw",e)}o(void 0)}))}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return e}function _possibleConstructorReturn(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var runtime={exports:{}};!function(e){var t=function(e){var t,r=Object.prototype,n=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),o=new A(n||[]);return i._invoke=function(e,t,r){var n=u;return function(a,i){if(n===h)throw new Error("Generator is already running");if(n===p){if("throw"===a)throw i;return I()}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var s=x(o,r);if(s){if(s===m)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===u)throw n=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var l=c(e,t,r);if("normal"===l.type){if(n=r.done?p:d,l.arg===m)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n=p,r.method="throw",r.arg=l.arg)}}}(e,r,o),i}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var u="suspendedStart",d="suspendedYield",h="executing",p="completed",m={};function g(){}function y(){}function _(){}var b={};l(b,i,(function(){return this}));var v=Object.getPrototypeOf,w=v&&v(v(M([])));w&&w!==r&&n.call(w,i)&&(b=w);var k=_.prototype=g.prototype=Object.create(b);function T(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function r(a,i,o,s){var l=c(e[a],e,i);if("throw"!==l.type){var f=l.arg,u=f.value;return u&&"object"===_typeof(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(u).then((function(e){f.value=e,o(f)}),(function(e){return r("throw",e,o,s)}))}s(l.arg)}var a;this._invoke=function(e,n){function i(){return new t((function(t,a){r(e,n,t,a)}))}return a=a?a.then(i,i):i()}}function x(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method))return m;r.method="throw",r.arg=new TypeError("The iterator does not provide a \'throw\' method")}return m}var a=c(n,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function M(e){if(e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}return{next:I}}function I(){return{value:t,done:!0}}return y.prototype=_,l(k,"constructor",_),l(_,"constructor",y),y.displayName=l(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,l(e,s,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},T(E.prototype),l(E.prototype,o,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,a,i){void 0===i&&(i=Promise);var o=new E(f(t,r,n,a),i);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},T(k),l(k,s,"Generator"),l(k,i,(function(){return this})),l(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=M,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return s.type="throw",s.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),f=n.call(o,"finallyLoc");if(l&&f){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!f)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),D(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;D(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:M(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"===("undefined"==typeof globalThis?"undefined":_typeof(globalThis))?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}(runtime);var worker={},isObservable=function(e){return!!e&&("symbol"===_typeof(Symbol.observable)&&"function"==typeof e[Symbol.observable]?e===e[Symbol.observable]():"function"==typeof e["@@observable"]&&e===e["@@observable"]())},common$1={},serializers={};function extendSerializer(e,t){var r=e.deserialize.bind(e),n=e.serialize.bind(e);return{deserialize:function(e){return t.deserialize(e,r)},serialize:function(e){return t.serialize(e,n)}}}Object.defineProperty(serializers,"__esModule",{value:!0}),serializers.DefaultSerializer=serializers.extendSerializer=void 0,serializers.extendSerializer=extendSerializer;var DefaultErrorSerializer={deserialize:function(e){return Object.assign(Error(e.message),{name:e.name,stack:e.stack})},serialize:function(e){return{__error_marker:"$$error",message:e.message,name:e.name,stack:e.stack}}},isSerializedError=function(e){return e&&"object"===_typeof(e)&&"__error_marker"in e&&"$$error"===e.__error_marker};serializers.DefaultSerializer={deserialize:function(e){return isSerializedError(e)?DefaultErrorSerializer.deserialize(e):e},serialize:function(e){return e instanceof Error?DefaultErrorSerializer.serialize(e):e}},Object.defineProperty(common$1,"__esModule",{value:!0}),common$1.serialize=common$1.deserialize=common$1.registerSerializer=void 0;var serializers_1=serializers,registeredSerializer=serializers_1.DefaultSerializer;function registerSerializer(e){registeredSerializer=serializers_1.extendSerializer(registeredSerializer,e)}function deserialize(e){return registeredSerializer.deserialize(e)}function serialize(e){return registeredSerializer.serialize(e)}common$1.registerSerializer=registerSerializer,common$1.deserialize=deserialize,common$1.serialize=serialize;var transferable={},symbols={};Object.defineProperty(symbols,"__esModule",{value:!0}),symbols.$worker=symbols.$transferable=symbols.$terminate=symbols.$events=symbols.$errors=void 0,symbols.$errors=Symbol("thread.errors"),symbols.$events=Symbol("thread.events"),symbols.$terminate=Symbol("thread.terminate"),symbols.$transferable=Symbol("thread.transferable"),symbols.$worker=Symbol("thread.worker"),Object.defineProperty(transferable,"__esModule",{value:!0}),transferable.Transfer=transferable.isTransferDescriptor=void 0;var symbols_1=symbols;function isTransferable(e){return!(!e||"object"!==_typeof(e))}function isTransferDescriptor(e){return e&&"object"===_typeof(e)&&e[symbols_1.$transferable]}function Transfer$1(e,t){var r;if(!t){if(!isTransferable(e))throw Error();t=[e]}return _defineProperty(r={},symbols_1.$transferable,!0),_defineProperty(r,"send",e),_defineProperty(r,"transferables",t),r}transferable.isTransferDescriptor=isTransferDescriptor,transferable.Transfer=Transfer$1;var messages$1={},exports,MasterMessageType,WorkerMessageType;exports=messages$1,Object.defineProperty(exports,"__esModule",{value:!0}),exports.WorkerMessageType=exports.MasterMessageType=void 0,(MasterMessageType=exports.MasterMessageType||(exports.MasterMessageType={})).cancel="cancel",MasterMessageType.run="run",(WorkerMessageType=exports.WorkerMessageType||(exports.WorkerMessageType={})).error="error",WorkerMessageType.init="init",WorkerMessageType.result="result",WorkerMessageType.running="running",WorkerMessageType.uncaughtError="uncaughtError";var implementation$1={},implementation_browser={};Object.defineProperty(implementation_browser,"__esModule",{value:!0});var isWorkerRuntime$2=function(){var e="undefined"!=typeof self&&"undefined"!=typeof Window&&self instanceof Window;return!("undefined"==typeof self||!self.postMessage||e)},postMessageToMaster$2=function(e,t){self.postMessage(e,t)},subscribeToMasterMessages$2=function(e){var t=function(t){e(t.data)};return self.addEventListener("message",t),function(){self.removeEventListener("message",t)}};implementation_browser.default={isWorkerRuntime:isWorkerRuntime$2,postMessageToMaster:postMessageToMaster$2,subscribeToMasterMessages:subscribeToMasterMessages$2};var implementation_tinyWorker={};Object.defineProperty(implementation_tinyWorker,"__esModule",{value:!0}),"undefined"==typeof self&&(commonjsGlobal.self=commonjsGlobal);var isWorkerRuntime$1=function(){return!("undefined"==typeof self||!self.postMessage)},postMessageToMaster$1=function(e){self.postMessage(e)},muxingHandlerSetUp=!1,messageHandlers=new Set,subscribeToMasterMessages$1=function(e){muxingHandlerSetUp||(self.addEventListener("message",(function(e){messageHandlers.forEach((function(t){return t(e.data)}))})),muxingHandlerSetUp=!0),messageHandlers.add(e);return function(){return messageHandlers.delete(e)}};implementation_tinyWorker.default={isWorkerRuntime:isWorkerRuntime$1,postMessageToMaster:postMessageToMaster$1,subscribeToMasterMessages:subscribeToMasterMessages$1};var implementation_worker_threads={},worker_threads={},implementation;function selectImplementation(){return"function"==typeof __non_webpack_require__?__non_webpack_require__("worker_threads"):eval("require")("worker_threads")}function getImplementation(){return implementation||(implementation=selectImplementation()),implementation}Object.defineProperty(worker_threads,"__esModule",{value:!0}),worker_threads.default=getImplementation;var __importDefault$1=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(implementation_worker_threads,"__esModule",{value:!0});var worker_threads_1=__importDefault$1(worker_threads);function assertMessagePort(e){if(!e)throw Error("Invariant violation: MessagePort to parent is not available.");return e}var isWorkerRuntime=function(){return!worker_threads_1.default().isMainThread},postMessageToMaster=function(e,t){assertMessagePort(worker_threads_1.default().parentPort).postMessage(e,t)},subscribeToMasterMessages=function(e){var t=worker_threads_1.default().parentPort;if(!t)throw Error("Invariant violation: MessagePort to parent is not available.");var r=function(t){e(t)};return assertMessagePort(t).on("message",r),function(){assertMessagePort(t).off("message",r)}};function testImplementation(){worker_threads_1.default()}implementation_worker_threads.default={isWorkerRuntime:isWorkerRuntime,postMessageToMaster:postMessageToMaster,subscribeToMasterMessages:subscribeToMasterMessages,testImplementation:testImplementation};var __importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(implementation$1,"__esModule",{value:!0});var implementation_browser_1=__importDefault(implementation_browser),implementation_tiny_worker_1=__importDefault(implementation_tinyWorker),implementation_worker_threads_1=__importDefault(implementation_worker_threads),runningInNode="undefined"!=typeof process&&"browser"!==process.arch&&"pid"in process;function selectNodeImplementation(){try{return implementation_worker_threads_1.default.testImplementation(),implementation_worker_threads_1.default}catch(e){return implementation_tiny_worker_1.default}}implementation$1.default=runningInNode?selectNodeImplementation():implementation_browser_1.default,function(e){var t=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(a,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}l((n=n.apply(e,t||[])).next())}))},r=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.expose=e.isWorkerRuntime=e.Transfer=e.registerSerializer=void 0;var n=r(isObservable),a=common$1,i=transferable,o=messages$1,s=r(implementation$1),l=common$1;Object.defineProperty(e,"registerSerializer",{enumerable:!0,get:function(){return l.registerSerializer}});var f=transferable;Object.defineProperty(e,"Transfer",{enumerable:!0,get:function(){return f.Transfer}}),e.isWorkerRuntime=s.default.isWorkerRuntime;var c=!1,u=new Map,d=function(e){return e&&e.type===o.MasterMessageType.run},h=function(e){return n.default(e)||function(e){return e&&"object"===_typeof(e)&&"function"==typeof e.subscribe}(e)};function p(e){return i.isTransferDescriptor(e)?{payload:e.send,transferables:e.transferables}:{payload:e,transferables:void 0}}function m(e,t){var r=p(t),n=r.payload,i=r.transferables,l={type:o.WorkerMessageType.error,uid:e,error:a.serialize(n)};s.default.postMessageToMaster(l,i)}function g(e,t,r){var n=p(r),a=n.payload,i=n.transferables,l={type:o.WorkerMessageType.result,uid:e,complete:!!t||void 0,payload:a};s.default.postMessageToMaster(l,i)}function y(e,t){var r={type:o.WorkerMessageType.running,uid:e,resultType:t};s.default.postMessageToMaster(r)}function _(e){try{var t={type:o.WorkerMessageType.uncaughtError,error:a.serialize(e)};s.default.postMessageToMaster(t)}catch(t){console.error("Not reporting uncaught error back to master thread as it occured while reporting an uncaught error already.\\nLatest error:",t,"\\nOriginal error:",e)}}function b(e,r,n){return t(this,void 0,void 0,regeneratorRuntime.mark((function t(){var i,o,s,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,i=r.apply(void 0,_toConsumableArray(n)),t.next=7;break;case 4:return t.prev=4,t.t0=t.catch(0),t.abrupt("return",m(e,t.t0));case 7:if(o=h(i)?"observable":"promise",y(e,o),!h(i)){t.next=14;break}s=i.subscribe((function(t){return g(e,!1,a.serialize(t))}),(function(t){m(e,a.serialize(t)),u.delete(e)}),(function(){g(e,!0),u.delete(e)})),u.set(e,s),t.next=24;break;case 14:return t.prev=14,t.next=17,i;case 17:l=t.sent,g(e,!0,a.serialize(l)),t.next=24;break;case 21:t.prev=21,t.t1=t.catch(14),m(e,a.serialize(t.t1));case 24:case"end":return t.stop()}}),t,null,[[0,4],[14,21]])})))}e.expose=function(e){if(!s.default.isWorkerRuntime())throw Error("expose() called in the master thread.");if(c)throw Error("expose() called more than once. This is not possible. Pass an object to expose() if you want to expose multiple functions.");if(c=!0,"function"==typeof e)s.default.subscribeToMasterMessages((function(t){d(t)&&!t.method&&b(t.uid,e,t.args.map(a.deserialize))})),t={type:o.WorkerMessageType.init,exposed:{type:"function"}},s.default.postMessageToMaster(t);else{if("object"!==_typeof(e)||!e)throw Error("Invalid argument passed to expose(). Expected a function or an object, got: ".concat(e));s.default.subscribeToMasterMessages((function(t){d(t)&&t.method&&b(t.uid,e[t.method],t.args.map(a.deserialize))})),function(e){var t={type:o.WorkerMessageType.init,exposed:{type:"module",methods:e}};s.default.postMessageToMaster(t)}(Object.keys(e).filter((function(t){return"function"==typeof e[t]})))}var t;s.default.subscribeToMasterMessages((function(e){if((n=e)&&n.type===o.MasterMessageType.cancel){var t=e.uid,r=u.get(t);r&&(r.unsubscribe(),u.delete(t))}var n}))},"undefined"!=typeof self&&"function"==typeof self.addEventListener&&s.default.isWorkerRuntime()&&(self.addEventListener("error",(function(e){setTimeout((function(){return _(e.error||e)}),250)})),self.addEventListener("unhandledrejection",(function(e){var t=e.reason;t&&"string"==typeof t.message&&setTimeout((function(){return _(t)}),250)}))),"undefined"!=typeof process&&"function"==typeof process.on&&s.default.isWorkerRuntime()&&(process.on("uncaughtException",(function(e){setTimeout((function(){return _(e)}),250)})),process.on("unhandledRejection",(function(e){e&&"string"==typeof e.message&&setTimeout((function(){return _(e)}),250)})))}(worker);var WorkerContext=getDefaultExportFromCjs(worker),expose=WorkerContext.expose;WorkerContext.registerSerializer;var Transfer=WorkerContext.Transfer,registry=new Map;function addDecoder(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){return registry.set(e,t)}))}function getDecoder(e){return _getDecoder.apply(this,arguments)}function _getDecoder(){return(_getDecoder=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=registry.get(t.Compression)){e.next=3;break}throw new Error("Unknown compression method identifier: ".concat(t.Compression));case 3:return e.next=5,r();case 5:return n=e.sent,e.abrupt("return",new n(t));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function decode(e,t){return _decode.apply(this,arguments)}function _decode(){return(_decode=_asyncToGenerator(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,getDecoder(t);case 2:return n=e.sent,e.next=5,n.decode(t,r);case 5:return a=e.sent,e.abrupt("return",Transfer(a));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function decodeRowAcc(e,t){var r=e.length-t,n=0;do{for(var a=t;a>0;a--)e[n+t]+=e[n],n++;r-=t}while(r>0)}function decodeRowFloatingPoint(e,t,r){for(var n=0,a=e.length,i=a/r;a>t;){for(var o=t;o>0;--o)e[n+t]+=e[n],++n;a-=t}for(var s=e.slice(),l=0;l<i;++l)for(var f=0;f<r;++f)e[r*l+f]=s[(r-f-1)*i+l]}function applyPredictor(e,t,r,n,a,i){if(!t||1===t)return e;for(var o=0;o<a.length;++o){if(a[o]%8!=0)throw new Error("When decoding with predictor, only multiple of 8 bits are supported.");if(a[o]!==a[0])throw new Error("When decoding with predictor, all samples must have the same size.")}for(var s=a[0]/8,l=2===i?1:a.length,f=0;f<n&&!(f*l*r*s>=e.byteLength);++f){var c=void 0;if(2===t){switch(a[0]){case 8:c=new Uint8Array(e,f*l*r*s,l*r*s);break;case 16:c=new Uint16Array(e,f*l*r*s,l*r*s/2);break;case 32:c=new Uint32Array(e,f*l*r*s,l*r*s/4);break;default:throw new Error("Predictor 2 not allowed with ".concat(a[0]," bits per sample."))}decodeRowAcc(c,l)}else 3===t&&decodeRowFloatingPoint(c=new Uint8Array(e,f*l*r*s,l*r*s),l,s)}return e}addDecoder([void 0,1],(function(){return Promise.resolve().then((function(){return raw})).then((function(e){return e.default}))})),addDecoder(5,(function(){return Promise.resolve().then((function(){return lzw})).then((function(e){return e.default}))})),addDecoder(6,(function(){throw new Error("old style JPEG compression is not supported.")})),addDecoder(7,(function(){return Promise.resolve().then((function(){return jpeg})).then((function(e){return e.default}))})),addDecoder([8,32946],(function(){return Promise.resolve().then((function(){return deflate})).then((function(e){return e.default}))})),addDecoder(32773,(function(){return Promise.resolve().then((function(){return packbits})).then((function(e){return e.default}))})),addDecoder(34887,(function(){return Promise.resolve().then((function(){return lerc})).then((function(e){return e.default}))})),expose(decode);var BaseDecoder=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"decode",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark((function e(t,r){var n,a,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.decodeBlock(r);case 2:if(n=e.sent,1===(a=t.Predictor||1)){e.next=9;break}return i=!t.StripOffsets,o=i?t.TileWidth:t.ImageWidth,s=i?t.TileLength:t.RowsPerStrip||t.ImageLength,e.abrupt("return",applyPredictor(n,a,o,s,t.BitsPerSample,t.PlanarConfiguration));case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),RawDecoder=function(e){_inherits(r,BaseDecoder);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return _createClass(r,[{key:"decodeBlock",value:function(e){return e}}]),r}(),raw=Object.freeze({__proto__:null,default:RawDecoder}),MIN_BITS=9,CLEAR_CODE=256,EOI_CODE=257,MAX_BYTELENGTH=12;function getByte(e,t,r){var n=t%8,a=Math.floor(t/8),i=8-n,o=t+r-8*(a+1),s=8*(a+2)-(t+r),l=8*(a+2)-t;if(s=Math.max(0,s),a>=e.length)return console.warn("ran off the end of the buffer before finding EOI_CODE (end on input code)"),EOI_CODE;var f=e[a]&Math.pow(2,8-n)-1,c=f<<=r-i;if(a+1<e.length){var u=e[a+1]>>>s;c+=u<<=Math.max(0,r-l)}if(o>8&&a+2<e.length){var d=8*(a+3)-(t+r);c+=e[a+2]>>>d}return c}function appendReversed(e,t){for(var r=t.length-1;r>=0;r--)e.push(t[r]);return e}function decompress(e){for(var t=new Uint16Array(4093),r=new Uint8Array(4093),n=0;n<=257;n++)t[n]=4096,r[n]=n;var a=258,i=MIN_BITS,o=0;function s(){a=258,i=MIN_BITS}function l(e){var t=getByte(e,o,i);return o+=i,t}function f(e,n){return r[a]=n,t[a]=e,++a-1}function c(e){for(var n=[],a=e;4096!==a;a=t[a])n.push(r[a]);return n}var u=[];s();for(var d,h=new Uint8Array(e),p=l(h);p!==EOI_CODE;){if(p===CLEAR_CODE){for(s(),p=l(h);p===CLEAR_CODE;)p=l(h);if(p===EOI_CODE)break;if(p>CLEAR_CODE)throw new Error("corrupted code at scanline ".concat(p));appendReversed(u,c(p)),d=p}else if(p<a){var m=c(p);appendReversed(u,m),f(d,m[m.length-1]),d=p}else{var g=c(d);if(!g)throw new Error("Bogus entry. Not in dictionary, ".concat(d," / ").concat(a,", position: ").concat(o));appendReversed(u,g),u.push(g[g.length-1]),f(d,g[g.length-1]),d=p}a+1>=Math.pow(2,i)&&(i===MAX_BYTELENGTH?d=void 0:i++),p=l(h)}return new Uint8Array(u)}var LZWDecoder=function(e){_inherits(r,BaseDecoder);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return _createClass(r,[{key:"decodeBlock",value:function(e){return decompress(e).buffer}}]),r}(),lzw=Object.freeze({__proto__:null,default:LZWDecoder}),dctZigZag=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),dctCos1=4017,dctSin1=799,dctCos3=3406,dctSin3=2276,dctCos6=1567,dctSin6=3784,dctSqrt2=5793,dctSqrt1d2=2896;function buildHuffmanTable(e,t){for(var r=0,n=[],a=16;a>0&&!e[a-1];)--a;n.push({children:[],index:0});for(var i,o=n[0],s=0;s<a;s++){for(var l=0;l<e[s];l++){for((o=n.pop()).children[o.index]=t[r];o.index>0;)o=n.pop();for(o.index++,n.push(o);n.length<=s;)n.push(i={children:[],index:0}),o.children[o.index]=i.children,o=i;r++}s+1<a&&(n.push(i={children:[],index:0}),o.children[o.index]=i.children,o=i)}return n[0].children}function decodeScan(e,t,r,n,a,i,o,s,l){var f=r.mcusPerLine,c=r.progressive,u=t,d=t,h=0,p=0;function m(){if(p>0)return p--,h>>p&1;if(255===(h=e[d++])){var t=e[d++];if(t)throw new Error("unexpected marker: ".concat((h<<8|t).toString(16)))}return p=7,h>>>7}function g(e){for(var t,r=e;null!==(t=m());){if("number"==typeof(r=r[t]))return r;if("object"!==_typeof(r))throw new Error("invalid huffman sequence")}return null}function y(e){for(var t=e,r=0;t>0;){var n=m();if(null===n)return;r=r<<1|n,--t}return r}function _(e){var t=y(e);return t>=1<<e-1?t:t+(-1<<e)+1}var b=0;var v,w=0;function k(e,t,r,n,a){var i=r%f,o=(r/f|0)*e.v+n,s=i*e.h+a;t(e,e.blocks[o][s])}function T(e,t,r){var n=r/e.blocksPerLine|0,a=r%e.blocksPerLine;t(e,e.blocks[n][a])}var E,x,S,D,A,M,I=n.length;M=c?0===i?0===s?function(e,t){var r=g(e.huffmanTableDC),n=0===r?0:_(r)<<l;e.pred+=n,t[0]=e.pred}:function(e,t){t[0]|=m()<<l}:0===s?function(e,t){if(b>0)b--;else for(var r=i,n=o;r<=n;){var a=g(e.huffmanTableAC),s=15&a,f=a>>4;if(0===s){if(f<15){b=y(f)+(1<<f)-1;break}r+=16}else t[dctZigZag[r+=f]]=_(s)*(1<<l),r++}}:function(e,t){for(var r=i,n=o,a=0;r<=n;){var s=dctZigZag[r],f=t[s]<0?-1:1;switch(w){case 0:var c=g(e.huffmanTableAC),u=15&c;if(a=c>>4,0===u)a<15?(b=y(a)+(1<<a),w=4):(a=16,w=1);else{if(1!==u)throw new Error("invalid ACn encoding");v=_(u),w=a?2:3}continue;case 1:case 2:t[s]?t[s]+=(m()<<l)*f:0==--a&&(w=2===w?3:0);break;case 3:t[s]?t[s]+=(m()<<l)*f:(t[s]=v<<l,w=0);break;case 4:t[s]&&(t[s]+=(m()<<l)*f)}r++}4===w&&0==--b&&(w=0)}:function(e,t){var r=g(e.huffmanTableDC),n=0===r?0:_(r);e.pred+=n,t[0]=e.pred;for(var a=1;a<64;){var i=g(e.huffmanTableAC),o=15&i,s=i>>4;if(0===o){if(s<15)break;a+=16}else t[dctZigZag[a+=s]]=_(o),a++}};var R,O,C=0;O=1===I?n[0].blocksPerLine*n[0].blocksPerColumn:f*r.mcusPerColumn;for(var P=a||O;C<O;){for(x=0;x<I;x++)n[x].pred=0;if(b=0,1===I)for(E=n[0],A=0;A<P;A++)T(E,M,C),C++;else for(A=0;A<P;A++){for(x=0;x<I;x++){var L=E=n[x],U=L.h,B=L.v;for(S=0;S<B;S++)for(D=0;D<U;D++)k(E,M,C,S,D)}if(++C===O)break}if(p=0,(R=e[d]<<8|e[d+1])<65280)throw new Error("marker was not found");if(!(R>=65488&&R<=65495))break;d+=2}return d-u}function buildComponentData(e,t){var r=[],n=t.blocksPerLine,a=t.blocksPerColumn,i=n<<3,o=new Int32Array(64),s=new Uint8Array(64);function l(e,r,n){var a,i,o,s,l,f,c,u,d,h,p=t.quantizationTable,m=n;for(h=0;h<64;h++)m[h]=e[h]*p[h];for(h=0;h<8;++h){var g=8*h;0!==m[1+g]||0!==m[2+g]||0!==m[3+g]||0!==m[4+g]||0!==m[5+g]||0!==m[6+g]||0!==m[7+g]?(a=dctSqrt2*m[0+g]+128>>8,i=dctSqrt2*m[4+g]+128>>8,o=m[2+g],s=m[6+g],l=dctSqrt1d2*(m[1+g]-m[7+g])+128>>8,u=dctSqrt1d2*(m[1+g]+m[7+g])+128>>8,f=m[3+g]<<4,c=m[5+g]<<4,d=a-i+1>>1,a=a+i+1>>1,i=d,d=o*dctSin6+s*dctCos6+128>>8,o=o*dctCos6-s*dctSin6+128>>8,s=d,d=l-c+1>>1,l=l+c+1>>1,c=d,d=u+f+1>>1,f=u-f+1>>1,u=d,d=a-s+1>>1,a=a+s+1>>1,s=d,d=i-o+1>>1,i=i+o+1>>1,o=d,d=l*dctSin3+u*dctCos3+2048>>12,l=l*dctCos3-u*dctSin3+2048>>12,u=d,d=f*dctSin1+c*dctCos1+2048>>12,f=f*dctCos1-c*dctSin1+2048>>12,c=d,m[0+g]=a+u,m[7+g]=a-u,m[1+g]=i+c,m[6+g]=i-c,m[2+g]=o+f,m[5+g]=o-f,m[3+g]=s+l,m[4+g]=s-l):(d=dctSqrt2*m[0+g]+512>>10,m[0+g]=d,m[1+g]=d,m[2+g]=d,m[3+g]=d,m[4+g]=d,m[5+g]=d,m[6+g]=d,m[7+g]=d)}for(h=0;h<8;++h){var y=h;0!==m[8+y]||0!==m[16+y]||0!==m[24+y]||0!==m[32+y]||0!==m[40+y]||0!==m[48+y]||0!==m[56+y]?(a=dctSqrt2*m[0+y]+2048>>12,i=dctSqrt2*m[32+y]+2048>>12,o=m[16+y],s=m[48+y],l=dctSqrt1d2*(m[8+y]-m[56+y])+2048>>12,u=dctSqrt1d2*(m[8+y]+m[56+y])+2048>>12,f=m[24+y],c=m[40+y],d=a-i+1>>1,a=a+i+1>>1,i=d,d=o*dctSin6+s*dctCos6+2048>>12,o=o*dctCos6-s*dctSin6+2048>>12,s=d,d=l-c+1>>1,l=l+c+1>>1,c=d,d=u+f+1>>1,f=u-f+1>>1,u=d,d=a-s+1>>1,a=a+s+1>>1,s=d,d=i-o+1>>1,i=i+o+1>>1,o=d,d=l*dctSin3+u*dctCos3+2048>>12,l=l*dctCos3-u*dctSin3+2048>>12,u=d,d=f*dctSin1+c*dctCos1+2048>>12,f=f*dctCos1-c*dctSin1+2048>>12,c=d,m[0+y]=a+u,m[56+y]=a-u,m[8+y]=i+c,m[48+y]=i-c,m[16+y]=o+f,m[40+y]=o-f,m[24+y]=s+l,m[32+y]=s-l):(d=dctSqrt2*n[h+0]+8192>>14,m[0+y]=d,m[8+y]=d,m[16+y]=d,m[24+y]=d,m[32+y]=d,m[40+y]=d,m[48+y]=d,m[56+y]=d)}for(h=0;h<64;++h){var _=128+(m[h]+8>>4);r[h]=_<0?0:_>255?255:_}}for(var f=0;f<a;f++){for(var c=f<<3,u=0;u<8;u++)r.push(new Uint8Array(i));for(var d=0;d<n;d++){l(t.blocks[f][d],s,o);for(var h=0,p=d<<3,m=0;m<8;m++)for(var g=r[c+m],y=0;y<8;y++)g[p+y]=s[h++]}}return r}var JpegStreamReader=function(){function e(){_classCallCheck(this,e),this.jfif=null,this.adobe=null,this.quantizationTables=[],this.huffmanTablesAC=[],this.huffmanTablesDC=[],this.resetFrames()}return _createClass(e,[{key:"resetFrames",value:function(){this.frames=[]}},{key:"parse",value:function(e){var t=0;function r(){var r=e[t]<<8|e[t+1];return t+=2,r}function n(e){var t,r,n=0,a=0;for(r in e.components)e.components.hasOwnProperty(r)&&(n<(t=e.components[r]).h&&(n=t.h),a<t.v&&(a=t.v));var i=Math.ceil(e.samplesPerLine/8/n),o=Math.ceil(e.scanLines/8/a);for(r in e.components)if(e.components.hasOwnProperty(r)){t=e.components[r];for(var s=Math.ceil(Math.ceil(e.samplesPerLine/8)*t.h/n),l=Math.ceil(Math.ceil(e.scanLines/8)*t.v/a),f=i*t.h,c=o*t.v,u=[],d=0;d<c;d++){for(var h=[],p=0;p<f;p++)h.push(new Int32Array(64));u.push(h)}t.blocksPerLine=s,t.blocksPerColumn=l,t.blocks=u}e.maxH=n,e.maxV=a,e.mcusPerLine=i,e.mcusPerColumn=o}var a,i,o=r();if(65496!==o)throw new Error("SOI not found");for(o=r();65497!==o;){switch(o){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var s=(a=void 0,i=void 0,a=r(),i=e.subarray(t,t+a-2),t+=i.length,i);65504===o&&74===s[0]&&70===s[1]&&73===s[2]&&70===s[3]&&0===s[4]&&(this.jfif={version:{major:s[5],minor:s[6]},densityUnits:s[7],xDensity:s[8]<<8|s[9],yDensity:s[10]<<8|s[11],thumbWidth:s[12],thumbHeight:s[13],thumbData:s.subarray(14,14+3*s[12]*s[13])}),65518===o&&65===s[0]&&100===s[1]&&111===s[2]&&98===s[3]&&101===s[4]&&0===s[5]&&(this.adobe={version:s[6],flags0:s[7]<<8|s[8],flags1:s[9]<<8|s[10],transformCode:s[11]});break;case 65499:for(var l=r()+t-2;t<l;){var f=e[t++],c=new Int32Array(64);if(f>>4==0)for(var u=0;u<64;u++){c[dctZigZag[u]]=e[t++]}else{if(f>>4!=1)throw new Error("DQT: invalid table spec");for(var d=0;d<64;d++){c[dctZigZag[d]]=r()}}this.quantizationTables[15&f]=c}break;case 65472:case 65473:case 65474:r();for(var h={extended:65473===o,progressive:65474===o,precision:e[t++],scanLines:r(),samplesPerLine:r(),components:{},componentsOrder:[]},p=e[t++],m=void 0,g=0;g<p;g++){m=e[t];var y=e[t+1]>>4,_=15&e[t+1],b=e[t+2];h.componentsOrder.push(m),h.components[m]={h:y,v:_,quantizationIdx:b},t+=3}n(h),this.frames.push(h);break;case 65476:for(var v=r(),w=2;w<v;){for(var k=e[t++],T=new Uint8Array(16),E=0,x=0;x<16;x++,t++)T[x]=e[t],E+=T[x];for(var S=new Uint8Array(E),D=0;D<E;D++,t++)S[D]=e[t];w+=17+E,k>>4==0?this.huffmanTablesDC[15&k]=buildHuffmanTable(T,S):this.huffmanTablesAC[15&k]=buildHuffmanTable(T,S)}break;case 65501:r(),this.resetInterval=r();break;case 65498:r();for(var A=e[t++],M=[],I=this.frames[0],R=0;R<A;R++){var O=I.components[e[t++]],C=e[t++];O.huffmanTableDC=this.huffmanTablesDC[C>>4],O.huffmanTableAC=this.huffmanTablesAC[15&C],M.push(O)}var P=e[t++],L=e[t++],U=e[t++],B=decodeScan(e,t,I,M,this.resetInterval,P,L,U>>4,15&U);t+=B;break;case 65535:255!==e[t]&&t--;break;default:if(255===e[t-3]&&e[t-2]>=192&&e[t-2]<=254){t-=3;break}throw new Error("unknown JPEG marker ".concat(o.toString(16)))}o=r()}}},{key:"getResult",value:function(){var e=this.frames;if(0===this.frames.length)throw new Error("no frames were decoded");this.frames.length>1&&console.warn("more than one frame is not supported");for(var t=0;t<this.frames.length;t++)for(var r=this.frames[t].components,n=0,a=Object.keys(r);n<a.length;n++){var i=a[n];r[i].quantizationTable=this.quantizationTables[r[i].quantizationIdx],delete r[i].quantizationIdx}for(var o=e[0],s=o.components,l=o.componentsOrder,f=[],c=o.samplesPerLine,u=o.scanLines,d=0;d<l.length;d++){var h=s[l[d]];f.push({lines:buildComponentData(o,h),scaleX:h.h/o.maxH,scaleY:h.v/o.maxV})}for(var p=new Uint8Array(c*u*f.length),m=0,g=0;g<u;++g)for(var y=0;y<c;++y)for(var _=0;_<f.length;++_){var b=f[_];p[m]=b.lines[0|g*b.scaleY][0|y*b.scaleX],++m}return p}}]),e}(),JpegDecoder=function(e){_inherits(r,BaseDecoder);var t=_createSuper(r);function r(e){var n;return _classCallCheck(this,r),(n=t.call(this)).reader=new JpegStreamReader,e.JPEGTables&&n.reader.parse(e.JPEGTables),n}return _createClass(r,[{key:"decodeBlock",value:function(e){return this.reader.resetFrames(),this.reader.parse(new Uint8Array(e)),this.reader.getResult().buffer}}]),r}(),jpeg=Object.freeze({__proto__:null,default:JpegDecoder});function zero$1(e){for(var t=e.length;--t>=0;)e[t]=0}var MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,DIST_CODE_LEN=512,static_ltree=new Array(2*(L_CODES$1+2));zero$1(static_ltree);var static_dtree=new Array(2*D_CODES$1);zero$1(static_dtree);var _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);var _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);var base_length=new Array(LENGTH_CODES$1);zero$1(base_length);var base_dist=new Array(D_CODES$1);zero$1(base_dist);var adler32=function(e,t,r,n){for(var a=65535&e|0,i=e>>>16&65535|0,o=0;0!==r;){r-=o=r>2e3?2e3:r;do{i=i+(a=a+t[n++]|0)|0}while(--o);a%=65521,i%=65521}return a|i<<16|0},adler32_1=adler32,makeTable=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t},crcTable=new Uint32Array(makeTable()),crc32=function(e,t,r,n){var a=crcTable,i=n+r;e^=-1;for(var o=n;o<i;o++)e=e>>>8^a[255&(e^t[o])];return-1^e},crc32_1=crc32,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},constants$2={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},_has=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!==_typeof(r))throw new TypeError(r+"must be non-object");for(var n in r)_has(r,n)&&(e[n]=r[n])}}return e},flattenChunks=function(e){for(var t=0,r=0,n=e.length;r<n;r++)t+=e[r].length;for(var a=new Uint8Array(t),i=0,o=0,s=e.length;i<s;i++){var l=e[i];a.set(l,o),o+=l.length}return a},common={assign:assign,flattenChunks:flattenChunks},STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){STR_APPLY_UIA_OK=!1}for(var _utf8len=new Uint8Array(256),q=0;q<256;q++)_utf8len[q]=q>=252?6:q>=248?5:q>=240?4:q>=224?3:q>=192?2:1;_utf8len[254]=_utf8len[254]=1;var string2buf=function(e){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);var t,r,n,a,i,o=e.length,s=0;for(a=0;a<o;a++)55296==(64512&(r=e.charCodeAt(a)))&&a+1<o&&56320==(64512&(n=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),s+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(s),i=0,a=0;i<s;a++)55296==(64512&(r=e.charCodeAt(a)))&&a+1<o&&56320==(64512&(n=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),r<128?t[i++]=r:r<2048?(t[i++]=192|r>>>6,t[i++]=128|63&r):r<65536?(t[i++]=224|r>>>12,t[i++]=128|r>>>6&63,t[i++]=128|63&r):(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63,t[i++]=128|r>>>6&63,t[i++]=128|63&r);return t},buf2binstring=function(e,t){if(t<65534&&e.subarray&&STR_APPLY_UIA_OK)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));for(var r="",n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r},buf2string=function(e,t){var r,n,a=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));var i=new Array(2*a);for(n=0,r=0;r<a;){var o=e[r++];if(o<128)i[n++]=o;else{var s=_utf8len[o];if(s>4)i[n++]=65533,r+=s-1;else{for(o&=2===s?31:3===s?15:7;s>1&&r<a;)o=o<<6|63&e[r++],s--;s>1?i[n++]=65533:o<65536?i[n++]=o:(o-=65536,i[n++]=55296|o>>10&1023,i[n++]=56320|1023&o)}}}return buf2binstring(i,n)},utf8border=function(e,t){(t=t||e.length)>e.length&&(t=e.length);for(var r=t-1;r>=0&&128==(192&e[r]);)r--;return r<0||0===r?t:r+_utf8len[e[r]]>t?r:t},strings={string2buf:string2buf,buf2string:buf2string,utf8border:utf8border};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zstream=ZStream,BAD$1=30,TYPE$1=12,inffast=function(e,t){var r,n,a,i,o,s,l,f,c,u,d,h,p,m,g,y,_,b,v,w,k,T,E,x,S=e.state;r=e.next_in,E=e.input,n=r+(e.avail_in-5),a=e.next_out,x=e.output,i=a-(t-e.avail_out),o=a+(e.avail_out-257),s=S.dmax,l=S.wsize,f=S.whave,c=S.wnext,u=S.window,d=S.hold,h=S.bits,p=S.lencode,m=S.distcode,g=(1<<S.lenbits)-1,y=(1<<S.distbits)-1;e:do{h<15&&(d+=E[r++]<<h,h+=8,d+=E[r++]<<h,h+=8),_=p[d&g];t:for(;;){if(d>>>=b=_>>>24,h-=b,0===(b=_>>>16&255))x[a++]=65535&_;else{if(!(16&b)){if(0==(64&b)){_=p[(65535&_)+(d&(1<<b)-1)];continue t}if(32&b){S.mode=TYPE$1;break e}e.msg="invalid literal/length code",S.mode=BAD$1;break e}v=65535&_,(b&=15)&&(h<b&&(d+=E[r++]<<h,h+=8),v+=d&(1<<b)-1,d>>>=b,h-=b),h<15&&(d+=E[r++]<<h,h+=8,d+=E[r++]<<h,h+=8),_=m[d&y];r:for(;;){if(d>>>=b=_>>>24,h-=b,!(16&(b=_>>>16&255))){if(0==(64&b)){_=m[(65535&_)+(d&(1<<b)-1)];continue r}e.msg="invalid distance code",S.mode=BAD$1;break e}if(w=65535&_,h<(b&=15)&&(d+=E[r++]<<h,(h+=8)<b&&(d+=E[r++]<<h,h+=8)),(w+=d&(1<<b)-1)>s){e.msg="invalid distance too far back",S.mode=BAD$1;break e}if(d>>>=b,h-=b,w>(b=a-i)){if((b=w-b)>f&&S.sane){e.msg="invalid distance too far back",S.mode=BAD$1;break e}if(k=0,T=u,0===c){if(k+=l-b,b<v){v-=b;do{x[a++]=u[k++]}while(--b);k=a-w,T=x}}else if(c<b){if(k+=l+c-b,(b-=c)<v){v-=b;do{x[a++]=u[k++]}while(--b);if(k=0,c<v){v-=b=c;do{x[a++]=u[k++]}while(--b);k=a-w,T=x}}}else if(k+=c-b,b<v){v-=b;do{x[a++]=u[k++]}while(--b);k=a-w,T=x}for(;v>2;)x[a++]=T[k++],x[a++]=T[k++],x[a++]=T[k++],v-=3;v&&(x[a++]=T[k++],v>1&&(x[a++]=T[k++]))}else{k=a-w;do{x[a++]=x[k++],x[a++]=x[k++],x[a++]=x[k++],v-=3}while(v>2);v&&(x[a++]=x[k++],v>1&&(x[a++]=x[k++]))}break}}break}}while(r<n&&a<o);r-=v=h>>3,d&=(1<<(h-=v<<3))-1,e.next_in=r,e.next_out=a,e.avail_in=r<n?n-r+5:5-(r-n),e.avail_out=a<o?o-a+257:257-(a-o),S.hold=d,S.bits=h},MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lext=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dbase=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dext=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),inflate_table=function(e,t,r,n,a,i,o,s){var l,f,c,u,d,h,p,m,g,y=s.bits,_=0,b=0,v=0,w=0,k=0,T=0,E=0,x=0,S=0,D=0,A=null,M=0,I=new Uint16Array(MAXBITS+1),R=new Uint16Array(MAXBITS+1),O=null,C=0;for(_=0;_<=MAXBITS;_++)I[_]=0;for(b=0;b<n;b++)I[t[r+b]]++;for(k=y,w=MAXBITS;w>=1&&0===I[w];w--);if(k>w&&(k=w),0===w)return a[i++]=20971520,a[i++]=20971520,s.bits=1,0;for(v=1;v<w&&0===I[v];v++);for(k<v&&(k=v),x=1,_=1;_<=MAXBITS;_++)if(x<<=1,(x-=I[_])<0)return-1;if(x>0&&(e===CODES$1||1!==w))return-1;for(R[1]=0,_=1;_<MAXBITS;_++)R[_+1]=R[_]+I[_];for(b=0;b<n;b++)0!==t[r+b]&&(o[R[t[r+b]]++]=b);if(e===CODES$1?(A=O=o,h=19):e===LENS$1?(A=lbase,M-=257,O=lext,C-=257,h=256):(A=dbase,O=dext,h=-1),D=0,b=0,_=v,d=i,T=k,E=0,c=-1,u=(S=1<<k)-1,e===LENS$1&&S>ENOUGH_LENS$1||e===DISTS$1&&S>ENOUGH_DISTS$1)return 1;for(;;){p=_-E,o[b]<h?(m=0,g=o[b]):o[b]>h?(m=O[C+o[b]],g=A[M+o[b]]):(m=96,g=0),l=1<<_-E,v=f=1<<T;do{a[d+(D>>E)+(f-=l)]=p<<24|m<<16|g|0}while(0!==f);for(l=1<<_-1;D&l;)l>>=1;if(0!==l?(D&=l-1,D+=l):D=0,b++,0==--I[_]){if(_===w)break;_=t[r+o[b]]}if(_>k&&(D&u)!==c){for(0===E&&(E=k),d+=v,x=1<<(T=_-E);T+E<w&&!((x-=I[T+E])<=0);)T++,x<<=1;if(S+=1<<T,e===LENS$1&&S>ENOUGH_LENS$1||e===DISTS$1&&S>ENOUGH_DISTS$1)return 1;a[c=D&u]=k<<24|T<<16|d-i|0}}return 0!==D&&(a[d+D]=_-E<<24|64<<16|0),s.bits=k,0},inftrees=inflate_table,CODES=0,LENS=1,DISTS=2,Z_FINISH$1=constants$2.Z_FINISH,Z_BLOCK=constants$2.Z_BLOCK,Z_TREES=constants$2.Z_TREES,Z_OK$1=constants$2.Z_OK,Z_STREAM_END$1=constants$2.Z_STREAM_END,Z_NEED_DICT$1=constants$2.Z_NEED_DICT,Z_STREAM_ERROR$1=constants$2.Z_STREAM_ERROR,Z_DATA_ERROR$1=constants$2.Z_DATA_ERROR,Z_MEM_ERROR$1=constants$2.Z_MEM_ERROR,Z_BUF_ERROR=constants$2.Z_BUF_ERROR,Z_DEFLATED=constants$2.Z_DEFLATED,HEAD=1,FLAGS=2,TIME=3,OS=4,EXLEN=5,EXTRA=6,NAME=7,COMMENT=8,HCRC=9,DICTID=10,DICT=11,TYPE=12,TYPEDO=13,STORED=14,COPY_=15,COPY=16,TABLE=17,LENLENS=18,CODELENS=19,LEN_=20,LEN=21,LENEXT=22,DIST=23,DISTEXT=24,MATCH=25,LIT=26,CHECK=27,LENGTH=28,DONE=29,BAD=30,MEM=31,SYNC=32,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS,zswap32=function(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)};function InflateState(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var inflateResetKeep=function(e){if(!e||!e.state)return Z_STREAM_ERROR$1;var t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=HEAD,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(ENOUGH_LENS),t.distcode=t.distdyn=new Int32Array(ENOUGH_DISTS),t.sane=1,t.back=-1,Z_OK$1},inflateReset=function(e){if(!e||!e.state)return Z_STREAM_ERROR$1;var t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,inflateResetKeep(e)},inflateReset2=function(e,t){var r;if(!e||!e.state)return Z_STREAM_ERROR$1;var n=e.state;return t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Z_STREAM_ERROR$1:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,inflateReset(e))},inflateInit2=function(e,t){if(!e)return Z_STREAM_ERROR$1;var r=new InflateState;e.state=r,r.window=null;var n=inflateReset2(e,t);return n!==Z_OK$1&&(e.state=null),n},inflateInit=function(e){return inflateInit2(e,DEF_WBITS)},virgin=!0,lenfix,distfix,fixedtables=function(e){if(virgin){lenfix=new Int32Array(512),distfix=new Int32Array(32);for(var t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(inftrees(LENS,e.lens,0,288,lenfix,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;inftrees(DISTS,e.lens,0,32,distfix,0,e.work,{bits:5}),virgin=!1}e.lencode=lenfix,e.lenbits=9,e.distcode=distfix,e.distbits=5},updatewindow=function(e,t,r,n){var a,i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(t.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):((a=i.wsize-i.wnext)>n&&(a=n),i.window.set(t.subarray(r-n,r-n+a),i.wnext),(n-=a)?(i.window.set(t.subarray(r-n,r),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0},inflate$2=function(e,t){var r,n,a,i,o,s,l,f,c,u,d,h,p,m,g,y,_,b,v,w,k,T,E,x,S=0,D=new Uint8Array(4),A=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return Z_STREAM_ERROR$1;(r=e.state).mode===TYPE&&(r.mode=TYPEDO),o=e.next_out,a=e.output,l=e.avail_out,i=e.next_in,n=e.input,s=e.avail_in,f=r.hold,c=r.bits,u=s,d=l,T=Z_OK$1;e:for(;;)switch(r.mode){case HEAD:if(0===r.wrap){r.mode=TYPEDO;break}for(;c<16;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}if(2&r.wrap&&35615===f){r.check=0,D[0]=255&f,D[1]=f>>>8&255,r.check=crc32_1(r.check,D,2,0),f=0,c=0,r.mode=FLAGS;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&f)<<8)+(f>>8))%31){e.msg="incorrect header check",r.mode=BAD;break}if((15&f)!==Z_DEFLATED){e.msg="unknown compression method",r.mode=BAD;break}if(c-=4,k=8+(15&(f>>>=4)),0===r.wbits)r.wbits=k;else if(k>r.wbits){e.msg="invalid window size",r.mode=BAD;break}r.dmax=1<<r.wbits,e.adler=r.check=1,r.mode=512&f?DICTID:TYPE,f=0,c=0;break;case FLAGS:for(;c<16;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}if(r.flags=f,(255&r.flags)!==Z_DEFLATED){e.msg="unknown compression method",r.mode=BAD;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=BAD;break}r.head&&(r.head.text=f>>8&1),512&r.flags&&(D[0]=255&f,D[1]=f>>>8&255,r.check=crc32_1(r.check,D,2,0)),f=0,c=0,r.mode=TIME;case TIME:for(;c<32;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}r.head&&(r.head.time=f),512&r.flags&&(D[0]=255&f,D[1]=f>>>8&255,D[2]=f>>>16&255,D[3]=f>>>24&255,r.check=crc32_1(r.check,D,4,0)),f=0,c=0,r.mode=OS;case OS:for(;c<16;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}r.head&&(r.head.xflags=255&f,r.head.os=f>>8),512&r.flags&&(D[0]=255&f,D[1]=f>>>8&255,r.check=crc32_1(r.check,D,2,0)),f=0,c=0,r.mode=EXLEN;case EXLEN:if(1024&r.flags){for(;c<16;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}r.length=f,r.head&&(r.head.extra_len=f),512&r.flags&&(D[0]=255&f,D[1]=f>>>8&255,r.check=crc32_1(r.check,D,2,0)),f=0,c=0}else r.head&&(r.head.extra=null);r.mode=EXTRA;case EXTRA:if(1024&r.flags&&((h=r.length)>s&&(h=s),h&&(r.head&&(k=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(i,i+h),k)),512&r.flags&&(r.check=crc32_1(r.check,n,h,i)),s-=h,i+=h,r.length-=h),r.length))break e;r.length=0,r.mode=NAME;case NAME:if(2048&r.flags){if(0===s)break e;h=0;do{k=n[i+h++],r.head&&k&&r.length<65536&&(r.head.name+=String.fromCharCode(k))}while(k&&h<s);if(512&r.flags&&(r.check=crc32_1(r.check,n,h,i)),s-=h,i+=h,k)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=COMMENT;case COMMENT:if(4096&r.flags){if(0===s)break e;h=0;do{k=n[i+h++],r.head&&k&&r.length<65536&&(r.head.comment+=String.fromCharCode(k))}while(k&&h<s);if(512&r.flags&&(r.check=crc32_1(r.check,n,h,i)),s-=h,i+=h,k)break e}else r.head&&(r.head.comment=null);r.mode=HCRC;case HCRC:if(512&r.flags){for(;c<16;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}if(f!==(65535&r.check)){e.msg="header crc mismatch",r.mode=BAD;break}f=0,c=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=TYPE;break;case DICTID:for(;c<32;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}e.adler=r.check=zswap32(f),f=0,c=0,r.mode=DICT;case DICT:if(0===r.havedict)return e.next_out=o,e.avail_out=l,e.next_in=i,e.avail_in=s,r.hold=f,r.bits=c,Z_NEED_DICT$1;e.adler=r.check=1,r.mode=TYPE;case TYPE:if(t===Z_BLOCK||t===Z_TREES)break e;case TYPEDO:if(r.last){f>>>=7&c,c-=7&c,r.mode=CHECK;break}for(;c<3;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}switch(r.last=1&f,c-=1,3&(f>>>=1)){case 0:r.mode=STORED;break;case 1:if(fixedtables(r),r.mode=LEN_,t===Z_TREES){f>>>=2,c-=2;break e}break;case 2:r.mode=TABLE;break;case 3:e.msg="invalid block type",r.mode=BAD}f>>>=2,c-=2;break;case STORED:for(f>>>=7&c,c-=7&c;c<32;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}if((65535&f)!=(f>>>16^65535)){e.msg="invalid stored block lengths",r.mode=BAD;break}if(r.length=65535&f,f=0,c=0,r.mode=COPY_,t===Z_TREES)break e;case COPY_:r.mode=COPY;case COPY:if(h=r.length){if(h>s&&(h=s),h>l&&(h=l),0===h)break e;a.set(n.subarray(i,i+h),o),s-=h,i+=h,l-=h,o+=h,r.length-=h;break}r.mode=TYPE;break;case TABLE:for(;c<14;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}if(r.nlen=257+(31&f),f>>>=5,c-=5,r.ndist=1+(31&f),f>>>=5,c-=5,r.ncode=4+(15&f),f>>>=4,c-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=BAD;break}r.have=0,r.mode=LENLENS;case LENLENS:for(;r.have<r.ncode;){for(;c<3;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}r.lens[A[r.have++]]=7&f,f>>>=3,c-=3}for(;r.have<19;)r.lens[A[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,E={bits:r.lenbits},T=inftrees(CODES,r.lens,0,19,r.lencode,0,r.work,E),r.lenbits=E.bits,T){e.msg="invalid code lengths set",r.mode=BAD;break}r.have=0,r.mode=CODELENS;case CODELENS:for(;r.have<r.nlen+r.ndist;){for(;y=(S=r.lencode[f&(1<<r.lenbits)-1])>>>16&255,_=65535&S,!((g=S>>>24)<=c);){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}if(_<16)f>>>=g,c-=g,r.lens[r.have++]=_;else{if(16===_){for(x=g+2;c<x;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}if(f>>>=g,c-=g,0===r.have){e.msg="invalid bit length repeat",r.mode=BAD;break}k=r.lens[r.have-1],h=3+(3&f),f>>>=2,c-=2}else if(17===_){for(x=g+3;c<x;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}c-=g,k=0,h=3+(7&(f>>>=g)),f>>>=3,c-=3}else{for(x=g+7;c<x;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}c-=g,k=0,h=11+(127&(f>>>=g)),f>>>=7,c-=7}if(r.have+h>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=BAD;break}for(;h--;)r.lens[r.have++]=k}}if(r.mode===BAD)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=BAD;break}if(r.lenbits=9,E={bits:r.lenbits},T=inftrees(LENS,r.lens,0,r.nlen,r.lencode,0,r.work,E),r.lenbits=E.bits,T){e.msg="invalid literal/lengths set",r.mode=BAD;break}if(r.distbits=6,r.distcode=r.distdyn,E={bits:r.distbits},T=inftrees(DISTS,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,E),r.distbits=E.bits,T){e.msg="invalid distances set",r.mode=BAD;break}if(r.mode=LEN_,t===Z_TREES)break e;case LEN_:r.mode=LEN;case LEN:if(s>=6&&l>=258){e.next_out=o,e.avail_out=l,e.next_in=i,e.avail_in=s,r.hold=f,r.bits=c,inffast(e,d),o=e.next_out,a=e.output,l=e.avail_out,i=e.next_in,n=e.input,s=e.avail_in,f=r.hold,c=r.bits,r.mode===TYPE&&(r.back=-1);break}for(r.back=0;y=(S=r.lencode[f&(1<<r.lenbits)-1])>>>16&255,_=65535&S,!((g=S>>>24)<=c);){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}if(y&&0==(240&y)){for(b=g,v=y,w=_;y=(S=r.lencode[w+((f&(1<<b+v)-1)>>b)])>>>16&255,_=65535&S,!(b+(g=S>>>24)<=c);){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}f>>>=b,c-=b,r.back+=b}if(f>>>=g,c-=g,r.back+=g,r.length=_,0===y){r.mode=LIT;break}if(32&y){r.back=-1,r.mode=TYPE;break}if(64&y){e.msg="invalid literal/length code",r.mode=BAD;break}r.extra=15&y,r.mode=LENEXT;case LENEXT:if(r.extra){for(x=r.extra;c<x;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}r.length+=f&(1<<r.extra)-1,f>>>=r.extra,c-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=DIST;case DIST:for(;y=(S=r.distcode[f&(1<<r.distbits)-1])>>>16&255,_=65535&S,!((g=S>>>24)<=c);){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}if(0==(240&y)){for(b=g,v=y,w=_;y=(S=r.distcode[w+((f&(1<<b+v)-1)>>b)])>>>16&255,_=65535&S,!(b+(g=S>>>24)<=c);){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}f>>>=b,c-=b,r.back+=b}if(f>>>=g,c-=g,r.back+=g,64&y){e.msg="invalid distance code",r.mode=BAD;break}r.offset=_,r.extra=15&y,r.mode=DISTEXT;case DISTEXT:if(r.extra){for(x=r.extra;c<x;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}r.offset+=f&(1<<r.extra)-1,f>>>=r.extra,c-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=BAD;break}r.mode=MATCH;case MATCH:if(0===l)break e;if(h=d-l,r.offset>h){if((h=r.offset-h)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=BAD;break}h>r.wnext?(h-=r.wnext,p=r.wsize-h):p=r.wnext-h,h>r.length&&(h=r.length),m=r.window}else m=a,p=o-r.offset,h=r.length;h>l&&(h=l),l-=h,r.length-=h;do{a[o++]=m[p++]}while(--h);0===r.length&&(r.mode=LEN);break;case LIT:if(0===l)break e;a[o++]=r.length,l--,r.mode=LEN;break;case CHECK:if(r.wrap){for(;c<32;){if(0===s)break e;s--,f|=n[i++]<<c,c+=8}if(d-=l,e.total_out+=d,r.total+=d,d&&(e.adler=r.check=r.flags?crc32_1(r.check,a,d,o-d):adler32_1(r.check,a,d,o-d)),d=l,(r.flags?f:zswap32(f))!==r.check){e.msg="incorrect data check",r.mode=BAD;break}f=0,c=0}r.mode=LENGTH;case LENGTH:if(r.wrap&&r.flags){for(;c<32;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}if(f!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=BAD;break}f=0,c=0}r.mode=DONE;case DONE:T=Z_STREAM_END$1;break e;case BAD:T=Z_DATA_ERROR$1;break e;case MEM:return Z_MEM_ERROR$1;case SYNC:default:return Z_STREAM_ERROR$1}return e.next_out=o,e.avail_out=l,e.next_in=i,e.avail_in=s,r.hold=f,r.bits=c,(r.wsize||d!==e.avail_out&&r.mode<BAD&&(r.mode<CHECK||t!==Z_FINISH$1))&&updatewindow(e,e.output,e.next_out,d-e.avail_out),u-=e.avail_in,d-=e.avail_out,e.total_in+=u,e.total_out+=d,r.total+=d,r.wrap&&d&&(e.adler=r.check=r.flags?crc32_1(r.check,a,d,e.next_out-d):adler32_1(r.check,a,d,e.next_out-d)),e.data_type=r.bits+(r.last?64:0)+(r.mode===TYPE?128:0)+(r.mode===LEN_||r.mode===COPY_?256:0),(0===u&&0===d||t===Z_FINISH$1)&&T===Z_OK$1&&(T=Z_BUF_ERROR),T},inflateEnd=function(e){if(!e||!e.state)return Z_STREAM_ERROR$1;var t=e.state;return t.window&&(t.window=null),e.state=null,Z_OK$1},inflateGetHeader=function(e,t){if(!e||!e.state)return Z_STREAM_ERROR$1;var r=e.state;return 0==(2&r.wrap)?Z_STREAM_ERROR$1:(r.head=t,t.done=!1,Z_OK$1)},inflateSetDictionary=function(e,t){var r,n=t.length;return e&&e.state?0!==(r=e.state).wrap&&r.mode!==DICT?Z_STREAM_ERROR$1:r.mode===DICT&&adler32_1(1,t,n,0)!==r.check?Z_DATA_ERROR$1:updatewindow(e,t,n,n)?(r.mode=MEM,Z_MEM_ERROR$1):(r.havedict=1,Z_OK$1):Z_STREAM_ERROR$1},inflateReset_1=inflateReset,inflateReset2_1=inflateReset2,inflateResetKeep_1=inflateResetKeep,inflateInit_1=inflateInit,inflateInit2_1=inflateInit2,inflate_2$1=inflate$2,inflateEnd_1=inflateEnd,inflateGetHeader_1=inflateGetHeader,inflateSetDictionary_1=inflateSetDictionary,inflateInfo="pako inflate (from Nodeca project)",inflate_1$2={inflateReset:inflateReset_1,inflateReset2:inflateReset2_1,inflateResetKeep:inflateResetKeep_1,inflateInit:inflateInit_1,inflateInit2:inflateInit2_1,inflate:inflate_2$1,inflateEnd:inflateEnd_1,inflateGetHeader:inflateGetHeader_1,inflateSetDictionary:inflateSetDictionary_1,inflateInfo:inflateInfo};function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gzheader=GZheader,toString=Object.prototype.toString,Z_NO_FLUSH=constants$2.Z_NO_FLUSH,Z_FINISH=constants$2.Z_FINISH,Z_OK=constants$2.Z_OK,Z_STREAM_END=constants$2.Z_STREAM_END,Z_NEED_DICT=constants$2.Z_NEED_DICT,Z_STREAM_ERROR=constants$2.Z_STREAM_ERROR,Z_DATA_ERROR=constants$2.Z_DATA_ERROR,Z_MEM_ERROR=constants$2.Z_MEM_ERROR;function Inflate$1(e){this.options=common.assign({chunkSize:65536,windowBits:15,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;var r=inflate_1$2.inflateInit2(this.strm,t.windowBits);if(r!==Z_OK)throw new Error(messages[r]);if(this.header=new gzheader,inflate_1$2.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=strings.string2buf(t.dictionary):"[object ArrayBuffer]"===toString.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=inflate_1$2.inflateSetDictionary(this.strm,t.dictionary))!==Z_OK))throw new Error(messages[r])}function inflate$1(e,t){var r=new Inflate$1(t);if(r.push(e),r.err)throw r.msg||messages[r.err];return r.result}function inflateRaw$1(e,t){return(t=t||{}).raw=!0,inflate$1(e,t)}Inflate$1.prototype.push=function(e,t){var r,n,a,i=this.strm,o=this.options.chunkSize,s=this.options.dictionary;if(this.ended)return!1;for(n=t===~~t?t:!0===t?Z_FINISH:Z_NO_FLUSH,"[object ArrayBuffer]"===toString.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;){for(0===i.avail_out&&(i.output=new Uint8Array(o),i.next_out=0,i.avail_out=o),(r=inflate_1$2.inflate(i,n))===Z_NEED_DICT&&s&&((r=inflate_1$2.inflateSetDictionary(i,s))===Z_OK?r=inflate_1$2.inflate(i,n):r===Z_DATA_ERROR&&(r=Z_NEED_DICT));i.avail_in>0&&r===Z_STREAM_END&&i.state.wrap>0&&0!==e[i.next_in];)inflate_1$2.inflateReset(i),r=inflate_1$2.inflate(i,n);switch(r){case Z_STREAM_ERROR:case Z_DATA_ERROR:case Z_NEED_DICT:case Z_MEM_ERROR:return this.onEnd(r),this.ended=!0,!1}if(a=i.avail_out,i.next_out&&(0===i.avail_out||r===Z_STREAM_END))if("string"===this.options.to){var l=strings.utf8border(i.output,i.next_out),f=i.next_out-l,c=strings.buf2string(i.output,l);i.next_out=f,i.avail_out=o-f,f&&i.output.set(i.output.subarray(l,l+f),0),this.onData(c)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(r!==Z_OK||0!==a){if(r===Z_STREAM_END)return r=inflate_1$2.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(0===i.avail_in)break}}return!0},Inflate$1.prototype.onData=function(e){this.chunks.push(e)},Inflate$1.prototype.onEnd=function(e){e===Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Inflate_1$1=Inflate$1,inflate_2=inflate$1,inflateRaw_1$1=inflateRaw$1,ungzip$1=inflate$1,constants=constants$2,inflate_1$1={Inflate:Inflate_1$1,inflate:inflate_2,inflateRaw:inflateRaw_1$1,ungzip:ungzip$1,constants:constants},inflate=inflate_1$1.inflate,inflate_1=inflate,DeflateDecoder=function(e){_inherits(r,BaseDecoder);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return _createClass(r,[{key:"decodeBlock",value:function(e){return inflate_1(new Uint8Array(e)).buffer}}]),r}(),deflate=Object.freeze({__proto__:null,default:DeflateDecoder}),PackbitsDecoder=function(e){_inherits(r,BaseDecoder);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return _createClass(r,[{key:"decodeBlock",value:function(e){for(var t=new DataView(e),r=[],n=0;n<e.byteLength;++n){var a=t.getInt8(n);if(a<0){var i=t.getUint8(n+1);a=-a;for(var o=0;o<=a;++o)r.push(i);n+=1}else{for(var s=0;s<=a;++s)r.push(t.getUint8(n+s+1));n+=a+1}}return new Uint8Array(r).buffer}}]),r}(),packbits=Object.freeze({__proto__:null,default:PackbitsDecoder}),LercDecode={exports:{}},module;module=LercDecode,\n/* Copyright 2015-2021 Esri. Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 @preserve */\nfunction(){var e,t,r,n,a,i,o,s,l,f,c,u,d,h,p,m,g=(e={defaultNoDataValue:-34027999387901484e22,decode:function(i,o){var s=(o=o||{}).encodedMaskData||null===o.encodedMaskData,l=a(i,o.inputOffset||0,s),f=null!==o.noDataValue?o.noDataValue:e.defaultNoDataValue,c=t(l,o.pixelType||Float32Array,o.encodedMaskData,f,o.returnMask),u={width:l.width,height:l.height,pixelData:c.resultPixels,minValue:c.minValue,maxValue:l.pixels.maxValue,noDataValue:f};return c.resultMask&&(u.maskData=c.resultMask),o.returnEncodedMask&&l.mask&&(u.encodedMaskData=l.mask.bitset?l.mask.bitset:null),o.returnFileInfo&&(u.fileInfo=r(l),o.computeUsedBitDepths&&(u.fileInfo.bitDepths=n(l))),u}},t=function(e,t,r,n,a){var o,s,l,f=0,c=e.pixels.numBlocksX,u=e.pixels.numBlocksY,d=Math.floor(e.width/c),h=Math.floor(e.height/u),p=2*e.maxZError,m=Number.MAX_VALUE;r=r||(e.mask?e.mask.bitset:null),s=new t(e.width*e.height),a&&r&&(l=new Uint8Array(e.width*e.height));for(var g,y,_=new Float32Array(d*h),b=0;b<=u;b++){var v=b!==u?h:e.height%u;if(0!==v)for(var w=0;w<=c;w++){var k=w!==c?d:e.width%c;if(0!==k){var T,E,x,S,D=b*e.width*h+w*d,A=e.width-k,M=e.pixels.blocks[f];if(M.encoding<2?(0===M.encoding?T=M.rawData:(i(M.stuffedData,M.bitsPerPixel,M.numValidPixels,M.offset,p,_,e.pixels.maxValue),T=_),E=0):x=2===M.encoding?0:M.offset,r)for(y=0;y<v;y++){for(7&D&&(S=r[D>>3],S<<=7&D),g=0;g<k;g++)7&D||(S=r[D>>3]),128&S?(l&&(l[D]=1),m=m>(o=M.encoding<2?T[E++]:x)?o:m,s[D++]=o):(l&&(l[D]=0),s[D++]=n),S<<=1;D+=A}else if(M.encoding<2)for(y=0;y<v;y++){for(g=0;g<k;g++)m=m>(o=T[E++])?o:m,s[D++]=o;D+=A}else for(m=m>x?x:m,y=0;y<v;y++){for(g=0;g<k;g++)s[D++]=x;D+=A}if(1===M.encoding&&E!==M.numValidPixels)throw"Block and Mask do not match";f++}}}return{resultPixels:s,resultMask:l,minValue:m}},r=function(e){return{fileIdentifierString:e.fileIdentifierString,fileVersion:e.fileVersion,imageType:e.imageType,height:e.height,width:e.width,maxZError:e.maxZError,eofOffset:e.eofOffset,mask:e.mask?{numBlocksX:e.mask.numBlocksX,numBlocksY:e.mask.numBlocksY,numBytes:e.mask.numBytes,maxValue:e.mask.maxValue}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,numBytes:e.pixels.numBytes,maxValue:e.pixels.maxValue,noDataValue:e.noDataValue}}},n=function(e){for(var t=e.pixels.numBlocksX*e.pixels.numBlocksY,r={},n=0;n<t;n++){var a=e.pixels.blocks[n];0===a.encoding?r.float32=!0:1===a.encoding?r[a.bitsPerPixel]=!0:r[0]=!0}return Object.keys(r)},a=function(e,t,r){var n={},a=new Uint8Array(e,t,10);if(n.fileIdentifierString=String.fromCharCode.apply(null,a),"CntZImage"!==n.fileIdentifierString.trim())throw"Unexpected file identifier string: "+n.fileIdentifierString;t+=10;var i=new DataView(e,t,24);if(n.fileVersion=i.getInt32(0,!0),n.imageType=i.getInt32(4,!0),n.height=i.getUint32(8,!0),n.width=i.getUint32(12,!0),n.maxZError=i.getFloat64(16,!0),t+=24,!r)if(i=new DataView(e,t,16),n.mask={},n.mask.numBlocksY=i.getUint32(0,!0),n.mask.numBlocksX=i.getUint32(4,!0),n.mask.numBytes=i.getUint32(8,!0),n.mask.maxValue=i.getFloat32(12,!0),t+=16,n.mask.numBytes>0){var o=new Uint8Array(Math.ceil(n.width*n.height/8)),s=(i=new DataView(e,t,n.mask.numBytes)).getInt16(0,!0),l=2,f=0;do{if(s>0)for(;s--;)o[f++]=i.getUint8(l++);else{var c=i.getUint8(l++);for(s=-s;s--;)o[f++]=c}s=i.getInt16(l,!0),l+=2}while(l<n.mask.numBytes);if(-32768!==s||f<o.length)throw"Unexpected end of mask RLE encoding";n.mask.bitset=o,t+=n.mask.numBytes}else 0==(n.mask.numBytes|n.mask.numBlocksY|n.mask.maxValue)&&(n.mask.bitset=new Uint8Array(Math.ceil(n.width*n.height/8)));i=new DataView(e,t,16),n.pixels={},n.pixels.numBlocksY=i.getUint32(0,!0),n.pixels.numBlocksX=i.getUint32(4,!0),n.pixels.numBytes=i.getUint32(8,!0),n.pixels.maxValue=i.getFloat32(12,!0),t+=16;var u=n.pixels.numBlocksX,d=n.pixels.numBlocksY,h=u+(n.width%u>0?1:0),p=d+(n.height%d>0?1:0);n.pixels.blocks=new Array(h*p);for(var m=0,g=0;g<p;g++)for(var y=0;y<h;y++){var _=0,b=e.byteLength-t;i=new DataView(e,t,Math.min(10,b));var v={};n.pixels.blocks[m++]=v;var w=i.getUint8(0);if(_++,v.encoding=63&w,v.encoding>3)throw"Invalid block encoding ("+v.encoding+")";if(2!==v.encoding){if(0!==w&&2!==w){if(w>>=6,v.offsetType=w,2===w)v.offset=i.getInt8(1),_++;else if(1===w)v.offset=i.getInt16(1,!0),_+=2;else{if(0!==w)throw"Invalid block offset type";v.offset=i.getFloat32(1,!0),_+=4}if(1===v.encoding)if(w=i.getUint8(_),_++,v.bitsPerPixel=63&w,w>>=6,v.numValidPixelsType=w,2===w)v.numValidPixels=i.getUint8(_),_++;else if(1===w)v.numValidPixels=i.getUint16(_,!0),_+=2;else{if(0!==w)throw"Invalid valid pixel count type";v.numValidPixels=i.getUint32(_,!0),_+=4}}var k;if(t+=_,3!==v.encoding)if(0===v.encoding){var T=(n.pixels.numBytes-1)/4;if(T!==Math.floor(T))throw"uncompressed block has invalid length";k=new ArrayBuffer(4*T),new Uint8Array(k).set(new Uint8Array(e,t,4*T));var E=new Float32Array(k);v.rawData=E,t+=4*T}else if(1===v.encoding){var x=Math.ceil(v.numValidPixels*v.bitsPerPixel/8),S=Math.ceil(x/4);k=new ArrayBuffer(4*S),new Uint8Array(k).set(new Uint8Array(e,t,x)),v.stuffedData=new Uint32Array(k),t+=x}}else t++}return n.eofOffset=t,n},i=function(e,t,r,n,a,i,o){var s,l,f,c=(1<<t)-1,u=0,d=0,h=Math.ceil((o-n)/a),p=4*e.length-Math.ceil(t*r/8);for(e[e.length-1]<<=8*p,s=0;s<r;s++){if(0===d&&(f=e[u++],d=32),d>=t)l=f>>>d-t&c,d-=t;else{var m=t-d;l=(f&c)<<m&c,l+=(f=e[u++])>>>(d=32-m)}i[s]=l<h?n+l*a:o}return i},e),y=(o=function(e,t,r,n,a,i,o,s){var l,f,c,u,d,h=(1<<r)-1,p=0,m=0,g=4*e.length-Math.ceil(r*n/8);if(e[e.length-1]<<=8*g,a)for(l=0;l<n;l++)0===m&&(c=e[p++],m=32),m>=r?(f=c>>>m-r&h,m-=r):(f=(c&h)<<(u=r-m)&h,f+=(c=e[p++])>>>(m=32-u)),t[l]=a[f];else for(d=Math.ceil((s-i)/o),l=0;l<n;l++)0===m&&(c=e[p++],m=32),m>=r?(f=c>>>m-r&h,m-=r):(f=(c&h)<<(u=r-m)&h,f+=(c=e[p++])>>>(m=32-u)),t[l]=f<d?i+f*o:s},s=function(e,t,r,n,a,i){var o,s=(1<<t)-1,l=0,f=0,c=0,u=0,d=0,h=[],p=4*e.length-Math.ceil(t*r/8);e[e.length-1]<<=8*p;var m=Math.ceil((i-n)/a);for(f=0;f<r;f++)0===u&&(o=e[l++],u=32),u>=t?(d=o>>>u-t&s,u-=t):(d=(o&s)<<(c=t-u)&s,d+=(o=e[l++])>>>(u=32-c)),h[f]=d<m?n+d*a:i;return h.unshift(n),h},l=function(e,t,r,n,a,i,o,s){var l,f,c,u,d=(1<<r)-1,h=0,p=0,m=0;if(a)for(l=0;l<n;l++)0===p&&(c=e[h++],p=32,m=0),p>=r?(f=c>>>m&d,p-=r,m+=r):(f=c>>>m&d,p=32-(u=r-p),f|=((c=e[h++])&(1<<u)-1)<<r-u,m=u),t[l]=a[f];else{var g=Math.ceil((s-i)/o);for(l=0;l<n;l++)0===p&&(c=e[h++],p=32,m=0),p>=r?(f=c>>>m&d,p-=r,m+=r):(f=c>>>m&d,p=32-(u=r-p),f|=((c=e[h++])&(1<<u)-1)<<r-u,m=u),t[l]=f<g?i+f*o:s}return t},f=function(e,t,r,n,a,i){var o,s=(1<<t)-1,l=0,f=0,c=0,u=0,d=0,h=0,p=[],m=Math.ceil((i-n)/a);for(f=0;f<r;f++)0===u&&(o=e[l++],u=32,h=0),u>=t?(d=o>>>h&s,u-=t,h+=t):(d=o>>>h&s,u=32-(c=t-u),d|=((o=e[l++])&(1<<c)-1)<<t-c,h=c),p[f]=d<m?n+d*a:i;return p.unshift(n),p},c=function(e,t,r,n){var a,i,o,s,l=(1<<r)-1,f=0,c=0,u=4*e.length-Math.ceil(r*n/8);for(e[e.length-1]<<=8*u,a=0;a<n;a++)0===c&&(o=e[f++],c=32),c>=r?(i=o>>>c-r&l,c-=r):(i=(o&l)<<(s=r-c)&l,i+=(o=e[f++])>>>(c=32-s)),t[a]=i;return t},u=function(e,t,r,n){var a,i,o,s,l=(1<<r)-1,f=0,c=0,u=0;for(a=0;a<n;a++)0===c&&(o=e[f++],c=32,u=0),c>=r?(i=o>>>u&l,c-=r,u+=r):(i=o>>>u&l,c=32-(s=r-c),i|=((o=e[f++])&(1<<s)-1)<<r-s,u=s),t[a]=i;return t},d={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(e){for(var t=65535,r=65535,n=e.length,a=Math.floor(n/2),i=0;a;){var o=a>=359?359:a;a-=o;do{t+=e[i++]<<8,r+=t+=e[i++]}while(--o);t=(65535&t)+(t>>>16),r=(65535&r)+(r>>>16)}return 1&n&&(r+=t+=e[i]<<8),((r=(65535&r)+(r>>>16))<<16|(t=(65535&t)+(t>>>16)))>>>0},readHeaderInfo:function(e,t){var r=t.ptr,n=new Uint8Array(e,r,6),a={};if(a.fileIdentifierString=String.fromCharCode.apply(null,n),0!==a.fileIdentifierString.lastIndexOf("Lerc2",0))throw"Unexpected file identifier string (expect Lerc2 ): "+a.fileIdentifierString;r+=6;var i,o=new DataView(e,r,8),s=o.getInt32(0,!0);if(a.fileVersion=s,r+=4,s>=3&&(a.checksum=o.getUint32(4,!0),r+=4),o=new DataView(e,r,12),a.height=o.getUint32(0,!0),a.width=o.getUint32(4,!0),r+=8,s>=4?(a.numDims=o.getUint32(8,!0),r+=4):a.numDims=1,o=new DataView(e,r,40),a.numValidPixel=o.getUint32(0,!0),a.microBlockSize=o.getInt32(4,!0),a.blobSize=o.getInt32(8,!0),a.imageType=o.getInt32(12,!0),a.maxZError=o.getFloat64(16,!0),a.zMin=o.getFloat64(24,!0),a.zMax=o.getFloat64(32,!0),r+=40,t.headerInfo=a,t.ptr=r,s>=3&&(i=s>=4?52:48,this.computeChecksumFletcher32(new Uint8Array(e,r-i,a.blobSize-14))!==a.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(e,t){var r=t.headerInfo,n=this.getDataTypeArray(r.imageType),a=r.numDims*this.getDataTypeSize(r.imageType),i=this.readSubArray(e,t.ptr,n,a),o=this.readSubArray(e,t.ptr+a,n,a);t.ptr+=2*a;var s,l=!0;for(s=0;s<r.numDims;s++)if(i[s]!==o[s]){l=!1;break}return r.minValues=i,r.maxValues=o,l},readSubArray:function(e,t,r,n){var a;if(r===Uint8Array)a=new Uint8Array(e,t,n);else{var i=new ArrayBuffer(n);new Uint8Array(i).set(new Uint8Array(e,t,n)),a=new r(i)}return a},readMask:function(e,t){var r,n,a=t.ptr,i=t.headerInfo,o=i.width*i.height,s=i.numValidPixel,l=new DataView(e,a,4),f={};if(f.numBytes=l.getUint32(0,!0),a+=4,(0===s||o===s)&&0!==f.numBytes)throw"invalid mask";if(0===s)r=new Uint8Array(Math.ceil(o/8)),f.bitset=r,n=new Uint8Array(o),t.pixels.resultMask=n,a+=f.numBytes;else if(f.numBytes>0){r=new Uint8Array(Math.ceil(o/8));var c=(l=new DataView(e,a,f.numBytes)).getInt16(0,!0),u=2,d=0,h=0;do{if(c>0)for(;c--;)r[d++]=l.getUint8(u++);else for(h=l.getUint8(u++),c=-c;c--;)r[d++]=h;c=l.getInt16(u,!0),u+=2}while(u<f.numBytes);if(-32768!==c||d<r.length)throw"Unexpected end of mask RLE encoding";n=new Uint8Array(o);var p=0,m=0;for(m=0;m<o;m++)7&m?(p=r[m>>3],p<<=7&m):p=r[m>>3],128&p&&(n[m]=1);t.pixels.resultMask=n,f.bitset=r,a+=f.numBytes}return t.ptr=a,t.mask=f,!0},readDataOneSweep:function(e,t,r,n){var a,i=t.ptr,o=t.headerInfo,s=o.numDims,l=o.width*o.height,f=o.imageType,c=o.numValidPixel*d.getDataTypeSize(f)*s,u=t.pixels.resultMask;if(r===Uint8Array)a=new Uint8Array(e,i,c);else{var h=new ArrayBuffer(c);new Uint8Array(h).set(new Uint8Array(e,i,c)),a=new r(h)}if(a.length===l*s)t.pixels.resultPixels=n?d.swapDimensionOrder(a,l,s,r,!0):a;else{t.pixels.resultPixels=new r(l*s);var p=0,m=0,g=0,y=0;if(s>1){if(n){for(m=0;m<l;m++)if(u[m])for(y=m,g=0;g<s;g++,y+=l)t.pixels.resultPixels[y]=a[p++]}else for(m=0;m<l;m++)if(u[m])for(y=m*s,g=0;g<s;g++)t.pixels.resultPixels[y+g]=a[p++]}else for(m=0;m<l;m++)u[m]&&(t.pixels.resultPixels[m]=a[p++])}return i+=c,t.ptr=i,!0},readHuffmanTree:function(e,t){var r=this.HUFFMAN_LUT_BITS_MAX,n=new DataView(e,t.ptr,16);if(t.ptr+=16,n.getInt32(0,!0)<2)throw"unsupported Huffman version";var a=n.getInt32(4,!0),i=n.getInt32(8,!0),o=n.getInt32(12,!0);if(i>=o)return!1;var s=new Uint32Array(o-i);d.decodeBits(e,t,s);var l,f,c,u,p=[];for(l=i;l<o;l++)p[f=l-(l<a?0:a)]={first:s[l-i],second:null};var m=e.byteLength-t.ptr,g=Math.ceil(m/4),y=new ArrayBuffer(4*g);new Uint8Array(y).set(new Uint8Array(e,t.ptr,m));var _,b=new Uint32Array(y),v=0,w=0;for(_=b[0],l=i;l<o;l++)(u=p[f=l-(l<a?0:a)].first)>0&&(p[f].second=_<<v>>>32-u,32-v>=u?32===(v+=u)&&(v=0,_=b[++w]):(v+=u-32,_=b[++w],p[f].second|=_>>>32-v));var k=0,T=0,E=new h;for(l=0;l<p.length;l++)void 0!==p[l]&&(k=Math.max(k,p[l].first));T=k>=r?r:k;var x,S,D,A,M,I=[];for(l=i;l<o;l++)if((u=p[f=l-(l<a?0:a)].first)>0)if(x=[u,f],u<=T)for(S=p[f].second<<T-u,D=1<<T-u,c=0;c<D;c++)I[S|c]=x;else for(S=p[f].second,M=E,A=u-1;A>=0;A--)S>>>A&1?(M.right||(M.right=new h),M=M.right):(M.left||(M.left=new h),M=M.left),0!==A||M.val||(M.val=x[1]);return{decodeLut:I,numBitsLUTQick:T,numBitsLUT:k,tree:E,stuffedData:b,srcPtr:w,bitPos:v}},readHuffman:function(e,t,r,n){var a,i,o,s,l,f,c,u,h,p=t.headerInfo.numDims,m=t.headerInfo.height,g=t.headerInfo.width,y=g*m,_=this.readHuffmanTree(e,t),b=_.decodeLut,v=_.tree,w=_.stuffedData,k=_.srcPtr,T=_.bitPos,E=_.numBitsLUTQick,x=_.numBitsLUT,S=0===t.headerInfo.imageType?128:0,D=t.pixels.resultMask,A=0;T>0&&(k++,T=0);var M,I=w[k],R=1===t.encodeMode,O=new r(y*p),C=O;if(p<2||R){for(M=0;M<p;M++)if(p>1&&(C=new r(O.buffer,y*M,y),A=0),t.headerInfo.numValidPixel===g*m)for(u=0,f=0;f<m;f++)for(c=0;c<g;c++,u++){if(i=0,l=s=I<<T>>>32-E,32-T<E&&(l=s|=w[k+1]>>>64-T-E),b[l])i=b[l][1],T+=b[l][0];else for(l=s=I<<T>>>32-x,32-T<x&&(l=s|=w[k+1]>>>64-T-x),a=v,h=0;h<x;h++)if(!(a=s>>>x-h-1&1?a.right:a.left).left&&!a.right){i=a.val,T=T+h+1;break}T>=32&&(T-=32,I=w[++k]),o=i-S,R?(o+=c>0?A:f>0?C[u-g]:A,o&=255,C[u]=o,A=o):C[u]=o}else for(u=0,f=0;f<m;f++)for(c=0;c<g;c++,u++)if(D[u]){if(i=0,l=s=I<<T>>>32-E,32-T<E&&(l=s|=w[k+1]>>>64-T-E),b[l])i=b[l][1],T+=b[l][0];else for(l=s=I<<T>>>32-x,32-T<x&&(l=s|=w[k+1]>>>64-T-x),a=v,h=0;h<x;h++)if(!(a=s>>>x-h-1&1?a.right:a.left).left&&!a.right){i=a.val,T=T+h+1;break}T>=32&&(T-=32,I=w[++k]),o=i-S,R?(c>0&&D[u-1]?o+=A:f>0&&D[u-g]?o+=C[u-g]:o+=A,o&=255,C[u]=o,A=o):C[u]=o}}else for(u=0,f=0;f<m;f++)for(c=0;c<g;c++)if(u=f*g+c,!D||D[u])for(M=0;M<p;M++,u+=y){if(i=0,l=s=I<<T>>>32-E,32-T<E&&(l=s|=w[k+1]>>>64-T-E),b[l])i=b[l][1],T+=b[l][0];else for(l=s=I<<T>>>32-x,32-T<x&&(l=s|=w[k+1]>>>64-T-x),a=v,h=0;h<x;h++)if(!(a=s>>>x-h-1&1?a.right:a.left).left&&!a.right){i=a.val,T=T+h+1;break}T>=32&&(T-=32,I=w[++k]),o=i-S,C[u]=o}t.ptr=t.ptr+4*(k+1)+(T>0?4:0),t.pixels.resultPixels=O,p>1&&!n&&(t.pixels.resultPixels=d.swapDimensionOrder(O,y,p,r))},decodeBits:function(e,t,r,n,a){var i=t.headerInfo,d=i.fileVersion,h=0,p=e.byteLength-t.ptr>=5?5:e.byteLength-t.ptr,m=new DataView(e,t.ptr,p),g=m.getUint8(0);h++;var y=g>>6,_=0===y?4:3-y,b=(32&g)>0,v=31&g,w=0;if(1===_)w=m.getUint8(h),h++;else if(2===_)w=m.getUint16(h,!0),h+=2;else{if(4!==_)throw"Invalid valid pixel count type";w=m.getUint32(h,!0),h+=4}var k,T,E,x,S,D,A,M,I,R=2*i.maxZError,O=i.numDims>1?i.maxValues[a]:i.zMax;if(b){for(t.counter.lut++,M=m.getUint8(h),h++,x=Math.ceil((M-1)*v/8),S=Math.ceil(x/4),T=new ArrayBuffer(4*S),E=new Uint8Array(T),t.ptr+=h,E.set(new Uint8Array(e,t.ptr,x)),A=new Uint32Array(T),t.ptr+=x,I=0;M-1>>>I;)I++;x=Math.ceil(w*I/8),S=Math.ceil(x/4),T=new ArrayBuffer(4*S),(E=new Uint8Array(T)).set(new Uint8Array(e,t.ptr,x)),k=new Uint32Array(T),t.ptr+=x,D=d>=3?f(A,v,M-1,n,R,O):s(A,v,M-1,n,R,O),d>=3?l(k,r,I,w,D):o(k,r,I,w,D)}else t.counter.bitstuffer++,I=v,t.ptr+=h,I>0&&(x=Math.ceil(w*I/8),S=Math.ceil(x/4),T=new ArrayBuffer(4*S),(E=new Uint8Array(T)).set(new Uint8Array(e,t.ptr,x)),k=new Uint32Array(T),t.ptr+=x,d>=3?null==n?u(k,r,I,w):l(k,r,I,w,!1,n,R,O):null==n?c(k,r,I,w):o(k,r,I,w,!1,n,R,O))},readTiles:function(e,t,r,n){var a=t.headerInfo,i=a.width,o=a.height,s=i*o,l=a.microBlockSize,f=a.imageType,c=d.getDataTypeSize(f),u=Math.ceil(i/l),h=Math.ceil(o/l);t.pixels.numBlocksY=h,t.pixels.numBlocksX=u,t.pixels.ptr=0;var p,m,g,y,_,b,v,w,k,T,E=0,x=0,S=0,D=0,A=0,M=0,I=0,R=0,O=0,C=0,P=0,L=0,U=0,B=0,$=0,N=new r(l*l),z=o%l||l,Z=i%l||l,G=a.numDims,j=t.pixels.resultMask,V=t.pixels.resultPixels,F=a.fileVersion>=5?14:15,K=a.zMax;for(S=0;S<h;S++)for(A=S!==h-1?l:z,D=0;D<u;D++)for(C=S*i*l+D*l,P=i-(M=D!==u-1?l:Z),w=0;w<G;w++){if(G>1?(T=V,C=S*i*l+D*l,V=new r(t.pixels.resultPixels.buffer,s*w*c,s),K=a.maxValues[w]):T=null,I=e.byteLength-t.ptr,m={},$=0,R=(p=new DataView(e,t.ptr,Math.min(10,I))).getUint8(0),$++,k=a.fileVersion>=5?4&R:0,O=R>>6&255,(R>>2&F)!=(D*l>>3&F))throw"integrity issue";if(k&&0===w)throw"integrity issue";if((_=3&R)>3)throw t.ptr+=$,"Invalid block encoding ("+_+")";if(2!==_)if(0===_){if(k)throw"integrity issue";if(t.counter.uncompressed++,t.ptr+=$,L=(L=A*M*c)<(U=e.byteLength-t.ptr)?L:U,g=new ArrayBuffer(L%c==0?L:L+c-L%c),new Uint8Array(g).set(new Uint8Array(e,t.ptr,L)),y=new r(g),B=0,j)for(E=0;E<A;E++){for(x=0;x<M;x++)j[C]&&(V[C]=y[B++]),C++;C+=P}else for(E=0;E<A;E++){for(x=0;x<M;x++)V[C++]=y[B++];C+=P}t.ptr+=B*c}else if(b=d.getDataTypeUsed(k&&f<6?4:f,O),v=d.getOnePixel(m,$,b,p),$+=d.getDataTypeSize(b),3===_)if(t.ptr+=$,t.counter.constantoffset++,j)for(E=0;E<A;E++){for(x=0;x<M;x++)j[C]&&(V[C]=k?Math.min(K,T[C]+v):v),C++;C+=P}else for(E=0;E<A;E++){for(x=0;x<M;x++)V[C]=k?Math.min(K,T[C]+v):v,C++;C+=P}else if(t.ptr+=$,d.decodeBits(e,t,N,v,w),$=0,k)if(j)for(E=0;E<A;E++){for(x=0;x<M;x++)j[C]&&(V[C]=N[$++]+T[C]),C++;C+=P}else for(E=0;E<A;E++){for(x=0;x<M;x++)V[C]=N[$++]+T[C],C++;C+=P}else if(j)for(E=0;E<A;E++){for(x=0;x<M;x++)j[C]&&(V[C]=N[$++]),C++;C+=P}else for(E=0;E<A;E++){for(x=0;x<M;x++)V[C++]=N[$++];C+=P}else{if(k)if(j)for(E=0;E<A;E++)for(x=0;x<M;x++)j[C]&&(V[C]=T[C]),C++;else for(E=0;E<A;E++)for(x=0;x<M;x++)V[C]=T[C],C++;t.counter.constant++,t.ptr+=$}}G>1&&!n&&(t.pixels.resultPixels=d.swapDimensionOrder(t.pixels.resultPixels,s,G,r))},formatFileInfo:function(e){return{fileIdentifierString:e.headerInfo.fileIdentifierString,fileVersion:e.headerInfo.fileVersion,imageType:e.headerInfo.imageType,height:e.headerInfo.height,width:e.headerInfo.width,numValidPixel:e.headerInfo.numValidPixel,microBlockSize:e.headerInfo.microBlockSize,blobSize:e.headerInfo.blobSize,maxZError:e.headerInfo.maxZError,pixelType:d.getPixelType(e.headerInfo.imageType),eofOffset:e.eofOffset,mask:e.mask?{numBytes:e.mask.numBytes}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,maxValue:e.headerInfo.zMax,minValue:e.headerInfo.zMin,noDataValue:e.noDataValue}}},constructConstantSurface:function(e,t){var r=e.headerInfo.zMax,n=e.headerInfo.zMin,a=e.headerInfo.maxValues,i=e.headerInfo.numDims,o=e.headerInfo.height*e.headerInfo.width,s=0,l=0,f=0,c=e.pixels.resultMask,u=e.pixels.resultPixels;if(c)if(i>1){if(t)for(s=0;s<i;s++)for(f=s*o,r=a[s],l=0;l<o;l++)c[l]&&(u[f+l]=r);else for(l=0;l<o;l++)if(c[l])for(f=l*i,s=0;s<i;s++)u[f+i]=a[s]}else for(l=0;l<o;l++)c[l]&&(u[l]=r);else if(i>1&&n!==r)if(t)for(s=0;s<i;s++)for(f=s*o,r=a[s],l=0;l<o;l++)u[f+l]=r;else for(l=0;l<o;l++)for(f=l*i,s=0;s<i;s++)u[f+s]=a[s];else for(l=0;l<o*i;l++)u[l]=r},getDataTypeArray:function(e){var t;switch(e){case 0:t=Int8Array;break;case 1:t=Uint8Array;break;case 2:t=Int16Array;break;case 3:t=Uint16Array;break;case 4:t=Int32Array;break;case 5:t=Uint32Array;break;case 6:t=Float32Array;break;case 7:t=Float64Array;break;default:t=Float32Array}return t},getPixelType:function(e){var t;switch(e){case 0:t="S8";break;case 1:t="U8";break;case 2:t="S16";break;case 3:t="U16";break;case 4:t="S32";break;case 5:t="U32";break;case 6:t="F32";break;case 7:t="F64";break;default:t="F32"}return t},isValidPixelValue:function(e,t){if(null==t)return!1;var r;switch(e){case 0:r=t>=-128&&t<=127;break;case 1:r=t>=0&&t<=255;break;case 2:r=t>=-32768&&t<=32767;break;case 3:r=t>=0&&t<=65536;break;case 4:r=t>=-2147483648&&t<=2147483647;break;case 5:r=t>=0&&t<=4294967296;break;case 6:r=t>=-34027999387901484e22&&t<=34027999387901484e22;break;case 7:r=t>=-17976931348623157e292&&t<=17976931348623157e292;break;default:r=!1}return r},getDataTypeSize:function(e){var t=0;switch(e){case 0:case 1:t=1;break;case 2:case 3:t=2;break;case 4:case 5:case 6:t=4;break;case 7:t=8;break;default:t=e}return t},getDataTypeUsed:function(e,t){var r=e;switch(e){case 2:case 4:r=e-t;break;case 3:case 5:r=e-2*t;break;case 6:r=0===t?e:1===t?2:1;break;case 7:r=0===t?e:e-2*t+1;break;default:r=e}return r},getOnePixel:function(e,t,r,n){var a=0;switch(r){case 0:a=n.getInt8(t);break;case 1:a=n.getUint8(t);break;case 2:a=n.getInt16(t,!0);break;case 3:a=n.getUint16(t,!0);break;case 4:a=n.getInt32(t,!0);break;case 5:a=n.getUInt32(t,!0);break;case 6:a=n.getFloat32(t,!0);break;case 7:a=n.getFloat64(t,!0);break;default:throw"the decoder does not understand this pixel type"}return a},swapDimensionOrder:function(e,t,r,n,a){var i=0,o=0,s=0,l=0,f=e;if(r>1)if(f=new n(t*r),a)for(i=0;i<t;i++)for(l=i,s=0;s<r;s++,l+=t)f[l]=e[o++];else for(i=0;i<t;i++)for(l=i,s=0;s<r;s++,l+=t)f[o++]=e[l];return f}},h=function(e,t,r){this.val=e,this.left=t,this.right=r},{decode:function(e,t){var r=(t=t||{}).noDataValue,n=0,a={};a.ptr=t.inputOffset||0,a.pixels={},d.readHeaderInfo(e,a);var i=a.headerInfo,o=i.fileVersion,s=d.getDataTypeArray(i.imageType);if(o>5)throw"unsupported lerc version 2."+o;d.readMask(e,a),i.numValidPixel===i.width*i.height||a.pixels.resultMask||(a.pixels.resultMask=t.maskData);var l=i.width*i.height;a.pixels.resultPixels=new s(l*i.numDims),a.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0};var f,c=!t.returnPixelInterleavedDims;if(0!==i.numValidPixel)if(i.zMax===i.zMin)d.constructConstantSurface(a,c);else if(o>=4&&d.checkMinMaxRanges(e,a))d.constructConstantSurface(a,c);else{var u=new DataView(e,a.ptr,2),h=u.getUint8(0);if(a.ptr++,h)d.readDataOneSweep(e,a,s,c);else if(o>1&&i.imageType<=1&&Math.abs(i.maxZError-.5)<1e-5){var p=u.getUint8(1);if(a.ptr++,a.encodeMode=p,p>2||o<4&&p>1)throw"Invalid Huffman flag "+p;p?d.readHuffman(e,a,s,c):d.readTiles(e,a,s,c)}else d.readTiles(e,a,s,c)}a.eofOffset=a.ptr,t.inputOffset?(f=a.headerInfo.blobSize+t.inputOffset-a.ptr,Math.abs(f)>=1&&(a.eofOffset=t.inputOffset+a.headerInfo.blobSize)):(f=a.headerInfo.blobSize-a.ptr,Math.abs(f)>=1&&(a.eofOffset=a.headerInfo.blobSize));var m={width:i.width,height:i.height,pixelData:a.pixels.resultPixels,minValue:i.zMin,maxValue:i.zMax,validPixelCount:i.numValidPixel,dimCount:i.numDims,dimStats:{minValues:i.minValues,maxValues:i.maxValues},maskData:a.pixels.resultMask};if(a.pixels.resultMask&&d.isValidPixelValue(i.imageType,r)){var g=a.pixels.resultMask;for(n=0;n<l;n++)g[n]||(m.pixelData[n]=r);m.noDataValue=r}return a.noDataValue=r,t.returnFileInfo&&(m.fileInfo=d.formatFileInfo(a)),m},getBandCount:function(e){for(var t=0,r=0,n={ptr:0,pixels:{}};r<e.byteLength-58;)d.readHeaderInfo(e,n),r+=n.headerInfo.blobSize,t++,n.ptr=r;return t}}),_=(p=new ArrayBuffer(4),m=new Uint8Array(p),new Uint32Array(p)[0]=1,1===m[0]),b={decode:function(e,t){if(!_)throw"Big endian system is not supported.";var r,n,a=(t=t||{}).inputOffset||0,i=new Uint8Array(e,a,10),o=String.fromCharCode.apply(null,i);if("CntZImage"===o.trim())r=g,n=1;else{if("Lerc2"!==o.substring(0,5))throw"Unexpected file identifier string: "+o;r=y,n=2}for(var s,l,f,c,u,d,h=0,p=e.byteLength-10,m=[],b={width:0,height:0,pixels:[],pixelType:t.pixelType,mask:null,statistics:[]},v=0;a<p;){var w=r.decode(e,{inputOffset:a,encodedMaskData:s,maskData:f,returnMask:0===h,returnEncodedMask:0===h,returnFileInfo:!0,returnPixelInterleavedDims:t.returnPixelInterleavedDims,pixelType:t.pixelType||null,noDataValue:t.noDataValue||null});a=w.fileInfo.eofOffset,f=w.maskData,0===h&&(s=w.encodedMaskData,b.width=w.width,b.height=w.height,b.dimCount=w.dimCount||1,b.pixelType=w.pixelType||w.fileInfo.pixelType,b.mask=f),n>1&&(f&&m.push(f),w.fileInfo.mask&&w.fileInfo.mask.numBytes>0&&v++),h++,b.pixels.push(w.pixelData),b.statistics.push({minValue:w.minValue,maxValue:w.maxValue,noDataValue:w.noDataValue,dimStats:w.dimStats})}if(n>1&&v>1){for(d=b.width*b.height,b.bandMasks=m,(f=new Uint8Array(d)).set(m[0]),c=1;c<m.length;c++)for(l=m[c],u=0;u<d;u++)f[u]=f[u]&l[u];b.maskData=f}return b}};module.exports?module.exports=b:this.Lerc=b}();var Lerc=LercDecode.exports,fieldTagNames={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},fieldTags={};for(var key in fieldTagNames)fieldTagNames.hasOwnProperty(key)&&(fieldTags[fieldTagNames[key]]=parseInt(key,10));fieldTags.BitsPerSample,fieldTags.ExtraSamples,fieldTags.SampleFormat,fieldTags.StripByteCounts,fieldTags.StripOffsets,fieldTags.StripRowCounts,fieldTags.TileByteCounts,fieldTags.TileOffsets,fieldTags.SubIFDs;var fieldTypeNames={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},fieldTypes={};for(var _key in fieldTypeNames)fieldTypeNames.hasOwnProperty(_key)&&(fieldTypes[fieldTypeNames[_key]]=parseInt(_key,10));var LercParameters={Version:0,AddCompression:1},LercAddCompression={None:0,Deflate:1},geoKeyNames={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},geoKeys={};for(var _key2 in geoKeyNames)geoKeyNames.hasOwnProperty(_key2)&&(geoKeys[geoKeyNames[_key2]]=parseInt(_key2,10));var LercDecoder=function(e){_inherits(r,BaseDecoder);var t=_createSuper(r);function r(e){var n;return _classCallCheck(this,r),(n=t.call(this)).planarConfiguration=void 0!==e.PlanarConfiguration?e.PlanarConfiguration:1,n.samplesPerPixel=void 0!==e.SamplesPerPixel?e.SamplesPerPixel:1,n.addCompression=e.LercParameters[LercParameters.AddCompression],n}return _createClass(r,[{key:"decodeBlock",value:function(e){switch(this.addCompression){case LercAddCompression.None:break;case LercAddCompression.Deflate:e=inflate_1(new Uint8Array(e)).buffer;break;default:throw new Error("Unsupported LERC additional compression method identifier: ".concat(this.addCompression))}return Lerc.decode(e,{returnPixelInterleavedDims:1===this.planarConfiguration}).pixels[0].buffer}}]),r}(),lerc=Object.freeze({__proto__:null,default:LercDecoder});'],{type:"application/javascript"}),di=URL.createObjectURL(ui);var hi,pi=o("./node_modules/ol/proj/Units.js"),fi=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();function mi(){return hi||(hi=new dn(void 0,new Worker(di))),hi}function gi(e){try{return e.getBoundingBox()}catch(o){var t=e.fileDirectory;return[0,0,t.ImageWidth,t.ImageLength]}}function yi(e){try{return e.getOrigin().slice(0,2)}catch(t){return[0,e.fileDirectory.ImageLength]}}function vi(e,t){try{return e.getResolution(t)[0]}catch(o){return t.fileDirectory.ImageWidth/e.fileDirectory.ImageWidth}}function _i(e){var t=e.geoKeys;if(!t)return null;if(t.ProjectedCSTypeGeoKey){var o="EPSG:"+t.ProjectedCSTypeGeoKey;if(!(n=Object(y.t)(o)))(r=Object(pi.c)(t.ProjLinearUnitsGeoKey))&&(n=new y.b({code:o,units:r}));return n}if(t.GeographicTypeGeoKey){var n,r;o="EPSG:"+t.GeographicTypeGeoKey;if(!(n=Object(y.t)(o)))(r=Object(pi.c)(t.GeogAngularUnitsGeoKey))&&(n=new y.b({code:o,units:r}));return n}return null}function bi(e){return e.getImageCount().then((function(t){for(var o=new Array(t),n=0;n<t;++n)o[n]=e.getImage(n);return Promise.all(o)}))}function wi(e){return(e.overviews?async function(e,t=[],o={},n){const r=await li.fromSource(Qr(e,o),n),i=await Promise.all(t.map(e=>li.fromSource(Qr(e,o))));return new ci(r,i)}(e.url,e.overviews):async function(e,t={},o){return li.fromSource(Qr(e,t),o)}(e.url)).then(bi)}function Ei(e,t,o,n,r){if(Array.isArray(e)){var i=e.length;if(!Array.isArray(t)||i!=t.length){var s=new Error(n);throw r(s),s}for(var a=0;a<i;++a)Ei(e[a],t[a],o,n,r)}else if(t=t,Math.abs(e-t)>o*e)throw new Error(n)}function Oi(e){return e instanceof Int8Array?127:e instanceof Uint8Array||e instanceof Uint8ClampedArray?255:e instanceof Int16Array?32767:e instanceof Uint16Array?65535:e instanceof Int32Array?2147483647:e instanceof Uint32Array?4294967295:e instanceof Float32Array?34e37:255}var Si=function(e){function t(t){var o=e.call(this,{state:tt.a.LOADING,tileGrid:null,projection:null,opaque:t.opaque,transition:t.transition})||this;o.sourceInfo_=t.sources;var n=o.sourceInfo_.length;o.sourceImagery_=new Array(n),o.resolutionFactors_=new Array(n),o.samplesPerPixel_,o.nodataValues_,o.normalize_=!1!==t.normalize,o.addAlpha_=!1,o.error_=null,o.readMethod_=t.convertToRGB?"readRGB":"readRasters",o.setKey(o.sourceInfo_.map((function(e){return e.url})).join(","));for(var r=o,i=new Array(n),s=0;s<n;++s)i[s]=wi(o.sourceInfo_[s]);return Promise.all(i).then((function(e){r.configure_(e)})).catch((function(e){console.error(e),r.error_=e,r.setState(tt.a.ERROR)})),o}return fi(t,e),t.prototype.getError=function(){return this.error_},t.prototype.configure_=function(e){for(var t,o,n,r,i=new Array(e.length),s=new Array(e.length),a=0,l=e.length,c=function(l){var c=e[l],d=c.length,h=void 0,p=void 0,f=new Array(d),m=new Array(d);s[l]=new Array(d);for(var g=0;g<d;++g){var y=c[g],v=y.getGDALNoData();s[l][g]=null===v?NaN:v;var _=u.sourceInfo_[l].bands;i[l]=_?_.length:y.getSamplesPerPixel();var b=d-(g+1);h||(h=gi(y)),p||(p=yi(y)),m[b]=vi(y,c[0]),f[b]=[y.getTileWidth(),y.getTileHeight()]}(t?Object(ce.H)(t,h,t):t=h,o)?Ei(o,p,0,O="Origin mismatch for source "+l+", got ["+p+"] but expected ["+o+"]",u.viewRejector):o=p;if(r){r.length-a>m.length&&(a=r.length-m.length);var w=r[r.length-1]/m[m.length-1];u.resolutionFactors_[l]=w;var E=m.map((function(e){return e*w})),O="Resolution mismatch for source "+l+", got ["+E+"] but expected ["+r+"]";Ei(r.slice(a,r.length),E,.005,O,u.viewRejector)}else r=m,u.resolutionFactors_[l]=1;n?Ei(n.slice(a,n.length),f,0,"Tile size mismatch for source "+l,u.viewRejector):n=f,u.sourceImagery_[l]=c.reverse()},u=this,d=0;d<l;++d)c(d);for(var h=0,p=this.sourceImagery_.length;h<p;++h)for(var f=this.sourceImagery_[h];f.length<r.length;)f.unshift(void 0);if(!this.getProjection()){var m=e[0];for(h=m.length-1;h>=0;--h){var g=_i(m[h]);if(g){this.projection=g;break}}}this.samplesPerPixel_=i,this.nodataValues_=s;e:for(d=0;d<l;++d){if(void 0!==this.sourceInfo_[d].nodata){this.addAlpha_=!0;break}var v=s[d],_=this.sourceInfo_[d].bands;if(_){for(h=0;h<_.length;++h)if(!isNaN(v[_[h]-1])){this.addAlpha_=!0;break e}}else for(var b=0;b<v.length;++b)if(!isNaN(v[b])){this.addAlpha_=!0;break e}}var w=this.addAlpha_?1:0;this.bandCount=i.reduce((function(e,t){return e+=t}),0)+w;var E=new io.a({extent:t,minZoom:a,origin:o,resolutions:r,tileSizes:n});this.tileGrid=E,this.setLoader(this.loadTile_.bind(this)),this.setState(tt.a.READY),this.viewResolver({projection:this.projection,resolutions:r,center:Object(y.B)(Object(ce.C)(t),this.projection),extent:Object(y.C)(t,this.projection),zoom:0})},t.prototype.loadTile_=function(e,t,o){for(var n=Object(we.d)(this.tileGrid.getTileSize(e)),r=this.sourceImagery_.length,i=new Array(r),s=this.addAlpha_,a=this.bandCount,l=this.samplesPerPixel_,c=this.nodataValues_,u=this.sourceInfo_,d=function(r){var s=u[r],a=h.resolutionFactors_[r],l=[Math.round(t*(n[0]*a)),Math.round(o*(n[1]*a)),Math.round((t+1)*(n[0]*a)),Math.round((o+1)*(n[1]*a))],d=h.sourceImagery_[r][e],p=void 0;s.bands&&(p=s.bands.map((function(e){return e-1})));var f=void 0;f=isNaN(s.nodata)?p?p.map((function(e){return c[r][e]})):c[r]:s.nodata,i[r]=d[h.readMethod_]({window:l,width:n[0],height:n[1],samples:p,fillValue:f,pool:mi(),interleave:!1})},h=this,p=0;p<r;++p)d(p);var f=n[0]*n[1],m=f*a,g=this.normalize_;return Promise.all(i).then((function(e){var t;t=g?new Uint8Array(m):new Float32Array(m);for(var o,n=0,i=0;i<f;++i){for(var a=s,d=0;d<r;++d){var h=u[d],p=h.min,y=h.max,_=void 0,b=void 0;g&&(void 0===p&&(p=(o=e[d][0])instanceof Int8Array?-128:o instanceof Int16Array?-32768:o instanceof Int32Array?-2147483648:o instanceof Float32Array?12e-39:0),void 0===y&&(y=Oi(e[d][0])),b=-p*(_=255/(y-p)));for(var w=0;w<l[d];++w){var E=e[d][w][i],O=void 0;if(O=g?Object(v.a)(_*E+b,0,255):E,s){var S=h.nodata;if(void 0===S){var x=void 0;x=h.bands?h.bands[w]-1:w,S=c[d][x]}E!==S&&(a=!1,t[n]=O)}else t[n]=O;n++}}s&&(a||(t[n]=255),n++)}return t}))},t}(No);Si.prototype.getView;var xi=Si,Ci=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),ji="default",Pi="truncated",Ti=function(e){function t(t,o,n,r,i,s,a){var l=e.call(this,o,n,r,i,s,a)||this;return l.zoomifyImage_=null,l.tileSize_=t,l}return Ci(t,e),t.prototype.getImage=function(){if(this.zoomifyImage_)return this.zoomifyImage_;var t=e.prototype.getImage.call(this);if(this.state==l.a.LOADED){var o=this.tileSize_;if(t.width==o[0]&&t.height==o[1])return this.zoomifyImage_=t,t;var n=Object(se.a)(o[0],o[1]);return n.drawImage(t,0,0),this.zoomifyImage_=n.canvas,n.canvas}return t},t}(N.a),Ai=function(e){function t(t){var o=this,n=t,r=n.size,i=void 0!==n.tierSizeCalculation?n.tierSizeCalculation:ji,s=n.tilePixelRatio||1,a=r[0],l=r[1],c=[],u=n.tileSize||ao.b,d=u*s;switch(i){case ji:for(;a>d||l>d;)c.push([Math.ceil(a/d),Math.ceil(l/d)]),d+=d;break;case Pi:for(var h=a,p=l;h>d||p>d;)c.push([Math.ceil(h/d),Math.ceil(p/d)]),h>>=1,p>>=1;break;default:Object($.a)(!1,53)}c.push([1,1]),c.reverse();for(var f=[s],m=[0],g=1,y=c.length;g<y;g++)f.push(s<<g),m.push(c[g-1][0]*c[g-1][1]+m[g-1]);f.reverse();var v=new io.a({tileSize:u,extent:n.extent||[0,-l,a,0],resolutions:f}),_=n.url;_&&-1==_.indexOf("{TileGroup}")&&-1==_.indexOf("{tileIndex}")&&(_+="{TileGroup}/{z}-{x}-{y}.jpg");var b=Object(Ce.d)(_),w=u*s;var E=Object(Ce.c)(b.map((function(e){return function(t,o,n){if(t){var r=t[0],i=t[1],s=t[2],a=i+s*c[r][0],l={z:r,x:i,y:s,tileIndex:a,TileGroup:"TileGroup"+((a+m[r])/w|0)};return e.replace(/\{(\w+?)\}/g,(function(e,t){return l[t]}))}}}))),O=Ti.bind(null,Object(we.d)(u*s));(o=e.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,imageSmoothing:n.imageSmoothing,projection:n.projection,tilePixelRatio:s,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileClass:O,tileGrid:v,tileUrlFunction:E,transition:n.transition})||this).zDirection=n.zDirection;var S=E(v.getTileCoordForCoordAndResolution(Object(ce.C)(v.getExtent()),f[f.length-1]),1,null),x=new Image;return x.addEventListener("error",function(){w=u,this.changed()}.bind(o)),x.src=S,o}return Ci(t,e),t}(Eo.a),Mi=function(e,t){for(var o=0,n=t.length,r=e.length;o<n;o++,r++)e[r]=t[o];return e},Ii="version1",Ri="version2",Li="version3",ki={};ki[Ii]={level0:{supports:[],formats:[],qualities:["native"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["native"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["native","color","grey","bitonal"]}},ki[Ri]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByDistortedWh","sizeByWh"],formats:["jpg","png"],qualities:["default","bitonal"]}},ki[Li]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","regionSquare","sizeByW","sizeByH","sizeByWh"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionSquare","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["default"]}},ki.none={none:{supports:[],formats:[],qualities:[]}};var Gi=/^https?:\/\/library\.stanford\.edu\/iiif\/image-api\/(?:1\.1\/)?compliance\.html#level[0-2]$/,Ni=/^https?:\/\/iiif\.io\/api\/image\/2\/level[0-2](?:\.json)?$/,Di=/(^https?:\/\/iiif\.io\/api\/image\/3\/level[0-2](?:\.json)?$)|(^level[0-2]$)/;var Fi={};Fi[Ii]=function(e){var t=e.getComplianceLevelSupportedFeatures();return void 0===t&&(t=ki[Ii].level0),{url:void 0===e.imageInfo["@id"]?void 0:e.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),supports:t.supports,formats:Mi(Mi([],t.formats),[void 0===e.imageInfo.formats?[]:e.imageInfo.formats]),qualities:Mi(Mi([],t.qualities),[void 0===e.imageInfo.qualities?[]:e.imageInfo.qualities]),resolutions:e.imageInfo.scale_factors,tileSize:void 0!==e.imageInfo.tile_width?void 0!==e.imageInfo.tile_height?[e.imageInfo.tile_width,e.imageInfo.tile_height]:[e.imageInfo.tile_width,e.imageInfo.tile_width]:null!=e.imageInfo.tile_height?[e.imageInfo.tile_height,e.imageInfo.tile_height]:void 0}},Fi[Ri]=function(e){var t=e.getComplianceLevelSupportedFeatures(),o=Array.isArray(e.imageInfo.profile)&&e.imageInfo.profile.length>1,n=o&&e.imageInfo.profile[1].supports?e.imageInfo.profile[1].supports:[],r=o&&e.imageInfo.profile[1].formats?e.imageInfo.profile[1].formats:[],i=o&&e.imageInfo.profile[1].qualities?e.imageInfo.profile[1].qualities:[];return{url:e.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),sizes:void 0===e.imageInfo.sizes?void 0:e.imageInfo.sizes.map((function(e){return[e.width,e.height]})),tileSize:void 0===e.imageInfo.tiles?void 0:[e.imageInfo.tiles.map((function(e){return e.width}))[0],e.imageInfo.tiles.map((function(e){return void 0===e.height?e.width:e.height}))[0]],resolutions:void 0===e.imageInfo.tiles?void 0:e.imageInfo.tiles.map((function(e){return e.scaleFactors}))[0],supports:Mi(Mi([],t.supports),n),formats:Mi(Mi([],t.formats),r),qualities:Mi(Mi([],t.qualities),i)}},Fi[Li]=function(e){var t=e.getComplianceLevelSupportedFeatures(),o=void 0===e.imageInfo.extraFormats?t.formats:Mi(Mi([],t.formats),e.imageInfo.extraFormats),n=void 0!==e.imageInfo.preferredFormats&&Array.isArray(e.imageInfo.preferredFormats)&&e.imageInfo.preferredFormats.length>0?e.imageInfo.preferredFormats.filter((function(e){return Object(Q.f)(["jpg","png","gif"],e)})).reduce((function(e,t){return void 0===e&&Object(Q.f)(o,t)?t:e}),void 0):void 0;return{url:e.imageInfo.id,sizes:void 0===e.imageInfo.sizes?void 0:e.imageInfo.sizes.map((function(e){return[e.width,e.height]})),tileSize:void 0===e.imageInfo.tiles?void 0:[e.imageInfo.tiles.map((function(e){return e.width}))[0],e.imageInfo.tiles.map((function(e){return e.height}))[0]],resolutions:void 0===e.imageInfo.tiles?void 0:e.imageInfo.tiles.map((function(e){return e.scaleFactors}))[0],supports:void 0===e.imageInfo.extraFeatures?t.supports:Mi(Mi([],t.supports),e.imageInfo.extraFeatures),formats:o,qualities:void 0===e.imageInfo.extraQualities?t.qualities:Mi(Mi([],t.qualities),e.imageInfo.extraQualities),preferredFormat:n}};var Ui=function(){function e(e){this.setImageInfo(e)}return e.prototype.setImageInfo=function(e){this.imageInfo="string"==typeof e?JSON.parse(e):e},e.prototype.getImageApiVersion=function(){if(void 0!==this.imageInfo){var e=this.imageInfo["@context"]||"ol-no-context";"string"==typeof e&&(e=[e]);for(var t=0;t<e.length;t++)switch(e[t]){case"http://library.stanford.edu/iiif/image-api/1.1/context.json":case"http://iiif.io/api/image/1/context.json":return Ii;case"http://iiif.io/api/image/2/context.json":return Ri;case"http://iiif.io/api/image/3/context.json":return Li;case"ol-no-context":if(this.getComplianceLevelEntryFromProfile(Ii)&&this.imageInfo.identifier)return Ii}Object($.a)(!1,61)}},e.prototype.getComplianceLevelEntryFromProfile=function(e){if(void 0!==this.imageInfo&&void 0!==this.imageInfo.profile)switch(void 0===e&&(e=this.getImageApiVersion()),e){case Ii:if(Gi.test(this.imageInfo.profile))return this.imageInfo.profile;break;case Li:if(Di.test(this.imageInfo.profile))return this.imageInfo.profile;break;case Ri:if("string"==typeof this.imageInfo.profile&&Ni.test(this.imageInfo.profile))return this.imageInfo.profile;if(Array.isArray(this.imageInfo.profile)&&this.imageInfo.profile.length>0&&"string"==typeof this.imageInfo.profile[0]&&Ni.test(this.imageInfo.profile[0]))return this.imageInfo.profile[0]}},e.prototype.getComplianceLevelFromProfile=function(e){var t=this.getComplianceLevelEntryFromProfile(e);if(void 0!==t){var o=t.match(/level[0-2](?:\.json)?$/g);return Array.isArray(o)?o[0].replace(".json",""):void 0}},e.prototype.getComplianceLevelSupportedFeatures=function(){if(void 0!==this.imageInfo){var e=this.getImageApiVersion(),t=this.getComplianceLevelFromProfile(e);return void 0===t?ki.none.none:ki[e][t]}},e.prototype.getTileSourceOptions=function(e){var t=e||{},o=this.getImageApiVersion();if(void 0!==o){var n=void 0===o?void 0:Fi[o](this);if(void 0!==n)return{url:n.url,version:o,size:[this.imageInfo.width,this.imageInfo.height],sizes:n.sizes,format:void 0!==t.format&&Object(Q.f)(n.formats,t.format)?t.format:void 0!==n.preferredFormat?n.preferredFormat:"jpg",supports:n.supports,quality:t.quality&&Object(Q.f)(n.qualities,t.quality)?t.quality:Object(Q.f)(n.qualities,"native")?"native":"default",resolutions:Array.isArray(n.resolutions)?n.resolutions.sort((function(e,t){return t-e})):void 0,tileSize:n.tileSize}}},e}(),Bi=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();function zi(e){return e.toLocaleString("en",{maximumFractionDigits:10})}var Vi=function(e){function t(t){var o=this,n=t||{},r=n.url||"";r+=r.lastIndexOf("/")===r.length-1||""===r?"":"/";var i=n.version||Ri,s=n.sizes||[],a=n.size;Object($.a)(null!=a&&Array.isArray(a)&&2==a.length&&!isNaN(a[0])&&a[0]>0&&!isNaN(a[1])&&a[1]>0,60);var l,c,u,d=a[0],h=a[1],p=n.tileSize,f=n.tilePixelRatio||1,m=n.format||"jpg",g=n.quality||(n.version==Ii?"native":"default"),y=n.resolutions||[],v=n.supports||[],_=n.extent||[0,-h,d,0],b=null!=s&&Array.isArray(s)&&s.length>0,w=void 0!==p&&("number"==typeof p&&Number.isInteger(p)&&p>0||Array.isArray(p)&&p.length>0),E=null!=v&&Array.isArray(v)&&(Object(Q.f)(v,"regionByPx")||Object(Q.f)(v,"regionByPct"))&&(Object(Q.f)(v,"sizeByWh")||Object(Q.f)(v,"sizeByH")||Object(Q.f)(v,"sizeByW")||Object(Q.f)(v,"sizeByPct"));if(y.sort((function(e,t){return t-e})),w||E)if(null!=p&&("number"==typeof p&&Number.isInteger(p)&&p>0?(l=p,c=p):Array.isArray(p)&&p.length>0&&((1==p.length||null==p[1]&&Number.isInteger(p[0]))&&(l=p[0],c=p[0]),2==p.length&&(Number.isInteger(p[0])&&Number.isInteger(p[1])?(l=p[0],c=p[1]):null==p[0]&&Number.isInteger(p[1])&&(l=p[1],c=p[1])))),void 0!==l&&void 0!==c||(l=ao.b,c=ao.b),0==y.length)for(var O=u=Math.max(Math.ceil(Math.log(d/l)/Math.LN2),Math.ceil(Math.log(h/c)/Math.LN2));O>=0;O--)y.push(Math.pow(2,O));else{var S=Math.max.apply(Math,y);u=Math.round(Math.log(S)/Math.LN2)}else if(l=d,c=h,y=[],b){s.sort((function(e,t){return e[0]-t[0]})),u=-1;var x=[];for(O=0;O<s.length;O++){var C=d/s[O][0];y.length>0&&y[y.length-1]==C?x.push(O):(y.push(C),u++)}if(x.length>0)for(O=0;O<x.length;O++)s.splice(x[O]-O,1)}else y.push(1),s.push([d,h]),u=0;var j=new io.a({tileSize:[l,c],extent:_,origin:Object(ce.L)(_),resolutions:y}),P=Ti.bind(null,Object(we.d)(p||256).map((function(e){return e*f})));return(o=e.call(this,{attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,imageSmoothing:n.imageSmoothing,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,state:n.state,tileClass:P,tileGrid:j,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:function(e,t,o){var n,a,p=e[0];if(!(p>u)){var f=e[1],_=e[2],O=y[p];if(!(void 0===f||void 0===_||void 0===O||f<0||Math.ceil(d/O/l)<=f||_<0||Math.ceil(h/O/c)<=_)){if(E||w){var S=f*l*O,x=_*c*O,C=l*O,j=c*O,P=l,T=c;if(S+C>d&&(C=d-S),x+j>h&&(j=h-x),S+l*O>d&&(P=Math.floor((d-S+O-1)/O)),x+c*O>h&&(T=Math.floor((h-x+O-1)/O)),0==S&&C==d&&0==x&&j==h)n="full";else if(!E||Object(Q.f)(v,"regionByPx"))n=S+","+x+","+C+","+j;else if(Object(Q.f)(v,"regionByPct")){n="pct:"+zi(S/d*100)+","+zi(x/h*100)+","+zi(C/d*100)+","+zi(j/h*100)}i!=Li||E&&!Object(Q.f)(v,"sizeByWh")?!E||Object(Q.f)(v,"sizeByW")?a=P+",":Object(Q.f)(v,"sizeByH")?a=","+T:Object(Q.f)(v,"sizeByWh")?a=P+","+T:Object(Q.f)(v,"sizeByPct")&&(a="pct:"+zi(100/O)):a=P+","+T}else if(n="full",b){var A=s[p][0],M=s[p][1];a=i==Li?A==d&&M==h?"max":A+","+M:A==d?"full":A+","}else a=i==Li?"max":"full";return r+n+"/"+a+"/0/"+g+"."+m}}},transition:n.transition})||this).zDirection=n.zDirection,o}return Bi(t,e),t}(Eo.a),Wi=o("./node_modules/ol/source/Image.js"),qi=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Hi=function(e){function t(t){var o=this,n=t||{};return(o=e.call(this,{attributions:n.attributions,imageSmoothing:n.imageSmoothing,projection:n.projection,resolutions:n.resolutions})||this).crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null,o.hidpi_=void 0===n.hidpi||n.hidpi,o.url_=n.url,o.imageLoadFunction_=void 0!==n.imageLoadFunction?n.imageLoadFunction:Wi.c,o.params_=n.params||{},o.image_=null,o.imageSize_=[0,0],o.renderedRevision_=0,o.ratio_=void 0!==n.ratio?n.ratio:1.5,o}return qi(t,e),t.prototype.getParams=function(){return this.params_},t.prototype.getImageInternal=function(e,t,o,n){if(void 0===this.url_)return null;t=this.findNearestResolution(t),o=this.hidpi_?o:1;var r=this.image_;if(r&&this.renderedRevision_==this.getRevision()&&r.getResolution()==t&&r.getPixelRatio()==o&&Object(ce.h)(r.getExtent(),e))return r;var i={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object(ge.a)(i,this.params_);var s=((e=e.slice())[0]+e[2])/2,a=(e[1]+e[3])/2;if(1!=this.ratio_){var l=this.ratio_*Object(ce.N)(e)/2,c=this.ratio_*Object(ce.G)(e)/2;e[0]=s-l,e[1]=a-c,e[2]=s+l,e[3]=a+c}var u=t/o,d=Math.ceil(Object(ce.N)(e)/u),h=Math.ceil(Object(ce.G)(e)/u);e[0]=s-u*d/2,e[2]=s+u*d/2,e[1]=a-u*h/2,e[3]=a+u*h/2,this.imageSize_[0]=d,this.imageSize_[1]=h;var p=this.getRequestUrl_(e,this.imageSize_,o,n,i);return this.image_=new I.a(e,t,o,p,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener(m.a.CHANGE,this.handleImageChange.bind(this)),this.image_},t.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},t.prototype.getRequestUrl_=function(e,t,o,n,r){var i=n.getCode().split(/:(?=\d+$)/).pop();r.SIZE=t[0]+","+t[1],r.BBOX=e.join(","),r.BBOXSR=i,r.IMAGESR=i,r.DPI=Math.round(90*o);var s=this.url_,a=s.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return a==s&&Object($.a)(!1,50),Object(Pe.a)(a,r)},t.prototype.getUrl=function(){return this.url_},t.prototype.setImageLoadFunction=function(e){this.image_=null,this.imageLoadFunction_=e,this.changed()},t.prototype.setUrl=function(e){e!=this.url_&&(this.url_=e,this.image_=null,this.changed())},t.prototype.updateParams=function(e){Object(ge.a)(this.params_,e),this.image_=null,this.changed()},t}(Wi.b),Yi=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Xi=function(e){function t(t){var o=this,n=t||{};return(o=e.call(this,{attributions:n.attributions,imageSmoothing:n.imageSmoothing,projection:n.projection,resolutions:n.resolutions,state:n.state})||this).canvasFunction_=n.canvasFunction,o.canvas_=null,o.renderedRevision_=0,o.ratio_=void 0!==n.ratio?n.ratio:1.5,o}return Yi(t,e),t.prototype.getImageInternal=function(e,t,o,n){t=this.findNearestResolution(t);var r=this.canvas_;if(r&&this.renderedRevision_==this.getRevision()&&r.getResolution()==t&&r.getPixelRatio()==o&&Object(ce.h)(r.getExtent(),e))return r;e=e.slice(),Object(ce.S)(e,this.ratio_);var i=[Object(ce.N)(e)/t*o,Object(ce.G)(e)/t*o],s=this.canvasFunction_.call(this,e,t,o,i,n);return s&&(r=new G(e,t,o,s)),this.canvas_=r,this.renderedRevision_=this.getRevision(),r},t}(Wi.b),Zi=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();var Ki=function(e){function t(t){var o=e.call(this,{imageSmoothing:t.imageSmoothing,projection:t.projection,resolutions:t.resolutions})||this;return o.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null,o.displayDpi_=void 0!==t.displayDpi?t.displayDpi:96,o.params_=t.params||{},o.url_=t.url,o.imageLoadFunction_=void 0!==t.imageLoadFunction?t.imageLoadFunction:Wi.c,o.hidpi_=void 0===t.hidpi||t.hidpi,o.metersPerUnit_=void 0!==t.metersPerUnit?t.metersPerUnit:1,o.ratio_=void 0!==t.ratio?t.ratio:1,o.useOverlay_=void 0!==t.useOverlay&&t.useOverlay,o.image_=null,o.renderedRevision_=0,o}return Zi(t,e),t.prototype.getParams=function(){return this.params_},t.prototype.getImageInternal=function(e,t,o,n){t=this.findNearestResolution(t),o=this.hidpi_?o:1;var r=this.image_;if(r&&this.renderedRevision_==this.getRevision()&&r.getResolution()==t&&r.getPixelRatio()==o&&Object(ce.h)(r.getExtent(),e))return r;1!=this.ratio_&&(e=e.slice(),Object(ce.S)(e,this.ratio_));var i=[Object(ce.N)(e)/t*o,Object(ce.G)(e)/t*o];if(void 0!==this.url_){var s=this.getUrl(this.url_,this.params_,e,i,n);(r=new I.a(e,t,o,s,this.crossOrigin_,this.imageLoadFunction_)).addEventListener(m.a.CHANGE,this.handleImageChange.bind(this))}else r=null;return this.image_=r,this.renderedRevision_=this.getRevision(),r},t.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},t.prototype.updateParams=function(e){Object(ge.a)(this.params_,e),this.changed()},t.prototype.getUrl=function(e,t,o,n,r){var i=function(e,t,o,n){var r=Object(ce.N)(e),i=Object(ce.G)(e),s=t[0],a=t[1],l=.0254/n;return a*r>s*i?r*o/(s*l):i*o/(a*l)}(o,n,this.metersPerUnit_,this.displayDpi_),s=Object(ce.C)(o),a={OPERATION:this.useOverlay_?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:this.displayDpi_,SETDISPLAYWIDTH:Math.round(n[0]),SETDISPLAYHEIGHT:Math.round(n[1]),SETVIEWSCALE:i,SETVIEWCENTERX:s[0],SETVIEWCENTERY:s[1]};return Object(ge.a)(a,t),Object(Pe.a)(e,a)},t.prototype.setImageLoadFunction=function(e){this.image_=null,this.imageLoadFunction_=e,this.changed()},t}(Wi.b),Ji=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Qi=function(e){function t(t){var o=this,n=void 0!==t.crossOrigin?t.crossOrigin:null,r=void 0!==t.imageLoadFunction?t.imageLoadFunction:Wi.c;return(o=e.call(this,{attributions:t.attributions,imageSmoothing:t.imageSmoothing,projection:Object(y.t)(t.projection)})||this).url_=t.url,o.imageExtent_=t.imageExtent,o.image_=new I.a(o.imageExtent_,void 0,1,o.url_,n,r),o.imageSize_=t.imageSize?t.imageSize:null,o.image_.addEventListener(m.a.CHANGE,o.handleImageChange.bind(o)),o}return Ji(t,e),t.prototype.getImageExtent=function(){return this.imageExtent_},t.prototype.getImageInternal=function(e,t,o,n){return Object(ce.O)(e,this.image_.getExtent())?this.image_:null},t.prototype.getUrl=function(){return this.url_},t.prototype.handleImageChange=function(t){if(this.image_.getState()==L.a.LOADED){var o=this.image_.getExtent(),n=this.image_.getImage(),r=void 0,i=void 0;this.imageSize_?(r=this.imageSize_[0],i=this.imageSize_[1]):(r=n.width,i=n.height);var s=Object(ce.N)(o),a=Object(ce.G)(o),l=s/r,c=a/i,u=r,d=i;if(l>c?u=Math.round(s/c):d=Math.round(a/l),u!==r||d!==i){var h=Object(se.a)(u,d);Object(ge.a)(h,this.getContextOptions());var p=h.canvas;h.drawImage(n,0,0,r,i,0,0,p.width,p.height),this.image_.setImage(p)}}e.prototype.handleImageChange.call(this,t)},t}(Wi.b),$i=o("./node_modules/ol/source/ImageWMS.js"),es={"image/png":!0,"image/jpeg":!0,"image/gif":!0,"image/webp":!0},ts={"application/vnd.mapbox-vector-tile":!0,"application/geo+json":!0};function os(e,t){for(var o,n,r=0;r<e.length;++r){var i=e[r];if("item"===i.rel){if(i.type===t){o=i.href;break}es[i.type]?n=i.href:n||0!==i.type.indexOf("image/")||(n=i.href)}}if(!o){if(!n)throw new Error('Could not find "item" link');o=n}return o}function ns(e,t,o){for(var n,r,i={},s=0;s<e.length;++s){var a=e[s];if(i[a.type]=a.href,"item"===a.rel){if(a.type===t){n=a.href;break}ts[a.type]&&(r=a.href)}}if(!n&&o)for(s=0;s<o.length;++s){var l=o[s];if(i[l]){n=i[l];break}}if(!n){if(!r)throw new Error('Could not find "item" link');n=r}return n}function rs(e,t,o,n){var r=e.projection;if(!r&&!(r=Object(y.t)(t.crs)))throw new Error("Unsupported CRS: "+t.crs);for(var i="en"!==r.getAxisOrientation().substr(0,2),s=t.tileMatrices,a={},l=0;l<s.length;++l){var c=s[l];a[c.id]=c}var u={},d=[];if(n)for(l=0;l<n.length;++l){var h=(b=n[l]).tileMatrix;d.push(h),u[h]=b}else for(l=0;l<s.length;++l){h=s[l].id;d.push(h)}var p=d.length,f=new Array(p),m=new Array(p),g=new Array(p),v=new Array(p),_=[-1/0,-1/0,1/0,1/0];for(l=0;l<p;++l){h=d[l];var b,w=(c=a[h]).pointOfOrigin;if(f[l]=i?[w[1],w[0]]:w,m[l]=c.cellSize,g[l]=[c.matrixWidth,c.matrixHeight],v[l]=[c.tileWidth,c.tileHeight],b=u[h]){var E=c.cellSize*c.tileWidth,O=f[l][0]+b.minTileCol*E,S=f[l][0]+(b.maxTileCol+1)*E,x=c.cellSize*c.tileHeight,C=void 0,j=void 0;"bottomLeft"===c.cornerOfOrigin?(C=f[l][1]+b.minTileRow*x,j=f[l][1]+(b.maxTileRow+1)*x):(C=f[l][1]-(b.maxTileRow+1)*x,j=f[l][1]-b.minTileRow*x),Object(ce.H)(_,[O,C,S,j],_)}}var P=new io.a({origins:f,resolutions:m,sizes:g,tileSizes:v,extent:n?_:void 0}),T=e.context,A=e.url;return{grid:P,urlTemplate:o,urlFunction:function(e,t,r){if(e){var i=d[e[0]],s=a[i],l="bottomLeft"===s.cornerOfOrigin,c={tileMatrix:i,tileCol:e[1],tileRow:l?-e[2]-1:e[2]};if(n){var h=u[s.id];if(c.tileCol<h.minTileCol||c.tileCol>h.maxTileCol||c.tileRow<h.minTileRow||c.tileRow>h.maxTileRow)return}Object(ge.a)(c,T);var p=o.replace(/\{(\w+?)\}/g,(function(e,t){return c[t]}));return Object(me.f)(A,p)}}}}function is(e){return Object(me.c)(e.url).then((function(t){return function(e,t){var o,n=t.tileMatrixSetLimits;if("map"===t.dataType)o=os(t.links,e.mediaType);else{if("vector"!==t.dataType)throw new Error('Expected tileset data type to be "map" or "vector"');o=ns(t.links,e.mediaType,e.supportedMediaTypes)}if(t.tileMatrixSet)return rs(e,t.tileMatrixSet,o,n);if(!t.tileMatrixSetDefinition)throw new Error("Expected tileMatrixSetDefinition or tileMatrixSet");var r=Object(me.f)(e.url,t.tileMatrixSetDefinition);return Object(me.c)(r).then((function(t){return rs(e,t,o,n)}))}(e,t)}))}var ss,as=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),ls=function(e){function t(t){var o=e.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,imageSmoothing:t.imageSmoothing,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:tt.a.LOADING,tileLoadFunction:t.tileLoadFunction,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition})||this;return is({url:t.url,projection:o.getProjection(),mediaType:t.mediaType,context:t.context||null}).then(o.handleTileSetInfo_.bind(o)).catch(o.handleError_.bind(o)),o}return as(t,e),t.prototype.handleTileSetInfo_=function(e){this.tileGrid=e.grid,this.setTileUrlFunction(e.urlFunction,e.urlTemplate),this.setState(tt.a.READY)},t.prototype.handleError_=function(e){console.error(e),this.setState(tt.a.ERROR)},t}(Eo.a),cs=o("./node_modules/ol/source/VectorTile.js"),us=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),ds=function(e){function t(t){var o=e.call(this,{attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,format:t.format,overlaps:t.overlaps,projection:t.projection,tileClass:t.tileClass,transition:t.transition,wrapX:t.wrapX,zDirection:t.zDirection,state:tt.a.LOADING})||this;return is({url:t.url,projection:o.getProjection(),mediaType:t.mediaType,supportedMediaTypes:t.format.supportedMediaTypes,context:t.context||null}).then(o.handleTileSetInfo_.bind(o)).catch(o.handleError_.bind(o)),o}return us(t,e),t.prototype.handleTileSetInfo_=function(e){this.tileGrid=e.grid,this.setTileUrlFunction(e.urlFunction,e.urlTemplate),this.setState(tt.a.READY)},t.prototype.handleError_=function(e){console.error(e),this.setState(tt.a.ERROR)},t}(cs.a),hs=o("./node_modules/ol/source/OSM.js"),ps=o("./node_modules/ol/layer/Image.js"),fs=o("./node_modules/ol/source/Source.js"),ms=o("./node_modules/ol/layer/Tile.js"),gs=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),ys=!0;try{new ImageData(10,10)}catch(e){ys=!1}function vs(e,t,o){if(ys)return new ImageData(e,t,o);ss||(ss=document.createElement("canvas").getContext("2d"));var n=ss.createImageData(t,o);return n.data.set(e),n}function _s(e){var t=!0;try{new ImageData(10,10)}catch(e){t=!1}function o(e,o,n){return t?new ImageData(e,o,n):{data:e,width:o,height:n}}return function(t){var n=t.buffers,r=t.meta,i=t.imageOps,s=t.width,a=t.height,l=n.length,c=n[0].byteLength;if(i){for(var u=new Array(l),d=0;d<l;++d)u[d]=o(new Uint8ClampedArray(n[d]),s,a);return e(u,r).data.buffer}var h=new Uint8ClampedArray(c),p=new Array(l),f=new Array(l);for(d=0;d<l;++d)p[d]=new Uint8ClampedArray(n[d]),f[d]=[0,0,0,0];for(var m=0;m<c;m+=4){for(var g=0;g<l;++g){var y=p[g];f[g][0]=y[m],f[g][1]=y[m+1],f[g][2]=y[m+2],f[g][3]=y[m+3]}var v=e(f,r);h[m]=v[0],h[m+1]=v[1],h[m+2]=v[2],h[m+3]=v[3]}return h.buffer}}function bs(e,t){var o=Object.keys(e.lib||{}).map((function(t){return"var "+t+" = "+e.lib[t].toString()+";"})).concat(["var __minion__ = ("+_s.toString()+")(",e.operation.toString(),");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),n=new Blob(o,{type:"text/javascript"}),r=URL.createObjectURL(n),i=new Worker(r);return i.addEventListener("message",t),i}var ws=function(e){function t(t){var o,n=e.call(this)||this;n._imageOps=!!t.imageOps,o=0===t.threads?0:n._imageOps?1:t.threads||1;var r=new Array(o);if(o)for(var i=0;i<o;++i)r[i]=bs(t,n._onWorkerMessage.bind(n,i));else r[0]=function(e,t){var o=_s(e.operation),n=!1;return{postMessage:function(e){setTimeout((function(){n||t({data:{buffer:o(e),meta:e.meta}})}),0)},terminate:function(){n=!0}}}(t,n._onWorkerMessage.bind(n,0));return n._workers=r,n._queue=[],n._maxQueueLength=t.queue||1/0,n._running=0,n._dataLookup={},n._job=null,n}return gs(t,e),t.prototype.process=function(e,t,o){this._enqueue({inputs:e,meta:t,callback:o}),this._dispatch()},t.prototype._enqueue=function(e){for(this._queue.push(e);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)},t.prototype._dispatch=function(){if(!this._running&&0!==this._queue.length){var e=this._queue.shift();this._job=e;var t=e.inputs[0].width,o=e.inputs[0].height,n=e.inputs.map((function(e){return e.data.buffer})),r=this._workers.length;if(this._running=r,1!==r)for(var i=e.inputs[0].data.length,s=4*Math.ceil(i/4/r),a=0;a<r;++a){for(var l=a*s,c=[],u=0,d=n.length;u<d;++u)c.push(n[u].slice(l,l+s));this._workers[a].postMessage({buffers:c,meta:e.meta,imageOps:this._imageOps,width:t,height:o},c)}else this._workers[0].postMessage({buffers:n,meta:e.meta,imageOps:this._imageOps,width:t,height:o},n)}},t.prototype._onWorkerMessage=function(e,t){this.disposed||(this._dataLookup[e]=t.data,--this._running,0===this._running&&this._resolveJob())},t.prototype._resolveJob=function(){var e,t,o=this._job,n=this._workers.length;if(1===n)e=new Uint8ClampedArray(this._dataLookup[0].buffer),t=this._dataLookup[0].meta;else{var r=o.inputs[0].data.length;e=new Uint8ClampedArray(r),t=new Array(n);for(var i=4*Math.ceil(r/4/n),s=0;s<n;++s){var a=this._dataLookup[s].buffer,l=s*i;e.set(new Uint8ClampedArray(a),l),t[s]=this._dataLookup[s].meta}}this._job=null,this._dataLookup={},o.callback(null,vs(e,o.inputs[0].width,o.inputs[0].height),t),this._dispatch()},t.prototype.disposeInternal=function(){for(var e=0;e<this._workers.length;++e)this._workers[e].terminate();this._workers.length=0},t}(d.a),Es="beforeoperations",Os="afteroperations",Ss="pixel",xs="image",Cs=function(e){function t(t,o,n){var r=e.call(this,t)||this;return r.extent=o.extent,r.resolution=o.viewState.resolution/o.pixelRatio,r.data=n,r}return gs(t,e),t}(p.a),js=function(e){function t(t){var o=e.call(this,{projection:null})||this;o.on,o.once,o.un,o.processor_=null,o.operationType_=void 0!==t.operationType?t.operationType:Ss,o.threads_=void 0!==t.threads?t.threads:1,o.layers_=function(e){for(var t=e.length,o=new Array(t),n=0;n<t;++n)o[n]=As(e[n]);return o}(t.sources);for(var n,r=o.changed.bind(o),i=0,s=o.layers_.length;i<s;++i)o.layers_[i].addEventListener(m.a.CHANGE,r);return o.tileQueue_=new Y.a((function(){return 1}),o.changed.bind(o)),o.requestedFrameState_,o.renderedImageCanvas_=null,o.renderedRevision_,o.frameState_={animate:!1,coordinateToPixelTransform:Object(je.d)(),declutterTree:null,extent:null,index:0,layerIndex:0,layerStatesArray:(n=o.layers_,n.map((function(e){return e.getLayerState()}))),pixelRatio:1,pixelToCoordinateTransform:Object(je.d)(),postRenderFunctions:[],size:[0,0],tileQueue:o.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{}},o.setAttributions((function(e){for(var o=[],n=0,r=t.sources.length;n<r;++n){var i=t.sources[n],s=(i instanceof fs.a?i:i.getSource()).getAttributions();if("function"==typeof s){var a=s(e);o.push.apply(o,a)}}return 0!==o.length?o:null})),void 0!==t.operation&&o.setOperation(t.operation,t.lib),o}return gs(t,e),t.prototype.setOperation=function(e,t){this.processor_&&this.processor_.dispose(),this.processor_=new ws({operation:e,imageOps:this.operationType_===xs,queue:1,lib:t,threads:this.threads_}),this.changed()},t.prototype.updateFrameState_=function(e,t,o){var n=Object(ge.a)({},this.frameState_);n.viewState=Object(ge.a)({},n.viewState);var r=Object(ce.C)(e);n.extent=e.slice(),n.size[0]=Math.round(Object(ce.N)(e)/t),n.size[1]=Math.round(Object(ce.G)(e)/t),n.time=Date.now();var i=n.viewState;return i.center=r,i.projection=o,i.resolution=t,n},t.prototype.allSourcesReady_=function(){for(var e=!0,t=0,o=this.layers_.length;t<o;++t)if(this.layers_[t].getSource().getState()!==tt.a.READY){e=!1;break}return e},t.prototype.getImage=function(e,t,o,n){if(!this.allSourcesReady_())return null;var r=this.updateFrameState_(e,t,n);if(this.requestedFrameState_=r,this.renderedImageCanvas_){var i=this.renderedImageCanvas_.getResolution(),s=this.renderedImageCanvas_.getExtent();t===i&&Object(ce.r)(e,s)||(this.renderedImageCanvas_=null)}return this.renderedImageCanvas_&&this.getRevision()===this.renderedRevision_||this.processSources_(),r.tileQueue.loadMoreTiles(16,16),r.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_},t.prototype.processSources_=function(){for(var e=this.requestedFrameState_,t=this.layers_.length,o=new Array(t),n=0;n<t;++n){e.layerIndex=n;var r=Ts(this.layers_[n],e);if(!r)return;o[n]=r}var i={};this.dispatchEvent(new Cs(Es,e,i)),this.processor_.process(o,i,this.onWorkerComplete_.bind(this,e))},t.prototype.onWorkerComplete_=function(e,t,o,n){if(!t&&o){var r=e.extent,i=e.viewState.resolution;if(i===this.requestedFrameState_.viewState.resolution&&Object(ce.r)(r,this.requestedFrameState_.extent)){var s;if(this.renderedImageCanvas_)s=this.renderedImageCanvas_.getImage().getContext("2d");else{var a=Math.round(Object(ce.N)(r)/i),l=Math.round(Object(ce.G)(r)/i);s=Object(se.a)(a,l),this.renderedImageCanvas_=new G(r,i,1,s.canvas)}s.putImageData(o,0,0),this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new Cs(Os,e,n)),e.animate&&requestAnimationFrame(this.changed.bind(this))}}},t.prototype.disposeInternal=function(){this.processor_&&this.processor_.dispose(),e.prototype.disposeInternal.call(this)},t}(Wi.b);js.prototype.dispose;var Ps=null;function Ts(e,t){var o=e.getRenderer();if(!o)throw new Error("Unsupported layer type: "+e);if(!o.prepareFrame(t))return null;var n=t.size[0],r=t.size[1];if(0===n||0===r)return null;var i,s=o.renderFrame(t,null);if(s&&(i=s.firstElementChild),!(i instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+i);if(i.width===n&&i.height===r)return i.getContext("2d").getImageData(0,0,n,r);if(Ps){var a=Ps.canvas;a.width!==n||a.height!==r?Ps=Object(se.a)(n,r):Ps.clearRect(0,0,n,r)}else Ps=Object(se.a)(n,r);return Ps.drawImage(i,0,0,n,r),Ps.getImageData(0,0,n,r)}function As(e){var t;return e instanceof fs.a?e instanceof ko.b?t=new ms.a({source:e}):e instanceof Wi.b&&(t=new ps.a({source:e})):t=e,t}var Ms=js,Is=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Rs=['Map tiles by <a href="https://stamen.com/" target="_blank">Stamen Design</a>, under <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC BY 3.0</a>.',hs.a],Ls={terrain:{extension:"jpg",opaque:!0},"terrain-background":{extension:"jpg",opaque:!0},"terrain-labels":{extension:"png",opaque:!1},"terrain-lines":{extension:"png",opaque:!1},"toner-background":{extension:"png",opaque:!0},toner:{extension:"png",opaque:!0},"toner-hybrid":{extension:"png",opaque:!1},"toner-labels":{extension:"png",opaque:!1},"toner-lines":{extension:"png",opaque:!1},"toner-lite":{extension:"png",opaque:!0},watercolor:{extension:"jpg",opaque:!0}},ks={terrain:{minZoom:0,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:0,maxZoom:18}},Gs=function(e){function t(t){var o=t.layer.indexOf("-"),n=-1==o?t.layer:t.layer.slice(0,o),r=ks[n],i=Ls[t.layer],s=void 0!==t.url?t.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+t.layer+"/{z}/{x}/{y}."+i.extension;return e.call(this,{attributions:Rs,cacheSize:t.cacheSize,crossOrigin:"anonymous",imageSmoothing:t.imageSmoothing,maxZoom:null!=t.maxZoom?t.maxZoom:r.maxZoom,minZoom:null!=t.minZoom?t.minZoom:r.minZoom,opaque:i.opaque,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:s,wrapX:t.wrapX,zDirection:t.zDirection})||this}return Is(t,e),t}(Co.a),Ns=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Ds=function(e){function t(t){var o=this,n=t||{};return(o=e.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,imageSmoothing:n.imageSmoothing,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileGrid:n.tileGrid,tileLoadFunction:n.tileLoadFunction,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition,zDirection:n.zDirection})||this).params_=n.params||{},o.hidpi_=void 0===n.hidpi||n.hidpi,o.tmpExtent_=Object(ce.k)(),o.setKey(o.getKeyForParams_()),o}return Ns(t,e),t.prototype.getKeyForParams_=function(){var e=0,t=[];for(var o in this.params_)t[e++]=o+"-"+this.params_[o];return t.join("/")},t.prototype.getParams=function(){return this.params_},t.prototype.getRequestUrl_=function(e,t,o,n,r,i){var s=this.urls;if(s){var a,l=r.getCode().split(/:(?=\d+$)/).pop();if(i.SIZE=t[0]+","+t[1],i.BBOX=o.join(","),i.BBOXSR=l,i.IMAGESR=l,i.DPI=Math.round(i.DPI?i.DPI*n:90*n),1==s.length)a=s[0];else a=s[Object(v.e)(Object(Se.f)(e),s.length)];var c=a.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return Object(Pe.a)(c,i)}},t.prototype.getTilePixelRatio=function(e){return this.hidpi_?e:1},t.prototype.updateParams=function(e){Object(ge.a)(this.params_,e),this.setKey(this.getKeyForParams_())},t.prototype.tileUrlFunction=function(e,t,o){var n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(o)),!(n.getResolutions().length<=e[0])){1==t||this.hidpi_||(t=1);var r=n.getTileCoordExtent(e,this.tmpExtent_),i=Object(we.d)(n.getTileSize(e[0]),this.tmpSize);1!=t&&(i=Object(we.c)(i,t,this.tmpSize));var s={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return Object(ge.a)(s,this.params_),this.getRequestUrl_(e,i,r,t,o,s)}},t}(Eo.a),Fs=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Us=function(e){function t(t){var o=this,n=t||{};return o=e.call(this,{opaque:!1,projection:n.projection,tileGrid:n.tileGrid,wrapX:void 0===n.wrapX||n.wrapX,zDirection:n.zDirection,url:n.template||"z:{z} x:{x} y:{y}",tileLoadFunction:function(e,t){var n=e.getTileCoord()[0],r=Object(we.d)(o.tileGrid.getTileSize(n)),i=Object(se.a)(r[0],r[1]);i.strokeStyle="grey",i.strokeRect(.5,.5,r[0]+.5,r[1]+.5),i.fillStyle="grey",i.strokeStyle="white",i.textAlign="center",i.textBaseline="middle",i.font="24px sans-serif",i.lineWidth=4,i.strokeText(t,r[0]/2,r[1]/2,r[0]),i.fillText(t,r[0]/2,r[1]/2,r[0]),e.setImage(i.canvas)}})||this}return Fs(t,e),t}(Co.a),Bs=o("./node_modules/ol/source/TileJSON.js"),zs=o("./node_modules/ol/source/TileWMS.js"),Vs=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Ws=function(e){function t(t,o,n,r,i,s){var a=e.call(this,t,o)||this;return a.src_=n,a.extent_=r,a.preemptive_=i,a.grid_=null,a.keys_=null,a.data_=null,a.jsonp_=s,a}return Vs(t,e),t.prototype.getImage=function(){return null},t.prototype.getData=function(e){if(!this.grid_||!this.keys_)return null;var t=(e[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),o=(e[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),n=this.grid_[Math.floor((1-o)*this.grid_.length)];if("string"!=typeof n)return null;var r=n.charCodeAt(Math.floor(t*n.length));r>=93&&r--,r>=35&&r--;var i=null;if((r-=32)in this.keys_){var s=this.keys_[r];i=this.data_&&s in this.data_?this.data_[s]:s}return i},t.prototype.forDataAtCoordinate=function(e,t,o){this.state==l.a.EMPTY&&!0===o?(this.state=l.a.IDLE,Object(le.b)(this,m.a.CHANGE,(function(o){t(this.getData(e))}),this),this.loadInternal_()):!0===o?setTimeout(function(){t(this.getData(e))}.bind(this),0):t(this.getData(e))},t.prototype.getKey=function(){return this.src_},t.prototype.handleError_=function(){this.state=l.a.ERROR,this.changed()},t.prototype.handleLoad_=function(e){this.grid_=e.grid,this.keys_=e.keys,this.data_=e.data,this.state=l.a.LOADED,this.changed()},t.prototype.loadInternal_=function(){if(this.state==l.a.IDLE)if(this.state=l.a.LOADING,this.jsonp_)Object(me.d)(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this));else{var e=new XMLHttpRequest;e.addEventListener("load",this.onXHRLoad_.bind(this)),e.addEventListener("error",this.onXHRError_.bind(this)),e.open("GET",this.src_),e.send()}},t.prototype.onXHRLoad_=function(e){var t=e.target;if(!t.status||t.status>=200&&t.status<300){var o=void 0;try{o=JSON.parse(t.responseText)}catch(e){return void this.handleError_()}this.handleLoad_(o)}else this.handleError_()},t.prototype.onXHRError_=function(e){this.handleError_()},t.prototype.load=function(){this.preemptive_?this.loadInternal_():this.setState(l.a.EMPTY)},t}(a.a),qs=function(e){function t(t){var o=e.call(this,{projection:Object(y.t)("EPSG:3857"),state:tt.a.LOADING,zDirection:t.zDirection})||this;if(o.preemptive_=void 0===t.preemptive||t.preemptive,o.tileUrlFunction_=Ce.e,o.template_=void 0,o.jsonp_=t.jsonp||!1,t.url)if(o.jsonp_)Object(me.d)(t.url,o.handleTileJSONResponse.bind(o),o.handleTileJSONError.bind(o));else{var n=new XMLHttpRequest;n.addEventListener("load",o.onXHRLoad_.bind(o)),n.addEventListener("error",o.onXHRError_.bind(o)),n.open("GET",t.url),n.send()}else t.tileJSON?o.handleTileJSONResponse(t.tileJSON):Object($.a)(!1,51);return o}return Vs(t,e),t.prototype.onXHRLoad_=function(e){var t=e.target;if(!t.status||t.status>=200&&t.status<300){var o=void 0;try{o=JSON.parse(t.responseText)}catch(e){return void this.handleTileJSONError()}this.handleTileJSONResponse(o)}else this.handleTileJSONError()},t.prototype.onXHRError_=function(e){this.handleTileJSONError()},t.prototype.getTemplate=function(){return this.template_},t.prototype.forDataAtCoordinateAndResolution=function(e,t,o,n){if(this.tileGrid){var r=this.tileGrid.getZForResolution(t,this.zDirection),i=this.tileGrid.getTileCoordForCoordAndZ(e,r);this.getTile(i[0],i[1],i[2],1,this.getProjection()).forDataAtCoordinate(e,o,n)}else!0===n?setTimeout((function(){o(null)}),0):o(null)},t.prototype.handleTileJSONError=function(){this.setState(tt.a.ERROR)},t.prototype.handleTileJSONResponse=function(e){var t,o=Object(y.t)("EPSG:4326"),n=this.getProjection();if(void 0!==e.bounds){var r=Object(y.w)(o,n);t=Object(ce.a)(e.bounds,r)}var i=Object(xe.d)(n),s=e.minzoom||0,a=e.maxzoom||22,l=Object(xe.c)({extent:i,maxZoom:a,minZoom:s});this.tileGrid=l,this.template_=e.template;var c=e.grids;if(c){if(this.tileUrlFunction_=Object(Ce.b)(c,l),void 0!==e.attribution){var u=void 0!==t?t:i;this.setAttributions((function(t){return Object(ce.O)(u,t.extent)?[e.attribution]:null}))}this.setState(tt.a.READY)}else this.setState(tt.a.ERROR)},t.prototype.getTile=function(e,t,o,n,r){var i=Object(Se.e)(e,t,o);if(this.tileCache.containsKey(i))return this.tileCache.get(i);var s=[e,t,o],a=this.getTileCoordForTileUrlFunction(s,r),c=this.tileUrlFunction_(a,n,r),u=new Ws(s,void 0!==c?l.a.IDLE:l.a.EMPTY,void 0!==c?c:"",this.tileGrid.getTileCoordExtent(s),this.preemptive_,this.jsonp_);return this.tileCache.set(i,u),u},t.prototype.useTile=function(e,t,o){var n=Object(Se.e)(e,t,o);this.tileCache.containsKey(n)&&this.tileCache.get(n)},t}(ko.b),Hs=o("./node_modules/ol/source/UrlTile.js"),Ys=o("./node_modules/ol/source/WMTS.js"),Xs=o("./node_modules/ol/source/common.js"),Zs=o("./node_modules/ol/reproj/Image.js"),Ks=o("./node_modules/ol/reproj/Tile.js"),Js=o("./node_modules/ol/reproj/Triangulation.js"),Qs=o("./node_modules/ol/reproj/common.js"),$s=o("./node_modules/ol/renderer/Composite.js"),ea=o("./node_modules/ol/renderer/Map.js"),ta=o("./node_modules/ol/renderer/vector.js"),oa=o("./node_modules/ol/layer/BaseVector.js"),na=o("./node_modules/ol/source/VectorEventType.js"),ra=o("./node_modules/ol/ViewHint.js"),ia=new Blob(['var e="function"==typeof Object.assign?Object.assign:function(e,n){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1,o=arguments.length;r<o;++r){var i=arguments[r];if(null!=i)for(var f in i)i.hasOwnProperty(f)&&(t[f]=i[f])}return t},n="GENERATE_BUFFERS",t=[],r={vertexPosition:0,indexPosition:0};function o(e,n,t,r,o){e[n+0]=t,e[n+1]=r,e[n+2]=o}function i(e,n,i,f,s,u){var a=3+s,l=e[n+0],v=e[n+1],c=t;c.length=s;for(var g=0;g<c.length;g++)c[g]=e[n+2+g];var b=u?u.vertexPosition:0,h=u?u.indexPosition:0,d=b/a;return o(i,b,l,v,0),c.length&&i.set(c,b+3),o(i,b+=a,l,v,1),c.length&&i.set(c,b+3),o(i,b+=a,l,v,2),c.length&&i.set(c,b+3),o(i,b+=a,l,v,3),c.length&&i.set(c,b+3),b+=a,f[h++]=d,f[h++]=d+1,f[h++]=d+3,f[h++]=d+1,f[h++]=d+2,f[h++]=d+3,r.vertexPosition=b,r.indexPosition=h,r}var f=self;f.onmessage=function(t){var r=t.data;if(r.type===n){for(var o=r.customAttributesCount,s=2+o,u=new Float32Array(r.renderInstructions),a=u.length/s,l=4*a*(o+3),v=new Uint32Array(6*a),c=new Float32Array(l),g=null,b=0;b<u.length;b+=s)g=i(u,b,c,v,o,g);var h=e({vertexBuffer:c.buffer,indexBuffer:v.buffer,renderInstructions:u.buffer},r);f.postMessage(h,[c.buffer,v.buffer,u.buffer])}};'],{type:"application/javascript"}),sa=URL.createObjectURL(ia);var aa=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),la=function(e){function t(t,o){var n=this,r=o.uniforms||{},i=Object(je.d)();r[ze]=i,(n=e.call(this,t,{className:o.className,uniforms:r,postProcesses:o.postProcesses})||this).sourceRevision_=-1,n.verticesBuffer_=new ke(34962,35048),n.hitVerticesBuffer_=new ke(34962,35048),n.indicesBuffer_=new ke(34963,35048),n.program_=n.helper.getProgram(o.fragmentShader,o.vertexShader),n.hitDetectionEnabled_=!(!o.hitFragmentShader||!o.hitVertexShader),n.hitProgram_=n.hitDetectionEnabled_&&n.helper.getProgram(o.hitFragmentShader,o.hitVertexShader);var s=o.attributes?o.attributes.map((function(e){return{name:"a_"+e.name,size:1,type:Xe.FLOAT}})):[];n.attributes=[{name:"a_position",size:2,type:Xe.FLOAT},{name:"a_index",size:1,type:Xe.FLOAT}].concat(s),n.hitDetectionAttributes=[{name:"a_position",size:2,type:Xe.FLOAT},{name:"a_index",size:1,type:Xe.FLOAT},{name:"a_hitColor",size:4,type:Xe.FLOAT},{name:"a_featureUid",size:1,type:Xe.FLOAT}].concat(s),n.customAttributes=o.attributes?o.attributes:[],n.previousExtent_=Object(ce.k)(),n.currentTransform_=i,n.renderTransform_=Object(je.d)(),n.invertRenderTransform_=Object(je.d)(),n.renderInstructions_=new Float32Array(0),n.hitRenderInstructions_=new Float32Array(0),n.hitRenderTarget_=n.hitDetectionEnabled_&&new $e(n.helper),n.worker_=new Worker(sa),n.worker_.addEventListener("message",function(e){var t=e.data;if(t.type===dt){var o=t.projectionTransform;t.hitDetection?(this.hitVerticesBuffer_.fromArrayBuffer(t.vertexBuffer),this.helper.flushBufferData(this.hitVerticesBuffer_)):(this.verticesBuffer_.fromArrayBuffer(t.vertexBuffer),this.helper.flushBufferData(this.verticesBuffer_)),this.indicesBuffer_.fromArrayBuffer(t.indexBuffer),this.helper.flushBufferData(this.indicesBuffer_),this.renderTransform_=o,Object(je.g)(this.invertRenderTransform_,this.renderTransform_),t.hitDetection?this.hitRenderInstructions_=new Float32Array(e.data.renderInstructions):this.renderInstructions_=new Float32Array(e.data.renderInstructions),this.getLayer().changed()}}.bind(n)),n.featureCache_={},n.featureCount_=0;var a=n.getLayer().getSource();return n.sourceListenKeys_=[Object(le.a)(a,na.a.ADDFEATURE,n.handleSourceFeatureAdded_,n),Object(le.a)(a,na.a.CHANGEFEATURE,n.handleSourceFeatureChanged_,n),Object(le.a)(a,na.a.REMOVEFEATURE,n.handleSourceFeatureDelete_,n),Object(le.a)(a,na.a.CLEAR,n.handleSourceFeatureClear_,n)],a.forEachFeature(function(e){this.featureCache_[Object(Te.c)(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()},this.featureCount_++}.bind(n)),n}return aa(t,e),t.prototype.handleSourceFeatureAdded_=function(e){var t=e.feature;this.featureCache_[Object(Te.c)(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()},this.featureCount_++},t.prototype.handleSourceFeatureChanged_=function(e){var t=e.feature;this.featureCache_[Object(Te.c)(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()}},t.prototype.handleSourceFeatureDelete_=function(e){var t=e.feature;delete this.featureCache_[Object(Te.c)(t)],this.featureCount_--},t.prototype.handleSourceFeatureClear_=function(){this.featureCache_={},this.featureCount_=0},t.prototype.renderFrame=function(e){this.preRender(e);var t=this.indicesBuffer_.getSize();this.helper.drawElements(0,t),this.helper.finalizeDraw(e);var o=this.helper.getCanvas(),n=e.layerStatesArray[e.layerIndex].opacity;return n!==parseFloat(o.style.opacity)&&(o.style.opacity=String(n)),this.hitDetectionEnabled_&&(this.renderHitDetection(e),this.hitRenderTarget_.clearCachedData()),this.postRender(e),o},t.prototype.prepareFrame=function(e){var t=this.getLayer(),o=t.getSource(),n=e.viewState,r=!e.viewHints[ra.a.ANIMATING]&&!e.viewHints[ra.a.INTERACTING],i=!Object(ce.r)(this.previousExtent_,e.extent),s=this.sourceRevision_<o.getRevision();if(s&&(this.sourceRevision_=o.getRevision()),r&&(i||s)){var a=n.projection,l=n.resolution,c=t instanceof oa.a?t.getRenderBuffer():0,u=Object(ce.d)(e.extent,c*l);o.loadFeatures(u,l,a),this.rebuildBuffers_(e),this.previousExtent_=e.extent.slice()}return this.helper.makeProjectionTransform(e,this.currentTransform_),Object(je.i)(this.currentTransform_,this.invertRenderTransform_),this.helper.useProgram(this.program_),this.helper.prepareDraw(e),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0},t.prototype.rebuildBuffers_=function(e){var t=Object(je.d)();this.helper.makeProjectionTransform(e,t);var o,n,r=(2+this.customAttributes.length)*this.featureCount_;if(this.renderInstructions_&&this.renderInstructions_.length===r||(this.renderInstructions_=new Float32Array(r)),this.hitDetectionEnabled_){var i=(7+this.customAttributes.length)*this.featureCount_;this.hitRenderInstructions_&&this.hitRenderInstructions_.length===i||(this.hitRenderInstructions_=new Float32Array(i))}var s,a=[],l=[],c=0,u=0;for(var d in this.featureCache_)if((n=(o=this.featureCache_[d]).geometry)&&n.getType()===To.a.POINT){a[0]=n.getFlatCoordinates()[0],a[1]=n.getFlatCoordinates()[1],Object(je.a)(t,a),s=gt(u+6,l),this.renderInstructions_[c++]=a[0],this.renderInstructions_[c++]=a[1],this.hitDetectionEnabled_&&(this.hitRenderInstructions_[u++]=a[0],this.hitRenderInstructions_[u++]=a[1],this.hitRenderInstructions_[u++]=s[0],this.hitRenderInstructions_[u++]=s[1],this.hitRenderInstructions_[u++]=s[2],this.hitRenderInstructions_[u++]=s[3],this.hitRenderInstructions_[u++]=Number(d));for(var h=void 0,p=0;p<this.customAttributes.length;p++)h=this.customAttributes[p].callback(o.feature,o.properties),this.renderInstructions_[c++]=h,this.hitDetectionEnabled_&&(this.hitRenderInstructions_[u++]=h)}var f={type:dt,renderInstructions:this.renderInstructions_.buffer,customAttributesCount:this.customAttributes.length};if(f.projectionTransform=t,this.worker_.postMessage(f,[this.renderInstructions_.buffer]),this.renderInstructions_=null,this.hitDetectionEnabled_){var m={type:dt,renderInstructions:this.hitRenderInstructions_.buffer,customAttributesCount:5+this.customAttributes.length};m.projectionTransform=t,m.hitDetection=!0,this.worker_.postMessage(m,[this.hitRenderInstructions_.buffer]),this.hitRenderInstructions_=null}},t.prototype.forEachFeatureAtCoordinate=function(e,t,o,n,r){if(Object($.a)(this.hitDetectionEnabled_,66),this.hitRenderInstructions_){var i=Object(je.a)(t.coordinateToPixelTransform,e.slice()),s=this.hitRenderTarget_.readPixel(i[0]/2,i[1]/2),a=yt([s[0]/255,s[1]/255,s[2]/255,s[3]/255]),l=this.hitRenderInstructions_[a],c=Math.floor(l).toString(),u=this.getLayer().getSource().getFeatureByUid(c);return u?n(u,this.getLayer(),null):void 0}},t.prototype.renderHitDetection=function(e){if(this.hitVerticesBuffer_.getSize()){this.hitRenderTarget_.setSize([Math.floor(e.size[0]/2),Math.floor(e.size[1]/2)]),this.helper.useProgram(this.hitProgram_),this.helper.prepareDrawToRenderTarget(e,this.hitRenderTarget_,!0),this.helper.bindBuffer(this.hitVerticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.hitDetectionAttributes);var t=this.indicesBuffer_.getSize();this.helper.drawElements(0,t)}},t.prototype.disposeInternal=function(){this.worker_.terminate(),this.layer_=null,this.sourceListenKeys_.forEach((function(e){Object(le.c)(e)})),this.sourceListenKeys_=null,e.prototype.disposeInternal.call(this)},t}(vt),ca=o("./node_modules/ol/renderer/canvas/ImageLayer.js"),ua=o("./node_modules/ol/renderer/canvas/Layer.js"),da=o("./node_modules/ol/renderer/canvas/TileLayer.js"),ha=o("./node_modules/ol/renderer/canvas/VectorLayer.js"),pa=o("./node_modules/rbush/rbush.min.js"),fa=o.n(pa),ma=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),ga=function(e){function t(t){var o=e.call(this,t)||this;return o.vectorRenderer_=new ha.a(t),o.layerImageRatio_=t.getImageRatio(),o.coordinateToVectorPixelTransform_=Object(je.d)(),o.renderedPixelToCoordinateTransform_=null,o}return ma(t,e),t.prototype.disposeInternal=function(){this.vectorRenderer_.dispose(),e.prototype.disposeInternal.call(this)},t.prototype.getFeatures=function(e){if(!this.vectorRenderer_)return new Promise((function(e){return e([])}));var t=Object(je.a)(this.coordinateToVectorPixelTransform_,Object(je.a)(this.renderedPixelToCoordinateTransform_,e.slice()));return this.vectorRenderer_.getFeatures(t)},t.prototype.handleFontsChanged=function(){this.vectorRenderer_.handleFontsChanged()},t.prototype.prepareFrame=function(e){var t=e.pixelRatio,o=e.viewState,n=o.resolution,r=e.viewHints,i=this.vectorRenderer_,s=e.extent;1!==this.layerImageRatio_&&(s=s.slice(0),Object(ce.S)(s,this.layerImageRatio_));var a=Object(ce.N)(s)/n,l=Object(ce.G)(s)/n;if(!r[ra.a.ANIMATING]&&!r[ra.a.INTERACTING]&&!Object(ce.Q)(s)){i.useContainer(null,null,1);var c=i.context,u=Object(ge.a)({},e,{declutterTree:new fa.a(9),extent:s,size:[a,l],viewState:Object(ge.a)({},e.viewState,{rotation:0})}),d=!0,h=new G(s,n,t,c.canvas,(function(e){i.prepareFrame(u)&&i.replayGroupChanged&&(i.clipping=!1,i.renderFrame(u,null)&&(i.renderDeclutter(u),d=!1),e())}));h.addEventListener(m.a.CHANGE,function(){if(h.getState()===L.a.LOADED){this.image_=d?null:h;var e=h.getResolution(),n=h.getPixelRatio(),r=e*t/n;this.renderedResolution=r,this.coordinateToVectorPixelTransform_=Object(je.b)(this.coordinateToVectorPixelTransform_,a/2,l/2,1/r,-1/r,0,-o.center[0],-o.center[1])}}.bind(this)),h.load()}return this.image_&&(this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice()),!!this.image_},t.prototype.preRender=function(){},t.prototype.postRender=function(){},t.prototype.renderDeclutter=function(){},t.prototype.forEachFeatureAtCoordinate=function(t,o,n,r,i){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(t,o,n,r,i):e.prototype.forEachFeatureAtCoordinate.call(this,t,o,n,r,i)},t}(ca.a),ya=o("./node_modules/ol/renderer/canvas/VectorTileLayer.js"),va=o("./node_modules/ol/render/Box.js"),_a=o("./node_modules/ol/render/Feature.js"),ba=o("./node_modules/ol/render/VectorContext.js"),wa=o("./node_modules/ol/render/canvas.js"),Ea=o("./node_modules/ol/render/canvas/Builder.js"),Oa=o("./node_modules/ol/render/canvas/BuilderGroup.js"),Sa=o("./node_modules/ol/render/canvas/Executor.js"),xa=o("./node_modules/ol/render/canvas/ExecutorGroup.js"),Ca=o("./node_modules/ol/render/canvas/ImageBuilder.js"),ja=o("./node_modules/ol/render/canvas/Immediate.js"),Pa=o("./node_modules/ol/render/canvas/Instruction.js"),Ta=o("./node_modules/ol/render/canvas/LineStringBuilder.js"),Aa=o("./node_modules/ol/render/canvas/PolygonBuilder.js"),Ma=o("./node_modules/ol/render/canvas/TextBuilder.js"),Ia=o("./node_modules/ol/render/canvas/hitdetect.js"),Ra=o("./node_modules/ol/proj/Projection.js"),La=o("./node_modules/ol/proj/epsg3857.js"),ka=o("./node_modules/ol/proj/epsg4326.js"),Ga=o("./node_modules/ol/proj/transforms.js");var Na=o("./node_modules/ol/proj/projections.js"),Da=o("./node_modules/ol/layer/Base.js"),Fa=o("./node_modules/ol/layer/BaseImage.js"),Ua=o("./node_modules/ol/layer/BaseTile.js"),Ba=o("./node_modules/ol/layer/Graticule.js"),za=o("./node_modules/ol/layer/Group.js"),Va=o("./node_modules/ol/layer/Vector.js"),Wa=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),qa="blur",Ha="gradient",Ya="radius",Xa=["#00f","#0ff","#0f0","#ff0","#f00"];var Za=function(e){function t(t){var o=this,n=t||{},r=Object(ge.a)({},n);delete r.gradient,delete r.radius,delete r.blur,delete r.weight,(o=e.call(this,r)||this).gradient_=null,o.addChangeListener(Ha,o.handleGradientChanged_),o.setGradient(n.gradient?n.gradient:Xa),o.setBlur(void 0!==n.blur?n.blur:15),o.setRadius(void 0!==n.radius?n.radius:8);var i=n.weight?n.weight:"weight";return o.weightFunction_="string"==typeof i?function(e){return e.get(i)}:i,o.setRenderOrder(null),o}return Wa(t,e),t.prototype.getBlur=function(){return this.get(qa)},t.prototype.getGradient=function(){return this.get(Ha)},t.prototype.getRadius=function(){return this.get(Ya)},t.prototype.handleGradientChanged_=function(){this.gradient_=function(e){for(var t=Object(se.a)(1,256),o=t.createLinearGradient(0,0,1,256),n=1/(e.length-1),r=0,i=e.length;r<i;++r)o.addColorStop(r*n,e[r]);return t.fillStyle=o,t.fillRect(0,0,1,256),t.canvas}(this.getGradient())},t.prototype.setBlur=function(e){this.set(qa,e)},t.prototype.setGradient=function(e){this.set(Ha,e)},t.prototype.setRadius=function(e){this.set(Ya,e)},t.prototype.createRenderer=function(){return new la(this,{className:this.getClassName(),attributes:[{name:"weight",callback:function(e){var t=this.weightFunction_(e);return void 0!==t?Object(v.a)(t,0,1):1}.bind(this)}],vertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_weight = a_weight;\n        }",fragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          gl_FragColor = vec4(alpha, alpha, alpha, alpha);\n        }",hitVertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n        attribute vec4 a_hitColor;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_hitColor = a_hitColor;\n          v_weight = a_weight;\n        }",hitFragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          if (alpha < 0.05) {\n            discard;\n          }\n\n          gl_FragColor = v_hitColor;\n        }",uniforms:{u_size:function(){return 2*(this.get(Ya)+this.get(qa))}.bind(this),u_blurSlope:function(){return this.get(Ya)/Math.max(1,this.get(qa))}.bind(this)},postProcesses:[{fragmentShader:"\n            precision mediump float;\n\n            uniform sampler2D u_image;\n            uniform sampler2D u_gradientTexture;\n\n            varying vec2 v_texCoord;\n\n            void main() {\n              vec4 color = texture2D(u_image, v_texCoord);\n              gl_FragColor.a = color.a;\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\n              gl_FragColor.rgb *= gl_FragColor.a;\n            }",uniforms:{u_gradientTexture:function(){return this.gradient_}.bind(this)}}]})},t.prototype.renderDeclutter=function(){},t}(Va.a),Ka=o("./node_modules/ol/layer/Layer.js"),Ja=o("./node_modules/ol/format/MVT.js"),Qa=o("./node_modules/ol/layer/VectorTile.js"),$a=o("./node_modules/ol-mapbox-style/dist/index.js"),el=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();function tl(e){return 0!==e.indexOf("mapbox://")?"":e.slice("mapbox://".length)}function ol(e,t){var o=tl(e);if(!o)return e;if(0!==o.indexOf("sprites/"))throw new Error("unexpected sprites url: "+e);return"https://api.mapbox.com/styles/v1/"+o.slice("sprites/".length)+"/sprite?access_token="+t}function nl(e,t){var o=tl(e);if(!o)return e;if(0!==o.indexOf("fonts/"))throw new Error("unexpected fonts url: "+e);return"https://api.mapbox.com/fonts/v1/"+o.slice("fonts/".length)+"/0-255.pbf?access_token="+t}function rl(e,t){var o=tl(e);if(!o)return e;if(0!==o.indexOf("styles/"))throw new Error("unexpected style url: "+e);return"https://api.mapbox.com/styles/v1/"+o.slice("styles/".length)+"?&access_token="+t}function il(e,t){var o=tl(e);return o?"https://{a-d}.tiles.mapbox.com/v4/"+o+"/{z}/{x}/{y}.vector.pbf?access_token="+t:e}var sl=function(e){function t(t){var o=e.call(this,m.a.ERROR)||this;return o.error=t,o}return el(t,e),t}(p.a),al="vector",ll=function(e){function t(t){var o=this,n=!("declutter"in t)||t.declutter,r=new cs.a({state:tt.a.LOADING,format:new Ja.a});return(o=e.call(this,{source:r,declutter:n,className:t.className,opacity:t.opacity,visible:t.visible,zIndex:t.zIndex,minResolution:t.minResolution,maxResolution:t.maxResolution,minZoom:t.minZoom,maxZoom:t.maxZoom,renderOrder:t.renderOrder,renderBuffer:t.renderBuffer,renderMode:t.renderMode,map:t.map,updateWhileAnimating:t.updateWhileAnimating,updateWhileInteracting:t.updateWhileInteracting,preload:t.preload,useInterimTilesOnError:t.useInterimTilesOnError,properties:t.properties})||this).sourceId=t.source,o.layers=t.layers,o.accessToken=t.accessToken,o.fetchStyle(t.styleUrl),o}return el(t,e),t.prototype.fetchStyle=function(e){var t=this,o=rl(e,this.accessToken);fetch(o).then((function(e){if(!e.ok)throw new Error("unexpected response when fetching style: "+e.status);return e.json()})).then((function(e){t.onStyleLoad(e)})).catch((function(e){t.handleError(e)}))},t.prototype.onStyleLoad=function(e){var t,o,n=this;if(this.layers){for(var r={},i=0;i<e.layers.length;++i){var s=e.layers[i];s.source&&(r[s.id]=s.source)}var a=void 0;for(i=0;i<this.layers.length;++i){var l=r[this.layers[i]];if(!l)return void this.handleError(new Error("could not find source for "+this.layers[i]));if(a){if(a!==l)return void this.handleError(new Error("layers can only use a single source, found "+a+" and "+l))}else a=l}t=a,o=this.layers}else t=this.sourceId,o=t;o||(t=Object.keys(e.sources)[0],o=t),e.sprite&&(e.sprite=ol(e.sprite,this.accessToken)),e.glyphs&&(e.glyphs=nl(e.glyphs,this.accessToken));var c=e.sources[t];if(c.type===al){var u=this.getSource();c.url.startsWith("mapbox://")||-1!==c.url.indexOf("{z}")?(u.setUrl(il(c.url,this.accessToken)),Object($a.a)(this,e,o).then((function(){u.setState(tt.a.READY)})).catch((function(e){n.handleError(e)}))):Object($a.b)(c,c.url).then((function(t){Object($a.a)(n,e,o).then((function(){n.setSource(t)})).catch((function(e){n.setSource(t),n.handleError(e)}))}))}else this.handleError(new Error("only works for vector sources, found "+c.type))},t.prototype.handleError=function(e){this.dispatchEvent(new sl(e)),this.getSource().setState(tt.a.ERROR)},t}(Qa.a),cl=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),ul=function(e){function t(t){var o=this,n=t||{},r=Object(ge.a)({},n);return delete r.imageRatio,(o=e.call(this,r)||this).imageRatio_=void 0!==n.imageRatio?n.imageRatio:1,o}return cl(t,e),t.prototype.getImageRatio=function(){return this.imageRatio_},t.prototype.createRenderer=function(){return new ga(this)},t}(oa.a),dl=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),hl=function(e){function t(t){var o=this,n=Object(ge.a)({},t);return(o=e.call(this,n)||this).parseResult_=ro(t.style),o.hitDetectionDisabled_=!!t.disableHitDetection,o}return dl(t,e),t.prototype.createRenderer=function(){return new la(this,{className:this.getClassName(),vertexShader:this.parseResult_.builder.getSymbolVertexShader(),fragmentShader:this.parseResult_.builder.getSymbolFragmentShader(),hitVertexShader:!this.hitDetectionDisabled_&&this.parseResult_.builder.getSymbolVertexShader(!0),hitFragmentShader:!this.hitDetectionDisabled_&&this.parseResult_.builder.getSymbolFragmentShader(!0),uniforms:this.parseResult_.uniforms,attributes:this.parseResult_.attributes})},t}(Ka.a),pl=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();var fl=function(e){function t(t){var o=this,n=t?Object(ge.a)({},t):{},r=n.style||{};delete n.style;var i=n.cacheSize;return delete n.cacheSize,(o=e.call(this,n)||this).style_=r,o.cacheSize_=i,o}return pl(t,e),t.prototype.createRenderer=function(){var e=this.getSource(),t=function(e,t){var o="\n    attribute vec2 "+wt.TEXTURE_COORD+";\n    uniform mat4 "+bt.TILE_TRANSFORM+";\n    uniform float "+bt.DEPTH+";\n\n    varying vec2 v_textureCoord;\n\n    void main() {\n      v_textureCoord = "+wt.TEXTURE_COORD+";\n      gl_Position = "+bt.TILE_TRANSFORM+" * vec4("+wt.TEXTURE_COORD+", "+bt.DEPTH+", 1.0);\n    }\n  ",n={inFragmentShader:!0,variables:[],attributes:[],stringLiteralsMap:{},bandCount:t},r=[];if(void 0!==e.color){var i=Wt(n,e.color,Mt);r.push("color = "+i+";")}if(void 0!==e.contrast){var s=Wt(n,e.contrast,Tt);r.push("color.rgb = clamp(("+s+" + 1.0) * color.rgb - ("+s+" / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));")}if(void 0!==e.exposure){var a=Wt(n,e.exposure,Tt);r.push("color.rgb = clamp(("+a+" + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));")}if(void 0!==e.saturation){var l=Wt(n,e.saturation,Tt);r.push("\n      float saturation = "+l+" + 1.0;\n      float sr = (1.0 - saturation) * 0.2126;\n      float sg = (1.0 - saturation) * 0.7152;\n      float sb = (1.0 - saturation) * 0.0722;\n      mat3 saturationMatrix = mat3(\n        sr + saturation, sr, sr,\n        sg, sg + saturation, sg,\n        sb, sb, sb + saturation\n      );\n      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));\n    ")}if(void 0!==e.gamma){var c=Wt(n,e.gamma,Tt);r.push("color.rgb = pow(color.rgb, vec3(1.0 / "+c+"));")}if(void 0!==e.brightness){var u=Wt(n,e.brightness,Tt);r.push("color.rgb = clamp(color.rgb + "+u+", vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));")}var d={},h=n.variables.length;if(h>1&&!e.variables)throw new Error("Missing variables in style (expected "+n.variables+")");for(var p=function(t){var o=n.variables[t];if(!(o in e.variables))throw new Error("Missing '"+o+"' in style variables");var r=eo(o);d[r]=function(){var t=e.variables[o];return"string"==typeof t&&(t=zt(n,t)),void 0!==t?t:-9999999}},f=0;f<h;++f)p(f);for(var m=Object.keys(d).map((function(e){return"uniform float "+e+";"})),g=Math.ceil(t/4),y=new Array(g),v=0;v<g;++v){var _=bt.TILE_TEXTURE_PREFIX+v;m.push("uniform sampler2D "+_+";"),y[v]="vec4 color"+v+" = texture2D("+_+", v_textureCoord);"}return{vertexShader:o,fragmentShader:"\n    #ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    #else\n    precision mediump float;\n    #endif\n\n    varying vec2 v_textureCoord;\n    uniform float "+bt.TRANSITION_ALPHA+";\n    uniform float "+bt.TEXTURE_PIXEL_WIDTH+";\n    uniform float "+bt.TEXTURE_PIXEL_HEIGHT+";\n    uniform float "+bt.RESOLUTION+";\n    uniform float "+bt.ZOOM+";\n\n    "+m.join("\n")+"\n\n    void main() {\n      "+y.join("\n")+"\n\n      vec4 color = color0;\n\n      "+r.join("\n")+"\n\n      if (color.a == 0.0) {\n        discard;\n      }\n\n      gl_FragColor = color;\n      gl_FragColor.rgb *= gl_FragColor.a;\n      gl_FragColor *= "+bt.TRANSITION_ALPHA+";\n    }",uniforms:d}}(this.style_,"bandCount"in e?e.bandCount:4);return this.styleVariables_=this.style_.variables||{},new Pt(this,{vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,className:this.getClassName(),cacheSize:this.cacheSize_})},t.prototype.updateStyleVariables=function(e){Object(ge.a)(this.styleVariables_,e),this.changed()},t}(Ua.a);fl.prototype.dispose;var ml=fl,gl=o("./node_modules/ol/interaction/DoubleClickZoom.js"),yl=o("./node_modules/ol/interaction/DragAndDrop.js"),vl=o("./node_modules/ol/interaction/DragBox.js"),_l=o("./node_modules/ol/interaction/DragPan.js"),bl=o("./node_modules/ol/interaction/DragRotate.js"),wl=o("./node_modules/ol/interaction/DragRotateAndZoom.js"),El=o("./node_modules/ol/interaction/DragZoom.js"),Ol=o("./node_modules/ol/interaction/Draw.js"),Sl=o("./node_modules/ol/interaction/Extent.js"),xl=o("./node_modules/ol/interaction/Interaction.js"),Cl=o("./node_modules/ol/interaction/KeyboardPan.js"),jl=o("./node_modules/ol/interaction/KeyboardZoom.js"),Pl=o("./node_modules/ol/interaction/Modify.js"),Tl=o("./node_modules/ol/interaction/MouseWheelZoom.js"),Al=o("./node_modules/ol/interaction/PinchRotate.js"),Ml=o("./node_modules/ol/interaction/PinchZoom.js"),Il=o("./node_modules/ol/interaction/Pointer.js"),Rl=o("./node_modules/ol/interaction/Select.js"),Ll=o("./node_modules/ol/interaction/Snap.js"),kl=o("./node_modules/ol/interaction/Translate.js"),Gl=o("./node_modules/ol/geom/Circle.js"),Nl=o("./node_modules/ol/geom/Geometry.js"),Dl=o("./node_modules/ol/geom/GeometryCollection.js"),Fl=o("./node_modules/ol/geom/LineString.js"),Ul=o("./node_modules/ol/geom/LinearRing.js"),Bl=o("./node_modules/ol/geom/MultiLineString.js"),zl=o("./node_modules/ol/geom/MultiPoint.js"),Vl=o("./node_modules/ol/geom/MultiPolygon.js"),Wl=o("./node_modules/ol/geom/SimpleGeometry.js"),ql=o("./node_modules/ol/geom/flat/area.js"),Hl=o("./node_modules/ol/geom/flat/center.js"),Yl=o("./node_modules/ol/geom/flat/closest.js"),Xl=o("./node_modules/ol/geom/flat/contains.js"),Zl=o("./node_modules/ol/geom/flat/deflate.js");function Kl(e,t,o,n,r,i){var s,a;void 0!==r?(s=r,a=void 0!==i?i:0):(s=[],a=0);for(var l=t;l<o;){var c=e[l++];s[a++]=e[l++],s[a++]=c;for(var u=2;u<n;++u)s[a++]=e[l++]}return s.length=a,s}var Jl=o("./node_modules/ol/geom/flat/geodesic.js"),Ql=o("./node_modules/ol/geom/flat/inflate.js"),$l=o("./node_modules/ol/geom/flat/interiorpoint.js"),ec=o("./node_modules/ol/geom/flat/interpolate.js"),tc=o("./node_modules/ol/geom/flat/intersectsextent.js"),oc=o("./node_modules/ol/geom/flat/length.js"),nc=o("./node_modules/ol/geom/flat/orient.js"),rc=o("./node_modules/ol/geom/flat/reverse.js"),ic=o("./node_modules/ol/geom/flat/segments.js"),sc=o("./node_modules/ol/geom/flat/simplify.js"),ac=o("./node_modules/ol/geom/flat/straightchunk.js"),lc=o("./node_modules/ol/geom/flat/textpath.js");var cc=o("./node_modules/ol/geom/flat/transform.js"),uc=o("./node_modules/ol/geom/GeometryLayout.js"),dc=o("./node_modules/ol/format/JSONFeature.js"),hc=o("./node_modules/ol/format/Feature.js"),pc=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),fc={};fc[To.a.POINT]=function(e){var t;t=void 0!==e.m&&void 0!==e.z?new Ao.a([e.x,e.y,e.z,e.m],uc.a.XYZM):void 0!==e.z?new Ao.a([e.x,e.y,e.z],uc.a.XYZ):void 0!==e.m?new Ao.a([e.x,e.y,e.m],uc.a.XYM):new Ao.a([e.x,e.y]);return t},fc[To.a.LINE_STRING]=function(e){var t=yc(e);return new Fl.a(e.paths[0],t)},fc[To.a.POLYGON]=function(e){var t=yc(e);return new g.b(e.rings,t)},fc[To.a.MULTI_POINT]=function(e){var t=yc(e);return new zl.a(e.points,t)},fc[To.a.MULTI_LINE_STRING]=function(e){var t=yc(e);return new Bl.a(e.paths,t)},fc[To.a.MULTI_POLYGON]=function(e){var t=yc(e);return new Vl.a(e.rings,t)};var mc={};function gc(e,t){var o,n,r;if(!e)return null;if("number"==typeof e.x&&"number"==typeof e.y)r=To.a.POINT;else if(e.points)r=To.a.MULTI_POINT;else if(e.paths){r=1===e.paths.length?To.a.LINE_STRING:To.a.MULTI_LINE_STRING}else if(e.rings){var i=e,s=yc(i),a=function(e,t){var o,n,r=[],i=[],s=[];for(o=0,n=e.length;o<n;++o){r.length=0,Object(Zl.b)(r,0,e[o],t.length),Object(nc.a)(r,0,r.length,t.length)?i.push([e[o]]):s.push(e[o])}for(;s.length;){var a=s.shift(),l=!1;for(o=i.length-1;o>=0;o--){var c=i[o][0];if(Object(ce.h)(new Ul.a(c).getExtent(),new Ul.a(a).getExtent())){i[o].push(a),l=!0;break}}l||i.push([a.reverse()])}return i}(i.rings,s);1===a.length?(r=To.a.POLYGON,e=Object(ge.a)({},e,((o={}).rings=a[0],o))):(r=To.a.MULTI_POLYGON,e=Object(ge.a)({},e,((n={}).rings=a,n)))}var l=fc[r];return Object(hc.c)(l(e),!1,t)}function yc(e){var t=uc.a.XY;return!0===e.hasZ&&!0===e.hasM?t=uc.a.XYZM:!0===e.hasZ?t=uc.a.XYZ:!0===e.hasM&&(t=uc.a.XYM),t}function vc(e){var t=e.getLayout();return{hasZ:t===uc.a.XYZ||t===uc.a.XYZM,hasM:t===uc.a.XYM||t===uc.a.XYZM}}function _c(e,t){return(0,mc[e.getType()])(Object(hc.c)(e,!0,t),t)}mc[To.a.POINT]=function(e,t){var o,n=e.getCoordinates(),r=e.getLayout();r===uc.a.XYZ?o={x:n[0],y:n[1],z:n[2]}:r===uc.a.XYM?o={x:n[0],y:n[1],m:n[2]}:r===uc.a.XYZM?o={x:n[0],y:n[1],z:n[2],m:n[3]}:r===uc.a.XY?o={x:n[0],y:n[1]}:Object($.a)(!1,34);return o},mc[To.a.LINE_STRING]=function(e,t){var o=vc(e);return{hasZ:o.hasZ,hasM:o.hasM,paths:[e.getCoordinates()]}},mc[To.a.POLYGON]=function(e,t){var o=vc(e);return{hasZ:o.hasZ,hasM:o.hasM,rings:e.getCoordinates(!1)}},mc[To.a.MULTI_POINT]=function(e,t){var o=vc(e);return{hasZ:o.hasZ,hasM:o.hasM,points:e.getCoordinates()}},mc[To.a.MULTI_LINE_STRING]=function(e,t){var o=vc(e);return{hasZ:o.hasZ,hasM:o.hasM,paths:e.getCoordinates()}},mc[To.a.MULTI_POLYGON]=function(e,t){for(var o=vc(e),n=e.getCoordinates(!1),r=[],i=0;i<n.length;i++)for(var s=n[i].length-1;s>=0;s--)r.push(n[i][s]);return{hasZ:o.hasZ,hasM:o.hasM,rings:r}};var bc=function(e){function t(t){var o=this,n=t||{};return(o=e.call(this)||this).geometryName_=n.geometryName,o}return pc(t,e),t.prototype.readFeatureFromObject=function(e,t,o){var n=e,r=gc(n.geometry,t),i=new h.b;if(this.geometryName_&&i.setGeometryName(this.geometryName_),i.setGeometry(r),n.attributes){i.setProperties(n.attributes,!0);var s=n.attributes[o];void 0!==s&&i.setId(s)}return i},t.prototype.readFeaturesFromObject=function(e,t){var o=t||{};if(e.features){for(var n=[],r=e.features,i=0,s=r.length;i<s;++i)n.push(this.readFeatureFromObject(r[i],o,e.objectIdFieldName));return n}return[this.readFeatureFromObject(e,o)]},t.prototype.readGeometryFromObject=function(e,t){return gc(e,t)},t.prototype.readProjectionFromObject=function(e){if(e.spatialReference&&void 0!==e.spatialReference.wkid){var t=e.spatialReference.wkid;return Object(y.t)("EPSG:"+t)}return null},t.prototype.writeGeometryObject=function(e,t){return _c(e,this.adaptOptions(t))},t.prototype.writeFeatureObject=function(e,t){t=this.adaptOptions(t);var o={};if(!e.hasProperties())return o.attributes={},o;var n=e.getProperties(),r=e.getGeometry();if(r){o.geometry=_c(r,t);var i=t&&(t.dataProjection||t.featureProjection);i&&(o.geometry.spatialReference={wkid:Number(Object(y.t)(i).getCode().split(":").pop())}),delete n[e.getGeometryName()]}return Object(ge.d)(n)?o.attributes={}:o.attributes=n,o},t.prototype.writeFeaturesObject=function(e,t){t=this.adaptOptions(t);for(var o=[],n=0,r=e.length;n<r;++n)o.push(this.writeFeatureObject(e[n],t));return{features:o}},t}(dc.a),wc=o("./node_modules/ol/format/GML3.js"),Ec=wc.a;Ec.prototype.writeFeatures,Ec.prototype.writeFeaturesNode;var Oc=Ec,Sc=o("./node_modules/ol/format/GML2.js"),xc=o("./node_modules/ol/format/GMLBase.js"),Cc=o("./node_modules/ol/format/xsd.js"),jc=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Pc=function(e){function t(t){var o=this,n=t||{};return(o=e.call(this,n)||this).schemaLocation=n.schemaLocation?n.schemaLocation:o.namespace+" http://schemas.opengis.net/gml/3.2.1/gml.xsd",o}return jc(t,e),t}(wc.a);Pc.prototype.namespace="http://www.opengis.net/gml/3.2",Pc.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml/3.2":{pos:Object(Ie.p)(wc.a.prototype.readFlatPos),posList:Object(Ie.p)(wc.a.prototype.readFlatPosList),coordinates:Object(Ie.p)(Sc.a.prototype.readFlatCoordinates)}},Pc.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml/3.2":{interior:wc.a.prototype.interiorParser,exterior:wc.a.prototype.exteriorParser}},Pc.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml/3.2":{Point:Object(Ie.p)(xc.b.prototype.readPoint),MultiPoint:Object(Ie.p)(xc.b.prototype.readMultiPoint),LineString:Object(Ie.p)(xc.b.prototype.readLineString),MultiLineString:Object(Ie.p)(xc.b.prototype.readMultiLineString),LinearRing:Object(Ie.p)(xc.b.prototype.readLinearRing),Polygon:Object(Ie.p)(xc.b.prototype.readPolygon),MultiPolygon:Object(Ie.p)(xc.b.prototype.readMultiPolygon),Surface:Object(Ie.p)(Pc.prototype.readSurface),MultiSurface:Object(Ie.p)(wc.a.prototype.readMultiSurface),Curve:Object(Ie.p)(Pc.prototype.readCurve),MultiCurve:Object(Ie.p)(wc.a.prototype.readMultiCurve),Envelope:Object(Ie.p)(Pc.prototype.readEnvelope)}},Pc.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml/3.2":{curveMember:Object(Ie.k)(wc.a.prototype.curveMemberParser),curveMembers:Object(Ie.k)(wc.a.prototype.curveMemberParser)}},Pc.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{surfaceMember:Object(Ie.k)(wc.a.prototype.surfaceMemberParser),surfaceMembers:Object(Ie.k)(wc.a.prototype.surfaceMemberParser)}},Pc.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:Object(Ie.k)(xc.b.prototype.readLineString),Curve:Object(Ie.k)(wc.a.prototype.readCurve)}},Pc.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:Object(Ie.k)(xc.b.prototype.readPolygon),Surface:Object(Ie.k)(wc.a.prototype.readSurface)}},Pc.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{patches:Object(Ie.p)(wc.a.prototype.readPatch)}},Pc.prototype.CURVE_PARSERS={"http://www.opengis.net/gml/3.2":{segments:Object(Ie.p)(wc.a.prototype.readSegment)}},Pc.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml/3.2":{lowerCorner:Object(Ie.k)(wc.a.prototype.readFlatPosList),upperCorner:Object(Ie.k)(wc.a.prototype.readFlatPosList)}},Pc.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml/3.2":{PolygonPatch:Object(Ie.p)(wc.a.prototype.readPolygonPatch)}},Pc.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml/3.2":{LineStringSegment:Object(Ie.p)(wc.a.prototype.readLineStringSegment)}},Pc.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml/3.2":{pointMember:Object(Ie.k)(xc.b.prototype.pointMemberParser),pointMembers:Object(Ie.k)(xc.b.prototype.pointMemberParser)}},Pc.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml/3.2":{lineStringMember:Object(Ie.k)(xc.b.prototype.lineStringMemberParser),lineStringMembers:Object(Ie.k)(xc.b.prototype.lineStringMemberParser)}},Pc.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml/3.2":{polygonMember:Object(Ie.k)(xc.b.prototype.polygonMemberParser),polygonMembers:Object(Ie.k)(xc.b.prototype.polygonMemberParser)}},Pc.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Point:Object(Ie.k)(xc.b.prototype.readFlatCoordinatesFromNode)}},Pc.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:Object(Ie.k)(xc.b.prototype.readLineString)}},Pc.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:Object(Ie.k)(xc.b.prototype.readPolygon)}},Pc.prototype.RING_PARSERS={"http://www.opengis.net/gml/3.2":{LinearRing:Object(Ie.p)(xc.b.prototype.readFlatLinearRing)}},Pc.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml/3.2":{exterior:Object(Ie.m)(wc.a.prototype.writeRing),interior:Object(Ie.m)(wc.a.prototype.writeRing)}},Pc.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lowerCorner:Object(Ie.m)(Cc.n),upperCorner:Object(Ie.m)(Cc.n)}},Pc.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{surfaceMember:Object(Ie.m)(wc.a.prototype.writeSurfaceOrPolygonMember),polygonMember:Object(Ie.m)(wc.a.prototype.writeSurfaceOrPolygonMember)}},Pc.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{pointMember:Object(Ie.m)(wc.a.prototype.writePointMember)}},Pc.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lineStringMember:Object(Ie.m)(wc.a.prototype.writeLineStringOrCurveMember),curveMember:Object(Ie.m)(wc.a.prototype.writeLineStringOrCurveMember)}},Pc.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml/3.2":{Curve:Object(Ie.m)(wc.a.prototype.writeCurveOrLineString),MultiCurve:Object(Ie.m)(wc.a.prototype.writeMultiCurveOrLineString),Point:Object(Ie.m)(Pc.prototype.writePoint),MultiPoint:Object(Ie.m)(wc.a.prototype.writeMultiPoint),LineString:Object(Ie.m)(wc.a.prototype.writeCurveOrLineString),MultiLineString:Object(Ie.m)(wc.a.prototype.writeMultiCurveOrLineString),LinearRing:Object(Ie.m)(wc.a.prototype.writeLinearRing),Polygon:Object(Ie.m)(wc.a.prototype.writeSurfaceOrPolygon),MultiPolygon:Object(Ie.m)(wc.a.prototype.writeMultiSurfaceOrPolygon),Surface:Object(Ie.m)(wc.a.prototype.writeSurfaceOrPolygon),MultiSurface:Object(Ie.m)(wc.a.prototype.writeMultiSurfaceOrPolygon),Envelope:Object(Ie.m)(wc.a.prototype.writeEnvelope)}};var Tc=Pc,Ac=o("./node_modules/ol/format/GPX.js"),Mc=o("./node_modules/ol/format/GeoJSON.js"),Ic=o("./node_modules/ol/format/FormatType.js"),Rc=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();function Lc(e){return"string"==typeof e?e:""}var kc=function(e){function t(){return e.call(this)||this}return Rc(t,e),t.prototype.getType=function(){return Ic.a.TEXT},t.prototype.readFeature=function(e,t){return this.readFeatureFromText(Lc(e),this.adaptOptions(t))},t.prototype.readFeatureFromText=function(e,t){return Object(Te.b)()},t.prototype.readFeatures=function(e,t){return this.readFeaturesFromText(Lc(e),this.adaptOptions(t))},t.prototype.readFeaturesFromText=function(e,t){return Object(Te.b)()},t.prototype.readGeometry=function(e,t){return this.readGeometryFromText(Lc(e),this.adaptOptions(t))},t.prototype.readGeometryFromText=function(e,t){return Object(Te.b)()},t.prototype.readProjection=function(e){return this.readProjectionFromText(Lc(e))},t.prototype.readProjectionFromText=function(e){return this.dataProjection},t.prototype.writeFeature=function(e,t){return this.writeFeatureText(e,this.adaptOptions(t))},t.prototype.writeFeatureText=function(e,t){return Object(Te.b)()},t.prototype.writeFeatures=function(e,t){return this.writeFeaturesText(e,this.adaptOptions(t))},t.prototype.writeFeaturesText=function(e,t){return Object(Te.b)()},t.prototype.writeGeometry=function(e,t){return this.writeGeometryText(e,this.adaptOptions(t))},t.prototype.writeGeometryText=function(e,t){return Object(Te.b)()},t}(hc.a),Gc=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Nc="barometric",Dc="gps",Fc="none",Uc=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,Bc=/^H.([A-Z]{3}).*?:(.*)/,zc=/^HFDTE(\d{2})(\d{2})(\d{2})/,Vc=/\r\n|\r|\n/,Wc=function(e){function t(t){var o=e.call(this)||this,n=t||{};return o.dataProjection=Object(y.t)("EPSG:4326"),o.altitudeMode_=n.altitudeMode?n.altitudeMode:Fc,o}return Gc(t,e),t.prototype.readFeatureFromText=function(e,t){var o,n,r=this.altitudeMode_,i=e.split(Vc),s={},a=[],l=2e3,c=0,u=1,d=-1;for(o=0,n=i.length;o<n;++o){var p=i[o],f=void 0;if("B"==p.charAt(0)){if(f=Uc.exec(p)){var m=parseInt(f[1],10),g=parseInt(f[2],10),y=parseInt(f[3],10),v=parseInt(f[4],10)+parseInt(f[5],10)/6e4;"S"==f[6]&&(v=-v);var _=parseInt(f[7],10)+parseInt(f[8],10)/6e4;if("W"==f[9]&&(_=-_),a.push(_,v),r!=Fc){var b=void 0;b=r==Dc?parseInt(f[11],10):r==Nc?parseInt(f[12],10):0,a.push(b)}var w=Date.UTC(l,c,u,m,g,y);w<d&&(w=Date.UTC(l,c,u+1,m,g,y)),a.push(w/1e3),d=w}}else"H"==p.charAt(0)&&((f=zc.exec(p))?(u=parseInt(f[1],10),c=parseInt(f[2],10)-1,l=2e3+parseInt(f[3],10)):(f=Bc.exec(p))&&(s[f[1]]=f[2].trim()))}if(0===a.length)return null;var E=r==Fc?uc.a.XYM:uc.a.XYZM,O=new Fl.a(a,E),S=new h.b(Object(hc.c)(O,!1,t));return S.setProperties(s,!0),S},t.prototype.readFeaturesFromText=function(e,t){var o=this.readFeatureFromText(e,t);return o?[o]:[]},t}(kc),qc=o("./node_modules/ol/format/KML.js"),Hc=o("./node_modules/ol/format/XMLFeature.js"),Yc=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Xc=[null],Zc=Object(Ie.s)(Xc,{nd:function(e,t){t[t.length-1].ndrefs.push(e.getAttribute("ref"))},tag:$c}),Kc=Object(Ie.s)(Xc,{node:function(e,t){var o=t[0],n=t[t.length-1],r=e.getAttribute("id"),i=[parseFloat(e.getAttribute("lon")),parseFloat(e.getAttribute("lat"))];n.nodes[r]=i;var s=Object(Ie.v)({tags:{}},Qc,e,t);if(!Object(ge.d)(s.tags)){var a=new Ao.a(i);Object(hc.c)(a,!1,o);var l=new h.b(a);l.setId(r),l.setProperties(s.tags,!0),n.features.push(l)}},way:function(e,t){var o=e.getAttribute("id"),n=Object(Ie.v)({id:o,ndrefs:[],tags:{}},Zc,e,t);t[t.length-1].ways.push(n)}}),Jc=function(e){function t(){var t=e.call(this)||this;return t.dataProjection=Object(y.t)("EPSG:4326"),t}return Yc(t,e),t.prototype.readFeaturesFromNode=function(e,t){var o=this.getReadOptions(e,t);if("osm"==e.localName){for(var n=Object(Ie.v)({nodes:{},ways:[],features:[]},Kc,e,[o]),r=0;r<n.ways.length;r++){for(var i=n.ways[r],s=[],a=0,l=i.ndrefs.length;a<l;a++){var c=n.nodes[i.ndrefs[a]];Object(Q.c)(s,c)}var u=void 0;u=i.ndrefs[0]==i.ndrefs[i.ndrefs.length-1]?new g.b(s,uc.a.XY,[s.length]):new Fl.a(s,uc.a.XY),Object(hc.c)(u,!1,o);var d=new h.b(u);d.setId(i.id),d.setProperties(i.tags,!0),n.features.push(d)}if(n.features)return n.features}return[]},t}(Hc.a),Qc=Object(Ie.s)(Xc,{tag:$c});function $c(e,t){t[t.length-1].tags[e.getAttribute("k")]=e.getAttribute("v")}var eu=Jc,tu=o("./node_modules/ol/format/OWS.js"),ou=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();function nu(e,t,o){var n,r=o||1e5,i=new Array(t);for(n=0;n<t;++n)i[n]=0;for(var s=0,a=e.length;s<a;)for(n=0;n<t;++n,++s){var l=e[s],c=l-i[n];i[n]=l,e[s]=c}return iu(e,r)}function ru(e,t,o){var n,r=o||1e5,i=new Array(t);for(n=0;n<t;++n)i[n]=0;for(var s=su(e,r),a=0,l=s.length;a<l;)for(n=0;n<t;++n,++a)i[n]+=s[a],s[a]=i[n];return s}function iu(e,t){for(var o=t||1e5,n=0,r=e.length;n<r;++n)e[n]=Math.round(e[n]*o);return au(e)}function su(e,t){for(var o=t||1e5,n=lu(e),r=0,i=n.length;r<i;++r)n[r]/=o;return n}function au(e){for(var t=0,o=e.length;t<o;++t){var n=e[t];e[t]=n<0?~(n<<1):n<<1}return cu(e)}function lu(e){for(var t=uu(e),o=0,n=t.length;o<n;++o){var r=t[o];t[o]=1&r?~(r>>1):r>>1}return t}function cu(e){for(var t="",o=0,n=e.length;o<n;++o)t+=du(e[o]);return t}function uu(e){for(var t=[],o=0,n=0,r=0,i=e.length;r<i;++r){var s=e.charCodeAt(r)-63;o|=(31&s)<<n,s<32?(t.push(o),o=0,n=0):n+=5}return t}function du(e){for(var t,o="";e>=32;)t=63+(32|31&e),o+=String.fromCharCode(t),e>>=5;return t=e+63,o+=String.fromCharCode(t)}var hu=function(e){function t(t){var o=e.call(this)||this,n=t||{};return o.dataProjection=Object(y.t)("EPSG:4326"),o.factor_=n.factor?n.factor:1e5,o.geometryLayout_=n.geometryLayout?n.geometryLayout:uc.a.XY,o}return ou(t,e),t.prototype.readFeatureFromText=function(e,t){var o=this.readGeometryFromText(e,t);return new h.b(o)},t.prototype.readFeaturesFromText=function(e,t){return[this.readFeatureFromText(e,t)]},t.prototype.readGeometryFromText=function(e,t){var o=Object(Wl.b)(this.geometryLayout_),n=ru(e,o,this.factor_);Kl(n,0,n.length,o,n);var r=Object(Ql.a)(n,0,n.length,o),i=new Fl.a(r,this.geometryLayout_);return Object(hc.c)(i,!1,this.adaptOptions(t))},t.prototype.writeFeatureText=function(e,t){var o=e.getGeometry();return o?this.writeGeometryText(o,t):(Object($.a)(!1,40),"")},t.prototype.writeFeaturesText=function(e,t){return this.writeFeatureText(e[0],t)},t.prototype.writeGeometryText=function(e,t){var o=(e=Object(hc.c)(e,!0,this.adaptOptions(t))).getFlatCoordinates(),n=e.getStride();return Kl(o,0,o.length,n,o),nu(o,n,this.factor_)},t}(kc),pu=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),fu=function(e){function t(t){var o=e.call(this)||this,n=t||{};return o.layerName_=n.layerName,o.layers_=n.layers?n.layers:null,o.dataProjection=Object(y.t)(n.dataProjection?n.dataProjection:"EPSG:4326"),o}return pu(t,e),t.prototype.readFeaturesFromObject=function(e,t){if("Topology"==e.type){var o=e,n=void 0,r=null,i=null;o.transform&&(r=(n=o.transform).scale,i=n.translate);var s=o.arcs;n&&function(e,t,o){for(var n=0,r=e.length;n<r;++n)_u(e[n],t,o)}(s,r,i);var a=[],l=o.objects,c=this.layerName_,u=void 0;for(var d in l)this.layers_&&-1==this.layers_.indexOf(d)||("GeometryCollection"===l[d].type?(u=l[d],a.push.apply(a,yu(u,s,r,i,c,d,t))):(u=l[d],a.push(vu(u,s,r,i,c,d,t))));return a}return[]},t.prototype.readProjectionFromObject=function(e){return this.dataProjection},t}(dc.a),mu={Point:function(e,t,o){var n=e.coordinates;t&&o&&bu(n,t,o);return new Ao.a(n)},LineString:function(e,t){var o=gu(e.arcs,t);return new Fl.a(o)},Polygon:function(e,t){for(var o=[],n=0,r=e.arcs.length;n<r;++n)o[n]=gu(e.arcs[n],t);return new g.b(o)},MultiPoint:function(e,t,o){var n=e.coordinates;if(t&&o)for(var r=0,i=n.length;r<i;++r)bu(n[r],t,o);return new zl.a(n)},MultiLineString:function(e,t){for(var o=[],n=0,r=e.arcs.length;n<r;++n)o[n]=gu(e.arcs[n],t);return new Bl.a(o)},MultiPolygon:function(e,t){for(var o=[],n=0,r=e.arcs.length;n<r;++n){for(var i=e.arcs[n],s=[],a=0,l=i.length;a<l;++a)s[a]=gu(i[a],t);o[n]=s}return new Vl.a(o)}};function gu(e,t){for(var o,n,r=[],i=0,s=e.length;i<s;++i)o=e[i],i>0&&r.pop(),n=o>=0?t[o]:t[~o].slice().reverse(),r.push.apply(r,n);for(var a=0,l=r.length;a<l;++a)r[a]=r[a].slice();return r}function yu(e,t,o,n,r,i,s){for(var a=e.geometries,l=[],c=0,u=a.length;c<u;++c)l[c]=vu(a[c],t,o,n,r,i,s);return l}function vu(e,t,o,n,r,i,s){var a=null,l=e.type;if(l){var c=mu[l];a="Point"===l||"MultiPoint"===l?c(e,o,n):c(e,t),a=Object(hc.c)(a,!1,s)}var u=new h.b({geometry:a});void 0!==e.id&&u.setId(e.id);var d=e.properties;return r&&(d||(d={}),d[r]=i),d&&u.setProperties(d,!0),u}function _u(e,t,o){for(var n=0,r=0,i=0,s=e.length;i<s;++i){var a=e[i];n+=a[0],r+=a[1],a[0]=n,a[1]=r,bu(a,t,o)}}function bu(e,t,o){e[0]=e[0]*t[0]+o[0],e[1]=e[1]*t[1]+o[1]}var wu=fu,Eu=function(){function e(e){this.tagName_=e}return e.prototype.getTagName=function(){return this.tagName_},e}(),Ou=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Su=function(e){function t(t,o){var n=e.call(this,t)||this;return n.conditions=o,Object($.a)(n.conditions.length>=2,57),n}return Ou(t,e),t}(Eu),xu=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Cu=function(e){function t(t){return e.call(this,"And",Array.prototype.slice.call(arguments))||this}return xu(t,e),t}(Su),ju=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Pu=function(e){function t(t,o,n){var r=e.call(this,"BBOX")||this;if(r.geometryName=t,r.extent=o,4!==o.length)throw new Error("Expected an extent with four values ([minX, minY, maxX, maxY])");return r.srsName=n,r}return ju(t,e),t}(Eu),Tu=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Au=function(e){function t(t,o,n,r){var i=e.call(this,t)||this;return i.geometryName=o||"the_geom",i.geometry=n,i.srsName=r,i}return Tu(t,e),t}(Eu),Mu=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Iu=function(e){function t(t,o,n){return e.call(this,"Contains",t,o,n)||this}return Mu(t,e),t}(Au),Ru=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Lu=function(e){function t(t,o,n,r,i){var s=e.call(this,"DWithin",t,o,i)||this;return s.distance=n,s.unit=r,s}return Ru(t,e),t}(Au),ku=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Gu=function(e){function t(t,o,n){return e.call(this,"Disjoint",t,o,n)||this}return ku(t,e),t}(Au),Nu=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Du=function(e){function t(t,o){var n=e.call(this,t)||this;return n.propertyName=o,n}return Nu(t,e),t}(Eu),Fu=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Uu=function(e){function t(t,o,n){var r=e.call(this,"During",t)||this;return r.begin=o,r.end=n,r}return Fu(t,e),t}(Du),Bu=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),zu=function(e){function t(t,o,n,r){var i=e.call(this,t,o)||this;return i.expression=n,i.matchCase=r,i}return Bu(t,e),t}(Du),Vu=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Wu=function(e){function t(t,o,n){return e.call(this,"PropertyIsEqualTo",t,o,n)||this}return Vu(t,e),t}(zu),qu=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Hu=function(e){function t(t,o){return e.call(this,"PropertyIsGreaterThan",t,o)||this}return qu(t,e),t}(zu),Yu=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Xu=function(e){function t(t,o){return e.call(this,"PropertyIsGreaterThanOrEqualTo",t,o)||this}return Yu(t,e),t}(zu),Zu=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Ku=function(e){function t(t,o,n){return e.call(this,"Intersects",t,o,n)||this}return Zu(t,e),t}(Au),Ju=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Qu=function(e){function t(t,o,n){var r=e.call(this,"PropertyIsBetween",t)||this;return r.lowerBoundary=o,r.upperBoundary=n,r}return Ju(t,e),t}(Du),$u=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),ed=function(e){function t(t,o,n,r,i,s){var a=e.call(this,"PropertyIsLike",t)||this;return a.pattern=o,a.wildCard=void 0!==n?n:"*",a.singleChar=void 0!==r?r:".",a.escapeChar=void 0!==i?i:"!",a.matchCase=s,a}return $u(t,e),t}(Du),td=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),od=function(e){function t(t){return e.call(this,"PropertyIsNull",t)||this}return td(t,e),t}(Du),nd=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),rd=function(e){function t(t,o){return e.call(this,"PropertyIsLessThan",t,o)||this}return nd(t,e),t}(zu),id=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),sd=function(e){function t(t,o){return e.call(this,"PropertyIsLessThanOrEqualTo",t,o)||this}return id(t,e),t}(zu),ad=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),ld=function(e){function t(t){var o=e.call(this,"Not")||this;return o.condition=t,o}return ad(t,e),t}(Eu),cd=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),ud=function(e){function t(t,o,n){return e.call(this,"PropertyIsNotEqualTo",t,o,n)||this}return cd(t,e),t}(zu),dd=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),hd=function(e){function t(t){return e.call(this,"Or",Array.prototype.slice.call(arguments))||this}return dd(t,e),t}(Su),pd=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),fd=function(e){function t(t){var o=e.call(this,"ResourceId")||this;return o.rid=t,o}return pd(t,e),t}(Eu),md=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),gd=function(e){function t(t,o,n){return e.call(this,"Within",t,o,n)||this}return md(t,e),t}(Au);function yd(e){var t=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(Cu,t))}function vd(e,t,o){return new Pu(e,t,o)}var _d=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),bd={"http://www.opengis.net/gml":{boundedBy:Object(Ie.o)(xc.b.prototype.readGeometryElement,"bounds")},"http://www.opengis.net/wfs/2.0":{member:Object(Ie.k)(xc.b.prototype.readFeaturesInternal)}},wd={"http://www.opengis.net/wfs":{totalInserted:Object(Ie.o)(Cc.g),totalUpdated:Object(Ie.o)(Cc.g),totalDeleted:Object(Ie.o)(Cc.g)},"http://www.opengis.net/wfs/2.0":{totalInserted:Object(Ie.o)(Cc.g),totalUpdated:Object(Ie.o)(Cc.g),totalDeleted:Object(Ie.o)(Cc.g)}},Ed={"http://www.opengis.net/wfs":{TransactionSummary:Object(Ie.o)(Rd,"transactionSummary"),InsertResults:Object(Ie.o)(Nd,"insertIds")},"http://www.opengis.net/wfs/2.0":{TransactionSummary:Object(Ie.o)(Rd,"transactionSummary"),InsertResults:Object(Ie.o)(Nd,"insertIds")}},Od={"http://www.opengis.net/wfs":{PropertyName:Object(Ie.m)(Cc.n)},"http://www.opengis.net/wfs/2.0":{PropertyName:Object(Ie.m)(Cc.n)}},Sd={"http://www.opengis.net/wfs":{Insert:Object(Ie.m)(Dd),Update:Object(Ie.m)(zd),Delete:Object(Ie.m)(Bd),Property:Object(Ie.m)(Vd),Native:Object(Ie.m)(Wd)},"http://www.opengis.net/wfs/2.0":{Insert:Object(Ie.m)(Dd),Update:Object(Ie.m)(zd),Delete:Object(Ie.m)(Bd),Property:Object(Ie.m)(Vd),Native:Object(Ie.m)(Wd)}},xd="http://www.w3.org/2000/xmlns/",Cd={"2.0.0":"http://www.opengis.net/ogc/1.1","1.1.0":"http://www.opengis.net/ogc","1.0.0":"http://www.opengis.net/ogc"},jd={"2.0.0":"http://www.opengis.net/wfs/2.0","1.1.0":"http://www.opengis.net/wfs","1.0.0":"http://www.opengis.net/wfs"},Pd={"2.0.0":"http://www.opengis.net/fes/2.0","1.1.0":"http://www.opengis.net/fes","1.0.0":"http://www.opengis.net/fes"},Td={"2.0.0":"http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd","1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},Ad={"2.0.0":Tc,"1.1.0":wc.a,"1.0.0":Sc.a},Md=function(e){function t(t){var o=e.call(this)||this,n=t||{};return o.version_=n.version?n.version:"1.1.0",o.featureType_=n.featureType,o.featureNS_=n.featureNS,o.gmlFormat_=n.gmlFormat?n.gmlFormat:new Ad[o.version_],o.schemaLocation_=n.schemaLocation?n.schemaLocation:Td[o.version_],o}return _d(t,e),t.prototype.getFeatureType=function(){return this.featureType_},t.prototype.setFeatureType=function(e){this.featureType_=e},t.prototype.readFeaturesFromNode=function(e,t){var o={node:e};Object(ge.a)(o,{featureType:this.featureType_,featureNS:this.featureNS_}),Object(ge.a)(o,this.getReadOptions(e,t||{}));var n,r=[o];n="2.0.0"===this.version_?bd:this.gmlFormat_.FEATURE_COLLECTION_PARSERS;var i=Object(Ie.v)([],n,e,r,this.gmlFormat_);return i||(i=[]),i},t.prototype.readTransactionResponse=function(e){if(e){if("string"==typeof e){var t=Object(Ie.t)(e);return this.readTransactionResponseFromDocument(t)}return Object(Ie.i)(e)?this.readTransactionResponseFromDocument(e):this.readTransactionResponseFromNode(e)}},t.prototype.readFeatureCollectionMetadata=function(e){if(e){if("string"==typeof e){var t=Object(Ie.t)(e);return this.readFeatureCollectionMetadataFromDocument(t)}return Object(Ie.i)(e)?this.readFeatureCollectionMetadataFromDocument(e):this.readFeatureCollectionMetadataFromNode(e)}},t.prototype.readFeatureCollectionMetadataFromDocument=function(e){for(var t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(t)},t.prototype.readFeatureCollectionMetadataFromNode=function(e){var t={},o=Object(Cc.f)(e.getAttribute("numberOfFeatures"));return t.numberOfFeatures=o,Object(Ie.v)(t,bd,e,[],this.gmlFormat_)},t.prototype.readTransactionResponseFromDocument=function(e){for(var t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(t)},t.prototype.readTransactionResponseFromNode=function(e){return Object(Ie.v)({},Ed,e,[])},t.prototype.writeGetFeature=function(e){var t=this,o=Object(Ie.c)(jd[this.version_],"GetFeature");o.setAttribute("service","WFS"),o.setAttribute("version",this.version_),e.handle&&o.setAttribute("handle",e.handle),e.outputFormat&&o.setAttribute("outputFormat",e.outputFormat),void 0!==e.maxFeatures&&o.setAttribute("maxFeatures",String(e.maxFeatures)),e.resultType&&o.setAttribute("resultType",e.resultType),void 0!==e.startIndex&&o.setAttribute("startIndex",String(e.startIndex)),void 0!==e.count&&o.setAttribute("count",String(e.count)),void 0!==e.viewParams&&o.setAttribute("viewParams",e.viewParams),o.setAttributeNS(Ie.b,"xsi:schemaLocation",this.schemaLocation_);var n={node:o};if(Object(ge.a)(n,{version:this.version_,srsName:e.srsName,featureNS:e.featureNS?e.featureNS:this.featureNS_,featurePrefix:e.featurePrefix,propertyNames:e.propertyNames?e.propertyNames:[]}),Object($.a)(Array.isArray(e.featureTypes),11),"string"==typeof e.featureTypes[0]){var r=e.filter;e.bbox&&(Object($.a)(e.geometryName,12),r=this.combineBboxAndFilter(e.geometryName,e.bbox,e.srsName,r)),Object(ge.a)(n,{geometryName:e.geometryName,filter:r}),lh(o,e.featureTypes,[n])}else e.featureTypes.forEach((function(r){var i=t.combineBboxAndFilter(r.geometryName,r.bbox,e.srsName,e.filter);Object(ge.a)(n,{geometryName:r.geometryName,filter:i}),lh(o,[r.name],[n])}));return o},t.prototype.combineBboxAndFilter=function(e,t,o,n){var r=vd(e,t,o);return n?yd(n,r):r},t.prototype.writeTransaction=function(e,t,o,n){var r,i=[],s=n.version?n.version:this.version_,a=Object(Ie.c)(jd[s],"Transaction");a.setAttribute("service","WFS"),a.setAttribute("version",s),n&&(r=n.gmlOptions?n.gmlOptions:{},n.handle&&a.setAttribute("handle",n.handle)),a.setAttributeNS(Ie.b,"xsi:schemaLocation",Td[s]);var l=function(e,t,o,n){var r,i=n.featurePrefix?n.featurePrefix:"feature";"1.0.0"===o?r=2:"1.1.0"===o?r=3:"2.0.0"===o&&(r=3.2);return Object(ge.a)({node:e},{version:o,featureNS:n.featureNS,featureType:n.featureType,featurePrefix:i,gmlVersion:r,hasZ:n.hasZ,srsName:n.srsName},t)}(a,r,s,n);return e&&Id("Insert",e,i,l),t&&Id("Update",t,i,l),o&&Id("Delete",o,i,l),n.nativeElements&&Id("Native",n.nativeElements,i,l),a},t.prototype.readProjectionFromDocument=function(e){for(var t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(t);return null},t.prototype.readProjectionFromNode=function(e){if(e.firstElementChild&&e.firstElementChild.firstElementChild)for(var t=(e=e.firstElementChild.firstElementChild).firstElementChild;t;t=t.nextElementSibling)if(0!==t.childNodes.length&&(1!==t.childNodes.length||3!==t.firstChild.nodeType)){var o=[{}];return this.gmlFormat_.readGeometryElement(t,o),Object(y.t)(o.pop().srsName)}return null},t}(Hc.a);function Id(e,t,o,n){Object(Ie.w)(n,Sd,Object(Ie.r)(e),t,o)}function Rd(e,t){return Object(Ie.v)({},wd,e,t)}var Ld={"http://www.opengis.net/ogc":{FeatureId:Object(Ie.k)((function(e,t){return e.getAttribute("fid")}))},"http://www.opengis.net/ogc/1.1":{FeatureId:Object(Ie.k)((function(e,t){return e.getAttribute("fid")}))}};function kd(e,t){Object(Ie.u)(Ld,e,t)}var Gd={"http://www.opengis.net/wfs":{Feature:kd},"http://www.opengis.net/wfs/2.0":{Feature:kd}};function Nd(e,t){return Object(Ie.v)([],Gd,e,t)}function Dd(e,t,o){var n=o[o.length-1],r=n.featureType,i=n.featureNS,s=n.gmlVersion,a=Object(Ie.c)(i,r);e.appendChild(a),2===s?Sc.a.prototype.writeFeatureElement(a,t,o):3===s?wc.a.prototype.writeFeatureElement(a,t,o):Tc.prototype.writeFeatureElement(a,t,o)}function Fd(e,t,o){var n=o[o.length-1].version,r=Cd[n],i=Object(Ie.c)(r,"Filter"),s=Object(Ie.c)(r,"FeatureId");i.appendChild(s),s.setAttribute("fid",t),e.appendChild(i)}function Ud(e,t){var o=(e=e||"feature")+":";return 0===t.indexOf(o)?t:o+t}function Bd(e,t,o){var n=o[o.length-1];Object($.a)(void 0!==t.getId(),26);var r=n.featureType,i=n.featurePrefix,s=n.featureNS,a=Ud(i,r);e.setAttribute("typeName",a),e.setAttributeNS(xd,"xmlns:"+i,s);var l=t.getId();void 0!==l&&Fd(e,l,o)}function zd(e,t,o){var n=o[o.length-1];Object($.a)(void 0!==t.getId(),27);var r=n.version,i=n.featureType,s=n.featurePrefix,a=n.featureNS,l=Ud(s,i),c=t.getGeometryName();e.setAttribute("typeName",l),e.setAttributeNS(xd,"xmlns:"+s,a);var u=t.getId();if(void 0!==u){for(var d=t.getKeys(),h=[],p=0,f=d.length;p<f;p++){var m=t.get(d[p]);if(void 0!==m){var g=d[p];m&&"function"==typeof m.getSimplifiedGeometry&&(g=c),h.push({name:g,value:m})}}Object(Ie.w)({version:r,gmlVersion:n.gmlVersion,node:e,hasZ:n.hasZ,srsName:n.srsName},Sd,Object(Ie.r)("Property"),h,o),Fd(e,u,o)}}function Vd(e,t,o){var n=o[o.length-1],r=n.version,i=jd[r],s=Object(Ie.c)(i,"Name"),a=n.gmlVersion;if(e.appendChild(s),Object(Cc.n)(s,t.name),void 0!==t.value&&null!==t.value){var l=Object(Ie.c)(i,"Value");e.appendChild(l),t.value&&"function"==typeof t.value.getSimplifiedGeometry?2===a?Sc.a.prototype.writeGeometryElement(l,t.value,o):3===a?wc.a.prototype.writeGeometryElement(l,t.value,o):Tc.prototype.writeGeometryElement(l,t.value,o):Object(Cc.n)(l,t.value)}}function Wd(e,t,o){t.vendorId&&e.setAttribute("vendorId",t.vendorId),void 0!==t.safeToIgnore&&e.setAttribute("safeToIgnore",String(t.safeToIgnore)),void 0!==t.value&&Object(Cc.n)(e,t.value)}var qd={"http://www.opengis.net/wfs":{Query:Object(Ie.m)(Hd)},"http://www.opengis.net/wfs/2.0":{Query:Object(Ie.m)(Hd)},"http://www.opengis.net/ogc":{During:Object(Ie.m)(Jd),And:Object(Ie.m)(Qd),Or:Object(Ie.m)(Qd),Not:Object(Ie.m)($d),BBOX:Object(Ie.m)(Xd),Contains:Object(Ie.m)(Zd),Intersects:Object(Ie.m)(Zd),Within:Object(Ie.m)(Zd),DWithin:Object(Ie.m)(Kd),PropertyIsEqualTo:Object(Ie.m)(eh),PropertyIsNotEqualTo:Object(Ie.m)(eh),PropertyIsLessThan:Object(Ie.m)(eh),PropertyIsLessThanOrEqualTo:Object(Ie.m)(eh),PropertyIsGreaterThan:Object(Ie.m)(eh),PropertyIsGreaterThanOrEqualTo:Object(Ie.m)(eh),PropertyIsNull:Object(Ie.m)(th),PropertyIsBetween:Object(Ie.m)(oh),PropertyIsLike:Object(Ie.m)(nh)},"http://www.opengis.net/fes/2.0":{During:Object(Ie.m)(Jd),And:Object(Ie.m)(Qd),Or:Object(Ie.m)(Qd),Not:Object(Ie.m)($d),BBOX:Object(Ie.m)(Xd),Contains:Object(Ie.m)(Zd),Disjoint:Object(Ie.m)(Zd),Intersects:Object(Ie.m)(Zd),ResourceId:Object(Ie.m)((function(e,t,o){e.setAttribute("rid",t.rid)})),Within:Object(Ie.m)(Zd),DWithin:Object(Ie.m)(Kd),PropertyIsEqualTo:Object(Ie.m)(eh),PropertyIsNotEqualTo:Object(Ie.m)(eh),PropertyIsLessThan:Object(Ie.m)(eh),PropertyIsLessThanOrEqualTo:Object(Ie.m)(eh),PropertyIsGreaterThan:Object(Ie.m)(eh),PropertyIsGreaterThanOrEqualTo:Object(Ie.m)(eh),PropertyIsNull:Object(Ie.m)(th),PropertyIsBetween:Object(Ie.m)(oh),PropertyIsLike:Object(Ie.m)(nh)}};function Hd(e,t,o){var n,r,i=o[o.length-1],s=i.version,a=i.featurePrefix,l=i.featureNS,c=i.propertyNames,u=i.srsName;n=a?Ud(a,t):t,r="2.0.0"===s?"typeNames":"typeName",e.setAttribute(r,n),u&&e.setAttribute("srsName",u),l&&e.setAttributeNS(xd,"xmlns:"+a,l);var d=Object(ge.a)({},i);d.node=e,Object(Ie.w)(d,Od,Object(Ie.r)("PropertyName"),c,o);var h=i.filter;if(h){var p=Object(Ie.c)(ch(s),"Filter");e.appendChild(p),Yd(p,h,o)}}function Yd(e,t,o){var n=o[o.length-1],r={node:e};Object(ge.a)(r,{context:n}),Object(Ie.w)(r,qd,Object(Ie.r)(t.getTagName()),[t],o)}function Xd(e,t,o){var n=o[o.length-1],r=n.context.version;n.srsName=t.srsName;var i=Ad[r];sh(r,e,t.geometryName),i.prototype.writeGeometryElement(e,t.extent,o)}function Zd(e,t,o){var n=o[o.length-1],r=n.context.version;n.srsName=t.srsName;var i=Ad[r];sh(r,e,t.geometryName),i.prototype.writeGeometryElement(e,t.geometry,o)}function Kd(e,t,o){var n=o[o.length-1].context.version;Zd(e,t,o);var r=Object(Ie.c)(ch(n),"Distance");Object(Cc.n)(r,t.distance.toString()),"2.0.0"===n?r.setAttribute("uom",t.unit):r.setAttribute("units",t.unit),e.appendChild(r)}function Jd(e,t,o){var n=o[o.length-1].context.version;rh(Pd[n],"ValueReference",e,t.propertyName);var r=Object(Ie.c)(xc.a,"TimePeriod");e.appendChild(r);var i=Object(Ie.c)(xc.a,"begin");r.appendChild(i),ah(i,t.begin);var s=Object(Ie.c)(xc.a,"end");r.appendChild(s),ah(s,t.end)}function Qd(e,t,o){var n=o[o.length-1].context,r={node:e};Object(ge.a)(r,{context:n});for(var i=t.conditions,s=0,a=i.length;s<a;++s){var l=i[s];Object(Ie.w)(r,qd,Object(Ie.r)(l.getTagName()),[l],o)}}function $d(e,t,o){var n=o[o.length-1].context,r={node:e};Object(ge.a)(r,{context:n});var i=t.condition;Object(Ie.w)(r,qd,Object(Ie.r)(i.getTagName()),[i],o)}function eh(e,t,o){var n=o[o.length-1].context.version;void 0!==t.matchCase&&e.setAttribute("matchCase",t.matchCase.toString()),sh(n,e,t.propertyName),ih(n,e,""+t.expression)}function th(e,t,o){sh(o[o.length-1].context.version,e,t.propertyName)}function oh(e,t,o){var n=o[o.length-1].context.version,r=ch(n);sh(n,e,t.propertyName);var i=Object(Ie.c)(r,"LowerBoundary");e.appendChild(i),ih(n,i,""+t.lowerBoundary);var s=Object(Ie.c)(r,"UpperBoundary");e.appendChild(s),ih(n,s,""+t.upperBoundary)}function nh(e,t,o){var n=o[o.length-1].context.version;e.setAttribute("wildCard",t.wildCard),e.setAttribute("singleChar",t.singleChar),e.setAttribute("escapeChar",t.escapeChar),void 0!==t.matchCase&&e.setAttribute("matchCase",t.matchCase.toString()),sh(n,e,t.propertyName),ih(n,e,""+t.pattern)}function rh(e,t,o,n){var r=Object(Ie.c)(e,t);Object(Cc.n)(r,n),o.appendChild(r)}function ih(e,t,o){rh(ch(e),"Literal",t,o)}function sh(e,t,o){"2.0.0"===e?rh(Pd[e],"ValueReference",t,o):rh(Cd[e],"PropertyName",t,o)}function ah(e,t){var o=Object(Ie.c)(xc.a,"TimeInstant");e.appendChild(o);var n=Object(Ie.c)(xc.a,"timePosition");o.appendChild(n),Object(Cc.n)(n,t)}function lh(e,t,o){var n=o[o.length-1],r=Object(ge.a)({},n);r.node=e,Object(Ie.w)(r,qd,Object(Ie.r)("Query"),t,o)}function ch(e){return"2.0.0"===e?Pd[e]:Cd[e]}var uh=Md,dh=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),hh=1,ph=2,fh=3,mh=4,gh=5,yh=6,vh=7,_h=15,bh=16,wh=17,Eh=function(){function e(e){this.view_=e,this.pos_=0,this.initialized_=!1,this.isLittleEndian_=!1,this.hasZ_=!1,this.hasM_=!1,this.srid_=null,this.layout_=uc.a.XY}return e.prototype.readUint8=function(){return this.view_.getUint8(this.pos_++)},e.prototype.readUint32=function(e){return this.view_.getUint32((this.pos_+=4)-4,void 0!==e?e:this.isLittleEndian_)},e.prototype.readDouble=function(e){return this.view_.getFloat64((this.pos_+=8)-8,void 0!==e?e:this.isLittleEndian_)},e.prototype.readPoint=function(){var e=[];return e.push(this.readDouble()),e.push(this.readDouble()),this.hasZ_&&e.push(this.readDouble()),this.hasM_&&e.push(this.readDouble()),e},e.prototype.readLineString=function(){for(var e=this.readUint32(),t=[],o=0;o<e;o++)t.push(this.readPoint());return t},e.prototype.readPolygon=function(){for(var e=this.readUint32(),t=[],o=0;o<e;o++)t.push(this.readLineString());return t},e.prototype.readWkbHeader=function(e){var t=this.readUint8()>0,o=this.readUint32(t),n=Math.floor((268435455&o)/1e3),r=Boolean(2147483648&o)||1===n||3===n,i=Boolean(1073741824&o)||2===n||3===n,s=Boolean(536870912&o),a=(268435455&o)%1e3,l=["XY",r?"Z":"",i?"M":""].join(""),c=s?this.readUint32(t):null;if(void 0!==e&&e!==a)throw new Error("Unexpected WKB geometry type "+a);if(this.initialized_){if(this.isLittleEndian_!==t)throw new Error("Inconsistent endian");if(this.layout_!==l)throw new Error("Inconsistent geometry layout");if(c&&this.srid_!==c)throw new Error("Inconsistent coordinate system (SRID)")}else this.isLittleEndian_=t,this.hasZ_=r,this.hasM_=i,this.layout_=l,this.srid_=c,this.initialized_=!0;return a},e.prototype.readWkbPayload=function(e){switch(e){case hh:return this.readPoint();case ph:return this.readLineString();case fh:case wh:return this.readPolygon();case mh:return this.readMultiPoint();case gh:return this.readMultiLineString();case yh:case _h:case bh:return this.readMultiPolygon();case vh:return this.readGeometryCollection();default:throw new Error("Unsupported WKB geometry type "+e+" is found")}},e.prototype.readWkbBlock=function(e){return this.readWkbPayload(this.readWkbHeader(e))},e.prototype.readWkbCollection=function(e,t){for(var o=this.readUint32(),n=[],r=0;r<o;r++){var i=e.call(this,t);i&&n.push(i)}return n},e.prototype.readMultiPoint=function(){return this.readWkbCollection(this.readWkbBlock,hh)},e.prototype.readMultiLineString=function(){return this.readWkbCollection(this.readWkbBlock,ph)},e.prototype.readMultiPolygon=function(){return this.readWkbCollection(this.readWkbBlock,fh)},e.prototype.readGeometryCollection=function(){return this.readWkbCollection(this.readGeometry)},e.prototype.readGeometry=function(){var e=this.readWkbHeader(),t=this.readWkbPayload(e);switch(e){case hh:return new Ao.a(t,this.layout_);case ph:return new Fl.a(t,this.layout_);case fh:case wh:return new g.b(t,this.layout_);case mh:return new zl.a(t,this.layout_);case gh:return new Bl.a(t,this.layout_);case yh:case _h:case bh:return new Vl.a(t,this.layout_);case vh:return new Dl.a(t);default:return null}},e.prototype.getSrid=function(){return this.srid_},e}(),Oh=function(){function e(e){e=e||{},this.layout_=e.layout,this.isLittleEndian_=!1!==e.littleEndian,this.isEWKB_=!1!==e.ewkb,this.writeQueue_=[],this.nodata_=Object(ge.a)({X:0,Y:0,Z:0,M:0},e.nodata)}return e.prototype.writeUint8=function(e){this.writeQueue_.push([1,e])},e.prototype.writeUint32=function(e){this.writeQueue_.push([4,e])},e.prototype.writeDouble=function(e){this.writeQueue_.push([8,e])},e.prototype.writePoint=function(e,t){for(var o=ge.a.apply(null,t.split("").map((function(t,o){var n;return(n={})[t]=e[o],n}))),n=0,r=this.layout_;n<r.length;n++){var i=r[n];this.writeDouble(i in o?o[i]:this.nodata_[i])}},e.prototype.writeLineString=function(e,t){this.writeUint32(e.length);for(var o=0;o<e.length;o++)this.writePoint(e[o],t)},e.prototype.writePolygon=function(e,t){this.writeUint32(e.length);for(var o=0;o<e.length;o++)this.writeLineString(e[o],t)},e.prototype.writeWkbHeader=function(e,t){e%=1e3,this.layout_.indexOf("Z")>=0&&(e+=this.isEWKB_?2147483648:1e3),this.layout_.indexOf("M")>=0&&(e+=this.isEWKB_?1073741824:2e3),this.isEWKB_&&Number.isInteger(t)&&(e|=536870912),this.writeUint8(this.isLittleEndian_?1:0),this.writeUint32(e),this.isEWKB_&&Number.isInteger(t)&&this.writeUint32(t)},e.prototype.writeMultiPoint=function(e,t){this.writeUint32(e.length);for(var o=0;o<e.length;o++)this.writeWkbHeader(1),this.writePoint(e[o],t)},e.prototype.writeMultiLineString=function(e,t){this.writeUint32(e.length);for(var o=0;o<e.length;o++)this.writeWkbHeader(2),this.writeLineString(e[o],t)},e.prototype.writeMultiPolygon=function(e,t){this.writeUint32(e.length);for(var o=0;o<e.length;o++)this.writeWkbHeader(3),this.writePolygon(e[o],t)},e.prototype.writeGeometryCollection=function(e){this.writeUint32(e.length);for(var t=0;t<e.length;t++)this.writeGeometry(e[t])},e.prototype.findMinimumLayout=function(e,t){void 0===t&&(t=uc.a.XYZM);var o,n;if(e instanceof Wl.a)return(o=e.getLayout())===(n=t)?o:o===uc.a.XYZM?n:n===uc.a.XYZM?o:uc.a.XY;if(e instanceof Dl.a)for(var r=e.getGeometriesArray(),i=0;i<r.length&&t!==uc.a.XY;i++)t=this.findMinimumLayout(r[i],t);return t},e.prototype.writeGeometry=function(e,t){var o,n,r=((o={})[To.a.POINT]=hh,o[To.a.LINE_STRING]=ph,o[To.a.POLYGON]=fh,o[To.a.MULTI_POINT]=mh,o[To.a.MULTI_LINE_STRING]=gh,o[To.a.MULTI_POLYGON]=yh,o[To.a.GEOMETRY_COLLECTION]=vh,o),i=e.getType(),s=r[i];if(!s)throw new Error("GeometryType "+i+" is not supported");(this.layout_||(this.layout_=this.findMinimumLayout(e)),this.writeWkbHeader(s,t),e instanceof Wl.a)?((n={})[To.a.POINT]=this.writePoint,n[To.a.LINE_STRING]=this.writeLineString,n[To.a.POLYGON]=this.writePolygon,n[To.a.MULTI_POINT]=this.writeMultiPoint,n[To.a.MULTI_LINE_STRING]=this.writeMultiLineString,n[To.a.MULTI_POLYGON]=this.writeMultiPolygon,n)[i].call(this,e.getCoordinates(),e.getLayout()):e instanceof Dl.a&&this.writeGeometryCollection(e.getGeometriesArray())},e.prototype.getBuffer=function(){var e=this,t=this.writeQueue_.reduce((function(e,t){return e+t[0]}),0),o=new ArrayBuffer(t),n=new DataView(o),r=0;return this.writeQueue_.forEach((function(t){switch(t[0]){case 1:n.setUint8(r,t[1]);break;case 4:n.setUint32(r,t[1],e.isLittleEndian_);break;case 8:n.setFloat64(r,t[1],e.isLittleEndian_)}r+=t[0]})),o},e}();function Sh(e){return"string"==typeof e?function(e){for(var t=new Uint8Array(e.length/2),o=0;o<e.length/2;o++)t[o]=parseInt(e.substr(2*o,2),16);return new DataView(t.buffer)}(e):ArrayBuffer.isView(e)?e instanceof DataView?e:new DataView(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new DataView(e):null}var xh=function(e){function t(t){var o=e.call(this)||this,n=t||{};return o.splitCollection=Boolean(n.splitCollection),o.viewCache_=null,o.hex_=!1!==n.hex,o.littleEndian_=!1!==n.littleEndian,o.ewkb_=!1!==n.ewkb,o.layout_=n.geometryLayout,o.nodataZ_=n.nodataZ||0,o.nodataM_=n.nodataM||0,o.srid_=n.srid,o}return dh(t,e),t.prototype.getType=function(){return this.hex_?Ic.a.TEXT:Ic.a.ARRAY_BUFFER},t.prototype.readFeature=function(e,t){return new h.b({geometry:this.readGeometry(e,t)})},t.prototype.readFeatures=function(e,t){var o=this.readGeometry(e,t);return(this.splitCollection&&o instanceof Dl.a?o.getGeometriesArray():[o]).map((function(e){return new h.b({geometry:e})}))},t.prototype.readGeometry=function(e,t){var o=Sh(e);if(!o)return null;var n=new Eh(o).readGeometry();this.viewCache_=o;var r=this.getReadOptions(e,t);return this.viewCache_=null,Object(hc.c)(n,!1,r)},t.prototype.readProjection=function(e){var t=this.viewCache_||Sh(e);if(t){var o=new Eh(t);return o.readWkbHeader(),o.getSrid()&&Object(y.t)("EPSG:"+o.getSrid())||void 0}},t.prototype.writeFeature=function(e,t){return this.writeGeometry(e.getGeometry(),t)},t.prototype.writeFeatures=function(e,t){return this.writeGeometry(new Dl.a(e.map((function(e){return e.getGeometry()}))),t)},t.prototype.writeGeometry=function(e,t){var o=this.adaptOptions(t),n=new Oh({layout:this.layout_,littleEndian:this.littleEndian_,ewkb:this.ewkb_,nodata:{Z:this.nodataZ_,M:this.nodataM_}}),r=Number.isInteger(this.srid_)?Number(this.srid_):null;if(!1!==this.srid_&&!Number.isInteger(this.srid_)){var i=o.dataProjection&&Object(y.t)(o.dataProjection);if(i){var s=i.getCode();0===s.indexOf("EPSG:")&&(r=Number(s.substring(5)))}}n.writeGeometry(Object(hc.c)(e,!0,o),r);var a=n.getBuffer();return this.hex_?function(e){var t=new Uint8Array(e);return Array.from(t.values()).map((function(e){return(e<16?"0":"")+Number(e).toString(16).toUpperCase()})).join("")}(a):a},t}(hc.a),Ch=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),jh={POINT:Ao.a,LINESTRING:Fl.a,POLYGON:g.b,MULTIPOINT:zl.a,MULTILINESTRING:Bl.a,MULTIPOLYGON:Vl.a},Ph=0,Th=1,Ah=2,Mh=3,Ih=4,Rh=5,Lh=6,kh={};for(var Gh in To.a)kh[Gh]=To.a[Gh].toUpperCase();var Nh=function(){function e(e){this.wkt=e,this.index_=-1}return e.prototype.isAlpha_=function(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"},e.prototype.isNumeric_=function(e,t){return e>="0"&&e<="9"||"."==e&&!(void 0!==t&&t)},e.prototype.isWhiteSpace_=function(e){return" "==e||"\t"==e||"\r"==e||"\n"==e},e.prototype.nextChar_=function(){return this.wkt.charAt(++this.index_)},e.prototype.nextToken=function(){var e,t=this.nextChar_(),o=this.index_,n=t;if("("==t)e=Ah;else if(","==t)e=Rh;else if(")"==t)e=Mh;else if(this.isNumeric_(t)||"-"==t)e=Ih,n=this.readNumber_();else if(this.isAlpha_(t))e=Th,n=this.readText_();else{if(this.isWhiteSpace_(t))return this.nextToken();if(""!==t)throw new Error("Unexpected character: "+t);e=Lh}return{position:o,value:n,type:e}},e.prototype.readNumber_=function(){var e,t=this.index_,o=!1,n=!1;do{"."==e?o=!0:"e"!=e&&"E"!=e||(n=!0),e=this.nextChar_()}while(this.isNumeric_(e,o)||!n&&("e"==e||"E"==e)||n&&("-"==e||"+"==e));return parseFloat(this.wkt.substring(t,this.index_--))},e.prototype.readText_=function(){var e,t=this.index_;do{e=this.nextChar_()}while(this.isAlpha_(e));return this.wkt.substring(t,this.index_--).toUpperCase()},e}(),Dh=function(){function e(e){this.lexer_=e,this.token_={position:0,type:Ph},this.layout_=uc.a.XY}return e.prototype.consume_=function(){this.token_=this.lexer_.nextToken()},e.prototype.isTokenType=function(e){return this.token_.type==e},e.prototype.match=function(e){var t=this.isTokenType(e);return t&&this.consume_(),t},e.prototype.parse=function(){return this.consume_(),this.parseGeometry_()},e.prototype.parseGeometryLayout_=function(){var e=uc.a.XY,t=this.token_;if(this.isTokenType(Th)){var o=t.value;"Z"===o?e=uc.a.XYZ:"M"===o?e=uc.a.XYM:"ZM"===o&&(e=uc.a.XYZM),e!==uc.a.XY&&this.consume_()}return e},e.prototype.parseGeometryCollectionText_=function(){if(this.match(Ah)){var e=[];do{e.push(this.parseGeometry_())}while(this.match(Rh));if(this.match(Mh))return e}throw new Error(this.formatErrorMessage_())},e.prototype.parsePointText_=function(){if(this.match(Ah)){var e=this.parsePoint_();if(this.match(Mh))return e}throw new Error(this.formatErrorMessage_())},e.prototype.parseLineStringText_=function(){if(this.match(Ah)){var e=this.parsePointList_();if(this.match(Mh))return e}throw new Error(this.formatErrorMessage_())},e.prototype.parsePolygonText_=function(){if(this.match(Ah)){var e=this.parseLineStringTextList_();if(this.match(Mh))return e}throw new Error(this.formatErrorMessage_())},e.prototype.parseMultiPointText_=function(){if(this.match(Ah)){var e=void 0;if(e=this.token_.type==Ah?this.parsePointTextList_():this.parsePointList_(),this.match(Mh))return e}throw new Error(this.formatErrorMessage_())},e.prototype.parseMultiLineStringText_=function(){if(this.match(Ah)){var e=this.parseLineStringTextList_();if(this.match(Mh))return e}throw new Error(this.formatErrorMessage_())},e.prototype.parseMultiPolygonText_=function(){if(this.match(Ah)){var e=this.parsePolygonTextList_();if(this.match(Mh))return e}throw new Error(this.formatErrorMessage_())},e.prototype.parsePoint_=function(){for(var e=[],t=this.layout_.length,o=0;o<t;++o){var n=this.token_;if(!this.match(Ih))break;e.push(n.value)}if(e.length==t)return e;throw new Error(this.formatErrorMessage_())},e.prototype.parsePointList_=function(){for(var e=[this.parsePoint_()];this.match(Rh);)e.push(this.parsePoint_());return e},e.prototype.parsePointTextList_=function(){for(var e=[this.parsePointText_()];this.match(Rh);)e.push(this.parsePointText_());return e},e.prototype.parseLineStringTextList_=function(){for(var e=[this.parseLineStringText_()];this.match(Rh);)e.push(this.parseLineStringText_());return e},e.prototype.parsePolygonTextList_=function(){for(var e=[this.parsePolygonText_()];this.match(Rh);)e.push(this.parsePolygonText_());return e},e.prototype.isEmptyGeometry_=function(){var e=this.isTokenType(Th)&&"EMPTY"==this.token_.value;return e&&this.consume_(),e},e.prototype.formatErrorMessage_=function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"},e.prototype.parseGeometry_=function(){var e=this.token_;if(this.match(Th)){var t=e.value;this.layout_=this.parseGeometryLayout_();var o=this.isEmptyGeometry_();if("GEOMETRYCOLLECTION"==t){if(o)return new Dl.a([]);var n=this.parseGeometryCollectionText_();return new Dl.a(n)}var r=jh[t];if(!r)throw new Error("Invalid geometry type: "+t);var i=void 0;if(o)i="POINT"==t?[NaN,NaN]:[];else switch(t){case"POINT":i=this.parsePointText_();break;case"LINESTRING":i=this.parseLineStringText_();break;case"POLYGON":i=this.parsePolygonText_();break;case"MULTIPOINT":i=this.parseMultiPointText_();break;case"MULTILINESTRING":i=this.parseMultiLineStringText_();break;case"MULTIPOLYGON":i=this.parseMultiPolygonText_()}return new r(i,this.layout_)}throw new Error(this.formatErrorMessage_())},e}(),Fh=function(e){function t(t){var o=e.call(this)||this,n=t||{};return o.splitCollection_=void 0!==n.splitCollection&&n.splitCollection,o}return Ch(t,e),t.prototype.parse_=function(e){var t=new Nh(e);return new Dh(t).parse()},t.prototype.readFeatureFromText=function(e,t){var o=this.readGeometryFromText(e,t),n=new h.b;return n.setGeometry(o),n},t.prototype.readFeaturesFromText=function(e,t){for(var o=[],n=this.readGeometryFromText(e,t),r=[],i=0,s=(o=this.splitCollection_&&n.getType()==To.a.GEOMETRY_COLLECTION?n.getGeometriesArray():[n]).length;i<s;++i){var a=new h.b;a.setGeometry(o[i]),r.push(a)}return r},t.prototype.readGeometryFromText=function(e,t){var o=this.parse_(e);return Object(hc.c)(o,!1,t)},t.prototype.writeFeatureText=function(e,t){var o=e.getGeometry();return o?this.writeGeometryText(o,t):""},t.prototype.writeFeaturesText=function(e,t){if(1==e.length)return this.writeFeatureText(e[0],t);for(var o=[],n=0,r=e.length;n<r;++n)o.push(e[n].getGeometry());var i=new Dl.a(o);return this.writeGeometryText(i,t)},t.prototype.writeGeometryText=function(e,t){return Wh(Object(hc.c)(e,!0,t))},t}(kc);function Uh(e){var t=e.getCoordinates();return 0===t.length?"":t.join(" ")}function Bh(e){for(var t=e.getCoordinates(),o=[],n=0,r=t.length;n<r;++n)o.push(t[n].join(" "));return o.join(",")}function zh(e){for(var t=[],o=e.getLinearRings(),n=0,r=o.length;n<r;++n)t.push("("+Bh(o[n])+")");return t.join(",")}var Vh={Point:Uh,LineString:Bh,Polygon:zh,MultiPoint:function(e){for(var t=[],o=e.getPoints(),n=0,r=o.length;n<r;++n)t.push("("+Uh(o[n])+")");return t.join(",")},MultiLineString:function(e){for(var t=[],o=e.getLineStrings(),n=0,r=o.length;n<r;++n)t.push("("+Bh(o[n])+")");return t.join(",")},MultiPolygon:function(e){for(var t=[],o=e.getPolygons(),n=0,r=o.length;n<r;++n)t.push("("+zh(o[n])+")");return t.join(",")},GeometryCollection:function(e){for(var t=[],o=e.getGeometries(),n=0,r=o.length;n<r;++n)t.push(Wh(o[n]));return t.join(",")}};function Wh(e){var t=e.getType(),o=(0,Vh[t])(e);if(t=t.toUpperCase(),"function"==typeof e.getFlatCoordinates){var n=function(e){var t=e.getLayout(),o="";return t!==uc.a.XYZ&&t!==uc.a.XYZM||(o+="Z"),t!==uc.a.XYM&&t!==uc.a.XYZM||(o+="M"),o}(e);n.length>0&&(t+=" "+n)}return 0===o.length?t+" EMPTY":t+"("+o+")"}var qh=Fh,Hh=o("./node_modules/ol/format/WMSCapabilities.js"),Yh=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Xh=function(e){function t(t){var o=e.call(this)||this,n=t||{};return o.featureNS_="http://mapserver.gis.umn.edu/mapserver",o.gmlFormat_=new Sc.a,o.layers_=n.layers?n.layers:null,o}return Yh(t,e),t.prototype.getLayers=function(){return this.layers_},t.prototype.setLayers=function(e){this.layers_=e},t.prototype.readFeatures_=function(e,t){e.setAttribute("namespaceURI",this.featureNS_);var o=e.localName,n=[];if(0===e.childNodes.length)return n;if("msGMLOutput"==o)for(var r=0,i=e.childNodes.length;r<i;r++){var s=e.childNodes[r];if(s.nodeType===Node.ELEMENT_NODE){var a=s,l=t[0],c=a.localName.replace("_layer","");if(!this.layers_||Object(Q.f)(this.layers_,c)){var u=c+"_feature";l.featureType=u,l.featureNS=this.featureNS_;var d={};d[u]=Object(Ie.k)(this.gmlFormat_.readFeatureElement,this.gmlFormat_);var h=Object(Ie.s)([l.featureNS,null],d);a.setAttribute("namespaceURI",this.featureNS_);var p=Object(Ie.v)([],h,a,t,this.gmlFormat_);p&&Object(Q.c)(n,p)}}}if("FeatureCollection"==o){var f=Object(Ie.v)([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,e,[{}],this.gmlFormat_);f&&(n=f)}return n},t.prototype.readFeaturesFromNode=function(e,t){var o={};return t&&Object(ge.a)(o,this.getReadOptions(e,t)),this.readFeatures_(e,[o])},t}(Hc.a),Zh=o("./node_modules/ol/format/WMTSCapabilities.js"),Kh=o("./node_modules/ol/format/XML.js"),Jh=o("./node_modules/ol/format/xlink.js"),Qh=o("./node_modules/ol/events/condition.js"),$h=o("./node_modules/ol/control/Attribution.js"),ep=o("./node_modules/ol/control/Control.js"),tp=o("./node_modules/ol/control/FullScreen.js"),op=o("./node_modules/ol/control/MousePosition.js"),np=o("./node_modules/ol/control/OverviewMap.js"),rp=o("./node_modules/ol/control/Rotate.js"),ip=o("./node_modules/ol/control/ScaleLine.js"),sp=o("./node_modules/ol/control/Zoom.js"),ap=o("./node_modules/ol/control/ZoomSlider.js"),lp=o("./node_modules/ol/control/ZoomToExtent.js"),cp={};cp.AssertionError=i.a,cp.Collection=s.b,cp.Collection.CollectionEvent=s.a,cp.DataTile=u,cp.Disposable=d.a,cp.Feature=h.b,cp.Feature.createStyleFunction=h.a,cp.Geolocation=M,cp.Image=I.a,cp.Image.listenImage=I.b,cp.ImageBase=R.a,cp.ImageCanvas=G,cp.ImageTile=N.a,cp.Kinetic=D.a,cp.Map=F.a,cp.MapBrowserEvent=U.a,cp.MapBrowserEventHandler=B.a,cp.MapEvent=z.a,cp.Object=f.b,cp.Object.ObjectEvent=f.a,cp.Observable=V.a,cp.Observable.unByKey=V.b,cp.Overlay=W.a,cp.PluggableMap=q.a,cp.Tile=a.a,cp.TileCache=H.a,cp.TileQueue=Y.a,cp.TileQueue.getTilePriority=Y.b,cp.TileRange=X.b,cp.TileRange.createOrUpdate=X.a,cp.VectorRenderTile=Z.a,cp.VectorTile=K.a,cp.View=J.d,cp.View.createCenterConstraint=J.a,cp.View.createResolutionConstraint=J.b,cp.View.createRotationConstraint=J.c,cp.View.isNoopAnimation=J.e,cp.array={},cp.array.binarySearch=Q.a,cp.array.equals=Q.b,cp.array.extend=Q.c,cp.array.find=Q.d,cp.array.findIndex=Q.e,cp.array.includes=Q.f,cp.array.isSorted=Q.g,cp.array.linearFindNearest=Q.h,cp.array.numberSafeCompareFunction=Q.i,cp.array.remove=Q.j,cp.array.reverseSubArray=Q.k,cp.array.stableSort=Q.l,cp.asserts={},cp.asserts.assert=$.a,cp.centerconstraint={},cp.centerconstraint.createExtent=ee.a,cp.centerconstraint.none=ee.b,cp.color={},cp.color.asArray=te.a,cp.color.asString=te.b,cp.color.fromString=te.c,cp.color.isStringColor=te.d,cp.color.normalize=te.e,cp.color.toString=te.f,cp.colorlike={},cp.colorlike.asColorLike=oe.a,cp.control={},cp.control.Attribution=$h.a,cp.control.Control=ep.a,cp.control.FullScreen=tp.a,cp.control.MousePosition=op.a,cp.control.OverviewMap=np.a,cp.control.Rotate=rp.a,cp.control.ScaleLine=ip.a,cp.control.Zoom=sp.a,cp.control.ZoomSlider=ap.a,cp.control.ZoomToExtent=lp.a,cp.control.defaults=ne.a,cp.coordinate={},cp.coordinate.add=re.a,cp.coordinate.closestOnCircle=re.b,cp.coordinate.closestOnSegment=re.c,cp.coordinate.createStringXY=re.d,cp.coordinate.degreesToStringHDMS=re.e,cp.coordinate.distance=re.f,cp.coordinate.equals=re.g,cp.coordinate.format=re.h,cp.coordinate.getWorldsAway=re.i,cp.coordinate.rotate=re.j,cp.coordinate.scale=re.k,cp.coordinate.squaredDistance=re.l,cp.coordinate.squaredDistanceToSegment=re.m,cp.coordinate.toStringHDMS=re.n,cp.coordinate.toStringXY=re.o,cp.coordinate.wrapX=re.p,cp.css={},cp.css.CLASS_COLLAPSED=ie.a,cp.css.CLASS_CONTROL=ie.b,cp.css.CLASS_HIDDEN=ie.c,cp.css.CLASS_SELECTABLE=ie.d,cp.css.CLASS_UNSELECTABLE=ie.e,cp.css.CLASS_UNSUPPORTED=ie.f,cp.css.cssOpacity=ie.g,cp.css.getFontParameters=ie.h,cp.dom={},cp.dom.createCanvasContext2D=se.a,cp.dom.outerHeight=se.b,cp.dom.outerWidth=se.c,cp.dom.removeChildren=se.d,cp.dom.removeNode=se.e,cp.dom.replaceChildren=se.f,cp.dom.replaceNode=se.g,cp.easing={},cp.easing.easeIn=ae.a,cp.easing.easeOut=ae.b,cp.easing.inAndOut=ae.c,cp.easing.linear=ae.d,cp.easing.upAndDown=ae.e,cp.events={},cp.events.Event=p.a,cp.events.Event.preventDefault=p.b,cp.events.Event.stopPropagation=p.c,cp.events.Target=ot.a,cp.events.condition={},cp.events.condition.all=Qh.a,cp.events.condition.altKeyOnly=Qh.b,cp.events.condition.altShiftKeysOnly=Qh.c,cp.events.condition.always=Qh.d,cp.events.condition.click=Qh.e,cp.events.condition.doubleClick=Qh.f,cp.events.condition.focus=Qh.g,cp.events.condition.focusWithTabindex=Qh.h,cp.events.condition.mouseActionButton=Qh.i,cp.events.condition.mouseOnly=Qh.j,cp.events.condition.never=Qh.k,cp.events.condition.noModifierKeys=Qh.l,cp.events.condition.penOnly=Qh.m,cp.events.condition.platformModifierKeyOnly=Qh.n,cp.events.condition.pointerMove=Qh.o,cp.events.condition.primaryAction=Qh.p,cp.events.condition.shiftKeyOnly=Qh.q,cp.events.condition.singleClick=Qh.r,cp.events.condition.targetNotEditable=Qh.s,cp.events.condition.touchOnly=Qh.t,cp.events.listen=le.a,cp.events.listenOnce=le.b,cp.events.unlistenByKey=le.c,cp.extent={},cp.extent.applyTransform=ce.a,cp.extent.approximatelyEquals=ce.b,cp.extent.boundingExtent=ce.c,cp.extent.buffer=ce.d,cp.extent.clone=ce.e,cp.extent.closestSquaredDistanceXY=ce.f,cp.extent.containsCoordinate=ce.g,cp.extent.containsExtent=ce.h,cp.extent.containsXY=ce.i,cp.extent.coordinateRelationship=ce.j,cp.extent.createEmpty=ce.k,cp.extent.createOrUpdate=ce.l,cp.extent.createOrUpdateEmpty=ce.m,cp.extent.createOrUpdateFromCoordinate=ce.n,cp.extent.createOrUpdateFromCoordinates=ce.o,cp.extent.createOrUpdateFromFlatCoordinates=ce.p,cp.extent.createOrUpdateFromRings=ce.q,cp.extent.equals=ce.r,cp.extent.extend=ce.s,cp.extent.extendCoordinate=ce.t,cp.extent.extendCoordinates=ce.u,cp.extent.extendFlatCoordinates=ce.v,cp.extent.extendRings=ce.w,cp.extent.extendXY=ce.x,cp.extent.forEachCorner=ce.y,cp.extent.getArea=ce.z,cp.extent.getBottomLeft=ce.A,cp.extent.getBottomRight=ce.B,cp.extent.getCenter=ce.C,cp.extent.getCorner=ce.D,cp.extent.getEnlargedArea=ce.E,cp.extent.getForViewAndSize=ce.F,cp.extent.getHeight=ce.G,cp.extent.getIntersection=ce.H,cp.extent.getIntersectionArea=ce.I,cp.extent.getMargin=ce.J,cp.extent.getSize=ce.K,cp.extent.getTopLeft=ce.L,cp.extent.getTopRight=ce.M,cp.extent.getWidth=ce.N,cp.extent.intersects=ce.O,cp.extent.intersectsSegment=ce.P,cp.extent.isEmpty=ce.Q,cp.extent.returnOrUpdate=ce.R,cp.extent.scaleFromCenter=ce.S,cp.extent.wrapX=ce.T,cp.featureloader={},cp.featureloader.loadFeaturesXhr=ue.a,cp.featureloader.setWithCredentials=ue.b,cp.featureloader.xhr=ue.c,cp.format={},cp.format.EsriJSON=bc,cp.format.Feature=hc.a,cp.format.Feature.transformExtentWithOptions=hc.b,cp.format.Feature.transformGeometryWithOptions=hc.c,cp.format.GML=Oc,cp.format.GML2=Sc.a,cp.format.GML3=wc.a,cp.format.GML32=Tc,cp.format.GMLBase=xc.b,cp.format.GMLBase.GMLNS=xc.a,cp.format.GPX=Ac.a,cp.format.GeoJSON=Mc.a,cp.format.IGC=Wc,cp.format.IIIFInfo=Ui,cp.format.JSONFeature=dc.a,cp.format.KML=qc.a,cp.format.KML.getDefaultFillStyle=qc.b,cp.format.KML.getDefaultImageStyle=qc.c,cp.format.KML.getDefaultStrokeStyle=qc.d,cp.format.KML.getDefaultStyle=qc.e,cp.format.KML.getDefaultStyleArray=qc.f,cp.format.KML.getDefaultTextStyle=qc.g,cp.format.KML.readFlatCoordinates=qc.h,cp.format.MVT=Ja.a,cp.format.OSMXML=eu,cp.format.OWS=tu.a,cp.format.Polyline=hu,cp.format.Polyline.decodeDeltas=ru,cp.format.Polyline.decodeFloats=su,cp.format.Polyline.decodeSignedIntegers=lu,cp.format.Polyline.decodeUnsignedIntegers=uu,cp.format.Polyline.encodeDeltas=nu,cp.format.Polyline.encodeFloats=iu,cp.format.Polyline.encodeSignedIntegers=au,cp.format.Polyline.encodeUnsignedInteger=du,cp.format.Polyline.encodeUnsignedIntegers=cu,cp.format.TextFeature=kc,cp.format.TopoJSON=wu,cp.format.WFS=uh,cp.format.WFS.writeFilter=function(e,t){var o=t||"1.1.0",n=Object(Ie.c)(ch(o),"Filter"),r={node:n};return Object(ge.a)(r,{version:o,filter:e}),Yd(n,e,[r]),n},cp.format.WKB=xh,cp.format.WKT=qh,cp.format.WMSCapabilities=Hh.a,cp.format.WMSGetFeatureInfo=Xh,cp.format.WMTSCapabilities=Zh.a,cp.format.XML=Kh.a,cp.format.XMLFeature=Hc.a,cp.format.filter={},cp.format.filter.And=Cu,cp.format.filter.Bbox=Pu,cp.format.filter.Comparison=Du,cp.format.filter.ComparisonBinary=zu,cp.format.filter.Contains=Iu,cp.format.filter.DWithin=Lu,cp.format.filter.Disjoint=Gu,cp.format.filter.During=Uu,cp.format.filter.EqualTo=Wu,cp.format.filter.Filter=Eu,cp.format.filter.GreaterThan=Hu,cp.format.filter.GreaterThanOrEqualTo=Xu,cp.format.filter.Intersects=Ku,cp.format.filter.IsBetween=Qu,cp.format.filter.IsLike=ed,cp.format.filter.IsNull=od,cp.format.filter.LessThan=rd,cp.format.filter.LessThanOrEqualTo=sd,cp.format.filter.LogicalNary=Su,cp.format.filter.Not=ld,cp.format.filter.NotEqualTo=ud,cp.format.filter.Or=hd,cp.format.filter.ResourceId=fd,cp.format.filter.Spatial=Au,cp.format.filter.Within=gd,cp.format.filter.and=yd,cp.format.filter.bbox=vd,cp.format.filter.between=function(e,t,o){return new Qu(e,t,o)},cp.format.filter.contains=function(e,t,o){return new Iu(e,t,o)},cp.format.filter.disjoint=function(e,t,o){return new Gu(e,t,o)},cp.format.filter.during=function(e,t,o){return new Uu(e,t,o)},cp.format.filter.dwithin=function(e,t,o,n,r){return new Lu(e,t,o,n,r)},cp.format.filter.equalTo=function(e,t,o){return new Wu(e,t,o)},cp.format.filter.greaterThan=function(e,t){return new Hu(e,t)},cp.format.filter.greaterThanOrEqualTo=function(e,t){return new Xu(e,t)},cp.format.filter.intersects=function(e,t,o){return new Ku(e,t,o)},cp.format.filter.isNull=function(e){return new od(e)},cp.format.filter.lessThan=function(e,t){return new rd(e,t)},cp.format.filter.lessThanOrEqualTo=function(e,t){return new sd(e,t)},cp.format.filter.like=function(e,t,o,n,r,i){return new ed(e,t,o,n,r,i)},cp.format.filter.not=function(e){return new ld(e)},cp.format.filter.notEqualTo=function(e,t,o){return new ud(e,t,o)},cp.format.filter.or=function(e){var t=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(hd,t))},cp.format.filter.resourceId=function(e){return new fd(e)},cp.format.filter.within=function(e,t,o){return new gd(e,t,o)},cp.format.xlink={},cp.format.xlink.readHref=Jh.a,cp.format.xsd={},cp.format.xsd.readBoolean=Cc.a,cp.format.xsd.readBooleanString=Cc.b,cp.format.xsd.readDateTime=Cc.c,cp.format.xsd.readDecimal=Cc.d,cp.format.xsd.readDecimalString=Cc.e,cp.format.xsd.readNonNegativeIntegerString=Cc.f,cp.format.xsd.readPositiveInteger=Cc.g,cp.format.xsd.readString=Cc.h,cp.format.xsd.writeBooleanTextNode=Cc.i,cp.format.xsd.writeCDATASection=Cc.j,cp.format.xsd.writeDateTimeTextNode=Cc.k,cp.format.xsd.writeDecimalTextNode=Cc.l,cp.format.xsd.writeNonNegativeIntegerTextNode=Cc.m,cp.format.xsd.writeStringTextNode=Cc.n,cp.functions={},cp.functions.FALSE=de.a,cp.functions.TRUE=de.b,cp.functions.VOID=de.c,cp.functions.memoizeOne=de.d,cp.geom={},cp.geom.Circle=Gl.a,cp.geom.Geometry=Nl.a,cp.geom.GeometryCollection=Dl.a,cp.geom.LineString=Fl.a,cp.geom.LinearRing=Ul.a,cp.geom.MultiLineString=Bl.a,cp.geom.MultiPoint=zl.a,cp.geom.MultiPolygon=Vl.a,cp.geom.Point=Ao.a,cp.geom.Polygon=g.b,cp.geom.Polygon.circular=g.a,cp.geom.Polygon.fromCircle=g.c,cp.geom.Polygon.fromExtent=g.d,cp.geom.Polygon.makeRegular=g.e,cp.geom.SimpleGeometry=Wl.a,cp.geom.SimpleGeometry.getStrideForLayout=Wl.b,cp.geom.SimpleGeometry.transformGeom2D=Wl.c,cp.geom.flat={},cp.geom.flat.area={},cp.geom.flat.area.linearRing=ql.a,cp.geom.flat.area.linearRings=ql.b,cp.geom.flat.area.linearRingss=ql.c,cp.geom.flat.center={},cp.geom.flat.center.linearRingss=Hl.a,cp.geom.flat.closest={},cp.geom.flat.closest.arrayMaxSquaredDelta=Yl.a,cp.geom.flat.closest.assignClosestArrayPoint=Yl.b,cp.geom.flat.closest.assignClosestMultiArrayPoint=Yl.c,cp.geom.flat.closest.assignClosestPoint=Yl.d,cp.geom.flat.closest.maxSquaredDelta=Yl.e,cp.geom.flat.closest.multiArrayMaxSquaredDelta=Yl.f,cp.geom.flat.contains={},cp.geom.flat.contains.linearRingContainsExtent=Xl.a,cp.geom.flat.contains.linearRingContainsXY=Xl.b,cp.geom.flat.contains.linearRingsContainsXY=Xl.c,cp.geom.flat.contains.linearRingssContainsXY=Xl.d,cp.geom.flat.deflate={},cp.geom.flat.deflate.deflateCoordinate=Zl.a,cp.geom.flat.deflate.deflateCoordinates=Zl.b,cp.geom.flat.deflate.deflateCoordinatesArray=Zl.c,cp.geom.flat.deflate.deflateMultiCoordinatesArray=Zl.d,cp.geom.flat.flip={},cp.geom.flat.flip.flipXY=Kl,cp.geom.flat.geodesic={},cp.geom.flat.geodesic.greatCircleArc=Jl.a,cp.geom.flat.geodesic.meridian=Jl.b,cp.geom.flat.geodesic.parallel=Jl.c,cp.geom.flat.inflate={},cp.geom.flat.inflate.inflateCoordinates=Ql.a,cp.geom.flat.inflate.inflateCoordinatesArray=Ql.b,cp.geom.flat.inflate.inflateMultiCoordinatesArray=Ql.c,cp.geom.flat.interiorpoint={},cp.geom.flat.interiorpoint.getInteriorPointOfArray=$l.a,cp.geom.flat.interiorpoint.getInteriorPointsOfMultiArray=$l.b,cp.geom.flat.interpolate={},cp.geom.flat.interpolate.interpolatePoint=ec.a,cp.geom.flat.interpolate.lineStringCoordinateAtM=ec.b,cp.geom.flat.interpolate.lineStringsCoordinateAtM=ec.c,cp.geom.flat.intersectsextent={},cp.geom.flat.intersectsextent.intersectsLineString=tc.a,cp.geom.flat.intersectsextent.intersectsLineStringArray=tc.b,cp.geom.flat.intersectsextent.intersectsLinearRing=tc.c,cp.geom.flat.intersectsextent.intersectsLinearRingArray=tc.d,cp.geom.flat.intersectsextent.intersectsLinearRingMultiArray=tc.e,cp.geom.flat.length={},cp.geom.flat.length.lineStringLength=oc.a,cp.geom.flat.length.linearRingLength=oc.b,cp.geom.flat.orient={},cp.geom.flat.orient.linearRingIsClockwise=nc.a,cp.geom.flat.orient.linearRingsAreOriented=nc.b,cp.geom.flat.orient.linearRingssAreOriented=nc.c,cp.geom.flat.orient.orientLinearRings=nc.d,cp.geom.flat.orient.orientLinearRingsArray=nc.e,cp.geom.flat.reverse={},cp.geom.flat.reverse.coordinates=rc.a,cp.geom.flat.segments={},cp.geom.flat.segments.forEach=ic.a,cp.geom.flat.simplify={},cp.geom.flat.simplify.douglasPeucker=sc.a,cp.geom.flat.simplify.douglasPeuckerArray=sc.b,cp.geom.flat.simplify.douglasPeuckerMultiArray=sc.c,cp.geom.flat.simplify.quantize=sc.d,cp.geom.flat.simplify.quantizeArray=sc.e,cp.geom.flat.simplify.quantizeMultiArray=sc.f,cp.geom.flat.simplify.radialDistance=sc.g,cp.geom.flat.simplify.simplifyLineString=sc.h,cp.geom.flat.simplify.snap=sc.i,cp.geom.flat.straightchunk={},cp.geom.flat.straightchunk.matchingChunk=ac.a,cp.geom.flat.textpath={},cp.geom.flat.textpath.drawTextOnPath=lc.a,cp.geom.flat.topology={},cp.geom.flat.topology.lineStringIsClosed=function(e,t,o,n){var r=o-n;return e[t]===e[r]&&e[t+1]===e[r+1]&&(o-t)/n>3&&!!Object(ql.a)(e,t,o,n)},cp.geom.flat.transform={},cp.geom.flat.transform.rotate=cc.a,cp.geom.flat.transform.scale=cc.b,cp.geom.flat.transform.transform2D=cc.c,cp.geom.flat.transform.translate=cc.d,cp.has={},cp.has.DEVICE_PIXEL_RATIO=he.a,cp.has.FIREFOX=he.b,cp.has.IMAGE_DECODE=he.c,cp.has.MAC=he.d,cp.has.PASSIVE_EVENT_LISTENERS=he.e,cp.has.SAFARI=he.f,cp.has.WEBKIT=he.g,cp.has.WORKER_OFFSCREEN_CANVAS=he.h,cp.interaction={},cp.interaction.DoubleClickZoom=gl.a,cp.interaction.DragAndDrop=yl.b,cp.interaction.DragAndDrop.DragAndDropEvent=yl.a,cp.interaction.DragBox=vl.b,cp.interaction.DragBox.DragBoxEvent=vl.a,cp.interaction.DragPan=_l.a,cp.interaction.DragRotate=bl.a,cp.interaction.DragRotateAndZoom=wl.a,cp.interaction.DragZoom=El.a,cp.interaction.Draw=Ol.d,cp.interaction.Draw.DrawEvent=Ol.a,cp.interaction.Draw.createBox=Ol.b,cp.interaction.Draw.createRegularPolygon=Ol.c,cp.interaction.Extent=Sl.b,cp.interaction.Extent.ExtentEvent=Sl.a,cp.interaction.Interaction=xl.a,cp.interaction.Interaction.pan=xl.b,cp.interaction.Interaction.zoomByDelta=xl.c,cp.interaction.KeyboardPan=Cl.a,cp.interaction.KeyboardZoom=jl.a,cp.interaction.Modify=Pl.b,cp.interaction.Modify.ModifyEvent=Pl.a,cp.interaction.MouseWheelZoom=Tl.a,cp.interaction.PinchRotate=Al.a,cp.interaction.PinchZoom=Ml.a,cp.interaction.Pointer=Il.b,cp.interaction.Pointer.centroid=Il.a,cp.interaction.Select=Rl.b,cp.interaction.Select.SelectEvent=Rl.a,cp.interaction.Snap=Ll.a,cp.interaction.Translate=kl.b,cp.interaction.Translate.TranslateEvent=kl.a,cp.interaction.defaults=pe.a,cp.layer={},cp.layer.Base=Da.a,cp.layer.BaseImage=Fa.a,cp.layer.BaseTile=Ua.a,cp.layer.BaseVector=oa.a,cp.layer.Graticule=Ba.a,cp.layer.Group=za.a,cp.layer.Heatmap=Za,cp.layer.Image=ps.a,cp.layer.Layer=Ka.a,cp.layer.Layer.inView=Ka.b,cp.layer.MapboxVector=ll,cp.layer.MapboxVector.getMapboxPath=tl,cp.layer.MapboxVector.normalizeGlyphsUrl=nl,cp.layer.MapboxVector.normalizeSourceUrl=il,cp.layer.MapboxVector.normalizeSpriteUrl=ol,cp.layer.MapboxVector.normalizeStyleUrl=rl,cp.layer.Tile=ms.a,cp.layer.Vector=Va.a,cp.layer.VectorImage=ul,cp.layer.VectorTile=Qa.a,cp.layer.WebGLPoints=hl,cp.layer.WebGLTile=ml,cp.loadingstrategy={},cp.loadingstrategy.all=fe.a,cp.loadingstrategy.bbox=fe.b,cp.loadingstrategy.tile=fe.c,cp.math={},cp.math.clamp=v.a,cp.math.cosh=v.b,cp.math.lerp=v.c,cp.math.log2=v.d,cp.math.modulo=v.e,cp.math.solveLinearSystem=v.f,cp.math.squaredDistance=v.g,cp.math.squaredSegmentDistance=v.h,cp.math.toDegrees=v.i,cp.math.toRadians=v.j,cp.net={},cp.net.ClientError=me.a,cp.net.ResponseError=me.b,cp.net.getJSON=me.c,cp.net.jsonp=me.d,cp.net.overrideXHR=me.e,cp.net.resolveUrl=me.f,cp.net.restoreXHR=me.g,cp.obj={},cp.obj.assign=ge.a,cp.obj.clear=ge.b,cp.obj.getValues=ge.c,cp.obj.isEmpty=ge.d,cp.proj={},cp.proj.Projection=Ra.a,cp.proj.Units={},cp.proj.Units.METERS_PER_UNIT=pi.a,cp.proj.Units.fromCode=pi.c,cp.proj.addCommon=y.c,cp.proj.addCoordinateTransforms=y.d,cp.proj.addEquivalentProjections=y.e,cp.proj.addEquivalentTransforms=y.f,cp.proj.addProjection=y.g,cp.proj.addProjections=y.h,cp.proj.clearAllProjections=y.i,cp.proj.clearUserProjection=y.j,cp.proj.cloneTransform=y.k,cp.proj.createProjection=y.l,cp.proj.createSafeCoordinateTransform=y.m,cp.proj.createTransformFromCoordinateTransform=y.n,cp.proj.epsg3857={},cp.proj.epsg3857.EXTENT=La.a,cp.proj.epsg3857.HALF_SIZE=La.b,cp.proj.epsg3857.MAX_SAFE_Y=La.c,cp.proj.epsg3857.PROJECTIONS=La.d,cp.proj.epsg3857.RADIUS=La.e,cp.proj.epsg3857.WORLD_EXTENT=La.f,cp.proj.epsg3857.fromEPSG4326=La.g,cp.proj.epsg3857.toEPSG4326=La.h,cp.proj.epsg4326={},cp.proj.epsg4326.EXTENT=ka.a,cp.proj.epsg4326.METERS_PER_UNIT=ka.b,cp.proj.epsg4326.PROJECTIONS=ka.c,cp.proj.epsg4326.RADIUS=ka.d,cp.proj.equivalent=y.o,cp.proj.fromLonLat=y.p,cp.proj.fromUserCoordinate=y.q,cp.proj.fromUserExtent=y.r,cp.proj.fromUserResolution=y.s,cp.proj.get=y.t,cp.proj.getPointResolution=y.u,cp.proj.getTransform=y.v,cp.proj.getTransformFromProjections=y.w,cp.proj.getUserProjection=y.x,cp.proj.identityTransform=y.y,cp.proj.proj4={},cp.proj.proj4.register=function(e){var t,o,n=Object.keys(e.defs),r=n.length;for(t=0;t<r;++t){var i=n[t];if(!Object(y.t)(i)){var s=e.defs(i),a=s.units;a||"longlat"!==s.projName||(a=pi.b.DEGREES),Object(y.g)(new Ra.a({code:i,axisOrientation:s.axis,metersPerUnit:s.to_meter,units:a}))}}for(t=0;t<r;++t){var l=n[t],c=Object(y.t)(l);for(o=0;o<r;++o){var u=n[o],d=Object(y.t)(u);if(!Object(Ga.c)(l,u))if(e.defs[l]===e.defs[u])Object(y.e)([c,d]);else{var h=e(l,u);Object(y.d)(c,d,Object(y.m)(c,d,h.forward),Object(y.m)(d,c,h.inverse))}}}},cp.proj.projections={},cp.proj.projections.add=Na.a,cp.proj.projections.clear=Na.b,cp.proj.projections.get=Na.c,cp.proj.setUserProjection=y.z,cp.proj.toLonLat=y.A,cp.proj.toUserCoordinate=y.B,cp.proj.toUserExtent=y.C,cp.proj.toUserResolution=y.D,cp.proj.transform=y.E,cp.proj.transformExtent=y.F,cp.proj.transformWithProjections=y.G,cp.proj.transforms={},cp.proj.transforms.add=Ga.a,cp.proj.transforms.clear=Ga.b,cp.proj.transforms.get=Ga.c,cp.proj.transforms.remove=Ga.d,cp.proj.useGeographic=y.H,cp.render={},cp.render.Box=va.a,cp.render.Event=lt.a,cp.render.Feature=_a.a,cp.render.VectorContext=ba.a,cp.render.canvas={},cp.render.canvas.Builder=Ea.a,cp.render.canvas.BuilderGroup=Oa.a,cp.render.canvas.Executor=Sa.a,cp.render.canvas.ExecutorGroup=xa.a,cp.render.canvas.ExecutorGroup.getPixelIndexArray=xa.b,cp.render.canvas.ImageBuilder=Ca.a,cp.render.canvas.Immediate=ja.a,cp.render.canvas.Instruction={},cp.render.canvas.Instruction.beginPathInstruction=Pa.a,cp.render.canvas.Instruction.closePathInstruction=Pa.b,cp.render.canvas.Instruction.fillInstruction=Pa.d,cp.render.canvas.Instruction.strokeInstruction=Pa.e,cp.render.canvas.LineStringBuilder=Ta.a,cp.render.canvas.PolygonBuilder=Aa.a,cp.render.canvas.TextBuilder=Ma.b,cp.render.canvas.checkedFonts=wa.a,cp.render.canvas.defaultFillStyle=wa.b,cp.render.canvas.defaultFont=wa.c,cp.render.canvas.defaultLineCap=wa.d,cp.render.canvas.defaultLineDash=wa.e,cp.render.canvas.defaultLineDashOffset=wa.f,cp.render.canvas.defaultLineJoin=wa.g,cp.render.canvas.defaultLineWidth=wa.h,cp.render.canvas.defaultMiterLimit=wa.i,cp.render.canvas.defaultPadding=wa.j,cp.render.canvas.defaultStrokeStyle=wa.k,cp.render.canvas.defaultTextAlign=wa.l,cp.render.canvas.defaultTextBaseline=wa.m,cp.render.canvas.drawImageOrLabel=wa.n,cp.render.canvas.hitdetect={},cp.render.canvas.hitdetect.HIT_DETECT_RESOLUTION=Ia.a,cp.render.canvas.hitdetect.createHitDetectionImageData=Ia.b,cp.render.canvas.hitdetect.hitDetect=Ia.c,cp.render.canvas.labelCache=wa.o,cp.render.canvas.measureAndCacheTextWidth=wa.p,cp.render.canvas.measureTextHeight=wa.q,cp.render.canvas.measureTextWidth=wa.r,cp.render.canvas.measureTextWidths=wa.s,cp.render.canvas.registerFont=wa.t,cp.render.canvas.rotateAtOffset=wa.u,cp.render.canvas.textHeights=wa.v,cp.render.getRenderPixel=ye.a,cp.render.getVectorContext=ye.b,cp.render.toContext=ye.c,cp.renderer={},cp.renderer.Composite=$s.a,cp.renderer.Layer=at.a,cp.renderer.Map=ea.a,cp.renderer.canvas={},cp.renderer.canvas.ImageLayer=ca.a,cp.renderer.canvas.Layer=ua.a,cp.renderer.canvas.TileLayer=da.a,cp.renderer.canvas.VectorImageLayer=ga,cp.renderer.canvas.VectorLayer=ha.a,cp.renderer.canvas.VectorTileLayer=ya.a,cp.renderer.vector={},cp.renderer.vector.defaultOrder=ta.a,cp.renderer.vector.getSquaredTolerance=ta.b,cp.renderer.vector.getTolerance=ta.c,cp.renderer.vector.renderFeature=ta.d,cp.renderer.webgl={},cp.renderer.webgl.Layer=vt,cp.renderer.webgl.Layer.colorDecodeId=yt,cp.renderer.webgl.Layer.colorEncodeId=gt,cp.renderer.webgl.Layer.getBlankImageData=function(){var e=document.createElement("canvas").getContext("2d").createImageData(1,1);return e.data[0]=255,e.data[1]=255,e.data[2]=255,e.data[3]=255,e},cp.renderer.webgl.Layer.writePointFeatureToBuffers=function(e,t,o,n,r,i){var s=3+r,a=e[t+0],l=e[t+1],c=pt;c.length=r;for(var u=0;u<c.length;u++)c[u]=e[t+2+u];var d=i?i.vertexPosition:0,h=i?i.indexPosition:0,p=d/s;return mt(o,d,a,l,0),c.length&&o.set(c,d+3),mt(o,d+=s,a,l,1),c.length&&o.set(c,d+3),mt(o,d+=s,a,l,2),c.length&&o.set(c,d+3),mt(o,d+=s,a,l,3),c.length&&o.set(c,d+3),d+=s,n[h++]=p,n[h++]=p+1,n[h++]=p+3,n[h++]=p+1,n[h++]=p+2,n[h++]=p+3,ft.vertexPosition=d,ft.indexPosition=h,ft},cp.renderer.webgl.PointsLayer=la,cp.renderer.webgl.TileLayer=Pt,cp.renderer.webgl.TileLayer.Attributes=wt,cp.renderer.webgl.TileLayer.Uniforms=bt,cp.reproj={},cp.reproj.Image=Zs.a,cp.reproj.Tile=Ks.a,cp.reproj.Triangulation=Js.a,cp.reproj.calculateSourceExtentResolution=ve.a,cp.reproj.calculateSourceResolution=ve.b,cp.reproj.common={},cp.reproj.common.ENABLE_RASTER_REPROJECTION=Qs.a,cp.reproj.common.ERROR_THRESHOLD=Qs.b,cp.reproj.render=ve.c,cp.resolutionconstraint={},cp.resolutionconstraint.createMinMaxResolution=_e.a,cp.resolutionconstraint.createSnapToPower=_e.b,cp.resolutionconstraint.createSnapToResolutions=_e.c,cp.rotationconstraint={},cp.rotationconstraint.createSnapToN=be.a,cp.rotationconstraint.createSnapToZero=be.b,cp.rotationconstraint.disable=be.c,cp.rotationconstraint.none=be.d,cp.size={},cp.size.buffer=we.a,cp.size.hasArea=we.b,cp.size.scale=we.c,cp.size.toSize=we.d,cp.source={},cp.source.BingMaps=xo,cp.source.BingMaps.quadKey=So,cp.source.CartoDB=Po,cp.source.Cluster=Ro,cp.source.DataTile=No,cp.source.GeoTIFF=xi,cp.source.IIIF=Vi,cp.source.Image=Wi.b,cp.source.Image.ImageSourceEvent=Wi.a,cp.source.Image.defaultImageLoadFunction=Wi.c,cp.source.ImageArcGISRest=Hi,cp.source.ImageCanvas=Xi,cp.source.ImageMapGuide=Ki,cp.source.ImageStatic=Qi,cp.source.ImageWMS=$i.a,cp.source.OGCMapTile=ls,cp.source.OGCVectorTile=ds,cp.source.OSM=hs.b,cp.source.OSM.ATTRIBUTION=hs.a,cp.source.Raster=Ms,cp.source.Raster.Processor=ws,cp.source.Raster.RasterSourceEvent=Cs,cp.source.Raster.newImageData=vs,cp.source.Source=fs.a,cp.source.Stamen=Gs,cp.source.Tile=ko.b,cp.source.Tile.TileSourceEvent=ko.a,cp.source.TileArcGISRest=Ds,cp.source.TileDebug=Us,cp.source.TileImage=Eo.a,cp.source.TileJSON=Bs.a,cp.source.TileWMS=zs.a,cp.source.UTFGrid=qs,cp.source.UTFGrid.CustomTile=Ws,cp.source.UrlTile=Hs.a,cp.source.Vector=Mo.b,cp.source.Vector.VectorSourceEvent=Mo.a,cp.source.VectorTile=cs.a,cp.source.VectorTile.defaultLoadFunction=cs.b,cp.source.WMTS=Ys.a,cp.source.WMTS.optionsFromCapabilities=Ys.b,cp.source.XYZ=Co.a,cp.source.Zoomify=Ai,cp.source.Zoomify.CustomTile=Ti,cp.source.common={},cp.source.common.DEFAULT_WMS_VERSION=Xs.a,cp.source.common.IMAGE_SMOOTHING_DISABLED=Xs.b,cp.source.ogcTileUtil={},cp.source.ogcTileUtil.getMapTileUrlTemplate=os,cp.source.ogcTileUtil.getTileSetInfo=is,cp.source.ogcTileUtil.getVectorTileUrlTemplate=ns,cp.sphere={},cp.sphere.DEFAULT_RADIUS=Ee.a,cp.sphere.getArea=Ee.b,cp.sphere.getDistance=Ee.c,cp.sphere.getLength=Ee.d,cp.sphere.offset=Ee.e,cp.string={},cp.string.compareVersions=Oe.a,cp.string.padNumber=Oe.b,cp.structs={},cp.structs.LRUCache=et.a,cp.structs.LinkedList=_o,cp.structs.PriorityQueue=bo.b,cp.structs.PriorityQueue.DROP=bo.a,cp.structs.RBush=wo.a,cp.style={},cp.style.Circle=lo.a,cp.style.Fill=co.a,cp.style.Icon=uo.a,cp.style.IconImage=ho.a,cp.style.IconImage.get=ho.b,cp.style.IconImageCache=po.a,cp.style.IconImageCache.shared=po.b,cp.style.Image=fo.a,cp.style.RegularShape=mo.a,cp.style.Stroke=go.a,cp.style.Style=yo.c,cp.style.Style.createDefaultStyle=yo.a,cp.style.Style.createEditingStyle=yo.b,cp.style.Style.toFunction=yo.d,cp.style.Text=vo.a,cp.style.expressions={},cp.style.expressions.Operators=Gt,cp.style.expressions.arrayToGlsl=Ut,cp.style.expressions.colorToGlsl=Bt,cp.style.expressions.expressionToGlsl=Wt,cp.style.expressions.getStringNumberEquivalent=zt,cp.style.expressions.getValueType=Nt,cp.style.expressions.isTypeUnique=Dt,cp.style.expressions.numberToGlsl=Ft,cp.style.expressions.stringToGlsl=Vt,cp.style.expressions.uniformNameForVariable=eo,cp.tilecoord={},cp.tilecoord.createOrUpdate=Se.a,cp.tilecoord.fromKey=Se.b,cp.tilecoord.getCacheKeyForTileKey=Se.c,cp.tilecoord.getKey=Se.d,cp.tilecoord.getKeyZXY=Se.e,cp.tilecoord.hash=Se.f,cp.tilecoord.withinExtentAndZ=Se.g,cp.tilegrid={},cp.tilegrid.TileGrid=io.a,cp.tilegrid.WMTS=so.b,cp.tilegrid.WMTS.createFromCapabilitiesMatrixSet=so.a,cp.tilegrid.common={},cp.tilegrid.common.DEFAULT_MAX_ZOOM=ao.a,cp.tilegrid.common.DEFAULT_TILE_SIZE=ao.b,cp.tilegrid.createForExtent=xe.a,cp.tilegrid.createForProjection=xe.b,cp.tilegrid.createXYZ=xe.c,cp.tilegrid.extentFromProjection=xe.d,cp.tilegrid.getForProjection=xe.e,cp.tilegrid.wrapX=xe.f,cp.tileurlfunction={},cp.tileurlfunction.createFromTemplate=Ce.a,cp.tileurlfunction.createFromTemplates=Ce.b,cp.tileurlfunction.createFromTileUrlFunctions=Ce.c,cp.tileurlfunction.expandUrl=Ce.d,cp.tileurlfunction.nullTileUrlFunction=Ce.e,cp.transform={},cp.transform.apply=je.a,cp.transform.compose=je.b,cp.transform.composeCssTransform=je.c,cp.transform.create=je.d,cp.transform.determinant=je.e,cp.transform.invert=je.f,cp.transform.makeInverse=je.g,cp.transform.makeScale=je.h,cp.transform.multiply=je.i,cp.transform.reset=je.j,cp.transform.rotate=je.k;cp.transform.scale=je.l,cp.transform.set=je.m,cp.transform.setFromArray=je.n,cp.transform.toString=je.o,cp.transform.translate=je.p,cp.uri={},cp.uri.appendParams=Pe.a,cp.util={},cp.util.VERSION=Te.a,cp.util.abstract=Te.b,cp.util.getUid=Te.c,cp.vec={},cp.vec.mat4={},cp.vec.mat4.create=Fe,cp.vec.mat4.fromTransform=Ue,cp.webgl={},cp.webgl.ARRAY_BUFFER=34962,cp.webgl.Buffer=ke,cp.webgl.Buffer.getArrayClassForType=Le,cp.webgl.DYNAMIC_DRAW=35048,cp.webgl.ELEMENT_ARRAY_BUFFER=34963,cp.webgl.FLOAT=5126,cp.webgl.Helper=Je,cp.webgl.Helper.computeAttributesStride=Ze,cp.webgl.PostProcessingPass=De,cp.webgl.RenderTarget=$e,cp.webgl.STATIC_DRAW=35044,cp.webgl.STREAM_DRAW=35040,cp.webgl.ShaderBuilder={},cp.webgl.ShaderBuilder.ShaderBuilder=no,cp.webgl.ShaderBuilder.parseLiteralStyle=ro,cp.webgl.TileTexture=st,cp.webgl.UNSIGNED_BYTE=5121,cp.webgl.UNSIGNED_INT=5125,cp.webgl.UNSIGNED_SHORT=5123,cp.webgl.getContext=Me,cp.webgl.getSupportedExtensions=function(){if(!r){var e=Me(document.createElement("canvas"));e&&(r=e.getSupportedExtensions())}return r},cp.xml={},cp.xml.OBJECT_PROPERTY_NODE_FACTORY=Ie.a,cp.xml.XML_SCHEMA_INSTANCE_URI=Ie.b,cp.xml.createElementNS=Ie.c,cp.xml.getAllTextContent=Ie.d,cp.xml.getAllTextContent_=Ie.e,cp.xml.getAttributeNS=Ie.f,cp.xml.getDocument=Ie.g,cp.xml.getXMLSerializer=Ie.h,cp.xml.isDocument=Ie.i,cp.xml.makeArrayExtender=Ie.j,cp.xml.makeArrayPusher=Ie.k,cp.xml.makeArraySerializer=Ie.l,cp.xml.makeChildAppender=Ie.m,cp.xml.makeObjectPropertyPusher=Ie.n,cp.xml.makeObjectPropertySetter=Ie.o,cp.xml.makeReplacer=Ie.p,cp.xml.makeSequence=Ie.q,cp.xml.makeSimpleNodeFactory=Ie.r,cp.xml.makeStructureNS=Ie.s,cp.xml.parse=Ie.t,cp.xml.parseNode=Ie.u,cp.xml.pushParseAndPop=Ie.v,cp.xml.pushSerializeAndPop=Ie.w,cp.xml.registerDocument=Ie.x,cp.xml.registerXMLSerializer=Ie.y,cp.xml.serialize=Ie.z;t.default=cp},"./node_modules/eventbusjs/lib/eventbus.min.js":function(e,t,o){var n;e.exports=((n=function(){this.listeners={}}).prototype={addEventListener:function(e,t,o){for(var n=[],r=arguments.length,i=0;i<r;i++)n.push(arguments[i]);n=n.length>3?n.splice(3,n.length-1):[],void 0!==this.listeners[e]?this.listeners[e].push({scope:o,callback:t,args:n}):this.listeners[e]=[{scope:o,callback:t,args:n}]},removeEventListener:function(e,t,o){if(void 0!==this.listeners[e]){for(var n=this.listeners[e].length,r=[],i=0;i<n;i++){var s=this.listeners[e][i];s.scope==o&&s.callback==t||r.push(s)}this.listeners[e]=r}},hasEventListener:function(e,t,o){if(void 0!==this.listeners[e]){var n=this.listeners[e].length;if(void 0===t&&void 0===o)return n>0;for(var r=0;r<n;r++){var i=this.listeners[e][r];if((!o||i.scope==o)&&i.callback==t)return!0}}return!1},dispatch:function(e,t){for(var o={type:e,target:t},n=[],r=arguments.length,i=0;i<r;i++)n.push(arguments[i]);if(n=n.length>2?n.splice(2,n.length-1):[],n=[o].concat(n),void 0!==this.listeners[e]){var s=this.listeners[e].slice(),a=s.length;for(i=0;i<a;i++){var l=s[i];if(l&&l.callback){var c=n.concat(l.args);l.callback.apply(l.scope,c)}}}},getEvents:function(){var e="";for(var t in this.listeners)for(var o=this.listeners[t].length,n=0;n<o;n++){var r=this.listeners[t][n];e+=r.scope&&r.scope.className?r.scope.className:"anonymous",e+=" listen for '"+t+"'\n"}return e}},new n)},"./node_modules/geoportal-access-lib/package.json":function(e){e.exports=JSON.parse('{"_from":"geoportal-access-lib@3.0.5","_id":"geoportal-access-lib@3.0.5","_inBundle":false,"_integrity":"sha512-ruj6iXD7XStS1YuwSoTUYyQEsdP5BMLTiz7kS7hLwiB0g42SF4+ALH3aLHpthQOpXcNJb5XsCfS7P8K1BKZOZg==","_location":"/geoportal-access-lib","_phantomChildren":{},"_requested":{"type":"version","registry":true,"raw":"geoportal-access-lib@3.0.5","name":"geoportal-access-lib","escapedName":"geoportal-access-lib","rawSpec":"3.0.5","saveSpec":null,"fetchSpec":"3.0.5"},"_requiredBy":["/geoportal-extensions-itowns","/geoportal-extensions-openlayers"],"_resolved":"https://registry.npmjs.org/geoportal-access-lib/-/geoportal-access-lib-3.0.5.tgz","_shasum":"2cde6e6ea689765c25f455fe1109d678a3b5ab2d","_spec":"geoportal-access-lib@3.0.5","_where":"/home/runner/work/geoportal-sdk/geoportal-sdk/node_modules/geoportal-extensions-itowns","author":{"name":"IGNF"},"bugs":{"url":"https://github.com/IGNF/geoportal-access-lib/issues"},"bundleDependencies":false,"date":"03/12/2021","dependencies":{"es6-promise":"^4.2.4","node-fetch":"^2.6.1","xmldom":"^0.1.27"},"deprecated":false,"description":"French Geoportal resources access library","devDependencies":{"@babel/core":"^7.12.10","@babel/plugin-transform-template-literals":"^7.12.1","@babel/preset-env":"^7.12.11","babel-loader":"^8.2.2","chai":"^4.1.2","clean-webpack-plugin":"^3.0.0","copy-webpack-plugin":"^5.1.2","eslint":"^7.18.0","eslint-config-standard":"^16.0.2","eslint-loader":"^4.0.2","eslint-plugin-import":"^2.22.1","eslint-plugin-node":"^11.1.0","eslint-plugin-promise":"^4.2.1","eslint-plugin-standard":"^5.0.0","glob":"^7.1.2","handlebars-layouts":"^3.1.4","handlebars-webpack-plugin":"^1.4.1","html-webpack-plugin":"^4.5.1","istanbul-instrumenter-loader":"^3.0.1","jsdoc-webpack-plugin":"^0.3.0","loglevel":"^1.6.1","mocha":"^7.2.0","mocha-loader":"^5.1.5","mocha-webpack":"^2.0.0-beta.0","mochawesome":"^6.2.1","nyc":"^15.1.0","path":"^0.12.7","replace-bundle-webpack-plugin":"^1.0.0","sinon":"^9.2.4","sinon-es6":"0.0.3","speed-measure-webpack-plugin":"^1.4.2","string-template":"^1.0.0","terser-webpack-plugin":"^2.3.8","webpack":"^4.46.0","webpack-cli":"^3.3.12","webpack-dev-server":"^3.11.2","webpack-node-externals":"^2.5.2","webpack-shell-plugin":"^0.5.0"},"homepage":"https://github.com/IGNF/geoportal-access-lib#readme","keywords":["geoportail","webservice","javascript","es6"],"license":"CECILL-B","main":"dist/GpServices-src.js","module":"src/Gp.js","name":"geoportal-access-lib","nyc":{"include":["src/**/*.js"],"instrument":false,"sourceMap":false},"optionalDependencies":{},"peerDependencies":{},"repository":{"type":"git","url":"git+https://github.com/IGNF/geoportal-access-lib.git"},"scripts":{"build":"webpack --mode=none","build:dev":"webpack --mode=development","build:prod":"webpack --mode=production","clean":"echo \\"Warning: no yet implemented!\\" && exit 0","cover":"nyc --reporter=lcov --reporter=text npm run test","doc":"npm run doc:serve","doc:serve":"webpack-dev-server --content-base jsdoc --port 9001 --open","eslint":"eslint src/","sample":"npm run sample:serve","sample:serve":"webpack-dev-server --mode=none --open-page samples/index-src.html --https --content-base . --output-public-path \'/dist/\' --port 9001 --open","sample:serve:dev":"webpack-dev-server --mode=development --open-page samples/index-map.html --content-base . --output-public-path \'/dist/\' --port 9001 --open","sample:serve:prod":"webpack-dev-server --mode=production --open-page samples/index-prod.html --content-base . --output-public-path \'/dist/\' --port 9001 --open","setup":"npm install","test":"mocha-webpack --reporter mochawesome --reporter-options reportDir=test-report,reportFilename=index --webpack-config ./test/webpack/webpack.test.js --glob \\"test_*.js\\" test/spec/","test:end-to-end:serve":"webpack-dev-server --hot --config ./test/webpack/webpack.end-to-end.serve.js","test:end-to-end:serve:docker":"webpack-dev-server --hot --config ./test/webpack/webpack.end-to-end.serve.docker.js","test:serve":"webpack-dev-server --hot --config ./test/webpack/webpack.test.serve.js","test:serve:docker":"webpack-dev-server --hot --config ./test/webpack/webpack.test.serve.docker.js"},"version":"3.0.5"}')},"./node_modules/geoportal-extensions-openlayers/dist/GpPluginOpenLayers-src.css":function(e,t,o){},"./node_modules/geoportal-extensions-openlayers/package.json":function(e){e.exports=JSON.parse('{"_from":"geoportal-extensions-openlayers@3.2.7","_id":"geoportal-extensions-openlayers@3.2.7","_inBundle":false,"_integrity":"sha512-ZTu3mEaHeVTtzm1bPisz+r/j/a5uJwaXCmKl1kDjAtf32u/Z9mmEALYEXXCs6Vwm44q67gi6fJWYCur4pe0N4Q==","_location":"/geoportal-extensions-openlayers","_phantomChildren":{},"_requested":{"type":"version","registry":true,"raw":"geoportal-extensions-openlayers@3.2.7","name":"geoportal-extensions-openlayers","escapedName":"geoportal-extensions-openlayers","rawSpec":"3.2.7","saveSpec":null,"fetchSpec":"3.2.7"},"_requiredBy":["#DEV:/"],"_resolved":"https://registry.npmjs.org/geoportal-extensions-openlayers/-/geoportal-extensions-openlayers-3.2.7.tgz","_shasum":"509f541cae96b288418c18d144a1619ab72e9a0f","_spec":"geoportal-extensions-openlayers@3.2.7","_where":"/home/runner/work/geoportal-sdk/geoportal-sdk","author":{"name":"IGNF"},"bundleDependencies":false,"date":"28/01/2022","dependencies":{"@mapbox/mapbox-gl-style-spec":"13.20.1","eventbusjs":"0.2.0","geoportal-access-lib":"3.0.5","loglevel":"1.6.6","node-fetch":"^2.6.1","ol":"6.9.0","ol-mapbox-style":"6.7.0","proj4":"2.7.2","sortablejs":"1.8.4","xmldom":"^0.1.27"},"deprecated":false,"description":"French Geoportal Extensions for OpenLayers","devDependencies":{},"directories":{},"files":["dist/","src/","LICENCE.md","README.md","package.json"],"homepage":"https://geoservices.ign.fr/documentation/utilisation_web/extension-openlayers.html","keywords":["geoportail","plugin","javascript","OpenLayers"],"license":"CECILL-B","main":"dist/GpPluginOpenLayers-src.js","module":"src/OpenLayers/index.js","name":"geoportal-extensions-openlayers","peerDependencies":{},"repository":{"url":"git+https://github.com/IGNF/geoportal-extensions.git","type":"git"},"scripts":{},"version":"3.2.7"}')},"./node_modules/geoportal-extensions-openlayers/src/Common/CSS/GPboostRelief.css":function(e,t,o){},"./node_modules/geoportal-extensions-openlayers/src/Common/CSS/GPdrawing.css":function(e,t,o){},"./node_modules/geoportal-extensions-openlayers/src/Common/CSS/GPelevationPath.css":function(e,t,o){},"./node_modules/geoportal-extensions-openlayers/src/Common/CSS/GPgeneralWidget.css":function(e,t,o){},"./node_modules/geoportal-extensions-openlayers/src/Common/CSS/GPgetFeatureInfo.css":function(e,t,o){},"./node_modules/geoportal-extensions-openlayers/src/Common/CSS/GPisochron.css":function(e,t,o){},"./node_modules/geoportal-extensions-openlayers/src/Common/CSS/GPlayerSwitcher.css":function(e,t,o){},"./node_modules/geoportal-extensions-openlayers/src/Common/CSS/GPlocation.css":function(e,t,o){},"./node_modules/geoportal-extensions-openlayers/src/Common/CSS/GPmeasureArea.css":function(e,t,o){},"./node_modules/geoportal-extensions-openlayers/src/Common/CSS/GPmeasureAzimuth.css":function(e,t,o){},"./node_modules/geoportal-extensions-openlayers/src/Common/CSS/GPmeasureLength.css":function(e,t,o){},"./node_modules/geoportal-extensions-openlayers/src/Common/CSS/GPmeasureToolTip.css":function(e,t,o){},"./node_modules/geoportal-extensions-openlayers/src/Common/CSS/GPmousePosition.css":function(e,t,o){},"./node_modules/geoportal-extensions-openlayers/src/Common/CSS/GPreverseGeocoding.css":function(e,t,o){},"./node_modules/geoportal-extensions-openlayers/src/Common/CSS/GProute.css":function(e,t,o){},"./node_modules/geoportal-extensions-openlayers/src/Common/CSS/GPsearchEngine.css":function(e,t,o){},"./node_modules/geoportal-extensions-openlayers/src/Common/CSS/GPwaiting.css":function(e,t,o){},"./node_modules/geoportal-extensions-openlayers/src/Common/Utils/Config.js":function(e,t,o){"use strict";(function(e){var n=o("./node_modules/geoportal-extensions-openlayers/src/Common/Utils/LoggerByDefault.js").a.getLogger("config"),r={configuration:null,isConfigLoaded:function(){var t="undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0!==e?e:{};return!(!t.Gp||!t.Gp.Config||0===Object.keys(t.Gp.Config).length)&&(this.configuration=t.Gp.Config,!0)},getLayerId:function(e,t){var o=null;if(this.configuration){var r=this.configuration.layers;for(var i in r)if(r.hasOwnProperty(i)){var s=i.split("$");if(e===s[0]&&s[1]){var a=s[1].split(":");if(s[1].split(";")[1]===t){o=i;break}if(a[2]===t){o=i;break}}}}return o||n.error("ERROR layer id (layer name: "+e+" / service: "+t+") was not found !?"),o},getLayerParams:function(e,t,o){var r={};if(this.configuration){var i=this.getLayerId(e,t);if(i){var s=this.configuration.layers[i],a=s.apiKeys[0];if(o&&o!==a)return void n.error("ERROR different keys ("+o+" !== "+a+") !?");o=o||a,r.key=o,r.url=s.getServerUrl(o),r.version=s.getServiceParams().version,r.styles=s.getDefaultStyle(),r.format=s.getDefaultFormat(),r.projection=s.getDefaultProjection(),r.minScale=s.getMinScaleDenominator(),r.maxScale=s.getMaxScaleDenominator(),r.extent=s.getBBOX(),r.legends=s.getLegends(),r.metadata=s.getMetadata(),r.originators=s.getOriginators(),r.title=s.getTitle(),r.description=s.getDescription(),r.quicklookUrl=s.getQuicklookUrl(),s.wmtsOptions&&(r.tileMatrixSetLimits=s.wmtsOptions.tileMatrixSetLimits);var l=s.getTMSID();if(l){r.TMSLink=l;var c=this.configuration.getTMSConf(l);r.matrixOrigin=c.getTopLeftCorner(),r.nativeResolutions=c.nativeResolutions,r.matrixIds=c.matrixIds,r.tileMatrices=c.tileMatrices}}}return r},getServiceParams:function(e,t,o){var n={};if(this.configuration){var r=this.getLayerId(e,t);if(r){var i=this.configuration.layers[r],s=i.apiKeys[0];if(o){Array.isArray(o)||(o=[o]);for(var a=0;a<o.length;a++)if(o[a]===s){var l=a;break}if(void 0===l)return}var c=o[l]||s;n.key=c,n.url=i.getServerUrl(c),n.version=i.getServiceParams().version,n.extent=i.getBBOX(),n.title=i.getTitle(),n.description=i.getDescription()}}return n},getResolutions:function(){var e=[];return this.configuration&&(e=this.configuration.generalOptions.wgs84Resolutions),e},getTileMatrix:function(e){var t={};return this.configuration&&e&&(t=this.configuration.tileMatrixSets[e.toUpperCase()]),t},getGlobalConstraints:function(e){var t={};if(e){var o=this.configuration.layers[e];t.projection=o.getDefaultProjection(),t.minScale=o.getMinScaleDenominator(),t.maxScale=o.getMaxScaleDenominator(),t.extent=o.getBBOX()}return t}};t.a=r}).call(this,o("./node_modules/webpack/buildin/global.js"))},"./node_modules/geoportal-extensions-openlayers/src/Common/Utils/LoggerByDefault.js":function(e,t,o){"use strict";var n=o("./node_modules/loglevel/lib/loglevel.js"),r={getLogger:function(e){"true".match(/true/)?n.disableAll():n.enableAll();var t=e||"default";return n.getLogger(t)},disableAll:function(){var e=n.getLoggers();for(var t in e){if(Object.hasOwnProperty.call(e,t))e[t].disableAll()}},enableAll:function(){var e=n.getLoggers();for(var t in e){if(Object.hasOwnProperty.call(e,t))e[t].enableAll()}}};t.a=r},"./node_modules/geoportal-extensions-openlayers/src/OpenLayers/CSS/Controls/Attribution/GPattributionOpenLayers.css":function(e,t,o){},"./node_modules/geoportal-extensions-openlayers/src/OpenLayers/CSS/Controls/Drawing/GPdrawingOpenLayers.css":function(e,t,o){},"./node_modules/geoportal-extensions-openlayers/src/OpenLayers/CSS/Controls/Editor/GPeditorOpenLayers.css":function(e,t,o){},"./node_modules/geoportal-extensions-openlayers/src/OpenLayers/CSS/Controls/ElevationPath/GPelevationPathOpenLayers.css":function(e,t,o){},"./node_modules/geoportal-extensions-openlayers/src/OpenLayers/CSS/Controls/GetFeatureInfo/GPgetFeatureInfoOpenLayers.css":function(e,t,o){},"./node_modules/geoportal-extensions-openlayers/src/OpenLayers/CSS/Controls/Isochrone/GPisochronOpenLayers.css":function(e,t,o){},"./node_modules/geoportal-extensions-openlayers/src/OpenLayers/CSS/Controls/LayerImport/GPimportOpenLayers.css":function(e,t,o){},"./node_modules/geoportal-extensions-openlayers/src/OpenLayers/CSS/Controls/LayerSwitcher/GPlayerSwitcherOpenLayers.css":function(e,t,o){},"./node_modules/geoportal-extensions-openlayers/src/OpenLayers/CSS/Controls/LocationSelector/GPlocationOpenLayers.css":function(e,t,o){},"./node_modules/geoportal-extensions-openlayers/src/OpenLayers/CSS/Controls/Measures/GPmeasureAreaOpenLayers.css":function(e,t,o){},"./node_modules/geoportal-extensions-openlayers/src/OpenLayers/CSS/Controls/Measures/GPmeasureAzimuthOpenLayers.css":function(e,t,o){},"./node_modules/geoportal-extensions-openlayers/src/OpenLayers/CSS/Controls/Measures/GPmeasureLengthOpenLayers.css":function(e,t,o){},"./node_modules/geoportal-extensions-openlayers/src/OpenLayers/CSS/Controls/MousePosition/GPmousePositionOpenLayers.css":function(e,t,o){},"./node_modules/geoportal-extensions-openlayers/src/OpenLayers/CSS/Controls/ReverseGeocoding/GPreverseGeocodingOpenLayers.css":function(e,t,o){},"./node_modules/geoportal-extensions-openlayers/src/OpenLayers/CSS/Controls/Route/GProuteOpenLayers.css":function(e,t,o){},"./node_modules/geoportal-extensions-openlayers/src/OpenLayers/CSS/Controls/SearchEngine/GPsearchEngineOpenLayers.css":function(e,t,o){},"./node_modules/geoportal-extensions-openlayers/src/OpenLayers/CSS/Controls/ToolBoxMeasure/GPtoolBoxMeasureOpenLayers.css":function(e,t,o){},"./node_modules/geoportal-extensions-openlayers/src/OpenLayers/CSS/GPgeneralWidgetOpenLayers.css":function(e,t,o){},"./node_modules/geotiff/node_modules/lru-cache/index.js":function(e,t,o){"use strict";const n=o("./node_modules/geotiff/node_modules/yallist/yallist.js"),r=Symbol("max"),i=Symbol("length"),s=Symbol("lengthCalculator"),a=Symbol("allowStale"),l=Symbol("maxAge"),c=Symbol("dispose"),u=Symbol("noDisposeOnSet"),d=Symbol("lruList"),h=Symbol("cache"),p=Symbol("updateAgeOnGet"),f=()=>1;const m=(e,t,o)=>{const n=e[h].get(t);if(n){const t=n.value;if(g(e,t)){if(v(e,n),!e[a])return}else o&&(e[p]&&(n.value.now=Date.now()),e[d].unshiftNode(n));return t.value}},g=(e,t)=>{if(!t||!t.maxAge&&!e[l])return!1;const o=Date.now()-t.now;return t.maxAge?o>t.maxAge:e[l]&&o>e[l]},y=e=>{if(e[i]>e[r])for(let t=e[d].tail;e[i]>e[r]&&null!==t;){const o=t.prev;v(e,t),t=o}},v=(e,t)=>{if(t){const o=t.value;e[c]&&e[c](o.key,o.value),e[i]-=o.length,e[h].delete(o.key),e[d].removeNode(t)}};class _{constructor(e,t,o,n,r){this.key=e,this.value=t,this.length=o,this.now=n,this.maxAge=r||0}}const b=(e,t,o,n)=>{let r=o.value;g(e,r)&&(v(e,o),e[a]||(r=void 0)),r&&t.call(n,r.value,r.key,e)};e.exports=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[r]=e.max||1/0;const t=e.length||f;if(this[s]="function"!=typeof t?f:t,this[a]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[l]=e.maxAge||0,this[c]=e.dispose,this[u]=e.noDisposeOnSet||!1,this[p]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[r]=e||1/0,y(this)}get max(){return this[r]}set allowStale(e){this[a]=!!e}get allowStale(){return this[a]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[l]=e,y(this)}get maxAge(){return this[l]}set lengthCalculator(e){"function"!=typeof e&&(e=f),e!==this[s]&&(this[s]=e,this[i]=0,this[d].forEach(e=>{e.length=this[s](e.value,e.key),this[i]+=e.length})),y(this)}get lengthCalculator(){return this[s]}get length(){return this[i]}get itemCount(){return this[d].length}rforEach(e,t){t=t||this;for(let o=this[d].tail;null!==o;){const n=o.prev;b(this,e,o,t),o=n}}forEach(e,t){t=t||this;for(let o=this[d].head;null!==o;){const n=o.next;b(this,e,o,t),o=n}}keys(){return this[d].toArray().map(e=>e.key)}values(){return this[d].toArray().map(e=>e.value)}reset(){this[c]&&this[d]&&this[d].length&&this[d].forEach(e=>this[c](e.key,e.value)),this[h]=new Map,this[d]=new n,this[i]=0}dump(){return this[d].map(e=>!g(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[d]}set(e,t,o){if((o=o||this[l])&&"number"!=typeof o)throw new TypeError("maxAge must be a number");const n=o?Date.now():0,a=this[s](t,e);if(this[h].has(e)){if(a>this[r])return v(this,this[h].get(e)),!1;const s=this[h].get(e).value;return this[c]&&(this[u]||this[c](e,s.value)),s.now=n,s.maxAge=o,s.value=t,this[i]+=a-s.length,s.length=a,this.get(e),y(this),!0}const p=new _(e,t,a,n,o);return p.length>this[r]?(this[c]&&this[c](e,t),!1):(this[i]+=p.length,this[d].unshift(p),this[h].set(e,this[d].head),y(this),!0)}has(e){if(!this[h].has(e))return!1;const t=this[h].get(e).value;return!g(this,t)}get(e){return m(this,e,!0)}peek(e){return m(this,e,!1)}pop(){const e=this[d].tail;return e?(v(this,e),e.value):null}del(e){v(this,this[h].get(e))}load(e){this.reset();const t=Date.now();for(let o=e.length-1;o>=0;o--){const n=e[o],r=n.e||0;if(0===r)this.set(n.k,n.v);else{const e=r-t;e>0&&this.set(n.k,n.v,e)}}}prune(){this[h].forEach((e,t)=>m(this,t,!1))}}},"./node_modules/geotiff/node_modules/yallist/iterator.js":function(e,t,o){"use strict";e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},"./node_modules/geotiff/node_modules/yallist/yallist.js":function(e,t,o){"use strict";function n(e){var t=this;if(t instanceof n||(t=new n),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var o=0,r=arguments.length;o<r;o++)t.push(arguments[o]);return t}function r(e,t,o){var n=t===e.head?new a(o,null,t,e):new a(o,t,t.next,e);return null===n.next&&(e.tail=n),null===n.prev&&(e.head=n),e.length++,n}function i(e,t){e.tail=new a(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function s(e,t){e.head=new a(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function a(e,t,o,n){if(!(this instanceof a))return new a(e,t,o,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,o?(o.prev=this,this.next=o):this.next=null}e.exports=n,n.Node=a,n.create=n,n.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,o=e.prev;return t&&(t.prev=o),o&&(o.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=o),e.list.length--,e.next=null,e.prev=null,e.list=null,t},n.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},n.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},n.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)i(this,arguments[e]);return this.length},n.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)s(this,arguments[e]);return this.length},n.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},n.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},n.prototype.forEach=function(e,t){t=t||this;for(var o=this.head,n=0;null!==o;n++)e.call(t,o.value,n,this),o=o.next},n.prototype.forEachReverse=function(e,t){t=t||this;for(var o=this.tail,n=this.length-1;null!==o;n--)e.call(t,o.value,n,this),o=o.prev},n.prototype.get=function(e){for(var t=0,o=this.head;null!==o&&t<e;t++)o=o.next;if(t===e&&null!==o)return o.value},n.prototype.getReverse=function(e){for(var t=0,o=this.tail;null!==o&&t<e;t++)o=o.prev;if(t===e&&null!==o)return o.value},n.prototype.map=function(e,t){t=t||this;for(var o=new n,r=this.head;null!==r;)o.push(e.call(t,r.value,this)),r=r.next;return o},n.prototype.mapReverse=function(e,t){t=t||this;for(var o=new n,r=this.tail;null!==r;)o.push(e.call(t,r.value,this)),r=r.prev;return o},n.prototype.reduce=function(e,t){var o,n=this.head;if(arguments.length>1)o=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");n=this.head.next,o=this.head.value}for(var r=0;null!==n;r++)o=e(o,n.value,r),n=n.next;return o},n.prototype.reduceReverse=function(e,t){var o,n=this.tail;if(arguments.length>1)o=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");n=this.tail.prev,o=this.tail.value}for(var r=this.length-1;null!==n;r--)o=e(o,n.value,r),n=n.prev;return o},n.prototype.toArray=function(){for(var e=new Array(this.length),t=0,o=this.head;null!==o;t++)e[t]=o.value,o=o.next;return e},n.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,o=this.tail;null!==o;t++)e[t]=o.value,o=o.prev;return e},n.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var o=new n;if(t<e||t<0)return o;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;null!==i&&r<e;r++)i=i.next;for(;null!==i&&r<t;r++,i=i.next)o.push(i.value);return o},n.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var o=new n;if(t<e||t<0)return o;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;null!==i&&r>t;r--)i=i.prev;for(;null!==i&&r>e;r--,i=i.prev)o.push(i.value);return o},n.prototype.splice=function(e,t,...o){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,i=this.head;null!==i&&n<e;n++)i=i.next;var s=[];for(n=0;i&&n<t;n++)s.push(i.value),i=this.removeNode(i);null===i&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(n=0;n<o.length;n++)i=r(this,i,o[n]);return s},n.prototype.reverse=function(){for(var e=this.head,t=this.tail,o=e;null!==o;o=o.prev){var n=o.prev;o.prev=o.next,o.next=n}return this.head=t,this.tail=e,this};try{o("./node_modules/geotiff/node_modules/yallist/iterator.js")(n)}catch(e){}},"./node_modules/geotiff/src/globals.js":function(e,t,o){"use strict";o.d(t,"e",(function(){return n})),o.d(t,"f",(function(){return i})),o.d(t,"d",(function(){return s})),o.d(t,"g",(function(){return a})),o.d(t,"h",(function(){return l})),o.d(t,"j",(function(){return c})),o.d(t,"a",(function(){return u})),o.d(t,"c",(function(){return d})),o.d(t,"b",(function(){return h})),o.d(t,"i",(function(){return p}));const n={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},r={};for(const e in n)n.hasOwnProperty(e)&&(r[n[e]]=parseInt(e,10));const i={256:"SHORT",257:"SHORT",258:"SHORT",259:"SHORT",262:"SHORT",273:"LONG",274:"SHORT",277:"SHORT",278:"LONG",279:"LONG",282:"RATIONAL",283:"RATIONAL",284:"SHORT",286:"SHORT",287:"RATIONAL",296:"SHORT",297:"SHORT",305:"ASCII",306:"ASCII",338:"SHORT",339:"SHORT",513:"LONG",514:"LONG",1024:"SHORT",1025:"SHORT",2048:"SHORT",2049:"ASCII",3072:"SHORT",3073:"ASCII",33550:"DOUBLE",33922:"DOUBLE",34665:"LONG",34735:"SHORT",34737:"ASCII",42113:"ASCII"},s=[r.BitsPerSample,r.ExtraSamples,r.SampleFormat,r.StripByteCounts,r.StripOffsets,r.StripRowCounts,r.TileByteCounts,r.TileOffsets,r.SubIFDs],a={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},l={};for(const e in a)a.hasOwnProperty(e)&&(l[a[e]]=parseInt(e,10));const c={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},u={Unspecified:0,Assocalpha:1,Unassalpha:2},d={Version:0,AddCompression:1},h={None:0,Deflate:1},p={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},f={};for(const e in p)p.hasOwnProperty(e)&&(f[p[e]]=parseInt(e,10))},"./node_modules/geotiff/src/source/basesource.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return n}));class n{async fetch(e,t){return Promise.all(e.map(e=>this.fetchSlice(e,t)))}async fetchSlice(e){throw new Error(`fetching of slice ${e} not possible, not implemented`)}get fileSize(){return null}async close(){}}},"./node_modules/geotiff/src/source/client/base.js":function(e,t,o){"use strict";o.d(t,"b",(function(){return n})),o.d(t,"a",(function(){return r}));class n{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(e){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}}class r{constructor(e){this.url=e}async request({headers:e,credentials:t,signal:o}={}){throw new Error("request is not implemented")}}},"./node_modules/geotiff/src/source/client/http.js":function(e,t,o){"use strict";(function(e){o.d(t,"a",(function(){return h}));var n=o(1),r=o.n(n),i=o(2),s=o.n(i),a=o(3),l=o.n(a),c=o("./node_modules/geotiff/src/source/client/base.js"),u=o("./node_modules/geotiff/src/utils.js");class d extends c.b{constructor(e,t){super(),this.response=e,this.dataPromise=t}get status(){return this.response.statusCode}getHeader(e){return this.response.headers[e]}async getData(){return await this.dataPromise}}class h extends c.a{constructor(e){super(e),this.parsedUrl=l.a.parse(this.url),this.httpApi="http:"===this.parsedUrl.protocol?r.a:s.a}constructRequest(t,o){return new Promise((n,r)=>{const i=this.httpApi.get({...this.parsedUrl,headers:t},t=>{const o=new Promise(o=>{const n=[];t.on("data",e=>{n.push(e)}),t.on("end",()=>{const t=e.concat(n).buffer;o(t)}),t.on("error",r)});n(new d(t,o))});i.on("error",r),o&&(o.aborted&&i.destroy(new u.a("Request aborted")),o.addEventListener("abort",()=>i.destroy(new u.a("Request aborted"))))})}async request({headers:e,signal:t}={}){return await this.constructRequest(e,t)}}}).call(this,o("./node_modules/buffer/index.js").Buffer)},"./node_modules/geotiff/src/source/file.js":function(e,t,o){"use strict";(function(e){o.d(t,"a",(function(){return a}));var n=o(4),r=o.n(n),i=o("./node_modules/geotiff/src/source/basesource.js");class s extends i.a{constructor(e){super(),this.path=e,this.openRequest=function(e,t,o){return new Promise((n,i)=>{r.a.open(e,t,o,(e,t)=>{e?i(e):n(t)})})}(e,"r")}async fetchSlice(t){const o=await this.openRequest,{buffer:n}=await function(...e){return new Promise((t,o)=>{r.a.read(...e,(e,n,r)=>{e?o(e):t({bytesRead:n,buffer:r})})})}(o,e.alloc(t.length),0,t.length,t.offset);return n.buffer}async close(){const e=await this.openRequest;await function(e){return new Promise((t,o)=>{r.a.close(e,e=>{e?o(e):t()})})}(e)}}function a(e){return new s(e)}}).call(this,o("./node_modules/buffer/index.js").Buffer)},"./node_modules/geotiff/src/utils.js":function(e,t,o){"use strict";function n(e,t){for(const o in t)t.hasOwnProperty(o)&&(e[o]=t[o])}function r(e,t){if(e.length<t.length)return!1;return e.substr(e.length-t.length)===t}function i(e,t){const{length:o}=e;for(let n=0;n<o;n++)t(e[n],n)}function s(e){const t={};for(const o in e)if(e.hasOwnProperty(o)){t[e[o]]=o}return t}function a(e,t){const o=[];for(let n=0;n<e;n++)o.push(t(n));return o}async function l(e){return new Promise(t=>setTimeout(t,e))}function c(e,t){const o=Array.isArray(e)?e:Array.from(e),n=Array.isArray(t)?t:Array.from(t);return o.map((e,t)=>[e,n[t]])}o.d(t,"c",(function(){return n})),o.d(t,"d",(function(){return r})),o.d(t,"e",(function(){return i})),o.d(t,"f",(function(){return s})),o.d(t,"g",(function(){return a})),o.d(t,"h",(function(){return l})),o.d(t,"i",(function(){return c})),o.d(t,"a",(function(){return u})),o.d(t,"b",(function(){return h}));class u extends Error{constructor(e){super(e),Error.captureStackTrace&&Error.captureStackTrace(this,u),this.name="AbortError"}}class d extends Error{constructor(e,t){super(t),this.errors=e,this.message=t,this.name="AggregateError"}}const h=d},"./node_modules/ieee754/index.js":function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,o,n,r){var i,s,a=8*r-n-1,l=(1<<a)-1,c=l>>1,u=-7,d=o?r-1:0,h=o?-1:1,p=e[t+d];for(d+=h,i=p&(1<<-u)-1,p>>=-u,u+=a;u>0;i=256*i+e[t+d],d+=h,u-=8);for(s=i&(1<<-u)-1,i>>=-u,u+=n;u>0;s=256*s+e[t+d],d+=h,u-=8);if(0===i)i=1-c;else{if(i===l)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),i-=c}return(p?-1:1)*s*Math.pow(2,i-n)},t.write=function(e,t,o,n,r,i){var s,a,l,c=8*i-r-1,u=(1<<c)-1,d=u>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,f=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),(t+=s+d>=1?h/l:h*Math.pow(2,1-d))*l>=2&&(s++,l/=2),s+d>=u?(a=0,s=u):s+d>=1?(a=(t*l-1)*Math.pow(2,r),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,r),s=0));r>=8;e[o+p]=255&a,p+=f,a/=256,r-=8);for(s=s<<r|a,c+=r;c>0;e[o+p]=255&s,p+=f,s/=256,c-=8);e[o+p-f]|=128*m}},"./node_modules/isarray/index.js":function(e,t){var o={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==o.call(e)}},"./node_modules/loglevel/lib/loglevel.js":function(e,t,o){var n,r;!function(i,s){"use strict";void 0===(r="function"==typeof(n=function(){var e=function(){},t="undefined"!=typeof window&&/Trident\/|MSIE /.test(window.navigator.userAgent),o=["trace","debug","info","warn","error"];function n(e,t){var o=e[t];if("function"==typeof o.bind)return o.bind(e);try{return Function.prototype.bind.call(o,e)}catch(t){return function(){return Function.prototype.apply.apply(o,[e,arguments])}}}function r(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function i(o){return"debug"===o&&(o="log"),"undefined"!=typeof console&&("trace"===o&&t?r:void 0!==console[o]?n(console,o):void 0!==console.log?n(console,"log"):e)}function s(t,n){for(var r=0;r<o.length;r++){var i=o[r];this[i]=r<t?e:this.methodFactory(i,t,n)}this.log=this.debug}function a(e,t,o){return function(){"undefined"!=typeof console&&(s.call(this,t,o),this[e].apply(this,arguments))}}function l(e,t,o){return i(e)||a.apply(this,arguments)}function c(e,t,n){var r,i=this,a="loglevel";function c(){var e;if("undefined"!=typeof window){try{e=window.localStorage[a]}catch(e){}if(void 0===e)try{var t=window.document.cookie,o=t.indexOf(encodeURIComponent(a)+"=");-1!==o&&(e=/^([^;]+)/.exec(t.slice(o))[1])}catch(e){}return void 0===i.levels[e]&&(e=void 0),e}}e&&(a+=":"+e),i.name=e,i.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},i.methodFactory=n||l,i.getLevel=function(){return r},i.setLevel=function(t,n){if("string"==typeof t&&void 0!==i.levels[t.toUpperCase()]&&(t=i.levels[t.toUpperCase()]),!("number"==typeof t&&t>=0&&t<=i.levels.SILENT))throw"log.setLevel() called with invalid level: "+t;if(r=t,!1!==n&&function(e){var t=(o[e]||"silent").toUpperCase();if("undefined"!=typeof window){try{return void(window.localStorage[a]=t)}catch(e){}try{window.document.cookie=encodeURIComponent(a)+"="+t+";"}catch(e){}}}(t),s.call(i,t,e),"undefined"==typeof console&&t<i.levels.SILENT)return"No console available for logging"},i.setDefaultLevel=function(e){c()||i.setLevel(e,!1)},i.enableAll=function(e){i.setLevel(i.levels.TRACE,e)},i.disableAll=function(e){i.setLevel(i.levels.SILENT,e)};var u=c();null==u&&(u=null==t?"WARN":t),i.setLevel(u,!1)}var u=new c,d={};u.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=d[e];return t||(t=d[e]=new c(e,u.getLevel(),u.methodFactory)),t};var h="undefined"!=typeof window?window.log:void 0;return u.noConflict=function(){return"undefined"!=typeof window&&window.log===u&&(window.log=h),u},u.getLoggers=function(){return d},u})?n.call(t,o,t,e):n)||(e.exports=r)}()},"./node_modules/mapbox-to-css-font/index.js":function(e,t){var o={thin:100,hairline:100,"ultra-light":100,"extra-light":100,light:200,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,heavy:800,black:800,"extra-bold":800,"ultra-black":900,"extra-black":900,"ultra-bold":900,"heavy-black":900,fat:900,poster:900},n=/(italic|oblique)$/i,r={};e.exports=function(e,t,i){var s=r[e];if(!s){Array.isArray(e)||(e=[e]);for(var a=400,l="normal",c=[],u=0,d=e.length;u<d;++u){var h=e[u].split(" "),p=h[h.length-1].toLowerCase();for(var f in"normal"==p||"italic"==p||"oblique"==p?(l=p,h.pop(),p=h[h.length-1].toLowerCase()):n.test(p)&&(p=p.replace(n,""),l=h[h.length-1].replace(p,"")),o){var m=h.length>1?h[h.length-2].toLowerCase():"";if(p==f||p==f.replace("-","")||m+"-"+p==f){a=o[f],h.pop(),m&&f.startsWith(m)&&h.pop();break}}"number"==typeof p&&(a=p);var g=h.join(" ").replace("Klokantech Noto Sans","Noto Sans");-1!==g.indexOf(" ")&&(g='"'+g+'"'),c.push(g)}s=r[e]=[l,a,c]}return s[0]+" "+s[1]+" "+t+"px"+(i?"/"+i:"")+" "+s[2]}},"./node_modules/ms/index.js":function(e,t){var o=1e3,n=6e4,r=60*n,i=24*r;function s(e,t,o,n){var r=t>=1.5*o;return Math.round(e/o)+" "+n+(r?"s":"")}e.exports=function(e,t){t=t||{};var a=typeof e;if("string"===a&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var s=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return s*i;case"hours":case"hour":case"hrs":case"hr":case"h":return s*r;case"minutes":case"minute":case"mins":case"min":case"m":return s*n;case"seconds":case"second":case"secs":case"sec":case"s":return s*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(e);if("number"===a&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=i)return s(e,t,i,"day");if(t>=r)return s(e,t,r,"hour");if(t>=n)return s(e,t,n,"minute");if(t>=o)return s(e,t,o,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=i)return Math.round(e/i)+"d";if(t>=r)return Math.round(e/r)+"h";if(t>=n)return Math.round(e/n)+"m";if(t>=o)return Math.round(e/o)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},"./node_modules/observable-fns/dist.esm/multicast.js":function(e,t,o){"use strict";var n=o("./node_modules/observable-fns/dist.esm/observable.js"),r=o("./node_modules/observable-fns/dist.esm/subject.js");var i=function(e){"function"==typeof e?e():e&&"function"==typeof e.unsubscribe&&e.unsubscribe()};t.a=function(e){const t=new r.a;let o,s=0;return new n.a(n=>{o||(o=e.subscribe(t));const r=t.subscribe(n);return s++,()=>{s--,r.unsubscribe(),0===s&&(i(o),o=void 0)}})}},"./node_modules/observable-fns/dist.esm/observable.js":function(e,t,o){"use strict";const n=()=>"function"==typeof Symbol,r=e=>n()&&Boolean(Symbol[e]),i=e=>r(e)?Symbol[e]:"@@"+e;r("asyncIterator")||(Symbol.asyncIterator=Symbol.asyncIterator||Symbol.for("Symbol.asyncIterator"));const s=i("iterator"),a=i("observable"),l=i("species");function c(e,t){const o=e[t];if(null!=o){if("function"!=typeof o)throw new TypeError(o+" is not a function");return o}}function u(e){let t=e.constructor;return void 0!==t&&(t=t[l],null===t&&(t=void 0)),void 0!==t?t:_}function d(e){d.log?d.log(e):setTimeout(()=>{throw e},0)}function h(e){Promise.resolve().then(()=>{try{e()}catch(e){d(e)}})}function p(e){const t=e._cleanup;if(void 0!==t&&(e._cleanup=void 0,t))try{if("function"==typeof t)t();else{const e=c(t,"unsubscribe");e&&e.call(t)}}catch(e){d(e)}}function f(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function m(e,t,o){e._state="running";const n=e._observer;try{const r=n?c(n,t):void 0;switch(t){case"next":r&&r.call(n,o);break;case"error":if(f(e),!r)throw o;r.call(n,o);break;case"complete":f(e),r&&r.call(n)}}catch(e){d(e)}"closed"===e._state?p(e):"running"===e._state&&(e._state="ready")}function g(e,t,o){if("closed"!==e._state)return"buffering"===e._state?(e._queue=e._queue||[],void e._queue.push({type:t,value:o})):"ready"!==e._state?(e._state="buffering",e._queue=[{type:t,value:o}],void h(()=>function(e){const t=e._queue;if(t){e._queue=void 0,e._state="ready";for(const o of t)if(m(e,o.type,o.value),"closed"===e._state)break}}(e))):void m(e,t,o)}class y{constructor(e,t){this._cleanup=void 0,this._observer=e,this._queue=void 0,this._state="initializing";const o=new v(this);try{this._cleanup=t.call(void 0,o)}catch(e){o.error(e)}"initializing"===this._state&&(this._state="ready")}get closed(){return"closed"===this._state}unsubscribe(){"closed"!==this._state&&(f(this),p(this))}}class v{constructor(e){this._subscription=e}get closed(){return"closed"===this._subscription._state}next(e){g(this._subscription,"next",e)}error(e){g(this._subscription,"error",e)}complete(){g(this._subscription,"complete")}}class _{constructor(e){if(!(this instanceof _))throw new TypeError("Observable cannot be called as a function");if("function"!=typeof e)throw new TypeError("Observable initializer must be a function");this._subscriber=e}subscribe(e,t,o){return"object"==typeof e&&null!==e||(e={next:e,error:t,complete:o}),new y(e,this._subscriber)}pipe(e,...t){let o=this;for(const n of[e,...t])o=n(o);return o}tap(e,t,o){const n="object"!=typeof e||null===e?{next:e,error:t,complete:o}:e;return new _(e=>this.subscribe({next(t){n.next&&n.next(t),e.next(t)},error(t){n.error&&n.error(t),e.error(t)},complete(){n.complete&&n.complete(),e.complete()},start(e){n.start&&n.start(e)}}))}forEach(e){return new Promise((t,o)=>{if("function"!=typeof e)return void o(new TypeError(e+" is not a function"));function n(){r.unsubscribe(),t(void 0)}const r=this.subscribe({next(t){try{e(t,n)}catch(e){o(e),r.unsubscribe()}},error(e){o(e)},complete(){t(void 0)}})})}map(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(u(this))(t=>this.subscribe({next(o){let n=o;try{n=e(o)}catch(e){return t.error(e)}t.next(n)},error(e){t.error(e)},complete(){t.complete()}}))}filter(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(u(this))(t=>this.subscribe({next(o){try{if(!e(o))return}catch(e){return t.error(e)}t.next(o)},error(e){t.error(e)},complete(){t.complete()}}))}reduce(e,t){if("function"!=typeof e)throw new TypeError(e+" is not a function");const o=u(this),n=arguments.length>1;let r=!1,i=t;return new o(t=>this.subscribe({next(o){const s=!r;if(r=!0,!s||n)try{i=e(i,o)}catch(e){return t.error(e)}else i=o},error(e){t.error(e)},complete(){if(!r&&!n)return t.error(new TypeError("Cannot reduce an empty sequence"));t.next(i),t.complete()}}))}concat(...e){const t=u(this);return new t(o=>{let n,r=0;return function i(s){n=s.subscribe({next(e){o.next(e)},error(e){o.error(e)},complete(){r===e.length?(n=void 0,o.complete()):i(t.from(e[r++]))}})}(this),()=>{n&&(n.unsubscribe(),n=void 0)}})}flatMap(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");const t=u(this);return new t(o=>{const n=[],r=this.subscribe({next(r){let s;if(e)try{s=e(r)}catch(e){return o.error(e)}else s=r;const a=t.from(s).subscribe({next(e){o.next(e)},error(e){o.error(e)},complete(){const e=n.indexOf(a);e>=0&&n.splice(e,1),i()}});n.push(a)},error(e){o.error(e)},complete(){i()}});function i(){r.closed&&0===n.length&&o.complete()}return()=>{n.forEach(e=>e.unsubscribe()),r.unsubscribe()}})}[(Symbol.observable,a)](){return this}static from(e){const t="function"==typeof this?this:_;if(null==e)throw new TypeError(e+" is not an object");const o=c(e,a);if(o){const n=o.call(e);if(Object(n)!==n)throw new TypeError(n+" is not an object");return function(e){return e instanceof _}(n)&&n.constructor===t?n:new t(e=>n.subscribe(e))}if(r("iterator")){const o=c(e,s);if(o)return new t(t=>{h(()=>{if(!t.closed){for(const n of o.call(e))if(t.next(n),t.closed)return;t.complete()}})})}if(Array.isArray(e))return new t(t=>{h(()=>{if(!t.closed){for(const o of e)if(t.next(o),t.closed)return;t.complete()}})});throw new TypeError(e+" is not observable")}static of(...e){return new("function"==typeof this?this:_)(t=>{h(()=>{if(!t.closed){for(const o of e)if(t.next(o),t.closed)return;t.complete()}})})}static get[l](){return this}}n()&&Object.defineProperty(_,Symbol("extensions"),{value:{symbol:a,hostReportError:d},configurable:!0});t.a=_},"./node_modules/observable-fns/dist.esm/subject.js":function(e,t,o){"use strict";var n=o("./node_modules/observable-fns/dist.esm/observable.js");class r extends n.a{constructor(){super(e=>(this._observers.add(e),()=>this._observers.delete(e))),this._observers=new Set}next(e){for(const t of this._observers)t.next(e)}error(e){for(const t of this._observers)t.error(e)}complete(){for(const e of this._observers)e.complete()}}t.a=r},"./node_modules/ol-mapbox-style/dist/index.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return de})),o.d(t,"b",(function(){return pe}));var n=o("./node_modules/ol/format/GeoJSON.js"),r=o("./node_modules/ol/format/MVT.js"),i=(o("./node_modules/ol/Map.js"),o("./node_modules/ol/tilegrid/TileGrid.js")),s=o("./node_modules/ol/source/TileJSON.js"),a=(o("./node_modules/ol/layer/Tile.js"),o("./node_modules/ol/layer/Vector.js")),l=(o("./node_modules/ol/source/Vector.js"),o("./node_modules/ol/layer/VectorTile.js")),c=o("./node_modules/ol/source/VectorTile.js"),u=(o("./node_modules/ol/View.js"),o("./node_modules/ol/style/Circle.js")),d=o("./node_modules/ol/style/Fill.js"),h=o("./node_modules/ol/style/Icon.js"),p=o("./node_modules/ol/render/Feature.js"),f=o("./node_modules/ol/style/Stroke.js"),m=o("./node_modules/ol/style/Style.js"),g=o("./node_modules/ol/style/Text.js"),y=o("./node_modules/mapbox-to-css-font/index.js"),v=o.n(y),_=o("./node_modules/@mapbox/mapbox-gl-style-spec/dist/index.es.js"),b=o("./node_modules/ol/events/EventType.js"),w=o("./node_modules/ol/render/canvas.js"),E=o("./node_modules/ol/events.js"),O="function"==typeof Object.assign?Object.assign:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(e),n=1,r=arguments.length;n<r;++n){var i=arguments[n];if(null!=i)for(var s in i)i.hasOwnProperty(s)&&(o[s]=i[s])}return o};function S(e){return e*Math.PI/180}var x=function(){for(var e=[],t=78271.51696402048;e.length<=24;t/=2)e.push(t);return e}();function C(e,t){if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas)return new OffscreenCanvas(e,t);var o=document.createElement("canvas");return o.width=e,o.height=t,o}var j,P=Array(256).join("â");function T(e,t){if(t>=.05){for(var o="",n=e.split("\n"),r=P.slice(0,Math.round(t/.1)),i=0,s=n.length;i<s;++i)i>0&&(o+="\n"),o+=n[i].split("").join(r);return o}return e}function A(){return j||(j=C(1,1).getContext("2d")),j}function M(e,t){return A().measureText(e).width+(e.length-1)*t}var I={};w.o&&Object(E.a)(w.o,b.a.CLEAR,(function(){I={}}));var R,L,k=_.e.isFunction,G=_.e.convertFunction,N=_.c.isExpression,D=_.c.createPropertyExpression,F={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},U={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},B={},z={zoom:0};function V(e,t,o,n,r,i){var s=e.id;i||(i={},console.warn("No functionCache provided to getValue()")),i[s]||(i[s]={});var a=i[s];if(!a[o]){var l=(e[t]||B)[o],c=_.f["".concat(t,"_").concat(e.type)][o];void 0===l&&(l=c.default);var u=N(l);if(!u&&k(l)&&(l=G(l,c),u=!0),u){var d=function(e,t){var o=D(e,t);if("error"===o.result)throw new Error(o.value.map((function(e){return"".concat(e.key,": ").concat(e.message)})).join(", "));return o.value}(l,c);a[o]=d.evaluate.bind(d)}else"color"==c.type&&(l=_.a.parse(l)),a[o]=function(){return l}}return z.zoom=n,a[o](z,r)}function W(e,t){if(e){if(0===e.a||0===t)return;var o=e.a;return t=void 0===t?1:t,"rgba("+Math.round(255*e.r/o)+","+Math.round(255*e.g/o)+","+Math.round(255*e.b/o)+","+o*t+")"}return e}var q=/^([^]*)\{(.*)\}([^]*)$/;function H(e,t){var o;do{if(o=e.match(q)){var n=t[o[2]]||"";e=o[1]+n+o[3]}}while(o);return e}var Y=!1;var X=function(e,t,o,n,r,i,s){if(void 0===n&&(n=x),"string"==typeof t&&(t=JSON.parse(t)),8!=t.version)throw new Error("glStyle version 8 required.");var a,l;if(i)if("undefined"!=typeof Image){var c=new Image;c.crossOrigin="anonymous",c.onload=function(){a=c,l=[c.width,c.height],e.changed(),c.onload=null},c.src=i}else if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope){var y=self;y.postMessage({action:"loadImage",src:i}),y.addEventListener("message",(function(e){"imageLoaded"===e.data.action&&e.data.src===i&&(a=e.data.image,l=[a.width,a.height])}))}for(var b,w=Object(_.b)(t.layers),E={},O=[],j={},P={},k={},G={},N=0,D=w.length;N<D;++N){var q=w[N],X=q.id;if("string"==typeof o&&q.source==o||-1!==o.indexOf(X)){var Z=q["source-layer"];if(!b){b=q.source;var K=t.sources[b];if(!K)throw new Error('Source "'.concat(b,'" is not defined'));var J=K.type;if("vector"!==J&&"geojson"!==J)throw new Error('Source "'.concat(b,'" is not of type "vector" or "geojson", but "').concat(J,'"'))}var Q=E[Z];Q||(Q=[],E[Z]=Q),Q.push({layer:q,index:N}),O.push(X)}}var $=new f.a,ee=new d.a,te=[],oe=function(e,t){var o=e.getProperties(),i=E[o.layer];if(i){var c=n.indexOf(t);-1==c&&(c=function(e,t){for(var o=0,n=t.length;o<n;++o){if(t[o]<e&&o+1<n){var r=t[o]/t[o+1];return o+Math.log(t[o]/e)/Math.log(r)}}return n-1}(t,n));for(var y,b=F[e.getGeometry().getType()],w={properties:o,type:b},O=-1,x=function(n,E){var x=i[n],N=x.layer,D=N.id,F=N.layout||B,q=N.paint||B;if("none"===F.visibility||"minzoom"in N&&c<N.minzoom||"maxzoom"in N&&c>=N.maxzoom)return"continue";var Y=N.filter;if(!Y||function(e,t,o,n,r){return r||console.warn("No filterCache provided to evaluateFilter()"),e in r||(r[e]=Object(_.d)(t).filter),z.zoom=n,r[e](z,o)}(D,Y,w,c,G)){y=N;var X=void 0,Z=void 0,K=void 0,J=void 0,Q=void 0,oe=void 0,ne=x.index;if(3==b&&("fill"==N.type||"fill-extrusion"==N.type))if(Z=V(N,"paint",N.type+"-opacity",c,w,k),N.type+"-pattern"in q){var re=V(N,"paint",N.type+"-pattern",c,w,k);if(re){var ie="string"==typeof re?H(re,o):re.toString();if(a&&r&&r[ie]){++O,(oe=te[O])&&oe.getFill()&&!oe.getStroke()&&!oe.getText()||(oe=new m.c({fill:new d.a}),te[O]=oe),K=oe.getFill(),oe.setZIndex(ne);var se=P[Ge=ie+"."+Z];if(!se){var ae=C((Ne=r[ie]).width,Ne.height),le=ae.getContext("2d");le.globalAlpha=Z,le.drawImage(a,Ne.x,Ne.y,Ne.width,Ne.height,0,0,Ne.width,Ne.height),se=le.createPattern(ae,"repeat"),P[Ge]=se}K.setColor(se)}}}else(X=W(V(N,"paint",N.type+"-color",c,w,k),Z))&&(N.type+"-outline-color"in q&&(Q=W(V(N,"paint",N.type+"-outline-color",c,w,k),Z)),Q||(Q=X),++O,(oe=te[O])&&oe.getFill()&&oe.getStroke()&&!oe.getText()||(oe=new m.c({fill:new d.a,stroke:new f.a}),te[O]=oe),(K=oe.getFill()).setColor(X),(J=oe.getStroke()).setColor(Q),J.setWidth(1),oe.setZIndex(ne));if(1!=b&&"line"==N.type){X=!("line-pattern"in q)&&"line-color"in q?W(V(N,"paint","line-color",c,w,k),V(N,"paint","line-opacity",c,w,k)):void 0;var ce=V(N,"paint","line-width",c,w,k);X&&ce>0&&(++O,(oe=te[O])&&oe.getStroke()&&!oe.getFill()&&!oe.getText()||(oe=new m.c({stroke:new f.a}),te[O]=oe),(J=oe.getStroke()).setLineCap(V(N,"layout","line-cap",c,w,k)),J.setLineJoin(V(N,"layout","line-join",c,w,k)),J.setMiterLimit(V(N,"layout","line-miter-limit",c,w,k)),J.setColor(X),J.setWidth(ce),J.setLineDash(q["line-dasharray"]?V(N,"paint","line-dasharray",c,w,k).map((function(e){return e*ce})):null),oe.setZIndex(ne))}var ue=!1,de=null,he=0,pe=void 0,fe=void 0,me=void 0;if((1==b||2==b)&&"icon-image"in F){var ge=V(N,"layout","icon-image",c,w,k);if(ge){pe="string"==typeof ge?H(ge,o):ge.toString();var ye=void 0;if(a&&r&&r[pe]){var ve=V(N,"layout","icon-rotation-alignment",c,w,k);if(2==b){var _e=e.getGeometry();if(_e.getFlatMidpoint||_e.getFlatMidpoints){var be=_e.getExtent();if(Math.sqrt(Math.max(Math.pow((be[2]-be[0])/t,2),Math.pow((be[3]-be[1])/t,2)))>150){var we="MultiLineString"===_e.getType()?_e.getFlatMidpoints():_e.getFlatMidpoint();if(L||(R=[NaN,NaN],L=new p.a("Point",R,[],{},null)),ye=L,R[0]=we[0],R[1]=we[1],"line"===($e=V(N,"layout","symbol-placement",c,w,k))&&"map"===ve)for(var Ee=_e.getStride(),Oe=_e.getFlatCoordinates(),Se=0,xe=Oe.length-Ee;Se<xe;Se+=Ee){var Ce=Oe[Se],je=Oe[Se+1],Pe=Oe[Se+Ee],Te=Oe[Se+Ee+1],Ae=Math.min(Ce,Pe),Me=Math.min(je,Te),Ie=Math.max(Ce,Pe),Re=Math.max(je,Te);if(we[0]>=Ae&&we[0]<=Ie&&we[1]>=Me&&we[1]<=Re){he=Math.atan2(je-Te,Pe-Ce);break}}}}}if(2!==b||ye){var Le=V(N,"layout","icon-size",c,w,k),ke=void 0!==q["icon-color"]?V(N,"paint","icon-color",c,w,k):null;if(!ke||0!==ke.a){var Ge=pe+"."+Le;if(null!==ke&&(Ge+="."+ke),!(fe=j[Ge])){var Ne=r[pe];fe=new h.a({color:ke?[255*ke.r,255*ke.g,255*ke.b,ke.a]:void 0,img:a,imgSize:l,size:[Ne.width,Ne.height],offset:[Ne.x,Ne.y],rotateWithView:"map"===ve,scale:Le/Ne.pixelRatio}),j[Ge]=fe}}fe&&(++O,(oe=te[O])&&oe.getImage()&&!oe.getFill()&&!oe.getStroke()||(oe=new m.c,te[O]=oe),oe.setGeometry(ye),fe.setRotation(he+S(V(N,"layout","icon-rotate",c,w,k))),fe.setOpacity(V(N,"paint","icon-opacity",c,w,k)),fe.setAnchor(U[V(N,"layout","icon-anchor",c,w,k)]),oe.setImage(fe),de=oe.getText(),oe.setText(void 0),oe.setZIndex(ne),ue=!0,me=!1)}else me=!0}}}if(1==b&&"circle-radius"in q){++O,(oe=te[O])&&oe.getImage()&&!oe.getFill()&&!oe.getStroke()||(oe=new m.c,te[O]=oe);var De=V(N,"paint","circle-radius",c,w,k),Fe=W(V(N,"paint","circle-stroke-color",c,w,k),V(N,"paint","circle-stroke-opacity",c,w,k)),Ue=W(V(N,"paint","circle-color",c,w,k),V(N,"paint","circle-opacity",c,w,k)),Be=V(N,"paint","circle-stroke-width",c,w,k),ze=De+"."+Fe+"."+Ue+"."+Be;(fe=j[ze])||(fe=new u.a({radius:De,stroke:Fe&&Be>0?new f.a({width:Be,color:Fe}):void 0,fill:Ue?new d.a({color:Ue}):void 0}),j[ze]=fe),oe.setImage(fe),de=oe.getText(),oe.setText(void 0),oe.setGeometry(void 0),oe.setZIndex(ne),ue=!0}var Ve=void 0;if("text-field"in F)Ve=H(V(N,"layout","text-field",c,w,k).toString(),o).trim(),Z=V(N,"paint","text-opacity",c,w,k);if(Ve&&Z&&!me){ue||(++O,(oe=te[O])&&oe.getText()&&!oe.getFill()&&!oe.getStroke()||(oe=new m.c,te[O]=oe),oe.setImage(void 0),oe.setGeometry(void 0)),oe.getText()||oe.setText(de||new g.a({padding:[2,2,2,2]})),de=oe.getText();var We=Math.round(V(N,"layout","text-size",c,w,k)),qe=V(N,"layout","text-font",c,w,k),He=V(N,"layout","text-line-height",c,w,k),Ye=v()(s?s(qe):qe,We,He),Xe=F["text-transform"];"uppercase"==Xe?Ve=Ve.toUpperCase():"lowercase"==Xe&&(Ve=Ve.toLowerCase());var Ze=V(N,"layout","text-max-width",c,w,k),Ke=V(N,"layout","text-letter-spacing",c,w,k),Je=2==b?T(Ve,Ke):function e(t,o,n,r){if(-1!==t.indexOf("\n")){for(var i=t.split("\n"),s=[],a=0,l=i.length;a<l;++a)s.push(e(i[a],o,n,r));return s.join("\n")}var c=n+","+o+","+t+","+r,u=I[c];if(!u){var d=t.split(" ");if(d.length>1){var h=A();h.font=o;var p=h.measureText("M").width*n,f="";for(s=[],a=0,l=d.length;a<l;++a){var m=d[a],g=f+(f?" ":"")+m;M(g,r)<=p?f=g:(f&&s.push(f),f=m)}f&&s.push(f);for(a=0,l=s.length;a<l&&l>1;++a){var y=s[a];if(M(y,r)<.35*p){var v=a>0?M(s[a-1],r):1/0,_=a<l-1?M(s[a+1],r):1/0;s.splice(a,1),l-=1,v<_?(s[a-1]+=" "+y,a-=1):s[a]=y+" "+s[a]}}for(a=0,l=s.length-1;a<l;++a){var b=s[a],w=s[a+1];if(M(b,r)>.7*p&&M(w,r)<.6*p){var E=b.split(" "),O=E.pop();M(O,r)<.2*p&&(s[a]=E.join(" "),s[a+1]=O+" "+w),l-=1}}u=s.join("\n")}else u=t;u=T(u,r),I[c]=u}return u}(Ve,Ye,Ze,Ke);de.setText(Je),de.setFont(Ye),de.setRotation(S(V(N,"layout","text-rotate",c,w,k)));var Qe=V(N,"layout","text-anchor",c,w,k),$e=ue||1==b?"point":V(N,"layout","symbol-placement",c,w,k);de.setPlacement($e);var et=V(N,"paint","text-halo-width",c,w,k),tt=V(N,"layout","text-offset",c,w,k),ot=V(N,"paint","text-translate",c,w,k),nt=0,rt=0;if("point"==$e){var it="center";-1!==Qe.indexOf("left")?(it="left",rt=et):-1!==Qe.indexOf("right")&&(it="right",rt=-et),de.setTextAlign(it);var st=V(N,"layout","text-rotation-alignment",c,w,k);de.setRotateWithView("map"==st)}else de.setMaxAngle(S(V(N,"layout","text-max-angle",c,w,k))*Ve.length/Je.length),de.setTextAlign(),de.setRotateWithView(!1);var at="middle";0==Qe.indexOf("bottom")?(at="bottom",nt=-et-.5*(He-1)*We):0==Qe.indexOf("top")&&(at="top",nt=et+.5*(He-1)*We),de.setTextBaseline(at),de.setOffsetX(tt[0]*We+rt+ot[0]),de.setOffsetY(tt[1]*We+nt+ot[1]),ee.setColor(W(V(N,"paint","text-color",c,w,k),Z)),de.setFill(ee);var lt=W(V(N,"paint","text-halo-color",c,w,k),Z);if(lt){$.setColor(lt),et*=2;var ct=.5*We;$.setWidth(et<=ct?et:ct),de.setStroke($)}else de.setStroke(void 0);var ut=V(N,"layout","text-padding",c,w,k),dt=de.getPadding();ut!==dt[0]&&(dt[0]=ut,dt[1]=ut,dt[2]=ut,dt[3]=ut),oe.setZIndex(ne)}}},N=0,D=i.length;N<D;++N)x(N);return O>-1?(te.length=O+1,Y&&("function"==typeof e.set?e.set("mapbox-layer",y):e.getProperties()["mapbox-layer"]=y),te):void 0}};return e.setStyle(oe),e.set("mapbox-source",b),e.set("mapbox-layers",O),oe},Z=o("./node_modules/webfont-matcher/lib/fonts/google.js"),K=o.n(Z),J=(o("./node_modules/ol/tilegrid.js"),o("./node_modules/ol/proj.js")),Q=o("./node_modules/ol/Observable.js");function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ee,te={},oe=/font-family: ?([^;]*);/,ne=/("|')/g;function re(e){if(!ee){ee={};for(var t=document.styleSheets,o=0,n=t.length;o<n;++o){var r=t[o];try{var i=r.rules||r.cssRules;if(i)for(var s=0,a=i.length;s<a;++s){var l=i[s];if(5==l.type){var c=l.cssText.match(oe);ee[c[1].replace(ne,"")]=!0}}}catch(e){}}}return e in ee}var ie={},se=K.a.getNames();function ae(e){var t=e.toString();if(t in ie)return e;for(var o=e.map((function(e){var t=v()(e,1).split(" ");return[t.slice(3).join(" ").replace(/"/g,""),t[1]+t[0]]})),n=0,r=o.length;n<r;++n){var i=o[n],s=i[0];if(!re(s)&&-1!==se.indexOf(s)){var a="https://fonts.googleapis.com/css?family="+s.replace(/ /g,"+")+":"+i[1];if(!document.querySelector('link[href="'+a+'"]')){var l=document.createElement("link");l.href=a,l.rel="stylesheet",document.head.appendChild(l)}}}return ie[t]=!0,e}var le=/^(.*)(\?.*)$/;function ce(e,t){return t&&0===e.indexOf(".")&&(e=t+e),e}function ue(e,t,o){var n=(e=ce(e,t)).match(le);return n?n[1]+o+(n.length>2?n[2]:""):e+o}function de(e,t,o,n,r){return new Promise((function(i,s){if("object"!=$(t)&&(t=JSON.parse(t)),8!=t.version)return s(new Error("glStyle version 8 required."));if(!(e instanceof a.a||e instanceof l.a))return s(new Error("Can only apply to VectorLayer or VectorTileLayer"));var c,u,d;function h(){d||t.sprite&&!c?d?(e.setStyle(d),i()):s(new Error("Something went wrong trying to apply style.")):(d=X(e,t,o,r,c,u,ae),e.getStyle()?i():s(new Error("Nothing to show for source [".concat(o,"]"))))}if(t.sprite){var p=.5==(window.devicePixelRatio>=1.5?.5:1)?"@2x":"",f=ue(t.sprite,n,p+".json");fetch(f,{credentials:"same-origin"}).then((function(e){return e.ok||""===p?e:(f=ue(t.sprite,n,".json"),fetch(f,{credentials:"same-origin"}))})).then((function(e){if(e.ok)return e.json();s(new Error("Problem fetching sprite from ".concat(f,": ").concat(e.statusText)))})).then((function(e){if(void 0===e)return s(new Error("No sprites found."));c=e,u=ue(t.sprite,n,p+".png"),h()})).catch((function(e){s(new Error("Sprites cannot be loaded: ".concat(f,": ").concat(e.message)))}))}else h()}))}function he(e){var t=e.bounds;if(t){var o=Object(J.p)([t[0],t[1]]),n=Object(J.p)([t[2],t[3]]);return[o[0],o[1],n[0],n[1]]}}function pe(e,t){e=O({},e);var o=[t,JSON.stringify(e)].toString(),n=te[o];return n||(n=new s.a({url:e.tiles?void 0:t,tileJSON:e.tiles?e:void 0}),te[o]=n),new Promise((function(e){var o=n.on("change",(function(){var s=n.getState();if("ready"===s){var a=n.getTileJSON(),l=Array.isArray(a.tiles)?a.tiles:[a.tiles];if(t)for(var u=0,d=l.length;u<d;++u)l[u]=decodeURI(new URL(l[u],t).href);var h=n.getTileGrid(),p=he(a),f=a.minzoom||0,m=a.maxzoom||22,g=n.get("ol-source");void 0===g&&(g=new c.a({attributions:n.getAttributions(),format:new r.a,tileGrid:new i.a({origin:h.getOrigin(0),extent:p||h.getExtent(),minZoom:f,resolutions:x.slice(0,m+1),tileSize:512}),urls:l}),n.set("ol-source",g)),Object(Q.b)(o),e(g)}else"error"===s&&(n.set("ol-source",null),Object(Q.b)(o),e(void 0))}));"ready"===n.getState()&&n.changed()}))}new n.a},"./node_modules/ol/AssertionError.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/util.js"),i=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),s=function(e){function t(t){var o=this,n="Assertion failed. See https://openlayers.org/en/"+("latest"===r.a?r.a:"v"+r.a.split("-")[0])+"/doc/errors/#"+t+" for details.";return(o=e.call(this,n)||this).code=t,o.name="AssertionError",o.message=n,o}return i(t,e),t}(Error);t.a=s},"./node_modules/ol/Collection.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return u}));var n,r=o("./node_modules/ol/AssertionError.js"),i=o("./node_modules/ol/Object.js"),s=o("./node_modules/ol/CollectionEventType.js"),a=o("./node_modules/ol/events/Event.js"),l=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),c="length",u=function(e){function t(t,o,n){var r=e.call(this,t)||this;return r.element=o,r.index=n,r}return l(t,e),t}(a.a),d=function(e){function t(t,o){var n=e.call(this)||this;n.on,n.once,n.un;var r=o||{};if(n.unique_=!!r.unique,n.array_=t||[],n.unique_)for(var i=0,s=n.array_.length;i<s;++i)n.assertUnique_(n.array_[i],i);return n.updateLength_(),n}return l(t,e),t.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},t.prototype.extend=function(e){for(var t=0,o=e.length;t<o;++t)this.push(e[t]);return this},t.prototype.forEach=function(e){for(var t=this.array_,o=0,n=t.length;o<n;++o)e(t[o],o,t)},t.prototype.getArray=function(){return this.array_},t.prototype.item=function(e){return this.array_[e]},t.prototype.getLength=function(){return this.get(c)},t.prototype.insertAt=function(e,t){this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new u(s.a.ADD,t,e))},t.prototype.pop=function(){return this.removeAt(this.getLength()-1)},t.prototype.push=function(e){this.unique_&&this.assertUnique_(e);var t=this.getLength();return this.insertAt(t,e),this.getLength()},t.prototype.remove=function(e){for(var t=this.array_,o=0,n=t.length;o<n;++o)if(t[o]===e)return this.removeAt(o)},t.prototype.removeAt=function(e){var t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new u(s.a.REMOVE,t,e)),t},t.prototype.setAt=function(e,t){var o=this.getLength();if(e<o){this.unique_&&this.assertUnique_(t,e);var n=this.array_[e];this.array_[e]=t,this.dispatchEvent(new u(s.a.REMOVE,n,e)),this.dispatchEvent(new u(s.a.ADD,t,e))}else{for(var r=o;r<e;++r)this.insertAt(r,void 0);this.insertAt(e,t)}},t.prototype.updateLength_=function(){this.set(c,this.array_.length)},t.prototype.assertUnique_=function(e,t){for(var o=0,n=this.array_.length;o<n;++o)if(this.array_[o]===e&&o!==t)throw new r.a(58)},t}(i.b);t.b=d},"./node_modules/ol/CollectionEventType.js":function(e,t,o){"use strict";t.a={ADD:"add",REMOVE:"remove"}},"./node_modules/ol/Disposable.js":function(e,t,o){"use strict";var n=function(){function e(){this.disposed=!1}return e.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},e.prototype.disposeInternal=function(){},e}();t.a=n},"./node_modules/ol/Feature.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return u}));var n,r=o("./node_modules/ol/Object.js"),i=o("./node_modules/ol/events/EventType.js"),s=o("./node_modules/ol/asserts.js"),a=o("./node_modules/ol/events.js"),l=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),c=function(e){function t(t){var o=e.call(this)||this;if(o.on,o.once,o.un,o.id_=void 0,o.geometryName_="geometry",o.style_=null,o.styleFunction_=void 0,o.geometryChangeKey_=null,o.addChangeListener(o.geometryName_,o.handleGeometryChanged_),t)if("function"==typeof t.getSimplifiedGeometry){var n=t;o.setGeometry(n)}else{var r=t;o.setProperties(r)}return o}return l(t,e),t.prototype.clone=function(){var e=new t(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());var o=this.getGeometry();o&&e.setGeometry(o.clone());var n=this.getStyle();return n&&e.setStyle(n),e},t.prototype.getGeometry=function(){return this.get(this.geometryName_)},t.prototype.getId=function(){return this.id_},t.prototype.getGeometryName=function(){return this.geometryName_},t.prototype.getStyle=function(){return this.style_},t.prototype.getStyleFunction=function(){return this.styleFunction_},t.prototype.handleGeometryChange_=function(){this.changed()},t.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(Object(a.c)(this.geometryChangeKey_),this.geometryChangeKey_=null);var e=this.getGeometry();e&&(this.geometryChangeKey_=Object(a.a)(e,i.a.CHANGE,this.handleGeometryChange_,this)),this.changed()},t.prototype.setGeometry=function(e){this.set(this.geometryName_,e)},t.prototype.setStyle=function(e){this.style_=e,this.styleFunction_=e?u(e):void 0,this.changed()},t.prototype.setId=function(e){this.id_=e,this.changed()},t.prototype.setGeometryName=function(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()},t}(r.b);function u(e){return"function"==typeof e?e:(Array.isArray(e)?t=e:(Object(s.a)("function"==typeof e.getZIndex,41),t=[e]),function(){return t});var t}t.b=c},"./node_modules/ol/Image.js":function(e,t,o){"use strict";o.d(t,"b",(function(){return h}));var n,r=o("./node_modules/ol/events/EventType.js"),i=o("./node_modules/ol/ImageBase.js"),s=o("./node_modules/ol/ImageState.js"),a=o("./node_modules/ol/has.js"),l=o("./node_modules/ol/extent.js"),c=o("./node_modules/ol/events.js"),u=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),d=function(e){function t(t,o,n,r,i,a){var l=e.call(this,t,o,n,s.a.IDLE)||this;return l.src_=r,l.image_=new Image,null!==i&&(l.image_.crossOrigin=i),l.unlisten_=null,l.state=s.a.IDLE,l.imageLoadFunction_=a,l}return u(t,e),t.prototype.getImage=function(){return this.image_},t.prototype.handleImageError_=function(){this.state=s.a.ERROR,this.unlistenImage_(),this.changed()},t.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=Object(l.G)(this.extent)/this.image_.height),this.state=s.a.LOADED,this.unlistenImage_(),this.changed()},t.prototype.load=function(){this.state!=s.a.IDLE&&this.state!=s.a.ERROR||(this.state=s.a.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=h(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},t.prototype.setImage=function(e){this.image_=e,this.resolution=Object(l.G)(this.extent)/this.image_.height},t.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},t}(i.a);function h(e,t,o){var n=e;if(n.src&&a.c){var i=n.decode(),s=!0;return i.then((function(){s&&t()})).catch((function(e){s&&("EncodingError"===e.name&&"Invalid image type."===e.message?t():o())})),function(){s=!1}}var l=[Object(c.b)(n,r.a.LOAD,t),Object(c.b)(n,r.a.ERROR,o)];return function(){l.forEach(c.c)}}t.a=d},"./node_modules/ol/ImageBase.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/events/Target.js"),i=o("./node_modules/ol/events/EventType.js"),s=o("./node_modules/ol/util.js"),a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),l=function(e){function t(t,o,n,r){var i=e.call(this)||this;return i.extent=t,i.pixelRatio_=n,i.resolution=o,i.state=r,i}return a(t,e),t.prototype.changed=function(){this.dispatchEvent(i.a.CHANGE)},t.prototype.getExtent=function(){return this.extent},t.prototype.getImage=function(){return Object(s.b)()},t.prototype.getPixelRatio=function(){return this.pixelRatio_},t.prototype.getResolution=function(){return this.resolution},t.prototype.getState=function(){return this.state},t.prototype.load=function(){Object(s.b)()},t}(r.a);t.a=l},"./node_modules/ol/ImageState.js":function(e,t,o){"use strict";t.a={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},"./node_modules/ol/ImageTile.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/Tile.js"),i=o("./node_modules/ol/TileState.js"),s=o("./node_modules/ol/dom.js"),a=o("./node_modules/ol/Image.js"),l=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),c=function(e){function t(t,o,n,r,i,s){var a=e.call(this,t,o,s)||this;return a.crossOrigin_=r,a.src_=n,a.key=n,a.image_=new Image,null!==r&&(a.image_.crossOrigin=r),a.unlisten_=null,a.tileLoadFunction_=i,a}return l(t,e),t.prototype.getImage=function(){return this.image_},t.prototype.setImage=function(e){this.image_=e,this.state=i.a.LOADED,this.unlistenImage_(),this.changed()},t.prototype.handleImageError_=function(){var e;this.state=i.a.ERROR,this.unlistenImage_(),this.image_=((e=Object(s.a)(1,1)).fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1),e.canvas),this.changed()},t.prototype.handleImageLoad_=function(){var e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=i.a.LOADED:this.state=i.a.EMPTY,this.unlistenImage_(),this.changed()},t.prototype.load=function(){this.state==i.a.ERROR&&(this.state=i.a.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==i.a.IDLE&&(this.state=i.a.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Object(a.b)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},t.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},t}(r.a);t.a=c},"./node_modules/ol/Kinetic.js":function(e,t,o){"use strict";var n=function(){function e(e,t,o){this.decay_=e,this.minVelocity_=t,this.delay_=o,this.points_=[],this.angle_=0,this.initialVelocity_=0}return e.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},e.prototype.update=function(e,t){this.points_.push(e,t,Date.now())},e.prototype.end=function(){if(this.points_.length<6)return!1;var e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;for(var o=t-3;o>0&&this.points_[o+2]>e;)o-=3;var n=this.points_[t+2]-this.points_[o+2];if(n<1e3/60)return!1;var r=this.points_[t]-this.points_[o],i=this.points_[t+1]-this.points_[o+1];return this.angle_=Math.atan2(i,r),this.initialVelocity_=Math.sqrt(r*r+i*i)/n,this.initialVelocity_>this.minVelocity_},e.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},e.prototype.getAngle=function(){return this.angle_},e}();t.a=n},"./node_modules/ol/Map.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/renderer/Composite.js"),i=o("./node_modules/ol/PluggableMap.js"),s=o("./node_modules/ol/obj.js"),a=o("./node_modules/ol/control.js"),l=o("./node_modules/ol/interaction.js"),c=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),u=function(e){function t(t){return(t=Object(s.a)({},t)).controls||(t.controls=Object(a.a)()),t.interactions||(t.interactions=Object(l.a)({onFocusOnly:!0})),e.call(this,t)||this}return c(t,e),t.prototype.createRenderer=function(){return new r.a(this)},t}(i.a);t.a=u},"./node_modules/ol/MapBrowserEvent.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/MapEvent.js"),i=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),s=function(e){function t(t,o,n,r,i){var s=e.call(this,t,o,i)||this;return s.originalEvent=n,s.pixel_=null,s.coordinate_=null,s.dragging=void 0!==r&&r,s}return i(t,e),Object.defineProperty(t.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(e){this.pixel_=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(e){this.coordinate_=e},enumerable:!1,configurable:!0}),t.prototype.preventDefault=function(){e.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){e.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},t}(r.a);t.a=s},"./node_modules/ol/MapBrowserEventHandler.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/events/EventType.js"),i=o("./node_modules/ol/MapBrowserEvent.js"),s=o("./node_modules/ol/MapBrowserEventType.js"),a=o("./node_modules/ol/pointer/EventType.js"),l=o("./node_modules/ol/events/Target.js"),c=o("./node_modules/ol/has.js"),u=o("./node_modules/ol/functions.js"),d=o("./node_modules/ol/events.js"),h=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),p=function(e){function t(t,o){var n=e.call(this,t)||this;n.map_=t,n.clickTimeoutId_,n.emulateClicks_=!1,n.dragging_=!1,n.dragListenerKeys_=[],n.moveTolerance_=void 0===o?1:o,n.down_=null;var i=n.map_.getViewport();return n.activePointers_=0,n.trackedTouches_={},n.element_=i,n.pointerdownListenerKey_=Object(d.a)(i,a.a.POINTERDOWN,n.handlePointerDown_,n),n.originalPointerMoveEvent_,n.relayedListenerKey_=Object(d.a)(i,a.a.POINTERMOVE,n.relayEvent_,n),n.boundHandleTouchMove_=n.handleTouchMove_.bind(n),n.element_.addEventListener(r.a.TOUCHMOVE,n.boundHandleTouchMove_,!!c.e&&{passive:!1}),n}return h(t,e),t.prototype.emulateClick_=function(e){var t=new i.a(s.a.CLICK,this.map_,e);this.dispatchEvent(t),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new i.a(s.a.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var t=new i.a(s.a.SINGLECLICK,this.map_,e);this.dispatchEvent(t)}.bind(this),250)},t.prototype.updateActivePointers_=function(e){var t=e;t.type==s.a.POINTERUP||t.type==s.a.POINTERCANCEL?delete this.trackedTouches_[t.pointerId]:t.type==s.a.POINTERDOWN&&(this.trackedTouches_[t.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},t.prototype.handlePointerUp_=function(e){this.updateActivePointers_(e);var t=new i.a(s.a.POINTERUP,this.map_,e);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(d.c),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},t.prototype.isMouseActionButton_=function(e){return 0===e.button},t.prototype.handlePointerDown_=function(e){this.emulateClicks_=0===this.activePointers_,this.updateActivePointers_(e);var t=new i.a(s.a.POINTERDOWN,this.map_,e);for(var o in this.dispatchEvent(t),this.down_={},e){var n=e[o];this.down_[o]="function"==typeof n?u.c:n}if(0===this.dragListenerKeys_.length){var r=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Object(d.a)(r,s.a.POINTERMOVE,this.handlePointerMove_,this),Object(d.a)(r,s.a.POINTERUP,this.handlePointerUp_,this),Object(d.a)(this.element_,s.a.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push(Object(d.a)(this.element_.getRootNode(),s.a.POINTERUP,this.handlePointerUp_,this))}},t.prototype.handlePointerMove_=function(e){if(this.isMoving_(e)){this.dragging_=!0;var t=new i.a(s.a.POINTERDRAG,this.map_,e,this.dragging_);this.dispatchEvent(t)}},t.prototype.relayEvent_=function(e){this.originalPointerMoveEvent_=e;var t=!(!this.down_||!this.isMoving_(e));this.dispatchEvent(new i.a(e.type,this.map_,e,t))},t.prototype.handleTouchMove_=function(e){var t=this.originalPointerMoveEvent_;t&&!t.defaultPrevented||"boolean"==typeof e.cancelable&&!0!==e.cancelable||e.preventDefault()},t.prototype.isMoving_=function(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_},t.prototype.disposeInternal=function(){this.relayedListenerKey_&&(Object(d.c)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(r.a.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Object(d.c)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(d.c),this.dragListenerKeys_.length=0,this.element_=null,e.prototype.disposeInternal.call(this)},t}(l.a);t.a=p},"./node_modules/ol/MapBrowserEventType.js":function(e,t,o){"use strict";var n=o("./node_modules/ol/events/EventType.js");t.a={SINGLECLICK:"singleclick",CLICK:n.a.CLICK,DBLCLICK:n.a.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},"./node_modules/ol/MapEvent.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/events/Event.js"),i=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),s=function(e){function t(t,o,n){var r=e.call(this,t)||this;return r.map=o,r.frameState=void 0!==n?n:null,r}return i(t,e),t}(r.a);t.a=s},"./node_modules/ol/MapEventType.js":function(e,t,o){"use strict";t.a={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend"}},"./node_modules/ol/MapProperty.js":function(e,t,o){"use strict";t.a={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"}},"./node_modules/ol/Object.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return u}));var n,r=o("./node_modules/ol/events/Event.js"),i=o("./node_modules/ol/ObjectEventType.js"),s=o("./node_modules/ol/Observable.js"),a=o("./node_modules/ol/obj.js"),l=o("./node_modules/ol/util.js"),c=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),u=function(e){function t(t,o,n){var r=e.call(this,t)||this;return r.key=o,r.oldValue=n,r}return c(t,e),t}(r.a),d=function(e){function t(t){var o=e.call(this)||this;return o.on,o.once,o.un,Object(l.c)(o),o.values_=null,void 0!==t&&o.setProperties(t),o}return c(t,e),t.prototype.get=function(e){var t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t},t.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},t.prototype.getProperties=function(){return this.values_&&Object(a.a)({},this.values_)||{}},t.prototype.hasProperties=function(){return!!this.values_},t.prototype.notify=function(e,t){var o;o="change:"+e,this.dispatchEvent(new u(o,e,t)),o=i.a.PROPERTYCHANGE,this.dispatchEvent(new u(o,e,t))},t.prototype.addChangeListener=function(e,t){this.addEventListener("change:"+e,t)},t.prototype.removeChangeListener=function(e,t){this.removeEventListener("change:"+e,t)},t.prototype.set=function(e,t,o){var n=this.values_||(this.values_={});if(o)n[e]=t;else{var r=n[e];n[e]=t,r!==t&&this.notify(e,r)}},t.prototype.setProperties=function(e,t){for(var o in e)this.set(o,e[o],t)},t.prototype.applyProperties=function(e){e.values_&&Object(a.a)(this.values_||(this.values_={}),e.values_)},t.prototype.unset=function(e,t){if(this.values_&&e in this.values_){var o=this.values_[e];delete this.values_[e],Object(a.d)(this.values_)&&(this.values_=null),t||this.notify(e,o)}},t}(s.a);t.b=d},"./node_modules/ol/ObjectEventType.js":function(e,t,o){"use strict";t.a={PROPERTYCHANGE:"propertychange"}},"./node_modules/ol/Observable.js":function(e,t,o){"use strict";o.d(t,"b",(function(){return c}));var n,r=o("./node_modules/ol/events/Target.js"),i=o("./node_modules/ol/events/EventType.js"),s=o("./node_modules/ol/events.js"),a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),l=function(e){function t(){var t=e.call(this)||this;return t.on=t.onInternal,t.once=t.onceInternal,t.un=t.unInternal,t.revision_=0,t}return a(t,e),t.prototype.changed=function(){++this.revision_,this.dispatchEvent(i.a.CHANGE)},t.prototype.getRevision=function(){return this.revision_},t.prototype.onInternal=function(e,t){if(Array.isArray(e)){for(var o=e.length,n=new Array(o),r=0;r<o;++r)n[r]=Object(s.a)(this,e[r],t);return n}return Object(s.a)(this,e,t)},t.prototype.onceInternal=function(e,t){var o;if(Array.isArray(e)){var n=e.length;o=new Array(n);for(var r=0;r<n;++r)o[r]=Object(s.b)(this,e[r],t)}else o=Object(s.b)(this,e,t);return t.ol_key=o,o},t.prototype.unInternal=function(e,t){var o=t.ol_key;if(o)c(o);else if(Array.isArray(e))for(var n=0,r=e.length;n<r;++n)this.removeEventListener(e[n],t);else this.removeEventListener(e,t)},t}(r.a);function c(e){if(Array.isArray(e))for(var t=0,o=e.length;t<o;++t)Object(s.c)(e[t]);else Object(s.c)(e)}l.prototype.on,l.prototype.once,l.prototype.un,t.a=l},"./node_modules/ol/Overlay.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/Object.js"),i=o("./node_modules/ol/MapEventType.js"),s=o("./node_modules/ol/OverlayPositioning.js"),a=o("./node_modules/ol/css.js"),l=o("./node_modules/ol/extent.js"),c=o("./node_modules/ol/events.js"),u=o("./node_modules/ol/dom.js"),d=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),h="element",p="map",f="offset",m="position",g="positioning",y=function(e){function t(t){var o=e.call(this)||this;o.on,o.once,o.un,o.options=t,o.id=t.id,o.insertFirst=void 0===t.insertFirst||t.insertFirst,o.stopEvent=void 0===t.stopEvent||t.stopEvent,o.element=document.createElement("div"),o.element.className=void 0!==t.className?t.className:"ol-overlay-container "+a.d,o.element.style.position="absolute",o.element.style.pointerEvents="auto";var n=t.autoPan;return n&&"object"!=typeof n&&(n={animation:t.autoPanAnimation,margin:t.autoPanMargin}),o.autoPan=n||!1,o.rendered={transform_:"",visible:!0},o.mapPostrenderListenerKey=null,o.addChangeListener(h,o.handleElementChanged),o.addChangeListener(p,o.handleMapChanged),o.addChangeListener(f,o.handleOffsetChanged),o.addChangeListener(m,o.handlePositionChanged),o.addChangeListener(g,o.handlePositioningChanged),void 0!==t.element&&o.setElement(t.element),o.setOffset(void 0!==t.offset?t.offset:[0,0]),o.setPositioning(void 0!==t.positioning?t.positioning:s.a.TOP_LEFT),void 0!==t.position&&o.setPosition(t.position),o}return d(t,e),t.prototype.getElement=function(){return this.get(h)},t.prototype.getId=function(){return this.id},t.prototype.getMap=function(){return this.get(p)},t.prototype.getOffset=function(){return this.get(f)},t.prototype.getPosition=function(){return this.get(m)},t.prototype.getPositioning=function(){return this.get(g)},t.prototype.handleElementChanged=function(){Object(u.d)(this.element);var e=this.getElement();e&&this.element.appendChild(e)},t.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(Object(u.e)(this.element),Object(c.c)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var e=this.getMap();if(e){this.mapPostrenderListenerKey=Object(c.a)(e,i.a.POSTRENDER,this.render,this),this.updatePixelPosition();var t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}},t.prototype.render=function(){this.updatePixelPosition()},t.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},t.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},t.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},t.prototype.setElement=function(e){this.set(h,e)},t.prototype.setMap=function(e){this.set(p,e)},t.prototype.setOffset=function(e){this.set(f,e)},t.prototype.setPosition=function(e){this.set(m,e)},t.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},t.prototype.panIntoView=function(e){var t=this.getMap();if(t&&t.getTargetElement()&&this.get(m)){var o=this.getRect(t.getTargetElement(),t.getSize()),n=this.getElement(),r=this.getRect(n,[Object(u.c)(n),Object(u.b)(n)]),i=e||{},s=void 0===i.margin?20:i.margin;if(!Object(l.h)(o,r)){var a=r[0]-o[0],c=o[2]-r[2],d=r[1]-o[1],h=o[3]-r[3],p=[0,0];if(a<0?p[0]=a-s:c<0&&(p[0]=Math.abs(c)+s),d<0?p[1]=d-s:h<0&&(p[1]=Math.abs(h)+s),0!==p[0]||0!==p[1]){var f=t.getView().getCenterInternal(),g=t.getPixelFromCoordinateInternal(f);if(!g)return;var y=[g[0]+p[0],g[1]+p[1]],v=i.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(y),duration:v.duration,easing:v.easing})}}}},t.prototype.getRect=function(e,t){var o=e.getBoundingClientRect(),n=o.left+window.pageXOffset,r=o.top+window.pageYOffset;return[n,r,n+t[0],r+t[1]]},t.prototype.setPositioning=function(e){this.set(g,e)},t.prototype.setVisible=function(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)},t.prototype.updatePixelPosition=function(){var e=this.getMap(),t=this.getPosition();if(e&&e.isRendered()&&t){var o=e.getPixelFromCoordinate(t),n=e.getSize();this.updateRenderedPosition(o,n)}else this.setVisible(!1)},t.prototype.updateRenderedPosition=function(e,t){var o=this.element.style,n=this.getOffset(),r=this.getPositioning();this.setVisible(!0);var i=Math.round(e[0]+n[0])+"px",a=Math.round(e[1]+n[1])+"px",l="0%",c="0%";r==s.a.BOTTOM_RIGHT||r==s.a.CENTER_RIGHT||r==s.a.TOP_RIGHT?l="-100%":r!=s.a.BOTTOM_CENTER&&r!=s.a.CENTER_CENTER&&r!=s.a.TOP_CENTER||(l="-50%"),r==s.a.BOTTOM_LEFT||r==s.a.BOTTOM_CENTER||r==s.a.BOTTOM_RIGHT?c="-100%":r!=s.a.CENTER_LEFT&&r!=s.a.CENTER_CENTER&&r!=s.a.CENTER_RIGHT||(c="-50%");var u="translate("+l+", "+c+") translate("+i+", "+a+")";this.rendered.transform_!=u&&(this.rendered.transform_=u,o.transform=u,o.msTransform=u)},t.prototype.getOptions=function(){return this.options},t}(r.b);t.a=y},"./node_modules/ol/OverlayPositioning.js":function(e,t,o){"use strict";t.a={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"}},"./node_modules/ol/PluggableMap.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/Object.js"),i=o("./node_modules/ol/Collection.js"),s=o("./node_modules/ol/CollectionEventType.js"),a=o("./node_modules/ol/events/EventType.js"),l=o("./node_modules/ol/layer/Group.js"),c=o("./node_modules/ol/MapBrowserEvent.js"),u=o("./node_modules/ol/MapBrowserEventHandler.js"),d=o("./node_modules/ol/MapBrowserEventType.js"),h=o("./node_modules/ol/MapEvent.js"),p=o("./node_modules/ol/MapEventType.js"),f=o("./node_modules/ol/MapProperty.js"),m=o("./node_modules/ol/ObjectEventType.js"),g=o("./node_modules/ol/pointer/EventType.js"),y=o("./node_modules/ol/render/EventType.js"),v=o("./node_modules/ol/TileQueue.js"),_=o("./node_modules/ol/View.js"),b=o("./node_modules/ol/ViewHint.js"),w=o("./node_modules/ol/has.js"),E=o("./node_modules/ol/functions.js"),O=o("./node_modules/ol/transform.js"),S=o("./node_modules/ol/asserts.js"),x=o("./node_modules/ol/extent.js"),C=o("./node_modules/ol/proj.js"),j=o("./node_modules/ol/size.js"),P=o("./node_modules/ol/events.js"),T=o("./node_modules/ol/dom.js"),A=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),M=function(e){function t(t){var o=e.call(this)||this;o.on,o.once,o.un;var n=function(e){var t=null;void 0!==e.keyboardEventTarget&&(t="string"==typeof e.keyboardEventTarget?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget);var o,n,r,s={},a=e.layers&&"function"==typeof e.layers.getLayers?e.layers:new l.a({layers:e.layers});s[f.a.LAYERGROUP]=a,s[f.a.TARGET]=e.target,s[f.a.VIEW]=e.view instanceof _.d?e.view:new _.d,void 0!==e.controls&&(Array.isArray(e.controls)?o=new i.b(e.controls.slice()):(Object(S.a)("function"==typeof e.controls.getArray,47),o=e.controls));void 0!==e.interactions&&(Array.isArray(e.interactions)?n=new i.b(e.interactions.slice()):(Object(S.a)("function"==typeof e.interactions.getArray,48),n=e.interactions));void 0!==e.overlays?Array.isArray(e.overlays)?r=new i.b(e.overlays.slice()):(Object(S.a)("function"==typeof e.overlays.getArray,49),r=e.overlays):r=new i.b;return{controls:o,interactions:n,keyboardEventTarget:t,overlays:r,values:s}}(t);o.boundHandleBrowserEvent_=o.handleBrowserEvent.bind(o),o.maxTilesLoading_=void 0!==t.maxTilesLoading?t.maxTilesLoading:16,o.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:w.a,o.postRenderTimeoutHandle_,o.animationDelayKey_,o.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(o),o.coordinateToPixelTransform_=Object(O.d)(),o.pixelToCoordinateTransform_=Object(O.d)(),o.frameIndex_=0,o.frameState_=null,o.previousExtent_=null,o.viewPropertyListenerKey_=null,o.viewChangeListenerKey_=null,o.layerGroupPropertyListenerKeys_=null,o.viewport_=document.createElement("div"),o.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),o.viewport_.style.position="relative",o.viewport_.style.overflow="hidden",o.viewport_.style.width="100%",o.viewport_.style.height="100%",o.overlayContainer_=document.createElement("div"),o.overlayContainer_.style.position="absolute",o.overlayContainer_.style.zIndex="0",o.overlayContainer_.style.width="100%",o.overlayContainer_.style.height="100%",o.overlayContainer_.style.pointerEvents="none",o.overlayContainer_.className="ol-overlaycontainer",o.viewport_.appendChild(o.overlayContainer_),o.overlayContainerStopEvent_=document.createElement("div"),o.overlayContainerStopEvent_.style.position="absolute",o.overlayContainerStopEvent_.style.zIndex="0",o.overlayContainerStopEvent_.style.width="100%",o.overlayContainerStopEvent_.style.height="100%",o.overlayContainerStopEvent_.style.pointerEvents="none",o.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",o.viewport_.appendChild(o.overlayContainerStopEvent_),o.mapBrowserEventHandler_=null,o.moveTolerance_=t.moveTolerance,o.keyboardEventTarget_=n.keyboardEventTarget,o.keyHandlerKeys_=null,o.controls=n.controls||new i.b,o.interactions=n.interactions||new i.b,o.overlays_=n.overlays,o.overlayIdIndex_={},o.renderer_=null,o.handleResize_,o.postRenderFunctions_=[],o.tileQueue_=new v.a(o.getTilePriority.bind(o),o.handleTileChange_.bind(o)),o.addChangeListener(f.a.LAYERGROUP,o.handleLayerGroupChanged_),o.addChangeListener(f.a.VIEW,o.handleViewChanged_),o.addChangeListener(f.a.SIZE,o.handleSizeChanged_),o.addChangeListener(f.a.TARGET,o.handleTargetChanged_),o.setProperties(n.values);var r=o;return!t.view||t.view instanceof _.d||t.view.then((function(e){r.setView(new _.d(e))})),o.controls.addEventListener(s.a.ADD,function(e){e.element.setMap(this)}.bind(o)),o.controls.addEventListener(s.a.REMOVE,function(e){e.element.setMap(null)}.bind(o)),o.interactions.addEventListener(s.a.ADD,function(e){e.element.setMap(this)}.bind(o)),o.interactions.addEventListener(s.a.REMOVE,function(e){e.element.setMap(null)}.bind(o)),o.overlays_.addEventListener(s.a.ADD,function(e){this.addOverlayInternal_(e.element)}.bind(o)),o.overlays_.addEventListener(s.a.REMOVE,function(e){var t=e.element.getId();void 0!==t&&delete this.overlayIdIndex_[t.toString()],e.element.setMap(null)}.bind(o)),o.controls.forEach(function(e){e.setMap(this)}.bind(o)),o.interactions.forEach(function(e){e.setMap(this)}.bind(o)),o.overlays_.forEach(o.addOverlayInternal_.bind(o)),o}return A(t,e),t.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},t.prototype.addControl=function(e){this.getControls().push(e)},t.prototype.addInteraction=function(e){this.getInteractions().push(e)},t.prototype.addLayer=function(e){this.getLayerGroup().getLayers().push(e)},t.prototype.addOverlay=function(e){this.getOverlays().push(e)},t.prototype.addOverlayInternal_=function(e){var t=e.getId();void 0!==t&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)},t.prototype.disposeInternal=function(){this.setTarget(null),e.prototype.disposeInternal.call(this)},t.prototype.forEachFeatureAtPixel=function(e,t,o){if(this.frameState_){var n=this.getCoordinateFromPixelInternal(e),r=void 0!==(o=void 0!==o?o:{}).hitTolerance?o.hitTolerance:0,i=void 0!==o.layerFilter?o.layerFilter:E.b,s=!1!==o.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,r,s,t,null,i,null)}},t.prototype.getFeaturesAtPixel=function(e,t){var o=[];return this.forEachFeatureAtPixel(e,(function(e){o.push(e)}),t),o},t.prototype.forEachLayerAtPixel=function(e,t,o){if(this.frameState_){var n=o||{},r=void 0!==n.hitTolerance?n.hitTolerance:0,i=n.layerFilter||E.b;return this.renderer_.forEachLayerAtPixel(e,this.frameState_,r,t,i)}},t.prototype.hasFeatureAtPixel=function(e,t){if(!this.frameState_)return!1;var o=this.getCoordinateFromPixelInternal(e),n=void 0!==(t=void 0!==t?t:{}).layerFilter?t.layerFilter:E.b,r=void 0!==t.hitTolerance?t.hitTolerance:0,i=!1!==t.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(o,this.frameState_,r,i,n,null)},t.prototype.getEventCoordinate=function(e){return this.getCoordinateFromPixel(this.getEventPixel(e))},t.prototype.getEventCoordinateInternal=function(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))},t.prototype.getEventPixel=function(e){var t=this.viewport_.getBoundingClientRect(),o="changedTouches"in e?e.changedTouches[0]:e;return[o.clientX-t.left,o.clientY-t.top]},t.prototype.getTarget=function(){return this.get(f.a.TARGET)},t.prototype.getTargetElement=function(){var e=this.getTarget();return void 0!==e?"string"==typeof e?document.getElementById(e):e:null},t.prototype.getCoordinateFromPixel=function(e){return Object(C.B)(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())},t.prototype.getCoordinateFromPixelInternal=function(e){var t=this.frameState_;return t?Object(O.a)(t.pixelToCoordinateTransform,e.slice()):null},t.prototype.getControls=function(){return this.controls},t.prototype.getOverlays=function(){return this.overlays_},t.prototype.getOverlayById=function(e){var t=this.overlayIdIndex_[e.toString()];return void 0!==t?t:null},t.prototype.getInteractions=function(){return this.interactions},t.prototype.getLayerGroup=function(){return this.get(f.a.LAYERGROUP)},t.prototype.setLayers=function(e){var t=this.getLayerGroup();if(e instanceof i.b)t.setLayers(e);else{var o=t.getLayers();o.clear(),o.extend(e)}},t.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},t.prototype.getLoading=function(){for(var e=this.getLayerGroup().getLayerStatesArray(),t=0,o=e.length;t<o;++t){var n=e[t].layer.getSource();if(n&&n.loading)return!0}return!1},t.prototype.getPixelFromCoordinate=function(e){var t=Object(C.q)(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)},t.prototype.getPixelFromCoordinateInternal=function(e){var t=this.frameState_;return t?Object(O.a)(t.coordinateToPixelTransform,e.slice(0,2)):null},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.getSize=function(){return this.get(f.a.SIZE)},t.prototype.getView=function(){return this.get(f.a.VIEW)},t.prototype.getViewport=function(){return this.viewport_},t.prototype.getOverlayContainer=function(){return this.overlayContainer_},t.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},t.prototype.getOwnerDocument=function(){var e=this.getTargetElement();return e?e.ownerDocument:document},t.prototype.getTilePriority=function(e,t,o,n){return Object(v.b)(this.frameState_,e,t,o,n)},t.prototype.handleBrowserEvent=function(e,t){var o=t||e.type,n=new c.a(o,this,e);this.handleMapBrowserEvent(n)},t.prototype.handleMapBrowserEvent=function(e){if(this.frameState_){var t=e.originalEvent,o=t.type;if(o===g.a.POINTERDOWN||o===a.a.WHEEL||o===a.a.KEYDOWN){var n=this.getOwnerDocument(),r=this.viewport_.getRootNode?this.viewport_.getRootNode():n,i=t.target;if(this.overlayContainerStopEvent_.contains(i)||!(r===n?n.documentElement:r).contains(i))return}if(e.frameState=this.frameState_,!1!==this.dispatchEvent(e))for(var s=this.getInteractions().getArray().slice(),l=s.length-1;l>=0;l--){var c=s[l];if(c.getMap()===this&&c.getActive()&&this.getTargetElement())if(!c.handleEvent(e)||e.propagationStopped)break}}},t.prototype.handlePostRender=function(){var e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){var o=this.maxTilesLoading_,n=o;if(e){var r=e.viewHints;if(r[b.a.ANIMATING]||r[b.a.INTERACTING]){var i=Date.now()-e.time>8;o=i?0:8,n=i?0:2}}t.getTilesLoading()<o&&(t.reprioritize(),t.loadMoreTiles(o,n))}!e||!this.hasListener(y.a.RENDERCOMPLETE)||e.animate||this.tileQueue_.getTilesLoading()||this.getLoading()||this.renderer_.dispatchRenderEvent(y.a.RENDERCOMPLETE,e);for(var s=this.postRenderFunctions_,a=0,l=s.length;a<l;++a)s[a](this,e);s.length=0},t.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},t.prototype.handleTargetChanged_=function(){var e;if(this.getTarget()&&(e=this.getTargetElement()),this.mapBrowserEventHandler_){for(var t=0,o=this.keyHandlerKeys_.length;t<o;++t)Object(P.c)(this.keyHandlerKeys_[t]);this.keyHandlerKeys_=null,this.viewport_.removeEventListener(a.a.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(a.a.WHEEL,this.boundHandleBrowserEvent_),void 0!==this.handleResize_&&(removeEventListener(a.a.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Object(T.e)(this.viewport_)}if(e){for(var n in e.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new u.a(this,this.moveTolerance_),d.a)this.mapBrowserEventHandler_.addEventListener(d.a[n],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(a.a.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(a.a.WHEEL,this.boundHandleBrowserEvent_,!!w.e&&{passive:!1});var r=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.keyHandlerKeys_=[Object(P.a)(r,a.a.KEYDOWN,this.handleBrowserEvent,this),Object(P.a)(r,a.a.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(a.a.RESIZE,this.handleResize_,!1))}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()},t.prototype.handleTileChange_=function(){this.render()},t.prototype.handleViewPropertyChanged_=function(){this.render()},t.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(Object(P.c)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Object(P.c)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var e=this.getView();e&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=Object(P.a)(e,m.a.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Object(P.a)(e,a.a.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()},t.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(P.c),this.layerGroupPropertyListenerKeys_=null);var e=this.getLayerGroup();e&&(this.layerGroupPropertyListenerKeys_=[Object(P.a)(e,m.a.PROPERTYCHANGE,this.render,this),Object(P.a)(e,a.a.CHANGE,this.render,this)]),this.render()},t.prototype.isRendered=function(){return!!this.frameState_},t.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},t.prototype.redrawText=function(){for(var e=this.getLayerGroup().getLayerStatesArray(),t=0,o=e.length;t<o;++t){var n=e[t].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}},t.prototype.render=function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},t.prototype.removeControl=function(e){return this.getControls().remove(e)},t.prototype.removeInteraction=function(e){return this.getInteractions().remove(e)},t.prototype.removeLayer=function(e){return this.getLayerGroup().getLayers().remove(e)},t.prototype.removeOverlay=function(e){return this.getOverlays().remove(e)},t.prototype.renderFrame_=function(e){var t=this,o=this.getSize(),n=this.getView(),r=this.frameState_,i=null;if(void 0!==o&&Object(j.b)(o)&&n&&n.isDef()){var s=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=n.getState();if(i={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:Object(x.F)(a.center,a.resolution,a.rotation,o),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:o,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:s,wantedTiles:{}},a.nextCenter&&a.nextResolution){var l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;i.nextExtent=Object(x.F)(a.nextCenter,a.nextResolution,l,o)}}if(this.frameState_=i,this.renderer_.renderFrame(i),i){if(i.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,i.postRenderFunctions),r)(!this.previousExtent_||!Object(x.Q)(this.previousExtent_)&&!Object(x.r)(i.extent,this.previousExtent_))&&(this.dispatchEvent(new h.a(p.a.MOVESTART,this,r)),this.previousExtent_=Object(x.m)(this.previousExtent_));this.previousExtent_&&!i.viewHints[b.a.ANIMATING]&&!i.viewHints[b.a.INTERACTING]&&!Object(x.r)(i.extent,this.previousExtent_)&&(this.dispatchEvent(new h.a(p.a.MOVEEND,this,i)),Object(x.e)(i.extent,this.previousExtent_))}this.dispatchEvent(new h.a(p.a.POSTRENDER,this,i)),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout((function(){t.postRenderTimeoutHandle_=void 0,t.handlePostRender()}),0))},t.prototype.setLayerGroup=function(e){this.set(f.a.LAYERGROUP,e)},t.prototype.setSize=function(e){this.set(f.a.SIZE,e)},t.prototype.setTarget=function(e){this.set(f.a.TARGET,e)},t.prototype.setView=function(e){if(!e||e instanceof _.d)this.set(f.a.VIEW,e);else{this.set(f.a.VIEW,new _.d);var t=this;e.then((function(e){t.setView(new _.d(e))}))}},t.prototype.updateSize=function(){var e=this.getTargetElement(),t=void 0;if(e){var o=getComputedStyle(e),n=e.offsetWidth-parseFloat(o.borderLeftWidth)-parseFloat(o.paddingLeft)-parseFloat(o.paddingRight)-parseFloat(o.borderRightWidth),r=e.offsetHeight-parseFloat(o.borderTopWidth)-parseFloat(o.paddingTop)-parseFloat(o.paddingBottom)-parseFloat(o.borderBottomWidth);isNaN(n)||isNaN(r)||(t=[n,r],!Object(j.b)(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(t),this.updateViewportSize_()},t.prototype.updateViewportSize_=function(){var e=this.getView();if(e){var t=void 0,o=getComputedStyle(this.viewport_);o.width&&o.height&&(t=[parseInt(o.width,10),parseInt(o.height,10)]),e.setViewportSize(t)}},t}(r.b);t.a=M},"./node_modules/ol/Tile.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/events/Target.js"),i=o("./node_modules/ol/events/EventType.js"),s=o("./node_modules/ol/TileState.js"),a=o("./node_modules/ol/util.js"),l=o("./node_modules/ol/easing.js"),c=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),u=function(e){function t(t,o,n){var r=e.call(this)||this,i=n||{};return r.tileCoord=t,r.state=o,r.interimTile=null,r.key="",r.transition_=void 0===i.transition?250:i.transition,r.transitionStarts_={},r}return c(t,e),t.prototype.changed=function(){this.dispatchEvent(i.a.CHANGE)},t.prototype.release=function(){},t.prototype.getKey=function(){return this.key+"/"+this.tileCoord},t.prototype.getInterimTile=function(){if(!this.interimTile)return this;var e=this.interimTile;do{if(e.getState()==s.a.LOADED)return this.transition_=0,e;e=e.interimTile}while(e);return this},t.prototype.refreshInterimChain=function(){if(this.interimTile){var e=this.interimTile,t=this;do{if(e.getState()==s.a.LOADED){e.interimTile=null;break}e.getState()==s.a.LOADING?t=e:e.getState()==s.a.IDLE?t.interimTile=e.interimTile:t=e,e=t.interimTile}while(e)}},t.prototype.getTileCoord=function(){return this.tileCoord},t.prototype.getState=function(){return this.state},t.prototype.setState=function(e){if(this.state!==s.a.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()},t.prototype.load=function(){Object(a.b)()},t.prototype.getAlpha=function(e,t){if(!this.transition_)return 1;var o=this.transitionStarts_[e];if(o){if(-1===o)return 1}else o=t,this.transitionStarts_[e]=o;var n=t-o+1e3/60;return n>=this.transition_?1:Object(l.a)(n/this.transition_)},t.prototype.inTransition=function(e){return!!this.transition_&&-1!==this.transitionStarts_[e]},t.prototype.endTransition=function(e){this.transition_&&(this.transitionStarts_[e]=-1)},t}(r.a);t.a=u},"./node_modules/ol/TileCache.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/structs/LRUCache.js"),i=o("./node_modules/ol/tilecoord.js"),s=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.expireCache=function(e){for(;this.canExpireCache();){if(this.peekLast().getKey()in e)break;this.pop().release()}},t.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var e=this.peekFirstKey(),t=Object(i.b)(e)[0];this.forEach(function(e){e.tileCoord[0]!==t&&(this.remove(Object(i.d)(e.tileCoord)),e.release())}.bind(this))}},t}(r.a);t.a=a},"./node_modules/ol/TileQueue.js":function(e,t,o){"use strict";o.d(t,"b",(function(){return c}));var n,r=o("./node_modules/ol/events/EventType.js"),i=o("./node_modules/ol/structs/PriorityQueue.js"),s=o("./node_modules/ol/TileState.js"),a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),l=function(e){function t(t,o){var n=e.call(this,(function(e){return t.apply(null,e)}),(function(e){return e[0].getKey()}))||this;return n.boundHandleTileChange_=n.handleTileChange.bind(n),n.tileChangeCallback_=o,n.tilesLoading_=0,n.tilesLoadingKeys_={},n}return a(t,e),t.prototype.enqueue=function(t){var o=e.prototype.enqueue.call(this,t);o&&t[0].addEventListener(r.a.CHANGE,this.boundHandleTileChange_);return o},t.prototype.getTilesLoading=function(){return this.tilesLoading_},t.prototype.handleTileChange=function(e){var t=e.target,o=t.getState();if(o===s.a.LOADED||o===s.a.ERROR||o===s.a.EMPTY){t.removeEventListener(r.a.CHANGE,this.boundHandleTileChange_);var n=t.getKey();n in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[n],--this.tilesLoading_),this.tileChangeCallback_()}},t.prototype.loadMoreTiles=function(e,t){for(var o,n,r=0;this.tilesLoading_<e&&r<t&&this.getCount()>0;)n=(o=this.dequeue()[0]).getKey(),o.getState()!==s.a.IDLE||n in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[n]=!0,++this.tilesLoading_,++r,o.load())},t}(i.b);function c(e,t,o,n,r){if(!e||!(o in e.wantedTiles))return i.a;if(!e.wantedTiles[o][t.getKey()])return i.a;var s=e.viewState.center,a=n[0]-s[0],l=n[1]-s[1];return 65536*Math.log(r)+Math.sqrt(a*a+l*l)/r}t.a=l},"./node_modules/ol/TileRange.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return r}));var n=function(){function e(e,t,o,n){this.minX=e,this.maxX=t,this.minY=o,this.maxY=n}return e.prototype.contains=function(e){return this.containsXY(e[1],e[2])},e.prototype.containsTileRange=function(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY},e.prototype.containsXY=function(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY},e.prototype.equals=function(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY},e.prototype.extend=function(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)},e.prototype.getHeight=function(){return this.maxY-this.minY+1},e.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},e.prototype.getWidth=function(){return this.maxX-this.minX+1},e.prototype.intersects=function(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY},e}();function r(e,t,o,r,i){return void 0!==i?(i.minX=e,i.maxX=t,i.minY=o,i.maxY=r,i):new n(e,t,o,r)}t.b=n},"./node_modules/ol/TileState.js":function(e,t,o){"use strict";t.a={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},"./node_modules/ol/VectorRenderTile.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/Tile.js"),i=o("./node_modules/ol/dom.js"),s=o("./node_modules/ol/util.js"),a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),l=[],c=function(e){function t(t,o,n,r){var i=e.call(this,t,o,{transition:0})||this;return i.context_={},i.executorGroups={},i.declutterExecutorGroups={},i.loadingSourceTiles=0,i.hitDetectionImageData={},i.replayState_={},i.sourceTiles=[],i.errorTileKeys={},i.wantedResolution,i.getSourceTiles=r.bind(void 0,i),i.wrappedTileCoord=n,i}return a(t,e),t.prototype.getContext=function(e){var t=Object(s.c)(e);return t in this.context_||(this.context_[t]=Object(i.a)(1,1,l)),this.context_[t]},t.prototype.hasContext=function(e){return Object(s.c)(e)in this.context_},t.prototype.getImage=function(e){return this.hasContext(e)?this.getContext(e).canvas:null},t.prototype.getReplayState=function(e){var t=Object(s.c)(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]},t.prototype.load=function(){this.getSourceTiles()},t.prototype.release=function(){for(var t in this.context_)l.push(this.context_[t].canvas),delete this.context_[t];e.prototype.release.call(this)},t}(r.a);t.a=c},"./node_modules/ol/VectorTile.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/Tile.js"),i=o("./node_modules/ol/TileState.js"),s=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=function(e){function t(t,o,n,r,i,s){var a=e.call(this,t,o,s)||this;return a.extent=null,a.format_=r,a.features_=null,a.loader_,a.projection=null,a.resolution,a.tileLoadFunction_=i,a.url_=n,a.key=n,a}return s(t,e),t.prototype.getFormat=function(){return this.format_},t.prototype.getFeatures=function(){return this.features_},t.prototype.load=function(){this.state==i.a.IDLE&&(this.setState(i.a.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))},t.prototype.onLoad=function(e,t){this.setFeatures(e)},t.prototype.onError=function(){this.setState(i.a.ERROR)},t.prototype.setFeatures=function(e){this.features_=e,this.setState(i.a.LOADED)},t.prototype.setLoader=function(e){this.loader_=e},t}(r.a);t.a=a},"./node_modules/ol/View.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return C})),o.d(t,"b",(function(){return j})),o.d(t,"c",(function(){return P})),o.d(t,"e",(function(){return T}));var n,r=o("./node_modules/ol/Object.js"),i=o("./node_modules/ol/geom/GeometryType.js"),s=o("./node_modules/ol/proj/Units.js"),a=o("./node_modules/ol/ViewHint.js"),l=o("./node_modules/ol/ViewProperty.js"),c=o("./node_modules/ol/tilegrid/common.js"),u=o("./node_modules/ol/proj.js"),d=o("./node_modules/ol/functions.js"),h=o("./node_modules/ol/coordinate.js"),p=o("./node_modules/ol/asserts.js"),f=o("./node_modules/ol/obj.js"),m=o("./node_modules/ol/centerconstraint.js"),g=o("./node_modules/ol/math.js"),y=o("./node_modules/ol/resolutionconstraint.js"),v=o("./node_modules/ol/rotationconstraint.js"),_=o("./node_modules/ol/easing.js"),b=o("./node_modules/ol/extent.js"),w=o("./node_modules/ol/array.js"),E=o("./node_modules/ol/geom/Polygon.js"),O=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),S=function(e){function t(t){var o=e.call(this)||this;o.on,o.once,o.un;var n=Object(f.a)({},t);return o.hints_=[0,0],o.animations_=[],o.updateAnimationKey_,o.projection_=Object(u.l)(n.projection,"EPSG:3857"),o.viewportSize_=[100,100],o.targetCenter_=null,o.targetResolution_,o.targetRotation_,o.nextCenter_=null,o.nextResolution_,o.nextRotation_,o.cancelAnchor_=void 0,n.center&&(n.center=Object(u.q)(n.center,o.projection_)),n.extent&&(n.extent=Object(u.r)(n.extent,o.projection_)),o.applyOptions_(n),o}return O(t,e),t.prototype.applyOptions_=function(e){var t=j(e);this.maxResolution_=t.maxResolution,this.minResolution_=t.minResolution,this.zoomFactor_=t.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=t.minZoom;var o=C(e),n=t.constraint,r=P(e);this.constraints_={center:o,resolution:n,rotation:r},this.setRotation(void 0!==e.rotation?e.rotation:0),this.setCenterInternal(void 0!==e.center?e.center:null),void 0!==e.resolution?this.setResolution(e.resolution):void 0!==e.zoom&&this.setZoom(e.zoom),this.setProperties({}),this.options_=e},Object.defineProperty(t.prototype,"padding",{get:function(){return this.padding_},set:function(e){var t=this.padding_;this.padding_=e;var o=this.getCenter();if(o){var n=e||[0,0,0,0];t=t||[0,0,0,0];var r=this.getResolution(),i=r/2*(n[3]-t[3]+t[1]-n[1]),s=r/2*(n[0]-t[0]+t[2]-n[2]);this.setCenterInternal([o[0]+i,o[1]-s])}},enumerable:!1,configurable:!0}),t.prototype.getUpdatedOptions_=function(e){var t=Object(f.a)({},this.options_);return void 0!==t.resolution?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object(f.a)({},t,e)},t.prototype.animate=function(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var t=new Array(arguments.length),o=0;o<t.length;++o){var n=arguments[o];n.center&&((n=Object(f.a)({},n)).center=Object(u.q)(n.center,this.getProjection())),n.anchor&&((n=Object(f.a)({},n)).anchor=Object(u.q)(n.anchor,this.getProjection())),t[o]=n}this.animateInternal.apply(this,t)},t.prototype.animateInternal=function(e){var t,o=arguments.length;o>1&&"function"==typeof arguments[o-1]&&(t=arguments[o-1],--o);for(var n=0;n<o&&!this.isDef();++n){var r=arguments[n];r.center&&this.setCenterInternal(r.center),void 0!==r.zoom?this.setZoom(r.zoom):r.resolution&&this.setResolution(r.resolution),void 0!==r.rotation&&this.setRotation(r.rotation)}if(n!==o){for(var i=Date.now(),s=this.targetCenter_.slice(),l=this.targetResolution_,c=this.targetRotation_,u=[];n<o;++n){var d=arguments[n],h={start:i,complete:!1,anchor:d.anchor,duration:void 0!==d.duration?d.duration:1e3,easing:d.easing||_.c,callback:t};if(d.center&&(h.sourceCenter=s,h.targetCenter=d.center.slice(),s=h.targetCenter),void 0!==d.zoom?(h.sourceResolution=l,h.targetResolution=this.getResolutionForZoom(d.zoom),l=h.targetResolution):d.resolution&&(h.sourceResolution=l,h.targetResolution=d.resolution,l=h.targetResolution),void 0!==d.rotation){h.sourceRotation=c;var p=Object(g.e)(d.rotation-c+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=c+p,c=h.targetRotation}T(h)?h.complete=!0:i+=h.duration,u.push(h)}this.animations_.push(u),this.setHint(a.a.ANIMATING,1),this.updateAnimations_()}else t&&x(t,!0)},t.prototype.getAnimating=function(){return this.hints_[a.a.ANIMATING]>0},t.prototype.getInteracting=function(){return this.hints_[a.a.INTERACTING]>0},t.prototype.cancelAnimations=function(){var e;this.setHint(a.a.ANIMATING,-this.hints_[a.a.ANIMATING]);for(var t=0,o=this.animations_.length;t<o;++t){var n=this.animations_[t];if(n[0].callback&&x(n[0].callback,!1),!e)for(var r=0,i=n.length;r<i;++r){var s=n[r];if(!s.complete){e=s.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN},t.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var e=Date.now(),t=!1,o=this.animations_.length-1;o>=0;--o){for(var n=this.animations_[o],r=!0,i=0,s=n.length;i<s;++i){var l=n[i];if(!l.complete){var c=e-l.start,u=l.duration>0?c/l.duration:1;u>=1?(l.complete=!0,u=1):r=!1;var d=l.easing(u);if(l.sourceCenter){var h=l.sourceCenter[0],p=l.sourceCenter[1],f=l.targetCenter[0],m=l.targetCenter[1];this.nextCenter_=l.targetCenter;var y=h+d*(f-h),v=p+d*(m-p);this.targetCenter_=[y,v]}if(l.sourceResolution&&l.targetResolution){var _=1===d?l.targetResolution:l.sourceResolution+d*(l.targetResolution-l.sourceResolution);if(l.anchor){var b=this.getViewportSize_(this.getRotation()),w=this.constraints_.resolution(_,0,b,!0);this.targetCenter_=this.calculateCenterZoom(w,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=_,this.applyTargetState_(!0)}if(void 0!==l.sourceRotation&&void 0!==l.targetRotation){var E=1===d?Object(g.e)(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+d*(l.targetRotation-l.sourceRotation);if(l.anchor){var O=this.constraints_.rotation(E,!0);this.targetCenter_=this.calculateCenterRotate(O,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=E}if(this.applyTargetState_(!0),t=!0,!l.complete)break}}if(r){this.animations_[o]=null,this.setHint(a.a.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var S=n[0].callback;S&&x(S,!0)}}this.animations_=this.animations_.filter(Boolean),t&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},t.prototype.calculateCenterRotate=function(e,t){var o,n=this.getCenterInternal();return void 0!==n&&(o=[n[0]-t[0],n[1]-t[1]],Object(h.j)(o,e-this.getRotation()),Object(h.a)(o,t)),o},t.prototype.calculateCenterZoom=function(e,t){var o,n=this.getCenterInternal(),r=this.getResolution();void 0!==n&&void 0!==r&&(o=[t[0]-e*(t[0]-n[0])/r,t[1]-e*(t[1]-n[1])/r]);return o},t.prototype.getViewportSize_=function(e){var t=this.viewportSize_;if(e){var o=t[0],n=t[1];return[Math.abs(o*Math.cos(e))+Math.abs(n*Math.sin(e)),Math.abs(o*Math.sin(e))+Math.abs(n*Math.cos(e))]}return t},t.prototype.setViewportSize=function(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},t.prototype.getCenter=function(){var e=this.getCenterInternal();return e?Object(u.B)(e,this.getProjection()):e},t.prototype.getCenterInternal=function(){return this.get(l.a.CENTER)},t.prototype.getConstraints=function(){return this.constraints_},t.prototype.getConstrainResolution=function(){return this.options_.constrainResolution},t.prototype.getHints=function(e){return void 0!==e?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()},t.prototype.calculateExtent=function(e){var t=this.calculateExtentInternal(e);return Object(u.C)(t,this.getProjection())},t.prototype.calculateExtentInternal=function(e){var t=e||this.getViewportSizeMinusPadding_(),o=this.getCenterInternal();Object(p.a)(o,1);var n=this.getResolution();Object(p.a)(void 0!==n,2);var r=this.getRotation();return Object(p.a)(void 0!==r,3),Object(b.F)(o,n,r,t)},t.prototype.getMaxResolution=function(){return this.maxResolution_},t.prototype.getMinResolution=function(){return this.minResolution_},t.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},t.prototype.setMaxZoom=function(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))},t.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},t.prototype.setMinZoom=function(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))},t.prototype.setConstrainResolution=function(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))},t.prototype.getProjection=function(){return this.projection_},t.prototype.getResolution=function(){return this.get(l.a.RESOLUTION)},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getResolutionForExtent=function(e,t){return this.getResolutionForExtentInternal(Object(u.r)(e,this.getProjection()),t)},t.prototype.getResolutionForExtentInternal=function(e,t){var o=t||this.getViewportSizeMinusPadding_(),n=Object(b.N)(e)/o[0],r=Object(b.G)(e)/o[1];return Math.max(n,r)},t.prototype.getResolutionForValueFunction=function(e){var t=e||2,o=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,r=Math.log(o/n)/Math.log(t);return function(e){return o/Math.pow(t,e*r)}},t.prototype.getRotation=function(){return this.get(l.a.ROTATION)},t.prototype.getValueForResolutionFunction=function(e){var t=Math.log(e||2),o=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,r=Math.log(o/n)/t;return function(e){return Math.log(o/e)/t/r}},t.prototype.getViewportSizeMinusPadding_=function(e){var t=this.getViewportSize_(e),o=this.padding_;return o&&(t=[t[0]-o[1]-o[3],t[1]-o[0]-o[2]]),t},t.prototype.getState=function(){var e=this.getProjection(),t=this.getResolution(),o=this.getRotation(),n=this.getCenterInternal(),r=this.padding_;if(r){var i=this.getViewportSizeMinusPadding_();n=A(n,this.getViewportSize_(),[i[0]/2+r[3],i[1]/2+r[0]],t,o)}return{center:n.slice(0),projection:void 0!==e?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:o,zoom:this.getZoom()}},t.prototype.getZoom=function(){var e,t=this.getResolution();return void 0!==t&&(e=this.getZoomForResolution(t)),e},t.prototype.getZoomForResolution=function(e){var t,o,n=this.minZoom_||0;if(this.resolutions_){var r=Object(w.h)(this.resolutions_,e,1);n=r,t=this.resolutions_[r],o=r==this.resolutions_.length-1?2:t/this.resolutions_[r+1]}else t=this.maxResolution_,o=this.zoomFactor_;return n+Math.log(t/e)/Math.log(o)},t.prototype.getResolutionForZoom=function(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var t=Object(g.a)(Math.floor(e),0,this.resolutions_.length-2),o=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(o,Object(g.a)(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)},t.prototype.fit=function(e,t){var o;if(Object(p.a)(Array.isArray(e)||"function"==typeof e.getSimplifiedGeometry,24),Array.isArray(e)){Object(p.a)(!Object(b.Q)(e),25);var n=Object(u.r)(e,this.getProjection());o=Object(E.d)(n)}else if(e.getType()===i.a.CIRCLE){n=Object(u.r)(e.getExtent(),this.getProjection());(o=Object(E.d)(n)).rotate(this.getRotation(),Object(b.C)(n))}else{var r=Object(u.x)();o=r?e.clone().transform(r,this.getProjection()):e}this.fitInternal(o,t)},t.prototype.rotatedExtentForGeometry=function(e){for(var t=this.getRotation(),o=Math.cos(t),n=Math.sin(-t),r=e.getFlatCoordinates(),i=e.getStride(),s=1/0,a=1/0,l=-1/0,c=-1/0,u=0,d=r.length;u<d;u+=i){var h=r[u]*o-r[u+1]*n,p=r[u]*n+r[u+1]*o;s=Math.min(s,h),a=Math.min(a,p),l=Math.max(l,h),c=Math.max(c,p)}return[s,a,l,c]},t.prototype.fitInternal=function(e,t){var o=t||{},n=o.size;n||(n=this.getViewportSizeMinusPadding_());var r,i=void 0!==o.padding?o.padding:[0,0,0,0],s=void 0!==o.nearest&&o.nearest;r=void 0!==o.minResolution?o.minResolution:void 0!==o.maxZoom?this.getResolutionForZoom(o.maxZoom):0;var a=this.rotatedExtentForGeometry(e),l=this.getResolutionForExtentInternal(a,[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]);l=isNaN(l)?r:Math.max(l,r),l=this.getConstrainedResolution(l,s?0:1);var c=this.getRotation(),u=Math.sin(c),h=Math.cos(c),p=Object(b.C)(a);p[0]+=(i[1]-i[3])/2*l,p[1]+=(i[0]-i[2])/2*l;var f=p[0]*h-p[1]*u,m=p[1]*h+p[0]*u,g=this.getConstrainedCenter([f,m],l),y=o.callback?o.callback:d.c;void 0!==o.duration?this.animateInternal({resolution:l,center:g,duration:o.duration,easing:o.easing},y):(this.targetResolution_=l,this.targetCenter_=g,this.applyTargetState_(!1,!0),x(y,!0))},t.prototype.centerOn=function(e,t,o){this.centerOnInternal(Object(u.q)(e,this.getProjection()),t,o)},t.prototype.centerOnInternal=function(e,t,o){this.setCenterInternal(A(e,t,o,this.getResolution(),this.getRotation()))},t.prototype.calculateCenterShift=function(e,t,o,n){var r,i=this.padding_;if(i&&e){var s=this.getViewportSizeMinusPadding_(-o),a=A(e,n,[s[0]/2+i[3],s[1]/2+i[0]],t,o);r=[e[0]-a[0],e[1]-a[1]]}return r},t.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},t.prototype.adjustCenter=function(e){var t=Object(u.B)(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])},t.prototype.adjustCenterInternal=function(e){var t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])},t.prototype.adjustResolution=function(e,t){var o=t&&Object(u.q)(t,this.getProjection());this.adjustResolutionInternal(e,o)},t.prototype.adjustResolutionInternal=function(e,t){var o=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*e,0,n,o);t&&(this.targetCenter_=this.calculateCenterZoom(r,t)),this.targetResolution_*=e,this.applyTargetState_()},t.prototype.adjustZoom=function(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)},t.prototype.adjustRotation=function(e,t){t&&(t=Object(u.q)(t,this.getProjection())),this.adjustRotationInternal(e,t)},t.prototype.adjustRotationInternal=function(e,t){var o=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+e,o);t&&(this.targetCenter_=this.calculateCenterRotate(n,t)),this.targetRotation_+=e,this.applyTargetState_()},t.prototype.setCenter=function(e){this.setCenterInternal(Object(u.q)(e,this.getProjection()))},t.prototype.setCenterInternal=function(e){this.targetCenter_=e,this.applyTargetState_()},t.prototype.setHint=function(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]},t.prototype.setResolution=function(e){this.targetResolution_=e,this.applyTargetState_()},t.prototype.setRotation=function(e){this.targetRotation_=e,this.applyTargetState_()},t.prototype.setZoom=function(e){this.setResolution(this.getResolutionForZoom(e))},t.prototype.applyTargetState_=function(e,t){var o=this.getAnimating()||this.getInteracting()||t,n=this.constraints_.rotation(this.targetRotation_,o),r=this.getViewportSize_(n),i=this.constraints_.resolution(this.targetResolution_,0,r,o),s=this.constraints_.center(this.targetCenter_,i,r,o,this.calculateCenterShift(this.targetCenter_,i,n,r));this.get(l.a.ROTATION)!==n&&this.set(l.a.ROTATION,n),this.get(l.a.RESOLUTION)!==i&&this.set(l.a.RESOLUTION,i),this.get(l.a.CENTER)&&Object(h.g)(this.get(l.a.CENTER),s)||this.set(l.a.CENTER,s),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0},t.prototype.resolveConstraints=function(e,t,o){var n=void 0!==e?e:200,r=t||0,i=this.constraints_.rotation(this.targetRotation_),s=this.getViewportSize_(i),a=this.constraints_.resolution(this.targetResolution_,r,s),l=this.constraints_.center(this.targetCenter_,a,s,!1,this.calculateCenterShift(this.targetCenter_,a,i,s));if(0===n&&!this.cancelAnchor_)return this.targetResolution_=a,this.targetRotation_=i,this.targetCenter_=l,void this.applyTargetState_();var c=o||(0===n?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,this.getResolution()===a&&this.getRotation()===i&&this.getCenterInternal()&&Object(h.g)(this.getCenterInternal(),l)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:i,center:l,resolution:a,duration:n,easing:_.b,anchor:c}))},t.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(a.a.INTERACTING,1)},t.prototype.endInteraction=function(e,t,o){var n=o&&Object(u.q)(o,this.getProjection());this.endInteractionInternal(e,t,n)},t.prototype.endInteractionInternal=function(e,t,o){this.setHint(a.a.INTERACTING,-1),this.resolveConstraints(e,t,o)},t.prototype.getConstrainedCenter=function(e,t){var o=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),o)},t.prototype.getConstrainedZoom=function(e,t){var o=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(o,t))},t.prototype.getConstrainedResolution=function(e,t){var o=t||0,n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,o,n)},t}(r.b);function x(e,t){setTimeout((function(){e(t)}),0)}function C(e){if(void 0!==e.extent){var t=void 0===e.smoothExtentConstraint||e.smoothExtentConstraint;return Object(m.a)(e.extent,e.constrainOnlyCenter,t)}var o=Object(u.l)(e.projection,"EPSG:3857");if(!0!==e.multiWorld&&o.isGlobal()){var n=o.getExtent().slice();return n[0]=-1/0,n[2]=1/0,Object(m.a)(n,!1,!1)}return m.b}function j(e){var t,o,n,r=void 0!==e.minZoom?e.minZoom:0,i=void 0!==e.maxZoom?e.maxZoom:28,a=void 0!==e.zoomFactor?e.zoomFactor:2,l=void 0!==e.multiWorld&&e.multiWorld,d=void 0===e.smoothResolutionConstraint||e.smoothResolutionConstraint,h=void 0!==e.showFullExtent&&e.showFullExtent,p=Object(u.l)(e.projection,"EPSG:3857"),f=p.getExtent(),m=e.constrainOnlyCenter,g=e.extent;if(l||g||!p.isGlobal()||(m=!1,g=f),void 0!==e.resolutions){var v=e.resolutions;o=v[r],n=void 0!==v[i]?v[i]:v[v.length-1],t=e.constrainResolution?Object(y.c)(v,d,!m&&g,h):Object(y.a)(o,n,d,!m&&g,h)}else{var _=(f?Math.max(Object(b.N)(f),Object(b.G)(f)):360*u.a[s.b.DEGREES]/p.getMetersPerUnit())/c.b/Math.pow(2,0),w=_/Math.pow(2,28);void 0!==(o=e.maxResolution)?r=0:o=_/Math.pow(a,r),void 0===(n=e.minResolution)&&(n=void 0!==e.maxZoom?void 0!==e.maxResolution?o/Math.pow(a,i):_/Math.pow(a,i):w),i=r+Math.floor(Math.log(o/n)/Math.log(a)),n=o/Math.pow(a,i-r),t=e.constrainResolution?Object(y.b)(a,o,n,d,!m&&g,h):Object(y.a)(o,n,d,!m&&g,h)}return{constraint:t,maxResolution:o,minResolution:n,minZoom:r,zoomFactor:a}}function P(e){if(void 0===e.enableRotation||e.enableRotation){var t=e.constrainRotation;return void 0===t||!0===t?Object(v.b)():!1===t?v.d:"number"==typeof t?Object(v.a)(t):v.d}return v.c}function T(e){return!(e.sourceCenter&&e.targetCenter&&!Object(h.g)(e.sourceCenter,e.targetCenter))&&(e.sourceResolution===e.targetResolution&&e.sourceRotation===e.targetRotation)}function A(e,t,o,n,r){var i=Math.cos(-r),s=Math.sin(-r),a=e[0]*i-e[1]*s,l=e[1]*i+e[0]*s;return[(a+=(t[0]/2-o[0])*n)*i-(l+=(o[1]-t[1]/2)*n)*(s=-s),l*i+a*s]}t.d=S},"./node_modules/ol/ViewHint.js":function(e,t,o){"use strict";t.a={ANIMATING:0,INTERACTING:1}},"./node_modules/ol/ViewProperty.js":function(e,t,o){"use strict";t.a={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"}},"./node_modules/ol/array.js":function(e,t,o){"use strict";function n(e,t,o){for(var n,i,s=o||r,a=0,l=e.length,c=!1;a<l;)(i=+s(e[n=a+(l-a>>1)],t))<0?a=n+1:(l=n,c=!i);return c?a:~a}function r(e,t){return e>t?1:e<t?-1:0}function i(e,t){return e.indexOf(t)>=0}function s(e,t,o){var n=e.length;if(e[0]<=t)return 0;if(t<=e[n-1])return n-1;var r=void 0;if(o>0){for(r=1;r<n;++r)if(e[r]<t)return r-1}else if(o<0){for(r=1;r<n;++r)if(e[r]<=t)return r}else for(r=1;r<n;++r){if(e[r]==t)return r;if(e[r]<t)return"function"==typeof o?o(t,e[r-1],e[r])>0?r-1:r:e[r-1]-t<t-e[r]?r-1:r}return n-1}function a(e,t,o){for(;t<o;){var n=e[t];e[t]=e[o],e[o]=n,++t,--o}}function l(e,t){for(var o=Array.isArray(t)?t:[t],n=o.length,r=0;r<n;r++)e[e.length]=o[r]}function c(e,t){var o=e.indexOf(t),n=o>-1;return n&&e.splice(o,1),n}function u(e,t){for(var o,n=e.length>>>0,r=0;r<n;r++)if(t(o=e[r],r,e))return o;return null}function d(e,t){var o=e.length;if(o!==t.length)return!1;for(var n=0;n<o;n++)if(e[n]!==t[n])return!1;return!0}function h(e,t){var o,n=e.length,r=Array(e.length);for(o=0;o<n;o++)r[o]={index:o,value:e[o]};for(r.sort((function(e,o){return t(e.value,o.value)||e.index-o.index})),o=0;o<e.length;o++)e[o]=r[o].value}function p(e,t){var o;return!e.every((function(n,r){return o=r,!t(n,r,e)}))?o:-1}function f(e,t,o){var n=t||r;return e.every((function(t,r){if(0===r)return!0;var i=n(e[r-1],t);return!(i>0||o&&0===i)}))}o.d(t,"a",(function(){return n})),o.d(t,"i",(function(){return r})),o.d(t,"f",(function(){return i})),o.d(t,"h",(function(){return s})),o.d(t,"k",(function(){return a})),o.d(t,"c",(function(){return l})),o.d(t,"j",(function(){return c})),o.d(t,"d",(function(){return u})),o.d(t,"b",(function(){return d})),o.d(t,"l",(function(){return h})),o.d(t,"e",(function(){return p})),o.d(t,"g",(function(){return f}))},"./node_modules/ol/asserts.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return r}));var n=o("./node_modules/ol/AssertionError.js");function r(e,t){if(!e)throw new n.a(t)}},"./node_modules/ol/centerconstraint.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return r})),o.d(t,"b",(function(){return i}));var n=o("./node_modules/ol/math.js");function r(e,t,o){return function(r,i,s,a,l){if(r){var c=t?0:s[0]*i,u=t?0:s[1]*i,d=l?l[0]:0,h=l?l[1]:0,p=e[0]+c/2+d,f=e[2]-c/2+d,m=e[1]+u/2+h,g=e[3]-u/2+h;p>f&&(f=p=(f+p)/2),m>g&&(g=m=(g+m)/2);var y=Object(n.a)(r[0],p,f),v=Object(n.a)(r[1],m,g),_=30*i;return a&&o&&(y+=-_*Math.log(1+Math.max(0,p-r[0])/_)+_*Math.log(1+Math.max(0,r[0]-f)/_),v+=-_*Math.log(1+Math.max(0,m-r[1])/_)+_*Math.log(1+Math.max(0,r[1]-g)/_)),[y,v]}}}function i(e){return e}},"./node_modules/ol/color.js":function(e,t,o){"use strict";o.d(t,"b",(function(){return a})),o.d(t,"c",(function(){return d})),o.d(t,"a",(function(){return h})),o.d(t,"e",(function(){return p})),o.d(t,"f",(function(){return f})),o.d(t,"d",(function(){return m}));var n=o("./node_modules/ol/asserts.js"),r=o("./node_modules/ol/math.js"),i=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,s=/^([a-z]*)$|^hsla?\(.*\)$/i;function a(e){return"string"==typeof e?e:f(e)}function l(e){var t=document.createElement("div");if(t.style.color=e,""!==t.style.color){document.body.appendChild(t);var o=getComputedStyle(t).color;return document.body.removeChild(t),o}return""}var c,u,d=(c={},u=0,function(e){var t;if(c.hasOwnProperty(e))t=c[e];else{if(u>=1024){var o=0;for(var r in c)0==(3&o++)&&(delete c[r],--u)}t=function(e){var t,o,r,a,c;if(s.exec(e)&&(e=l(e)),i.exec(e)){var u=e.length-1,d=void 0;d=u<=4?1:2;var h=4===u||8===u;t=parseInt(e.substr(1+0*d,d),16),o=parseInt(e.substr(1+1*d,d),16),r=parseInt(e.substr(1+2*d,d),16),a=h?parseInt(e.substr(1+3*d,d),16):255,1==d&&(t=(t<<4)+t,o=(o<<4)+o,r=(r<<4)+r,h&&(a=(a<<4)+a)),c=[t,o,r,a/255]}else 0==e.indexOf("rgba(")?p(c=e.slice(5,-1).split(",").map(Number)):0==e.indexOf("rgb(")?((c=e.slice(4,-1).split(",").map(Number)).push(1),p(c)):Object(n.a)(!1,14);return c}(e),c[e]=t,++u}return t});function h(e){return Array.isArray(e)?e:d(e)}function p(e){return e[0]=Object(r.a)(e[0]+.5|0,0,255),e[1]=Object(r.a)(e[1]+.5|0,0,255),e[2]=Object(r.a)(e[2]+.5|0,0,255),e[3]=Object(r.a)(e[3],0,1),e}function f(e){var t=e[0];t!=(0|t)&&(t=t+.5|0);var o=e[1];o!=(0|o)&&(o=o+.5|0);var n=e[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+t+","+o+","+n+","+(void 0===e[3]?1:e[3])+")"}function m(e){return s.test(e)&&(e=l(e)),i.test(e)||0===e.indexOf("rgba(")||0===e.indexOf("rgb(")}},"./node_modules/ol/colorlike.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return r}));var n=o("./node_modules/ol/color.js");function r(e){return Array.isArray(e)?Object(n.f)(e):e}},"./node_modules/ol/control.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var n=o("./node_modules/ol/control/Attribution.js"),r=o("./node_modules/ol/Collection.js"),i=o("./node_modules/ol/control/Rotate.js"),s=o("./node_modules/ol/control/Zoom.js");function a(e){var t=e||{},o=new r.b;return(void 0===t.zoom||t.zoom)&&o.push(new s.a(t.zoomOptions)),(void 0===t.rotate||t.rotate)&&o.push(new i.a(t.rotateOptions)),(void 0===t.attribution||t.attribution)&&o.push(new n.a(t.attributionOptions)),o}},"./node_modules/ol/control/Attribution.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/control/Control.js"),i=o("./node_modules/ol/events/EventType.js"),s=o("./node_modules/ol/css.js"),a=o("./node_modules/ol/array.js"),l=o("./node_modules/ol/layer/Layer.js"),c=o("./node_modules/ol/dom.js"),u=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),d=function(e){function t(t){var o=this,n=t||{};(o=e.call(this,{element:document.createElement("div"),render:n.render,target:n.target})||this).ulElement_=document.createElement("ul"),o.collapsed_=void 0===n.collapsed||n.collapsed,o.userCollapsed_=o.collapsed_,o.overrideCollapsible_=void 0!==n.collapsible,o.collapsible_=void 0===n.collapsible||n.collapsible,o.collapsible_||(o.collapsed_=!1);var r=void 0!==n.className?n.className:"ol-attribution",a=void 0!==n.tipLabel?n.tipLabel:"Attributions",l=void 0!==n.expandClassName?n.expandClassName:r+"-expand",c=void 0!==n.collapseLabel?n.collapseLabel:"âº",u=void 0!==n.collapseClassName?n.collapseClassName:r+"-collpase";"string"==typeof c?(o.collapseLabel_=document.createElement("span"),o.collapseLabel_.textContent=c,o.collapseLabel_.className=u):o.collapseLabel_=c;var d=void 0!==n.label?n.label:"i";"string"==typeof d?(o.label_=document.createElement("span"),o.label_.textContent=d,o.label_.className=l):o.label_=d;var h=o.collapsible_&&!o.collapsed_?o.collapseLabel_:o.label_;o.toggleButton_=document.createElement("button"),o.toggleButton_.setAttribute("type","button"),o.toggleButton_.setAttribute("aria-expanded",String(!o.collapsed_)),o.toggleButton_.title=a,o.toggleButton_.appendChild(h),o.toggleButton_.addEventListener(i.a.CLICK,o.handleClick_.bind(o),!1);var p=r+" "+s.e+" "+s.b+(o.collapsed_&&o.collapsible_?" "+s.a:"")+(o.collapsible_?"":" ol-uncollapsible"),f=o.element;return f.className=p,f.appendChild(o.toggleButton_),f.appendChild(o.ulElement_),o.renderedAttributions_=[],o.renderedVisible_=!0,o}return u(t,e),t.prototype.collectSourceAttributions_=function(e){for(var t={},o=[],n=!0,r=e.layerStatesArray,i=0,s=r.length;i<s;++i){var a=r[i];if(Object(l.b)(a,e.viewState)){var c=a.layer.getSource();if(c){var u=c.getAttributions();if(u){var d=u(e);if(d)if(n=n&&!1!==c.getAttributionsCollapsible(),Array.isArray(d))for(var h=0,p=d.length;h<p;++h)d[h]in t||(o.push(d[h]),t[d[h]]=!0);else d in t||(o.push(d),t[d]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(n),o},t.prototype.updateElement_=function(e){if(e){var t=this.collectSourceAttributions_(e),o=t.length>0;if(this.renderedVisible_!=o&&(this.element.style.display=o?"":"none",this.renderedVisible_=o),!Object(a.b)(t,this.renderedAttributions_)){Object(c.d)(this.ulElement_);for(var n=0,r=t.length;n<r;++n){var i=document.createElement("li");i.innerHTML=t[n],this.ulElement_.appendChild(i)}this.renderedAttributions_=t}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},t.prototype.handleClick_=function(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},t.prototype.handleToggle_=function(){this.element.classList.toggle(s.a),this.collapsed_?Object(c.g)(this.collapseLabel_,this.label_):Object(c.g)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))},t.prototype.getCollapsible=function(){return this.collapsible_},t.prototype.setCollapsible=function(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},t.prototype.setCollapsed=function(e){this.userCollapsed_=e,this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()},t.prototype.getCollapsed=function(){return this.collapsed_},t.prototype.render=function(e){this.updateElement_(e.frameState)},t}(r.a);t.a=d},"./node_modules/ol/control/Control.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/Object.js"),i=o("./node_modules/ol/MapEventType.js"),s=o("./node_modules/ol/functions.js"),a=o("./node_modules/ol/events.js"),l=o("./node_modules/ol/dom.js"),c=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),u=function(e){function t(t){var o=e.call(this)||this,n=t.element;return!n||t.target||n.style.pointerEvents||(n.style.pointerEvents="auto"),o.element=n||null,o.target_=null,o.map_=null,o.listenerKeys=[],t.render&&(o.render=t.render),t.target&&o.setTarget(t.target),o}return c(t,e),t.prototype.disposeInternal=function(){Object(l.e)(this.element),e.prototype.disposeInternal.call(this)},t.prototype.getMap=function(){return this.map_},t.prototype.setMap=function(e){this.map_&&Object(l.e)(this.element);for(var t=0,o=this.listenerKeys.length;t<o;++t)Object(a.c)(this.listenerKeys[t]);(this.listenerKeys.length=0,this.map_=e,this.map_)&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==s.c&&this.listenerKeys.push(Object(a.a)(e,i.a.POSTRENDER,this.render,this)),e.render())},t.prototype.render=function(e){},t.prototype.setTarget=function(e){this.target_="string"==typeof e?document.getElementById(e):e},t}(r.b);t.a=u},"./node_modules/ol/control/FullScreen.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/control/Control.js"),i=o("./node_modules/ol/events/EventType.js"),s=o("./node_modules/ol/css.js"),a=o("./node_modules/ol/events.js"),l=o("./node_modules/ol/dom.js"),c=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),u=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],d="enterfullscreen",h="leavefullscreen",p=function(e){function t(t){var o=this,n=t||{};(o=e.call(this,{element:document.createElement("div"),target:n.target})||this).on,o.once,o.un,o.cssClassName_=void 0!==n.className?n.className:"ol-full-screen",o.activeClassName_=void 0!==n.activeClassName?n.activeClassName.split(" "):[o.cssClassName_+"-true"],o.inactiveClassName_=void 0!==n.inactiveClassName?n.inactiveClassName.split(" "):[o.cssClassName_+"-false"];var r=void 0!==n.label?n.label:"â¤¢";o.labelNode_="string"==typeof r?document.createTextNode(r):r;var a=void 0!==n.labelActive?n.labelActive:"Ã";o.labelActiveNode_="string"==typeof a?document.createTextNode(a):a,o.button_=document.createElement("button");var l=n.tipLabel?n.tipLabel:"Toggle full-screen";o.setClassName_(o.button_,m()),o.button_.setAttribute("type","button"),o.button_.title=l,o.button_.appendChild(o.labelNode_),o.button_.addEventListener(i.a.CLICK,o.handleClick_.bind(o),!1);var c=o.cssClassName_+" "+s.e+" "+s.b+" "+(f()?"":s.f),u=o.element;return u.className=c,u.appendChild(o.button_),o.keys_=void 0!==n.keys&&n.keys,o.source_=n.source,o}return c(t,e),t.prototype.handleClick_=function(e){e.preventDefault(),this.handleFullScreen_()},t.prototype.handleFullScreen_=function(){if(f()){var e=this.getMap();if(e)if(m())document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();else{var t=void 0;t=this.source_?"string"==typeof this.source_?document.getElementById(this.source_):this.source_:e.getTargetElement(),this.keys_?function(e){e.webkitRequestFullscreen?e.webkitRequestFullscreen():g(e)}(t):g(t)}}},t.prototype.handleFullScreenChange_=function(){var e=this.getMap();m()?(this.setClassName_(this.button_,!0),Object(l.g)(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(d)):(this.setClassName_(this.button_,!1),Object(l.g)(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(h)),e&&e.updateSize()},t.prototype.setClassName_=function(e,t){var o,n,r,i=this.activeClassName_,s=this.inactiveClassName_,a=t?i:s;(o=e.classList).remove.apply(o,i),(n=e.classList).remove.apply(n,s),(r=e.classList).add.apply(r,a)},t.prototype.setMap=function(t){if(e.prototype.setMap.call(this,t),t)for(var o=0,n=u.length;o<n;++o)this.listenerKeys.push(Object(a.a)(document,u[o],this.handleFullScreenChange_,this))},t}(r.a);function f(){var e=document.body;return!!(e.webkitRequestFullscreen||e.msRequestFullscreen&&document.msFullscreenEnabled||e.requestFullscreen&&document.fullscreenEnabled)}function m(){return!!(document.webkitIsFullScreen||document.msFullscreenElement||document.fullscreenElement)}function g(e){e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}t.a=p},"./node_modules/ol/control/MousePosition.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/control/Control.js"),i=o("./node_modules/ol/pointer/EventType.js"),s=o("./node_modules/ol/proj.js"),a=o("./node_modules/ol/events.js"),l=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),c=function(e){function t(t){var o=this,n=t||{},r=document.createElement("div");r.className=void 0!==n.className?n.className:"ol-mouse-position",(o=e.call(this,{element:r,render:n.render,target:n.target})||this).on,o.once,o.un,o.addChangeListener("projection",o.handleProjectionChanged_),n.coordinateFormat&&o.setCoordinateFormat(n.coordinateFormat),n.projection&&o.setProjection(n.projection);var i=!0,s="&#160;";return"undefinedHTML"in n?(void 0!==n.undefinedHTML&&(s=n.undefinedHTML),i=!!s):"placeholder"in n&&(!1===n.placeholder?i=!1:s=String(n.placeholder)),o.placeholder_=s,o.renderOnMouseOut_=i,o.renderedHTML_=r.innerHTML,o.mapProjection_=null,o.transform_=null,o}return l(t,e),t.prototype.handleProjectionChanged_=function(){this.transform_=null},t.prototype.getCoordinateFormat=function(){return this.get("coordinateFormat")},t.prototype.getProjection=function(){return this.get("projection")},t.prototype.handleMouseMove=function(e){var t=this.getMap();this.updateHTML_(t.getEventPixel(e))},t.prototype.handleMouseOut=function(e){this.updateHTML_(null)},t.prototype.setMap=function(t){if(e.prototype.setMap.call(this,t),t){var o=t.getViewport();this.listenerKeys.push(Object(a.a)(o,i.a.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(Object(a.a)(o,i.a.POINTEROUT,this.handleMouseOut,this)),this.updateHTML_(null)}},t.prototype.setCoordinateFormat=function(e){this.set("coordinateFormat",e)},t.prototype.setProjection=function(e){this.set("projection",Object(s.t)(e))},t.prototype.updateHTML_=function(e){var t=this.placeholder_;if(e&&this.mapProjection_){if(!this.transform_){var o=this.getProjection();this.transform_=o?Object(s.w)(this.mapProjection_,o):s.y}var n=this.getMap().getCoordinateFromPixelInternal(e);if(n){var r=Object(s.x)();r&&(this.transform_=Object(s.w)(this.mapProjection_,r)),this.transform_(n,n);var i=this.getCoordinateFormat();t=i?i(n):n.toString()}}this.renderedHTML_&&t===this.renderedHTML_||(this.element.innerHTML=t,this.renderedHTML_=t)},t.prototype.render=function(e){var t=e.frameState;t?this.mapProjection_!=t.viewState.projection&&(this.mapProjection_=t.viewState.projection,this.transform_=null):this.mapProjection_=null},t}(r.a);t.a=c},"./node_modules/ol/control/OverviewMap.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/renderer/Composite.js"),i=o("./node_modules/ol/control/Control.js"),s=o("./node_modules/ol/events/EventType.js"),a=o("./node_modules/ol/MapEventType.js"),l=o("./node_modules/ol/MapProperty.js"),c=o("./node_modules/ol/ObjectEventType.js"),u=o("./node_modules/ol/Overlay.js"),d=o("./node_modules/ol/OverlayPositioning.js"),h=o("./node_modules/ol/PluggableMap.js"),p=o("./node_modules/ol/View.js"),f=o("./node_modules/ol/ViewProperty.js"),m=o("./node_modules/ol/css.js"),g=o("./node_modules/ol/extent.js"),y=o("./node_modules/ol/events.js"),v=o("./node_modules/ol/geom/Polygon.js"),_=o("./node_modules/ol/dom.js"),b=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.createRenderer=function(){return new r.a(this)},t}(h.a),E=function(e){function t(t){var o=this,n=t||{};(o=e.call(this,{element:document.createElement("div"),render:n.render,target:n.target})||this).boundHandleRotationChanged_=o.handleRotationChanged_.bind(o),o.collapsed_=void 0===n.collapsed||n.collapsed,o.collapsible_=void 0===n.collapsible||n.collapsible,o.collapsible_||(o.collapsed_=!1),o.rotateWithView_=void 0!==n.rotateWithView&&n.rotateWithView,o.viewExtent_=void 0;var r=void 0!==n.className?n.className:"ol-overviewmap",i=void 0!==n.tipLabel?n.tipLabel:"Overview map",a=void 0!==n.collapseLabel?n.collapseLabel:"â¹";"string"==typeof a?(o.collapseLabel_=document.createElement("span"),o.collapseLabel_.textContent=a):o.collapseLabel_=a;var l=void 0!==n.label?n.label:"âº";"string"==typeof l?(o.label_=document.createElement("span"),o.label_.textContent=l):o.label_=l;var c=o.collapsible_&&!o.collapsed_?o.collapseLabel_:o.label_,h=document.createElement("button");h.setAttribute("type","button"),h.title=i,h.appendChild(c),h.addEventListener(s.a.CLICK,o.handleClick_.bind(o),!1),o.ovmapDiv_=document.createElement("div"),o.ovmapDiv_.className="ol-overviewmap-map",o.view_=n.view,o.ovmap_=new w({view:n.view});var p=o.ovmap_;n.layers&&n.layers.forEach((function(e){p.addLayer(e)}));var f=document.createElement("div");f.className="ol-overviewmap-box",f.style.boxSizing="border-box",o.boxOverlay_=new u.a({position:[0,0],positioning:d.a.CENTER_CENTER,element:f}),o.ovmap_.addOverlay(o.boxOverlay_);var g=r+" "+m.e+" "+m.b+(o.collapsed_&&o.collapsible_?" "+m.a:"")+(o.collapsible_?"":" ol-uncollapsible"),y=o.element;y.className=g,y.appendChild(o.ovmapDiv_),y.appendChild(h);var v=o,_=o.boxOverlay_,b=o.boxOverlay_.getElement(),E=function(e){var t,o={clientX:(t=e).clientX,clientY:t.clientY},n=p.getEventCoordinateInternal(o);_.setPosition(n)},O=function(e){var t=p.getEventCoordinateInternal(e);v.getMap().getView().setCenterInternal(t),window.removeEventListener("mousemove",E),window.removeEventListener("mouseup",O)};return b.addEventListener("mousedown",(function(){window.addEventListener("mousemove",E),window.addEventListener("mouseup",O)})),o}return b(t,e),t.prototype.setMap=function(t){var o=this.getMap();if(t!==o){if(o){var n=o.getView();n&&this.unbindView_(n),this.ovmap_.setTarget(null)}if(e.prototype.setMap.call(this,t),t){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(Object(y.a)(t,c.a.PROPERTYCHANGE,this.handleMapPropertyChange_,this));var r=t.getView();r&&(this.bindView_(r),r.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}},t.prototype.handleMapPropertyChange_=function(e){if(e.key===l.a.VIEW){var t=e.oldValue;t&&this.unbindView_(t);var o=this.getMap().getView();this.bindView_(o)}else this.ovmap_.isRendered()||e.key!==l.a.TARGET&&e.key!==l.a.SIZE||this.ovmap_.updateSize()},t.prototype.bindView_=function(e){if(!this.view_){var t=new p.d({projection:e.getProjection()});this.ovmap_.setView(t)}e.addChangeListener(f.a.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_()},t.prototype.unbindView_=function(e){e.removeChangeListener(f.a.ROTATION,this.boundHandleRotationChanged_)},t.prototype.handleRotationChanged_=function(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())},t.prototype.validateExtent_=function(){var e=this.getMap(),t=this.ovmap_;if(e.isRendered()&&t.isRendered()){var o=e.getSize(),n=e.getView().calculateExtentInternal(o);if(!this.viewExtent_||!Object(g.r)(n,this.viewExtent_)){this.viewExtent_=n;var r=t.getSize(),i=t.getView().calculateExtentInternal(r),s=t.getPixelFromCoordinateInternal(Object(g.L)(n)),a=t.getPixelFromCoordinateInternal(Object(g.B)(n)),l=Math.abs(s[0]-a[0]),c=Math.abs(s[1]-a[1]),u=r[0],d=r[1];l<.1*u||c<.1*d||l>.75*u||c>.75*d?this.resetExtent_():Object(g.h)(i,n)||this.recenter_()}}},t.prototype.resetExtent_=function(){var e=this.getMap(),t=this.ovmap_,o=e.getSize(),n=e.getView().calculateExtentInternal(o),r=t.getView(),i=Math.log(7.5)/Math.LN2,s=1/(.1*Math.pow(2,i/2));Object(g.S)(n,s),r.fitInternal(Object(v.d)(n))},t.prototype.recenter_=function(){var e=this.getMap(),t=this.ovmap_,o=e.getView();t.getView().setCenterInternal(o.getCenterInternal())},t.prototype.updateBox_=function(){var e=this.getMap(),t=this.ovmap_;if(e.isRendered()&&t.isRendered()){var o=e.getSize(),n=e.getView(),r=t.getView(),i=this.rotateWithView_?0:-n.getRotation(),s=this.boxOverlay_,a=this.boxOverlay_.getElement(),l=n.getCenterInternal(),c=n.getResolution(),u=r.getResolution(),d=o[0]*c/u,h=o[1]*c/u;if(s.setPosition(l),a){a.style.width=d+"px",a.style.height=h+"px";var p="rotate("+i+"rad)";a.style.transform=p}}},t.prototype.updateBoxAfterOvmapIsRendered_=function(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=Object(y.b)(this.ovmap_,a.a.POSTRENDER,(function(e){delete this.ovmapPostrenderKey_,this.updateBox_()}),this))},t.prototype.handleClick_=function(e){e.preventDefault(),this.handleToggle_()},t.prototype.handleToggle_=function(){this.element.classList.toggle(m.a),this.collapsed_?Object(_.g)(this.collapseLabel_,this.label_):Object(_.g)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;var e=this.ovmap_;if(!this.collapsed_){if(e.isRendered())return this.viewExtent_=void 0,void e.render();e.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}},t.prototype.getCollapsible=function(){return this.collapsible_},t.prototype.setCollapsible=function(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())},t.prototype.setCollapsed=function(e){this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()},t.prototype.getCollapsed=function(){return this.collapsed_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.setRotateWithView=function(e){this.rotateWithView_!==e&&(this.rotateWithView_=e,0!==this.getMap().getView().getRotation()&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))},t.prototype.getOverviewMap=function(){return this.ovmap_},t.prototype.render=function(e){this.validateExtent_(),this.updateBox_()},t}(i.a);t.a=E},"./node_modules/ol/control/Rotate.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/control/Control.js"),i=o("./node_modules/ol/events/EventType.js"),s=o("./node_modules/ol/css.js"),a=o("./node_modules/ol/easing.js"),l=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),c=function(e){function t(t){var o=this,n=t||{};o=e.call(this,{element:document.createElement("div"),render:n.render,target:n.target})||this;var r=void 0!==n.className?n.className:"ol-rotate",a=void 0!==n.label?n.label:"â§",l=void 0!==n.compassClassName?n.compassClassName:"ol-compass";o.label_=null,"string"==typeof a?(o.label_=document.createElement("span"),o.label_.className=l,o.label_.textContent=a):(o.label_=a,o.label_.classList.add(l));var c=n.tipLabel?n.tipLabel:"Reset rotation",u=document.createElement("button");u.className=r+"-reset",u.setAttribute("type","button"),u.title=c,u.appendChild(o.label_),u.addEventListener(i.a.CLICK,o.handleClick_.bind(o),!1);var d=r+" "+s.e+" "+s.b,h=o.element;return h.className=d,h.appendChild(u),o.callResetNorth_=n.resetNorth?n.resetNorth:void 0,o.duration_=void 0!==n.duration?n.duration:250,o.autoHide_=void 0===n.autoHide||n.autoHide,o.rotation_=void 0,o.autoHide_&&o.element.classList.add(s.c),o}return l(t,e),t.prototype.handleClick_=function(e){e.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},t.prototype.resetNorth_=function(){var e=this.getMap().getView();if(e){var t=e.getRotation();void 0!==t&&(this.duration_>0&&t%(2*Math.PI)!=0?e.animate({rotation:0,duration:this.duration_,easing:a.b}):e.setRotation(0))}},t.prototype.render=function(e){var t=e.frameState;if(t){var o=t.viewState.rotation;if(o!=this.rotation_){var n="rotate("+o+"rad)";if(this.autoHide_){var r=this.element.classList.contains(s.c);r||0!==o?r&&0!==o&&this.element.classList.remove(s.c):this.element.classList.add(s.c)}this.label_.style.transform=n}this.rotation_=o}},t}(r.a);t.a=c},"./node_modules/ol/control/ScaleLine.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/control/Control.js"),i=o("./node_modules/ol/proj/Units.js"),s=o("./node_modules/ol/css.js"),a=o("./node_modules/ol/proj.js"),l=o("./node_modules/ol/asserts.js"),c=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),u="degrees",d="imperial",h="nautical",p="metric",f="us",m=[1,2,5],g=function(e){function t(t){var o=this,n=t||{},r=void 0!==n.className?n.className:n.bar?"ol-scale-bar":"ol-scale-line";return(o=e.call(this,{element:document.createElement("div"),render:n.render,target:n.target})||this).on,o.once,o.un,o.innerElement_=document.createElement("div"),o.innerElement_.className=r+"-inner",o.element.className=r+" "+s.e,o.element.appendChild(o.innerElement_),o.viewState_=null,o.minWidth_=void 0!==n.minWidth?n.minWidth:64,o.renderedVisible_=!1,o.renderedWidth_=void 0,o.renderedHTML_="",o.addChangeListener("units",o.handleUnitsChanged_),o.setUnits(n.units||p),o.scaleBar_=n.bar||!1,o.scaleBarSteps_=n.steps||4,o.scaleBarText_=n.text||!1,o.dpi_=n.dpi||void 0,o}return c(t,e),t.prototype.getUnits=function(){return this.get("units")},t.prototype.handleUnitsChanged_=function(){this.updateElement_()},t.prototype.setUnits=function(e){this.set("units",e)},t.prototype.setDpi=function(e){this.dpi_=e},t.prototype.updateElement_=function(){var e=this.viewState_;if(e){var t=e.center,o=e.projection,n=this.getUnits(),r=n==u?i.b.DEGREES:i.b.METERS,s=Object(a.u)(o,e.resolution,t,r),c=this.minWidth_*(this.dpi_||25.4/.28)/(25.4/.28),g=c*s,y="";if(n==u){var v=a.a[i.b.DEGREES];(g*=v)<v/60?(y="â³",s*=3600):g<v?(y="â²",s*=60):y="Â°"}else n==d?g<.9144?(y="in",s/=.0254):g<1609.344?(y="ft",s/=.3048):(y="mi",s/=1609.344):n==h?(s/=1852,y="nm"):n==p?g<.001?(y="Î¼m",s*=1e6):g<1?(y="mm",s*=1e3):g<1e3?y="m":(y="km",s/=1e3):n==f?g<.9144?(y="in",s*=39.37):g<1609.344?(y="ft",s/=.30480061):(y="mi",s/=1609.3472):Object(l.a)(!1,33);for(var _,b,w,E,O=3*Math.floor(Math.log(c*s)/Math.log(10));;){w=Math.floor(O/3);var S=Math.pow(10,w);if(_=m[(O%3+3)%3]*S,b=Math.round(_/s),isNaN(b))return this.element.style.display="none",void(this.renderedVisible_=!1);if(b>=c)break;++O}E=this.scaleBar_?this.createScaleBar(b,_,y):_.toFixed(w<0?-w:0)+" "+y,this.renderedHTML_!=E&&(this.innerElement_.innerHTML=E,this.renderedHTML_=E),this.renderedWidth_!=b&&(this.innerElement_.style.width=b+"px",this.renderedWidth_=b),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},t.prototype.createScaleBar=function(e,t,o){for(var n="1 : "+Math.round(this.getScaleForResolution()).toLocaleString(),r=[],i=e/this.scaleBarSteps_,s="#ffffff",a=0;a<this.scaleBarSteps_;a++)0===a&&r.push(this.createMarker("absolute",a)),r.push('<div><div class="ol-scale-singlebar" style="width: '+i+"px;background-color: "+s+';"></div>'+this.createMarker("relative",a)+(a%2==0||2===this.scaleBarSteps_?this.createStepText(a,e,!1,t,o):"")+"</div>"),a===this.scaleBarSteps_-1&&r.push(this.createStepText(a+1,e,!0,t,o)),s="#ffffff"===s?"#000000":"#ffffff";return'<div style="display: flex;">'+(this.scaleBarText_?'<div class="ol-scale-text" style="width: '+e+'px;">'+n+"</div>":"")+r.join("")+"</div>"},t.prototype.createMarker=function(e,t){return'<div class="ol-scale-step-marker" style="position: '+e+";top: "+("absolute"===e?3:-10)+'px;"></div>'},t.prototype.createStepText=function(e,t,o,n,r){var i=(0===e?0:Math.round(n/this.scaleBarSteps_*e*100)/100)+(0===e?"":" "+r);return'<div class="ol-scale-step-text" style="margin-left: '+(0===e?-3:t/this.scaleBarSteps_*-1)+"px;text-align: "+(0===e?"left":"center")+"; min-width: "+(0===e?0:t/this.scaleBarSteps_*2)+"px;left: "+(o?t+"px":"unset")+';">'+i+"</div>"},t.prototype.getScaleForResolution=function(){var e=Object(a.u)(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center),t=this.dpi_||25.4/.28,o=this.viewState_.projection.getMetersPerUnit();return parseFloat(e.toString())*o*(1e3/25.4)*t},t.prototype.render=function(e){var t=e.frameState;this.viewState_=t?t.viewState:null,this.updateElement_()},t}(r.a);t.a=g},"./node_modules/ol/control/Zoom.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/control/Control.js"),i=o("./node_modules/ol/events/EventType.js"),s=o("./node_modules/ol/css.js"),a=o("./node_modules/ol/easing.js"),l=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),c=function(e){function t(t){var o=this,n=t||{};o=e.call(this,{element:document.createElement("div"),target:n.target})||this;var r=void 0!==n.className?n.className:"ol-zoom",a=void 0!==n.delta?n.delta:1,l=void 0!==n.zoomInClassName?n.zoomInClassName:r+"-in",c=void 0!==n.zoomOutClassName?n.zoomOutClassName:r+"-out",u=void 0!==n.zoomInLabel?n.zoomInLabel:"+",d=void 0!==n.zoomOutLabel?n.zoomOutLabel:"â",h=void 0!==n.zoomInTipLabel?n.zoomInTipLabel:"Zoom in",p=void 0!==n.zoomOutTipLabel?n.zoomOutTipLabel:"Zoom out",f=document.createElement("button");f.className=l,f.setAttribute("type","button"),f.title=h,f.appendChild("string"==typeof u?document.createTextNode(u):u),f.addEventListener(i.a.CLICK,o.handleClick_.bind(o,a),!1);var m=document.createElement("button");m.className=c,m.setAttribute("type","button"),m.title=p,m.appendChild("string"==typeof d?document.createTextNode(d):d),m.addEventListener(i.a.CLICK,o.handleClick_.bind(o,-a),!1);var g=r+" "+s.e+" "+s.b,y=o.element;return y.className=g,y.appendChild(f),y.appendChild(m),o.duration_=void 0!==n.duration?n.duration:250,o}return l(t,e),t.prototype.handleClick_=function(e,t){t.preventDefault(),this.zoomByDelta_(e)},t.prototype.zoomByDelta_=function(e){var t=this.getMap().getView();if(t){var o=t.getZoom();if(void 0!==o){var n=t.getConstrainedZoom(o+e);this.duration_>0?(t.getAnimating()&&t.cancelAnimations(),t.animate({zoom:n,duration:this.duration_,easing:a.b})):t.setZoom(n)}}},t}(r.a);t.a=c},"./node_modules/ol/control/ZoomSlider.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/control/Control.js"),i=o("./node_modules/ol/events/EventType.js"),s=o("./node_modules/ol/pointer/EventType.js"),a=o("./node_modules/ol/css.js"),l=o("./node_modules/ol/math.js"),c=o("./node_modules/ol/easing.js"),u=o("./node_modules/ol/events.js"),d=o("./node_modules/ol/events/Event.js"),h=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),p=0,f=1,m=function(e){function t(t){var o=this,n=t||{};(o=e.call(this,{element:document.createElement("div"),render:n.render})||this).dragListenerKeys_=[],o.currentResolution_=void 0,o.direction_=p,o.dragging_,o.heightLimit_=0,o.widthLimit_=0,o.startX_,o.startY_,o.thumbSize_=null,o.sliderInitialized_=!1,o.duration_=void 0!==n.duration?n.duration:200;var r=void 0!==n.className?n.className:"ol-zoomslider",l=document.createElement("button");l.setAttribute("type","button"),l.className=r+"-thumb "+a.e;var c=o.element;return c.className=r+" "+a.e+" "+a.b,c.appendChild(l),c.addEventListener(s.a.POINTERDOWN,o.handleDraggerStart_.bind(o),!1),c.addEventListener(s.a.POINTERMOVE,o.handleDraggerDrag_.bind(o),!1),c.addEventListener(s.a.POINTERUP,o.handleDraggerEnd_.bind(o),!1),c.addEventListener(i.a.CLICK,o.handleContainerClick_.bind(o),!1),l.addEventListener(i.a.CLICK,d.c,!1),o}return h(t,e),t.prototype.setMap=function(t){e.prototype.setMap.call(this,t),t&&t.render()},t.prototype.initSlider_=function(){var e=this.element,t=e.offsetWidth,o=e.offsetHeight;if(0===t&&0===o)return this.sliderInitialized_=!1;var n=getComputedStyle(e);t-=parseFloat(n.paddingRight)+parseFloat(n.paddingLeft),o-=parseFloat(n.paddingTop)+parseFloat(n.paddingBottom);var r=e.firstElementChild,i=getComputedStyle(r),s=r.offsetWidth+parseFloat(i.marginRight)+parseFloat(i.marginLeft),a=r.offsetHeight+parseFloat(i.marginTop)+parseFloat(i.marginBottom);return this.thumbSize_=[s,a],t>o?(this.direction_=f,this.widthLimit_=t-s):(this.direction_=p,this.heightLimit_=o-a),this.sliderInitialized_=!0},t.prototype.handleContainerClick_=function(e){var t=this.getMap().getView(),o=this.getRelativePosition_(e.offsetX-this.thumbSize_[0]/2,e.offsetY-this.thumbSize_[1]/2),n=this.getResolutionForPosition_(o),r=t.getConstrainedZoom(t.getZoomForResolution(n));t.animateInternal({zoom:r,duration:this.duration_,easing:c.b})},t.prototype.handleDraggerStart_=function(e){if(!this.dragging_&&e.target===this.element.firstElementChild){var t=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=e.clientX-parseFloat(t.style.left),this.startY_=e.clientY-parseFloat(t.style.top),this.dragging_=!0,0===this.dragListenerKeys_.length){var o=this.handleDraggerDrag_,n=this.handleDraggerEnd_,r=this.getMap().getOwnerDocument();this.dragListenerKeys_.push(Object(u.a)(r,s.a.POINTERMOVE,o,this),Object(u.a)(r,s.a.POINTERUP,n,this))}}},t.prototype.handleDraggerDrag_=function(e){if(this.dragging_){var t=e.clientX-this.startX_,o=e.clientY-this.startY_,n=this.getRelativePosition_(t,o);this.currentResolution_=this.getResolutionForPosition_(n),this.getMap().getView().setResolution(this.currentResolution_)}},t.prototype.handleDraggerEnd_=function(e){this.dragging_&&(this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(u.c),this.dragListenerKeys_.length=0)},t.prototype.setThumbPosition_=function(e){var t=this.getPositionForResolution_(e),o=this.element.firstElementChild;this.direction_==f?o.style.left=this.widthLimit_*t+"px":o.style.top=this.heightLimit_*t+"px"},t.prototype.getRelativePosition_=function(e,t){var o;return o=this.direction_===f?e/this.widthLimit_:t/this.heightLimit_,Object(l.a)(o,0,1)},t.prototype.getResolutionForPosition_=function(e){return this.getMap().getView().getResolutionForValueFunction()(1-e)},t.prototype.getPositionForResolution_=function(e){var t=this.getMap().getView().getValueForResolutionFunction();return Object(l.a)(1-t(e),0,1)},t.prototype.render=function(e){if(e.frameState&&(this.sliderInitialized_||this.initSlider_())){var t=e.frameState.viewState.resolution;this.currentResolution_=t,this.setThumbPosition_(t)}},t}(r.a);t.a=m},"./node_modules/ol/control/ZoomToExtent.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/control/Control.js"),i=o("./node_modules/ol/events/EventType.js"),s=o("./node_modules/ol/css.js"),a=o("./node_modules/ol/geom/Polygon.js"),l=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),c=function(e){function t(t){var o=this,n=t||{};(o=e.call(this,{element:document.createElement("div"),target:n.target})||this).extent=n.extent?n.extent:null;var r=void 0!==n.className?n.className:"ol-zoom-extent",a=void 0!==n.label?n.label:"E",l=void 0!==n.tipLabel?n.tipLabel:"Fit to extent",c=document.createElement("button");c.setAttribute("type","button"),c.title=l,c.appendChild("string"==typeof a?document.createTextNode(a):a),c.addEventListener(i.a.CLICK,o.handleClick_.bind(o),!1);var u=r+" "+s.e+" "+s.b,d=o.element;return d.className=u,d.appendChild(c),o}return l(t,e),t.prototype.handleClick_=function(e){e.preventDefault(),this.handleZoomToExtent()},t.prototype.handleZoomToExtent=function(){var e=this.getMap().getView(),t=this.extent?this.extent:e.getProjection().getExtent();e.fitInternal(Object(a.d)(t))},t}(r.a);t.a=c},"./node_modules/ol/coordinate.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return s})),o.d(t,"b",(function(){return a})),o.d(t,"c",(function(){return l})),o.d(t,"d",(function(){return c})),o.d(t,"e",(function(){return u})),o.d(t,"h",(function(){return d})),o.d(t,"g",(function(){return h})),o.d(t,"j",(function(){return p})),o.d(t,"k",(function(){return f})),o.d(t,"l",(function(){return m})),o.d(t,"f",(function(){return g})),o.d(t,"m",(function(){return y})),o.d(t,"n",(function(){return v})),o.d(t,"o",(function(){return _})),o.d(t,"p",(function(){return b})),o.d(t,"i",(function(){return w}));var n=o("./node_modules/ol/extent.js"),r=o("./node_modules/ol/math.js"),i=o("./node_modules/ol/string.js");function s(e,t){return e[0]+=+t[0],e[1]+=+t[1],e}function a(e,t){var o=t.getRadius(),n=t.getCenter(),r=n[0],i=n[1],s=e[0]-r,a=e[1]-i;0===s&&0===a&&(s=1);var l=Math.sqrt(s*s+a*a);return[r+o*s/l,i+o*a/l]}function l(e,t){var o,n,r=e[0],i=e[1],s=t[0],a=t[1],l=s[0],c=s[1],u=a[0],d=a[1],h=u-l,p=d-c,f=0===h&&0===p?0:(h*(r-l)+p*(i-c))/(h*h+p*p||0);return f<=0?(o=l,n=c):f>=1?(o=u,n=d):(o=l+f*h,n=c+f*p),[o,n]}function c(e){return function(t){return _(t,e)}}function u(e,t,o){var n=Object(r.e)(t+180,360)-180,s=Math.abs(3600*n),a=o||0,l=Math.pow(10,a),c=Math.floor(s/3600),u=Math.floor((s-3600*c)/60),d=s-3600*c-60*u;return(d=Math.ceil(d*l)/l)>=60&&(d=0,u+=1),u>=60&&(u=0,c+=1),c+"Â° "+Object(i.b)(u,2)+"â² "+Object(i.b)(d,2,a)+"â³"+(0==n?"":" "+e.charAt(n<0?1:0))}function d(e,t,o){return e?t.replace("{x}",e[0].toFixed(o)).replace("{y}",e[1].toFixed(o)):""}function h(e,t){for(var o=!0,n=e.length-1;n>=0;--n)if(e[n]!=t[n]){o=!1;break}return o}function p(e,t){var o=Math.cos(t),n=Math.sin(t),r=e[0]*o-e[1]*n,i=e[1]*o+e[0]*n;return e[0]=r,e[1]=i,e}function f(e,t){return e[0]*=t,e[1]*=t,e}function m(e,t){var o=e[0]-t[0],n=e[1]-t[1];return o*o+n*n}function g(e,t){return Math.sqrt(m(e,t))}function y(e,t){return m(e,l(e,t))}function v(e,t){return e?u("NS",e[1],t)+" "+u("EW",e[0],t):""}function _(e,t){return d(e,"{x}, {y}",t)}function b(e,t){if(t.canWrapX()){var o=Object(n.N)(t.getExtent()),r=w(e,t,o);r&&(e[0]-=r*o)}return e}function w(e,t,o){var r=t.getExtent(),i=0;if(t.canWrapX()&&(e[0]<r[0]||e[0]>r[2])){var s=o||Object(n.N)(r);i=Math.floor((e[0]-r[0])/s)}return i}},"./node_modules/ol/css.js":function(e,t,o){"use strict";o.d(t,"c",(function(){return n})),o.d(t,"d",(function(){return r})),o.d(t,"e",(function(){return i})),o.d(t,"f",(function(){return s})),o.d(t,"b",(function(){return a})),o.d(t,"a",(function(){return l})),o.d(t,"h",(function(){return d})),o.d(t,"g",(function(){return h}));var n="ol-hidden",r="ol-selectable",i="ol-unselectable",s="ol-unsupported",a="ol-control",l="ol-collapsed",c=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),u=["style","variant","weight","size","lineHeight","family"],d=function(e){var t=e.match(c);if(!t)return null;for(var o={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},n=0,r=u.length;n<r;++n){var i=t[n+1];void 0!==i&&(o[u[n]]=i)}return o.families=o.family.split(/,\s?/),o};function h(e){return 1===e?"":String(Math.round(100*e)/100)}},"./node_modules/ol/dom.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return r})),o.d(t,"c",(function(){return i})),o.d(t,"b",(function(){return s})),o.d(t,"g",(function(){return a})),o.d(t,"e",(function(){return l})),o.d(t,"d",(function(){return c})),o.d(t,"f",(function(){return u}));var n=o("./node_modules/ol/has.js");function r(e,t,o,r){var i;return o&&o.length?i=o.shift():n.h?i=new OffscreenCanvas(e||300,t||300):(i=document.createElement("canvas")).style.all="unset",e&&(i.width=e),t&&(i.height=t),i.getContext("2d",r)}function i(e){var t=e.offsetWidth,o=getComputedStyle(e);return t+=parseInt(o.marginLeft,10)+parseInt(o.marginRight,10)}function s(e){var t=e.offsetHeight,o=getComputedStyle(e);return t+=parseInt(o.marginTop,10)+parseInt(o.marginBottom,10)}function a(e,t){var o=t.parentNode;o&&o.replaceChild(e,t)}function l(e){return e&&e.parentNode?e.parentNode.removeChild(e):null}function c(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function u(e,t){for(var o=e.childNodes,n=0;;++n){var r=o[n],i=t[n];if(!r&&!i)break;r!==i&&(r?i?e.insertBefore(i,r):(e.removeChild(r),--n):e.appendChild(i))}}},"./node_modules/ol/easing.js":function(e,t,o){"use strict";function n(e){return Math.pow(e,3)}function r(e){return 1-n(1-e)}function i(e){return 3*e*e-2*e*e*e}function s(e){return e}function a(e){return e<.5?i(2*e):1-i(2*(e-.5))}o.d(t,"a",(function(){return n})),o.d(t,"b",(function(){return r})),o.d(t,"c",(function(){return i})),o.d(t,"d",(function(){return s})),o.d(t,"e",(function(){return a}))},"./node_modules/ol/events.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return r})),o.d(t,"b",(function(){return i})),o.d(t,"c",(function(){return s}));var n=o("./node_modules/ol/obj.js");function r(e,t,o,n,r){if(n&&n!==e&&(o=o.bind(n)),r){var i=o;o=function(){e.removeEventListener(t,o),i.apply(this,arguments)}}var s={target:e,type:t,listener:o};return e.addEventListener(t,o),s}function i(e,t,o,n){return r(e,t,o,n,!0)}function s(e){e&&e.target&&(e.target.removeEventListener(e.type,e.listener),Object(n.b)(e))}},"./node_modules/ol/events/Event.js":function(e,t,o){"use strict";o.d(t,"c",(function(){return r})),o.d(t,"b",(function(){return i}));var n=function(){function e(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}return e.prototype.preventDefault=function(){this.defaultPrevented=!0},e.prototype.stopPropagation=function(){this.propagationStopped=!0},e}();function r(e){e.stopPropagation()}function i(e){e.preventDefault()}t.a=n},"./node_modules/ol/events/EventType.js":function(e,t,o){"use strict";t.a={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"}},"./node_modules/ol/events/Target.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/Disposable.js"),i=o("./node_modules/ol/events/Event.js"),s=o("./node_modules/ol/functions.js"),a=o("./node_modules/ol/obj.js"),l=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),c=function(e){function t(t){var o=e.call(this)||this;return o.eventTarget_=t,o.pendingRemovals_=null,o.dispatching_=null,o.listeners_=null,o}return l(t,e),t.prototype.addEventListener=function(e,t){if(e&&t){var o=this.listeners_||(this.listeners_={}),n=o[e]||(o[e]=[]);-1===n.indexOf(t)&&n.push(t)}},t.prototype.dispatchEvent=function(e){var t="string"==typeof e?new i.a(e):e,o=t.type;t.target||(t.target=this.eventTarget_||this);var n,r=this.listeners_&&this.listeners_[o];if(r){var a=this.dispatching_||(this.dispatching_={}),l=this.pendingRemovals_||(this.pendingRemovals_={});o in a||(a[o]=0,l[o]=0),++a[o];for(var c=0,u=r.length;c<u;++c)if(!1===(n="handleEvent"in r[c]?r[c].handleEvent(t):r[c].call(this,t))||t.propagationStopped){n=!1;break}if(--a[o],0===a[o]){var d=l[o];for(delete l[o];d--;)this.removeEventListener(o,s.c);delete a[o]}return n}},t.prototype.disposeInternal=function(){this.listeners_&&Object(a.b)(this.listeners_)},t.prototype.getListeners=function(e){return this.listeners_&&this.listeners_[e]||void 0},t.prototype.hasListener=function(e){return!!this.listeners_&&(e?e in this.listeners_:Object.keys(this.listeners_).length>0)},t.prototype.removeEventListener=function(e,t){var o=this.listeners_&&this.listeners_[e];if(o){var n=o.indexOf(t);-1!==n&&(this.pendingRemovals_&&e in this.pendingRemovals_?(o[n]=s.c,++this.pendingRemovals_[e]):(o.splice(n,1),0===o.length&&delete this.listeners_[e]))}},t}(r.a);t.a=c},"./node_modules/ol/events/condition.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return a})),o.d(t,"b",(function(){return l})),o.d(t,"c",(function(){return c})),o.d(t,"g",(function(){return u})),o.d(t,"h",(function(){return d})),o.d(t,"d",(function(){return h})),o.d(t,"e",(function(){return p})),o.d(t,"i",(function(){return f})),o.d(t,"k",(function(){return m})),o.d(t,"o",(function(){return g})),o.d(t,"r",(function(){return y})),o.d(t,"f",(function(){return v})),o.d(t,"l",(function(){return _})),o.d(t,"n",(function(){return b})),o.d(t,"q",(function(){return w})),o.d(t,"s",(function(){return E})),o.d(t,"j",(function(){return O})),o.d(t,"t",(function(){return S})),o.d(t,"m",(function(){return x})),o.d(t,"p",(function(){return C}));var n=o("./node_modules/ol/MapBrowserEventType.js"),r=o("./node_modules/ol/functions.js"),i=o("./node_modules/ol/has.js"),s=o("./node_modules/ol/asserts.js");function a(e){var t=arguments;return function(e){for(var o=!0,n=0,r=t.length;n<r&&(o=o&&t[n](e));++n);return o}}var l=function(e){var t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},c=function(e){var t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},u=function(e){return e.target.getTargetElement().contains(document.activeElement)},d=function(e){return!e.map.getTargetElement().hasAttribute("tabindex")||u(e)},h=r.b,p=function(e){return e.type==n.a.CLICK},f=function(e){var t=e.originalEvent;return 0==t.button&&!(i.g&&i.d&&t.ctrlKey)},m=r.a,g=function(e){return"pointermove"==e.type},y=function(e){return e.type==n.a.SINGLECLICK},v=function(e){return e.type==n.a.DBLCLICK},_=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},b=function(e){var t=e.originalEvent;return!t.altKey&&(i.d?t.metaKey:t.ctrlKey)&&!t.shiftKey},w=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},E=function(e){var t=e.originalEvent.target.tagName;return"INPUT"!==t&&"SELECT"!==t&&"TEXTAREA"!==t},O=function(e){var t=e.originalEvent;return Object(s.a)(void 0!==t,56),"mouse"==t.pointerType},S=function(e){var t=e.originalEvent;return Object(s.a)(void 0!==t,56),"touch"===t.pointerType},x=function(e){var t=e.originalEvent;return Object(s.a)(void 0!==t,56),"pen"===t.pointerType},C=function(e){var t=e.originalEvent;return Object(s.a)(void 0!==t,56),t.isPrimary&&0===t.button}},"./node_modules/ol/extent.js":function(e,t,o){"use strict";o.d(t,"c",(function(){return s})),o.d(t,"d",(function(){return a})),o.d(t,"e",(function(){return l})),o.d(t,"f",(function(){return c})),o.d(t,"g",(function(){return u})),o.d(t,"h",(function(){return d})),o.d(t,"i",(function(){return h})),o.d(t,"j",(function(){return p})),o.d(t,"k",(function(){return f})),o.d(t,"l",(function(){return m})),o.d(t,"m",(function(){return g})),o.d(t,"n",(function(){return y})),o.d(t,"o",(function(){return v})),o.d(t,"p",(function(){return _})),o.d(t,"q",(function(){return b})),o.d(t,"r",(function(){return w})),o.d(t,"b",(function(){return E})),o.d(t,"s",(function(){return O})),o.d(t,"t",(function(){return S})),o.d(t,"u",(function(){return x})),o.d(t,"v",(function(){return C})),o.d(t,"w",(function(){return j})),o.d(t,"x",(function(){return P})),o.d(t,"y",(function(){return T})),o.d(t,"z",(function(){return A})),o.d(t,"A",(function(){return M})),o.d(t,"B",(function(){return I})),o.d(t,"C",(function(){return R})),o.d(t,"D",(function(){return L})),o.d(t,"E",(function(){return k})),o.d(t,"F",(function(){return G})),o.d(t,"G",(function(){return N})),o.d(t,"I",(function(){return D})),o.d(t,"H",(function(){return F})),o.d(t,"J",(function(){return U})),o.d(t,"K",(function(){return B})),o.d(t,"L",(function(){return z})),o.d(t,"M",(function(){return V})),o.d(t,"N",(function(){return W})),o.d(t,"O",(function(){return q})),o.d(t,"Q",(function(){return H})),o.d(t,"R",(function(){return Y})),o.d(t,"S",(function(){return X})),o.d(t,"P",(function(){return Z})),o.d(t,"a",(function(){return K})),o.d(t,"T",(function(){return J}));var n=o("./node_modules/ol/extent/Corner.js"),r=o("./node_modules/ol/extent/Relationship.js"),i=o("./node_modules/ol/asserts.js");function s(e){for(var t=f(),o=0,n=e.length;o<n;++o)S(t,e[o]);return t}function a(e,t,o){return o?(o[0]=e[0]-t,o[1]=e[1]-t,o[2]=e[2]+t,o[3]=e[3]+t,o):[e[0]-t,e[1]-t,e[2]+t,e[3]+t]}function l(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e.slice()}function c(e,t,o){var n,r;return(n=t<e[0]?e[0]-t:e[2]<t?t-e[2]:0)*n+(r=o<e[1]?e[1]-o:e[3]<o?o-e[3]:0)*r}function u(e,t){return h(e,t[0],t[1])}function d(e,t){return e[0]<=t[0]&&t[2]<=e[2]&&e[1]<=t[1]&&t[3]<=e[3]}function h(e,t,o){return e[0]<=t&&t<=e[2]&&e[1]<=o&&o<=e[3]}function p(e,t){var o=e[0],n=e[1],i=e[2],s=e[3],a=t[0],l=t[1],c=r.a.UNKNOWN;return a<o?c|=r.a.LEFT:a>i&&(c|=r.a.RIGHT),l<n?c|=r.a.BELOW:l>s&&(c|=r.a.ABOVE),c===r.a.UNKNOWN&&(c=r.a.INTERSECTING),c}function f(){return[1/0,1/0,-1/0,-1/0]}function m(e,t,o,n,r){return r?(r[0]=e,r[1]=t,r[2]=o,r[3]=n,r):[e,t,o,n]}function g(e){return m(1/0,1/0,-1/0,-1/0,e)}function y(e,t){var o=e[0],n=e[1];return m(o,n,o,n,t)}function v(e,t){return x(g(t),e)}function _(e,t,o,n,r){return C(g(r),e,t,o,n)}function b(e,t){return j(g(t),e)}function w(e,t){return e[0]==t[0]&&e[2]==t[2]&&e[1]==t[1]&&e[3]==t[3]}function E(e,t,o){return Math.abs(e[0]-t[0])<o&&Math.abs(e[2]-t[2])<o&&Math.abs(e[1]-t[1])<o&&Math.abs(e[3]-t[3])<o}function O(e,t){return t[0]<e[0]&&(e[0]=t[0]),t[2]>e[2]&&(e[2]=t[2]),t[1]<e[1]&&(e[1]=t[1]),t[3]>e[3]&&(e[3]=t[3]),e}function S(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function x(e,t){for(var o=0,n=t.length;o<n;++o)S(e,t[o]);return e}function C(e,t,o,n,r){for(;o<n;o+=r)P(e,t[o],t[o+1]);return e}function j(e,t){for(var o=0,n=t.length;o<n;++o)x(e,t[o]);return e}function P(e,t,o){e[0]=Math.min(e[0],t),e[1]=Math.min(e[1],o),e[2]=Math.max(e[2],t),e[3]=Math.max(e[3],o)}function T(e,t){var o;return(o=t(M(e)))||(o=t(I(e)))||(o=t(V(e)))?o:(o=t(z(e)))||!1}function A(e){var t=0;return H(e)||(t=W(e)*N(e)),t}function M(e){return[e[0],e[1]]}function I(e){return[e[2],e[1]]}function R(e){return[(e[0]+e[2])/2,(e[1]+e[3])/2]}function L(e,t){var o;return t===n.a.BOTTOM_LEFT?o=M(e):t===n.a.BOTTOM_RIGHT?o=I(e):t===n.a.TOP_LEFT?o=z(e):t===n.a.TOP_RIGHT?o=V(e):Object(i.a)(!1,13),o}function k(e,t){var o=Math.min(e[0],t[0]),n=Math.min(e[1],t[1]);return(Math.max(e[2],t[2])-o)*(Math.max(e[3],t[3])-n)}function G(e,t,o,n,r){var i=t*n[0]/2,s=t*n[1]/2,a=Math.cos(o),l=Math.sin(o),c=i*a,u=i*l,d=s*a,h=s*l,p=e[0],f=e[1],g=p-c+h,y=p-c-h,v=p+c-h,_=p+c+h,b=f-u-d,w=f-u+d,E=f+u+d,O=f+u-d;return m(Math.min(g,y,v,_),Math.min(b,w,E,O),Math.max(g,y,v,_),Math.max(b,w,E,O),r)}function N(e){return e[3]-e[1]}function D(e,t){return A(F(e,t))}function F(e,t,o){var n=o||[1/0,1/0,-1/0,-1/0];return q(e,t)?(e[0]>t[0]?n[0]=e[0]:n[0]=t[0],e[1]>t[1]?n[1]=e[1]:n[1]=t[1],e[2]<t[2]?n[2]=e[2]:n[2]=t[2],e[3]<t[3]?n[3]=e[3]:n[3]=t[3]):g(n),n}function U(e){return W(e)+N(e)}function B(e){return[e[2]-e[0],e[3]-e[1]]}function z(e){return[e[0],e[3]]}function V(e){return[e[2],e[3]]}function W(e){return e[2]-e[0]}function q(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}function H(e){return e[2]<e[0]||e[3]<e[1]}function Y(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e}function X(e,t){var o=(e[2]-e[0])/2*(t-1),n=(e[3]-e[1])/2*(t-1);e[0]-=o,e[2]+=o,e[1]-=n,e[3]+=n}function Z(e,t,o){var n=!1,i=p(e,t),s=p(e,o);if(i===r.a.INTERSECTING||s===r.a.INTERSECTING)n=!0;else{var a=e[0],l=e[1],c=e[2],u=e[3],d=t[0],h=t[1],f=o[0],m=o[1],g=(m-h)/(f-d),y=void 0,v=void 0;s&r.a.ABOVE&&!(i&r.a.ABOVE)&&(n=(y=f-(m-u)/g)>=a&&y<=c),n||!(s&r.a.RIGHT)||i&r.a.RIGHT||(n=(v=m-(f-c)*g)>=l&&v<=u),n||!(s&r.a.BELOW)||i&r.a.BELOW||(n=(y=f-(m-l)/g)>=a&&y<=c),n||!(s&r.a.LEFT)||i&r.a.LEFT||(n=(v=m-(f-a)*g)>=l&&v<=u)}return n}function K(e,t,o,n){var r=[];if(n>1)for(var i=e[2]-e[0],s=e[3]-e[1],a=0;a<n;++a)r.push(e[0]+i*a/n,e[1],e[2],e[1]+s*a/n,e[2]-i*a/n,e[3],e[0],e[3]-s*a/n);else r=[e[0],e[1],e[2],e[1],e[2],e[3],e[0],e[3]];t(r,r,2);for(var l=[],c=[],u=(a=0,r.length);a<u;a+=2)l.push(r[a]),c.push(r[a+1]);return function(e,t,o){return m(Math.min.apply(null,e),Math.min.apply(null,t),Math.max.apply(null,e),Math.max.apply(null,t),o)}(l,c,o)}function J(e,t){var o=t.getExtent(),n=R(e);if(t.canWrapX()&&(n[0]<o[0]||n[0]>=o[2])){var r=W(o),i=Math.floor((n[0]-o[0])/r)*r;e[0]-=i,e[2]-=i}return e}},"./node_modules/ol/extent/Corner.js":function(e,t,o){"use strict";t.a={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"}},"./node_modules/ol/extent/Relationship.js":function(e,t,o){"use strict";t.a={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16}},"./node_modules/ol/featureloader.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return s})),o.d(t,"c",(function(){return a})),o.d(t,"b",(function(){return l}));var n=o("./node_modules/ol/format/FormatType.js"),r=o("./node_modules/ol/functions.js"),i=!1;function s(e,t,o,r,s,a,l){var c=new XMLHttpRequest;c.open("GET","function"==typeof e?e(o,r,s):e,!0),t.getType()==n.a.ARRAY_BUFFER&&(c.responseType="arraybuffer"),c.withCredentials=i,c.onload=function(e){if(!c.status||c.status>=200&&c.status<300){var r=t.getType(),i=void 0;r==n.a.JSON||r==n.a.TEXT?i=c.responseText:r==n.a.XML?(i=c.responseXML)||(i=(new DOMParser).parseFromString(c.responseText,"application/xml")):r==n.a.ARRAY_BUFFER&&(i=c.response),i?a(t.readFeatures(i,{extent:o,featureProjection:s}),t.readProjection(i)):l()}else l()},c.onerror=l,c.send()}function a(e,t){return function(o,n,i,a,l){var c=this;s(e,t,o,n,i,(function(e,t){c.addFeatures(e),void 0!==a&&a(e)}),l||r.c)}}function l(e){i=e}},"./node_modules/ol/format/Feature.js":function(e,t,o){"use strict";o.d(t,"c",(function(){return l})),o.d(t,"b",(function(){return c}));var n=o("./node_modules/ol/proj/Units.js"),r=o("./node_modules/ol/util.js"),i=o("./node_modules/ol/obj.js"),s=o("./node_modules/ol/proj.js"),a=function(){function e(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}return e.prototype.getReadOptions=function(e,t){var o;if(t){var r=t.dataProjection?Object(s.t)(t.dataProjection):this.readProjection(e);t.extent&&r&&r.getUnits()===n.b.TILE_PIXELS&&(r=Object(s.t)(r)).setWorldExtent(t.extent),o={dataProjection:r,featureProjection:t.featureProjection}}return this.adaptOptions(o)},e.prototype.adaptOptions=function(e){return Object(i.a)({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},e)},e.prototype.getType=function(){return Object(r.b)()},e.prototype.readFeature=function(e,t){return Object(r.b)()},e.prototype.readFeatures=function(e,t){return Object(r.b)()},e.prototype.readGeometry=function(e,t){return Object(r.b)()},e.prototype.readProjection=function(e){return Object(r.b)()},e.prototype.writeFeature=function(e,t){return Object(r.b)()},e.prototype.writeFeatures=function(e,t){return Object(r.b)()},e.prototype.writeGeometry=function(e,t){return Object(r.b)()},e}();function l(e,t,o){var n,r=o?Object(s.t)(o.featureProjection):null,i=o?Object(s.t)(o.dataProjection):null;if(n=r&&i&&!Object(s.o)(r,i)?(t?e.clone():e).transform(t?r:i,t?i:r):e,t&&o&&void 0!==o.decimals){var a=Math.pow(10,o.decimals);n===e&&(n=e.clone()),n.applyTransform((function(e){for(var t=0,o=e.length;t<o;++t)e[t]=Math.round(e[t]*a)/a;return e}))}return n}function c(e,t){var o=t?Object(s.t)(t.featureProjection):null,n=t?Object(s.t)(t.dataProjection):null;return o&&n&&!Object(s.o)(o,n)?Object(s.F)(e,n,o):e}t.a=a},"./node_modules/ol/format/FormatType.js":function(e,t,o){"use strict";t.a={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"}},"./node_modules/ol/format/GML2.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/format/GMLBase.js"),i=o("./node_modules/ol/xml.js"),s=o("./node_modules/ol/obj.js"),a=o("./node_modules/ol/extent.js"),l=o("./node_modules/ol/proj.js"),c=o("./node_modules/ol/format/Feature.js"),u=o("./node_modules/ol/format/xsd.js"),d=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),h=r.a+" http://schemas.opengis.net/gml/2.1.2/feature.xsd",p={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},f=function(e){function t(t){var o=this,n=t||{};return(o=e.call(this,n)||this).FEATURE_COLLECTION_PARSERS[r.a].featureMember=Object(i.k)(o.readFeaturesInternal),o.schemaLocation=n.schemaLocation?n.schemaLocation:h,o}return d(t,e),t.prototype.readFlatCoordinates=function(e,t){var o=Object(i.d)(e,!1).replace(/^\s*|\s*$/g,""),n=t[0].srsName,r="enu";if(n){var s=Object(l.t)(n);s&&(r=s.getAxisOrientation())}for(var a=o.trim().split(/\s+/),c=[],u=0,d=a.length;u<d;u++){var h=a[u].split(/,+/),p=parseFloat(h[0]),f=parseFloat(h[1]),m=3===h.length?parseFloat(h[2]):0;"en"===r.substr(0,2)?c.push(p,f,m):c.push(f,p,m)}return c},t.prototype.readBox=function(e,t){var o=Object(i.v)([null],this.BOX_PARSERS_,e,t,this);return Object(a.l)(o[1][0],o[1][1],o[1][3],o[1][4])},t.prototype.innerBoundaryIsParser=function(e,t){var o=Object(i.v)(void 0,this.RING_PARSERS,e,t,this);o&&t[t.length-1].push(o)},t.prototype.outerBoundaryIsParser=function(e,t){var o=Object(i.v)(void 0,this.RING_PARSERS,e,t,this);o&&(t[t.length-1][0]=o)},t.prototype.GEOMETRY_NODE_FACTORY_=function(e,t,o){var n,r=t[t.length-1],s=r.multiSurface,a=r.surface,l=r.multiCurve;return Array.isArray(e)?n="Envelope":"MultiPolygon"===(n=e.getType())&&!0===s?n="MultiSurface":"Polygon"===n&&!0===a?n="Surface":"MultiLineString"===n&&!0===l&&(n="MultiCurve"),Object(i.c)("http://www.opengis.net/gml",n)},t.prototype.writeFeatureElement=function(e,t,o){var n=t.getId();n&&e.setAttribute("fid",n);var r=o[o.length-1],a=r.featureNS,l=t.getGeometryName();r.serializers||(r.serializers={},r.serializers[a]={});var c=[],d=[];if(t.hasProperties()){var h=t.getProperties();for(var p in h){var f=h[p];null!==f&&(c.push(p),d.push(f),p==l||"function"==typeof f.getSimplifiedGeometry?p in r.serializers[a]||(r.serializers[a][p]=Object(i.m)(this.writeGeometryElement,this)):p in r.serializers[a]||(r.serializers[a][p]=Object(i.m)(u.n)))}}var m=Object(s.a)({},r);m.node=e,Object(i.w)(m,r.serializers,Object(i.r)(void 0,a),d,o,c)},t.prototype.writeCurveOrLineString=function(e,t,o){var n=o[o.length-1].srsName;if("LineStringSegment"!==e.nodeName&&n&&e.setAttribute("srsName",n),"LineString"===e.nodeName||"LineStringSegment"===e.nodeName){var r=this.createCoordinatesNode_(e.namespaceURI);e.appendChild(r),this.writeCoordinates_(r,t,o)}else if("Curve"===e.nodeName){var s=Object(i.c)(e.namespaceURI,"segments");e.appendChild(s),this.writeCurveSegments_(s,t,o)}},t.prototype.writeLineStringOrCurveMember=function(e,t,o){var n=this.GEOMETRY_NODE_FACTORY_(t,o);n&&(e.appendChild(n),this.writeCurveOrLineString(n,t,o))},t.prototype.writeMultiCurveOrLineString=function(e,t,o){var n=o[o.length-1],r=n.hasZ,s=n.srsName,a=n.curve;s&&e.setAttribute("srsName",s);var l=t.getLineStrings();Object(i.w)({node:e,hasZ:r,srsName:s,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,o,void 0,this)},t.prototype.writeGeometryElement=function(e,t,o){var n,r=o[o.length-1],a=Object(s.a)({},r);a.node=e,n=Array.isArray(t)?Object(c.b)(t,r):Object(c.c)(t,!0,r),Object(i.w)(a,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[n],o,void 0,this)},t.prototype.createCoordinatesNode_=function(e){var t=Object(i.c)(e,"coordinates");return t.setAttribute("decimal","."),t.setAttribute("cs",","),t.setAttribute("ts"," "),t},t.prototype.writeCoordinates_=function(e,t,o){for(var n=o[o.length-1],r=n.hasZ,i=n.srsName,s=t.getCoordinates(),a=s.length,l=new Array(a),c=0;c<a;++c){var d=s[c];l[c]=this.getCoords_(d,i,r)}Object(u.n)(e,l.join(" "))},t.prototype.writeCurveSegments_=function(e,t,o){var n=Object(i.c)(e.namespaceURI,"LineStringSegment");e.appendChild(n),this.writeCurveOrLineString(n,t,o)},t.prototype.writeSurfaceOrPolygon=function(e,t,o){var n=o[o.length-1],r=n.hasZ,s=n.srsName;if("PolygonPatch"!==e.nodeName&&s&&e.setAttribute("srsName",s),"Polygon"===e.nodeName||"PolygonPatch"===e.nodeName){var a=t.getLinearRings();Object(i.w)({node:e,hasZ:r,srsName:s},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,a,o,void 0,this)}else if("Surface"===e.nodeName){var l=Object(i.c)(e.namespaceURI,"patches");e.appendChild(l),this.writeSurfacePatches_(l,t,o)}},t.prototype.RING_NODE_FACTORY_=function(e,t,o){var n=t[t.length-1],r=n.node,s=n.exteriorWritten;return void 0===s&&(n.exteriorWritten=!0),Object(i.c)(r.namespaceURI,void 0!==s?"innerBoundaryIs":"outerBoundaryIs")},t.prototype.writeSurfacePatches_=function(e,t,o){var n=Object(i.c)(e.namespaceURI,"PolygonPatch");e.appendChild(n),this.writeSurfaceOrPolygon(n,t,o)},t.prototype.writeRing=function(e,t,o){var n=Object(i.c)(e.namespaceURI,"LinearRing");e.appendChild(n),this.writeLinearRing(n,t,o)},t.prototype.getCoords_=function(e,t,o){var n="enu";t&&(n=Object(l.t)(t).getAxisOrientation());var r="en"===n.substr(0,2)?e[0]+","+e[1]:e[1]+","+e[0];o&&(r+=","+(e[2]||0));return r},t.prototype.writePoint=function(e,t,o){var n=o[o.length-1],r=n.hasZ,i=n.srsName;i&&e.setAttribute("srsName",i);var s=this.createCoordinatesNode_(e.namespaceURI);e.appendChild(s);var a=t.getCoordinates(),l=this.getCoords_(a,i,r);Object(u.n)(s,l)},t.prototype.writeMultiPoint=function(e,t,o){var n=o[o.length-1],r=n.hasZ,s=n.srsName;s&&e.setAttribute("srsName",s);var a=t.getPoints();Object(i.w)({node:e,hasZ:r,srsName:s},this.POINTMEMBER_SERIALIZERS,Object(i.r)("pointMember"),a,o,void 0,this)},t.prototype.writePointMember=function(e,t,o){var n=Object(i.c)(e.namespaceURI,"Point");e.appendChild(n),this.writePoint(n,t,o)},t.prototype.writeLinearRing=function(e,t,o){var n=o[o.length-1].srsName;n&&e.setAttribute("srsName",n);var r=this.createCoordinatesNode_(e.namespaceURI);e.appendChild(r),this.writeCoordinates_(r,t,o)},t.prototype.writeMultiSurfaceOrPolygon=function(e,t,o){var n=o[o.length-1],r=n.hasZ,s=n.srsName,a=n.surface;s&&e.setAttribute("srsName",s);var l=t.getPolygons();Object(i.w)({node:e,hasZ:r,srsName:s,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,o,void 0,this)},t.prototype.writeSurfaceOrPolygonMember=function(e,t,o){var n=this.GEOMETRY_NODE_FACTORY_(t,o);n&&(e.appendChild(n),this.writeSurfaceOrPolygon(n,t,o))},t.prototype.writeEnvelope=function(e,t,o){var n=o[o.length-1].srsName;n&&e.setAttribute("srsName",n);var r=[t[0]+" "+t[1],t[2]+" "+t[3]];Object(i.w)({node:e},this.ENVELOPE_SERIALIZERS,i.a,r,o,["lowerCorner","upperCorner"],this)},t.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(e,t,o){var n=t[t.length-1].node;return Object(i.c)("http://www.opengis.net/gml",p[n.nodeName])},t}(r.b);f.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:Object(i.p)(f.prototype.readFlatCoordinates)}},f.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:f.prototype.innerBoundaryIsParser,outerBoundaryIs:f.prototype.outerBoundaryIsParser}},f.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:Object(i.k)(f.prototype.readFlatCoordinates)}},f.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:Object(i.p)(r.b.prototype.readPoint),MultiPoint:Object(i.p)(r.b.prototype.readMultiPoint),LineString:Object(i.p)(r.b.prototype.readLineString),MultiLineString:Object(i.p)(r.b.prototype.readMultiLineString),LinearRing:Object(i.p)(r.b.prototype.readLinearRing),Polygon:Object(i.p)(r.b.prototype.readPolygon),MultiPolygon:Object(i.p)(r.b.prototype.readMultiPolygon),Box:Object(i.p)(f.prototype.readBox)}},f.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:Object(i.m)(f.prototype.writeCurveOrLineString),MultiCurve:Object(i.m)(f.prototype.writeMultiCurveOrLineString),Point:Object(i.m)(f.prototype.writePoint),MultiPoint:Object(i.m)(f.prototype.writeMultiPoint),LineString:Object(i.m)(f.prototype.writeCurveOrLineString),MultiLineString:Object(i.m)(f.prototype.writeMultiCurveOrLineString),LinearRing:Object(i.m)(f.prototype.writeLinearRing),Polygon:Object(i.m)(f.prototype.writeSurfaceOrPolygon),MultiPolygon:Object(i.m)(f.prototype.writeMultiSurfaceOrPolygon),Surface:Object(i.m)(f.prototype.writeSurfaceOrPolygon),MultiSurface:Object(i.m)(f.prototype.writeMultiSurfaceOrPolygon),Envelope:Object(i.m)(f.prototype.writeEnvelope)}},f.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:Object(i.m)(f.prototype.writeLineStringOrCurveMember),curveMember:Object(i.m)(f.prototype.writeLineStringOrCurveMember)}},f.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{outerBoundaryIs:Object(i.m)(f.prototype.writeRing),innerBoundaryIs:Object(i.m)(f.prototype.writeRing)}},f.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:Object(i.m)(f.prototype.writePointMember)}},f.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:Object(i.m)(f.prototype.writeSurfaceOrPolygonMember),polygonMember:Object(i.m)(f.prototype.writeSurfaceOrPolygonMember)}},f.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:Object(i.m)(u.n),upperCorner:Object(i.m)(u.n)}},t.a=f},"./node_modules/ol/format/GML3.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/format/GML2.js"),i=o("./node_modules/ol/format/GMLBase.js"),s=o("./node_modules/ol/geom/GeometryLayout.js"),a=o("./node_modules/ol/geom/LineString.js"),l=o("./node_modules/ol/geom/MultiLineString.js"),c=o("./node_modules/ol/geom/MultiPolygon.js"),u=o("./node_modules/ol/geom/Polygon.js"),d=o("./node_modules/ol/xml.js"),h=o("./node_modules/ol/obj.js"),p=o("./node_modules/ol/extent.js"),f=o("./node_modules/ol/array.js"),m=o("./node_modules/ol/proj.js"),g=o("./node_modules/ol/format/xsd.js"),y=o("./node_modules/ol/format/Feature.js"),v=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),_=i.a+" http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",b={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},w=function(e){function t(t){var o=this,n=t||{};return(o=e.call(this,n)||this).surface_=void 0!==n.surface&&n.surface,o.curve_=void 0!==n.curve&&n.curve,o.multiCurve_=void 0===n.multiCurve||n.multiCurve,o.multiSurface_=void 0===n.multiSurface||n.multiSurface,o.schemaLocation=n.schemaLocation?n.schemaLocation:_,o.hasZ=void 0!==n.hasZ&&n.hasZ,o}return v(t,e),t.prototype.readMultiCurve=function(e,t){var o=Object(d.v)([],this.MULTICURVE_PARSERS,e,t,this);return o?new l.a(o):void 0},t.prototype.readMultiSurface=function(e,t){var o=Object(d.v)([],this.MULTISURFACE_PARSERS,e,t,this);if(o)return new c.a(o)},t.prototype.curveMemberParser=function(e,t){Object(d.u)(this.CURVEMEMBER_PARSERS,e,t,this)},t.prototype.surfaceMemberParser=function(e,t){Object(d.u)(this.SURFACEMEMBER_PARSERS,e,t,this)},t.prototype.readPatch=function(e,t){return Object(d.v)([null],this.PATCHES_PARSERS,e,t,this)},t.prototype.readSegment=function(e,t){return Object(d.v)([null],this.SEGMENTS_PARSERS,e,t,this)},t.prototype.readPolygonPatch=function(e,t){return Object(d.v)([null],this.FLAT_LINEAR_RINGS_PARSERS,e,t,this)},t.prototype.readLineStringSegment=function(e,t){return Object(d.v)([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,e,t,this)},t.prototype.interiorParser=function(e,t){var o=Object(d.v)(void 0,this.RING_PARSERS,e,t,this);o&&t[t.length-1].push(o)},t.prototype.exteriorParser=function(e,t){var o=Object(d.v)(void 0,this.RING_PARSERS,e,t,this);o&&(t[t.length-1][0]=o)},t.prototype.readSurface=function(e,t){var o=Object(d.v)([null],this.SURFACE_PARSERS,e,t,this);if(o&&o[0]){var n,r=o[0],i=[r.length],a=void 0;for(a=1,n=o.length;a<n;++a)Object(f.c)(r,o[a]),i.push(r.length);return new u.b(r,s.a.XYZ,i)}},t.prototype.readCurve=function(e,t){var o=Object(d.v)([null],this.CURVE_PARSERS,e,t,this);return o?new a.a(o,s.a.XYZ):void 0},t.prototype.readEnvelope=function(e,t){var o=Object(d.v)([null],this.ENVELOPE_PARSERS,e,t,this);return Object(p.l)(o[1][0],o[1][1],o[2][0],o[2][1])},t.prototype.readFlatPos=function(e,t){for(var o,n=Object(d.d)(e,!1),r=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,i=[];o=r.exec(n);)i.push(parseFloat(o[1])),n=n.substr(o[0].length);if(""===n){var s=t[0].srsName,a="enu";if(s)a=Object(m.t)(s).getAxisOrientation();if("neu"===a){var l,c=void 0;for(c=0,l=i.length;c<l;c+=3){var u=i[c],h=i[c+1];i[c]=h,i[c+1]=u}}var p=i.length;if(2==p&&i.push(0),0!==p)return i}},t.prototype.readFlatPosList=function(e,t){var o=Object(d.d)(e,!1).replace(/^\s*|\s*$/g,""),n=t[0],r=n.srsName,i=n.srsDimension,s="enu";r&&(s=Object(m.t)(r).getAxisOrientation());var a,l,c,u=o.split(/\s+/),h=2;e.getAttribute("srsDimension")?h=Object(g.f)(e.getAttribute("srsDimension")):e.getAttribute("dimension")?h=Object(g.f)(e.getAttribute("dimension")):e.parentNode.getAttribute("srsDimension")?h=Object(g.f)(e.parentNode.getAttribute("srsDimension")):i&&(h=Object(g.f)(i));for(var p=[],f=0,y=u.length;f<y;f+=h)a=parseFloat(u[f]),l=parseFloat(u[f+1]),c=3===h?parseFloat(u[f+2]):0,"en"===s.substr(0,2)?p.push(a,l,c):p.push(l,a,c);return p},t.prototype.writePos_=function(e,t,o){var n=o[o.length-1],r=n.hasZ,i=r?"3":"2";e.setAttribute("srsDimension",i);var s=n.srsName,a="enu";s&&(a=Object(m.t)(s).getAxisOrientation());var l,c=t.getCoordinates();(l="en"===a.substr(0,2)?c[0]+" "+c[1]:c[1]+" "+c[0],r)&&(l+=" "+(c[2]||0));Object(g.n)(e,l)},t.prototype.getCoords_=function(e,t,o){var n="enu";t&&(n=Object(m.t)(t).getAxisOrientation());var r="en"===n.substr(0,2)?e[0]+" "+e[1]:e[1]+" "+e[0];o&&(r+=" "+(e[2]||0));return r},t.prototype.writePosList_=function(e,t,o){var n=o[o.length-1],r=n.hasZ,i=r?"3":"2";e.setAttribute("srsDimension",i);for(var s,a=n.srsName,l=t.getCoordinates(),c=l.length,u=new Array(c),d=0;d<c;++d)s=l[d],u[d]=this.getCoords_(s,a,r);Object(g.n)(e,u.join(" "))},t.prototype.writePoint=function(e,t,o){var n=o[o.length-1].srsName;n&&e.setAttribute("srsName",n);var r=Object(d.c)(e.namespaceURI,"pos");e.appendChild(r),this.writePos_(r,t,o)},t.prototype.writeEnvelope=function(e,t,o){var n=o[o.length-1].srsName;n&&e.setAttribute("srsName",n);var r=[t[0]+" "+t[1],t[2]+" "+t[3]];Object(d.w)({node:e},this.ENVELOPE_SERIALIZERS,d.a,r,o,["lowerCorner","upperCorner"],this)},t.prototype.writeLinearRing=function(e,t,o){var n=o[o.length-1].srsName;n&&e.setAttribute("srsName",n);var r=Object(d.c)(e.namespaceURI,"posList");e.appendChild(r),this.writePosList_(r,t,o)},t.prototype.RING_NODE_FACTORY_=function(e,t,o){var n=t[t.length-1],r=n.node,i=n.exteriorWritten;return void 0===i&&(n.exteriorWritten=!0),Object(d.c)(r.namespaceURI,void 0!==i?"interior":"exterior")},t.prototype.writeSurfaceOrPolygon=function(e,t,o){var n=o[o.length-1],r=n.hasZ,i=n.srsName;if("PolygonPatch"!==e.nodeName&&i&&e.setAttribute("srsName",i),"Polygon"===e.nodeName||"PolygonPatch"===e.nodeName){var s=t.getLinearRings();Object(d.w)({node:e,hasZ:r,srsName:i},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,s,o,void 0,this)}else if("Surface"===e.nodeName){var a=Object(d.c)(e.namespaceURI,"patches");e.appendChild(a),this.writeSurfacePatches_(a,t,o)}},t.prototype.writeCurveOrLineString=function(e,t,o){var n=o[o.length-1].srsName;if("LineStringSegment"!==e.nodeName&&n&&e.setAttribute("srsName",n),"LineString"===e.nodeName||"LineStringSegment"===e.nodeName){var r=Object(d.c)(e.namespaceURI,"posList");e.appendChild(r),this.writePosList_(r,t,o)}else if("Curve"===e.nodeName){var i=Object(d.c)(e.namespaceURI,"segments");e.appendChild(i),this.writeCurveSegments_(i,t,o)}},t.prototype.writeMultiSurfaceOrPolygon=function(e,t,o){var n=o[o.length-1],r=n.hasZ,i=n.srsName,s=n.surface;i&&e.setAttribute("srsName",i);var a=t.getPolygons();Object(d.w)({node:e,hasZ:r,srsName:i,surface:s},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,a,o,void 0,this)},t.prototype.writeMultiPoint=function(e,t,o){var n=o[o.length-1],r=n.srsName,i=n.hasZ;r&&e.setAttribute("srsName",r);var s=t.getPoints();Object(d.w)({node:e,hasZ:i,srsName:r},this.POINTMEMBER_SERIALIZERS,Object(d.r)("pointMember"),s,o,void 0,this)},t.prototype.writeMultiCurveOrLineString=function(e,t,o){var n=o[o.length-1],r=n.hasZ,i=n.srsName,s=n.curve;i&&e.setAttribute("srsName",i);var a=t.getLineStrings();Object(d.w)({node:e,hasZ:r,srsName:i,curve:s},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,a,o,void 0,this)},t.prototype.writeRing=function(e,t,o){var n=Object(d.c)(e.namespaceURI,"LinearRing");e.appendChild(n),this.writeLinearRing(n,t,o)},t.prototype.writeSurfaceOrPolygonMember=function(e,t,o){var n=this.GEOMETRY_NODE_FACTORY_(t,o);n&&(e.appendChild(n),this.writeSurfaceOrPolygon(n,t,o))},t.prototype.writePointMember=function(e,t,o){var n=Object(d.c)(e.namespaceURI,"Point");e.appendChild(n),this.writePoint(n,t,o)},t.prototype.writeLineStringOrCurveMember=function(e,t,o){var n=this.GEOMETRY_NODE_FACTORY_(t,o);n&&(e.appendChild(n),this.writeCurveOrLineString(n,t,o))},t.prototype.writeSurfacePatches_=function(e,t,o){var n=Object(d.c)(e.namespaceURI,"PolygonPatch");e.appendChild(n),this.writeSurfaceOrPolygon(n,t,o)},t.prototype.writeCurveSegments_=function(e,t,o){var n=Object(d.c)(e.namespaceURI,"LineStringSegment");e.appendChild(n),this.writeCurveOrLineString(n,t,o)},t.prototype.writeGeometryElement=function(e,t,o){var n,r=o[o.length-1],i=Object(h.a)({},r);i.node=e,n=Array.isArray(t)?Object(y.b)(t,r):Object(y.c)(t,!0,r),Object(d.w)(i,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[n],o,void 0,this)},t.prototype.writeFeatureElement=function(e,t,o){var n=t.getId();n&&e.setAttribute("fid",n);var r=o[o.length-1],i=r.featureNS,s=t.getGeometryName();r.serializers||(r.serializers={},r.serializers[i]={});var a=[],l=[];if(t.hasProperties()){var c=t.getProperties();for(var u in c){var p=c[u];null!==p&&(a.push(u),l.push(p),u==s||"function"==typeof p.getSimplifiedGeometry?u in r.serializers[i]||(r.serializers[i][u]=Object(d.m)(this.writeGeometryElement,this)):u in r.serializers[i]||(r.serializers[i][u]=Object(d.m)(g.n)))}}var f=Object(h.a)({},r);f.node=e,Object(d.w)(f,r.serializers,Object(d.r)(void 0,i),l,o,a)},t.prototype.writeFeatureMembers_=function(e,t,o){var n=o[o.length-1],r=n.featureType,i=n.featureNS,s={};s[i]={},s[i][r]=Object(d.m)(this.writeFeatureElement,this);var a=Object(h.a)({},n);a.node=e,Object(d.w)(a,s,Object(d.r)(r,i),t,o)},t.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(e,t,o){var n=t[t.length-1].node;return Object(d.c)(this.namespace,b[n.nodeName])},t.prototype.GEOMETRY_NODE_FACTORY_=function(e,t,o){var n,r=t[t.length-1],i=r.multiSurface,s=r.surface,a=r.curve,l=r.multiCurve;return Array.isArray(e)?n="Envelope":"MultiPolygon"===(n=e.getType())&&!0===i?n="MultiSurface":"Polygon"===n&&!0===s?n="Surface":"LineString"===n&&!0===a?n="Curve":"MultiLineString"===n&&!0===l&&(n="MultiCurve"),Object(d.c)(this.namespace,n)},t.prototype.writeGeometryNode=function(e,t){t=this.adaptOptions(t);var o=Object(d.c)(this.namespace,"geom"),n={node:o,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};return t&&Object(h.a)(n,t),this.writeGeometryElement(o,e,[n]),o},t.prototype.writeFeaturesNode=function(e,t){t=this.adaptOptions(t);var o=Object(d.c)(this.namespace,"featureMembers");o.setAttributeNS(d.b,"xsi:schemaLocation",this.schemaLocation);var n={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};return t&&Object(h.a)(n,t),this.writeFeatureMembers_(o,e,[n]),o},t}(i.b);w.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:Object(d.p)(w.prototype.readFlatPos),posList:Object(d.p)(w.prototype.readFlatPosList),coordinates:Object(d.p)(r.a.prototype.readFlatCoordinates)}},w.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:w.prototype.interiorParser,exterior:w.prototype.exteriorParser}},w.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:Object(d.p)(i.b.prototype.readPoint),MultiPoint:Object(d.p)(i.b.prototype.readMultiPoint),LineString:Object(d.p)(i.b.prototype.readLineString),MultiLineString:Object(d.p)(i.b.prototype.readMultiLineString),LinearRing:Object(d.p)(i.b.prototype.readLinearRing),Polygon:Object(d.p)(i.b.prototype.readPolygon),MultiPolygon:Object(d.p)(i.b.prototype.readMultiPolygon),Surface:Object(d.p)(w.prototype.readSurface),MultiSurface:Object(d.p)(w.prototype.readMultiSurface),Curve:Object(d.p)(w.prototype.readCurve),MultiCurve:Object(d.p)(w.prototype.readMultiCurve),Envelope:Object(d.p)(w.prototype.readEnvelope)}},w.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml":{curveMember:Object(d.k)(w.prototype.curveMemberParser),curveMembers:Object(d.k)(w.prototype.curveMemberParser)}},w.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml":{surfaceMember:Object(d.k)(w.prototype.surfaceMemberParser),surfaceMembers:Object(d.k)(w.prototype.surfaceMemberParser)}},w.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:Object(d.k)(i.b.prototype.readLineString),Curve:Object(d.k)(w.prototype.readCurve)}},w.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:Object(d.k)(i.b.prototype.readPolygon),Surface:Object(d.k)(w.prototype.readSurface)}},w.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml":{patches:Object(d.p)(w.prototype.readPatch)}},w.prototype.CURVE_PARSERS={"http://www.opengis.net/gml":{segments:Object(d.p)(w.prototype.readSegment)}},w.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml":{lowerCorner:Object(d.k)(w.prototype.readFlatPosList),upperCorner:Object(d.k)(w.prototype.readFlatPosList)}},w.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml":{PolygonPatch:Object(d.p)(w.prototype.readPolygonPatch)}},w.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml":{LineStringSegment:Object(d.p)(w.prototype.readLineStringSegment)}},w.prototype.writeFeatures,w.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{exterior:Object(d.m)(w.prototype.writeRing),interior:Object(d.m)(w.prototype.writeRing)}},w.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:Object(d.m)(g.n),upperCorner:Object(d.m)(g.n)}},w.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:Object(d.m)(w.prototype.writeSurfaceOrPolygonMember),polygonMember:Object(d.m)(w.prototype.writeSurfaceOrPolygonMember)}},w.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:Object(d.m)(w.prototype.writePointMember)}},w.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:Object(d.m)(w.prototype.writeLineStringOrCurveMember),curveMember:Object(d.m)(w.prototype.writeLineStringOrCurveMember)}},w.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:Object(d.m)(w.prototype.writeCurveOrLineString),MultiCurve:Object(d.m)(w.prototype.writeMultiCurveOrLineString),Point:Object(d.m)(w.prototype.writePoint),MultiPoint:Object(d.m)(w.prototype.writeMultiPoint),LineString:Object(d.m)(w.prototype.writeCurveOrLineString),MultiLineString:Object(d.m)(w.prototype.writeMultiCurveOrLineString),LinearRing:Object(d.m)(w.prototype.writeLinearRing),Polygon:Object(d.m)(w.prototype.writeSurfaceOrPolygon),MultiPolygon:Object(d.m)(w.prototype.writeMultiSurfaceOrPolygon),Surface:Object(d.m)(w.prototype.writeSurfaceOrPolygon),MultiSurface:Object(d.m)(w.prototype.writeMultiSurfaceOrPolygon),Envelope:Object(d.m)(w.prototype.writeEnvelope)}},t.a=w},"./node_modules/ol/format/GMLBase.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return b}));var n,r=o("./node_modules/ol/Feature.js"),i=o("./node_modules/ol/geom/GeometryLayout.js"),s=o("./node_modules/ol/geom/LineString.js"),a=o("./node_modules/ol/geom/LinearRing.js"),l=o("./node_modules/ol/geom/MultiLineString.js"),c=o("./node_modules/ol/geom/MultiPoint.js"),u=o("./node_modules/ol/geom/MultiPolygon.js"),d=o("./node_modules/ol/geom/Point.js"),h=o("./node_modules/ol/geom/Polygon.js"),p=o("./node_modules/ol/format/XMLFeature.js"),f=o("./node_modules/ol/obj.js"),m=o("./node_modules/ol/array.js"),g=o("./node_modules/ol/xml.js"),y=o("./node_modules/ol/proj.js"),v=o("./node_modules/ol/format/Feature.js"),_=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),b="http://www.opengis.net/gml",w=/^[\s\xa0]*$/,E=function(e){function t(t){var o=e.call(this)||this,n=t||{};return o.featureType=n.featureType,o.featureNS=n.featureNS,o.srsName=n.srsName,o.schemaLocation="",o.FEATURE_COLLECTION_PARSERS={},o.FEATURE_COLLECTION_PARSERS[o.namespace]={featureMember:Object(g.k)(o.readFeaturesInternal),featureMembers:Object(g.p)(o.readFeaturesInternal)},o.supportedMediaTypes=["application/gml+xml"],o}return _(t,e),t.prototype.readFeaturesInternal=function(e,t){var o=e.localName,n=null;if("FeatureCollection"==o)n=Object(g.v)([],this.FEATURE_COLLECTION_PARSERS,e,t,this);else if("featureMembers"==o||"featureMember"==o||"member"==o){var r=t[0],i=r.featureType,s=r.featureNS;if(!i&&e.childNodes){i=[],s={};for(var a=0,l=e.childNodes.length;a<l;++a){var c=e.childNodes[a];if(1===c.nodeType){var u=c.nodeName.split(":").pop();if(-1===i.indexOf(u)){var d="",h=0,p=c.namespaceURI;for(var f in s){if(s[f]===p){d=f;break}++h}d||(s[d="p"+h]=p),i.push(d+":"+u)}}}"featureMember"!=o&&(r.featureType=i,r.featureNS=s)}if("string"==typeof s){var m=s;(s={}).p0=m}var y={},v=Array.isArray(i)?i:[i];for(var _ in s){var b={};for(a=0,l=v.length;a<l;++a){(-1===v[a].indexOf(":")?"p0":v[a].split(":")[0])===_&&(b[v[a].split(":").pop()]="featureMembers"==o?Object(g.k)(this.readFeatureElement,this):Object(g.p)(this.readFeatureElement,this))}y[s[_]]=b}n="featureMember"==o||"member"==o?Object(g.v)(void 0,y,e,t):Object(g.v)([],y,e,t)}return null===n&&(n=[]),n},t.prototype.readGeometryElement=function(e,t){var o=t[0];o.srsName=e.firstElementChild.getAttribute("srsName"),o.srsDimension=e.firstElementChild.getAttribute("srsDimension");var n=Object(g.v)(null,this.GEOMETRY_PARSERS,e,t,this);return n?Array.isArray(n)?Object(v.b)(n,o):Object(v.c)(n,!1,o):void 0},t.prototype.readFeatureElementInternal=function(e,t,o){for(var n,i={},s=e.firstElementChild;s;s=s.nextElementSibling){var a=void 0,l=s.localName;0===s.childNodes.length||1===s.childNodes.length&&(3===s.firstChild.nodeType||4===s.firstChild.nodeType)?(a=Object(g.d)(s,!1),w.test(a)&&(a=void 0)):(o&&(a=this.readGeometryElement(s,t)),a?"boundedBy"!==l&&(n=l):a=this.readFeatureElementInternal(s,t,!1)),i[l]?(i[l]instanceof Array||(i[l]=[i[l]]),i[l].push(a)):i[l]=a;var c=s.attributes.length;if(c>0){i[l]={_content_:i[l]};for(var u=0;u<c;u++){var d=s.attributes[u].name;i[l][d]=s.attributes[u].value}}}if(o){var h=new r.b(i);n&&h.setGeometryName(n);var p=e.getAttribute("fid")||Object(g.f)(e,this.namespace,"id");return p&&h.setId(p),h}return i},t.prototype.readFeatureElement=function(e,t){return this.readFeatureElementInternal(e,t,!0)},t.prototype.readPoint=function(e,t){var o=this.readFlatCoordinatesFromNode(e,t);if(o)return new d.a(o,i.a.XYZ)},t.prototype.readMultiPoint=function(e,t){var o=Object(g.v)([],this.MULTIPOINT_PARSERS,e,t,this);return o?new c.a(o):void 0},t.prototype.readMultiLineString=function(e,t){var o=Object(g.v)([],this.MULTILINESTRING_PARSERS,e,t,this);if(o)return new l.a(o)},t.prototype.readMultiPolygon=function(e,t){var o=Object(g.v)([],this.MULTIPOLYGON_PARSERS,e,t,this);if(o)return new u.a(o)},t.prototype.pointMemberParser=function(e,t){Object(g.u)(this.POINTMEMBER_PARSERS,e,t,this)},t.prototype.lineStringMemberParser=function(e,t){Object(g.u)(this.LINESTRINGMEMBER_PARSERS,e,t,this)},t.prototype.polygonMemberParser=function(e,t){Object(g.u)(this.POLYGONMEMBER_PARSERS,e,t,this)},t.prototype.readLineString=function(e,t){var o=this.readFlatCoordinatesFromNode(e,t);return o?new s.a(o,i.a.XYZ):void 0},t.prototype.readFlatLinearRing=function(e,t){var o=Object(g.v)(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,e,t,this);return o||void 0},t.prototype.readLinearRing=function(e,t){var o=this.readFlatCoordinatesFromNode(e,t);if(o)return new a.a(o,i.a.XYZ)},t.prototype.readPolygon=function(e,t){var o=Object(g.v)([null],this.FLAT_LINEAR_RINGS_PARSERS,e,t,this);if(o&&o[0]){var n,r=o[0],s=[r.length],a=void 0;for(a=1,n=o.length;a<n;++a)Object(m.c)(r,o[a]),s.push(r.length);return new h.b(r,i.a.XYZ,s)}},t.prototype.readFlatCoordinatesFromNode=function(e,t){return Object(g.v)(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,e,t,this)},t.prototype.readGeometryFromNode=function(e,t){var o=this.readGeometryElement(e,[this.getReadOptions(e,t||{})]);return o||null},t.prototype.readFeaturesFromNode=function(e,t){var o={featureType:this.featureType,featureNS:this.featureNS};return t&&Object(f.a)(o,this.getReadOptions(e,t)),this.readFeaturesInternal(e,[o])||[]},t.prototype.readProjectionFromNode=function(e){return Object(y.t)(this.srsName?this.srsName:e.firstElementChild.getAttribute("srsName"))},t}(p.a);E.prototype.namespace=b,E.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}},E.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}},E.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}},E.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml":{pointMember:Object(g.k)(E.prototype.pointMemberParser),pointMembers:Object(g.k)(E.prototype.pointMemberParser)}},E.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml":{lineStringMember:Object(g.k)(E.prototype.lineStringMemberParser),lineStringMembers:Object(g.k)(E.prototype.lineStringMemberParser)}},E.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml":{polygonMember:Object(g.k)(E.prototype.polygonMemberParser),polygonMembers:Object(g.k)(E.prototype.polygonMemberParser)}},E.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml":{Point:Object(g.k)(E.prototype.readFlatCoordinatesFromNode)}},E.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:Object(g.k)(E.prototype.readLineString)}},E.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:Object(g.k)(E.prototype.readPolygon)}},E.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:Object(g.p)(E.prototype.readFlatLinearRing)}},t.b=E},"./node_modules/ol/format/GPX.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/Feature.js"),i=o("./node_modules/ol/geom/GeometryLayout.js"),s=o("./node_modules/ol/geom/GeometryType.js"),a=o("./node_modules/ol/geom/LineString.js"),l=o("./node_modules/ol/geom/MultiLineString.js"),c=o("./node_modules/ol/geom/Point.js"),u=o("./node_modules/ol/format/XMLFeature.js"),d=o("./node_modules/ol/xml.js"),h=o("./node_modules/ol/proj.js"),p=o("./node_modules/ol/array.js"),f=o("./node_modules/ol/format/xsd.js"),m=o("./node_modules/ol/format/Feature.js"),g=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),y=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],v={rte:H,trk:Y,wpt:X},_=Object(d.s)(y,{rte:Object(d.k)(H),trk:Object(d.k)(Y),wpt:Object(d.k)(X)}),b=Object(d.s)(y,{text:Object(d.o)(f.h,"linkText"),type:Object(d.o)(f.h,"linkType")}),w=Object(d.s)(y,{rte:Object(d.m)((function(e,t,o){var n=o[0],r=t.getProperties(),i={node:e};i.properties=r;var a=t.getGeometry();if(a.getType()==s.a.LINE_STRING){var l=Object(m.c)(a,!0,n);i.geometryLayout=l.getLayout(),r.rtept=l.getCoordinates()}var c=o[o.length-1].node,u=M[c.namespaceURI],h=Object(d.q)(r,u);Object(d.w)(i,I,d.a,h,o,u)})),trk:Object(d.m)((function(e,t,o){var n=o[0],r=t.getProperties(),i={node:e};i.properties=r;var a=t.getGeometry();if(a.getType()==s.a.MULTI_LINE_STRING){var l=Object(m.c)(a,!0,n);r.trkseg=l.getLineStrings()}var c=o[o.length-1].node,u=L[c.namespaceURI],h=Object(d.q)(r,u);Object(d.w)(i,k,d.a,h,o,u)})),wpt:Object(d.m)((function(e,t,o){var n=o[0],r=o[o.length-1];r.properties=t.getProperties();var i=t.getGeometry();if(i.getType()==s.a.POINT){var a=Object(m.c)(i,!0,n);r.geometryLayout=a.getLayout(),K(e,a.getCoordinates(),o)}}))}),E=function(e){function t(t){var o=e.call(this)||this,n=t||{};return o.dataProjection=Object(h.t)("EPSG:4326"),o.readExtensions_=n.readExtensions,o}return g(t,e),t.prototype.handleReadExtensions_=function(e){e||(e=[]);for(var t=0,o=e.length;t<o;++t){var n=e[t];if(this.readExtensions_){var r=n.get("extensionsNode_")||null;this.readExtensions_(n,r)}n.set("extensionsNode_",void 0)}},t.prototype.readFeatureFromNode=function(e,t){if(!Object(p.f)(y,e.namespaceURI))return null;var o=v[e.localName];if(!o)return null;var n=o(e,[this.getReadOptions(e,t)]);return n?(this.handleReadExtensions_([n]),n):null},t.prototype.readFeaturesFromNode=function(e,t){if(!Object(p.f)(y,e.namespaceURI))return[];if("gpx"==e.localName){var o=Object(d.v)([],_,e,[this.getReadOptions(e,t)]);return o?(this.handleReadExtensions_(o),o):[]}return[]},t.prototype.writeFeaturesNode=function(e,t){t=this.adaptOptions(t);var o=Object(d.c)("http://www.topografix.com/GPX/1/1","gpx");return o.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",d.b),o.setAttributeNS(d.b,"xsi:schemaLocation","http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"),o.setAttribute("version","1.1"),o.setAttribute("creator","OpenLayers"),Object(d.w)({node:o},w,B,e,[t]),o},t}(u.a),O=Object(d.s)(y,{name:Object(d.o)(f.h),cmt:Object(d.o)(f.h),desc:Object(d.o)(f.h),src:Object(d.o)(f.h),link:W,number:Object(d.o)(f.g),extensions:q,type:Object(d.o)(f.h),rtept:function(e,t){var o=Object(d.v)({},S,e,t);if(o){var n=t[t.length-1],r=n.flatCoordinates,i=n.layoutOptions;z(r,i,e,o)}}}),S=Object(d.s)(y,{ele:Object(d.o)(f.d),time:Object(d.o)(f.c)}),x=Object(d.s)(y,{name:Object(d.o)(f.h),cmt:Object(d.o)(f.h),desc:Object(d.o)(f.h),src:Object(d.o)(f.h),link:W,number:Object(d.o)(f.g),type:Object(d.o)(f.h),extensions:q,trkseg:function(e,t){var o=t[t.length-1];Object(d.u)(C,e,t);var n=o.flatCoordinates;o.ends.push(n.length)}}),C=Object(d.s)(y,{trkpt:function(e,t){var o=Object(d.v)({},j,e,t);if(o){var n=t[t.length-1],r=n.flatCoordinates,i=n.layoutOptions;z(r,i,e,o)}}}),j=Object(d.s)(y,{ele:Object(d.o)(f.d),time:Object(d.o)(f.c)}),P=Object(d.s)(y,{ele:Object(d.o)(f.d),time:Object(d.o)(f.c),magvar:Object(d.o)(f.d),geoidheight:Object(d.o)(f.d),name:Object(d.o)(f.h),cmt:Object(d.o)(f.h),desc:Object(d.o)(f.h),src:Object(d.o)(f.h),link:W,sym:Object(d.o)(f.h),type:Object(d.o)(f.h),fix:Object(d.o)(f.h),sat:Object(d.o)(f.g),hdop:Object(d.o)(f.d),vdop:Object(d.o)(f.d),pdop:Object(d.o)(f.d),ageofdgpsdata:Object(d.o)(f.d),dgpsid:Object(d.o)(f.g),extensions:q}),T=["text","type"],A=Object(d.s)(y,{text:Object(d.m)(f.n),type:Object(d.m)(f.n)}),M=Object(d.s)(y,["name","cmt","desc","src","link","number","type","rtept"]),I=Object(d.s)(y,{name:Object(d.m)(f.n),cmt:Object(d.m)(f.n),desc:Object(d.m)(f.n),src:Object(d.m)(f.n),link:Object(d.m)(Z),number:Object(d.m)(f.m),type:Object(d.m)(f.n),rtept:Object(d.l)(Object(d.m)(K))}),R=Object(d.s)(y,["ele","time"]),L=Object(d.s)(y,["name","cmt","desc","src","link","number","type","trkseg"]),k=Object(d.s)(y,{name:Object(d.m)(f.n),cmt:Object(d.m)(f.n),desc:Object(d.m)(f.n),src:Object(d.m)(f.n),link:Object(d.m)(Z),number:Object(d.m)(f.m),type:Object(d.m)(f.n),trkseg:Object(d.l)(Object(d.m)((function(e,t,o){var n={node:e};n.geometryLayout=t.getLayout(),n.properties={},Object(d.w)(n,N,G,t.getCoordinates(),o)})))}),G=Object(d.r)("trkpt"),N=Object(d.s)(y,{trkpt:Object(d.m)(K)}),D=Object(d.s)(y,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),F=Object(d.s)(y,{ele:Object(d.m)(f.l),time:Object(d.m)(f.k),magvar:Object(d.m)(f.l),geoidheight:Object(d.m)(f.l),name:Object(d.m)(f.n),cmt:Object(d.m)(f.n),desc:Object(d.m)(f.n),src:Object(d.m)(f.n),link:Object(d.m)(Z),sym:Object(d.m)(f.n),type:Object(d.m)(f.n),fix:Object(d.m)(f.n),sat:Object(d.m)(f.m),hdop:Object(d.m)(f.l),vdop:Object(d.m)(f.l),pdop:Object(d.m)(f.l),ageofdgpsdata:Object(d.m)(f.l),dgpsid:Object(d.m)(f.m)}),U={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function B(e,t,o){var n=e.getGeometry();if(n){var r=U[n.getType()];if(r){var i=t[t.length-1].node;return Object(d.c)(i.namespaceURI,r)}}}function z(e,t,o,n){return e.push(parseFloat(o.getAttribute("lon")),parseFloat(o.getAttribute("lat"))),"ele"in n?(e.push(n.ele),delete n.ele,t.hasZ=!0):e.push(0),"time"in n?(e.push(n.time),delete n.time,t.hasM=!0):e.push(0),e}function V(e,t,o){var n=i.a.XY,r=2;if(e.hasZ&&e.hasM?(n=i.a.XYZM,r=4):e.hasZ?(n=i.a.XYZ,r=3):e.hasM&&(n=i.a.XYM,r=3),4!==r){for(var s=0,a=t.length/4;s<a;s++)t[s*r]=t[4*s],t[s*r+1]=t[4*s+1],e.hasZ&&(t[s*r+2]=t[4*s+2]),e.hasM&&(t[s*r+2]=t[4*s+3]);if(t.length=t.length/4*r,o)for(s=0,a=o.length;s<a;s++)o[s]=o[s]/4*r}return n}function W(e,t){var o=t[t.length-1],n=e.getAttribute("href");null!==n&&(o.link=n),Object(d.u)(b,e,t)}function q(e,t){t[t.length-1].extensionsNode_=e}function H(e,t){var o=t[0],n=Object(d.v)({flatCoordinates:[],layoutOptions:{}},O,e,t);if(n){var i=n.flatCoordinates;delete n.flatCoordinates;var s=n.layoutOptions;delete n.layoutOptions;var l=V(s,i),c=new a.a(i,l);Object(m.c)(c,!1,o);var u=new r.b(c);return u.setProperties(n,!0),u}}function Y(e,t){var o=t[0],n=Object(d.v)({flatCoordinates:[],ends:[],layoutOptions:{}},x,e,t);if(n){var i=n.flatCoordinates;delete n.flatCoordinates;var s=n.ends;delete n.ends;var a=n.layoutOptions;delete n.layoutOptions;var c=V(a,i,s),u=new l.a(i,c,s);Object(m.c)(u,!1,o);var h=new r.b(u);return h.setProperties(n,!0),h}}function X(e,t){var o=t[0],n=Object(d.v)({},P,e,t);if(n){var i={},s=z([],i,e,n),a=V(i,s),l=new c.a(s,a);Object(m.c)(l,!1,o);var u=new r.b(l);return u.setProperties(n,!0),u}}function Z(e,t,o){e.setAttribute("href",t);var n=o[o.length-1].properties,r=[n.linkText,n.linkType];Object(d.w)({node:e},A,d.a,r,o,T)}function K(e,t,o){var n=o[o.length-1],r=n.node.namespaceURI,s=n.properties;switch(e.setAttributeNS(null,"lat",String(t[1])),e.setAttributeNS(null,"lon",String(t[0])),n.geometryLayout){case i.a.XYZM:0!==t[3]&&(s.time=t[3]);case i.a.XYZ:0!==t[2]&&(s.ele=t[2]);break;case i.a.XYM:0!==t[2]&&(s.time=t[2])}var a="rtept"==e.nodeName?R[r]:D[r],l=Object(d.q)(s,a);Object(d.w)({node:e,properties:s},F,d.a,l,o,a)}t.a=E},"./node_modules/ol/format/GeoJSON.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/Feature.js"),i=o("./node_modules/ol/geom/GeometryCollection.js"),s=o("./node_modules/ol/geom/GeometryType.js"),a=o("./node_modules/ol/format/JSONFeature.js"),l=o("./node_modules/ol/geom/LineString.js"),c=o("./node_modules/ol/geom/MultiLineString.js"),u=o("./node_modules/ol/geom/MultiPoint.js"),d=o("./node_modules/ol/geom/MultiPolygon.js"),h=o("./node_modules/ol/geom/Point.js"),p=o("./node_modules/ol/geom/Polygon.js"),f=o("./node_modules/ol/asserts.js"),m=o("./node_modules/ol/obj.js"),g=o("./node_modules/ol/proj.js"),y=o("./node_modules/ol/format/Feature.js"),v=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),_=function(e){function t(t){var o=this,n=t||{};return(o=e.call(this)||this).dataProjection=Object(g.t)(n.dataProjection?n.dataProjection:"EPSG:4326"),n.featureProjection&&(o.defaultFeatureProjection=Object(g.t)(n.featureProjection)),o.geometryName_=n.geometryName,o.extractGeometryName_=n.extractGeometryName,o.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"],o}return v(t,e),t.prototype.readFeatureFromObject=function(e,t){var o=null,n=b((o="Feature"===e.type?e:{type:"Feature",geometry:e,properties:null}).geometry,t),i=new r.b;return this.geometryName_?i.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in o!==void 0&&i.setGeometryName(o.geometry_name),i.setGeometry(n),"id"in o&&i.setId(o.id),o.properties&&i.setProperties(o.properties,!0),i},t.prototype.readFeaturesFromObject=function(e,t){var o=null;if("FeatureCollection"===e.type){o=[];for(var n=e.features,r=0,i=n.length;r<i;++r)o.push(this.readFeatureFromObject(n[r],t))}else o=[this.readFeatureFromObject(e,t)];return o},t.prototype.readGeometryFromObject=function(e,t){return b(e,t)},t.prototype.readProjectionFromObject=function(e){var t,o=e.crs;return o?"name"==o.type?t=Object(g.t)(o.properties.name):"EPSG"===o.type?t=Object(g.t)("EPSG:"+o.properties.code):Object(f.a)(!1,36):t=this.dataProjection,t},t.prototype.writeFeatureObject=function(e,t){t=this.adaptOptions(t);var o={type:"Feature",geometry:null,properties:null},n=e.getId();if(void 0!==n&&(o.id=n),!e.hasProperties())return o;var r=e.getProperties(),i=e.getGeometry();return i&&(o.geometry=w(i,t),delete r[e.getGeometryName()]),Object(m.d)(r)||(o.properties=r),o},t.prototype.writeFeaturesObject=function(e,t){t=this.adaptOptions(t);for(var o=[],n=0,r=e.length;n<r;++n)o.push(this.writeFeatureObject(e[n],t));return{type:"FeatureCollection",features:o}},t.prototype.writeGeometryObject=function(e,t){return w(e,this.adaptOptions(t))},t}(a.a);function b(e,t){if(!e)return null;var o;switch(e.type){case s.a.POINT:o=function(e){return new h.a(e.coordinates)}(e);break;case s.a.LINE_STRING:o=function(e){return new l.a(e.coordinates)}(e);break;case s.a.POLYGON:o=function(e){return new p.b(e.coordinates)}(e);break;case s.a.MULTI_POINT:o=function(e){return new u.a(e.coordinates)}(e);break;case s.a.MULTI_LINE_STRING:o=function(e){return new c.a(e.coordinates)}(e);break;case s.a.MULTI_POLYGON:o=function(e){return new d.a(e.coordinates)}(e);break;case s.a.GEOMETRY_COLLECTION:o=function(e,t){var o=e.geometries.map((function(e){return b(e,t)}));return new i.a(o)}(e);break;default:throw new Error("Unsupported GeoJSON type: "+e.type)}return Object(y.c)(o,!1,t)}function w(e,t){var o,n=(e=Object(y.c)(e,!0,t)).getType();switch(n){case s.a.POINT:o=function(e,t){return{type:"Point",coordinates:e.getCoordinates()}}(e);break;case s.a.LINE_STRING:o=function(e,t){return{type:"LineString",coordinates:e.getCoordinates()}}(e);break;case s.a.POLYGON:o=function(e,t){var o;t&&(o=t.rightHanded);return{type:"Polygon",coordinates:e.getCoordinates(o)}}(e,t);break;case s.a.MULTI_POINT:o=function(e,t){return{type:"MultiPoint",coordinates:e.getCoordinates()}}(e);break;case s.a.MULTI_LINE_STRING:o=function(e,t){return{type:"MultiLineString",coordinates:e.getCoordinates()}}(e);break;case s.a.MULTI_POLYGON:o=function(e,t){var o;t&&(o=t.rightHanded);return{type:"MultiPolygon",coordinates:e.getCoordinates(o)}}(e,t);break;case s.a.GEOMETRY_COLLECTION:o=function(e,t){return{type:"GeometryCollection",geometries:e.getGeometriesArray().map((function(e){var o=Object(m.a)({},t);return delete o.featureProjection,w(e,o)}))}}(e,t);break;case s.a.CIRCLE:o={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+n)}return o}t.a=_},"./node_modules/ol/format/JSONFeature.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/format/Feature.js"),i=o("./node_modules/ol/format/FormatType.js"),s=o("./node_modules/ol/util.js"),a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),l=function(e){function t(){return e.call(this)||this}return a(t,e),t.prototype.getType=function(){return i.a.JSON},t.prototype.readFeature=function(e,t){return this.readFeatureFromObject(c(e),this.getReadOptions(e,t))},t.prototype.readFeatures=function(e,t){return this.readFeaturesFromObject(c(e),this.getReadOptions(e,t))},t.prototype.readFeatureFromObject=function(e,t){return Object(s.b)()},t.prototype.readFeaturesFromObject=function(e,t){return Object(s.b)()},t.prototype.readGeometry=function(e,t){return this.readGeometryFromObject(c(e),this.getReadOptions(e,t))},t.prototype.readGeometryFromObject=function(e,t){return Object(s.b)()},t.prototype.readProjection=function(e){return this.readProjectionFromObject(c(e))},t.prototype.readProjectionFromObject=function(e){return Object(s.b)()},t.prototype.writeFeature=function(e,t){return JSON.stringify(this.writeFeatureObject(e,t))},t.prototype.writeFeatureObject=function(e,t){return Object(s.b)()},t.prototype.writeFeatures=function(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))},t.prototype.writeFeaturesObject=function(e,t){return Object(s.b)()},t.prototype.writeGeometry=function(e,t){return JSON.stringify(this.writeGeometryObject(e,t))},t.prototype.writeGeometryObject=function(e,t){return Object(s.b)()},t}(r.a);function c(e){if("string"==typeof e){var t=JSON.parse(e);return t||null}return null!==e?e:null}t.a=l},"./node_modules/ol/format/KML.js":function(e,t,o){"use strict";o.d(t,"b",(function(){return X})),o.d(t,"c",(function(){return J})),o.d(t,"d",(function(){return ee})),o.d(t,"g",(function(){return oe})),o.d(t,"e",(function(){return re})),o.d(t,"f",(function(){return ae})),o.d(t,"h",(function(){return he}));var n,r,i,s,a,l,c,u=o("./node_modules/ol/Feature.js"),d=o("./node_modules/ol/style/Fill.js"),h=o("./node_modules/ol/geom/GeometryCollection.js"),p=o("./node_modules/ol/geom/GeometryLayout.js"),f=o("./node_modules/ol/geom/GeometryType.js"),m=o("./node_modules/ol/style/Icon.js"),g=o("./node_modules/ol/style/IconAnchorUnits.js"),y=o("./node_modules/ol/style/IconOrigin.js"),v=o("./node_modules/ol/ImageState.js"),_=o("./node_modules/ol/geom/LineString.js"),b=o("./node_modules/ol/geom/MultiLineString.js"),w=o("./node_modules/ol/geom/MultiPoint.js"),E=o("./node_modules/ol/geom/MultiPolygon.js"),O=o("./node_modules/ol/geom/Point.js"),S=o("./node_modules/ol/geom/Polygon.js"),x=o("./node_modules/ol/style/Stroke.js"),C=o("./node_modules/ol/style/Style.js"),j=o("./node_modules/ol/style/Text.js"),P=o("./node_modules/ol/format/XMLFeature.js"),T=o("./node_modules/ol/xml.js"),A=o("./node_modules/ol/color.js"),M=o("./node_modules/ol/asserts.js"),I=o("./node_modules/ol/array.js"),R=o("./node_modules/ol/proj.js"),L=o("./node_modules/ol/format/xsd.js"),k=o("./node_modules/ol/math.js"),G=o("./node_modules/ol/format/Feature.js"),N=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),D=["http://www.google.com/kml/ext/2.2"],F=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],U={fraction:g.a.FRACTION,pixels:g.a.PIXELS,insetPixels:g.a.PIXELS},B=Object(T.s)(F,{ExtendedData:Ve,Region:We,MultiGeometry:Object(T.o)(Le,"geometry"),LineString:Object(T.o)(Me,"geometry"),LinearRing:Object(T.o)(Ie,"geometry"),Point:Object(T.o)(ke,"geometry"),Polygon:Object(T.o)(Ne,"geometry"),Style:Object(T.o)(Fe),StyleMap:function(e,t){var o=ye.call(this,e,t);if(!o)return;var n=t[t.length-1];Array.isArray(o)?n.Style=o:"string"==typeof o?n.styleUrl=o:Object(M.a)(!1,38)},address:Object(T.o)(L.h),description:Object(T.o)(L.h),name:Object(T.o)(L.h),open:Object(T.o)(L.a),phoneNumber:Object(T.o)(L.h),styleUrl:Object(T.o)(fe),visibility:Object(T.o)(L.a)},Object(T.s)(D,{MultiTrack:Object(T.o)((function(e,t){var o=Object(T.v)([],Se,e,t);if(!o)return;return new b.a(o)}),"geometry"),Track:Object(T.o)(Ce,"geometry")})),z=Object(T.s)(F,{ExtendedData:Ve,Region:We,Link:function(e,t){Object(T.u)(V,e,t)},address:Object(T.o)(L.h),description:Object(T.o)(L.h),name:Object(T.o)(L.h),open:Object(T.o)(L.a),phoneNumber:Object(T.o)(L.h),visibility:Object(T.o)(L.a)}),V=Object(T.s)(F,{href:Object(T.o)(pe)}),W=Object(T.s)(F,{LatLonAltBox:function(e,t){var o=Object(T.v)({},Ye,e,t);if(!o)return;var n=t[t.length-1],r=[parseFloat(o.west),parseFloat(o.south),parseFloat(o.east),parseFloat(o.north)];n.extent=r,n.altitudeMode=o.altitudeMode,n.minAltitude=parseFloat(o.minAltitude),n.maxAltitude=parseFloat(o.maxAltitude)},Lod:function(e,t){var o=Object(T.v)({},Xe,e,t);if(!o)return;var n=t[t.length-1];n.minLodPixels=parseFloat(o.minLodPixels),n.maxLodPixels=parseFloat(o.maxLodPixels),n.minFadeExtent=parseFloat(o.minFadeExtent),n.maxFadeExtent=parseFloat(o.maxFadeExtent)}}),q=Object(T.s)(F,["Document","Placemark"]),H=Object(T.s)(F,{Document:Object(T.m)((function(e,t,o){var n={node:e};Object(T.w)(n,$e,et,t,o,void 0,this)})),Placemark:Object(T.m)(St)}),Y=null;function X(){return Y}var Z,K=null;function J(){return K}var Q,$=null;function ee(){return $}var te=null;function oe(){return te}var ne=null;function re(){return ne}var ie,se=null;function ae(){return se}function le(e){return 32/Math.min(e[0],e[1])}function ce(e){return e}var ue=function(e){function t(t){var o=e.call(this)||this,n=t||{};return se||(r=[255,255,255,1],Y=new d.a({color:r}),i=[20,2],s=g.a.PIXELS,a=g.a.PIXELS,l=[64,64],c="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",K=new m.a({anchor:i,anchorOrigin:y.a.BOTTOM_LEFT,anchorXUnits:s,anchorYUnits:a,crossOrigin:"anonymous",rotation:0,scale:le(l),size:l,src:c}),Z="NO_IMAGE",$=new x.a({color:r,width:1}),Q=new x.a({color:[51,51,51,1],width:2}),te=new j.a({font:"bold 16px Helvetica",fill:Y,stroke:Q,scale:.8}),ne=new C.c({fill:Y,image:K,text:te,stroke:$,zIndex:0}),se=[ne]),o.dataProjection=Object(R.t)("EPSG:4326"),o.defaultStyle_=n.defaultStyle?n.defaultStyle:se,o.extractStyles_=void 0===n.extractStyles||n.extractStyles,o.writeStyles_=void 0===n.writeStyles||n.writeStyles,o.sharedStyles_={},o.showPointNames_=void 0===n.showPointNames||n.showPointNames,o.crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:"anonymous",o.iconUrlFunction_=n.iconUrlFunction?n.iconUrlFunction:ce,o.supportedMediaTypes=["application/vnd.google-earth.kml+xml"],o}return N(t,e),t.prototype.readDocumentOrFolder_=function(e,t){var o=Object(T.s)(F,{Document:Object(T.j)(this.readDocumentOrFolder_,this),Folder:Object(T.j)(this.readDocumentOrFolder_,this),Placemark:Object(T.k)(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),n=Object(T.v)([],o,e,t,this);return n||void 0},t.prototype.readPlacemark_=function(e,t){var o=Object(T.v)({geometry:null},B,e,t,this);if(o){var n=new u.b,r=e.getAttribute("id");null!==r&&n.setId(r);var i=t[0],s=o.geometry;if(s&&Object(G.c)(s,!1,i),n.setGeometry(s),delete o.geometry,this.extractStyles_){var a=function(e,t,o,n,r){return function(i,s){var a=r,l="",c=[];if(a){var u=i.getGeometry();if(u){var d=u.getType();a=d===f.a.GEOMETRY_COLLECTION?(c=u.getGeometriesArrayRecursive().filter((function(e){var t=e.getType();return t===f.a.POINT||t===f.a.MULTI_POINT}))).length>0:d===f.a.POINT||d===f.a.MULTI_POINT}}a&&(l=i.get("name"),(a=a&&!!l)&&l.search(/&[^&]+;/)>-1&&(ie||(ie=document.createElement("textarea")),ie.innerHTML=l,l=ie.value));var p=o;if(e?p=e:t&&(p=function e(t,o,n){return Array.isArray(t)?t:"string"==typeof t?e(n[t],o,n):o}(t,o,n)),a){var m=function(e,t){var o=[0,0],n="start",r=e.getImage();if(r){var i=r.getSize();if(i&&2==i.length){var s=r.getScaleArray(),a=r.getAnchor();o[0]=s[0]*(i[0]-a[0]),o[1]=s[1]*(i[1]/2-a[1]),n="left"}}var l=e.getText();l?((l=l.clone()).setFont(l.getFont()||te.getFont()),l.setScale(l.getScale()||te.getScale()),l.setFill(l.getFill()||te.getFill()),l.setStroke(l.getStroke()||Q)):l=te.clone();return l.setText(t),l.setOffsetX(o[0]),l.setOffsetY(o[1]),l.setTextAlign(n),new C.c({image:r,text:l})}(p[0],l);return c.length>0?(m.setGeometry(new h.a(c)),[m,new C.c({geometry:p[0].getGeometry(),image:null,fill:p[0].getFill(),stroke:p[0].getStroke(),text:null})].concat(p.slice(1))):m}return p}}(o.Style,o.styleUrl,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);n.setStyle(a)}return delete o.Style,n.setProperties(o,!0),n}},t.prototype.readSharedStyle_=function(e,t){var o=e.getAttribute("id");if(null!==o){var n=Fe.call(this,e,t);if(n){var r=void 0,i=e.baseURI;if(i&&"about:blank"!=i||(i=window.location.href),i)r=new URL("#"+o,i).href;else r="#"+o;this.sharedStyles_[r]=n}}},t.prototype.readSharedStyleMap_=function(e,t){var o=e.getAttribute("id");if(null!==o){var n=ye.call(this,e,t);if(n){var r,i=e.baseURI;if(i&&"about:blank"!=i||(i=window.location.href),i)r=new URL("#"+o,i).href;else r="#"+o;this.sharedStyles_[r]=n}}},t.prototype.readFeatureFromNode=function(e,t){if(!Object(I.f)(F,e.namespaceURI))return null;var o=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return o||null},t.prototype.readFeaturesFromNode=function(e,t){if(!Object(I.f)(F,e.namespaceURI))return[];var o,n=e.localName;if("Document"==n||"Folder"==n)return(o=this.readDocumentOrFolder_(e,[this.getReadOptions(e,t)]))||[];if("Placemark"==n){var r=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return r?[r]:[]}if("kml"==n){o=[];for(var i=e.firstElementChild;i;i=i.nextElementSibling){var s=this.readFeaturesFromNode(i,t);s&&Object(I.c)(o,s)}return o}return[]},t.prototype.readName=function(e){if(e){if("string"==typeof e){var t=Object(T.t)(e);return this.readNameFromDocument(t)}return Object(T.i)(e)?this.readNameFromDocument(e):this.readNameFromNode(e)}},t.prototype.readNameFromDocument=function(e){for(var t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE){var o=this.readNameFromNode(t);if(o)return o}},t.prototype.readNameFromNode=function(e){for(var t=e.firstElementChild;t;t=t.nextElementSibling)if(Object(I.f)(F,t.namespaceURI)&&"name"==t.localName)return Object(L.h)(t);for(t=e.firstElementChild;t;t=t.nextElementSibling){var o=t.localName;if(Object(I.f)(F,t.namespaceURI)&&("Document"==o||"Folder"==o||"Placemark"==o||"kml"==o)){var n=this.readNameFromNode(t);if(n)return n}}},t.prototype.readNetworkLinks=function(e){var t=[];if("string"==typeof e){var o=Object(T.t)(e);Object(I.c)(t,this.readNetworkLinksFromDocument(o))}else Object(T.i)(e)?Object(I.c)(t,this.readNetworkLinksFromDocument(e)):Object(I.c)(t,this.readNetworkLinksFromNode(e));return t},t.prototype.readNetworkLinksFromDocument=function(e){for(var t=[],o=e.firstChild;o;o=o.nextSibling)o.nodeType==Node.ELEMENT_NODE&&Object(I.c)(t,this.readNetworkLinksFromNode(o));return t},t.prototype.readNetworkLinksFromNode=function(e){for(var t=[],o=e.firstElementChild;o;o=o.nextElementSibling)if(Object(I.f)(F,o.namespaceURI)&&"NetworkLink"==o.localName){var n=Object(T.v)({},z,o,[]);t.push(n)}for(o=e.firstElementChild;o;o=o.nextElementSibling){var r=o.localName;!Object(I.f)(F,o.namespaceURI)||"Document"!=r&&"Folder"!=r&&"kml"!=r||Object(I.c)(t,this.readNetworkLinksFromNode(o))}return t},t.prototype.readRegion=function(e){var t=[];if("string"==typeof e){var o=Object(T.t)(e);Object(I.c)(t,this.readRegionFromDocument(o))}else Object(T.i)(e)?Object(I.c)(t,this.readRegionFromDocument(e)):Object(I.c)(t,this.readRegionFromNode(e));return t},t.prototype.readRegionFromDocument=function(e){for(var t=[],o=e.firstChild;o;o=o.nextSibling)o.nodeType==Node.ELEMENT_NODE&&Object(I.c)(t,this.readRegionFromNode(o));return t},t.prototype.readRegionFromNode=function(e){for(var t=[],o=e.firstElementChild;o;o=o.nextElementSibling)if(Object(I.f)(F,o.namespaceURI)&&"Region"==o.localName){var n=Object(T.v)({},W,o,[]);t.push(n)}for(o=e.firstElementChild;o;o=o.nextElementSibling){var r=o.localName;!Object(I.f)(F,o.namespaceURI)||"Document"!=r&&"Folder"!=r&&"kml"!=r||Object(I.c)(t,this.readRegionFromNode(o))}return t},t.prototype.writeFeaturesNode=function(e,t){t=this.adaptOptions(t);var o=Object(T.c)(F[4],"kml"),n="http://www.w3.org/2000/xmlns/";o.setAttributeNS(n,"xmlns:gx",D[0]),o.setAttributeNS(n,"xmlns:xsi",T.b),o.setAttributeNS(T.b,"xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");var r={node:o},i={};e.length>1?i.Document=e:1==e.length&&(i.Placemark=e[0]);var s=q[o.namespaceURI],a=Object(T.q)(i,s);return Object(T.w)(r,H,T.a,a,[t],s,this),o},t}(P.a);function de(e){var t=Object(T.d)(e,!1),o=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(t);if(o){var n=o[1];return[parseInt(n.substr(6,2),16),parseInt(n.substr(4,2),16),parseInt(n.substr(2,2),16),parseInt(n.substr(0,2),16)/255]}}function he(e){var t=Object(T.d)(e,!1),o=[];t=t.replace(/\s*,\s*/g,",");for(var n,r=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;n=r.exec(t);){var i=parseFloat(n[1]),s=parseFloat(n[2]),a=n[3]?parseFloat(n[3]):0;o.push(i,s,a),t=t.substr(n[0].length)}if(""===t)return o}function pe(e){var t=Object(T.d)(e,!1).trim(),o=e.baseURI;return o&&"about:blank"!=o||(o=window.location.href),o?new URL(t,o).href:t}function fe(e){var t=Object(T.d)(e,!1).trim().replace(/^(?!.*#)/,"#"),o=e.baseURI;return o&&"about:blank"!=o||(o=window.location.href),o?new URL(t,o).href:t}function me(e){return Object(L.d)(e)}var ge=Object(T.s)(F,{Pair:function(e,t){var o=Object(T.v)({},qe,e,t,this);if(!o)return;var n=o.key;if(n&&"normal"==n){var r=o.styleUrl;r&&(t[t.length-1]=r);var i=o.Style;i&&(t[t.length-1]=i)}}});function ye(e,t){return Object(T.v)(void 0,ge,e,t,this)}var ve=Object(T.s)(F,{Icon:Object(T.o)((function(e,t){var o=Object(T.v)({},je,e,t);return o||null})),color:Object(T.o)(de),heading:Object(T.o)(L.d),hotSpot:Object(T.o)((function(e){var t,o=e.getAttribute("xunits"),n=e.getAttribute("yunits");return t="insetPixels"!==o?"insetPixels"!==n?y.a.BOTTOM_LEFT:y.a.TOP_LEFT:"insetPixels"!==n?y.a.BOTTOM_RIGHT:y.a.TOP_RIGHT,{x:parseFloat(e.getAttribute("x")),xunits:U[o],y:parseFloat(e.getAttribute("y")),yunits:U[n],origin:t}})),scale:Object(T.o)(me)});var _e=Object(T.s)(F,{color:Object(T.o)(de),scale:Object(T.o)(me)});var be=Object(T.s)(F,{color:Object(T.o)(de),width:Object(T.o)(L.d)});var we=Object(T.s)(F,{color:Object(T.o)(de),fill:Object(T.o)(L.a),outline:Object(T.o)(L.a)});var Ee=Object(T.s)(F,{coordinates:Object(T.p)(he)});function Oe(e,t){return Object(T.v)(null,Ee,e,t)}var Se=Object(T.s)(D,{Track:Object(T.k)(Ce)});var xe=Object(T.s)(F,{when:function(e,t){var o=t[t.length-1].whens,n=Object(T.d)(e,!1),r=Date.parse(n);o.push(isNaN(r)?0:r)}},Object(T.s)(D,{coord:function(e,t){var o=t[t.length-1].coordinates,n=Object(T.d)(e,!1),r=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(n);if(r){var i=parseFloat(r[1]),s=parseFloat(r[2]),a=parseFloat(r[3]);o.push([i,s,a])}else o.push([])}}));function Ce(e,t){var o=Object(T.v)({coordinates:[],whens:[]},xe,e,t);if(o){for(var n=[],r=o.coordinates,i=o.whens,s=0,a=Math.min(r.length,i.length);s<a;++s)3==r[s].length&&n.push(r[s][0],r[s][1],r[s][2],i[s]);return new _.a(n,p.a.XYZM)}}var je=Object(T.s)(F,{href:Object(T.o)(pe)},Object(T.s)(D,{x:Object(T.o)(L.d),y:Object(T.o)(L.d),w:Object(T.o)(L.d),h:Object(T.o)(L.d)}));var Pe=Object(T.s)(F,{coordinates:Object(T.p)(he)});function Te(e,t){return Object(T.v)(null,Pe,e,t)}var Ae=Object(T.s)(F,{extrude:Object(T.o)(L.a),tessellate:Object(T.o)(L.a),altitudeMode:Object(T.o)(L.h)});function Me(e,t){var o=Object(T.v)({},Ae,e,t),n=Te(e,t);if(n){var r=new _.a(n,p.a.XYZ);return r.setProperties(o,!0),r}}function Ie(e,t){var o=Object(T.v)({},Ae,e,t),n=Te(e,t);if(n){var r=new S.b(n,p.a.XYZ,[n.length]);return r.setProperties(o,!0),r}}var Re=Object(T.s)(F,{LineString:Object(T.k)(Me),LinearRing:Object(T.k)(Ie),MultiGeometry:Object(T.k)(Le),Point:Object(T.k)(ke),Polygon:Object(T.k)(Ne)});function Le(e,t){var o,n=Object(T.v)([],Re,e,t);if(!n)return null;if(0===n.length)return new h.a(n);for(var r,i=!0,s=n[0].getType(),a=1,l=n.length;a<l;++a)if((r=n[a]).getType()!=s){i=!1;break}if(i){var c=void 0,u=void 0;if(s==f.a.POINT){var d=n[0];c=d.getLayout(),u=d.getFlatCoordinates();for(a=1,l=n.length;a<l;++a)r=n[a],Object(I.c)(u,r.getFlatCoordinates());Ue(o=new w.a(u,c),n)}else s==f.a.LINE_STRING?Ue(o=new b.a(n),n):s==f.a.POLYGON?Ue(o=new E.a(n),n):s==f.a.GEOMETRY_COLLECTION?o=new h.a(n):Object(M.a)(!1,37)}else o=new h.a(n);return o}function ke(e,t){var o=Object(T.v)({},Ae,e,t),n=Te(e,t);if(n){var r=new O.a(n,p.a.XYZ);return r.setProperties(o,!0),r}}var Ge=Object(T.s)(F,{innerBoundaryIs:function(e,t){var o=Object(T.v)([],Ze,e,t);if(o.length>0){var n=t[t.length-1];n.push.apply(n,o)}},outerBoundaryIs:function(e,t){var o=Object(T.v)(void 0,Ke,e,t);if(o){t[t.length-1][0]=o}}});function Ne(e,t){var o=Object(T.v)({},Ae,e,t),n=Object(T.v)([null],Ge,e,t);if(n&&n[0]){for(var r=n[0],i=[r.length],s=1,a=n.length;s<a;++s)Object(I.c)(r,n[s]),i.push(r.length);var l=new S.b(r,p.a.XYZ,i);return l.setProperties(o,!0),l}}var De=Object(T.s)(F,{IconStyle:function(e,t){var o=Object(T.v)({},ve,e,t);if(o){var n,r,u,d,h=t[t.length-1],p="Icon"in o?o.Icon:{},f=!("Icon"in o)||Object.keys(p).length>0,g=p.href;g?n=g:f&&(n=c);var _,b=y.a.BOTTOM_LEFT,w=o.hotSpot;w?(r=[w.x,w.y],u=w.xunits,d=w.yunits,b=w.origin):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(n)&&(/pushpin/.test(n)?(r=i,u=s,d=a):/arrow-reverse/.test(n)?(r=[54,42],u=s,d=a):/paddle/.test(n)&&(r=[32,1],u=s,d=a));var E,O=p.x,S=p.y;void 0!==O&&void 0!==S&&(_=[O,S]);var x,C=p.w,j=p.h;void 0!==C&&void 0!==j&&(E=[C,j]);var P=o.heading;void 0!==P&&(x=Object(k.j)(P));var A=o.scale,M=o.color;if(f){n==c&&(E=l);var I=new m.a({anchor:r,anchorOrigin:b,anchorXUnits:u,anchorYUnits:d,crossOrigin:this.crossOrigin_,offset:_,offsetOrigin:y.a.BOTTOM_LEFT,rotation:x,scale:A,size:E,src:this.iconUrlFunction_(n),color:M}),R=I.getScaleArray()[0],L=I.getSize();if(null===L){var G=I.getImageState();if(G===v.a.IDLE||G===v.a.LOADING){var N=function(){var e=I.getImageState();if(e!==v.a.IDLE&&e!==v.a.LOADING){var t=I.getSize();if(t&&2==t.length){var o=le(t);I.setScale(R*o)}I.unlistenImageChange(N)}};I.listenImageChange(N),G===v.a.IDLE&&I.load()}}else if(2==L.length){var D=le(L);I.setScale(R*D)}h.imageStyle=I}else h.imageStyle=Z}},LabelStyle:function(e,t){var o=Object(T.v)({},_e,e,t);if(o){var n=t[t.length-1],i=new j.a({fill:new d.a({color:"color"in o?o.color:r}),scale:o.scale});n.textStyle=i}},LineStyle:function(e,t){var o=Object(T.v)({},be,e,t);if(o){var n=t[t.length-1],i=new x.a({color:"color"in o?o.color:r,width:"width"in o?o.width:1});n.strokeStyle=i}},PolyStyle:function(e,t){var o=Object(T.v)({},we,e,t);if(o){var n=t[t.length-1],i=new d.a({color:"color"in o?o.color:r});n.fillStyle=i;var s=o.fill;void 0!==s&&(n.fill=s);var a=o.outline;void 0!==a&&(n.outline=a)}}});function Fe(e,t){var o=Object(T.v)({},De,e,t,this);if(!o)return null;var n,r="fillStyle"in o?o.fillStyle:Y,i=o.fill;void 0===i||i||(r=null),"imageStyle"in o?o.imageStyle!=Z&&(n=o.imageStyle):n=K;var s="textStyle"in o?o.textStyle:te,a="strokeStyle"in o?o.strokeStyle:$,l=o.outline;return void 0===l||l?[new C.c({fill:r,image:n,stroke:a,text:s,zIndex:void 0})]:[new C.c({geometry:function(e){var t=e.getGeometry(),o=t.getType();if(o===f.a.GEOMETRY_COLLECTION){var n=t;return new h.a(n.getGeometriesArrayRecursive().filter((function(e){var t=e.getType();return t!==f.a.POLYGON&&t!==f.a.MULTI_POLYGON})))}if(o!==f.a.POLYGON&&o!==f.a.MULTI_POLYGON)return t},fill:r,image:n,stroke:a,text:s,zIndex:void 0}),new C.c({geometry:function(e){var t=e.getGeometry(),o=t.getType();if(o===f.a.GEOMETRY_COLLECTION){var n=t;return new h.a(n.getGeometriesArrayRecursive().filter((function(e){var t=e.getType();return t===f.a.POLYGON||t===f.a.MULTI_POLYGON})))}if(o===f.a.POLYGON||o===f.a.MULTI_POLYGON)return t},fill:r,stroke:null,zIndex:void 0})]}function Ue(e,t){var o,n,r,i=t.length,s=new Array(t.length),a=new Array(t.length),l=new Array(t.length);o=!1,n=!1,r=!1;for(var c=0;c<i;++c){var u=t[c];s[c]=u.get("extrude"),a[c]=u.get("tessellate"),l[c]=u.get("altitudeMode"),o=o||void 0!==s[c],n=n||void 0!==a[c],r=r||l[c]}o&&e.set("extrude",s),n&&e.set("tessellate",a),r&&e.set("altitudeMode",l)}var Be=Object(T.s)(F,{displayName:Object(T.o)(L.h),value:Object(T.o)(L.h)});var ze=Object(T.s)(F,{Data:function(e,t){var o=e.getAttribute("name");Object(T.u)(Be,e,t);var n=t[t.length-1];o&&n.displayName?n[o]={value:n.value,displayName:n.displayName,toString:function(){return n.value}}:null!==o?n[o]=n.value:null!==n.displayName&&(n[n.displayName]=n.value),delete n.value},SchemaData:function(e,t){Object(T.u)(He,e,t)}});function Ve(e,t){Object(T.u)(ze,e,t)}function We(e,t){Object(T.u)(W,e,t)}var qe=Object(T.s)(F,{Style:Object(T.o)(Fe),key:Object(T.o)(L.h),styleUrl:Object(T.o)(fe)});var He=Object(T.s)(F,{SimpleData:function(e,t){var o=e.getAttribute("name");if(null!==o){var n=Object(L.h)(e);t[t.length-1][o]=n}}});var Ye=Object(T.s)(F,{altitudeMode:Object(T.o)(L.h),minAltitude:Object(T.o)(L.d),maxAltitude:Object(T.o)(L.d),north:Object(T.o)(L.d),south:Object(T.o)(L.d),east:Object(T.o)(L.d),west:Object(T.o)(L.d)});var Xe=Object(T.s)(F,{minLodPixels:Object(T.o)(L.d),maxLodPixels:Object(T.o)(L.d),minFadeExtent:Object(T.o)(L.d),maxFadeExtent:Object(T.o)(L.d)});var Ze=Object(T.s)(F,{LinearRing:Object(T.k)(Oe)});var Ke=Object(T.s)(F,{LinearRing:Object(T.p)(Oe)});function Je(e,t){for(var o=Object(A.a)(t),n=[255*(4==o.length?o[3]:1),o[2],o[1],o[0]],r=0;r<4;++r){var i=Math.floor(n[r]).toString(16);n[r]=1==i.length?"0"+i:i}Object(L.n)(e,n.join(""))}var Qe=Object(T.s)(F,{Data:Object(T.m)((function(e,t,o){e.setAttribute("name",t.name);var n={node:e},r=t.value;"object"==typeof r?(null!==r&&r.displayName&&Object(T.w)(n,Qe,T.a,[r.displayName],o,["displayName"]),null!==r&&r.value&&Object(T.w)(n,Qe,T.a,[r.value],o,["value"])):Object(T.w)(n,Qe,T.a,[r],o,["value"])})),value:Object(T.m)((function(e,t){Object(L.n)(e,t)})),displayName:Object(T.m)((function(e,t){Object(L.j)(e,t)}))});var $e=Object(T.s)(F,{Placemark:Object(T.m)(St)}),et=function(e,t,o){var n=t[t.length-1].node;return Object(T.c)(n.namespaceURI,"Placemark")};var tt=Object(T.r)("Data");var ot=Object(T.s)(F,["href"],Object(T.s)(D,["x","y","w","h"])),nt=Object(T.s)(F,{href:Object(T.m)(L.n)},Object(T.s)(D,{x:Object(T.m)(L.l),y:Object(T.m)(L.l),w:Object(T.m)(L.l),h:Object(T.m)(L.l)})),rt=function(e,t,o){return Object(T.c)(D[0],"gx:"+o)};var it=Object(T.s)(F,["scale","heading","Icon","color","hotSpot"]),st=Object(T.s)(F,{Icon:Object(T.m)((function(e,t,o){var n={node:e},r=o[o.length-1].node,i=ot[r.namespaceURI],s=Object(T.q)(t,i);Object(T.w)(n,nt,T.a,s,o,i),i=ot[D[0]],s=Object(T.q)(t,i),Object(T.w)(n,nt,rt,s,o,i)})),color:Object(T.m)(Je),heading:Object(T.m)(L.l),hotSpot:Object(T.m)((function(e,t){e.setAttribute("x",String(t.x)),e.setAttribute("y",String(t.y)),e.setAttribute("xunits",t.xunits),e.setAttribute("yunits",t.yunits)})),scale:Object(T.m)(Lt)});var at=Object(T.s)(F,["color","scale"]),lt=Object(T.s)(F,{color:Object(T.m)(Je),scale:Object(T.m)(Lt)});var ct=Object(T.s)(F,["color","width"]),ut=Object(T.s)(F,{color:Object(T.m)(Je),width:Object(T.m)(L.l)});var dt={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},ht=function(e,t,o){if(e){var n=t[t.length-1].node;return Object(T.c)(n.namespaceURI,dt[e.getType()])}},pt=Object(T.r)("Point"),ft=Object(T.r)("LineString"),mt=Object(T.r)("LinearRing"),gt=Object(T.r)("Polygon"),yt=Object(T.s)(F,{LineString:Object(T.m)(jt),Point:Object(T.m)(jt),Polygon:Object(T.m)(It),GeometryCollection:Object(T.m)(vt)});function vt(e,t,o){var n,r={node:e},i=t.getType(),s=[];i===f.a.GEOMETRY_COLLECTION?(t.getGeometriesArrayRecursive().forEach((function(e){var t=e.getType();t===f.a.MULTI_POINT?s=s.concat(e.getPoints()):t===f.a.MULTI_LINE_STRING?s=s.concat(e.getLineStrings()):t===f.a.MULTI_POLYGON?s=s.concat(e.getPolygons()):t===f.a.POINT||t===f.a.LINE_STRING||t===f.a.POLYGON?s.push(e):Object(M.a)(!1,39)})),n=ht):i===f.a.MULTI_POINT?(s=t.getPoints(),n=pt):i===f.a.MULTI_LINE_STRING?(s=t.getLineStrings(),n=ft):i===f.a.MULTI_POLYGON?(s=t.getPolygons(),n=gt):Object(M.a)(!1,39),Object(T.w)(r,yt,n,s,o)}var _t=Object(T.s)(F,{LinearRing:Object(T.m)(jt)});function bt(e,t,o){var n={node:e};Object(T.w)(n,_t,mt,[t],o)}var wt=Object(T.s)(F,{ExtendedData:Object(T.m)((function(e,t,o){for(var n={node:e},r=t.names,i=t.values,s=r.length,a=0;a<s;a++)Object(T.w)(n,Qe,tt,[{name:r[a],value:i[a]}],o)})),MultiGeometry:Object(T.m)(vt),LineString:Object(T.m)(jt),LinearRing:Object(T.m)(jt),Point:Object(T.m)(jt),Polygon:Object(T.m)(It),Style:Object(T.m)((function(e,t,o){var n={node:e},r={};if(t.pointStyles.length){var i=t.pointStyles[0].getText();i&&(r.LabelStyle=i);var s=t.pointStyles[0].getImage();s&&"function"==typeof s.getSrc&&(r.IconStyle=s)}if(t.lineStyles.length){(a=t.lineStyles[0].getStroke())&&(r.LineStyle=a)}if(t.polyStyles.length){var a;(a=t.polyStyles[0].getStroke())&&!r.LineStyle&&(r.LineStyle=a),r.PolyStyle=t.polyStyles[0]}var l=o[o.length-1].node,c=kt[l.namespaceURI],u=Object(T.q)(r,c);Object(T.w)(n,Gt,T.a,u,o,c)})),address:Object(T.m)(L.n),description:Object(T.m)(L.n),name:Object(T.m)(L.n),open:Object(T.m)(L.i),phoneNumber:Object(T.m)(L.n),styleUrl:Object(T.m)(L.n),visibility:Object(T.m)(L.i)}),Et=Object(T.s)(F,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),Ot=Object(T.r)("ExtendedData");function St(e,t,o){var n={node:e};t.getId()&&e.setAttribute("id",t.getId());var r=t.getProperties(),i={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};i[t.getGeometryName()]=1;var s=Object.keys(r||{}).sort().filter((function(e){return!i[e]})),a=t.getStyleFunction();if(a){var l=a(t,0);if(l){var c=Array.isArray(l)?l:[l],u=c;if(t.getGeometry()&&(u=c.filter((function(e){var o=e.getGeometryFunction()(t);if(o){var n=o.getType();return n===f.a.GEOMETRY_COLLECTION?o.getGeometriesArrayRecursive().filter((function(e){var t=e.getType();return t===f.a.POINT||t===f.a.MULTI_POINT})).length:n===f.a.POINT||n===f.a.MULTI_POINT}}))),this.writeStyles_){var d=c,h=c;t.getGeometry()&&(d=c.filter((function(e){var o=e.getGeometryFunction()(t);if(o){var n=o.getType();return n===f.a.GEOMETRY_COLLECTION?o.getGeometriesArrayRecursive().filter((function(e){var t=e.getType();return t===f.a.LINE_STRING||t===f.a.MULTI_LINE_STRING})).length:n===f.a.LINE_STRING||n===f.a.MULTI_LINE_STRING}})),h=c.filter((function(e){var o=e.getGeometryFunction()(t);if(o){var n=o.getType();return n===f.a.GEOMETRY_COLLECTION?o.getGeometriesArrayRecursive().filter((function(e){var t=e.getType();return t===f.a.POLYGON||t===f.a.MULTI_POLYGON})).length:n===f.a.POLYGON||n===f.a.MULTI_POLYGON}}))),r.Style={pointStyles:u,lineStyles:d,polyStyles:h}}if(u.length&&void 0===r.name){var p=u[0].getText();p&&(r.name=p.getText())}}}var m=o[o.length-1].node,g=Et[m.namespaceURI],y=Object(T.q)(r,g);if(Object(T.w)(n,wt,T.a,y,o,g),s.length>0){var v={names:s,values:Object(T.q)(r,s)};Object(T.w)(n,wt,Ot,[v],o)}var _=o[0],b=t.getGeometry();b&&(b=Object(G.c)(b,!0,_)),Object(T.w)(n,wt,ht,[b],o)}var xt=Object(T.s)(F,["extrude","tessellate","altitudeMode","coordinates"]),Ct=Object(T.s)(F,{extrude:Object(T.m)(L.i),tessellate:Object(T.m)(L.i),altitudeMode:Object(T.m)(L.n),coordinates:Object(T.m)((function(e,t,o){var n,r=o[o.length-1],i=r.layout,s=r.stride;i==p.a.XY||i==p.a.XYM?n=2:i==p.a.XYZ||i==p.a.XYZM?n=3:Object(M.a)(!1,34);var a=t.length,l="";if(a>0){l+=t[0];for(var c=1;c<n;++c)l+=","+t[c];for(var u=s;u<a;u+=s){l+=" "+t[u];for(c=1;c<n;++c)l+=","+t[u+c]}}Object(L.n)(e,l)}))});function jt(e,t,o){var n=t.getFlatCoordinates(),r={node:e};r.layout=t.getLayout(),r.stride=t.getStride();var i=t.getProperties();i.coordinates=n;var s=o[o.length-1].node,a=xt[s.namespaceURI],l=Object(T.q)(i,a);Object(T.w)(r,Ct,T.a,l,o,a)}var Pt=Object(T.s)(F,["color","fill","outline"]),Tt=Object(T.s)(F,{outerBoundaryIs:Object(T.m)(bt),innerBoundaryIs:Object(T.m)(bt)}),At=Object(T.r)("innerBoundaryIs"),Mt=Object(T.r)("outerBoundaryIs");function It(e,t,o){var n=t.getLinearRings(),r=n.shift(),i={node:e};Object(T.w)(i,Tt,At,n,o),Object(T.w)(i,Tt,Mt,[r],o)}var Rt=Object(T.s)(F,{color:Object(T.m)(Je),fill:Object(T.m)(L.i),outline:Object(T.m)(L.i)});function Lt(e,t){Object(L.l)(e,Math.round(1e6*t)/1e6)}var kt=Object(T.s)(F,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),Gt=Object(T.s)(F,{IconStyle:Object(T.m)((function(e,t,o){var n={node:e},r={},i=t.getSrc(),s=t.getSize(),a=t.getImageSize(),c={href:i};if(s){c.w=s[0],c.h=s[1];var u=t.getAnchor(),d=t.getOrigin();if(d&&a&&0!==d[0]&&d[1]!==s[1]&&(c.x=d[0],c.y=a[1]-(d[1]+s[1])),u&&(u[0]!==s[0]/2||u[1]!==s[1]/2)){var h={x:u[0],xunits:g.a.PIXELS,y:s[1]-u[1],yunits:g.a.PIXELS};r.hotSpot=h}}r.Icon=c;var p=t.getScaleArray()[0],f=s;null===f&&(f=l),2==f.length&&(p/=le(f)),1!==p&&(r.scale=p);var m=t.getRotation();0!==m&&(r.heading=m);var y=t.getColor();y&&(r.color=y);var v=o[o.length-1].node,_=it[v.namespaceURI],b=Object(T.q)(r,_);Object(T.w)(n,st,T.a,b,o,_)})),LabelStyle:Object(T.m)((function(e,t,o){var n={node:e},r={},i=t.getFill();i&&(r.color=i.getColor());var s=t.getScale();s&&1!==s&&(r.scale=s);var a=o[o.length-1].node,l=at[a.namespaceURI],c=Object(T.q)(r,l);Object(T.w)(n,lt,T.a,c,o,l)})),LineStyle:Object(T.m)((function(e,t,o){var n={node:e},r={color:t.getColor(),width:Number(t.getWidth())||1},i=o[o.length-1].node,s=ct[i.namespaceURI],a=Object(T.q)(r,s);Object(T.w)(n,ut,T.a,a,o,s)})),PolyStyle:Object(T.m)((function(e,t,o){var n={node:e},r=t.getFill(),i=t.getStroke(),s={color:r?r.getColor():void 0,fill:!!r&&void 0,outline:!!i&&void 0},a=o[o.length-1].node,l=Pt[a.namespaceURI],c=Object(T.q)(s,l);Object(T.w)(n,Rt,T.a,c,o,l)}))});t.a=ue},"./node_modules/ol/format/MVT.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/format/Feature.js"),i=o("./node_modules/ol/format/FormatType.js"),s=o("./node_modules/ol/geom/GeometryLayout.js"),a=o("./node_modules/ol/geom/GeometryType.js"),l=o("./node_modules/ol/geom/LineString.js"),c=o("./node_modules/ol/geom/MultiLineString.js"),u=o("./node_modules/ol/geom/MultiPoint.js"),d=o("./node_modules/ol/geom/MultiPolygon.js"),h=o("./node_modules/pbf/index.js"),p=o.n(h),f=o("./node_modules/ol/geom/Point.js"),m=o("./node_modules/ol/geom/Polygon.js"),g=o("./node_modules/ol/proj/Projection.js"),y=o("./node_modules/ol/render/Feature.js"),v=o("./node_modules/ol/proj/Units.js"),_=o("./node_modules/ol/asserts.js"),b=o("./node_modules/ol/proj.js"),w=o("./node_modules/ol/geom/flat/orient.js"),E=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),O=function(e){function t(t){var o=e.call(this)||this,n=t||{};return o.dataProjection=new g.a({code:"",units:v.b.TILE_PIXELS}),o.featureClass_=n.featureClass?n.featureClass:y.a,o.geometryName_=n.geometryName,o.layerName_=n.layerName?n.layerName:"layer",o.layers_=n.layers?n.layers:null,o.idProperty_=n.idProperty,o.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"],o}return E(t,e),t.prototype.readRawGeometry_=function(e,t,o,n){e.pos=t.geometry;for(var r=e.readVarint()+e.pos,i=1,s=0,a=0,l=0,c=0,u=0;e.pos<r;){if(!s){var d=e.readVarint();i=7&d,s=d>>3}s--,1===i||2===i?(a+=e.readSVarint(),l+=e.readSVarint(),1===i&&c>u&&(n.push(c),u=c),o.push(a,l),c+=2):7===i?c>u&&(o.push(o[u],o[u+1]),c+=2):Object(_.a)(!1,59)}c>u&&(n.push(c),u=c)},t.prototype.createFeature_=function(e,t,o){var n,i=t.type;if(0===i)return null;var h,p=t.properties;this.idProperty_?(h=p[this.idProperty_],delete p[this.idProperty_]):h=t.id,p[this.layerName_]=t.layer.name;var g=[],v=[];this.readRawGeometry_(e,t,g,v);var _=function(e,t){var o;1===e?o=1===t?a.a.POINT:a.a.MULTI_POINT:2===e?o=1===t?a.a.LINE_STRING:a.a.MULTI_LINE_STRING:3===e&&(o=a.a.POLYGON);return o}(i,v.length);if(this.featureClass_===y.a)(n=new this.featureClass_(_,g,v,p,h)).transform(o.dataProjection);else{var b=void 0;if(_==a.a.POLYGON){for(var E=[],O=0,S=0,x=0,C=v.length;x<C;++x){var j=v[x];if(Object(w.a)(g,O,j,2)){if(0===E.length)continue;E[E.length-1].push(v[S])}else E.push(v.slice(S,x+1));S=x+1,O=j}b=E.length>1?new d.a(g,s.a.XY,E):new m.b(g,s.a.XY,v)}else b=_===a.a.POINT?new f.a(g,s.a.XY):_===a.a.LINE_STRING?new l.a(g,s.a.XY):_===a.a.POLYGON?new m.b(g,s.a.XY,v):_===a.a.MULTI_POINT?new u.a(g,s.a.XY):_===a.a.MULTI_LINE_STRING?new c.a(g,s.a.XY,v):null;n=new(0,this.featureClass_),this.geometryName_&&n.setGeometryName(this.geometryName_);var P=Object(r.c)(b,!1,o);n.setGeometry(P),n.setId(h),n.setProperties(p,!0)}return n},t.prototype.getType=function(){return i.a.ARRAY_BUFFER},t.prototype.readFeatures=function(e,t){var o=this.layers_,n=this.adaptOptions(t),r=Object(b.t)(n.dataProjection);r.setWorldExtent(n.extent),n.dataProjection=r;var i=new p.a(e),s=i.readFields(S,{}),a=[];for(var l in s)if(!o||-1!=o.indexOf(l)){var c=s[l],u=c?[0,0,c.extent,c.extent]:null;r.setExtent(u);for(var d=0,h=c.length;d<h;++d){var f=j(i,c,d);a.push(this.createFeature_(i,f,n))}}return a},t.prototype.readProjection=function(e){return this.dataProjection},t.prototype.setLayers=function(e){this.layers_=e},t}(r.a);function S(e,t,o){if(3===e){var n={keys:[],values:[],features:[]},r=o.readVarint()+o.pos;o.readFields(x,n,r),n.length=n.features.length,n.length&&(t[n.name]=n)}}function x(e,t,o){if(15===e)t.version=o.readVarint();else if(1===e)t.name=o.readString();else if(5===e)t.extent=o.readVarint();else if(2===e)t.features.push(o.pos);else if(3===e)t.keys.push(o.readString());else if(4===e){for(var n=null,r=o.readVarint()+o.pos;o.pos<r;)n=1===(e=o.readVarint()>>3)?o.readString():2===e?o.readFloat():3===e?o.readDouble():4===e?o.readVarint64():5===e?o.readVarint():6===e?o.readSVarint():7===e?o.readBoolean():null;t.values.push(n)}}function C(e,t,o){if(1==e)t.id=o.readVarint();else if(2==e)for(var n=o.readVarint()+o.pos;o.pos<n;){var r=t.layer.keys[o.readVarint()],i=t.layer.values[o.readVarint()];t.properties[r]=i}else 3==e?t.type=o.readVarint():4==e&&(t.geometry=o.pos)}function j(e,t,o){e.pos=t.features[o];var n=e.readVarint()+e.pos,r={layer:t,type:0,properties:{}};return e.readFields(C,r,n),r}t.a=O},"./node_modules/ol/format/OWS.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/format/XML.js"),i=o("./node_modules/ol/xml.js"),s=o("./node_modules/ol/format/xlink.js"),a=o("./node_modules/ol/format/xsd.js"),l=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),c=[null,"http://www.opengis.net/ows/1.1"],u=Object(i.s)(c,{ServiceIdentification:Object(i.o)((function(e,t){return Object(i.v)({},O,e,t)})),ServiceProvider:Object(i.o)((function(e,t){return Object(i.v)({},S,e,t)})),OperationsMetadata:Object(i.o)((function(e,t){return Object(i.v)({},_,e,t)}))}),d=function(e){function t(){return e.call(this)||this}return l(t,e),t.prototype.readFromNode=function(e){var t=Object(i.v)({},u,e,[]);return t||null},t}(r.a),h=Object(i.s)(c,{DeliveryPoint:Object(i.o)(a.h),City:Object(i.o)(a.h),AdministrativeArea:Object(i.o)(a.h),PostalCode:Object(i.o)(a.h),Country:Object(i.o)(a.h),ElectronicMailAddress:Object(i.o)(a.h)}),p=Object(i.s)(c,{Value:Object(i.n)((function(e,t){return Object(a.h)(e)}))}),f=Object(i.s)(c,{AllowedValues:Object(i.o)((function(e,t){return Object(i.v)({},p,e,t)}))}),m=Object(i.s)(c,{Phone:Object(i.o)((function(e,t){return Object(i.v)({},b,e,t)})),Address:Object(i.o)((function(e,t){return Object(i.v)({},h,e,t)}))}),g=Object(i.s)(c,{HTTP:Object(i.o)((function(e,t){return Object(i.v)({},y,e,t)}))}),y=Object(i.s)(c,{Get:Object(i.n)((function(e,t){var o=Object(s.a)(e);if(!o)return;return Object(i.v)({href:o},w,e,t)})),Post:void 0}),v=Object(i.s)(c,{DCP:Object(i.o)((function(e,t){return Object(i.v)({},g,e,t)}))}),_=Object(i.s)(c,{Operation:function(e,t){var o=e.getAttribute("name"),n=Object(i.v)({},v,e,t);if(!n)return;t[t.length-1][o]=n}}),b=Object(i.s)(c,{Voice:Object(i.o)(a.h),Facsimile:Object(i.o)(a.h)}),w=Object(i.s)(c,{Constraint:Object(i.n)((function(e,t){var o=e.getAttribute("name");if(!o)return;return Object(i.v)({name:o},f,e,t)}))}),E=Object(i.s)(c,{IndividualName:Object(i.o)(a.h),PositionName:Object(i.o)(a.h),ContactInfo:Object(i.o)((function(e,t){return Object(i.v)({},m,e,t)}))}),O=Object(i.s)(c,{Abstract:Object(i.o)(a.h),AccessConstraints:Object(i.o)(a.h),Fees:Object(i.o)(a.h),Title:Object(i.o)(a.h),ServiceTypeVersion:Object(i.o)(a.h),ServiceType:Object(i.o)(a.h)}),S=Object(i.s)(c,{ProviderName:Object(i.o)(a.h),ProviderSite:Object(i.o)(s.a),ServiceContact:Object(i.o)((function(e,t){return Object(i.v)({},E,e,t)}))});t.a=d},"./node_modules/ol/format/WMSCapabilities.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/format/XML.js"),i=o("./node_modules/ol/xml.js"),s=o("./node_modules/ol/format/xsd.js"),a=o("./node_modules/ol/format/xlink.js"),l=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),c=[null,"http://www.opengis.net/wms"],u=Object(i.s)(c,{Service:Object(i.o)((function(e,t){return Object(i.v)({},p,e,t)})),Capability:Object(i.o)((function(e,t){return Object(i.v)({},d,e,t)}))}),d=Object(i.s)(c,{Request:Object(i.o)((function(e,t){return Object(i.v)({},w,e,t)})),Exception:Object(i.o)((function(e,t){return Object(i.v)([],y,e,t)})),Layer:Object(i.o)((function(e,t){var o=Object(i.v)({},v,e,t);if(void 0===o.Layer)return Object.assign(o,P(e,t));return o}))}),h=function(e){function t(){var t=e.call(this)||this;return t.version=void 0,t}return l(t,e),t.prototype.readFromNode=function(e){this.version=e.getAttribute("version").trim();var t=Object(i.v)({version:this.version},u,e,[]);return t||null},t}(r.a),p=Object(i.s)(c,{Name:Object(i.o)(s.h),Title:Object(i.o)(s.h),Abstract:Object(i.o)(s.h),KeywordList:Object(i.o)(I),OnlineResource:Object(i.o)(a.a),ContactInformation:Object(i.o)((function(e,t){return Object(i.v)({},f,e,t)})),Fees:Object(i.o)(s.h),AccessConstraints:Object(i.o)(s.h),LayerLimit:Object(i.o)(s.g),MaxWidth:Object(i.o)(s.g),MaxHeight:Object(i.o)(s.g)}),f=Object(i.s)(c,{ContactPersonPrimary:Object(i.o)((function(e,t){return Object(i.v)({},m,e,t)})),ContactPosition:Object(i.o)(s.h),ContactAddress:Object(i.o)((function(e,t){return Object(i.v)({},g,e,t)})),ContactVoiceTelephone:Object(i.o)(s.h),ContactFacsimileTelephone:Object(i.o)(s.h),ContactElectronicMailAddress:Object(i.o)(s.h)}),m=Object(i.s)(c,{ContactPerson:Object(i.o)(s.h),ContactOrganization:Object(i.o)(s.h)}),g=Object(i.s)(c,{AddressType:Object(i.o)(s.h),Address:Object(i.o)(s.h),City:Object(i.o)(s.h),StateOrProvince:Object(i.o)(s.h),PostCode:Object(i.o)(s.h),Country:Object(i.o)(s.h)}),y=Object(i.s)(c,{Format:Object(i.k)(s.h)}),v=Object(i.s)(c,{Name:Object(i.o)(s.h),Title:Object(i.o)(s.h),Abstract:Object(i.o)(s.h),KeywordList:Object(i.o)(I),CRS:Object(i.n)(s.h),EX_GeographicBoundingBox:Object(i.o)((function(e,t){var o=Object(i.v)({},b,e,t);if(!o)return;var n=o.westBoundLongitude,r=o.southBoundLatitude,s=o.eastBoundLongitude,a=o.northBoundLatitude;if(void 0===n||void 0===r||void 0===s||void 0===a)return;return[n,r,s,a]})),BoundingBox:Object(i.n)((function(e,t){var o=[Object(s.e)(e.getAttribute("minx")),Object(s.e)(e.getAttribute("miny")),Object(s.e)(e.getAttribute("maxx")),Object(s.e)(e.getAttribute("maxy"))],n=[Object(s.e)(e.getAttribute("resx")),Object(s.e)(e.getAttribute("resy"))];return{crs:e.getAttribute("CRS"),extent:o,res:n}})),Dimension:Object(i.n)((function(e,t){return{name:e.getAttribute("name"),units:e.getAttribute("units"),unitSymbol:e.getAttribute("unitSymbol"),default:e.getAttribute("default"),multipleValues:Object(s.b)(e.getAttribute("multipleValues")),nearestValue:Object(s.b)(e.getAttribute("nearestValue")),current:Object(s.b)(e.getAttribute("current")),values:Object(s.h)(e)}})),Attribution:Object(i.o)((function(e,t){return Object(i.v)({},_,e,t)})),AuthorityURL:Object(i.n)((function(e,t){var o=T(e,t);if(o)return o.name=e.getAttribute("name"),o;return})),Identifier:Object(i.n)(s.h),MetadataURL:Object(i.n)((function(e,t){var o=T(e,t);if(o)return o.type=e.getAttribute("type"),o;return})),DataURL:Object(i.n)(T),FeatureListURL:Object(i.n)(T),Style:Object(i.n)((function(e,t){return Object(i.v)({},x,e,t)})),MinScaleDenominator:Object(i.o)(s.d),MaxScaleDenominator:Object(i.o)(s.d),Layer:Object(i.n)(P)}),_=Object(i.s)(c,{Title:Object(i.o)(s.h),OnlineResource:Object(i.o)(a.a),LogoURL:Object(i.o)(M)}),b=Object(i.s)(c,{westBoundLongitude:Object(i.o)(s.d),eastBoundLongitude:Object(i.o)(s.d),southBoundLatitude:Object(i.o)(s.d),northBoundLatitude:Object(i.o)(s.d)}),w=Object(i.s)(c,{GetCapabilities:Object(i.o)(A),GetMap:Object(i.o)(A),GetFeatureInfo:Object(i.o)(A)}),E=Object(i.s)(c,{Format:Object(i.n)(s.h),DCPType:Object(i.n)((function(e,t){return Object(i.v)({},O,e,t)}))}),O=Object(i.s)(c,{HTTP:Object(i.o)((function(e,t){return Object(i.v)({},S,e,t)}))}),S=Object(i.s)(c,{Get:Object(i.o)(T),Post:Object(i.o)(T)}),x=Object(i.s)(c,{Name:Object(i.o)(s.h),Title:Object(i.o)(s.h),Abstract:Object(i.o)(s.h),LegendURL:Object(i.n)(M),StyleSheetURL:Object(i.o)(T),StyleURL:Object(i.o)(T)}),C=Object(i.s)(c,{Format:Object(i.o)(s.h),OnlineResource:Object(i.o)(a.a)}),j=Object(i.s)(c,{Keyword:Object(i.k)(s.h)});function P(e,t){var o=t[t.length-1],n=Object(i.v)({},v,e,t);if(n){var r=Object(s.b)(e.getAttribute("queryable"));void 0===r&&(r=o.queryable),n.queryable=void 0!==r&&r;var a=Object(s.f)(e.getAttribute("cascaded"));void 0===a&&(a=o.cascaded),n.cascaded=a;var l=Object(s.b)(e.getAttribute("opaque"));void 0===l&&(l=o.opaque),n.opaque=void 0!==l&&l;var c=Object(s.b)(e.getAttribute("noSubsets"));void 0===c&&(c=o.noSubsets),n.noSubsets=void 0!==c&&c;var u=Object(s.e)(e.getAttribute("fixedWidth"));u||(u=o.fixedWidth),n.fixedWidth=u;var d=Object(s.e)(e.getAttribute("fixedHeight"));d||(d=o.fixedHeight),n.fixedHeight=d;["Style","CRS","AuthorityURL"].forEach((function(e){if(e in o){var t=n[e]||[];n[e]=t.concat(o[e])}}));return["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach((function(e){if(!(e in n)){var t=o[e];n[e]=t}})),n}}function T(e,t){return Object(i.v)({},C,e,t)}function A(e,t){return Object(i.v)({},E,e,t)}function M(e,t){var o=T(e,t);if(o){var n=[Object(s.f)(e.getAttribute("width")),Object(s.f)(e.getAttribute("height"))];return o.size=n,o}}function I(e,t){return Object(i.v)([],j,e,t)}t.a=h},"./node_modules/ol/format/WMTSCapabilities.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/format/OWS.js"),i=o("./node_modules/ol/format/XML.js"),s=o("./node_modules/ol/extent.js"),a=o("./node_modules/ol/xml.js"),l=o("./node_modules/ol/format/xsd.js"),c=o("./node_modules/ol/format/xlink.js"),u=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),d=[null,"http://www.opengis.net/wmts/1.0"],h=[null,"http://www.opengis.net/ows/1.1"],p=Object(a.s)(d,{Contents:Object(a.o)((function(e,t){return Object(a.v)({},m,e,t)}))}),f=function(e){function t(){var t=e.call(this)||this;return t.owsParser_=new r.a,t}return u(t,e),t.prototype.readFromNode=function(e){var t=e.getAttribute("version");t&&(t=t.trim());var o=this.owsParser_.readFromNode(e);return o?(o.version=t,(o=Object(a.v)(o,p,e,[]))||null):null},t}(i.a),m=Object(a.s)(d,{Layer:Object(a.n)((function(e,t){return Object(a.v)({},g,e,t)})),TileMatrixSet:Object(a.n)((function(e,t){return Object(a.v)({},O,e,t)}))}),g=Object(a.s)(d,{Style:Object(a.n)((function(e,t){var o=Object(a.v)({},y,e,t);if(!o)return;var n="true"===e.getAttribute("isDefault");return o.isDefault=n,o})),Format:Object(a.n)(l.h),TileMatrixSetLink:Object(a.n)((function(e,t){return Object(a.v)({},v,e,t)})),Dimension:Object(a.n)((function(e,t){return Object(a.v)({},w,e,t)})),ResourceURL:Object(a.n)((function(e,t){var o=e.getAttribute("format"),n=e.getAttribute("template"),r=e.getAttribute("resourceType"),i={};o&&(i.format=o);n&&(i.template=n);r&&(i.resourceType=r);return i}))},Object(a.s)(h,{Title:Object(a.o)(l.h),Abstract:Object(a.o)(l.h),WGS84BoundingBox:Object(a.o)(x),Identifier:Object(a.o)(l.h)})),y=Object(a.s)(d,{LegendURL:Object(a.n)((function(e,t){var o={};return o.format=e.getAttribute("format"),o.href=Object(c.a)(e),o}))},Object(a.s)(h,{Title:Object(a.o)(l.h),Identifier:Object(a.o)(l.h)})),v=Object(a.s)(d,{TileMatrixSet:Object(a.o)(l.h),TileMatrixSetLimits:Object(a.o)((function(e,t){return Object(a.v)([],_,e,t)}))}),_=Object(a.s)(d,{TileMatrixLimits:Object(a.k)((function(e,t){return Object(a.v)({},b,e,t)}))}),b=Object(a.s)(d,{TileMatrix:Object(a.o)(l.h),MinTileRow:Object(a.o)(l.g),MaxTileRow:Object(a.o)(l.g),MinTileCol:Object(a.o)(l.g),MaxTileCol:Object(a.o)(l.g)}),w=Object(a.s)(d,{Default:Object(a.o)(l.h),Value:Object(a.n)(l.h)},Object(a.s)(h,{Identifier:Object(a.o)(l.h)})),E=Object(a.s)(h,{LowerCorner:Object(a.k)(C),UpperCorner:Object(a.k)(C)}),O=Object(a.s)(d,{WellKnownScaleSet:Object(a.o)(l.h),TileMatrix:Object(a.n)((function(e,t){return Object(a.v)({},S,e,t)}))},Object(a.s)(h,{SupportedCRS:Object(a.o)(l.h),Identifier:Object(a.o)(l.h),BoundingBox:Object(a.o)(x)})),S=Object(a.s)(d,{TopLeftCorner:Object(a.o)(C),ScaleDenominator:Object(a.o)(l.d),TileWidth:Object(a.o)(l.g),TileHeight:Object(a.o)(l.g),MatrixWidth:Object(a.o)(l.g),MatrixHeight:Object(a.o)(l.g)},Object(a.s)(h,{Identifier:Object(a.o)(l.h)}));function x(e,t){var o=Object(a.v)([],E,e,t);if(2==o.length)return Object(s.c)(o)}function C(e,t){var o=Object(l.h)(e).split(/\s+/);if(o&&2==o.length){var n=+o[0],r=+o[1];if(!isNaN(n)&&!isNaN(r))return[n,r]}}t.a=f},"./node_modules/ol/format/XML.js":function(e,t,o){"use strict";var n=o("./node_modules/ol/xml.js"),r=function(){function e(){}return e.prototype.read=function(e){if(e){if("string"==typeof e){var t=Object(n.t)(e);return this.readFromDocument(t)}return Object(n.i)(e)?this.readFromDocument(e):this.readFromNode(e)}return null},e.prototype.readFromDocument=function(e){for(var t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readFromNode(t);return null},e.prototype.readFromNode=function(e){},e}();t.a=r},"./node_modules/ol/format/XMLFeature.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/format/Feature.js"),i=o("./node_modules/ol/format/FormatType.js"),s=o("./node_modules/ol/util.js"),a=o("./node_modules/ol/array.js"),l=o("./node_modules/ol/xml.js"),c=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),u=function(e){function t(){var t=e.call(this)||this;return t.xmlSerializer_=Object(l.h)(),t}return c(t,e),t.prototype.getType=function(){return i.a.XML},t.prototype.readFeature=function(e,t){if(e){if("string"==typeof e){var o=Object(l.t)(e);return this.readFeatureFromDocument(o,t)}return Object(l.i)(e)?this.readFeatureFromDocument(e,t):this.readFeatureFromNode(e,t)}return null},t.prototype.readFeatureFromDocument=function(e,t){var o=this.readFeaturesFromDocument(e,t);return o.length>0?o[0]:null},t.prototype.readFeatureFromNode=function(e,t){return null},t.prototype.readFeatures=function(e,t){if(e){if("string"==typeof e){var o=Object(l.t)(e);return this.readFeaturesFromDocument(o,t)}return Object(l.i)(e)?this.readFeaturesFromDocument(e,t):this.readFeaturesFromNode(e,t)}return[]},t.prototype.readFeaturesFromDocument=function(e,t){for(var o=[],n=e.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&Object(a.c)(o,this.readFeaturesFromNode(n,t));return o},t.prototype.readFeaturesFromNode=function(e,t){return Object(s.b)()},t.prototype.readGeometry=function(e,t){if(e){if("string"==typeof e){var o=Object(l.t)(e);return this.readGeometryFromDocument(o,t)}return Object(l.i)(e)?this.readGeometryFromDocument(e,t):this.readGeometryFromNode(e,t)}return null},t.prototype.readGeometryFromDocument=function(e,t){return null},t.prototype.readGeometryFromNode=function(e,t){return null},t.prototype.readProjection=function(e){if(e){if("string"==typeof e){var t=Object(l.t)(e);return this.readProjectionFromDocument(t)}return Object(l.i)(e)?this.readProjectionFromDocument(e):this.readProjectionFromNode(e)}return null},t.prototype.readProjectionFromDocument=function(e){return this.dataProjection},t.prototype.readProjectionFromNode=function(e){return this.dataProjection},t.prototype.writeFeature=function(e,t){var o=this.writeFeatureNode(e,t);return this.xmlSerializer_.serializeToString(o)},t.prototype.writeFeatureNode=function(e,t){return null},t.prototype.writeFeatures=function(e,t){var o=this.writeFeaturesNode(e,t);return this.xmlSerializer_.serializeToString(o)},t.prototype.writeFeaturesNode=function(e,t){return null},t.prototype.writeGeometry=function(e,t){var o=this.writeGeometryNode(e,t);return this.xmlSerializer_.serializeToString(o)},t.prototype.writeGeometryNode=function(e,t){return null},t}(r.a);t.a=u},"./node_modules/ol/format/xlink.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return n}));function n(e){return e.getAttributeNS("http://www.w3.org/1999/xlink","href")}},"./node_modules/ol/format/xsd.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return i})),o.d(t,"b",(function(){return s})),o.d(t,"c",(function(){return a})),o.d(t,"d",(function(){return l})),o.d(t,"e",(function(){return c})),o.d(t,"g",(function(){return u})),o.d(t,"f",(function(){return d})),o.d(t,"h",(function(){return h})),o.d(t,"i",(function(){return p})),o.d(t,"j",(function(){return f})),o.d(t,"k",(function(){return m})),o.d(t,"l",(function(){return g})),o.d(t,"m",(function(){return y})),o.d(t,"n",(function(){return v}));var n=o("./node_modules/ol/xml.js"),r=o("./node_modules/ol/string.js");function i(e){return s(Object(n.d)(e,!1))}function s(e){var t=/^\s*(true|1)|(false|0)\s*$/.exec(e);return t?void 0!==t[1]||!1:void 0}function a(e){var t=Object(n.d)(e,!1),o=Date.parse(t);return isNaN(o)?void 0:o/1e3}function l(e){return c(Object(n.d)(e,!1))}function c(e){var t=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(e);return t?parseFloat(t[1]):void 0}function u(e){return d(Object(n.d)(e,!1))}function d(e){var t=/^\s*(\d+)\s*$/.exec(e);return t?parseInt(t[1],10):void 0}function h(e){return Object(n.d)(e,!1).trim()}function p(e,t){v(e,t?"1":"0")}function f(e,t){e.appendChild(Object(n.g)().createCDATASection(t))}function m(e,t){var o=new Date(1e3*t),i=o.getUTCFullYear()+"-"+Object(r.b)(o.getUTCMonth()+1,2)+"-"+Object(r.b)(o.getUTCDate(),2)+"T"+Object(r.b)(o.getUTCHours(),2)+":"+Object(r.b)(o.getUTCMinutes(),2)+":"+Object(r.b)(o.getUTCSeconds(),2)+"Z";e.appendChild(Object(n.g)().createTextNode(i))}function g(e,t){var o=t.toPrecision();e.appendChild(Object(n.g)().createTextNode(o))}function y(e,t){var o=t.toString();e.appendChild(Object(n.g)().createTextNode(o))}function v(e,t){e.appendChild(Object(n.g)().createTextNode(t))}},"./node_modules/ol/functions.js":function(e,t,o){"use strict";o.d(t,"b",(function(){return r})),o.d(t,"a",(function(){return i})),o.d(t,"c",(function(){return s})),o.d(t,"d",(function(){return a}));var n=o("./node_modules/ol/array.js");function r(){return!0}function i(){return!1}function s(){}function a(e){var t,o,r,i=!1;return function(){var s=Array.prototype.slice.call(arguments);return i&&this===r&&Object(n.b)(s,o)||(i=!0,r=this,o=s,t=e.apply(this,arguments)),t}}},"./node_modules/ol/geom/Circle.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/geom/GeometryType.js"),i=o("./node_modules/ol/geom/SimpleGeometry.js"),s=o("./node_modules/ol/extent.js"),a=o("./node_modules/ol/geom/flat/deflate.js"),l=o("./node_modules/ol/geom/flat/transform.js"),c=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),u=function(e){function t(t,o,n){var r=e.call(this)||this;if(void 0!==n&&void 0===o)r.setFlatCoordinates(n,t);else{var i=o||0;r.setCenterAndRadius(t,i,n)}return r}return c(t,e),t.prototype.clone=function(){var e=new t(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e},t.prototype.closestPointXY=function(e,t,o,n){var r=this.flatCoordinates,i=e-r[0],s=t-r[1],a=i*i+s*s;if(a<n){if(0===a)for(var l=0;l<this.stride;++l)o[l]=r[l];else{var c=this.getRadius()/Math.sqrt(a);o[0]=r[0]+c*i,o[1]=r[1]+c*s;for(l=2;l<this.stride;++l)o[l]=r[l]}return o.length=this.stride,a}return n},t.prototype.containsXY=function(e,t){var o=this.flatCoordinates,n=e-o[0],r=t-o[1];return n*n+r*r<=this.getRadiusSquared_()},t.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},t.prototype.computeExtent=function(e){var t=this.flatCoordinates,o=t[this.stride]-t[0];return Object(s.l)(t[0]-o,t[1]-o,t[0]+o,t[1]+o,e)},t.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},t.prototype.getRadiusSquared_=function(){var e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t},t.prototype.getType=function(){return r.a.CIRCLE},t.prototype.intersectsExtent=function(e){var t=this.getExtent();if(Object(s.O)(e,t)){var o=this.getCenter();return e[0]<=o[0]&&e[2]>=o[0]||(e[1]<=o[1]&&e[3]>=o[1]||Object(s.y)(e,this.intersectsCoordinate.bind(this)))}return!1},t.prototype.setCenter=function(e){var t=this.stride,o=this.flatCoordinates[t]-this.flatCoordinates[0],n=e.slice();n[t]=n[0]+o;for(var r=1;r<t;++r)n[t+r]=e[r];this.setFlatCoordinates(this.layout,n),this.changed()},t.prototype.setCenterAndRadius=function(e,t,o){this.setLayout(o,e,0),this.flatCoordinates||(this.flatCoordinates=[]);var n=this.flatCoordinates,r=Object(a.a)(n,0,e,this.stride);n[r++]=n[0]+t;for(var i=1,s=this.stride;i<s;++i)n[r++]=n[i];n.length=r,this.changed()},t.prototype.getCoordinates=function(){return null},t.prototype.setCoordinates=function(e,t){},t.prototype.setRadius=function(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()},t.prototype.rotate=function(e,t){var o=this.getCenter(),n=this.getStride();this.setCenter(Object(l.a)(o,0,o.length,n,e,t,o)),this.changed()},t.prototype.translate=function(e,t){var o=this.getCenter(),n=this.getStride();this.setCenter(Object(l.d)(o,0,o.length,n,e,t,o)),this.changed()},t}(i.a);u.prototype.transform,t.a=u},"./node_modules/ol/geom/Geometry.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/Object.js"),i=o("./node_modules/ol/proj/Units.js"),s=o("./node_modules/ol/util.js"),a=o("./node_modules/ol/transform.js"),l=o("./node_modules/ol/extent.js"),c=o("./node_modules/ol/proj.js"),u=o("./node_modules/ol/functions.js"),d=o("./node_modules/ol/geom/flat/transform.js"),h=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),p=Object(a.d)(),f=function(e){function t(){var t=e.call(this)||this;return t.extent_=Object(l.k)(),t.extentRevision_=-1,t.simplifiedGeometryMaxMinSquaredTolerance=0,t.simplifiedGeometryRevision=0,t.simplifyTransformedInternal=Object(u.d)((function(e,t,o){if(!o)return this.getSimplifiedGeometry(t);var n=this.clone();return n.applyTransform(o),n.getSimplifiedGeometry(t)})),t}return h(t,e),t.prototype.simplifyTransformed=function(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)},t.prototype.clone=function(){return Object(s.b)()},t.prototype.closestPointXY=function(e,t,o,n){return Object(s.b)()},t.prototype.containsXY=function(e,t){var o=this.getClosestPoint([e,t]);return o[0]===e&&o[1]===t},t.prototype.getClosestPoint=function(e,t){var o=t||[NaN,NaN];return this.closestPointXY(e[0],e[1],o,1/0),o},t.prototype.intersectsCoordinate=function(e){return this.containsXY(e[0],e[1])},t.prototype.computeExtent=function(e){return Object(s.b)()},t.prototype.getExtent=function(e){if(this.extentRevision_!=this.getRevision()){var t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Object(l.m)(t),this.extentRevision_=this.getRevision()}return Object(l.R)(this.extent_,e)},t.prototype.rotate=function(e,t){Object(s.b)()},t.prototype.scale=function(e,t,o){Object(s.b)()},t.prototype.simplify=function(e){return this.getSimplifiedGeometry(e*e)},t.prototype.getSimplifiedGeometry=function(e){return Object(s.b)()},t.prototype.getType=function(){return Object(s.b)()},t.prototype.applyTransform=function(e){Object(s.b)()},t.prototype.intersectsExtent=function(e){return Object(s.b)()},t.prototype.translate=function(e,t){Object(s.b)()},t.prototype.transform=function(e,t){var o=Object(c.t)(e),n=o.getUnits()==i.b.TILE_PIXELS?function(e,n,r){var i=o.getExtent(),s=o.getWorldExtent(),u=Object(l.G)(s)/Object(l.G)(i);return Object(a.b)(p,s[0],s[3],u,-u,0,0,0),Object(d.c)(e,0,e.length,r,p,n),Object(c.v)(o,t)(e,n,r)}:Object(c.v)(o,t);return this.applyTransform(n),this},t}(r.b);t.a=f},"./node_modules/ol/geom/GeometryCollection.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/events/EventType.js"),i=o("./node_modules/ol/geom/Geometry.js"),s=o("./node_modules/ol/geom/GeometryType.js"),a=o("./node_modules/ol/extent.js"),l=o("./node_modules/ol/events.js"),c=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),u=function(e){function t(t){var o=e.call(this)||this;return o.geometries_=t||null,o.changeEventsKeys_=[],o.listenGeometriesChange_(),o}return c(t,e),t.prototype.unlistenGeometriesChange_=function(){this.changeEventsKeys_.forEach(l.c),this.changeEventsKeys_.length=0},t.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var e=0,t=this.geometries_.length;e<t;++e)this.changeEventsKeys_.push(Object(l.a)(this.geometries_[e],r.a.CHANGE,this.changed,this))},t.prototype.clone=function(){var e=new t(null);return e.setGeometries(this.geometries_),e.applyProperties(this),e},t.prototype.closestPointXY=function(e,t,o,n){if(n<Object(a.f)(this.getExtent(),e,t))return n;for(var r=this.geometries_,i=0,s=r.length;i<s;++i)n=r[i].closestPointXY(e,t,o,n);return n},t.prototype.containsXY=function(e,t){for(var o=this.geometries_,n=0,r=o.length;n<r;++n)if(o[n].containsXY(e,t))return!0;return!1},t.prototype.computeExtent=function(e){Object(a.m)(e);for(var t=this.geometries_,o=0,n=t.length;o<n;++o)Object(a.s)(e,t[o].getExtent());return e},t.prototype.getGeometries=function(){return d(this.geometries_)},t.prototype.getGeometriesArray=function(){return this.geometries_},t.prototype.getGeometriesArrayRecursive=function(){for(var e=[],t=this.geometries_,o=0,n=t.length;o<n;++o)t[o].getType()===this.getType()?e=e.concat(t[o].getGeometriesArrayRecursive()):e.push(t[o]);return e},t.prototype.getSimplifiedGeometry=function(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var o=[],n=this.geometries_,r=!1,i=0,s=n.length;i<s;++i){var a=n[i],l=a.getSimplifiedGeometry(e);o.push(l),l!==a&&(r=!0)}if(r){var c=new t(null);return c.setGeometriesArray(o),c}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this},t.prototype.getType=function(){return s.a.GEOMETRY_COLLECTION},t.prototype.intersectsExtent=function(e){for(var t=this.geometries_,o=0,n=t.length;o<n;++o)if(t[o].intersectsExtent(e))return!0;return!1},t.prototype.isEmpty=function(){return 0===this.geometries_.length},t.prototype.rotate=function(e,t){for(var o=this.geometries_,n=0,r=o.length;n<r;++n)o[n].rotate(e,t);this.changed()},t.prototype.scale=function(e,t,o){var n=o;n||(n=Object(a.C)(this.getExtent()));for(var r=this.geometries_,i=0,s=r.length;i<s;++i)r[i].scale(e,t,n);this.changed()},t.prototype.setGeometries=function(e){this.setGeometriesArray(d(e))},t.prototype.setGeometriesArray=function(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()},t.prototype.applyTransform=function(e){for(var t=this.geometries_,o=0,n=t.length;o<n;++o)t[o].applyTransform(e);this.changed()},t.prototype.translate=function(e,t){for(var o=this.geometries_,n=0,r=o.length;n<r;++n)o[n].translate(e,t);this.changed()},t.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),e.prototype.disposeInternal.call(this)},t}(i.a);function d(e){for(var t=[],o=0,n=e.length;o<n;++o)t.push(e[o].clone());return t}t.a=u},"./node_modules/ol/geom/GeometryLayout.js":function(e,t,o){"use strict";t.a={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"}},"./node_modules/ol/geom/GeometryType.js":function(e,t,o){"use strict";t.a={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"}},"./node_modules/ol/geom/LineString.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/geom/GeometryLayout.js"),i=o("./node_modules/ol/geom/GeometryType.js"),s=o("./node_modules/ol/geom/SimpleGeometry.js"),a=o("./node_modules/ol/geom/flat/closest.js"),l=o("./node_modules/ol/extent.js"),c=o("./node_modules/ol/geom/flat/deflate.js"),u=o("./node_modules/ol/geom/flat/simplify.js"),d=o("./node_modules/ol/array.js"),h=o("./node_modules/ol/geom/flat/segments.js"),p=o("./node_modules/ol/geom/flat/inflate.js"),f=o("./node_modules/ol/geom/flat/interpolate.js"),m=o("./node_modules/ol/geom/flat/intersectsextent.js"),g=o("./node_modules/ol/geom/flat/length.js"),y=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),v=function(e){function t(t,o){var n=e.call(this)||this;return n.flatMidpoint_=null,n.flatMidpointRevision_=-1,n.maxDelta_=-1,n.maxDeltaRevision_=-1,void 0===o||Array.isArray(t[0])?n.setCoordinates(t,o):n.setFlatCoordinates(o,t),n}return y(t,e),t.prototype.appendCoordinate=function(e){this.flatCoordinates?Object(d.c)(this.flatCoordinates,e):this.flatCoordinates=e.slice(),this.changed()},t.prototype.clone=function(){var e=new t(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e},t.prototype.closestPointXY=function(e,t,o,n){return n<Object(l.f)(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(a.e)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(a.d)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,o,n))},t.prototype.forEachSegment=function(e){return Object(h.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)},t.prototype.getCoordinateAtM=function(e,t){if(this.layout!=r.a.XYM&&this.layout!=r.a.XYZM)return null;var o=void 0!==t&&t;return Object(f.b)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,o)},t.prototype.getCoordinates=function(){return Object(p.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},t.prototype.getCoordinateAt=function(e,t){return Object(f.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)},t.prototype.getLength=function(){return Object(g.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},t.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},t.prototype.getSimplifiedGeometryInternal=function(e){var o=[];return o.length=Object(u.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,o,0),new t(o,r.a.XY)},t.prototype.getType=function(){return i.a.LINE_STRING},t.prototype.intersectsExtent=function(e){return Object(m.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)},t.prototype.setCoordinates=function(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(c.b)(this.flatCoordinates,0,e,this.stride),this.changed()},t}(s.a);t.a=v},"./node_modules/ol/geom/LinearRing.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/geom/GeometryLayout.js"),i=o("./node_modules/ol/geom/GeometryType.js"),s=o("./node_modules/ol/geom/SimpleGeometry.js"),a=o("./node_modules/ol/geom/flat/closest.js"),l=o("./node_modules/ol/extent.js"),c=o("./node_modules/ol/geom/flat/deflate.js"),u=o("./node_modules/ol/geom/flat/simplify.js"),d=o("./node_modules/ol/geom/flat/inflate.js"),h=o("./node_modules/ol/geom/flat/area.js"),p=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),f=function(e){function t(t,o){var n=e.call(this)||this;return n.maxDelta_=-1,n.maxDeltaRevision_=-1,void 0===o||Array.isArray(t[0])?n.setCoordinates(t,o):n.setFlatCoordinates(o,t),n}return p(t,e),t.prototype.clone=function(){return new t(this.flatCoordinates.slice(),this.layout)},t.prototype.closestPointXY=function(e,t,o,n){return n<Object(l.f)(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(a.e)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(a.d)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,o,n))},t.prototype.getArea=function(){return Object(h.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},t.prototype.getCoordinates=function(){return Object(d.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},t.prototype.getSimplifiedGeometryInternal=function(e){var o=[];return o.length=Object(u.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,o,0),new t(o,r.a.XY)},t.prototype.getType=function(){return i.a.LINEAR_RING},t.prototype.intersectsExtent=function(e){return!1},t.prototype.setCoordinates=function(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(c.b)(this.flatCoordinates,0,e,this.stride),this.changed()},t}(s.a);t.a=f},"./node_modules/ol/geom/MultiLineString.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/geom/GeometryLayout.js"),i=o("./node_modules/ol/geom/GeometryType.js"),s=o("./node_modules/ol/geom/LineString.js"),a=o("./node_modules/ol/geom/SimpleGeometry.js"),l=o("./node_modules/ol/geom/flat/closest.js"),c=o("./node_modules/ol/extent.js"),u=o("./node_modules/ol/geom/flat/deflate.js"),d=o("./node_modules/ol/geom/flat/simplify.js"),h=o("./node_modules/ol/array.js"),p=o("./node_modules/ol/geom/flat/inflate.js"),f=o("./node_modules/ol/geom/flat/interpolate.js"),m=o("./node_modules/ol/geom/flat/intersectsextent.js"),g=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),y=function(e){function t(t,o,n){var r=e.call(this)||this;if(r.ends_=[],r.maxDelta_=-1,r.maxDeltaRevision_=-1,Array.isArray(t[0]))r.setCoordinates(t,o);else if(void 0!==o&&n)r.setFlatCoordinates(o,t),r.ends_=n;else{for(var i=r.getLayout(),s=t,a=[],l=[],c=0,u=s.length;c<u;++c){var d=s[c];0===c&&(i=d.getLayout()),Object(h.c)(a,d.getFlatCoordinates()),l.push(a.length)}r.setFlatCoordinates(i,a),r.ends_=l}return r}return g(t,e),t.prototype.appendLineString=function(e){this.flatCoordinates?Object(h.c)(this.flatCoordinates,e.getFlatCoordinates().slice()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},t.prototype.clone=function(){var e=new t(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e},t.prototype.closestPointXY=function(e,t,o,n){return n<Object(c.f)(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(l.a)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(l.b)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,o,n))},t.prototype.getCoordinateAtM=function(e,t,o){if(this.layout!=r.a.XYM&&this.layout!=r.a.XYZM||0===this.flatCoordinates.length)return null;var n=void 0!==t&&t,i=void 0!==o&&o;return Object(f.c)(this.flatCoordinates,0,this.ends_,this.stride,e,n,i)},t.prototype.getCoordinates=function(){return Object(p.b)(this.flatCoordinates,0,this.ends_,this.stride)},t.prototype.getEnds=function(){return this.ends_},t.prototype.getLineString=function(e){return e<0||this.ends_.length<=e?null:new s.a(this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e]),this.layout)},t.prototype.getLineStrings=function(){for(var e=this.flatCoordinates,t=this.ends_,o=this.layout,n=[],r=0,i=0,a=t.length;i<a;++i){var l=t[i],c=new s.a(e.slice(r,l),o);n.push(c),r=l}return n},t.prototype.getFlatMidpoints=function(){for(var e=[],t=this.flatCoordinates,o=0,n=this.ends_,r=this.stride,i=0,s=n.length;i<s;++i){var a=n[i],l=Object(f.a)(t,o,a,r,.5);Object(h.c)(e,l),o=a}return e},t.prototype.getSimplifiedGeometryInternal=function(e){var o=[],n=[];return o.length=Object(d.b)(this.flatCoordinates,0,this.ends_,this.stride,e,o,0,n),new t(o,r.a.XY,n)},t.prototype.getType=function(){return i.a.MULTI_LINE_STRING},t.prototype.intersectsExtent=function(e){return Object(m.b)(this.flatCoordinates,0,this.ends_,this.stride,e)},t.prototype.setCoordinates=function(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);var o=Object(u.c)(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=0===o.length?0:o[o.length-1],this.changed()},t}(a.a);t.a=y},"./node_modules/ol/geom/MultiPoint.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/geom/GeometryType.js"),i=o("./node_modules/ol/geom/Point.js"),s=o("./node_modules/ol/geom/SimpleGeometry.js"),a=o("./node_modules/ol/extent.js"),l=o("./node_modules/ol/geom/flat/deflate.js"),c=o("./node_modules/ol/array.js"),u=o("./node_modules/ol/geom/flat/inflate.js"),d=o("./node_modules/ol/math.js"),h=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),p=function(e){function t(t,o){var n=e.call(this)||this;return o&&!Array.isArray(t[0])?n.setFlatCoordinates(o,t):n.setCoordinates(t,o),n}return h(t,e),t.prototype.appendPoint=function(e){this.flatCoordinates?Object(c.c)(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.changed()},t.prototype.clone=function(){var e=new t(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e},t.prototype.closestPointXY=function(e,t,o,n){if(n<Object(a.f)(this.getExtent(),e,t))return n;for(var r=this.flatCoordinates,i=this.stride,s=0,l=r.length;s<l;s+=i){var c=Object(d.g)(e,t,r[s],r[s+1]);if(c<n){n=c;for(var u=0;u<i;++u)o[u]=r[s+u];o.length=i}}return n},t.prototype.getCoordinates=function(){return Object(u.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},t.prototype.getPoint=function(e){var t=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return e<0||t<=e?null:new i.a(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)},t.prototype.getPoints=function(){for(var e=this.flatCoordinates,t=this.layout,o=this.stride,n=[],r=0,s=e.length;r<s;r+=o){var a=new i.a(e.slice(r,r+o),t);n.push(a)}return n},t.prototype.getType=function(){return r.a.MULTI_POINT},t.prototype.intersectsExtent=function(e){for(var t=this.flatCoordinates,o=this.stride,n=0,r=t.length;n<r;n+=o){var i=t[n],s=t[n+1];if(Object(a.i)(e,i,s))return!0}return!1},t.prototype.setCoordinates=function(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(l.b)(this.flatCoordinates,0,e,this.stride),this.changed()},t}(s.a);t.a=p},"./node_modules/ol/geom/MultiPolygon.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/geom/GeometryLayout.js"),i=o("./node_modules/ol/geom/GeometryType.js"),s=o("./node_modules/ol/geom/MultiPoint.js"),a=o("./node_modules/ol/geom/Polygon.js"),l=o("./node_modules/ol/geom/SimpleGeometry.js"),c=o("./node_modules/ol/geom/flat/closest.js"),u=o("./node_modules/ol/extent.js"),d=o("./node_modules/ol/geom/flat/deflate.js"),h=o("./node_modules/ol/array.js"),p=o("./node_modules/ol/geom/flat/interiorpoint.js"),f=o("./node_modules/ol/geom/flat/inflate.js"),m=o("./node_modules/ol/geom/flat/intersectsextent.js"),g=o("./node_modules/ol/geom/flat/orient.js"),y=o("./node_modules/ol/geom/flat/area.js"),v=o("./node_modules/ol/geom/flat/center.js"),_=o("./node_modules/ol/geom/flat/contains.js"),b=o("./node_modules/ol/geom/flat/simplify.js"),w=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),E=function(e){function t(t,o,n){var r=e.call(this)||this;if(r.endss_=[],r.flatInteriorPointsRevision_=-1,r.flatInteriorPoints_=null,r.maxDelta_=-1,r.maxDeltaRevision_=-1,r.orientedRevision_=-1,r.orientedFlatCoordinates_=null,!n&&!Array.isArray(t[0])){for(var i=r.getLayout(),s=t,a=[],l=[],c=0,u=s.length;c<u;++c){var d=s[c];0===c&&(i=d.getLayout());for(var p=a.length,f=d.getEnds(),m=0,g=f.length;m<g;++m)f[m]+=p;Object(h.c)(a,d.getFlatCoordinates()),l.push(f)}o=i,t=a,n=l}return void 0!==o&&n?(r.setFlatCoordinates(o,t),r.endss_=n):r.setCoordinates(t,o),r}return w(t,e),t.prototype.appendPolygon=function(e){var t;if(this.flatCoordinates){var o=this.flatCoordinates.length;Object(h.c)(this.flatCoordinates,e.getFlatCoordinates());for(var n=0,r=(t=e.getEnds().slice()).length;n<r;++n)t[n]+=o}else this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();this.endss_.push(t),this.changed()},t.prototype.clone=function(){for(var e=this.endss_.length,o=new Array(e),n=0;n<e;++n)o[n]=this.endss_[n].slice();var r=new t(this.flatCoordinates.slice(),this.layout,o);return r.applyProperties(this),r},t.prototype.closestPointXY=function(e,t,o,n){return n<Object(u.f)(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(c.f)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(c.c)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,o,n))},t.prototype.containsXY=function(e,t){return Object(_.d)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)},t.prototype.getArea=function(){return Object(y.c)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},t.prototype.getCoordinates=function(e){var t;return void 0!==e?(t=this.getOrientedFlatCoordinates().slice(),Object(g.e)(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,Object(f.c)(t,0,this.endss_,this.stride)},t.prototype.getEndss=function(){return this.endss_},t.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var e=Object(v.a)(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Object(p.b)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},t.prototype.getInteriorPoints=function(){return new s.a(this.getFlatInteriorPoints().slice(),r.a.XYM)},t.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var e=this.flatCoordinates;Object(g.c)(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Object(g.e)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},t.prototype.getSimplifiedGeometryInternal=function(e){var o=[],n=[];return o.length=Object(b.f)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),o,0,n),new t(o,r.a.XY,n)},t.prototype.getPolygon=function(e){if(e<0||this.endss_.length<=e)return null;var t;if(0===e)t=0;else{var o=this.endss_[e-1];t=o[o.length-1]}var n=this.endss_[e].slice(),r=n[n.length-1];if(0!==t)for(var i=0,s=n.length;i<s;++i)n[i]-=t;return new a.b(this.flatCoordinates.slice(t,r),this.layout,n)},t.prototype.getPolygons=function(){for(var e=this.layout,t=this.flatCoordinates,o=this.endss_,n=[],r=0,i=0,s=o.length;i<s;++i){var l=o[i].slice(),c=l[l.length-1];if(0!==r)for(var u=0,d=l.length;u<d;++u)l[u]-=r;var h=new a.b(t.slice(r,c),e,l);n.push(h),r=c}return n},t.prototype.getType=function(){return i.a.MULTI_POLYGON},t.prototype.intersectsExtent=function(e){return Object(m.e)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)},t.prototype.setCoordinates=function(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);var o=Object(d.d)(this.flatCoordinates,0,e,this.stride,this.endss_);if(0===o.length)this.flatCoordinates.length=0;else{var n=o[o.length-1];this.flatCoordinates.length=0===n.length?0:n[n.length-1]}this.changed()},t}(l.a);t.a=E},"./node_modules/ol/geom/Point.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/geom/GeometryType.js"),i=o("./node_modules/ol/geom/SimpleGeometry.js"),s=o("./node_modules/ol/extent.js"),a=o("./node_modules/ol/geom/flat/deflate.js"),l=o("./node_modules/ol/math.js"),c=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),u=function(e){function t(t,o){var n=e.call(this)||this;return n.setCoordinates(t,o),n}return c(t,e),t.prototype.clone=function(){var e=new t(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e},t.prototype.closestPointXY=function(e,t,o,n){var r=this.flatCoordinates,i=Object(l.g)(e,t,r[0],r[1]);if(i<n){for(var s=this.stride,a=0;a<s;++a)o[a]=r[a];return o.length=s,i}return n},t.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},t.prototype.computeExtent=function(e){return Object(s.n)(this.flatCoordinates,e)},t.prototype.getType=function(){return r.a.POINT},t.prototype.intersectsExtent=function(e){return Object(s.i)(e,this.flatCoordinates[0],this.flatCoordinates[1])},t.prototype.setCoordinates=function(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(a.a)(this.flatCoordinates,0,e,this.stride),this.changed()},t}(i.a);t.a=u},"./node_modules/ol/geom/Polygon.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return S})),o.d(t,"d",(function(){return x})),o.d(t,"c",(function(){return C})),o.d(t,"e",(function(){return j}));var n,r=o("./node_modules/ol/geom/GeometryLayout.js"),i=o("./node_modules/ol/geom/GeometryType.js"),s=o("./node_modules/ol/geom/LinearRing.js"),a=o("./node_modules/ol/geom/Point.js"),l=o("./node_modules/ol/geom/SimpleGeometry.js"),c=o("./node_modules/ol/geom/flat/closest.js"),u=o("./node_modules/ol/extent.js"),d=o("./node_modules/ol/geom/flat/deflate.js"),h=o("./node_modules/ol/array.js"),p=o("./node_modules/ol/geom/flat/interiorpoint.js"),f=o("./node_modules/ol/geom/flat/inflate.js"),m=o("./node_modules/ol/geom/flat/intersectsextent.js"),g=o("./node_modules/ol/geom/flat/orient.js"),y=o("./node_modules/ol/geom/flat/area.js"),v=o("./node_modules/ol/geom/flat/contains.js"),_=o("./node_modules/ol/math.js"),b=o("./node_modules/ol/geom/flat/simplify.js"),w=o("./node_modules/ol/sphere.js"),E=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),O=function(e){function t(t,o,n){var r=e.call(this)||this;return r.ends_=[],r.flatInteriorPointRevision_=-1,r.flatInteriorPoint_=null,r.maxDelta_=-1,r.maxDeltaRevision_=-1,r.orientedRevision_=-1,r.orientedFlatCoordinates_=null,void 0!==o&&n?(r.setFlatCoordinates(o,t),r.ends_=n):r.setCoordinates(t,o),r}return E(t,e),t.prototype.appendLinearRing=function(e){this.flatCoordinates?Object(h.c)(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},t.prototype.clone=function(){var e=new t(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e},t.prototype.closestPointXY=function(e,t,o,n){return n<Object(u.f)(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(c.a)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(c.b)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,o,n))},t.prototype.containsXY=function(e,t){return Object(v.c)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)},t.prototype.getArea=function(){return Object(y.b)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},t.prototype.getCoordinates=function(e){var t;return void 0!==e?(t=this.getOrientedFlatCoordinates().slice(),Object(g.d)(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,Object(f.b)(t,0,this.ends_,this.stride)},t.prototype.getEnds=function(){return this.ends_},t.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var e=Object(u.C)(this.getExtent());this.flatInteriorPoint_=Object(p.a)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},t.prototype.getInteriorPoint=function(){return new a.a(this.getFlatInteriorPoint(),r.a.XYM)},t.prototype.getLinearRingCount=function(){return this.ends_.length},t.prototype.getLinearRing=function(e){return e<0||this.ends_.length<=e?null:new s.a(this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e]),this.layout)},t.prototype.getLinearRings=function(){for(var e=this.layout,t=this.flatCoordinates,o=this.ends_,n=[],r=0,i=0,a=o.length;i<a;++i){var l=o[i],c=new s.a(t.slice(r,l),e);n.push(c),r=l}return n},t.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var e=this.flatCoordinates;Object(g.b)(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Object(g.d)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},t.prototype.getSimplifiedGeometryInternal=function(e){var o=[],n=[];return o.length=Object(b.e)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),o,0,n),new t(o,r.a.XY,n)},t.prototype.getType=function(){return i.a.POLYGON},t.prototype.intersectsExtent=function(e){return Object(m.d)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)},t.prototype.setCoordinates=function(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);var o=Object(d.c)(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=0===o.length?0:o[o.length-1],this.changed()},t}(l.a);function S(e,t,o,n){for(var i=o||32,s=[],a=0;a<i;++a)Object(h.c)(s,Object(w.e)(e,t,2*Math.PI*a/i,n));return s.push(s[0],s[1]),new O(s,r.a.XY,[s.length])}function x(e){var t=e[0],o=e[1],n=e[2],i=e[3],s=[t,o,t,i,n,i,n,o,t,o];return new O(s,r.a.XY,[s.length])}function C(e,t,o){for(var n=t||32,r=e.getStride(),i=e.getLayout(),s=e.getCenter(),a=r*(n+1),l=new Array(a),c=0;c<a;c+=r){l[c]=0,l[c+1]=0;for(var u=2;u<r;u++)l[c+u]=s[u]}var d=[l.length],h=new O(l,i,d);return j(h,s,e.getRadius(),o),h}function j(e,t,o,n){for(var r=e.getFlatCoordinates(),i=e.getStride(),s=r.length/i-1,a=n||0,l=0;l<=s;++l){var c=l*i,u=a+2*Object(_.e)(l,s)*Math.PI/s;r[c]=t[0]+o*Math.cos(u),r[c+1]=t[1]+o*Math.sin(u)}e.changed()}t.b=O},"./node_modules/ol/geom/SimpleGeometry.js":function(e,t,o){"use strict";o.d(t,"b",(function(){return d})),o.d(t,"c",(function(){return h}));var n,r=o("./node_modules/ol/geom/Geometry.js"),i=o("./node_modules/ol/geom/GeometryLayout.js"),s=o("./node_modules/ol/util.js"),a=o("./node_modules/ol/extent.js"),l=o("./node_modules/ol/geom/flat/transform.js"),c=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),u=function(e){function t(){var t=e.call(this)||this;return t.layout=i.a.XY,t.stride=2,t.flatCoordinates=null,t}return c(t,e),t.prototype.computeExtent=function(e){return Object(a.p)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)},t.prototype.getCoordinates=function(){return Object(s.b)()},t.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},t.prototype.getFlatCoordinates=function(){return this.flatCoordinates},t.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},t.prototype.getLayout=function(){return this.layout},t.prototype.getSimplifiedGeometry=function(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)},t.prototype.getSimplifiedGeometryInternal=function(e){return this},t.prototype.getStride=function(){return this.stride},t.prototype.setFlatCoordinates=function(e,t){this.stride=d(e),this.layout=e,this.flatCoordinates=t},t.prototype.setCoordinates=function(e,t){Object(s.b)()},t.prototype.setLayout=function(e,t,o){var n;if(e)n=d(e);else{for(var r=0;r<o;++r){if(0===t.length)return this.layout=i.a.XY,void(this.stride=2);t=t[0]}e=function(e){var t;2==e?t=i.a.XY:3==e?t=i.a.XYZ:4==e&&(t=i.a.XYZM);return t}(n=t.length)}this.layout=e,this.stride=n},t.prototype.applyTransform=function(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},t.prototype.rotate=function(e,t){var o=this.getFlatCoordinates();if(o){var n=this.getStride();Object(l.a)(o,0,o.length,n,e,t,o),this.changed()}},t.prototype.scale=function(e,t,o){var n=t;void 0===n&&(n=e);var r=o;r||(r=Object(a.C)(this.getExtent()));var i=this.getFlatCoordinates();if(i){var s=this.getStride();Object(l.b)(i,0,i.length,s,e,n,r,i),this.changed()}},t.prototype.translate=function(e,t){var o=this.getFlatCoordinates();if(o){var n=this.getStride();Object(l.d)(o,0,o.length,n,e,t,o),this.changed()}},t}(r.a);function d(e){var t;return e==i.a.XY?t=2:e==i.a.XYZ||e==i.a.XYM?t=3:e==i.a.XYZM&&(t=4),t}function h(e,t,o){var n=e.getFlatCoordinates();if(n){var r=e.getStride();return Object(l.c)(n,0,n.length,r,t,o)}return null}t.a=u},"./node_modules/ol/geom/flat/area.js":function(e,t,o){"use strict";function n(e,t,o,n){for(var r=0,i=e[o-n],s=e[o-n+1];t<o;t+=n){var a=e[t],l=e[t+1];r+=s*a-i*l,i=a,s=l}return r/2}function r(e,t,o,r){for(var i=0,s=0,a=o.length;s<a;++s){var l=o[s];i+=n(e,t,l,r),t=l}return i}function i(e,t,o,n){for(var i=0,s=0,a=o.length;s<a;++s){var l=o[s];i+=r(e,t,l,n),t=l[l.length-1]}return i}o.d(t,"a",(function(){return n})),o.d(t,"b",(function(){return r})),o.d(t,"c",(function(){return i}))},"./node_modules/ol/geom/flat/center.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return r}));var n=o("./node_modules/ol/extent.js");function r(e,t,o,r){for(var i=[],s=Object(n.k)(),a=0,l=o.length;a<l;++a){var c=o[a];s=Object(n.p)(e,t,c[0],r),i.push((s[0]+s[2])/2,(s[1]+s[3])/2),t=c[c.length-1]}return i}},"./node_modules/ol/geom/flat/closest.js":function(e,t,o){"use strict";o.d(t,"e",(function(){return i})),o.d(t,"a",(function(){return s})),o.d(t,"f",(function(){return a})),o.d(t,"d",(function(){return l})),o.d(t,"b",(function(){return c})),o.d(t,"c",(function(){return u}));var n=o("./node_modules/ol/math.js");function r(e,t,o,r,i,s,a){var l,c=e[t],u=e[t+1],d=e[o]-c,h=e[o+1]-u;if(0===d&&0===h)l=t;else{var p=((i-c)*d+(s-u)*h)/(d*d+h*h);if(p>1)l=o;else{if(p>0){for(var f=0;f<r;++f)a[f]=Object(n.c)(e[t+f],e[o+f],p);return void(a.length=r)}l=t}}for(f=0;f<r;++f)a[f]=e[l+f];a.length=r}function i(e,t,o,r,i){var s=e[t],a=e[t+1];for(t+=r;t<o;t+=r){var l=e[t],c=e[t+1],u=Object(n.g)(s,a,l,c);u>i&&(i=u),s=l,a=c}return i}function s(e,t,o,n,r){for(var s=0,a=o.length;s<a;++s){var l=o[s];r=i(e,t,l,n,r),t=l}return r}function a(e,t,o,n,r){for(var i=0,a=o.length;i<a;++i){var l=o[i];r=s(e,t,l,n,r),t=l[l.length-1]}return r}function l(e,t,o,i,s,a,l,c,u,d,h){if(t==o)return d;var p,f;if(0===s){if((f=Object(n.g)(l,c,e[t],e[t+1]))<d){for(p=0;p<i;++p)u[p]=e[t+p];return u.length=i,f}return d}for(var m=h||[NaN,NaN],g=t+i;g<o;)if(r(e,g-i,g,i,l,c,m),(f=Object(n.g)(l,c,m[0],m[1]))<d){for(d=f,p=0;p<i;++p)u[p]=m[p];u.length=i,g+=i}else g+=i*Math.max((Math.sqrt(f)-Math.sqrt(d))/s|0,1);if(a&&(r(e,o-i,t,i,l,c,m),(f=Object(n.g)(l,c,m[0],m[1]))<d)){for(d=f,p=0;p<i;++p)u[p]=m[p];u.length=i}return d}function c(e,t,o,n,r,i,s,a,c,u,d){for(var h=d||[NaN,NaN],p=0,f=o.length;p<f;++p){var m=o[p];u=l(e,t,m,n,r,i,s,a,c,u,h),t=m}return u}function u(e,t,o,n,r,i,s,a,l,u,d){for(var h=d||[NaN,NaN],p=0,f=o.length;p<f;++p){var m=o[p];u=c(e,t,m,n,r,i,s,a,l,u,h),t=m[m.length-1]}return u}},"./node_modules/ol/geom/flat/contains.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return r})),o.d(t,"b",(function(){return i})),o.d(t,"c",(function(){return s})),o.d(t,"d",(function(){return a}));var n=o("./node_modules/ol/extent.js");function r(e,t,o,r,s){return!Object(n.y)(s,(function(n){return!i(e,t,o,r,n[0],n[1])}))}function i(e,t,o,n,r,i){for(var s=0,a=e[o-n],l=e[o-n+1];t<o;t+=n){var c=e[t],u=e[t+1];l<=i?u>i&&(c-a)*(i-l)-(r-a)*(u-l)>0&&s++:u<=i&&(c-a)*(i-l)-(r-a)*(u-l)<0&&s--,a=c,l=u}return 0!==s}function s(e,t,o,n,r,s){if(0===o.length)return!1;if(!i(e,t,o[0],n,r,s))return!1;for(var a=1,l=o.length;a<l;++a)if(i(e,o[a-1],o[a],n,r,s))return!1;return!0}function a(e,t,o,n,r,i){if(0===o.length)return!1;for(var a=0,l=o.length;a<l;++a){var c=o[a];if(s(e,t,c,n,r,i))return!0;t=c[c.length-1]}return!1}},"./node_modules/ol/geom/flat/deflate.js":function(e,t,o){"use strict";function n(e,t,o,n){for(var r=0,i=o.length;r<i;++r)e[t++]=o[r];return t}function r(e,t,o,n){for(var r=0,i=o.length;r<i;++r)for(var s=o[r],a=0;a<n;++a)e[t++]=s[a];return t}function i(e,t,o,n,i){for(var s=i||[],a=0,l=0,c=o.length;l<c;++l){var u=r(e,t,o[l],n);s[a++]=u,t=u}return s.length=a,s}function s(e,t,o,n,r){for(var s=r||[],a=0,l=0,c=o.length;l<c;++l){var u=i(e,t,o[l],n,s[a]);s[a++]=u,t=u[u.length-1]}return s.length=a,s}o.d(t,"a",(function(){return n})),o.d(t,"b",(function(){return r})),o.d(t,"c",(function(){return i})),o.d(t,"d",(function(){return s}))},"./node_modules/ol/geom/flat/geodesic.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return s})),o.d(t,"b",(function(){return a})),o.d(t,"c",(function(){return l}));var n=o("./node_modules/ol/proj.js"),r=o("./node_modules/ol/math.js");function i(e,t,o){for(var n,i,s,a,l,c,u=[],d=e(0),h=e(1),p=t(d),f=t(h),m=[h,d],g=[f,p],y=[1,0],v={},_=1e5;--_>0&&y.length>0;)s=y.pop(),d=m.pop(),p=g.pop(),(c=s.toString())in v||(u.push(p[0],p[1]),v[c]=!0),a=y.pop(),h=m.pop(),f=g.pop(),i=t(n=e(l=(s+a)/2)),Object(r.h)(i[0],i[1],p[0],p[1],f[0],f[1])<o?(u.push(f[0],f[1]),v[c=a.toString()]=!0):(y.push(a,l,l,s),g.push(f,i,i,p),m.push(h,n,n,d));return u}function s(e,t,o,s,a,l){var c=Object(n.t)("EPSG:4326"),u=Math.cos(Object(r.j)(t)),d=Math.sin(Object(r.j)(t)),h=Math.cos(Object(r.j)(s)),p=Math.sin(Object(r.j)(s)),f=Math.cos(Object(r.j)(o-e)),m=Math.sin(Object(r.j)(o-e)),g=d*p+u*h*f;return i((function(t){if(1<=g)return[o,s];var n=t*Math.acos(g),i=Math.cos(n),a=Math.sin(n),l=m*h,c=u*p-d*h*f,y=Math.atan2(l,c),v=Math.asin(d*i+u*a*Math.cos(y)),_=Object(r.j)(e)+Math.atan2(Math.sin(y)*a*u,i-d*Math.sin(v));return[Object(r.i)(_),Object(r.i)(v)]}),Object(n.v)(c,a),l)}function a(e,t,o,r,s){var a=Object(n.t)("EPSG:4326");return i((function(n){return[e,t+(o-t)*n]}),Object(n.v)(a,r),s)}function l(e,t,o,r,s){var a=Object(n.t)("EPSG:4326");return i((function(n){return[t+(o-t)*n,e]}),Object(n.v)(a,r),s)}},"./node_modules/ol/geom/flat/inflate.js":function(e,t,o){"use strict";function n(e,t,o,n,r){for(var i=void 0!==r?r:[],s=0,a=t;a<o;a+=n)i[s++]=e.slice(a,a+n);return i.length=s,i}function r(e,t,o,r,i){for(var s=void 0!==i?i:[],a=0,l=0,c=o.length;l<c;++l){var u=o[l];s[a++]=n(e,t,u,r,s[a]),t=u}return s.length=a,s}function i(e,t,o,n,i){for(var s=void 0!==i?i:[],a=0,l=0,c=o.length;l<c;++l){var u=o[l];s[a++]=r(e,t,u,n,s[a]),t=u[u.length-1]}return s.length=a,s}o.d(t,"a",(function(){return n})),o.d(t,"b",(function(){return r})),o.d(t,"c",(function(){return i}))},"./node_modules/ol/geom/flat/interiorpoint.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return i})),o.d(t,"b",(function(){return s}));var n=o("./node_modules/ol/geom/flat/contains.js"),r=o("./node_modules/ol/array.js");function i(e,t,o,i,s,a,l){for(var c,u,d,h,p,f,m,g=s[a+1],y=[],v=0,_=o.length;v<_;++v){var b=o[v];for(h=e[b-i],f=e[b-i+1],c=t;c<b;c+=i)p=e[c],m=e[c+1],(g<=f&&m<=g||f<=g&&g<=m)&&(d=(g-f)/(m-f)*(p-h)+h,y.push(d)),h=p,f=m}var w=NaN,E=-1/0;for(y.sort(r.i),h=y[0],c=1,u=y.length;c<u;++c){p=y[c];var O=Math.abs(p-h);O>E&&(d=(h+p)/2,Object(n.c)(e,t,o,i,d,g)&&(w=d,E=O)),h=p}return isNaN(w)&&(w=s[a]),l?(l.push(w,g,E),l):[w,g,E]}function s(e,t,o,n,r){for(var s=[],a=0,l=o.length;a<l;++a){var c=o[a];s=i(e,t,c,n,r,2*a,s),t=c[c.length-1]}return s}},"./node_modules/ol/geom/flat/interpolate.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return i})),o.d(t,"b",(function(){return s})),o.d(t,"c",(function(){return a}));var n=o("./node_modules/ol/array.js"),r=o("./node_modules/ol/math.js");function i(e,t,o,i,s,a,l){var c,u,d=(o-t)/i;if(1===d)c=t;else if(2===d)c=t,u=s;else if(0!==d){for(var h=e[t],p=e[t+1],f=0,m=[0],g=t+i;g<o;g+=i){var y=e[g],v=e[g+1];f+=Math.sqrt((y-h)*(y-h)+(v-p)*(v-p)),m.push(f),h=y,p=v}var _=s*f,b=Object(n.a)(m,_);b<0?(u=(_-m[-b-2])/(m[-b-1]-m[-b-2]),c=t+(-b-2)*i):c=t+b*i}var w=l>1?l:2,E=a||new Array(w);for(g=0;g<w;++g)E[g]=void 0===c?NaN:void 0===u?e[c+g]:Object(r.c)(e[c+g],e[c+i+g],u);return E}function s(e,t,o,n,i,s){if(o==t)return null;var a;if(i<e[t+n-1])return s?((a=e.slice(t,t+n))[n-1]=i,a):null;if(e[o-1]<i)return s?((a=e.slice(o-n,o))[n-1]=i,a):null;if(i==e[t+n-1])return e.slice(t,t+n);for(var l=t/n,c=o/n;l<c;){var u=l+c>>1;i<e[(u+1)*n-1]?c=u:l=u+1}var d=e[l*n-1];if(i==d)return e.slice((l-1)*n,(l-1)*n+n);var h=(i-d)/(e[(l+1)*n-1]-d);a=[];for(var p=0;p<n-1;++p)a.push(Object(r.c)(e[(l-1)*n+p],e[l*n+p],h));return a.push(i),a}function a(e,t,o,n,r,i,a){if(a)return s(e,t,o[o.length-1],n,r,i);var l;if(r<e[n-1])return i?((l=e.slice(0,n))[n-1]=r,l):null;if(e[e.length-1]<r)return i?((l=e.slice(e.length-n))[n-1]=r,l):null;for(var c=0,u=o.length;c<u;++c){var d=o[c];if(t!=d){if(r<e[t+n-1])return null;if(r<=e[d-1])return s(e,t,d,n,r,!1);t=d}}return null}},"./node_modules/ol/geom/flat/intersectsextent.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return s})),o.d(t,"b",(function(){return a})),o.d(t,"c",(function(){return l})),o.d(t,"d",(function(){return c})),o.d(t,"e",(function(){return u}));var n=o("./node_modules/ol/extent.js"),r=o("./node_modules/ol/geom/flat/segments.js"),i=o("./node_modules/ol/geom/flat/contains.js");function s(e,t,o,i,s){var a=Object(n.v)(Object(n.k)(),e,t,o,i);return!!Object(n.O)(s,a)&&(!!Object(n.h)(s,a)||(a[0]>=s[0]&&a[2]<=s[2]||(a[1]>=s[1]&&a[3]<=s[3]||Object(r.a)(e,t,o,i,(function(e,t){return Object(n.P)(s,e,t)})))))}function a(e,t,o,n,r){for(var i=0,a=o.length;i<a;++i){if(s(e,t,o[i],n,r))return!0;t=o[i]}return!1}function l(e,t,o,n,r){return!!s(e,t,o,n,r)||(!!Object(i.b)(e,t,o,n,r[0],r[1])||(!!Object(i.b)(e,t,o,n,r[0],r[3])||(!!Object(i.b)(e,t,o,n,r[2],r[1])||!!Object(i.b)(e,t,o,n,r[2],r[3]))))}function c(e,t,o,n,r){if(!l(e,t,o[0],n,r))return!1;if(1===o.length)return!0;for(var a=1,c=o.length;a<c;++a)if(Object(i.a)(e,o[a-1],o[a],n,r)&&!s(e,o[a-1],o[a],n,r))return!1;return!0}function u(e,t,o,n,r){for(var i=0,s=o.length;i<s;++i){var a=o[i];if(c(e,t,a,n,r))return!0;t=a[a.length-1]}return!1}},"./node_modules/ol/geom/flat/length.js":function(e,t,o){"use strict";function n(e,t,o,n){for(var r=e[t],i=e[t+1],s=0,a=t+n;a<o;a+=n){var l=e[a],c=e[a+1];s+=Math.sqrt((l-r)*(l-r)+(c-i)*(c-i)),r=l,i=c}return s}function r(e,t,o,r){var i=n(e,t,o,r),s=e[o-r]-e[t],a=e[o-r+1]-e[t+1];return i+=Math.sqrt(s*s+a*a)}o.d(t,"a",(function(){return n})),o.d(t,"b",(function(){return r}))},"./node_modules/ol/geom/flat/orient.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return r})),o.d(t,"b",(function(){return i})),o.d(t,"c",(function(){return s})),o.d(t,"d",(function(){return a})),o.d(t,"e",(function(){return l}));var n=o("./node_modules/ol/geom/flat/reverse.js");function r(e,t,o,n){for(var r=0,i=e[o-n],s=e[o-n+1];t<o;t+=n){var a=e[t],l=e[t+1];r+=(a-i)*(l+s),i=a,s=l}return 0===r?void 0:r>0}function i(e,t,o,n,i){for(var s=void 0!==i&&i,a=0,l=o.length;a<l;++a){var c=o[a],u=r(e,t,c,n);if(0===a){if(s&&u||!s&&!u)return!1}else if(s&&!u||!s&&u)return!1;t=c}return!0}function s(e,t,o,n,r){for(var s=0,a=o.length;s<a;++s){var l=o[s];if(!i(e,t,l,n,r))return!1;l.length&&(t=l[l.length-1])}return!0}function a(e,t,o,i,s){for(var a=void 0!==s&&s,l=0,c=o.length;l<c;++l){var u=o[l],d=r(e,t,u,i);(0===l?a&&d||!a&&!d:a&&!d||!a&&d)&&Object(n.a)(e,t,u,i),t=u}return t}function l(e,t,o,n,r){for(var i=0,s=o.length;i<s;++i)t=a(e,t,o[i],n,r);return t}},"./node_modules/ol/geom/flat/reverse.js":function(e,t,o){"use strict";function n(e,t,o,n){for(;t<o-n;){for(var r=0;r<n;++r){var i=e[t+r];e[t+r]=e[o-n+r],e[o-n+r]=i}t+=n,o-=n}}o.d(t,"a",(function(){return n}))},"./node_modules/ol/geom/flat/segments.js":function(e,t,o){"use strict";function n(e,t,o,n,r){var i;for(t+=n;t<o;t+=n)if(i=r(e.slice(t-n,t),e.slice(t,t+n)))return i;return!1}o.d(t,"a",(function(){return n}))},"./node_modules/ol/geom/flat/simplify.js":function(e,t,o){"use strict";o.d(t,"h",(function(){return r})),o.d(t,"a",(function(){return i})),o.d(t,"b",(function(){return s})),o.d(t,"c",(function(){return a})),o.d(t,"g",(function(){return l})),o.d(t,"i",(function(){return c})),o.d(t,"d",(function(){return u})),o.d(t,"e",(function(){return d})),o.d(t,"f",(function(){return h}));var n=o("./node_modules/ol/math.js");function r(e,t,o,n,r,s,a){var c=void 0!==a?a:[];return s||(o=l(e,t,o,n,r,c,0),e=c,t=0,n=2),c.length=i(e,t,o,n,r,c,0),c}function i(e,t,o,r,i,s,a){var l=(o-t)/r;if(l<3){for(;t<o;t+=r)s[a++]=e[t],s[a++]=e[t+1];return a}var c=new Array(l);c[0]=1,c[l-1]=1;for(var u=[t,o-r],d=0;u.length>0;){for(var h=u.pop(),p=u.pop(),f=0,m=e[p],g=e[p+1],y=e[h],v=e[h+1],_=p+r;_<h;_+=r){var b=e[_],w=e[_+1],E=Object(n.h)(b,w,m,g,y,v);E>f&&(d=_,f=E)}f>i&&(c[(d-t)/r]=1,p+r<d&&u.push(p,d),d+r<h&&u.push(d,h))}for(_=0;_<l;++_)c[_]&&(s[a++]=e[t+_*r],s[a++]=e[t+_*r+1]);return a}function s(e,t,o,n,r,s,a,l){for(var c=0,u=o.length;c<u;++c){var d=o[c];a=i(e,t,d,n,r,s,a),l.push(a),t=d}return a}function a(e,t,o,n,r,i,a,l){for(var c=0,u=o.length;c<u;++c){var d=o[c],h=[];a=s(e,t,d,n,r,i,a,h),l.push(h),t=d[d.length-1]}return a}function l(e,t,o,r,i,s,a){if(o<=t+r){for(;t<o;t+=r)s[a++]=e[t],s[a++]=e[t+1];return a}var l=e[t],c=e[t+1];s[a++]=l,s[a++]=c;var u=l,d=c;for(t+=r;t<o;t+=r)u=e[t],d=e[t+1],Object(n.g)(l,c,u,d)>i&&(s[a++]=u,s[a++]=d,l=u,c=d);return u==l&&d==c||(s[a++]=u,s[a++]=d),a}function c(e,t){return t*Math.round(e/t)}function u(e,t,o,n,r,i,s){if(t==o)return s;var a,l,u=c(e[t],r),d=c(e[t+1],r);t+=n,i[s++]=u,i[s++]=d;do{if(a=c(e[t],r),l=c(e[t+1],r),(t+=n)==o)return i[s++]=a,i[s++]=l,s}while(a==u&&l==d);for(;t<o;){var h=c(e[t],r),p=c(e[t+1],r);if(t+=n,h!=a||p!=l){var f=a-u,m=l-d,g=h-u,y=p-d;f*y==m*g&&(f<0&&g<f||f==g||f>0&&g>f)&&(m<0&&y<m||m==y||m>0&&y>m)?(a=h,l=p):(i[s++]=a,i[s++]=l,u=a,d=l,a=h,l=p)}}return i[s++]=a,i[s++]=l,s}function d(e,t,o,n,r,i,s,a){for(var l=0,c=o.length;l<c;++l){var d=o[l];s=u(e,t,d,n,r,i,s),a.push(s),t=d}return s}function h(e,t,o,n,r,i,s,a){for(var l=0,c=o.length;l<c;++l){var u=o[l],h=[];s=d(e,t,u,n,r,i,s,h),a.push(h),t=u[u.length-1]}return s}},"./node_modules/ol/geom/flat/straightchunk.js":function(e,t,o){"use strict";function n(e,t,o,n,r){var i,s,a,l,c,u,d,h,p,f=o,m=o,g=0,y=0,v=o;for(i=o;i<n;i+=r){var _=t[i],b=t[i+1];void 0!==l&&(h=_-l,p=b-c,a=Math.sqrt(h*h+p*p),void 0!==u&&(y+=s,Math.acos((u*h+d*p)/(s*a))>e&&(y>g&&(g=y,f=v,m=i),y=0,v=i-r)),s=a,u=h,d=p),l=_,c=b}return(y+=a)>g?[v,i]:[f,m]}o.d(t,"a",(function(){return n}))},"./node_modules/ol/geom/flat/textpath.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return i}));var n=o("./node_modules/ol/math.js"),r=o("./node_modules/ol/geom/flat/transform.js");function i(e,t,o,i,s,a,l,c,u,d,h,p){var f=e[t],m=e[t+1],g=0,y=0,v=0,_=0;function b(){g=f,y=m,f=e[t+=i],m=e[t+1],_+=v,v=Math.sqrt((f-g)*(f-g)+(m-y)*(m-y))}do{b()}while(t<o-i&&_+v<a);for(var w=0===v?0:(a-_)/v,E=Object(n.c)(g,f,w),O=Object(n.c)(y,m,w),S=t-i,x=_,C=a+c*u(d,s,h);t<o-i&&_+v<C;)b();w=0===v?0:(C-_)/v;var j,P=Object(n.c)(g,f,w),T=Object(n.c)(y,m,w);if(p){var A=[E,O,P,T];Object(r.a)(A,0,4,2,p,A,A),j=A[0]>A[2]}else j=E>P;var M,I=Math.PI,R=[],L=S+i===t;if(v=0,_=x,f=e[t=S],m=e[t+1],L){b(),M=Math.atan2(m-y,f-g),j&&(M+=M>0?-I:I);var k=(P+E)/2,G=(T+O)/2;return R[0]=[k,G,(C-a)/2,M,s],R}for(var N=0,D=s.length;N<D;){b();var F=Math.atan2(m-y,f-g);if(j&&(F+=F>0?-I:I),void 0!==M){var U=F-M;if(U+=U>I?-2*I:U<-I?2*I:0,Math.abs(U)>l)return null}M=F;for(var B=N,z=0;N<D;++N){var V=c*u(d,s[j?D-N-1:N],h);if(t+i<o&&_+v<a+z+V/2)break;z+=V}if(N!==B){var W=j?s.substring(D-B,D-N):s.substring(B,N);w=0===v?0:(a+z/2-_)/v;k=Object(n.c)(g,f,w),G=Object(n.c)(y,m,w);R.push([k,G,z/2,F,W]),a+=z}}return R}},"./node_modules/ol/geom/flat/transform.js":function(e,t,o){"use strict";function n(e,t,o,n,r,i){for(var s=i||[],a=0,l=t;l<o;l+=n){var c=e[l],u=e[l+1];s[a++]=r[0]*c+r[2]*u+r[4],s[a++]=r[1]*c+r[3]*u+r[5]}return i&&s.length!=a&&(s.length=a),s}function r(e,t,o,n,r,i,s){for(var a=s||[],l=Math.cos(r),c=Math.sin(r),u=i[0],d=i[1],h=0,p=t;p<o;p+=n){var f=e[p]-u,m=e[p+1]-d;a[h++]=u+f*l-m*c,a[h++]=d+f*c+m*l;for(var g=p+2;g<p+n;++g)a[h++]=e[g]}return s&&a.length!=h&&(a.length=h),a}function i(e,t,o,n,r,i,s,a){for(var l=a||[],c=s[0],u=s[1],d=0,h=t;h<o;h+=n){var p=e[h]-c,f=e[h+1]-u;l[d++]=c+r*p,l[d++]=u+i*f;for(var m=h+2;m<h+n;++m)l[d++]=e[m]}return a&&l.length!=d&&(l.length=d),l}function s(e,t,o,n,r,i,s){for(var a=s||[],l=0,c=t;c<o;c+=n){a[l++]=e[c]+r,a[l++]=e[c+1]+i;for(var u=c+2;u<c+n;++u)a[l++]=e[u]}return s&&a.length!=l&&(a.length=l),a}o.d(t,"c",(function(){return n})),o.d(t,"a",(function(){return r})),o.d(t,"b",(function(){return i})),o.d(t,"d",(function(){return s}))},"./node_modules/ol/has.js":function(e,t,o){"use strict";o.d(t,"b",(function(){return r})),o.d(t,"f",(function(){return i})),o.d(t,"g",(function(){return s})),o.d(t,"d",(function(){return a})),o.d(t,"a",(function(){return l})),o.d(t,"h",(function(){return c})),o.d(t,"c",(function(){return u})),o.d(t,"e",(function(){return d}));var n="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",r=-1!==n.indexOf("firefox"),i=-1!==n.indexOf("safari")&&-1==n.indexOf("chrom"),s=-1!==n.indexOf("webkit")&&-1==n.indexOf("edge"),a=-1!==n.indexOf("macintosh"),l="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,c="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,u="undefined"!=typeof Image&&Image.prototype.decode,d=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch(e){}return e}()},"./node_modules/ol/interaction.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return f}));var n=o("./node_modules/ol/Collection.js"),r=o("./node_modules/ol/interaction/DoubleClickZoom.js"),i=o("./node_modules/ol/interaction/DragPan.js"),s=o("./node_modules/ol/interaction/DragRotate.js"),a=o("./node_modules/ol/interaction/DragZoom.js"),l=o("./node_modules/ol/interaction/KeyboardPan.js"),c=o("./node_modules/ol/interaction/KeyboardZoom.js"),u=o("./node_modules/ol/Kinetic.js"),d=o("./node_modules/ol/interaction/MouseWheelZoom.js"),h=o("./node_modules/ol/interaction/PinchRotate.js"),p=o("./node_modules/ol/interaction/PinchZoom.js");function f(e){var t=e||{},o=new n.b,f=new u.a(-.005,.05,100);return(void 0===t.altShiftDragRotate||t.altShiftDragRotate)&&o.push(new s.a),(void 0===t.doubleClickZoom||t.doubleClickZoom)&&o.push(new r.a({delta:t.zoomDelta,duration:t.zoomDuration})),(void 0===t.dragPan||t.dragPan)&&o.push(new i.a({onFocusOnly:t.onFocusOnly,kinetic:f})),(void 0===t.pinchRotate||t.pinchRotate)&&o.push(new h.a),(void 0===t.pinchZoom||t.pinchZoom)&&o.push(new p.a({duration:t.zoomDuration})),(void 0===t.keyboard||t.keyboard)&&(o.push(new l.a),o.push(new c.a({delta:t.zoomDelta,duration:t.zoomDuration}))),(void 0===t.mouseWheelZoom||t.mouseWheelZoom)&&o.push(new d.a({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration})),(void 0===t.shiftDragZoom||t.shiftDragZoom)&&o.push(new a.a({duration:t.zoomDuration})),o}},"./node_modules/ol/interaction/DoubleClickZoom.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/interaction/Interaction.js"),i=o("./node_modules/ol/MapBrowserEventType.js"),s=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=function(e){function t(t){var o=e.call(this)||this,n=t||{};return o.delta_=n.delta?n.delta:1,o.duration_=void 0!==n.duration?n.duration:250,o}return s(t,e),t.prototype.handleEvent=function(e){var t=!1;if(e.type==i.a.DBLCLICK){var o=e.originalEvent,n=e.map,s=e.coordinate,a=o.shiftKey?-this.delta_:this.delta_,l=n.getView();Object(r.c)(l,a,s,this.duration_),o.preventDefault(),t=!0}return!t},t}(r.a);t.a=a},"./node_modules/ol/interaction/DragAndDrop.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return p}));var n,r=o("./node_modules/ol/events/Event.js"),i=o("./node_modules/ol/events/EventType.js"),s=o("./node_modules/ol/format/FormatType.js"),a=o("./node_modules/ol/interaction/Interaction.js"),l=o("./node_modules/ol/functions.js"),c=o("./node_modules/ol/proj.js"),u=o("./node_modules/ol/events.js"),d=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),h="addfeatures",p=function(e){function t(t,o,n,r){var i=e.call(this,t)||this;return i.features=n,i.file=o,i.projection=r,i}return d(t,e),t}(r.a),f=function(e){function t(t){var o=this,n=t||{};(o=e.call(this,{handleEvent:l.b})||this).on,o.once,o.un,o.readAsBuffer_=!1,o.formats_=[];for(var r=n.formatConstructors?n.formatConstructors:[],i=0,a=r.length;i<a;++i){var u=r[i];"function"==typeof u&&(u=new u),o.formats_.push(u),o.readAsBuffer_=o.readAsBuffer_||u.getType()===s.a.ARRAY_BUFFER}return o.projection_=n.projection?Object(c.t)(n.projection):null,o.dropListenKeys_=null,o.source_=n.source||null,o.target=n.target?n.target:null,o}return d(t,e),t.prototype.handleResult_=function(e,t){var o,n=t.target.result,r=this.getMap(),i=this.projection_;i||(i=r.getView().getProjection());for(var a=this.formats_,l=0,c=a.length;l<c;++l){var u=a[l],d=n;this.readAsBuffer_&&u.getType()!==s.a.ARRAY_BUFFER&&(void 0===o&&(o=(new TextDecoder).decode(n)),d=o);var f=this.tryReadFeatures_(u,d,{featureProjection:i});if(f&&f.length>0){this.source_&&(this.source_.clear(),this.source_.addFeatures(f)),this.dispatchEvent(new p(h,e,f,i));break}}},t.prototype.registerListeners_=function(){var e=this.getMap();if(e){var t=this.target?this.target:e.getViewport();this.dropListenKeys_=[Object(u.a)(t,i.a.DROP,this.handleDrop,this),Object(u.a)(t,i.a.DRAGENTER,this.handleStop,this),Object(u.a)(t,i.a.DRAGOVER,this.handleStop,this),Object(u.a)(t,i.a.DROP,this.handleStop,this)]}},t.prototype.setActive=function(t){!this.getActive()&&t&&this.registerListeners_(),this.getActive()&&!t&&this.unregisterListeners_(),e.prototype.setActive.call(this,t)},t.prototype.setMap=function(t){this.unregisterListeners_(),e.prototype.setMap.call(this,t),this.getActive()&&this.registerListeners_()},t.prototype.tryReadFeatures_=function(e,t,o){try{return e.readFeatures(t,o)}catch(e){return null}},t.prototype.unregisterListeners_=function(){this.dropListenKeys_&&(this.dropListenKeys_.forEach(u.c),this.dropListenKeys_=null)},t.prototype.handleDrop=function(e){for(var t=e.dataTransfer.files,o=0,n=t.length;o<n;++o){var r=t.item(o),s=new FileReader;s.addEventListener(i.a.LOAD,this.handleResult_.bind(this,r)),this.readAsBuffer_?s.readAsArrayBuffer(r):s.readAsText(r)}},t.prototype.handleStop=function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},t}(a.a);t.b=f},"./node_modules/ol/interaction/DragBox.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return p}));var n,r=o("./node_modules/ol/events/Event.js"),i=o("./node_modules/ol/interaction/Pointer.js"),s=o("./node_modules/ol/render/Box.js"),a=o("./node_modules/ol/events/condition.js"),l=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),c="boxstart",u="boxdrag",d="boxend",h="boxcancel",p=function(e){function t(t,o,n){var r=e.call(this,t)||this;return r.coordinate=o,r.mapBrowserEvent=n,r}return l(t,e),t}(r.a),f=function(e){function t(t){var o=e.call(this)||this;o.on,o.once,o.un;var n=t||{};return o.box_=new s.a(n.className||"ol-dragbox"),o.minArea_=void 0!==n.minArea?n.minArea:64,n.onBoxEnd&&(o.onBoxEnd=n.onBoxEnd),o.startPixel_=null,o.condition_=n.condition?n.condition:a.i,o.boxEndCondition_=n.boxEndCondition?n.boxEndCondition:o.defaultBoxEndCondition,o}return l(t,e),t.prototype.defaultBoxEndCondition=function(e,t,o){var n=o[0]-t[0],r=o[1]-t[1];return n*n+r*r>=this.minArea_},t.prototype.getGeometry=function(){return this.box_.getGeometry()},t.prototype.handleDragEvent=function(e){this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new p(u,e.coordinate,e))},t.prototype.handleUpEvent=function(e){this.box_.setMap(null);var t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new p(t?d:h,e.coordinate,e)),!1},t.prototype.handleDownEvent=function(e){return!!this.condition_(e)&&(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new p(c,e.coordinate,e)),!0)},t.prototype.onBoxEnd=function(e){},t}(i.b);t.b=f},"./node_modules/ol/interaction/DragPan.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/interaction/Pointer.js"),i=o("./node_modules/ol/functions.js"),s=o("./node_modules/ol/events/condition.js"),a=o("./node_modules/ol/easing.js"),l=o("./node_modules/ol/coordinate.js"),c=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),u=function(e){function t(t){var o=e.call(this,{stopDown:i.a})||this,n=t||{};o.kinetic_=n.kinetic,o.lastCentroid=null,o.lastPointersCount_,o.panning_=!1;var r=n.condition?n.condition:Object(s.a)(s.l,s.p);return o.condition_=n.onFocusOnly?Object(s.a)(s.h,r):r,o.noKinetic_=!1,o}return c(t,e),t.prototype.handleDragEvent=function(e){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var t=this.targetPointers,o=Object(r.a)(t);if(t.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(o[0],o[1]),this.lastCentroid){var n=[this.lastCentroid[0]-o[0],o[1]-this.lastCentroid[1]],i=e.map.getView();Object(l.k)(n,i.getResolution()),Object(l.j)(n,i.getRotation()),i.adjustCenterInternal(n)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=o,this.lastPointersCount_=t.length,e.originalEvent.preventDefault()},t.prototype.handleUpEvent=function(e){var t=e.map,o=t.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var n=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),i=o.getCenterInternal(),s=t.getPixelFromCoordinateInternal(i),l=t.getCoordinateFromPixelInternal([s[0]-n*Math.cos(r),s[1]-n*Math.sin(r)]);o.animateInternal({center:o.getConstrainedCenter(l),duration:500,easing:a.b})}return this.panning_&&(this.panning_=!1,o.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},t.prototype.handleDownEvent=function(e){if(this.targetPointers.length>0&&this.condition_(e)){var t=e.map.getView();return this.lastCentroid=null,t.getAnimating()&&t.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},t}(r.b);t.a=u},"./node_modules/ol/interaction/DragRotate.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/interaction/Pointer.js"),i=o("./node_modules/ol/functions.js"),s=o("./node_modules/ol/events/condition.js"),a=o("./node_modules/ol/rotationconstraint.js"),l=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),c=function(e){function t(t){var o=this,n=t||{};return(o=e.call(this,{stopDown:i.a})||this).condition_=n.condition?n.condition:s.c,o.lastAngle_=void 0,o.duration_=void 0!==n.duration?n.duration:250,o}return l(t,e),t.prototype.handleDragEvent=function(e){if(Object(s.j)(e)){var t=e.map,o=t.getView();if(o.getConstraints().rotation!==a.c){var n=t.getSize(),r=e.pixel,i=Math.atan2(n[1]/2-r[1],r[0]-n[0]/2);if(void 0!==this.lastAngle_){var l=i-this.lastAngle_;o.adjustRotationInternal(-l)}this.lastAngle_=i}}},t.prototype.handleUpEvent=function(e){return!Object(s.j)(e)||(e.map.getView().endInteraction(this.duration_),!1)},t.prototype.handleDownEvent=function(e){return!!Object(s.j)(e)&&(!(!Object(s.i)(e)||!this.condition_(e))&&(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0))},t}(r.b);t.a=c},"./node_modules/ol/interaction/DragRotateAndZoom.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/interaction/Pointer.js"),i=o("./node_modules/ol/events/condition.js"),s=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=function(e){function t(t){var o=this,n=t||{};return(o=e.call(this,n)||this).condition_=n.condition?n.condition:i.q,o.lastAngle_=void 0,o.lastMagnitude_=void 0,o.lastScaleDelta_=0,o.duration_=void 0!==n.duration?n.duration:400,o}return s(t,e),t.prototype.handleDragEvent=function(e){if(Object(i.j)(e)){var t=e.map,o=t.getSize(),n=e.pixel,r=n[0]-o[0]/2,s=o[1]/2-n[1],a=Math.atan2(s,r),l=Math.sqrt(r*r+s*s),c=t.getView();if(void 0!==this.lastAngle_){var u=this.lastAngle_-a;c.adjustRotationInternal(u)}this.lastAngle_=a,void 0!==this.lastMagnitude_&&c.adjustResolutionInternal(this.lastMagnitude_/l),void 0!==this.lastMagnitude_&&(this.lastScaleDelta_=this.lastMagnitude_/l),this.lastMagnitude_=l}},t.prototype.handleUpEvent=function(e){if(!Object(i.j)(e))return!0;var t=e.map.getView(),o=this.lastScaleDelta_>1?1:-1;return t.endInteraction(this.duration_,o),this.lastScaleDelta_=0,!1},t.prototype.handleDownEvent=function(e){return!!Object(i.j)(e)&&(!!this.condition_(e)&&(e.map.getView().beginInteraction(),this.lastAngle_=void 0,this.lastMagnitude_=void 0,!0))},t}(r.b);t.a=a},"./node_modules/ol/interaction/DragZoom.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/interaction/DragBox.js"),i=o("./node_modules/ol/easing.js"),s=o("./node_modules/ol/events/condition.js"),a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),l=function(e){function t(t){var o=this,n=t||{},r=n.condition?n.condition:s.q;return(o=e.call(this,{condition:r,className:n.className||"ol-dragzoom",minArea:n.minArea})||this).duration_=void 0!==n.duration?n.duration:200,o.out_=void 0!==n.out&&n.out,o}return a(t,e),t.prototype.onBoxEnd=function(e){var t=this.getMap().getView(),o=this.getGeometry();if(this.out_){var n=t.rotatedExtentForGeometry(o),r=t.getResolutionForExtentInternal(n),s=t.getResolution()/r;(o=o.clone()).scale(s*s)}t.fitInternal(o,{duration:this.duration_,easing:i.b})},t}(r.b);t.a=l},"./node_modules/ol/interaction/Draw.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return k})),o.d(t,"c",(function(){return N})),o.d(t,"b",(function(){return D}));var n,r=o("./node_modules/ol/geom/Circle.js"),i=o("./node_modules/ol/events/Event.js"),s=o("./node_modules/ol/events/EventType.js"),a=o("./node_modules/ol/Feature.js"),l=o("./node_modules/ol/geom/GeometryType.js"),c=o("./node_modules/ol/interaction/Property.js"),u=o("./node_modules/ol/geom/LineString.js"),d=o("./node_modules/ol/MapBrowserEvent.js"),h=o("./node_modules/ol/MapBrowserEventType.js"),p=o("./node_modules/ol/geom/MultiLineString.js"),f=o("./node_modules/ol/geom/MultiPoint.js"),m=o("./node_modules/ol/geom/MultiPolygon.js"),g=o("./node_modules/ol/geom/Point.js"),y=o("./node_modules/ol/interaction/Pointer.js"),v=o("./node_modules/ol/geom/Polygon.js"),_=o("./node_modules/ol/layer/Vector.js"),b=o("./node_modules/ol/source/Vector.js"),w=o("./node_modules/ol/functions.js"),E=o("./node_modules/ol/events/condition.js"),O=o("./node_modules/ol/extent.js"),S=o("./node_modules/ol/style/Style.js"),x=o("./node_modules/ol/proj.js"),C=o("./node_modules/ol/coordinate.js"),j=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),P="Point",T="LineString",A="Polygon",M="Circle",I="drawstart",R="drawend",L="drawabort",k=function(e){function t(t,o){var n=e.call(this,t)||this;return n.feature=o,n}return j(t,e),t}(i.a),G=function(e){function t(t){var o=this,n=t;n.stopDown||(n.stopDown=w.a),(o=e.call(this,n)||this).on,o.once,o.un,o.shouldHandle_=!1,o.downPx_=null,o.downTimeout_,o.lastDragTime_,o.pointerType_,o.freehand_=!1,o.source_=t.source?t.source:null,o.features_=t.features?t.features:null,o.snapTolerance_=t.snapTolerance?t.snapTolerance:12,o.type_=t.type,o.mode_=function(e){switch(e){case l.a.POINT:case l.a.MULTI_POINT:return P;case l.a.LINE_STRING:case l.a.MULTI_LINE_STRING:return T;case l.a.POLYGON:case l.a.MULTI_POLYGON:return A;case l.a.CIRCLE:return M;default:throw new Error("Invalid type: "+e)}}(o.type_),o.stopClick_=!!t.stopClick,o.minPoints_=t.minPoints?t.minPoints:o.mode_===A?3:2,o.maxPoints_=o.mode_===M?2:t.maxPoints?t.maxPoints:1/0,o.finishCondition_=t.finishCondition?t.finishCondition:w.b;var i,s=t.geometryFunction;if(!s){var a,d=o.mode_;if(d===M)s=function(e,t,o){var n=t||new r.a([NaN,NaN]),i=Object(x.q)(e[0],o),s=Object(C.l)(i,Object(x.q)(e[e.length-1],o));n.setCenterAndRadius(i,Math.sqrt(s));var a=Object(x.x)();return a&&n.transform(o,a),n};else d===P?a=g.a:d===T?a=u.a:d===A&&(a=v.b),s=function(e,t,o){return t?d===A?e[0].length?t.setCoordinates([e[0].concat([e[0][0]])]):t.setCoordinates([]):t.setCoordinates(e):t=new a(e),t}}return o.geometryFunction_=s,o.dragVertexDelay_=void 0!==t.dragVertexDelay?t.dragVertexDelay:500,o.finishCoordinate_=null,o.sketchFeature_=null,o.sketchPoint_=null,o.sketchCoords_=null,o.sketchLine_=null,o.sketchLineCoords_=null,o.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,o.overlay_=new _.a({source:new b.b({useSpatialIndex:!1,wrapX:!!t.wrapX&&t.wrapX}),style:t.style?t.style:(i=Object(S.b)(),function(e,t){return i[e.getGeometry().getType()]}),updateWhileInteracting:!0}),o.geometryName_=t.geometryName,o.condition_=t.condition?t.condition:E.l,o.freehandCondition_,t.freehand?o.freehandCondition_=E.d:o.freehandCondition_=t.freehandCondition?t.freehandCondition:E.q,o.addChangeListener(c.a.ACTIVE,o.updateState_),o}return j(t,e),t.prototype.setMap=function(t){e.prototype.setMap.call(this,t),this.updateState_()},t.prototype.getOverlay=function(){return this.overlay_},t.prototype.handleEvent=function(t){t.originalEvent.type===s.a.CONTEXTMENU&&t.originalEvent.preventDefault(),this.freehand_=this.mode_!==P&&this.freehandCondition_(t);var o=t.type===h.a.POINTERMOVE,n=!0;!this.freehand_&&this.lastDragTime_&&t.type===h.a.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,o=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0));return this.freehand_&&t.type===h.a.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(t.coordinate),n=!1):this.freehand_&&t.type===h.a.POINTERDOWN?n=!1:o&&this.getPointerCount()<2?(n=t.type===h.a.POINTERMOVE)&&this.freehand_?(this.handlePointerMove_(t),this.shouldHandle_&&t.originalEvent.preventDefault()):("mouse"===t.originalEvent.pointerType||t.type===h.a.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(t):t.type===h.a.DBLCLICK&&(n=!1),e.prototype.handleEvent.call(this,t)&&n},t.prototype.handleDownEvent=function(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new d.a(h.a.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)},t.prototype.handleUpEvent=function(e){var t=!0;if(0===this.getPointerCount())if(this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e),this.shouldHandle_){var o=!this.finishCoordinate_;o&&this.startDrawing_(e.coordinate),!o&&this.freehand_?this.finishDrawing():this.freehand_||o&&this.mode_!==P||(this.atFinish_(e.pixel)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),t=!1}else this.freehand_&&this.abortDrawing();return!t&&this.stopClick_&&e.preventDefault(),t},t.prototype.handlePointerMove_=function(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var t=this.downPx_,o=e.pixel,n=t[0]-o[0],r=t[1]-o[1],i=n*n+r*r;if(this.shouldHandle_=this.freehand_?i>this.squaredClickTolerance_:i<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?this.modifyDrawing_(e.coordinate):this.createOrUpdateSketchPoint_(e.coordinate.slice())},t.prototype.atFinish_=function(e){var t=!1;if(this.sketchFeature_){var o=!1,n=[this.finishCoordinate_],r=this.mode_;if(r===P)t=!0;else if(r===M)t=2===this.sketchCoords_.length;else if(r===T)o=this.sketchCoords_.length>this.minPoints_;else if(r===A){var i=this.sketchCoords_;o=i[0].length>this.minPoints_,n=[i[0][0],i[0][i[0].length-2]]}if(o)for(var s=this.getMap(),a=0,l=n.length;a<l;a++){var c=n[a],u=s.getPixelFromCoordinate(c),d=e[0]-u[0],h=e[1]-u[1],p=this.freehand_?1:this.snapTolerance_;if(t=Math.sqrt(d*d+h*h)<=p){this.finishCoordinate_=c;break}}}return t},t.prototype.createOrUpdateSketchPoint_=function(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new a.b(new g.a(e)),this.updateSketchFeatures_())},t.prototype.createOrUpdateCustomSketchLine_=function(e){this.sketchLine_||(this.sketchLine_=new a.b);var t=e.getLinearRing(0),o=this.sketchLine_.getGeometry();o?(o.setFlatCoordinates(t.getLayout(),t.getFlatCoordinates()),o.changed()):(o=new u.a(t.getFlatCoordinates(),t.getLayout()),this.sketchLine_.setGeometry(o))},t.prototype.startDrawing_=function(e){var t=this.getMap().getView().getProjection();this.finishCoordinate_=e,this.mode_===P?this.sketchCoords_=e.slice():this.mode_===A?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new a.b(new u.a(this.sketchLineCoords_)));var o=this.geometryFunction_(this.sketchCoords_,void 0,t);this.sketchFeature_=new a.b,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(o),this.updateSketchFeatures_(),this.dispatchEvent(new k(I,this.sketchFeature_))},t.prototype.modifyDrawing_=function(e){var t,o,n=this.getMap(),r=this.sketchFeature_.getGeometry(),i=n.getView().getProjection();(this.mode_===P?o=this.sketchCoords_:this.mode_===A?(o=(t=this.sketchCoords_[0])[t.length-1],this.atFinish_(n.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):o=(t=this.sketchCoords_)[t.length-1],o[0]=e[0],o[1]=e[1],this.geometryFunction_(this.sketchCoords_,r,i),this.sketchPoint_)&&this.sketchPoint_.getGeometry().setCoordinates(e);if(r.getType()===l.a.POLYGON&&this.mode_!==A)this.createOrUpdateCustomSketchLine_(r);else if(this.sketchLineCoords_){this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_)}this.updateSketchFeatures_()},t.prototype.addToDrawing_=function(e){var t,o,n=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection(),i=this.mode_;i===T||i===M?(this.finishCoordinate_=e.slice(),(o=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?o.pop():t=!0),o.push(e.slice()),this.geometryFunction_(o,n,r)):i===A&&((o=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?o.pop():t=!0),o.push(e.slice()),t&&(this.finishCoordinate_=o[0]),this.geometryFunction_(this.sketchCoords_,n,r)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),t&&this.finishDrawing()},t.prototype.removeLastPoint=function(){if(this.sketchFeature_){var e,t=this.sketchFeature_.getGeometry(),o=this.getMap().getView().getProjection(),n=this.mode_;if(n===T||n===M){if((e=this.sketchCoords_).splice(-2,1),e.length>=2){this.finishCoordinate_=e[e.length-2].slice();var r=this.finishCoordinate_.slice();e[e.length-1]=r,this.createOrUpdateSketchPoint_(r)}this.geometryFunction_(e,t,o),t.getType()===l.a.POLYGON&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if(n===A){(e=this.sketchCoords_[0]).splice(-2,1);var i=this.sketchLine_.getGeometry();if(e.length>=2){r=e[e.length-2].slice();e[e.length-1]=r,this.createOrUpdateSketchPoint_(r)}i.setCoordinates(e),this.geometryFunction_(this.sketchCoords_,t,o)}1===e.length&&this.abortDrawing(),this.updateSketchFeatures_()}},t.prototype.finishDrawing=function(){var e=this.abortDrawing_();if(e){var t=this.sketchCoords_,o=e.getGeometry(),n=this.getMap().getView().getProjection();this.mode_===T?(t.pop(),this.geometryFunction_(t,o,n)):this.mode_===A&&(t[0].pop(),this.geometryFunction_(t,o,n),t=o.getCoordinates()),this.type_===l.a.MULTI_POINT?e.setGeometry(new f.a([t])):this.type_===l.a.MULTI_LINE_STRING?e.setGeometry(new p.a([t])):this.type_===l.a.MULTI_POLYGON&&e.setGeometry(new m.a([t])),this.dispatchEvent(new k(R,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e)}},t.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),e},t.prototype.abortDrawing=function(){var e=this.abortDrawing_();e&&this.dispatchEvent(new k(L,e))},t.prototype.appendCoordinates=function(e){var t,o=this.mode_,n=!this.sketchFeature_;if(n&&this.startDrawing_(e[0]),o===T||o===M)t=this.sketchCoords_;else{if(o!==A)return;t=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]}n&&t.shift(),t.pop();for(var r=0;r<e.length;r++)this.addToDrawing_(e[r]);var i=e[e.length-1];this.addToDrawing_(i),this.modifyDrawing_(i)},t.prototype.extend=function(e){var t=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=t.getCoordinates();var o=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=o.slice(),this.sketchCoords_.push(o.slice()),this.sketchPoint_=new a.b(new g.a(o)),this.updateSketchFeatures_(),this.dispatchEvent(new k(I,this.sketchFeature_))},t.prototype.updateSketchFeatures_=function(){var e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);var t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)},t.prototype.updateState_=function(){var e=this.getMap(),t=this.getActive();e&&t||this.abortDrawing(),this.overlay_.setMap(t?e:null)},t}(y.b);function N(e,t){return function(o,n,i){var s=Object(x.q)(o[0],i),a=Object(x.q)(o[o.length-1],i),l=Math.sqrt(Object(C.l)(s,a)),c=n||Object(v.c)(new r.a(s),e),u=t;if(!t&&0!==t){var d=a[0]-s[0],h=a[1]-s[1];u=Math.atan2(h,d)}Object(v.e)(c,s,l,u);var p=Object(x.x)();return p&&c.transform(i,p),c}}function D(){return function(e,t,o){var n=Object(O.c)([e[0],e[e.length-1]].map((function(e){return Object(x.q)(e,o)}))),r=[[Object(O.A)(n),Object(O.B)(n),Object(O.M)(n),Object(O.L)(n),Object(O.A)(n)]],i=t;i?i.setCoordinates(r):i=new v.b(r);var s=Object(x.x)();return s&&i.transform(o,s),i}}t.d=G},"./node_modules/ol/interaction/Extent.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return b}));var n,r=o("./node_modules/ol/events/Event.js"),i=o("./node_modules/ol/Feature.js"),s=o("./node_modules/ol/geom/GeometryType.js"),a=o("./node_modules/ol/MapBrowserEventType.js"),l=o("./node_modules/ol/geom/Point.js"),c=o("./node_modules/ol/interaction/Pointer.js"),u=o("./node_modules/ol/layer/Vector.js"),d=o("./node_modules/ol/source/Vector.js"),h=o("./node_modules/ol/events/condition.js"),p=o("./node_modules/ol/extent.js"),f=o("./node_modules/ol/coordinate.js"),m=o("./node_modules/ol/style/Style.js"),g=o("./node_modules/ol/geom/Polygon.js"),y=o("./node_modules/ol/proj.js"),v=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),_="extentchanged",b=function(e){function t(t){var o=e.call(this,_)||this;return o.extent=t,o}return v(t,e),t}(r.a),w=function(e){function t(t){var o,n=this,r=t||{};return(n=e.call(this,r)||this).on,n.once,n.un,n.condition_=r.condition?r.condition:h.d,n.extent_=null,n.pointerHandler_=null,n.pixelTolerance_=void 0!==r.pixelTolerance?r.pixelTolerance:10,n.snappedToVertex_=!1,n.extentFeature_=null,n.vertexFeature_=null,t||(t={}),n.extentOverlay_=new u.a({source:new d.b({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.boxStyle?t.boxStyle:(o=Object(m.b)(),function(e,t){return o[s.a.POLYGON]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),n.vertexOverlay_=new u.a({source:new d.b({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.pointerStyle?t.pointerStyle:E(),updateWhileAnimating:!0,updateWhileInteracting:!0}),t.extent&&n.setExtent(t.extent),n}return v(t,e),t.prototype.snapToVertex_=function(e,t){var o=t.getCoordinateFromPixelInternal(e),n=this.getExtentInternal();if(n){var r=function(e){return[[[e[0],e[1]],[e[0],e[3]]],[[e[0],e[3]],[e[2],e[3]]],[[e[2],e[3]],[e[2],e[1]]],[[e[2],e[1]],[e[0],e[1]]]]}(n);r.sort((function(e,t){return Object(f.m)(o,e)-Object(f.m)(o,t)}));var i=r[0],s=Object(f.c)(o,i),a=t.getPixelFromCoordinateInternal(s);if(Object(f.f)(e,a)<=this.pixelTolerance_){var l=t.getPixelFromCoordinateInternal(i[0]),c=t.getPixelFromCoordinateInternal(i[1]),u=Object(f.l)(a,l),d=Object(f.l)(a,c),h=Math.sqrt(Math.min(u,d));return this.snappedToVertex_=h<=this.pixelTolerance_,this.snappedToVertex_&&(s=u>d?i[1]:i[0]),s}}return null},t.prototype.handlePointerMove_=function(e){var t=e.pixel,o=e.map,n=this.snapToVertex_(t,o);n||(n=o.getCoordinateFromPixelInternal(t)),this.createOrUpdatePointerFeature_(n)},t.prototype.createOrUpdateExtentFeature_=function(e){var t=this.extentFeature_;return t?e?t.setGeometry(Object(g.d)(e)):t.setGeometry(void 0):(t=e?new i.b(Object(g.d)(e)):new i.b({}),this.extentFeature_=t,this.extentOverlay_.getSource().addFeature(t)),t},t.prototype.createOrUpdatePointerFeature_=function(e){var t=this.vertexFeature_;t?t.getGeometry().setCoordinates(e):(t=new i.b(new l.a(e)),this.vertexFeature_=t,this.vertexOverlay_.getSource().addFeature(t));return t},t.prototype.handleEvent=function(t){return!t.originalEvent||!this.condition_(t)||(t.type!=a.a.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),e.prototype.handleEvent.call(this,t),!1)},t.prototype.handleDownEvent=function(e){var t=e.pixel,o=e.map,n=this.getExtentInternal(),r=this.snapToVertex_(t,o),i=function(e){var t=null,o=null;return e[0]==n[0]?t=n[2]:e[0]==n[2]&&(t=n[0]),e[1]==n[1]?o=n[3]:e[1]==n[3]&&(o=n[1]),null!==t&&null!==o?[t,o]:null};if(r&&n){var s=r[0]==n[0]||r[0]==n[2]?r[0]:null,a=r[1]==n[1]||r[1]==n[3]?r[1]:null;null!==s&&null!==a?this.pointerHandler_=O(i(r)):null!==s?this.pointerHandler_=S(i([s,n[1]]),i([s,n[3]])):null!==a&&(this.pointerHandler_=S(i([n[0],a]),i([n[2],a])))}else r=o.getCoordinateFromPixelInternal(t),this.setExtent([r[0],r[1],r[0],r[1]]),this.pointerHandler_=O(r);return!0},t.prototype.handleDragEvent=function(e){if(this.pointerHandler_){var t=e.coordinate;this.setExtent(this.pointerHandler_(t)),this.createOrUpdatePointerFeature_(t)}},t.prototype.handleUpEvent=function(e){this.pointerHandler_=null;var t=this.getExtentInternal();return t&&0!==Object(p.z)(t)||this.setExtent(null),!1},t.prototype.setMap=function(t){this.extentOverlay_.setMap(t),this.vertexOverlay_.setMap(t),e.prototype.setMap.call(this,t)},t.prototype.getExtent=function(){return Object(y.C)(this.getExtentInternal(),this.getMap().getView().getProjection())},t.prototype.getExtentInternal=function(){return this.extent_},t.prototype.setExtent=function(e){this.extent_=e||null,this.createOrUpdateExtentFeature_(e),this.dispatchEvent(new b(this.extent_))},t}(c.b);function E(){var e=Object(m.b)();return function(t,o){return e[s.a.POINT]}}function O(e){return function(t){return Object(p.c)([e,t])}}function S(e,t){return e[0]==t[0]?function(o){return Object(p.c)([e,[o[0],t[1]]])}:e[1]==t[1]?function(o){return Object(p.c)([e,[t[0],o[1]]])}:null}t.b=w},"./node_modules/ol/interaction/Interaction.js":function(e,t,o){"use strict";o.d(t,"b",(function(){return c})),o.d(t,"c",(function(){return u}));var n,r=o("./node_modules/ol/Object.js"),i=o("./node_modules/ol/interaction/Property.js"),s=o("./node_modules/ol/easing.js"),a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),l=function(e){function t(t){var o=e.call(this)||this;return o.on,o.once,o.un,t&&t.handleEvent&&(o.handleEvent=t.handleEvent),o.map_=null,o.setActive(!0),o}return a(t,e),t.prototype.getActive=function(){return this.get(i.a.ACTIVE)},t.prototype.getMap=function(){return this.map_},t.prototype.handleEvent=function(e){return!0},t.prototype.setActive=function(e){this.set(i.a.ACTIVE,e)},t.prototype.setMap=function(e){this.map_=e},t}(r.b);function c(e,t,o){var n=e.getCenterInternal();if(n){var r=[n[0]+t[0],n[1]+t[1]];e.animateInternal({duration:void 0!==o?o:250,easing:s.d,center:e.getConstrainedCenter(r)})}}function u(e,t,o,n){var r=e.getZoom();if(void 0!==r){var i=e.getConstrainedZoom(r+t),a=e.getResolutionForZoom(i);e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:a,anchor:o,duration:void 0!==n?n:250,easing:s.b})}}t.a=l},"./node_modules/ol/interaction/KeyboardPan.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/events/EventType.js"),i=o("./node_modules/ol/interaction/Interaction.js"),s=37,a=38,l=39,c=40,u=o("./node_modules/ol/events/condition.js"),d=o("./node_modules/ol/coordinate.js"),h=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),p=function(e){function t(t){var o=e.call(this)||this,n=t||{};return o.defaultCondition_=function(e){return Object(u.l)(e)&&Object(u.s)(e)},o.condition_=void 0!==n.condition?n.condition:o.defaultCondition_,o.duration_=void 0!==n.duration?n.duration:100,o.pixelDelta_=void 0!==n.pixelDelta?n.pixelDelta:128,o}return h(t,e),t.prototype.handleEvent=function(e){var t=!1;if(e.type==r.a.KEYDOWN){var o=e.originalEvent,n=o.keyCode;if(this.condition_(e)&&(n==c||n==s||n==l||n==a)){var u=e.map.getView(),h=u.getResolution()*this.pixelDelta_,p=0,f=0;n==c?f=-h:n==s?p=-h:n==l?p=h:f=h;var m=[p,f];Object(d.j)(m,u.getRotation()),Object(i.b)(u,m,this.duration_),o.preventDefault(),t=!0}}return!t},t}(i.a);t.a=p},"./node_modules/ol/interaction/KeyboardZoom.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/events/EventType.js"),i=o("./node_modules/ol/interaction/Interaction.js"),s=o("./node_modules/ol/events/condition.js"),a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),l=function(e){function t(t){var o=e.call(this)||this,n=t||{};return o.condition_=n.condition?n.condition:s.s,o.delta_=n.delta?n.delta:1,o.duration_=void 0!==n.duration?n.duration:100,o}return a(t,e),t.prototype.handleEvent=function(e){var t=!1;if(e.type==r.a.KEYDOWN||e.type==r.a.KEYPRESS){var o=e.originalEvent,n=o.charCode;if(this.condition_(e)&&(n=="+".charCodeAt(0)||n=="-".charCodeAt(0))){var s=e.map,a=n=="+".charCodeAt(0)?this.delta_:-this.delta_,l=s.getView();Object(i.c)(l,a,void 0,this.duration_),o.preventDefault(),t=!0}}return!t},t}(i.a);t.a=l},"./node_modules/ol/interaction/Modify.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return A}));var n,r=o("./node_modules/ol/Collection.js"),i=o("./node_modules/ol/CollectionEventType.js"),s=o("./node_modules/ol/events/Event.js"),a=o("./node_modules/ol/events/EventType.js"),l=o("./node_modules/ol/Feature.js"),c=o("./node_modules/ol/geom/GeometryType.js"),u=o("./node_modules/ol/MapBrowserEventType.js"),d=o("./node_modules/ol/geom/Point.js"),h=o("./node_modules/ol/interaction/Pointer.js"),p=o("./node_modules/ol/structs/RBush.js"),f=o("./node_modules/ol/source/VectorEventType.js"),m=o("./node_modules/ol/layer/Vector.js"),g=o("./node_modules/ol/source/Vector.js"),y=o("./node_modules/ol/events/condition.js"),v=o("./node_modules/ol/extent.js"),_=o("./node_modules/ol/coordinate.js"),b=o("./node_modules/ol/style/Style.js"),w=o("./node_modules/ol/array.js"),E=o("./node_modules/ol/geom/Polygon.js"),O=o("./node_modules/ol/proj.js"),S=o("./node_modules/ol/util.js"),x=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),C=[0,0,0,0],j=[],P="modifystart",T="modifyend",A=function(e){function t(t,o,n){var r=e.call(this,t)||this;return r.features=o,r.mapBrowserEvent=n,r}return x(t,e),t}(s.a),M=function(e){function t(t){var o,n,s=e.call(this,t)||this;if(s.on,s.once,s.un,s.boundHandleFeatureChange_=s.handleFeatureChange_.bind(s),s.condition_=t.condition?t.condition:y.p,s.defaultDeleteCondition_=function(e){return Object(y.b)(e)&&Object(y.r)(e)},s.deleteCondition_=t.deleteCondition?t.deleteCondition:s.defaultDeleteCondition_,s.insertVertexCondition_=t.insertVertexCondition?t.insertVertexCondition:y.d,s.vertexFeature_=null,s.vertexSegments_=null,s.lastPixel_=[0,0],s.ignoreNextSingleClick_=!1,s.featuresBeingModified_=null,s.rBush_=new p.a,s.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,s.snappedToVertex_=!1,s.changingFeature_=!1,s.dragSegments_=[],s.overlay_=new m.a({source:new g.b({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.style?t.style:(o=Object(b.b)(),function(e,t){return o[c.a.POINT]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),s.SEGMENT_WRITERS_={Point:s.writePointGeometry_.bind(s),LineString:s.writeLineStringGeometry_.bind(s),LinearRing:s.writeLineStringGeometry_.bind(s),Polygon:s.writePolygonGeometry_.bind(s),MultiPoint:s.writeMultiPointGeometry_.bind(s),MultiLineString:s.writeMultiLineStringGeometry_.bind(s),MultiPolygon:s.writeMultiPolygonGeometry_.bind(s),Circle:s.writeCircleGeometry_.bind(s),GeometryCollection:s.writeGeometryCollectionGeometry_.bind(s)},s.source_=null,s.hitDetection_=null,t.features?n=t.features:t.source&&(s.source_=t.source,n=new r.b(s.source_.getFeatures()),s.source_.addEventListener(f.a.ADDFEATURE,s.handleSourceAdd_.bind(s)),s.source_.addEventListener(f.a.REMOVEFEATURE,s.handleSourceRemove_.bind(s))),!n)throw new Error("The modify interaction requires features, a source or a layer");return t.hitDetection&&(s.hitDetection_=t.hitDetection),s.features_=n,s.features_.forEach(s.addFeature_.bind(s)),s.features_.addEventListener(i.a.ADD,s.handleFeatureAdd_.bind(s)),s.features_.addEventListener(i.a.REMOVE,s.handleFeatureRemove_.bind(s)),s.lastPointerEvent_=null,s.delta_=[0,0],s.snapToPointer_=void 0===t.snapToPointer?!s.hitDetection_:t.snapToPointer,s}return x(t,e),t.prototype.addFeature_=function(e){var t=e.getGeometry();if(t){var o=this.SEGMENT_WRITERS_[t.getType()];o&&o(e,t)}var n=this.getMap();n&&n.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,n),e.addEventListener(a.a.CHANGE,this.boundHandleFeatureChange_)},t.prototype.willModifyFeatures_=function(e,t){if(!this.featuresBeingModified_){this.featuresBeingModified_=new r.b;for(var o=this.featuresBeingModified_.getArray(),n=0,i=t.length;n<i;++n)for(var s=t[n],a=0,l=s.length;a<l;++a){var c=s[a].feature;c&&-1===o.indexOf(c)&&this.featuresBeingModified_.push(c)}0===this.featuresBeingModified_.getLength()?this.featuresBeingModified_=null:this.dispatchEvent(new A(P,this.featuresBeingModified_,e))}},t.prototype.removeFeature_=function(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(a.a.CHANGE,this.boundHandleFeatureChange_)},t.prototype.removeFeatureSegmentData_=function(e){var t=this.rBush_,o=[];t.forEach((function(t){e===t.feature&&o.push(t)}));for(var n=o.length-1;n>=0;--n){for(var r=o[n],i=this.dragSegments_.length-1;i>=0;--i)this.dragSegments_[i][0]===r&&this.dragSegments_.splice(i,1);t.remove(r)}},t.prototype.setActive=function(t){this.vertexFeature_&&!t&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.prototype.setActive.call(this,t)},t.prototype.setMap=function(t){this.overlay_.setMap(t),e.prototype.setMap.call(this,t)},t.prototype.getOverlay=function(){return this.overlay_},t.prototype.handleSourceAdd_=function(e){e.feature&&this.features_.push(e.feature)},t.prototype.handleSourceRemove_=function(e){e.feature&&this.features_.remove(e.feature)},t.prototype.handleFeatureAdd_=function(e){this.addFeature_(e.element)},t.prototype.handleFeatureChange_=function(e){if(!this.changingFeature_){var t=e.target;this.removeFeature_(t),this.addFeature_(t)}},t.prototype.handleFeatureRemove_=function(e){var t=e.element;this.removeFeature_(t)},t.prototype.writePointGeometry_=function(e,t){var o=t.getCoordinates(),n={feature:e,geometry:t,segment:[o,o]};this.rBush_.insert(t.getExtent(),n)},t.prototype.writeMultiPointGeometry_=function(e,t){for(var o=t.getCoordinates(),n=0,r=o.length;n<r;++n){var i=o[n],s={feature:e,geometry:t,depth:[n],index:n,segment:[i,i]};this.rBush_.insert(t.getExtent(),s)}},t.prototype.writeLineStringGeometry_=function(e,t){for(var o=t.getCoordinates(),n=0,r=o.length-1;n<r;++n){var i=o.slice(n,n+2),s={feature:e,geometry:t,index:n,segment:i};this.rBush_.insert(Object(v.c)(i),s)}},t.prototype.writeMultiLineStringGeometry_=function(e,t){for(var o=t.getCoordinates(),n=0,r=o.length;n<r;++n)for(var i=o[n],s=0,a=i.length-1;s<a;++s){var l=i.slice(s,s+2),c={feature:e,geometry:t,depth:[n],index:s,segment:l};this.rBush_.insert(Object(v.c)(l),c)}},t.prototype.writePolygonGeometry_=function(e,t){for(var o=t.getCoordinates(),n=0,r=o.length;n<r;++n)for(var i=o[n],s=0,a=i.length-1;s<a;++s){var l=i.slice(s,s+2),c={feature:e,geometry:t,depth:[n],index:s,segment:l};this.rBush_.insert(Object(v.c)(l),c)}},t.prototype.writeMultiPolygonGeometry_=function(e,t){for(var o=t.getCoordinates(),n=0,r=o.length;n<r;++n)for(var i=o[n],s=0,a=i.length;s<a;++s)for(var l=i[s],c=0,u=l.length-1;c<u;++c){var d=l.slice(c,c+2),h={feature:e,geometry:t,depth:[s,n],index:c,segment:d};this.rBush_.insert(Object(v.c)(d),h)}},t.prototype.writeCircleGeometry_=function(e,t){var o=t.getCenter(),n={feature:e,geometry:t,index:0,segment:[o,o]},r={feature:e,geometry:t,index:1,segment:[o,o]},i=[n,r];n.featureSegments=i,r.featureSegments=i,this.rBush_.insert(Object(v.n)(o),n);var s=t,a=Object(O.x)();if(a&&this.getMap()){var l=this.getMap().getView().getProjection();s=s.clone().transform(a,l),s=Object(E.c)(s).transform(l,a)}this.rBush_.insert(s.getExtent(),r)},t.prototype.writeGeometryCollectionGeometry_=function(e,t){for(var o=t.getGeometriesArray(),n=0;n<o.length;++n){var r=o[n];(0,this.SEGMENT_WRITERS_[r.getType()])(e,r)}},t.prototype.createOrUpdateVertexFeature_=function(e,t,o){var n=this.vertexFeature_;n?n.getGeometry().setCoordinates(e):(n=new l.b(new d.a(e)),this.vertexFeature_=n,this.overlay_.getSource().addFeature(n));return n.set("features",t),n.set("geometries",o),n},t.prototype.handleEvent=function(t){return!t.originalEvent||(this.lastPointerEvent_=t,t.map.getView().getInteracting()||t.type!=u.a.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),this.vertexFeature_&&this.deleteCondition_(t)&&(o=!(t.type!=u.a.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),t.type==u.a.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),e.prototype.handleEvent.call(this,t)&&!o);var o},t.prototype.handleDragEvent=function(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_);for(var t=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],o=[],n=[],r=0,i=this.dragSegments_.length;r<i;++r){var s=this.dragSegments_[r],a=s[0],l=a.feature;-1===o.indexOf(l)&&o.push(l);var u=a.geometry;-1===n.indexOf(u)&&n.push(u);for(var d=a.depth,h=void 0,p=a.segment,f=s[1];t.length<u.getStride();)t.push(p[f][t.length]);switch(u.getType()){case c.a.POINT:h=t,p[0]=t,p[1]=t;break;case c.a.MULTI_POINT:(h=u.getCoordinates())[a.index]=t,p[0]=t,p[1]=t;break;case c.a.LINE_STRING:(h=u.getCoordinates())[a.index+f]=t,p[f]=t;break;case c.a.MULTI_LINE_STRING:case c.a.POLYGON:(h=u.getCoordinates())[d[0]][a.index+f]=t,p[f]=t;break;case c.a.MULTI_POLYGON:(h=u.getCoordinates())[d[1]][d[0]][a.index+f]=t,p[f]=t;break;case c.a.CIRCLE:if(p[0]=t,p[1]=t,0===a.index)this.changingFeature_=!0,u.setCenter(t),this.changingFeature_=!1;else{this.changingFeature_=!0;var m=e.map.getView().getProjection(),g=Object(_.f)(Object(O.q)(u.getCenter(),m),Object(O.q)(t,m)),y=Object(O.x)();if(y){var v=u.clone().transform(y,m);v.setRadius(g),g=v.transform(m,y).getRadius()}u.setRadius(g),this.changingFeature_=!1}}h&&this.setGeometryCoordinates_(u,h)}this.createOrUpdateVertexFeature_(t,o,n)},t.prototype.handleDownEvent=function(e){if(!this.condition_(e))return!1;var t=e.coordinate;this.handlePointerAtPixel_(e.pixel,e.map,t),this.dragSegments_.length=0,this.featuresBeingModified_=null;var o=this.vertexFeature_;if(o){var n=e.map.getView().getProjection(),r=[],i=o.getGeometry().getCoordinates(),s=Object(v.c)([i]),a=this.rBush_.getInExtent(s),l={};a.sort(I);for(var u=0,d=a.length;u<d;++u){var h=a[u],p=h.segment,f=Object(S.c)(h.geometry),m=h.depth;if(m&&(f+="-"+m.join("-")),l[f]||(l[f]=new Array(2)),h.geometry.getType()!==c.a.CIRCLE||1!==h.index)if(!Object(_.g)(p[0],i)||l[f][0])if(!Object(_.g)(p[1],i)||l[f][1])Object(S.c)(p)in this.vertexSegments_&&!l[f][0]&&!l[f][1]&&this.insertVertexCondition_(e)&&r.push(h);else{if((h.geometry.getType()===c.a.LINE_STRING||h.geometry.getType()===c.a.MULTI_LINE_STRING)&&l[f][0]&&0===l[f][0].index)continue;this.dragSegments_.push([h,1]),l[f][1]=h}else this.dragSegments_.push([h,0]),l[f][0]=h;else{var g=L(t,h,n);Object(_.g)(g,i)&&!l[f][0]&&(this.dragSegments_.push([h,0]),l[f][0]=h)}}r.length&&this.willModifyFeatures_(e,[r]);for(var y=r.length-1;y>=0;--y)this.insertVertex_(r[y],i)}return!!this.vertexFeature_},t.prototype.handleUpEvent=function(e){for(var t=this.dragSegments_.length-1;t>=0;--t){var o=this.dragSegments_[t][0],n=o.geometry;if(n.getType()===c.a.CIRCLE){var r=n.getCenter(),i=o.featureSegments[0],s=o.featureSegments[1];i.segment[0]=r,i.segment[1]=r,s.segment[0]=r,s.segment[1]=r,this.rBush_.update(Object(v.n)(r),i);var a=n,l=Object(O.x)();if(l){var u=e.map.getView().getProjection();a=a.clone().transform(l,u),a=Object(E.c)(a).transform(u,l)}this.rBush_.update(a.getExtent(),s)}else this.rBush_.update(Object(v.c)(o.segment),o)}return this.featuresBeingModified_&&(this.dispatchEvent(new A(T,this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1},t.prototype.handlePointerMove_=function(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map,e.coordinate)},t.prototype.handlePointerAtPixel_=function(e,t,o){var n,r,i=this,s=o||t.getCoordinateFromPixel(e),a=t.getView().getProjection();if(this.hitDetection_){var l="object"==typeof this.hitDetection_?function(e){return e===i.hitDetection_}:void 0;t.forEachFeatureAtPixel(e,(function(e,t,o){if((o=o||e.getGeometry()).getType()===c.a.POINT&&Object(w.f)(i.features_.getArray(),e)){r=o;var s=o.getFlatCoordinates().slice(0,2);n=[{feature:e,geometry:o,segment:[s,s]}]}return!0}),{layerFilter:l})}if(!n){var u=Object(O.r)(Object(v.n)(s,C),a),d=t.getView().getResolution()*this.pixelTolerance_,h=Object(O.C)(Object(v.d)(u,d,C),a);n=this.rBush_.getInExtent(h)}if(n&&n.length>0){var p=n.sort((function(e,t){return R(s,e,a)-R(s,t,a)}))[0],f=p.segment,m=L(s,p,a),g=t.getPixelFromCoordinate(m),y=Object(_.f)(e,g);if(r||y<=this.pixelTolerance_){var b={};if(b[Object(S.c)(f)]=!0,this.snapToPointer_||(this.delta_[0]=m[0]-s[0],this.delta_[1]=m[1]-s[1]),p.geometry.getType()===c.a.CIRCLE&&1===p.index)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(m,[p.feature],[p.geometry]);else{var E=t.getPixelFromCoordinate(f[0]),x=t.getPixelFromCoordinate(f[1]),j=Object(_.l)(g,E),P=Object(_.l)(g,x);y=Math.sqrt(Math.min(j,P)),this.snappedToVertex_=y<=this.pixelTolerance_,this.snappedToVertex_&&(m=j>P?f[1]:f[0]),this.createOrUpdateVertexFeature_(m,[p.feature],[p.geometry]);var T={};T[Object(S.c)(p.geometry)]=!0;for(var A=1,M=n.length;A<M;++A){var I=n[A].segment;if(!(Object(_.g)(f[0],I[0])&&Object(_.g)(f[1],I[1])||Object(_.g)(f[0],I[1])&&Object(_.g)(f[1],I[0])))break;var k=Object(S.c)(n[A].geometry);k in T||(T[k]=!0,b[Object(S.c)(I)]=!0)}}return void(this.vertexSegments_=b)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},t.prototype.insertVertex_=function(e,t){for(var o,n=e.segment,r=e.feature,i=e.geometry,s=e.depth,a=e.index;t.length<i.getStride();)t.push(0);switch(i.getType()){case c.a.MULTI_LINE_STRING:case c.a.POLYGON:(o=i.getCoordinates())[s[0]].splice(a+1,0,t);break;case c.a.MULTI_POLYGON:(o=i.getCoordinates())[s[1]][s[0]].splice(a+1,0,t);break;case c.a.LINE_STRING:(o=i.getCoordinates()).splice(a+1,0,t);break;default:return}this.setGeometryCoordinates_(i,o);var l=this.rBush_;l.remove(e),this.updateSegmentIndices_(i,a,s,1);var u={segment:[n[0],t],feature:r,geometry:i,depth:s,index:a};l.insert(Object(v.c)(u.segment),u),this.dragSegments_.push([u,1]);var d={segment:[t,n[1]],feature:r,geometry:i,depth:s,index:a+1};l.insert(Object(v.c)(d.segment),d),this.dragSegments_.push([d,0]),this.ignoreNextSingleClick_=!0},t.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=u.a.POINTERDRAG){var e=this.lastPointerEvent_;this.willModifyFeatures_(e,this.dragSegments_);var t=this.removeVertex_();return this.dispatchEvent(new A(T,this.featuresBeingModified_,e)),this.featuresBeingModified_=null,t}return!1},t.prototype.removeVertex_=function(){var e,t,o,n,r,i,s,a,l,u,d,h=this.dragSegments_,p={},f=!1;for(r=h.length-1;r>=0;--r)u=(o=h[r])[0],d=Object(S.c)(u.feature),u.depth&&(d+="-"+u.depth.join("-")),d in p||(p[d]={}),0===o[1]?(p[d].right=u,p[d].index=u.index):1==o[1]&&(p[d].left=u,p[d].index=u.index+1);for(d in p){switch(l=p[d].right,s=p[d].left,(a=(i=p[d].index)-1)<0&&(a=0),e=t=(n=(u=void 0!==s?s:l).geometry).getCoordinates(),f=!1,n.getType()){case c.a.MULTI_LINE_STRING:t[u.depth[0]].length>2&&(t[u.depth[0]].splice(i,1),f=!0);break;case c.a.LINE_STRING:t.length>2&&(t.splice(i,1),f=!0);break;case c.a.MULTI_POLYGON:e=e[u.depth[1]];case c.a.POLYGON:(e=e[u.depth[0]]).length>4&&(i==e.length-1&&(i=0),e.splice(i,1),f=!0,0===i&&(e.pop(),e.push(e[0]),a=e.length-1))}if(f){this.setGeometryCoordinates_(n,t);var m=[];if(void 0!==s&&(this.rBush_.remove(s),m.push(s.segment[0])),void 0!==l&&(this.rBush_.remove(l),m.push(l.segment[1])),void 0!==s&&void 0!==l){var g={depth:u.depth,feature:u.feature,geometry:u.geometry,index:a,segment:m};this.rBush_.insert(Object(v.c)(g.segment),g)}this.updateSegmentIndices_(n,i,u.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),h.length=0}}return f},t.prototype.setGeometryCoordinates_=function(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1},t.prototype.updateSegmentIndices_=function(e,t,o,n){this.rBush_.forEachInExtent(e.getExtent(),(function(r){r.geometry===e&&(void 0===o||void 0===r.depth||Object(w.b)(r.depth,o))&&r.index>t&&(r.index+=n)}))},t}(h.b);function I(e,t){return e.index-t.index}function R(e,t,o){var n=t.geometry;if(n.getType()===c.a.CIRCLE){var r=n;if(1===t.index){var i=Object(O.x)();i&&(r=r.clone().transform(i,o));var s=Object(_.l)(r.getCenter(),Object(O.q)(e,o)),a=Math.sqrt(s)-r.getRadius();return a*a}}var l=Object(O.q)(e,o);return j[0]=Object(O.q)(t.segment[0],o),j[1]=Object(O.q)(t.segment[1],o),Object(_.m)(l,j)}function L(e,t,o){var n=t.geometry;if(n.getType()===c.a.CIRCLE&&1===t.index){var r=n,i=Object(O.x)();return i&&(r=r.clone().transform(i,o)),Object(O.B)(r.getClosestPoint(Object(O.q)(e,o)),o)}var s=Object(O.q)(e,o);return j[0]=Object(O.q)(t.segment[0],o),j[1]=Object(O.q)(t.segment[1],o),Object(O.B)(Object(_.c)(s,j),o)}t.b=M},"./node_modules/ol/interaction/MouseWheelZoom.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/events/EventType.js"),i=o("./node_modules/ol/interaction/Interaction.js"),s=o("./node_modules/ol/has.js"),a=o("./node_modules/ol/events/condition.js"),l=o("./node_modules/ol/math.js"),c=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),u="trackpad",d="wheel",h=function(e){function t(t){var o=this,n=t||{};(o=e.call(this,n)||this).totalDelta_=0,o.lastDelta_=0,o.maxDelta_=void 0!==n.maxDelta?n.maxDelta:1,o.duration_=void 0!==n.duration?n.duration:250,o.timeout_=void 0!==n.timeout?n.timeout:80,o.useAnchor_=void 0===n.useAnchor||n.useAnchor,o.constrainResolution_=void 0!==n.constrainResolution&&n.constrainResolution;var r=n.condition?n.condition:a.d;return o.condition_=n.onFocusOnly?Object(a.a)(a.h,r):r,o.lastAnchor_=null,o.startTime_=void 0,o.timeoutId_,o.mode_=void 0,o.trackpadEventGap_=400,o.trackpadTimeoutId_,o.deltaPerZoom_=300,o}return c(t,e),t.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},t.prototype.handleEvent=function(e){if(!this.condition_(e))return!0;if(e.type!==r.a.WHEEL)return!0;var t,o=e.map,n=e.originalEvent;if(n.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate),e.type==r.a.WHEEL&&(t=n.deltaY,s.b&&n.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(t/=s.a),n.deltaMode===WheelEvent.DOM_DELTA_LINE&&(t*=40)),0===t)return!1;this.lastDelta_=t;var i=Date.now();void 0===this.startTime_&&(this.startTime_=i),(!this.mode_||i-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(t)<4?u:d);var a=o.getView();if(this.mode_===u&&!a.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-t/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=i,!1;this.totalDelta_+=t;var l=Math.max(this.timeout_-(i-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,o),l),!1},t.prototype.handleWheelZoom_=function(e){var t=e.getView();t.getAnimating()&&t.cancelAnimations();var o=-Object(l.a)(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(o=o?o>0?1:-1:0),Object(i.c)(t,o,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},t.prototype.setMouseAnchor=function(e){this.useAnchor_=e,e||(this.lastAnchor_=null)},t}(i.a);t.a=h},"./node_modules/ol/interaction/PinchRotate.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/interaction/Pointer.js"),i=o("./node_modules/ol/functions.js"),s=o("./node_modules/ol/rotationconstraint.js"),a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),l=function(e){function t(t){var o=this,n=t||{},r=n;return r.stopDown||(r.stopDown=i.a),(o=e.call(this,r)||this).anchor_=null,o.lastAngle_=void 0,o.rotating_=!1,o.rotationDelta_=0,o.threshold_=void 0!==n.threshold?n.threshold:.3,o.duration_=void 0!==n.duration?n.duration:250,o}return a(t,e),t.prototype.handleDragEvent=function(e){var t=0,o=this.targetPointers[0],n=this.targetPointers[1],i=Math.atan2(n.clientY-o.clientY,n.clientX-o.clientX);if(void 0!==this.lastAngle_){var a=i-this.lastAngle_;this.rotationDelta_+=a,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=a}this.lastAngle_=i;var l=e.map,c=l.getView();if(c.getConstraints().rotation!==s.c){var u=l.getViewport().getBoundingClientRect(),d=Object(r.a)(this.targetPointers);d[0]-=u.left,d[1]-=u.top,this.anchor_=l.getCoordinateFromPixelInternal(d),this.rotating_&&(l.render(),c.adjustRotationInternal(t,this.anchor_))}},t.prototype.handleUpEvent=function(e){return!(this.targetPointers.length<2)||(e.map.getView().endInteraction(this.duration_),!1)},t.prototype.handleDownEvent=function(e){if(this.targetPointers.length>=2){var t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1},t}(r.b);t.a=l},"./node_modules/ol/interaction/PinchZoom.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/interaction/Pointer.js"),i=o("./node_modules/ol/functions.js"),s=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=function(e){function t(t){var o=this,n=t||{},r=n;return r.stopDown||(r.stopDown=i.a),(o=e.call(this,r)||this).anchor_=null,o.duration_=void 0!==n.duration?n.duration:400,o.lastDistance_=void 0,o.lastScaleDelta_=1,o}return s(t,e),t.prototype.handleDragEvent=function(e){var t=1,o=this.targetPointers[0],n=this.targetPointers[1],i=o.clientX-n.clientX,s=o.clientY-n.clientY,a=Math.sqrt(i*i+s*s);void 0!==this.lastDistance_&&(t=this.lastDistance_/a),this.lastDistance_=a;var l=e.map,c=l.getView();1!=t&&(this.lastScaleDelta_=t);var u=l.getViewport().getBoundingClientRect(),d=Object(r.a)(this.targetPointers);d[0]-=u.left,d[1]-=u.top,this.anchor_=l.getCoordinateFromPixelInternal(d),l.render(),c.adjustResolutionInternal(t,this.anchor_)},t.prototype.handleUpEvent=function(e){if(this.targetPointers.length<2){var t=e.map.getView(),o=this.lastScaleDelta_>1?1:-1;return t.endInteraction(this.duration_,o),!1}return!0},t.prototype.handleDownEvent=function(e){if(this.targetPointers.length>=2){var t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1},t}(r.b);t.a=a},"./node_modules/ol/interaction/Pointer.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return c}));var n,r=o("./node_modules/ol/interaction/Interaction.js"),i=o("./node_modules/ol/MapBrowserEventType.js"),s=o("./node_modules/ol/obj.js"),a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),l=function(e){function t(t){var o=this,n=t||{};return o=e.call(this,n)||this,n.handleDownEvent&&(o.handleDownEvent=n.handleDownEvent),n.handleDragEvent&&(o.handleDragEvent=n.handleDragEvent),n.handleMoveEvent&&(o.handleMoveEvent=n.handleMoveEvent),n.handleUpEvent&&(o.handleUpEvent=n.handleUpEvent),n.stopDown&&(o.stopDown=n.stopDown),o.handlingDownUpSequence=!1,o.trackedPointers_={},o.targetPointers=[],o}return a(t,e),t.prototype.getPointerCount=function(){return this.targetPointers.length},t.prototype.handleDownEvent=function(e){return!1},t.prototype.handleDragEvent=function(e){},t.prototype.handleEvent=function(e){if(!e.originalEvent)return!0;var t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==i.a.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==i.a.POINTERUP){var o=this.handleUpEvent(e);this.handlingDownUpSequence=o&&this.targetPointers.length>0}}else if(e.type==i.a.POINTERDOWN){var n=this.handleDownEvent(e);this.handlingDownUpSequence=n,t=this.stopDown(n)}else e.type==i.a.POINTERMOVE&&this.handleMoveEvent(e);return!t},t.prototype.handleMoveEvent=function(e){},t.prototype.handleUpEvent=function(e){return!1},t.prototype.stopDown=function(e){return e},t.prototype.updateTrackedPointers_=function(e){if(function(e){var t=e.type;return t===i.a.POINTERDOWN||t===i.a.POINTERDRAG||t===i.a.POINTERUP}(e)){var t=e.originalEvent,o=t.pointerId.toString();e.type==i.a.POINTERUP?delete this.trackedPointers_[o]:(e.type==i.a.POINTERDOWN||o in this.trackedPointers_)&&(this.trackedPointers_[o]=t),this.targetPointers=Object(s.c)(this.trackedPointers_)}},t}(r.a);function c(e){for(var t=e.length,o=0,n=0,r=0;r<t;r++)o+=e[r].clientX,n+=e[r].clientY;return[o/t,n/t]}t.b=l},"./node_modules/ol/interaction/Property.js":function(e,t,o){"use strict";t.a={ACTIVE:"active"}},"./node_modules/ol/interaction/Select.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return y}));var n,r=o("./node_modules/ol/Collection.js"),i=o("./node_modules/ol/CollectionEventType.js"),s=o("./node_modules/ol/events/Event.js"),a=o("./node_modules/ol/geom/GeometryType.js"),l=o("./node_modules/ol/interaction/Interaction.js"),c=o("./node_modules/ol/functions.js"),u=o("./node_modules/ol/obj.js"),d=o("./node_modules/ol/style/Style.js"),h=o("./node_modules/ol/array.js"),p=o("./node_modules/ol/util.js"),f=o("./node_modules/ol/events/condition.js"),m=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),g="select",y=function(e){function t(t,o,n,r){var i=e.call(this,t)||this;return i.selected=o,i.deselected=n,i.mapBrowserEvent=r,i}return m(t,e),t}(s.a),v={},_=function(e){function t(t){var o=e.call(this)||this;o.on,o.once,o.un;var n,i,s=t||{};if(o.boundAddFeature_=o.addFeature_.bind(o),o.boundRemoveFeature_=o.removeFeature_.bind(o),o.condition_=s.condition?s.condition:f.r,o.addCondition_=s.addCondition?s.addCondition:f.k,o.removeCondition_=s.removeCondition?s.removeCondition:f.k,o.toggleCondition_=s.toggleCondition?s.toggleCondition:f.q,o.multi_=!!s.multi&&s.multi,o.filter_=s.filter?s.filter:c.b,o.hitTolerance_=s.hitTolerance?s.hitTolerance:0,o.style_=void 0!==s.style?s.style:(n=Object(d.b)(),Object(h.c)(n[a.a.POLYGON],n[a.a.LINE_STRING]),Object(h.c)(n[a.a.GEOMETRY_COLLECTION],n[a.a.LINE_STRING]),function(e){return e.getGeometry()?n[e.getGeometry().getType()]:null}),o.features_=s.features||new r.b,s.layers)if("function"==typeof s.layers)i=s.layers;else{var l=s.layers;i=function(e){return Object(h.f)(l,e)}}else i=c.b;return o.layerFilter_=i,o.featureLayerAssociation_={},o}return m(t,e),t.prototype.addFeatureLayerAssociation_=function(e,t){this.featureLayerAssociation_[Object(p.c)(e)]=t},t.prototype.getFeatures=function(){return this.features_},t.prototype.getHitTolerance=function(){return this.hitTolerance_},t.prototype.getLayer=function(e){return this.featureLayerAssociation_[Object(p.c)(e)]},t.prototype.setHitTolerance=function(e){this.hitTolerance_=e},t.prototype.setMap=function(t){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),e.prototype.setMap.call(this,t),t?(this.features_.addEventListener(i.a.ADD,this.boundAddFeature_),this.features_.addEventListener(i.a.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(i.a.ADD,this.boundAddFeature_),this.features_.removeEventListener(i.a.REMOVE,this.boundRemoveFeature_))},t.prototype.addFeature_=function(e){var t=e.element;this.style_&&this.applySelectedStyle_(t)},t.prototype.removeFeature_=function(e){var t=e.element;this.style_&&this.restorePreviousStyle_(t)},t.prototype.getStyle=function(){return this.style_},t.prototype.applySelectedStyle_=function(e){var t=Object(p.c)(e);t in v||(v[t]=e.getStyle()),e.setStyle(this.style_)},t.prototype.restorePreviousStyle_=function(e){for(var o=this.getMap().getInteractions().getArray(),n=o.length-1;n>=0;--n){var r=o[n];if(r!==this&&r instanceof t&&r.getStyle()&&-1!==r.getFeatures().getArray().lastIndexOf(e))return void e.setStyle(r.getStyle())}var i=Object(p.c)(e);e.setStyle(v[i]),delete v[i]},t.prototype.removeFeatureLayerAssociation_=function(e){delete this.featureLayerAssociation_[Object(p.c)(e)]},t.prototype.handleEvent=function(e){if(!this.condition_(e))return!0;var t=this.addCondition_(e),o=this.removeCondition_(e),n=this.toggleCondition_(e),r=!t&&!o&&!n,i=e.map,s=this.getFeatures(),a=[],l=[];if(r){Object(u.b)(this.featureLayerAssociation_),i.forEachFeatureAtPixel(e.pixel,function(e,t){if(this.filter_(e,t))return l.push(e),this.addFeatureLayerAssociation_(e,t),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var c=s.getLength()-1;c>=0;--c){var d=s.item(c),p=l.indexOf(d);p>-1?l.splice(p,1):(s.remove(d),a.push(d))}0!==l.length&&s.extend(l)}else{i.forEachFeatureAtPixel(e.pixel,function(e,r){if(this.filter_(e,r))return!t&&!n||Object(h.f)(s.getArray(),e)?(o||n)&&Object(h.f)(s.getArray(),e)&&(a.push(e),this.removeFeatureLayerAssociation_(e)):(l.push(e),this.addFeatureLayerAssociation_(e,r)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var f=a.length-1;f>=0;--f)s.remove(a[f]);s.extend(l)}return(l.length>0||a.length>0)&&this.dispatchEvent(new y(g,l,a,e)),!0},t}(l.a);t.b=_},"./node_modules/ol/interaction/Snap.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/CollectionEventType.js"),i=o("./node_modules/ol/events/EventType.js"),s=o("./node_modules/ol/geom/GeometryType.js"),a=o("./node_modules/ol/interaction/Pointer.js"),l=o("./node_modules/ol/structs/RBush.js"),c=o("./node_modules/ol/source/VectorEventType.js"),u=o("./node_modules/ol/functions.js"),d=o("./node_modules/ol/extent.js"),h=o("./node_modules/ol/coordinate.js"),p=o("./node_modules/ol/geom/Polygon.js"),f=o("./node_modules/ol/proj.js"),m=o("./node_modules/ol/util.js"),g=o("./node_modules/ol/obj.js"),y=o("./node_modules/ol/events.js"),v=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});function _(e){return e.feature?e.feature:e.element?e.element:void 0}var b=[],w=function(e){function t(t){var o=this,n=t||{},r=n;return r.handleDownEvent||(r.handleDownEvent=u.b),r.stopDown||(r.stopDown=u.a),(o=e.call(this,r)||this).source_=n.source?n.source:null,o.vertex_=void 0===n.vertex||n.vertex,o.edge_=void 0===n.edge||n.edge,o.features_=n.features?n.features:null,o.featuresListenerKeys_=[],o.featureChangeListenerKeys_={},o.indexedFeaturesExtents_={},o.pendingFeatures_={},o.pixelTolerance_=void 0!==n.pixelTolerance?n.pixelTolerance:10,o.rBush_=new l.a,o.SEGMENT_WRITERS_={Point:o.writePointGeometry_.bind(o),LineString:o.writeLineStringGeometry_.bind(o),LinearRing:o.writeLineStringGeometry_.bind(o),Polygon:o.writePolygonGeometry_.bind(o),MultiPoint:o.writeMultiPointGeometry_.bind(o),MultiLineString:o.writeMultiLineStringGeometry_.bind(o),MultiPolygon:o.writeMultiPolygonGeometry_.bind(o),GeometryCollection:o.writeGeometryCollectionGeometry_.bind(o),Circle:o.writeCircleGeometry_.bind(o)},o}return v(t,e),t.prototype.addFeature=function(e,t){var o=void 0===t||t,n=Object(m.c)(e),r=e.getGeometry();if(r){var s=this.SEGMENT_WRITERS_[r.getType()];s&&(this.indexedFeaturesExtents_[n]=r.getExtent(Object(d.k)()),s(e,r))}o&&(this.featureChangeListenerKeys_[n]=Object(y.a)(e,i.a.CHANGE,this.handleFeatureChange_,this))},t.prototype.forEachFeatureAdd_=function(e){this.addFeature(e)},t.prototype.forEachFeatureRemove_=function(e){this.removeFeature(e)},t.prototype.getFeatures_=function(){var e;return this.features_?e=this.features_:this.source_&&(e=this.source_.getFeatures()),e},t.prototype.handleEvent=function(t){var o=this.snapTo(t.pixel,t.coordinate,t.map);return o.snapped&&(t.coordinate=o.vertex.slice(0,2),t.pixel=o.vertexPixel),e.prototype.handleEvent.call(this,t)},t.prototype.handleFeatureAdd_=function(e){var t=_(e);this.addFeature(t)},t.prototype.handleFeatureRemove_=function(e){var t=_(e);this.removeFeature(t)},t.prototype.handleFeatureChange_=function(e){var t=e.target;if(this.handlingDownUpSequence){var o=Object(m.c)(t);o in this.pendingFeatures_||(this.pendingFeatures_[o]=t)}else this.updateFeature_(t)},t.prototype.handleUpEvent=function(e){var t=Object(g.c)(this.pendingFeatures_);return t.length&&(t.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1},t.prototype.removeFeature=function(e,t){var o=void 0===t||t,n=Object(m.c)(e),r=this.indexedFeaturesExtents_[n];if(r){var i=this.rBush_,s=[];i.forEachInExtent(r,(function(t){e===t.feature&&s.push(t)}));for(var a=s.length-1;a>=0;--a)i.remove(s[a])}o&&(Object(y.c)(this.featureChangeListenerKeys_[n]),delete this.featureChangeListenerKeys_[n])},t.prototype.setMap=function(t){var o=this.getMap(),n=this.featuresListenerKeys_,i=this.getFeatures_();o&&(n.forEach(y.c),n.length=0,i.forEach(this.forEachFeatureRemove_.bind(this))),e.prototype.setMap.call(this,t),t&&(this.features_?n.push(Object(y.a)(this.features_,r.a.ADD,this.handleFeatureAdd_,this),Object(y.a)(this.features_,r.a.REMOVE,this.handleFeatureRemove_,this)):this.source_&&n.push(Object(y.a)(this.source_,c.a.ADDFEATURE,this.handleFeatureAdd_,this),Object(y.a)(this.source_,c.a.REMOVEFEATURE,this.handleFeatureRemove_,this)),i.forEach(this.forEachFeatureAdd_.bind(this)))},t.prototype.snapTo=function(e,t,o){var n=o.getCoordinateFromPixel([e[0]-this.pixelTolerance_,e[1]+this.pixelTolerance_]),r=o.getCoordinateFromPixel([e[0]+this.pixelTolerance_,e[1]-this.pixelTolerance_]),i=Object(d.c)([n,r]),a=this.rBush_.getInExtent(i);this.vertex_&&!this.edge_&&(a=a.filter((function(e){return e.feature.getGeometry().getType()!==s.a.CIRCLE})));var l=!1,c=null,u=null;if(0===a.length)return{snapped:l,vertex:c,vertexPixel:u};for(var p,m=o.getView().getProjection(),g=Object(f.q)(t,m),y=1/0,v=0;v<a.length;++v){var _=a[v];b[0]=Object(f.q)(_.segment[0],m),b[1]=Object(f.q)(_.segment[1],m);var w=Object(h.m)(g,b);w<y&&(p=_,y=w)}var E=p.segment;if(this.vertex_&&!this.edge_){var O=o.getPixelFromCoordinate(E[0]),S=o.getPixelFromCoordinate(E[1]),x=Object(h.l)(e,O),C=Object(h.l)(e,S);Math.sqrt(Math.min(x,C))<=this.pixelTolerance_&&(l=!0,c=x>C?E[1]:E[0],u=o.getPixelFromCoordinate(c))}else if(this.edge_){var j=p.feature.getGeometry().getType()===s.a.CIRCLE;if(j){var P=p.feature.getGeometry(),T=Object(f.x)();T&&(P=P.clone().transform(T,m)),c=Object(f.B)(Object(h.b)(g,P),m)}else b[0]=Object(f.q)(E[0],m),b[1]=Object(f.q)(E[1],m),c=Object(f.B)(Object(h.c)(g,b),m);if(u=o.getPixelFromCoordinate(c),Object(h.f)(e,u)<=this.pixelTolerance_&&(l=!0,this.vertex_&&!j)){O=o.getPixelFromCoordinate(E[0]),S=o.getPixelFromCoordinate(E[1]),x=Object(h.l)(u,O),C=Object(h.l)(u,S);Math.sqrt(Math.min(x,C))<=this.pixelTolerance_&&(c=x>C?E[1]:E[0],u=o.getPixelFromCoordinate(c))}}return l&&(u=[Math.round(u[0]),Math.round(u[1])]),{snapped:l,vertex:c,vertexPixel:u}},t.prototype.updateFeature_=function(e){this.removeFeature(e,!1),this.addFeature(e,!1)},t.prototype.writeCircleGeometry_=function(e,t){var o=this.getMap().getView().getProjection(),n=t,r=Object(f.x)();r&&(n=n.clone().transform(r,o));var i=Object(p.c)(n);r&&i.transform(o,r);for(var s=i.getCoordinates()[0],a=0,l=s.length-1;a<l;++a){var c=s.slice(a,a+2),u={feature:e,segment:c};this.rBush_.insert(Object(d.c)(c),u)}},t.prototype.writeGeometryCollectionGeometry_=function(e,t){for(var o=t.getGeometriesArray(),n=0;n<o.length;++n){var r=this.SEGMENT_WRITERS_[o[n].getType()];r&&r(e,o[n])}},t.prototype.writeLineStringGeometry_=function(e,t){for(var o=t.getCoordinates(),n=0,r=o.length-1;n<r;++n){var i=o.slice(n,n+2),s={feature:e,segment:i};this.rBush_.insert(Object(d.c)(i),s)}},t.prototype.writeMultiLineStringGeometry_=function(e,t){for(var o=t.getCoordinates(),n=0,r=o.length;n<r;++n)for(var i=o[n],s=0,a=i.length-1;s<a;++s){var l=i.slice(s,s+2),c={feature:e,segment:l};this.rBush_.insert(Object(d.c)(l),c)}},t.prototype.writeMultiPointGeometry_=function(e,t){for(var o=t.getCoordinates(),n=0,r=o.length;n<r;++n){var i=o[n],s={feature:e,segment:[i,i]};this.rBush_.insert(t.getExtent(),s)}},t.prototype.writeMultiPolygonGeometry_=function(e,t){for(var o=t.getCoordinates(),n=0,r=o.length;n<r;++n)for(var i=o[n],s=0,a=i.length;s<a;++s)for(var l=i[s],c=0,u=l.length-1;c<u;++c){var h=l.slice(c,c+2),p={feature:e,segment:h};this.rBush_.insert(Object(d.c)(h),p)}},t.prototype.writePointGeometry_=function(e,t){var o=t.getCoordinates(),n={feature:e,segment:[o,o]};this.rBush_.insert(t.getExtent(),n)},t.prototype.writePolygonGeometry_=function(e,t){for(var o=t.getCoordinates(),n=0,r=o.length;n<r;++n)for(var i=o[n],s=0,a=i.length-1;s<a;++s){var l=i.slice(s,s+2),c={feature:e,segment:l};this.rBush_.insert(Object(d.c)(l),c)}},t}(a.b);t.a=w},"./node_modules/ol/interaction/Translate.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return m}));var n,r=o("./node_modules/ol/Collection.js"),i=o("./node_modules/ol/events/Event.js"),s=o("./node_modules/ol/interaction/Property.js"),a=o("./node_modules/ol/interaction/Pointer.js"),l=o("./node_modules/ol/functions.js"),c=o("./node_modules/ol/events/condition.js"),u=o("./node_modules/ol/array.js"),d=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),h="translatestart",p="translating",f="translateend",m=function(e){function t(t,o,n,r,i){var s=e.call(this,t)||this;return s.features=o,s.coordinate=n,s.startCoordinate=r,s.mapBrowserEvent=i,s}return d(t,e),t}(i.a),g=function(e){function t(t){var o,n=this,r=t||{};if((n=e.call(this,r)||this).on,n.once,n.un,n.lastCoordinate_=null,n.startCoordinate_=null,n.features_=void 0!==r.features?r.features:null,r.layers&&!n.features_)if("function"==typeof r.layers)o=r.layers;else{var i=r.layers;o=function(e){return Object(u.f)(i,e)}}else o=l.b;return n.layerFilter_=o,n.filter_=r.filter&&!n.features_?r.filter:l.b,n.hitTolerance_=r.hitTolerance?r.hitTolerance:0,n.condition_=r.condition?r.condition:c.d,n.lastFeature_=null,n.addChangeListener(s.a.ACTIVE,n.handleActiveChanged_),n}return d(t,e),t.prototype.handleDownEvent=function(e){if(!e.originalEvent||!this.condition_(e))return!1;if(this.lastFeature_=this.featuresAtPixel_(e.pixel,e.map),!this.lastCoordinate_&&this.lastFeature_){this.startCoordinate_=e.coordinate,this.lastCoordinate_=e.coordinate,this.handleMoveEvent(e);var t=this.features_||new r.b([this.lastFeature_]);return this.dispatchEvent(new m(h,t,e.coordinate,this.startCoordinate_,e)),!0}return!1},t.prototype.handleUpEvent=function(e){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(e);var t=this.features_||new r.b([this.lastFeature_]);return this.dispatchEvent(new m(f,t,e.coordinate,this.startCoordinate_,e)),this.startCoordinate_=null,!0}return!1},t.prototype.handleDragEvent=function(e){if(this.lastCoordinate_){var t=e.coordinate,o=t[0]-this.lastCoordinate_[0],n=t[1]-this.lastCoordinate_[1],i=this.features_||new r.b([this.lastFeature_]);i.forEach((function(e){var t=e.getGeometry();t.translate(o,n),e.setGeometry(t)})),this.lastCoordinate_=t,this.dispatchEvent(new m(p,i,t,this.startCoordinate_,e))}},t.prototype.handleMoveEvent=function(e){var t=e.map.getViewport();this.featuresAtPixel_(e.pixel,e.map)?(t.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),t.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):t.classList.remove("ol-grab","ol-grabbing")},t.prototype.featuresAtPixel_=function(e,t){return t.forEachFeatureAtPixel(e,function(e,t){if(this.filter_(e,t)&&(!this.features_||Object(u.f)(this.features_.getArray(),e)))return e}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})},t.prototype.getHitTolerance=function(){return this.hitTolerance_},t.prototype.setHitTolerance=function(e){this.hitTolerance_=e},t.prototype.setMap=function(t){var o=this.getMap();e.prototype.setMap.call(this,t),this.updateState_(o)},t.prototype.handleActiveChanged_=function(){this.updateState_(null)},t.prototype.updateState_=function(e){var t=this.getMap(),o=this.getActive();t&&o||(t=t||e)&&t.getViewport().classList.remove("ol-grab","ol-grabbing")},t}(a.b);t.b=g},"./node_modules/ol/layer/Base.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/Object.js"),i=o("./node_modules/ol/layer/Property.js"),s=o("./node_modules/ol/util.js"),a=o("./node_modules/ol/asserts.js"),l=o("./node_modules/ol/obj.js"),c=o("./node_modules/ol/math.js"),u=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),d=function(e){function t(t){var o=e.call(this)||this;o.on,o.once,o.un;var n=Object(l.a)({},t);return"object"==typeof t.properties&&(delete n.properties,Object(l.a)(n,t.properties)),n[i.a.OPACITY]=void 0!==t.opacity?t.opacity:1,Object(a.a)("number"==typeof n[i.a.OPACITY],64),n[i.a.VISIBLE]=void 0===t.visible||t.visible,n[i.a.Z_INDEX]=t.zIndex,n[i.a.MAX_RESOLUTION]=void 0!==t.maxResolution?t.maxResolution:1/0,n[i.a.MIN_RESOLUTION]=void 0!==t.minResolution?t.minResolution:0,n[i.a.MIN_ZOOM]=void 0!==t.minZoom?t.minZoom:-1/0,n[i.a.MAX_ZOOM]=void 0!==t.maxZoom?t.maxZoom:1/0,o.className_=void 0!==n.className?t.className:"ol-layer",delete n.className,o.setProperties(n),o.state_=null,o}return u(t,e),t.prototype.getClassName=function(){return this.className_},t.prototype.getLayerState=function(e){var t=this.state_||{layer:this,managed:void 0===e||e},o=this.getZIndex();return t.opacity=Object(c.a)(Math.round(100*this.getOpacity())/100,0,1),t.sourceState=this.getSourceState(),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=void 0!==o||t.managed?o:1/0,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t},t.prototype.getLayersArray=function(e){return Object(s.b)()},t.prototype.getLayerStatesArray=function(e){return Object(s.b)()},t.prototype.getExtent=function(){return this.get(i.a.EXTENT)},t.prototype.getMaxResolution=function(){return this.get(i.a.MAX_RESOLUTION)},t.prototype.getMinResolution=function(){return this.get(i.a.MIN_RESOLUTION)},t.prototype.getMinZoom=function(){return this.get(i.a.MIN_ZOOM)},t.prototype.getMaxZoom=function(){return this.get(i.a.MAX_ZOOM)},t.prototype.getOpacity=function(){return this.get(i.a.OPACITY)},t.prototype.getSourceState=function(){return Object(s.b)()},t.prototype.getVisible=function(){return this.get(i.a.VISIBLE)},t.prototype.getZIndex=function(){return this.get(i.a.Z_INDEX)},t.prototype.setExtent=function(e){this.set(i.a.EXTENT,e)},t.prototype.setMaxResolution=function(e){this.set(i.a.MAX_RESOLUTION,e)},t.prototype.setMinResolution=function(e){this.set(i.a.MIN_RESOLUTION,e)},t.prototype.setMaxZoom=function(e){this.set(i.a.MAX_ZOOM,e)},t.prototype.setMinZoom=function(e){this.set(i.a.MIN_ZOOM,e)},t.prototype.setOpacity=function(e){Object(a.a)("number"==typeof e,64),this.set(i.a.OPACITY,e)},t.prototype.setVisible=function(e){this.set(i.a.VISIBLE,e)},t.prototype.setZIndex=function(e){this.set(i.a.Z_INDEX,e)},t.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),e.prototype.disposeInternal.call(this)},t}(r.b);t.a=d},"./node_modules/ol/layer/BaseImage.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/layer/Layer.js"),i=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),s=function(e){function t(t){var o=t||{};return e.call(this,o)||this}return i(t,e),t}(r.a);t.a=s},"./node_modules/ol/layer/BaseTile.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/layer/Layer.js"),i=o("./node_modules/ol/layer/TileProperty.js"),s=o("./node_modules/ol/obj.js"),a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),l=function(e){function t(t){var o=this,n=t||{},r=Object(s.a)({},n);return delete r.preload,delete r.useInterimTilesOnError,(o=e.call(this,r)||this).on,o.once,o.un,o.setPreload(void 0!==n.preload?n.preload:0),o.setUseInterimTilesOnError(void 0===n.useInterimTilesOnError||n.useInterimTilesOnError),o}return a(t,e),t.prototype.getPreload=function(){return this.get(i.a.PRELOAD)},t.prototype.setPreload=function(e){this.set(i.a.PRELOAD,e)},t.prototype.getUseInterimTilesOnError=function(){return this.get(i.a.USE_INTERIM_TILES_ON_ERROR)},t.prototype.setUseInterimTilesOnError=function(e){this.set(i.a.USE_INTERIM_TILES_ON_ERROR,e)},t}(r.a);t.a=l},"./node_modules/ol/layer/BaseVector.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/layer/Layer.js"),i=o("./node_modules/rbush/rbush.min.js"),s=o.n(i),a=o("./node_modules/ol/obj.js"),l=o("./node_modules/ol/style/Style.js"),c=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),u="renderOrder",d=function(e){function t(t){var o=this,n=t||{},r=Object(a.a)({},n);return delete r.style,delete r.renderBuffer,delete r.updateWhileAnimating,delete r.updateWhileInteracting,(o=e.call(this,r)||this).declutter_=void 0!==n.declutter&&n.declutter,o.renderBuffer_=void 0!==n.renderBuffer?n.renderBuffer:100,o.style_=null,o.styleFunction_=void 0,o.setStyle(n.style),o.updateWhileAnimating_=void 0!==n.updateWhileAnimating&&n.updateWhileAnimating,o.updateWhileInteracting_=void 0!==n.updateWhileInteracting&&n.updateWhileInteracting,o}return c(t,e),t.prototype.getDeclutter=function(){return this.declutter_},t.prototype.getFeatures=function(t){return e.prototype.getFeatures.call(this,t)},t.prototype.getRenderBuffer=function(){return this.renderBuffer_},t.prototype.getRenderOrder=function(){return this.get(u)},t.prototype.getStyle=function(){return this.style_},t.prototype.getStyleFunction=function(){return this.styleFunction_},t.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},t.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},t.prototype.renderDeclutter=function(e){e.declutterTree||(e.declutterTree=new s.a(9)),this.getRenderer().renderDeclutter(e)},t.prototype.setRenderOrder=function(e){this.set(u,e)},t.prototype.setStyle=function(e){this.style_=void 0!==e?e:l.a,this.styleFunction_=null===e?void 0:Object(l.d)(this.style_),this.changed()},t}(r.a);t.a=d},"./node_modules/ol/layer/Graticule.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/Collection.js"),i=o("./node_modules/ol/render/EventType.js"),s=o("./node_modules/ol/Feature.js"),a=o("./node_modules/ol/style/Fill.js"),l=o("./node_modules/ol/geom/GeometryLayout.js"),c=o("./node_modules/ol/geom/LineString.js"),u=o("./node_modules/ol/geom/Point.js"),d=o("./node_modules/ol/style/Stroke.js"),h=o("./node_modules/ol/style/Style.js"),p=o("./node_modules/ol/style/Text.js"),f=o("./node_modules/ol/layer/Vector.js"),m=o("./node_modules/ol/source/Vector.js"),g=o("./node_modules/ol/extent.js"),y=o("./node_modules/ol/obj.js"),v=o("./node_modules/ol/math.js"),_=o("./node_modules/ol/coordinate.js"),b=o("./node_modules/ol/proj.js"),w=o("./node_modules/ol/render.js"),E=o("./node_modules/ol/geom/flat/geodesic.js"),O=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),S=new d.a({color:"rgba(0,0,0,0.2)"}),x=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001],C=function(e){function t(t){var o=this,n=t||{},s=Object(y.a)({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},n);return delete s.maxLines,delete s.strokeStyle,delete s.targetSize,delete s.showLabels,delete s.lonLabelFormatter,delete s.latLabelFormatter,delete s.lonLabelPosition,delete s.latLabelPosition,delete s.lonLabelStyle,delete s.latLabelStyle,delete s.intervals,(o=e.call(this,s)||this).projection_=null,o.maxLat_=1/0,o.maxLon_=1/0,o.minLat_=-1/0,o.minLon_=-1/0,o.maxX_=1/0,o.maxY_=1/0,o.minX_=-1/0,o.minY_=-1/0,o.targetSize_=void 0!==n.targetSize?n.targetSize:100,o.maxLines_=void 0!==n.maxLines?n.maxLines:100,o.meridians_=[],o.parallels_=[],o.strokeStyle_=void 0!==n.strokeStyle?n.strokeStyle:S,o.fromLonLatTransform_=void 0,o.toLonLatTransform_=void 0,o.projectionCenterLonLat_=null,o.bottomLeft_=null,o.bottomRight_=null,o.topLeft_=null,o.topRight_=null,o.meridiansLabels_=null,o.parallelsLabels_=null,n.showLabels&&(o.lonLabelFormatter_=null==n.lonLabelFormatter?_.e.bind(o,"EW"):n.lonLabelFormatter,o.latLabelFormatter_=null==n.latLabelFormatter?_.e.bind(o,"NS"):n.latLabelFormatter,o.lonLabelPosition_=null==n.lonLabelPosition?0:n.lonLabelPosition,o.latLabelPosition_=null==n.latLabelPosition?1:n.latLabelPosition,o.lonLabelStyleBase_=new h.c({text:void 0!==n.lonLabelStyle?n.lonLabelStyle.clone():new p.a({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new a.a({color:"rgba(0,0,0,1)"}),stroke:new d.a({color:"rgba(255,255,255,1)",width:3})})}),o.lonLabelStyle_=function(e){var t=e.get("graticule_label");return this.lonLabelStyleBase_.getText().setText(t),this.lonLabelStyleBase_}.bind(o),o.latLabelStyleBase_=new h.c({text:void 0!==n.latLabelStyle?n.latLabelStyle.clone():new p.a({font:"12px Calibri,sans-serif",textAlign:"right",fill:new a.a({color:"rgba(0,0,0,1)"}),stroke:new d.a({color:"rgba(255,255,255,1)",width:3})})}),o.latLabelStyle_=function(e){var t=e.get("graticule_label");return this.latLabelStyleBase_.getText().setText(t),this.latLabelStyleBase_}.bind(o),o.meridiansLabels_=[],o.parallelsLabels_=[],o.addEventListener(i.a.POSTRENDER,o.drawLabels_.bind(o))),o.intervals_=void 0!==n.intervals?n.intervals:x,o.setSource(new m.b({loader:o.loaderFunction.bind(o),strategy:o.strategyFunction.bind(o),features:new r.b,overlaps:!1,useSpatialIndex:!1,wrapX:n.wrapX})),o.featurePool_=[],o.lineStyle_=new h.c({stroke:o.strokeStyle_}),o.loadedExtent_=null,o.renderedExtent_=null,o.setRenderOrder(null),o}return O(t,e),t.prototype.strategyFunction=function(e,t){var o=e.slice();return this.projection_&&this.getSource().getWrapX()&&Object(g.T)(o,this.projection_),this.loadedExtent_&&(Object(g.b)(this.loadedExtent_,o,t)?o=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)),[o]},t.prototype.loaderFunction=function(e,t,o){this.loadedExtent_=e;var n=this.getSource(),r=this.getExtent()||[-1/0,-1/0,1/0,1/0],i=Object(g.H)(r,e);if(!(this.renderedExtent_&&Object(g.r)(this.renderedExtent_,i)||(this.renderedExtent_=i,Object(g.Q)(i)))){var a=Object(g.C)(i),l=t*t/4;(!this.projection_||!Object(b.o)(this.projection_,o))&&this.updateProjectionInfo_(o),this.createGraticule_(i,a,t,l);var c,u=this.meridians_.length+this.parallels_.length;for(this.meridiansLabels_&&(u+=this.meridians_.length),this.parallelsLabels_&&(u+=this.parallels_.length);u>this.featurePool_.length;)c=new s.b,this.featurePool_.push(c);var d=n.getFeaturesCollection();d.clear();var h,p,f=0;for(h=0,p=this.meridians_.length;h<p;++h)(c=this.featurePool_[f++]).setGeometry(this.meridians_[h]),c.setStyle(this.lineStyle_),d.push(c);for(h=0,p=this.parallels_.length;h<p;++h)(c=this.featurePool_[f++]).setGeometry(this.parallels_[h]),c.setStyle(this.lineStyle_),d.push(c)}},t.prototype.addMeridian_=function(e,t,o,n,r,i){var s=this.getMeridian_(e,t,o,n,i);if(Object(g.O)(s.getExtent(),r)){if(this.meridiansLabels_){var a=this.lonLabelFormatter_(e);i in this.meridiansLabels_?this.meridiansLabels_[i].text=a:this.meridiansLabels_[i]={geom:new u.a([]),text:a}}this.meridians_[i++]=s}return i},t.prototype.addParallel_=function(e,t,o,n,r,i){var s=this.getParallel_(e,t,o,n,i);if(Object(g.O)(s.getExtent(),r)){if(this.parallelsLabels_){var a=this.latLabelFormatter_(e);i in this.parallelsLabels_?this.parallelsLabels_[i].text=a:this.parallelsLabels_[i]={geom:new u.a([]),text:a}}this.parallels_[i++]=s}return i},t.prototype.drawLabels_=function(e){var t=e.frameState.viewState.rotation,o=e.frameState.extent,n=Object(g.C)(o),r=o;if(t){var i=Object(g.N)(o),s=Object(g.G)(o),a=Math.abs(Math.cos(t)),l=Math.abs(Math.sin(t)),c=(l*s-a*i)/(l*l-a*a),u=(l*i-a*s)/(l*l-a*a);r=[n[0]-c/2,n[1]-u/2,n[0]+c/2,n[1]+u/2]}var d=0,h=0,p=this.latLabelPosition_<.5,f=this.projection_.getExtent(),m=Object(g.N)(f);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!Object(g.h)(f,o)&&(d=Math.floor((o[0]-f[0])/m),h=Math.ceil((o[2]-f[2])/m),p=p!==Math.abs(t)>Math.PI/2);for(var y=Object(w.b)(e),v=d;v<=h;++v){var _=this.meridians_.length+this.parallels_.length,b=void 0,E=void 0,O=void 0,S=void 0;if(this.meridiansLabels_)for(E=0,O=this.meridiansLabels_.length;E<O;++E){var x=this.meridians_[E];if(t||0!==v)(C=x.clone()).translate(v*m,0),C.rotate(-t,n),(S=this.getMeridianPoint_(C,r,E)).rotate(t,n);else S=this.getMeridianPoint_(x,o,E);(b=this.featurePool_[_++]).setGeometry(S),b.set("graticule_label",this.meridiansLabels_[E].text),y.drawFeature(b,this.lonLabelStyle_(b))}if(this.parallelsLabels_&&(v===d&&p||v===h&&!p))for(E=0,O=this.parallels_.length;E<O;++E){var C;x=this.parallels_[E];if(t||0!==v)(C=x.clone()).translate(v*m,0),C.rotate(-t,n),(S=this.getParallelPoint_(C,r,E)).rotate(t,n);else S=this.getParallelPoint_(x,o,E);(b=this.featurePool_[_++]).setGeometry(S),b.set("graticule_label",this.parallelsLabels_[E].text),y.drawFeature(b,this.latLabelStyle_(b))}}},t.prototype.createGraticule_=function(e,t,o,n){var r=this.getInterval_(o);if(-1==r)return this.meridians_.length=0,this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),void(this.parallelsLabels_&&(this.parallelsLabels_.length=0));var i=!1,s=this.projection_.getExtent(),a=Object(g.N)(s);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!Object(g.h)(s,e)&&(Object(g.N)(e)>=a?(e[0]=s[0],e[2]=s[2]):i=!0);var l=[Object(v.a)(t[0],this.minX_,this.maxX_),Object(v.a)(t[1],this.minY_,this.maxY_)],c=this.toLonLatTransform_(l);isNaN(c[1])&&(c[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_);var u,d,h,p,f=Object(v.a)(c[0],this.minLon_,this.maxLon_),m=Object(v.a)(c[1],this.minLat_,this.maxLat_),y=this.maxLines_,_=e;i||(_=[Object(v.a)(e[0],this.minX_,this.maxX_),Object(v.a)(e[1],this.minY_,this.maxY_),Object(v.a)(e[2],this.minX_,this.maxX_),Object(v.a)(e[3],this.minY_,this.maxY_)]);var b=Object(g.a)(_,this.toLonLatTransform_,void 0,8),w=b[3],E=b[2],O=b[1],S=b[0];if(i||(Object(g.g)(_,this.bottomLeft_)&&(S=this.minLon_,O=this.minLat_),Object(g.g)(_,this.bottomRight_)&&(E=this.maxLon_,O=this.minLat_),Object(g.g)(_,this.topLeft_)&&(S=this.minLon_,w=this.maxLat_),Object(g.g)(_,this.topRight_)&&(E=this.maxLon_,w=this.maxLat_),w=Object(v.a)(w,m,this.maxLat_),E=Object(v.a)(E,f,this.maxLon_),O=Object(v.a)(O,this.minLat_,m),S=Object(v.a)(S,this.minLon_,f)),f=Math.floor(f/r)*r,p=Object(v.a)(f,this.minLon_,this.maxLon_),d=this.addMeridian_(p,O,w,n,e,0),u=0,i)for(;(p-=r)>=S&&u++<y;)d=this.addMeridian_(p,O,w,n,e,d);else for(;p!=this.minLon_&&u++<y;)p=Math.max(p-r,this.minLon_),d=this.addMeridian_(p,O,w,n,e,d);if(p=Object(v.a)(f,this.minLon_,this.maxLon_),u=0,i)for(;(p+=r)<=E&&u++<y;)d=this.addMeridian_(p,O,w,n,e,d);else for(;p!=this.maxLon_&&u++<y;)p=Math.min(p+r,this.maxLon_),d=this.addMeridian_(p,O,w,n,e,d);for(this.meridians_.length=d,this.meridiansLabels_&&(this.meridiansLabels_.length=d),m=Math.floor(m/r)*r,h=Object(v.a)(m,this.minLat_,this.maxLat_),d=this.addParallel_(h,S,E,n,e,0),u=0;h!=this.minLat_&&u++<y;)h=Math.max(h-r,this.minLat_),d=this.addParallel_(h,S,E,n,e,d);for(h=Object(v.a)(m,this.minLat_,this.maxLat_),u=0;h!=this.maxLat_&&u++<y;)h=Math.min(h+r,this.maxLat_),d=this.addParallel_(h,S,E,n,e,d);this.parallels_.length=d,this.parallelsLabels_&&(this.parallelsLabels_.length=d)},t.prototype.getInterval_=function(e){for(var t=this.projectionCenterLonLat_[0],o=this.projectionCenterLonLat_[1],n=-1,r=Math.pow(this.targetSize_*e,2),i=[],s=[],a=0,l=this.intervals_.length;a<l;++a){var c=Object(v.a)(this.intervals_[a]/2,0,90),u=Object(v.a)(o,-90+c,90-c);if(i[0]=t-c,i[1]=u-c,s[0]=t+c,s[1]=u+c,this.fromLonLatTransform_(i,i),this.fromLonLatTransform_(s,s),Math.pow(s[0]-i[0],2)+Math.pow(s[1]-i[1],2)<=r)break;n=this.intervals_[a]}return n},t.prototype.getMeridian_=function(e,t,o,n,r){var i=Object(E.b)(e,t,o,this.projection_,n),s=this.meridians_[r];return s?(s.setFlatCoordinates(l.a.XY,i),s.changed()):(s=new c.a(i,l.a.XY),this.meridians_[r]=s),s},t.prototype.getMeridianPoint_=function(e,t,o){var n=e.getFlatCoordinates(),r=1,i=n.length-1;n[r]>n[i]&&(r=i,i=1);var s=Math.max(t[1],n[r]),a=Math.min(t[3],n[i]),l=Object(v.a)(t[1]+Math.abs(t[1]-t[3])*this.lonLabelPosition_,s,a),c=[n[r-1]+(n[i-1]-n[r-1])*(l-n[r])/(n[i]-n[r]),l],u=this.meridiansLabels_[o].geom;return u.setCoordinates(c),u},t.prototype.getMeridians=function(){return this.meridians_},t.prototype.getParallel_=function(e,t,o,n,r){var i=Object(E.c)(e,t,o,this.projection_,n),s=this.parallels_[r];return s?(s.setFlatCoordinates(l.a.XY,i),s.changed()):s=new c.a(i,l.a.XY),s},t.prototype.getParallelPoint_=function(e,t,o){var n=e.getFlatCoordinates(),r=0,i=n.length-2;n[r]>n[i]&&(r=i,i=0);var s=Math.max(t[0],n[r]),a=Math.min(t[2],n[i]),l=Object(v.a)(t[0]+Math.abs(t[0]-t[2])*this.latLabelPosition_,s,a),c=[l,n[r+1]+(n[i+1]-n[r+1])*(l-n[r])/(n[i]-n[r])],u=this.parallelsLabels_[o].geom;return u.setCoordinates(c),u},t.prototype.getParallels=function(){return this.parallels_},t.prototype.updateProjectionInfo_=function(e){var t=Object(b.t)("EPSG:4326"),o=e.getWorldExtent();this.maxLat_=o[3],this.maxLon_=o[2],this.minLat_=o[1],this.minLon_=o[0];var n=Object(b.v)(e,t);if(this.minLon_<this.maxLon_)this.toLonLatTransform_=n;else{var r=this.minLon_+this.maxLon_/2;this.maxLon_+=360,this.toLonLatTransform_=function(e,t,o){for(var i=o||2,s=n(e,t,i),a=0,l=s.length;a<l;a+=i)s[a]<r&&(s[a]+=360);return s}}this.fromLonLatTransform_=Object(b.v)(t,e);var i=Object(g.a)([this.minLon_,this.minLat_,this.maxLon_,this.maxLat_],this.fromLonLatTransform_,void 0,8);this.minX_=i[0],this.maxX_=i[2],this.minY_=i[1],this.maxY_=i[3],this.bottomLeft_=this.fromLonLatTransform_([this.minLon_,this.minLat_]),this.bottomRight_=this.fromLonLatTransform_([this.maxLon_,this.minLat_]),this.topLeft_=this.fromLonLatTransform_([this.minLon_,this.maxLat_]),this.topRight_=this.fromLonLatTransform_([this.maxLon_,this.maxLat_]),this.projectionCenterLonLat_=this.toLonLatTransform_(Object(g.C)(e.getExtent())),isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_),this.projection_=e},t}(f.a);t.a=C},"./node_modules/ol/layer/Group.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/layer/Base.js"),i=o("./node_modules/ol/Collection.js"),s=o("./node_modules/ol/CollectionEventType.js"),a=o("./node_modules/ol/events/EventType.js"),l=o("./node_modules/ol/ObjectEventType.js"),c=o("./node_modules/ol/source/State.js"),u=o("./node_modules/ol/asserts.js"),d=o("./node_modules/ol/obj.js"),h=o("./node_modules/ol/extent.js"),p=o("./node_modules/ol/util.js"),f=o("./node_modules/ol/events.js"),m=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),g="layers",y=function(e){function t(t){var o=this,n=t||{},r=Object(d.a)({},n);delete r.layers;var s=n.layers;return(o=e.call(this,r)||this).on,o.once,o.un,o.layersListenerKeys_=[],o.listenerKeys_={},o.addChangeListener(g,o.handleLayersChanged_),s?Array.isArray(s)?s=new i.b(s.slice(),{unique:!0}):Object(u.a)("function"==typeof s.getArray,43):s=new i.b(void 0,{unique:!0}),o.setLayers(s),o}return m(t,e),t.prototype.handleLayerChange_=function(){this.changed()},t.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(f.c),this.layersListenerKeys_.length=0;var e=this.getLayers();for(var t in this.layersListenerKeys_.push(Object(f.a)(e,s.a.ADD,this.handleLayersAdd_,this),Object(f.a)(e,s.a.REMOVE,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[t].forEach(f.c);Object(d.b)(this.listenerKeys_);for(var o=e.getArray(),n=0,r=o.length;n<r;n++){var i=o[n];this.listenerKeys_[Object(p.c)(i)]=[Object(f.a)(i,l.a.PROPERTYCHANGE,this.handleLayerChange_,this),Object(f.a)(i,a.a.CHANGE,this.handleLayerChange_,this)]}this.changed()},t.prototype.handleLayersAdd_=function(e){var t=e.element;this.listenerKeys_[Object(p.c)(t)]=[Object(f.a)(t,l.a.PROPERTYCHANGE,this.handleLayerChange_,this),Object(f.a)(t,a.a.CHANGE,this.handleLayerChange_,this)],this.changed()},t.prototype.handleLayersRemove_=function(e){var t=e.element,o=Object(p.c)(t);this.listenerKeys_[o].forEach(f.c),delete this.listenerKeys_[o],this.changed()},t.prototype.getLayers=function(){return this.get(g)},t.prototype.setLayers=function(e){this.set(g,e)},t.prototype.getLayersArray=function(e){var t=void 0!==e?e:[];return this.getLayers().forEach((function(e){e.getLayersArray(t)})),t},t.prototype.getLayerStatesArray=function(e){var t=void 0!==e?e:[],o=t.length;this.getLayers().forEach((function(e){e.getLayerStatesArray(t)}));var n=this.getLayerState(),r=n.zIndex;e||void 0!==n.zIndex||(r=0);for(var i=o,s=t.length;i<s;i++){var a=t[i];a.opacity*=n.opacity,a.visible=a.visible&&n.visible,a.maxResolution=Math.min(a.maxResolution,n.maxResolution),a.minResolution=Math.max(a.minResolution,n.minResolution),a.minZoom=Math.max(a.minZoom,n.minZoom),a.maxZoom=Math.min(a.maxZoom,n.maxZoom),void 0!==n.extent&&(void 0!==a.extent?a.extent=Object(h.H)(a.extent,n.extent):a.extent=n.extent),void 0===a.zIndex&&(a.zIndex=r)}return t},t.prototype.getSourceState=function(){return c.a.READY},t}(r.a);t.a=y},"./node_modules/ol/layer/Image.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/layer/BaseImage.js"),i=o("./node_modules/ol/renderer/canvas/ImageLayer.js"),s=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=function(e){function t(t){return e.call(this,t)||this}return s(t,e),t.prototype.createRenderer=function(){return new i.a(this)},t}(r.a);t.a=a},"./node_modules/ol/layer/Layer.js":function(e,t,o){"use strict";o.d(t,"b",(function(){return f}));var n,r=o("./node_modules/ol/layer/Base.js"),i=o("./node_modules/ol/events/EventType.js"),s=o("./node_modules/ol/layer/Property.js"),a=o("./node_modules/ol/render/EventType.js"),l=o("./node_modules/ol/source/State.js"),c=o("./node_modules/ol/asserts.js"),u=o("./node_modules/ol/obj.js"),d=o("./node_modules/ol/events.js"),h=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),p=function(e){function t(t){var o=this,n=Object(u.a)({},t);delete n.source,(o=e.call(this,n)||this).on,o.once,o.un,o.mapPrecomposeKey_=null,o.mapRenderKey_=null,o.sourceChangeKey_=null,o.renderer_=null,t.render&&(o.render=t.render),t.map&&o.setMap(t.map),o.addChangeListener(s.a.SOURCE,o.handleSourcePropertyChange_);var r=t.source?t.source:null;return o.setSource(r),o}return h(t,e),t.prototype.getLayersArray=function(e){var t=e||[];return t.push(this),t},t.prototype.getLayerStatesArray=function(e){var t=e||[];return t.push(this.getLayerState()),t},t.prototype.getSource=function(){return this.get(s.a.SOURCE)||null},t.prototype.getSourceState=function(){var e=this.getSource();return e?e.getState():l.a.UNDEFINED},t.prototype.handleSourceChange_=function(){this.changed()},t.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(Object(d.c)(this.sourceChangeKey_),this.sourceChangeKey_=null);var e=this.getSource();e&&(this.sourceChangeKey_=Object(d.a)(e,i.a.CHANGE,this.handleSourceChange_,this)),this.changed()},t.prototype.getFeatures=function(e){return this.renderer_?this.renderer_.getFeatures(e):new Promise((function(e){return e([])}))},t.prototype.render=function(e,t){var o=this.getRenderer();if(o.prepareFrame(e))return o.renderFrame(e,t)},t.prototype.setMap=function(e){this.mapPrecomposeKey_&&(Object(d.c)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Object(d.c)(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Object(d.a)(e,a.a.PRECOMPOSE,(function(e){var t=e.frameState.layerStatesArray,o=this.getLayerState(!1);Object(c.a)(!t.some((function(e){return e.layer===o.layer})),67),t.push(o)}),this),this.mapRenderKey_=Object(d.a)(this,i.a.CHANGE,e.render,e),this.changed())},t.prototype.setSource=function(e){this.set(s.a.SOURCE,e)},t.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},t.prototype.hasRenderer=function(){return!!this.renderer_},t.prototype.createRenderer=function(){return null},t.prototype.disposeInternal=function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),e.prototype.disposeInternal.call(this)},t}(r.a);function f(e,t){if(!e.visible)return!1;var o=t.resolution;if(o<e.minResolution||o>=e.maxResolution)return!1;var n=t.zoom;return n>e.minZoom&&n<=e.maxZoom}t.a=p},"./node_modules/ol/layer/Property.js":function(e,t,o){"use strict";t.a={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source"}},"./node_modules/ol/layer/Tile.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/layer/BaseTile.js"),i=o("./node_modules/ol/renderer/canvas/TileLayer.js"),s=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=function(e){function t(t){return e.call(this,t)||this}return s(t,e),t.prototype.createRenderer=function(){return new i.a(this)},t}(r.a);t.a=a},"./node_modules/ol/layer/TileProperty.js":function(e,t,o){"use strict";t.a={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"}},"./node_modules/ol/layer/Vector.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/layer/BaseVector.js"),i=o("./node_modules/ol/renderer/canvas/VectorLayer.js"),s=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=function(e){function t(t){return e.call(this,t)||this}return s(t,e),t.prototype.createRenderer=function(){return new i.a(this)},t}(r.a);t.a=a},"./node_modules/ol/layer/VectorTile.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/layer/BaseVector.js"),i=o("./node_modules/ol/renderer/canvas/VectorTileLayer.js"),s=o("./node_modules/ol/layer/TileProperty.js"),a=o("./node_modules/ol/layer/VectorTileRenderType.js"),l=o("./node_modules/ol/asserts.js"),c=o("./node_modules/ol/obj.js"),u=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),d=function(e){function t(t){var o=this,n=t||{},r=Object(c.a)({},n);delete r.preload,delete r.useInterimTilesOnError,(o=e.call(this,r)||this).on,o.once,o.un,n.renderMode===a.a.IMAGE&&(console.warn('renderMode: "image" is deprecated. Option ignored.'),n.renderMode=void 0);var i=n.renderMode||a.a.HYBRID;return Object(l.a)(i==a.a.HYBRID||i==a.a.VECTOR,28),o.renderMode_=i,o.setPreload(n.preload?n.preload:0),o.setUseInterimTilesOnError(void 0===n.useInterimTilesOnError||n.useInterimTilesOnError),o}return u(t,e),t.prototype.createRenderer=function(){return new i.a(this)},t.prototype.getFeatures=function(t){return e.prototype.getFeatures.call(this,t)},t.prototype.getRenderMode=function(){return this.renderMode_},t.prototype.getPreload=function(){return this.get(s.a.PRELOAD)},t.prototype.getUseInterimTilesOnError=function(){return this.get(s.a.USE_INTERIM_TILES_ON_ERROR)},t.prototype.setPreload=function(e){this.set(s.a.PRELOAD,e)},t.prototype.setUseInterimTilesOnError=function(e){this.set(s.a.USE_INTERIM_TILES_ON_ERROR,e)},t}(r.a);t.a=d},"./node_modules/ol/layer/VectorTileRenderType.js":function(e,t,o){"use strict";t.a={IMAGE:"image",HYBRID:"hybrid",VECTOR:"vector"}},"./node_modules/ol/loadingstrategy.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return r})),o.d(t,"b",(function(){return i})),o.d(t,"c",(function(){return s}));var n=o("./node_modules/ol/proj.js");function r(e,t){return[[-1/0,-1/0,1/0,1/0]]}function i(e,t){return[e]}function s(e){return function(t,o,r){var i=e.getZForResolution(Object(n.s)(o,r)),s=e.getTileRangeForExtentAndZ(Object(n.r)(t,r),i),a=[],l=[i,0,0];for(l[1]=s.minX;l[1]<=s.maxX;++l[1])for(l[2]=s.minY;l[2]<=s.maxY;++l[2])a.push(Object(n.C)(e.getTileCoordExtent(l),r));return a}}},"./node_modules/ol/math.js":function(e,t,o){"use strict";function n(e,t,o){return Math.min(Math.max(e,t),o)}o.d(t,"a",(function(){return n})),o.d(t,"b",(function(){return r})),o.d(t,"d",(function(){return i})),o.d(t,"h",(function(){return s})),o.d(t,"g",(function(){return a})),o.d(t,"f",(function(){return l})),o.d(t,"i",(function(){return c})),o.d(t,"j",(function(){return u})),o.d(t,"e",(function(){return d})),o.d(t,"c",(function(){return h}));var r="cosh"in Math?Math.cosh:function(e){var t=Math.exp(e);return(t+1/t)/2},i="log2"in Math?Math.log2:function(e){return Math.log(e)*Math.LOG2E};function s(e,t,o,n,r,i){var s=r-o,l=i-n;if(0!==s||0!==l){var c=((e-o)*s+(t-n)*l)/(s*s+l*l);c>1?(o=r,n=i):c>0&&(o+=s*c,n+=l*c)}return a(e,t,o,n)}function a(e,t,o,n){var r=o-e,i=n-t;return r*r+i*i}function l(e){for(var t=e.length,o=0;o<t;o++){for(var n=o,r=Math.abs(e[o][o]),i=o+1;i<t;i++){var s=Math.abs(e[i][o]);s>r&&(r=s,n=i)}if(0===r)return null;var a=e[n];e[n]=e[o],e[o]=a;for(var l=o+1;l<t;l++)for(var c=-e[l][o]/e[o][o],u=o;u<t+1;u++)o==u?e[l][u]=0:e[l][u]+=c*e[o][u]}for(var d=new Array(t),h=t-1;h>=0;h--){d[h]=e[h][t]/e[h][h];for(var p=h-1;p>=0;p--)e[p][t]-=e[p][h]*d[h]}return d}function c(e){return 180*e/Math.PI}function u(e){return e*Math.PI/180}function d(e,t){var o=e%t;return o*t<0?o+t:o}function h(e,t,o){return e+o*(t-e)}},"./node_modules/ol/net.js":function(e,t,o){"use strict";(function(e){o.d(t,"d",(function(){return s})),o.d(t,"b",(function(){return l})),o.d(t,"a",(function(){return c})),o.d(t,"c",(function(){return u})),o.d(t,"f",(function(){return d})),o.d(t,"e",(function(){return h})),o.d(t,"g",(function(){return p}));var n,r=o("./node_modules/ol/util.js"),i=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});function s(e,t,o,n){var i=document.createElement("script"),s="olc_"+Object(r.c)(t);function a(){delete window[s],i.parentNode.removeChild(i)}i.async=!0,i.src=e+(-1==e.indexOf("?")?"?":"&")+(n||"callback")+"="+s;var l=setTimeout((function(){a(),o&&o()}),1e4);window[s]=function(e){clearTimeout(l),a(),t(e)},document.getElementsByTagName("head")[0].appendChild(i)}var a,l=function(e){function t(t){var o=this,n="Unexpected response status: "+t.status;return(o=e.call(this,n)||this).name="ResponseError",o.response=t,o}return i(t,e),t}(Error),c=function(e){function t(t){var o=e.call(this,"Failed to issue request")||this;return o.name="ClientError",o.client=t,o}return i(t,e),t}(Error);function u(e){return new Promise((function(t,o){var n=new XMLHttpRequest;n.addEventListener("load",(function(e){var n=e.target;if(!n.status||n.status>=200&&n.status<300){var r=void 0;try{r=JSON.parse(n.responseText)}catch(e){var i="Error parsing response text as JSON: "+e.message;return void o(new Error(i))}t(r)}else o(new l(n))})),n.addEventListener("error",(function(e){o(new c(e.target))})),n.open("GET",e),n.setRequestHeader("Accept","application/json"),n.send()}))}function d(e,t){return t.indexOf("://")>=0?t:new URL(t,e).href}function h(t){"undefined"!=typeof XMLHttpRequest&&(a=XMLHttpRequest),e.XMLHttpRequest=t}function p(){e.XMLHttpRequest=a}}).call(this,o("./node_modules/webpack/buildin/global.js"))},"./node_modules/ol/obj.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return n})),o.d(t,"b",(function(){return r})),o.d(t,"c",(function(){return i})),o.d(t,"d",(function(){return s}));var n="function"==typeof Object.assign?Object.assign:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(e),n=1,r=arguments.length;n<r;++n){var i=arguments[n];if(null!=i)for(var s in i)i.hasOwnProperty(s)&&(o[s]=i[s])}return o};function r(e){for(var t in e)delete e[t]}var i="function"==typeof Object.values?Object.values:function(e){var t=[];for(var o in e)t.push(e[o]);return t};function s(e){var t;for(t in e)return!1;return!t}},"./node_modules/ol/ol.css":function(e,t,o){},"./node_modules/ol/pointer/EventType.js":function(e,t,o){"use strict";t.a={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},"./node_modules/ol/proj.js":function(e,t,o){"use strict";o.d(t,"k",(function(){return p})),o.d(t,"y",(function(){return f})),o.d(t,"g",(function(){return m})),o.d(t,"h",(function(){return g})),o.d(t,"t",(function(){return y})),o.d(t,"u",(function(){return v})),o.d(t,"e",(function(){return _})),o.d(t,"f",(function(){return b})),o.d(t,"i",(function(){return w})),o.d(t,"l",(function(){return E})),o.d(t,"n",(function(){return O})),o.d(t,"d",(function(){return S})),o.d(t,"p",(function(){return x})),o.d(t,"A",(function(){return C})),o.d(t,"o",(function(){return j})),o.d(t,"w",(function(){return P})),o.d(t,"v",(function(){return T})),o.d(t,"E",(function(){return A})),o.d(t,"F",(function(){return M})),o.d(t,"G",(function(){return I})),o.d(t,"z",(function(){return L})),o.d(t,"j",(function(){return k})),o.d(t,"x",(function(){return G})),o.d(t,"H",(function(){return N})),o.d(t,"B",(function(){return D})),o.d(t,"q",(function(){return F})),o.d(t,"C",(function(){return U})),o.d(t,"r",(function(){return B})),o.d(t,"D",(function(){return z})),o.d(t,"s",(function(){return V})),o.d(t,"m",(function(){return W})),o.d(t,"c",(function(){return q}));var n=o("./node_modules/ol/proj/Projection.js");o.d(t,"b",(function(){return n.a}));var r=o("./node_modules/ol/proj/Units.js");o.d(t,"a",(function(){return r.a}));var i=o("./node_modules/ol/proj/epsg3857.js"),s=o("./node_modules/ol/proj/epsg4326.js"),a=o("./node_modules/ol/proj/projections.js"),l=o("./node_modules/ol/proj/transforms.js"),c=o("./node_modules/ol/extent.js"),u=o("./node_modules/ol/math.js"),d=o("./node_modules/ol/sphere.js"),h=o("./node_modules/ol/coordinate.js");function p(e,t,o){var n;if(void 0!==t){for(var r=0,i=e.length;r<i;++r)t[r]=e[r];n=t}else n=e.slice();return n}function f(e,t,o){if(void 0!==t&&e!==t){for(var n=0,r=e.length;n<r;++n)t[n]=e[n];e=t}return e}function m(e){Object(a.a)(e.getCode(),e),Object(l.a)(e,e,p)}function g(e){e.forEach(m)}function y(e){return"string"==typeof e?Object(a.c)(e):e||null}function v(e,t,o,n){var i,s=(e=y(e)).getPointResolutionFunc();if(s){if(i=s(t,o),n&&n!==e.getUnits())(l=e.getMetersPerUnit())&&(i=i*l/r.a[n])}else{var a=e.getUnits();if(a==r.b.DEGREES&&!n||n==r.b.DEGREES)i=t;else{var l,c=P(e,y("EPSG:4326"));if(c===f&&a!==r.b.DEGREES)i=t*e.getMetersPerUnit();else{var u=[o[0]-t/2,o[1],o[0]+t/2,o[1],o[0],o[1]-t/2,o[0],o[1]+t/2];u=c(u,u,2),i=(Object(d.c)(u.slice(0,2),u.slice(2,4))+Object(d.c)(u.slice(4,6),u.slice(6,8)))/2}void 0!==(l=n?r.a[n]:e.getMetersPerUnit())&&(i/=l)}}return i}function _(e){g(e),e.forEach((function(t){e.forEach((function(e){t!==e&&Object(l.a)(t,e,p)}))}))}function b(e,t,o,n){e.forEach((function(e){t.forEach((function(t){Object(l.a)(e,t,o),Object(l.a)(t,e,n)}))}))}function w(){Object(a.b)(),Object(l.b)()}function E(e,t){return e?"string"==typeof e?y(e):e:y(t)}function O(e){return function(t,o,n){for(var r=t.length,i=void 0!==n?n:2,s=void 0!==o?o:new Array(r),a=0;a<r;a+=i){var l=e([t[a],t[a+1]]);s[a]=l[0],s[a+1]=l[1];for(var c=i-1;c>=2;--c)s[a+c]=t[a+c]}return s}}function S(e,t,o,n){var r=y(e),i=y(t);Object(l.a)(r,i,O(o)),Object(l.a)(i,r,O(n))}function x(e,t){return A(e,"EPSG:4326",void 0!==t?t:"EPSG:3857")}function C(e,t){var o=A(e,void 0!==t?t:"EPSG:3857","EPSG:4326"),n=o[0];return(n<-180||n>180)&&(o[0]=Object(u.e)(n+180,360)-180),o}function j(e,t){if(e===t)return!0;var o=e.getUnits()===t.getUnits();return(e.getCode()===t.getCode()||P(e,t)===p)&&o}function P(e,t){var o=e.getCode(),n=t.getCode(),r=Object(l.c)(o,n);return r||(r=f),r}function T(e,t){return P(y(e),y(t))}function A(e,t,o){return T(t,o)(e,void 0,e.length)}function M(e,t,o,n){var r=T(t,o);return Object(c.a)(e,r,void 0,n)}function I(e,t,o){return P(t,o)(e)}var R=null;function L(e){R=y(e)}function k(){R=null}function G(){return R}function N(){L("EPSG:4326")}function D(e,t){return R?A(e,t,R):e}function F(e,t){return R?A(e,R,t):e}function U(e,t){return R?M(e,t,R):e}function B(e,t){return R?M(e,R,t):e}function z(e,t){if(!R)return e;var o=y(t).getUnits(),n=R.getUnits();return o&&n?e*r.a[o]/r.a[n]:e}function V(e,t){if(!R)return e;var o=y(t).getUnits(),n=R.getUnits();return o&&n?e*r.a[n]/r.a[o]:e}function W(e,t,o){return function(n){var r,i,s=n[0],a=n[1];if(e.canWrapX()){var l=e.getExtent(),d=Object(c.N)(l);(i=Object(h.i)(n,e,d))&&(s-=i*d),s=Object(u.a)(s,l[0],l[2]),a=Object(u.a)(a,l[1],l[3]),r=o([s,a])}else r=o(n);return i&&t.canWrapX()&&(r[0]+=i*Object(c.N)(t.getExtent())),r}}function q(){_(i.d),_(s.c),b(s.c,i.d,i.g,i.h)}q()},"./node_modules/ol/proj/Projection.js":function(e,t,o){"use strict";var n=o("./node_modules/ol/proj/Units.js"),r=function(){function e(e){this.code_=e.code,this.units_=e.units,this.extent_=void 0!==e.extent?e.extent:null,this.worldExtent_=void 0!==e.worldExtent?e.worldExtent:null,this.axisOrientation_=void 0!==e.axisOrientation?e.axisOrientation:"enu",this.global_=void 0!==e.global&&e.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}return e.prototype.canWrapX=function(){return this.canWrapX_},e.prototype.getCode=function(){return this.code_},e.prototype.getExtent=function(){return this.extent_},e.prototype.getUnits=function(){return this.units_},e.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||n.a[this.units_]},e.prototype.getWorldExtent=function(){return this.worldExtent_},e.prototype.getAxisOrientation=function(){return this.axisOrientation_},e.prototype.isGlobal=function(){return this.global_},e.prototype.setGlobal=function(e){this.global_=e,this.canWrapX_=!(!e||!this.extent_)},e.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},e.prototype.setDefaultTileGrid=function(e){this.defaultTileGrid_=e},e.prototype.setExtent=function(e){this.extent_=e,this.canWrapX_=!(!this.global_||!e)},e.prototype.setWorldExtent=function(e){this.worldExtent_=e},e.prototype.setGetPointResolution=function(e){this.getPointResolutionFunc_=e},e.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},e}();t.a=r},"./node_modules/ol/proj/Units.js":function(e,t,o){"use strict";o.d(t,"c",(function(){return i})),o.d(t,"a",(function(){return s}));var n={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},r={9001:n.METERS,9002:n.FEET,9003:n.USFEET,9101:n.RADIANS,9102:n.DEGREES};function i(e){return r[e]}var s={};s[n.RADIANS]=6370997/(2*Math.PI),s[n.DEGREES]=2*Math.PI*6370997/360,s[n.FEET]=.3048,s[n.METERS]=1,s[n.USFEET]=1200/3937,t.b=n},"./node_modules/ol/proj/epsg3857.js":function(e,t,o){"use strict";o.d(t,"e",(function(){return l})),o.d(t,"b",(function(){return c})),o.d(t,"a",(function(){return u})),o.d(t,"f",(function(){return d})),o.d(t,"c",(function(){return h})),o.d(t,"d",(function(){return f})),o.d(t,"g",(function(){return m})),o.d(t,"h",(function(){return g}));var n,r=o("./node_modules/ol/proj/Projection.js"),i=o("./node_modules/ol/proj/Units.js"),s=o("./node_modules/ol/math.js"),a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),l=6378137,c=Math.PI*l,u=[-c,-c,c,c],d=[-180,-85,180,85],h=l*Math.log(Math.tan(Math.PI/2)),p=function(e){function t(t){return e.call(this,{code:t,units:i.b.METERS,extent:u,global:!0,worldExtent:d,getPointResolution:function(e,t){return e/Object(s.b)(t[1]/l)}})||this}return a(t,e),t}(r.a),f=[new p("EPSG:3857"),new p("EPSG:102100"),new p("EPSG:102113"),new p("EPSG:900913"),new p("http://www.opengis.net/def/crs/EPSG/0/3857"),new p("http://www.opengis.net/gml/srs/epsg.xml#3857")];function m(e,t,o){var n=e.length,r=o>1?o:2,i=t;void 0===i&&(i=r>2?e.slice():new Array(n));for(var s=0;s<n;s+=r){i[s]=c*e[s]/180;var a=l*Math.log(Math.tan(Math.PI*(+e[s+1]+90)/360));a>h?a=h:a<-h&&(a=-h),i[s+1]=a}return i}function g(e,t,o){var n=e.length,r=o>1?o:2,i=t;void 0===i&&(i=r>2?e.slice():new Array(n));for(var s=0;s<n;s+=r)i[s]=180*e[s]/c,i[s+1]=360*Math.atan(Math.exp(e[s+1]/l))/Math.PI-90;return i}},"./node_modules/ol/proj/epsg4326.js":function(e,t,o){"use strict";o.d(t,"d",(function(){return a})),o.d(t,"a",(function(){return l})),o.d(t,"b",(function(){return c})),o.d(t,"c",(function(){return d}));var n,r=o("./node_modules/ol/proj/Projection.js"),i=o("./node_modules/ol/proj/Units.js"),s=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=6378137,l=[-180,-90,180,90],c=Math.PI*a/180,u=function(e){function t(t,o){return e.call(this,{code:t,units:i.b.DEGREES,extent:l,axisOrientation:o,global:!0,metersPerUnit:c,worldExtent:l})||this}return s(t,e),t}(r.a),d=[new u("CRS:84"),new u("EPSG:4326","neu"),new u("urn:ogc:def:crs:OGC:1.3:CRS84"),new u("urn:ogc:def:crs:OGC:2:84"),new u("http://www.opengis.net/def/crs/OGC/1.3/CRS84","neu"),new u("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new u("http://www.opengis.net/def/crs/EPSG/0/4326","neu")]},"./node_modules/ol/proj/projections.js":function(e,t,o){"use strict";o.d(t,"b",(function(){return r})),o.d(t,"c",(function(){return i})),o.d(t,"a",(function(){return s}));var n={};function r(){n={}}function i(e){return n[e]||n[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function s(e,t){n[e]=t}},"./node_modules/ol/proj/transforms.js":function(e,t,o){"use strict";o.d(t,"b",(function(){return i})),o.d(t,"a",(function(){return s})),o.d(t,"d",(function(){return a})),o.d(t,"c",(function(){return l}));var n=o("./node_modules/ol/obj.js"),r={};function i(){r={}}function s(e,t,o){var n=e.getCode(),i=t.getCode();n in r||(r[n]={}),r[n][i]=o}function a(e,t){var o=e.getCode(),i=t.getCode(),s=r[o][i];return delete r[o][i],Object(n.d)(r[o])&&delete r[o],s}function l(e,t){var o;return e in r&&t in r[e]&&(o=r[e][t]),o}},"./node_modules/ol/render.js":function(e,t,o){"use strict";o.d(t,"c",(function(){return l})),o.d(t,"b",(function(){return c})),o.d(t,"a",(function(){return u}));var n=o("./node_modules/ol/render/canvas/Immediate.js"),r=o("./node_modules/ol/has.js"),i=o("./node_modules/ol/transform.js"),s=o("./node_modules/ol/renderer/vector.js"),a=o("./node_modules/ol/proj.js");function l(e,t){var o=e.canvas,s=t||{},a=s.pixelRatio||r.a,l=s.size;l&&(o.width=l[0]*a,o.height=l[1]*a,o.style.width=l[0]+"px",o.style.height=l[1]+"px");var c=[0,0,o.width,o.height],u=Object(i.l)(Object(i.d)(),a,a);return new n.a(e,a,c,u,0)}function c(e){var t,o=e.inversePixelTransform[0],r=e.frameState,l=Object(i.i)(e.inversePixelTransform.slice(),r.coordinateToPixelTransform),c=Object(s.b)(r.viewState.resolution,o),u=Object(a.x)();return u&&(t=Object(a.w)(u,r.viewState.projection)),new n.a(e.context,o,r.extent,l,r.viewState.rotation,c,t)}function u(e,t){var o=t.slice(0);return Object(i.a)(e.inversePixelTransform.slice(),o),o}},"./node_modules/ol/render/Box.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/Disposable.js"),i=o("./node_modules/ol/geom/Polygon.js"),s=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=function(e){function t(t){var o=e.call(this)||this;return o.geometry_=null,o.element_=document.createElement("div"),o.element_.style.position="absolute",o.element_.style.pointerEvents="auto",o.element_.className="ol-box "+t,o.map_=null,o.startPixel_=null,o.endPixel_=null,o}return s(t,e),t.prototype.disposeInternal=function(){this.setMap(null)},t.prototype.render_=function(){var e=this.startPixel_,t=this.endPixel_,o=this.element_.style;o.left=Math.min(e[0],t[0])+"px",o.top=Math.min(e[1],t[1])+"px",o.width=Math.abs(t[0]-e[0])+"px",o.height=Math.abs(t[1]-e[1])+"px"},t.prototype.setMap=function(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},t.prototype.setPixels=function(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()},t.prototype.createOrUpdateGeometry=function(){var e=this.startPixel_,t=this.endPixel_,o=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);o[4]=o[0].slice(),this.geometry_?this.geometry_.setCoordinates([o]):this.geometry_=new i.b([o])},t.prototype.getGeometry=function(){return this.geometry_},t}(r.a);t.a=a},"./node_modules/ol/render/Event.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/events/Event.js"),i=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),s=function(e){function t(t,o,n,r){var i=e.call(this,t)||this;return i.inversePixelTransform=o,i.frameState=n,i.context=r,i}return i(t,e),t}(r.a);t.a=s},"./node_modules/ol/render/EventType.js":function(e,t,o){"use strict";t.a={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"}},"./node_modules/ol/render/Feature.js":function(e,t,o){"use strict";var n=o("./node_modules/ol/geom/GeometryType.js"),r=o("./node_modules/ol/transform.js"),i=o("./node_modules/ol/extent.js"),s=o("./node_modules/ol/array.js"),a=o("./node_modules/ol/geom/flat/interiorpoint.js"),l=o("./node_modules/ol/proj.js"),c=o("./node_modules/ol/geom/flat/interpolate.js"),u=o("./node_modules/ol/geom/flat/center.js"),d=o("./node_modules/ol/geom/flat/transform.js"),h=Object(r.d)(),p=function(){function e(e,t,o,n,r){this.extent_,this.id_=r,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=o,this.properties_=n}return e.prototype.get=function(e){return this.properties_[e]},e.prototype.getExtent=function(){return this.extent_||(this.extent_=this.type_===n.a.POINT?Object(i.n)(this.flatCoordinates_):Object(i.p)(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_},e.prototype.getFlatInteriorPoint=function(){if(!this.flatInteriorPoints_){var e=Object(i.C)(this.getExtent());this.flatInteriorPoints_=Object(a.a)(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_},e.prototype.getFlatInteriorPoints=function(){if(!this.flatInteriorPoints_){var e=Object(u.a)(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=Object(a.b)(this.flatCoordinates_,0,this.ends_,2,e)}return this.flatInteriorPoints_},e.prototype.getFlatMidpoint=function(){return this.flatMidpoints_||(this.flatMidpoints_=Object(c.a)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_},e.prototype.getFlatMidpoints=function(){if(!this.flatMidpoints_){this.flatMidpoints_=[];for(var e=this.flatCoordinates_,t=0,o=this.ends_,n=0,r=o.length;n<r;++n){var i=o[n],a=Object(c.a)(e,t,i,2,.5);Object(s.c)(this.flatMidpoints_,a),t=i}}return this.flatMidpoints_},e.prototype.getId=function(){return this.id_},e.prototype.getOrientedFlatCoordinates=function(){return this.flatCoordinates_},e.prototype.getGeometry=function(){return this},e.prototype.getSimplifiedGeometry=function(e){return this},e.prototype.simplifyTransformed=function(e,t){return this},e.prototype.getProperties=function(){return this.properties_},e.prototype.getStride=function(){return 2},e.prototype.getStyleFunction=function(){},e.prototype.getType=function(){return this.type_},e.prototype.transform=function(e){var t=(e=Object(l.t)(e)).getExtent(),o=e.getWorldExtent();if(t&&o){var n=Object(i.G)(o)/Object(i.G)(t);Object(r.b)(h,o[0],o[3],n,-n,0,0,0),Object(d.c)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,h,this.flatCoordinates_)}},e.prototype.getEnds=function(){return this.ends_},e}();p.prototype.getEndss=p.prototype.getEnds,p.prototype.getFlatCoordinates=p.prototype.getOrientedFlatCoordinates,t.a=p},"./node_modules/ol/render/VectorContext.js":function(e,t,o){"use strict";var n=function(){function e(){}return e.prototype.drawCustom=function(e,t,o,n){},e.prototype.drawGeometry=function(e){},e.prototype.setStyle=function(e){},e.prototype.drawCircle=function(e,t){},e.prototype.drawFeature=function(e,t){},e.prototype.drawGeometryCollection=function(e,t){},e.prototype.drawLineString=function(e,t){},e.prototype.drawMultiLineString=function(e,t){},e.prototype.drawMultiPoint=function(e,t){},e.prototype.drawMultiPolygon=function(e,t){},e.prototype.drawPoint=function(e,t){},e.prototype.drawPolygon=function(e,t){},e.prototype.drawText=function(e,t){},e.prototype.setFillStrokeStyle=function(e,t){},e.prototype.setImageStyle=function(e,t){},e.prototype.setTextStyle=function(e,t){},e}();t.a=n},"./node_modules/ol/render/canvas.js":function(e,t,o){"use strict";o.d(t,"c",(function(){return c})),o.d(t,"b",(function(){return u})),o.d(t,"d",(function(){return d})),o.d(t,"e",(function(){return h})),o.d(t,"f",(function(){return p})),o.d(t,"g",(function(){return f})),o.d(t,"i",(function(){return m})),o.d(t,"k",(function(){return g})),o.d(t,"l",(function(){return y})),o.d(t,"m",(function(){return v})),o.d(t,"j",(function(){return _})),o.d(t,"h",(function(){return b})),o.d(t,"a",(function(){return w})),o.d(t,"o",(function(){return E})),o.d(t,"v",(function(){return C})),o.d(t,"t",(function(){return j})),o.d(t,"q",(function(){return P})),o.d(t,"r",(function(){return A})),o.d(t,"p",(function(){return M})),o.d(t,"s",(function(){return I})),o.d(t,"u",(function(){return R})),o.d(t,"n",(function(){return L}));var n=o("./node_modules/ol/Object.js"),r=o("./node_modules/ol/events/Target.js"),i=o("./node_modules/ol/has.js"),s=o("./node_modules/ol/obj.js"),a=o("./node_modules/ol/dom.js"),l=o("./node_modules/ol/css.js"),c="10px sans-serif",u="#000",d="round",h=[],p=0,f="round",m=10,g="#000",y="center",v="middle",_=[0,0,0,0],b=1,w=new n.b,E=new r.a;E.setSize=function(){console.warn("labelCache is deprecated.")};var O,S,x=null,C={},j=function(){var e,t,o=["monospace","serif"],n=o.length,r="wmytzilWMYTZIL@#/&?$%10ï";function i(e,i,s){for(var a=!0,l=0;l<n;++l){var c=o[l];if(t=A(e+" "+i+" 32px "+c,r),s!=c){var u=A(e+" "+i+" 32px "+s+","+c,r);a=a&&u!=t}}return!!a}function a(){for(var t=!0,o=w.getKeys(),n=0,r=o.length;n<r;++n){var a=o[n];w.get(a)<100&&(i.apply(this,a.split("\n"))?(Object(s.b)(C),x=null,O=void 0,w.set(a,100)):(w.set(a,w.get(a)+1,!0),t=!1))}t&&(clearInterval(e),e=void 0)}return function(t){var o=Object(l.h)(t);if(o)for(var n=o.families,r=0,s=n.length;r<s;++r){var c=n[r],u=o.style+"\n"+o.weight+"\n"+c;void 0===w.get(u)&&(w.set(u,100,!0),i(o.style,o.weight,c)||(w.set(u,0,!0),void 0===e&&(e=setInterval(a,32))))}}}(),P=function(e){var t=C[e];if(null==t){if(i.h){var o=Object(l.h)(e),n=T(e,"Å½g");t=(isNaN(Number(o.lineHeight))?1.2:Number(o.lineHeight))*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else S||((S=document.createElement("div")).innerHTML="M",S.style.minHeight="0",S.style.maxHeight="none",S.style.height="auto",S.style.padding="0",S.style.border="none",S.style.position="absolute",S.style.display="block",S.style.left="-99999px"),S.style.font=e,document.body.appendChild(S),t=S.offsetHeight,document.body.removeChild(S);C[e]=t}return t};function T(e,t){return x||(x=Object(a.a)(1,1)),e!=O&&(x.font=e,O=x.font),x.measureText(t)}function A(e,t){return T(e,t).width}function M(e,t,o){if(t in o)return o[t];var n=A(e,t);return o[t]=n,n}function I(e,t,o){for(var n=t.length,r=0,i=0;i<n;++i){var s=A(e,t[i]);r=Math.max(r,s),o.push(s)}return r}function R(e,t,o,n){0!==t&&(e.translate(o,n),e.rotate(t),e.translate(-o,-n))}function L(e,t,o,n,r,i,s,a,l,c,u){e.save(),1!==o&&(e.globalAlpha*=o),t&&e.setTransform.apply(e,t),n.contextInstructions?(e.translate(l,c),e.scale(u[0],u[1]),function(e,t){for(var o=e.contextInstructions,n=0,r=o.length;n<r;n+=2)Array.isArray(o[n+1])?t[o[n]].apply(t,o[n+1]):t[o[n]]=o[n+1]}(n,e)):u[0]<0||u[1]<0?(e.translate(l,c),e.scale(u[0],u[1]),e.drawImage(n,r,i,s,a,0,0,s,a)):e.drawImage(n,r,i,s,a,l,c,s*u[0],a*u[1]),e.restore()}},"./node_modules/ol/render/canvas/Builder.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/render/canvas/Instruction.js"),i=o("./node_modules/ol/geom/GeometryType.js"),s=o("./node_modules/ol/extent/Relationship.js"),a=o("./node_modules/ol/render/VectorContext.js"),l=o("./node_modules/ol/colorlike.js"),c=o("./node_modules/ol/extent.js"),u=o("./node_modules/ol/render/canvas.js"),d=o("./node_modules/ol/array.js"),h=o("./node_modules/ol/geom/flat/inflate.js"),p=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),f=function(e){function t(t,o,n,r){var i=e.call(this)||this;return i.tolerance=t,i.maxExtent=o,i.pixelRatio=r,i.maxLineWidth=0,i.resolution=n,i.beginGeometryInstruction1_=null,i.beginGeometryInstruction2_=null,i.bufferedMaxExtent_=null,i.instructions=[],i.coordinates=[],i.tmpCoordinate_=[],i.hitDetectionInstructions=[],i.state={},i}return p(t,e),t.prototype.applyPixelRatio=function(e){var t=this.pixelRatio;return 1==t?e:e.map((function(e){return e*t}))},t.prototype.appendFlatPointCoordinates=function(e,t){for(var o=this.getBufferedMaxExtent(),n=this.tmpCoordinate_,r=this.coordinates,i=r.length,s=0,a=e.length;s<a;s+=t)n[0]=e[s],n[1]=e[s+1],Object(c.g)(o,n)&&(r[i++]=n[0],r[i++]=n[1]);return i},t.prototype.appendFlatLineCoordinates=function(e,t,o,n,r,i){var a=this.coordinates,l=a.length,u=this.getBufferedMaxExtent();i&&(t+=n);var d,h,p,f=e[t],m=e[t+1],g=this.tmpCoordinate_,y=!0;for(d=t+n;d<o;d+=n)g[0]=e[d],g[1]=e[d+1],(p=Object(c.j)(u,g))!==h?(y&&(a[l++]=f,a[l++]=m,y=!1),a[l++]=g[0],a[l++]=g[1]):p===s.a.INTERSECTING?(a[l++]=g[0],a[l++]=g[1],y=!1):y=!0,f=g[0],m=g[1],h=p;return(r&&y||d===t+n)&&(a[l++]=f,a[l++]=m),l},t.prototype.drawCustomCoordinates_=function(e,t,o,n,r){for(var i=0,s=o.length;i<s;++i){var a=o[i],l=this.appendFlatLineCoordinates(e,t,a,n,!1,!1);r.push(l),t=a}return t},t.prototype.drawCustom=function(e,t,o,n){this.beginGeometry(e,t);var s,a,l,c,u,d=e.getType(),p=e.getStride(),f=this.coordinates.length;switch(d){case i.a.MULTI_POLYGON:s=e.getOrientedFlatCoordinates(),c=[];var m=e.getEndss();u=0;for(var g=0,y=m.length;g<y;++g){var v=[];u=this.drawCustomCoordinates_(s,u,m[g],p,v),c.push(v)}this.instructions.push([r.c.CUSTOM,f,c,e,o,h.c]),this.hitDetectionInstructions.push([r.c.CUSTOM,f,c,e,n||o,h.c]);break;case i.a.POLYGON:case i.a.MULTI_LINE_STRING:l=[],s=d==i.a.POLYGON?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),u=this.drawCustomCoordinates_(s,0,e.getEnds(),p,l),this.instructions.push([r.c.CUSTOM,f,l,e,o,h.b]),this.hitDetectionInstructions.push([r.c.CUSTOM,f,l,e,n||o,h.b]);break;case i.a.LINE_STRING:case i.a.CIRCLE:s=e.getFlatCoordinates(),a=this.appendFlatLineCoordinates(s,0,s.length,p,!1,!1),this.instructions.push([r.c.CUSTOM,f,a,e,o,h.a]),this.hitDetectionInstructions.push([r.c.CUSTOM,f,a,e,n||o,h.a]);break;case i.a.MULTI_POINT:s=e.getFlatCoordinates(),(a=this.appendFlatPointCoordinates(s,p))>f&&(this.instructions.push([r.c.CUSTOM,f,a,e,o,h.a]),this.hitDetectionInstructions.push([r.c.CUSTOM,f,a,e,n||o,h.a]));break;case i.a.POINT:s=e.getFlatCoordinates(),this.coordinates.push(s[0],s[1]),a=this.coordinates.length,this.instructions.push([r.c.CUSTOM,f,a,e,o]),this.hitDetectionInstructions.push([r.c.CUSTOM,f,a,e,n||o])}this.endGeometry(t)},t.prototype.beginGeometry=function(e,t){this.beginGeometryInstruction1_=[r.c.BEGIN_GEOMETRY,t,0,e],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[r.c.BEGIN_GEOMETRY,t,0,e],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},t.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},t.prototype.reverseHitDetectionInstructions=function(){var e,t=this.hitDetectionInstructions;t.reverse();var o,n,i=t.length,s=-1;for(e=0;e<i;++e)(n=(o=t[e])[0])==r.c.END_GEOMETRY?s=e:n==r.c.BEGIN_GEOMETRY&&(o[2]=e,Object(d.k)(this.hitDetectionInstructions,s,e),s=-1)},t.prototype.setFillStrokeStyle=function(e,t){var o=this.state;if(e){var n=e.getColor();o.fillStyle=Object(l.a)(n||u.b)}else o.fillStyle=void 0;if(t){var r=t.getColor();o.strokeStyle=Object(l.a)(r||u.k);var i=t.getLineCap();o.lineCap=void 0!==i?i:u.d;var s=t.getLineDash();o.lineDash=s?s.slice():u.e;var a=t.getLineDashOffset();o.lineDashOffset=a||u.f;var c=t.getLineJoin();o.lineJoin=void 0!==c?c:u.g;var d=t.getWidth();o.lineWidth=void 0!==d?d:u.h;var h=t.getMiterLimit();o.miterLimit=void 0!==h?h:u.i,o.lineWidth>this.maxLineWidth&&(this.maxLineWidth=o.lineWidth,this.bufferedMaxExtent_=null)}else o.strokeStyle=void 0,o.lineCap=void 0,o.lineDash=null,o.lineDashOffset=void 0,o.lineJoin=void 0,o.lineWidth=void 0,o.miterLimit=void 0},t.prototype.createFill=function(e){var t=e.fillStyle,o=[r.c.SET_FILL_STYLE,t];return"string"!=typeof t&&o.push(!0),o},t.prototype.applyStroke=function(e){this.instructions.push(this.createStroke(e))},t.prototype.createStroke=function(e){return[r.c.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]},t.prototype.updateFillStyle=function(e,t){var o=e.fillStyle;"string"==typeof o&&e.currentFillStyle==o||(void 0!==o&&this.instructions.push(t.call(this,e)),e.currentFillStyle=o)},t.prototype.updateStrokeStyle=function(e,t){var o=e.strokeStyle,n=e.lineCap,r=e.lineDash,i=e.lineDashOffset,s=e.lineJoin,a=e.lineWidth,l=e.miterLimit;(e.currentStrokeStyle!=o||e.currentLineCap!=n||r!=e.currentLineDash&&!Object(d.b)(e.currentLineDash,r)||e.currentLineDashOffset!=i||e.currentLineJoin!=s||e.currentLineWidth!=a||e.currentMiterLimit!=l)&&(void 0!==o&&t.call(this,e),e.currentStrokeStyle=o,e.currentLineCap=n,e.currentLineDash=r,e.currentLineDashOffset=i,e.currentLineJoin=s,e.currentLineWidth=a,e.currentMiterLimit=l)},t.prototype.endGeometry=function(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var t=[r.c.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)},t.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Object(c.e)(this.maxExtent),this.maxLineWidth>0)){var e=this.resolution*(this.maxLineWidth+1)/2;Object(c.d)(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},t}(a.a);t.a=f},"./node_modules/ol/render/canvas/BuilderGroup.js":function(e,t,o){"use strict";var n=o("./node_modules/ol/render/canvas/Builder.js"),r=o("./node_modules/ol/render/canvas/ImageBuilder.js"),i=o("./node_modules/ol/render/canvas/LineStringBuilder.js"),s=o("./node_modules/ol/render/canvas/PolygonBuilder.js"),a=o("./node_modules/ol/render/canvas/TextBuilder.js"),l={Circle:s.a,Default:n.a,Image:r.a,LineString:i.a,Polygon:s.a,Text:a.b},c=function(){function e(e,t,o,n){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=n,this.resolution_=o,this.buildersByZIndex_={}}return e.prototype.finish=function(){var e={};for(var t in this.buildersByZIndex_){e[t]=e[t]||{};var o=this.buildersByZIndex_[t];for(var n in o){var r=o[n].finish();e[t][n]=r}}return e},e.prototype.getBuilder=function(e,t){var o=void 0!==e?e.toString():"0",n=this.buildersByZIndex_[o];void 0===n&&(n={},this.buildersByZIndex_[o]=n);var r=n[t];void 0===r&&(r=new(0,l[t])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[t]=r);return r},e}();t.a=c},"./node_modules/ol/render/canvas/BuilderType.js":function(e,t,o){"use strict";t.a={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"}},"./node_modules/ol/render/canvas/Executor.js":function(e,t,o){"use strict";var n=o("./node_modules/ol/render/canvas/Instruction.js"),r=o("./node_modules/ol/render/canvas/TextBuilder.js"),i=o("./node_modules/ol/has.js"),s=o("./node_modules/ol/transform.js"),a=o("./node_modules/ol/extent.js"),l=o("./node_modules/ol/render/canvas.js"),c=o("./node_modules/ol/geom/flat/textpath.js"),u=o("./node_modules/ol/array.js"),d=o("./node_modules/ol/geom/flat/length.js"),h=o("./node_modules/ol/geom/flat/transform.js"),p=Object(a.k)(),f=[],m=[],g=[],y=[];function v(e){return e[3].declutterBox}var _=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function b(e,t){return"start"!==t&&"end"!==t||_.test(e)||(t="start"===t?"left":"right"),r.a[t]}var w=function(){function e(e,t,o,n){this.overlaps=o,this.pixelRatio=t,this.resolution=e,this.alignFill_,this.instructions=n.instructions,this.coordinates=n.coordinates,this.coordinateCache_={},this.renderedTransform_=Object(s.d)(),this.hitDetectionInstructions=n.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=n.fillStates||{},this.strokeStates=n.strokeStates||{},this.textStates=n.textStates||{},this.widths_={},this.labels_={}}return e.prototype.createLabel=function(e,t,o,n){var r=e+t+o+n;if(this.labels_[r])return this.labels_[r];var s=n?this.strokeStates[n]:null,a=o?this.fillStates[o]:null,c=this.textStates[t],u=this.pixelRatio,d=[c.scale[0]*u,c.scale[1]*u],h=b(e,c.textAlign||l.l),p=n&&s.lineWidth?s.lineWidth:0,f=e.split("\n"),m=f.length,g=[],y=Object(l.s)(c.font,f,g),v=Object(l.q)(c.font),_=y+p,w=[],E=(_+2)*d[0],O=(v*m+p)*d[1],S={width:E<0?Math.floor(E):Math.ceil(E),height:O<0?Math.floor(O):Math.ceil(O),contextInstructions:w};(1==d[0]&&1==d[1]||w.push("scale",d),w.push("font",c.font),n)&&(w.push("strokeStyle",s.strokeStyle),w.push("lineWidth",p),w.push("lineCap",s.lineCap),w.push("lineJoin",s.lineJoin),w.push("miterLimit",s.miterLimit),(i.h?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(w.push("setLineDash",[s.lineDash]),w.push("lineDashOffset",s.lineDashOffset)));o&&w.push("fillStyle",a.fillStyle),w.push("textBaseline","middle"),w.push("textAlign","center");var x,C=.5-h,j=h*_+C*p;if(n)for(x=0;x<m;++x)w.push("strokeText",[f[x],j+C*g[x],.5*(p+v)+x*v]);if(o)for(x=0;x<m;++x)w.push("fillText",[f[x],j+C*g[x],.5*(p+v)+x*v]);return this.labels_[r]=S,S},e.prototype.replayTextBackground_=function(e,t,o,n,r,i,s){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,o),e.lineTo.apply(e,n),e.lineTo.apply(e,r),e.lineTo.apply(e,t),i&&(this.alignFill_=i[2],this.fill_(e)),s&&(this.setStrokeStyle_(e,s),e.stroke())},e.prototype.calculateImageOrLabelDimensions_=function(e,t,o,n,r,i,l,c,u,d,h,v,_,b,w,E){var O,S=o-(l*=v[0]),x=n-(c*=v[1]),C=r+u>e?e-u:r,j=i+d>t?t-d:i,P=b[3]+C*v[0]+b[1],T=b[0]+j*v[1]+b[2],A=S-b[3],M=x-b[0];return(w||0!==h)&&(f[0]=A,y[0]=A,f[1]=M,m[1]=M,m[0]=A+P,g[0]=m[0],g[1]=M+T,y[1]=g[1]),0!==h?(O=Object(s.b)(Object(s.d)(),o,n,1,1,h,-o,-n),Object(s.a)(O,f),Object(s.a)(O,m),Object(s.a)(O,g),Object(s.a)(O,y),Object(a.l)(Math.min(f[0],m[0],g[0],y[0]),Math.min(f[1],m[1],g[1],y[1]),Math.max(f[0],m[0],g[0],y[0]),Math.max(f[1],m[1],g[1],y[1]),p)):Object(a.l)(Math.min(A,A+P),Math.min(M,M+T),Math.max(A,A+P),Math.max(M,M+T),p),_&&(S=Math.round(S),x=Math.round(x)),{drawImageX:S,drawImageY:x,drawImageW:C,drawImageH:j,originX:u,originY:d,declutterBox:{minX:p[0],minY:p[1],maxX:p[2],maxY:p[3],value:E},canvasTransform:O,scale:v}},e.prototype.replayImageOrLabel_=function(e,t,o,n,r,i,s){var a=!(!i&&!s),c=n.declutterBox,u=e.canvas,d=s?s[2]*n.scale[0]/2:0;return c.minX-d<=u.width/t&&c.maxX+d>=0&&c.minY-d<=u.height/t&&c.maxY+d>=0&&(a&&this.replayTextBackground_(e,f,m,g,y,i,s),Object(l.n)(e,n.canvasTransform,r,o,n.originX,n.originY,n.drawImageW,n.drawImageH,n.drawImageX,n.drawImageY,n.scale)),!0},e.prototype.fill_=function(e){if(this.alignFill_){var t=Object(s.a)(this.renderedTransform_,[0,0]),o=512*this.pixelRatio;e.save(),e.translate(t[0]%o,t[1]%o),e.rotate(this.viewRotation_)}e.fill(),this.alignFill_&&e.restore()},e.prototype.setStrokeStyle_=function(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.setLineDash&&(e.lineDashOffset=t[7],e.setLineDash(t[6]))},e.prototype.drawLabelWithPointPlacement_=function(e,t,o,n){var i=this.textStates[t],s=this.createLabel(e,t,n,o),a=this.strokeStates[o],c=this.pixelRatio,u=b(e,i.textAlign||l.l),d=r.a[i.textBaseline||l.m],h=a&&a.lineWidth?a.lineWidth:0;return{label:s,anchorX:u*(s.width/c-2*i.scale[0])+2*(.5-u)*h,anchorY:d*s.height/c+2*(.5-d)*h}},e.prototype.execute_=function(e,t,o,i,p,f,m,g){var y;this.pixelCoordinates_&&Object(u.b)(o,this.renderedTransform_)?y=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),y=Object(h.c)(this.coordinates,0,this.coordinates.length,2,o,this.pixelCoordinates_),Object(s.n)(this.renderedTransform_,o));for(var _,b,w,E,O,S,x,C,j,P,T,A,M,I,R,L,k=0,G=i.length,N=0,D=0,F=0,U=null,B=null,z=this.coordinateCache_,V=this.viewRotation_,W=Math.round(1e12*Math.atan2(-o[1],o[0]))/1e12,q={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:V},H=this.instructions!=i||this.overlaps?0:200;k<G;){var Y=i[k];switch(Y[0]){case n.c.BEGIN_GEOMETRY:M=Y[1],L=Y[3],M.getGeometry()?void 0===m||Object(a.O)(m,L.getExtent())?++k:k=Y[2]+1:k=Y[2];break;case n.c.BEGIN_PATH:D>H&&(this.fill_(e),D=0),F>H&&(e.stroke(),F=0),D||F||(e.beginPath(),E=NaN,O=NaN),++k;break;case n.c.CIRCLE:var X=y[N=Y[1]],Z=y[N+1],K=y[N+2]-X,J=y[N+3]-Z,Q=Math.sqrt(K*K+J*J);e.moveTo(X+Q,Z),e.arc(X,Z,Q,0,2*Math.PI,!0),++k;break;case n.c.CLOSE_PATH:e.closePath(),++k;break;case n.c.CUSTOM:N=Y[1],_=Y[2];var $=Y[3],ee=Y[4],te=6==Y.length?Y[5]:void 0;q.geometry=$,q.feature=M,k in z||(z[k]=[]);var oe=z[k];te?te(y,N,_,2,oe):(oe[0]=y[N],oe[1]=y[N+1],oe.length=2),ee(oe,q),++k;break;case n.c.DRAW_IMAGE:N=Y[1],_=Y[2],C=Y[3],b=Y[4],w=Y[5];var ne=Y[6],re=Y[7],ie=Y[8],se=Y[9],ae=Y[10],le=Y[11],ce=Y[12],ue=Y[13],de=Y[14];if(!C&&Y.length>=19){j=Y[18],P=Y[19],T=Y[20],A=Y[21];var he=this.drawLabelWithPointPlacement_(j,P,T,A);C=he.label,Y[3]=C;var pe=Y[22];b=(he.anchorX-pe)*this.pixelRatio,Y[4]=b;var fe=Y[23];w=(he.anchorY-fe)*this.pixelRatio,Y[5]=w,ne=C.height,Y[6]=ne,ue=C.width,Y[13]=ue}var me=void 0;Y.length>24&&(me=Y[24]);var ge=void 0,ye=void 0,ve=void 0;Y.length>16?(ge=Y[15],ye=Y[16],ve=Y[17]):(ge=l.j,ye=!1,ve=!1),ae&&W?le+=V:ae||W||(le-=V);for(var _e=0;N<_;N+=2)if(!(me&&me[_e++]<ue/this.pixelRatio)){var be=[e,t,C,Xe=this.calculateImageOrLabelDimensions_(C.width,C.height,y[N],y[N+1],ue,ne,b,w,ie,se,le,ce,p,ge,ye||ve,M),re,ye?U:null,ve?B:null],we=void 0,Ee=void 0;if(g&&de){var Oe=_-N;if(!de[Oe]){de[Oe]=be;continue}if(we=de[Oe],delete de[Oe],Ee=v(we),g.collides(Ee))continue}g&&g.collides(Xe.declutterBox)||(we&&(g&&g.insert(Ee),this.replayImageOrLabel_.apply(this,we)),g&&g.insert(Xe.declutterBox),this.replayImageOrLabel_.apply(this,be))}++k;break;case n.c.DRAW_CHARS:var Se=Y[1],xe=Y[2],Ce=Y[3],je=Y[4];A=Y[5];var Pe=Y[6],Te=Y[7],Ae=Y[8];T=Y[9];var Me=Y[10];j=Y[11],P=Y[12];var Ie=[Y[13],Y[13]],Re=this.textStates[P],Le=Re.font,ke=[Re.scale[0]*Te,Re.scale[1]*Te],Ge=void 0;Le in this.widths_?Ge=this.widths_[Le]:(Ge={},this.widths_[Le]=Ge);var Ne=Object(d.a)(y,Se,xe,2),De=Math.abs(ke[0])*Object(l.p)(Le,j,Ge);if(je||De<=Ne){var Fe=this.textStates[P].textAlign,Ue=(Ne-De)*r.a[Fe],Be=Object(c.a)(y,Se,xe,2,j,Ue,Pe,Math.abs(ke[0]),l.p,Le,Ge,W?0:this.viewRotation_);e:if(Be){var ze=[],Ve=void 0,We=void 0,qe=void 0,He=void 0,Ye=void 0;if(T)for(Ve=0,We=Be.length;Ve<We;++Ve){qe=(Ye=Be[Ve])[4],He=this.createLabel(qe,P,"",T),b=Ye[2]+(ke[0]<0?-Me:Me),w=Ce*He.height+2*(.5-Ce)*Me*ke[1]/ke[0]-Ae;var Xe=this.calculateImageOrLabelDimensions_(He.width,He.height,Ye[0],Ye[1],He.width,He.height,b,w,0,0,Ye[3],Ie,!1,l.j,!1,M);if(g&&g.collides(Xe.declutterBox))break e;ze.push([e,t,He,Xe,1,null,null])}if(A)for(Ve=0,We=Be.length;Ve<We;++Ve){qe=(Ye=Be[Ve])[4],He=this.createLabel(qe,P,A,""),b=Ye[2],w=Ce*He.height-Ae;Xe=this.calculateImageOrLabelDimensions_(He.width,He.height,Ye[0],Ye[1],He.width,He.height,b,w,0,0,Ye[3],Ie,!1,l.j,!1,M);if(g&&g.collides(Xe.declutterBox))break e;ze.push([e,t,He,Xe,1,null,null])}g&&g.load(ze.map(v));for(var Ze=0,Ke=ze.length;Ze<Ke;++Ze)this.replayImageOrLabel_.apply(this,ze[Ze])}}++k;break;case n.c.END_GEOMETRY:if(void 0!==f){var Je=f(M=Y[1],L);if(Je)return Je}++k;break;case n.c.FILL:H?D++:this.fill_(e),++k;break;case n.c.MOVE_TO_LINE_TO:for(N=Y[1],_=Y[2],I=y[N],x=(R=y[N+1])+.5|0,(S=I+.5|0)===E&&x===O||(e.moveTo(I,R),E=S,O=x),N+=2;N<_;N+=2)S=(I=y[N])+.5|0,x=(R=y[N+1])+.5|0,N!=_-2&&S===E&&x===O||(e.lineTo(I,R),E=S,O=x);++k;break;case n.c.SET_FILL_STYLE:U=Y,this.alignFill_=Y[2],D&&(this.fill_(e),D=0,F&&(e.stroke(),F=0)),e.fillStyle=Y[1],++k;break;case n.c.SET_STROKE_STYLE:B=Y,F&&(e.stroke(),F=0),this.setStrokeStyle_(e,Y),++k;break;case n.c.STROKE:H?F++:e.stroke(),++k;break;default:++k}}D&&this.fill_(e),F&&e.stroke()},e.prototype.execute=function(e,t,o,n,r,i){this.viewRotation_=n,this.execute_(e,t,o,this.instructions,r,void 0,void 0,i)},e.prototype.executeHitDetection=function(e,t,o,n,r){return this.viewRotation_=o,this.execute_(e,1,t,this.hitDetectionInstructions,!0,n,r)},e}();t.a=w},"./node_modules/ol/render/canvas/ExecutorGroup.js":function(e,t,o){"use strict";o.d(t,"b",(function(){return f}));var n=o("./node_modules/ol/render/canvas/BuilderType.js"),r=o("./node_modules/ol/render/canvas/Executor.js"),i=o("./node_modules/ol/extent.js"),s=o("./node_modules/ol/transform.js"),a=o("./node_modules/ol/dom.js"),l=o("./node_modules/ol/obj.js"),c=o("./node_modules/ol/array.js"),u=o("./node_modules/ol/geom/flat/transform.js"),d=[n.a.POLYGON,n.a.CIRCLE,n.a.LINE_STRING,n.a.IMAGE,n.a.TEXT,n.a.DEFAULT],h=function(){function e(e,t,o,n,r,i){this.maxExtent_=e,this.overlaps_=n,this.pixelRatio_=o,this.resolution_=t,this.renderBuffer_=i,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Object(s.d)(),this.createExecutors_(r)}return e.prototype.clip=function(e,t){var o=this.getClipCoords(t);e.beginPath(),e.moveTo(o[0],o[1]),e.lineTo(o[2],o[3]),e.lineTo(o[4],o[5]),e.lineTo(o[6],o[7]),e.clip()},e.prototype.createExecutors_=function(e){for(var t in e){var o=this.executorsByZIndex_[t];void 0===o&&(o={},this.executorsByZIndex_[t]=o);var n=e[t];for(var i in n){var s=n[i];o[i]=new r.a(this.resolution_,this.pixelRatio_,this.overlaps_,s)}}},e.prototype.hasExecutors=function(e){for(var t in this.executorsByZIndex_)for(var o=this.executorsByZIndex_[t],n=0,r=e.length;n<r;++n)if(e[n]in o)return!0;return!1},e.prototype.forEachFeatureAtCoordinate=function(e,t,o,r,l,u){var h=2*(r=Math.round(r))+1,p=Object(s.b)(this.hitDetectionTransform_,r+.5,r+.5,1/t,-1/t,-o,-e[0],-e[1]),m=!this.hitDetectionContext_;m&&(this.hitDetectionContext_=Object(a.a)(h,h));var g,y=this.hitDetectionContext_;y.canvas.width!==h||y.canvas.height!==h?(y.canvas.width=h,y.canvas.height=h):m||y.clearRect(0,0,h,h),void 0!==this.renderBuffer_&&(g=Object(i.k)(),Object(i.t)(g,e),Object(i.d)(g,t*(this.renderBuffer_+r),g));var v,_=f(r);function b(e,t){for(var o=y.getImageData(0,0,h,h).data,i=0,s=_.length;i<s;i++)if(o[_[i]]>0){if(!u||v!==n.a.IMAGE&&v!==n.a.TEXT||-1!==u.indexOf(e)){var a=(_[i]-3)/4,c=r-a%h,d=r-(a/h|0),p=l(e,t,c*c+d*d);if(p)return p}y.clearRect(0,0,h,h);break}}var w,E,O,S,x,C=Object.keys(this.executorsByZIndex_).map(Number);for(C.sort(c.i),w=C.length-1;w>=0;--w){var j=C[w].toString();for(O=this.executorsByZIndex_[j],E=d.length-1;E>=0;--E)if(void 0!==(S=O[v=d[E]])&&(x=S.executeHitDetection(y,p,o,b,g)))return x}},e.prototype.getClipCoords=function(e){var t=this.maxExtent_;if(!t)return null;var o=t[0],n=t[1],r=t[2],i=t[3],s=[o,n,o,i,r,i,r,n];return Object(u.c)(s,0,8,2,e,s),s},e.prototype.isEmpty=function(){return Object(l.d)(this.executorsByZIndex_)},e.prototype.execute=function(e,t,o,n,r,i,s){var a=Object.keys(this.executorsByZIndex_).map(Number);a.sort(c.i),this.maxExtent_&&(e.save(),this.clip(e,o));var l,u,h,p,f,m,g=i||d;for(s&&a.reverse(),l=0,u=a.length;l<u;++l){var y=a[l].toString();for(f=this.executorsByZIndex_[y],h=0,p=g.length;h<p;++h){void 0!==(m=f[g[h]])&&m.execute(e,t,o,n,r,s)}}this.maxExtent_&&e.restore()},e}(),p={};function f(e){if(void 0!==p[e])return p[e];for(var t=2*e+1,o=e*e,n=new Array(o+1),r=0;r<=e;++r)for(var i=0;i<=e;++i){var s=r*r+i*i;if(s>o)break;var a=n[s];a||(a=[],n[s]=a),a.push(4*((e+r)*t+(e+i))+3),r>0&&a.push(4*((e-r)*t+(e+i))+3),i>0&&(a.push(4*((e+r)*t+(e-i))+3),r>0&&a.push(4*((e-r)*t+(e-i))+3))}for(var l=[],c=(r=0,n.length);r<c;++r)n[r]&&l.push.apply(l,n[r]);return p[e]=l,l}t.a=h},"./node_modules/ol/render/canvas/ImageBuilder.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/render/canvas/Builder.js"),i=o("./node_modules/ol/render/canvas/Instruction.js"),s=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=function(e){function t(t,o,n,r){var i=e.call(this,t,o,n,r)||this;return i.hitDetectionImage_=null,i.image_=null,i.imagePixelRatio_=void 0,i.anchorX_=void 0,i.anchorY_=void 0,i.height_=void 0,i.opacity_=void 0,i.originX_=void 0,i.originY_=void 0,i.rotateWithView_=void 0,i.rotation_=void 0,i.scale_=void 0,i.width_=void 0,i.declutterImageWithText_=void 0,i}return s(t,e),t.prototype.drawPoint=function(e,t){if(this.image_){this.beginGeometry(e,t);var o=e.getFlatCoordinates(),n=e.getStride(),r=this.coordinates.length,s=this.appendFlatPointCoordinates(o,n);this.instructions.push([i.c.DRAW_IMAGE,r,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([i.c.DRAW_IMAGE,r,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(t)}},t.prototype.drawMultiPoint=function(e,t){if(this.image_){this.beginGeometry(e,t);var o=e.getFlatCoordinates(),n=e.getStride(),r=this.coordinates.length,s=this.appendFlatPointCoordinates(o,n);this.instructions.push([i.c.DRAW_IMAGE,r,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([i.c.DRAW_IMAGE,r,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(t)}},t.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,e.prototype.finish.call(this)},t.prototype.setImageStyle=function(e,t){var o=e.getAnchor(),n=e.getSize(),r=e.getHitDetectionImage(),i=e.getImage(this.pixelRatio),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=o[0],this.anchorY_=o[1],this.hitDetectionImage_=r,this.image_=i,this.height_=n[1],this.opacity_=e.getOpacity(),this.originX_=s[0]*this.imagePixelRatio_,this.originY_=s[1]*this.imagePixelRatio_,this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=n[0],this.declutterImageWithText_=t},t}(r.a);t.a=a},"./node_modules/ol/render/canvas/Immediate.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/geom/GeometryType.js"),i=o("./node_modules/ol/render/VectorContext.js"),s=o("./node_modules/ol/colorlike.js"),a=o("./node_modules/ol/transform.js"),l=o("./node_modules/ol/render/canvas.js"),c=o("./node_modules/ol/array.js"),u=o("./node_modules/ol/extent.js"),d=o("./node_modules/ol/geom/flat/transform.js"),h=o("./node_modules/ol/geom/SimpleGeometry.js"),p=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),f=function(e){function t(t,o,n,r,i,s,l){var c=e.call(this)||this;return c.context_=t,c.pixelRatio_=o,c.extent_=n,c.transform_=r,c.viewRotation_=i,c.squaredTolerance_=s,c.userTransform_=l,c.contextFillState_=null,c.contextStrokeState_=null,c.contextTextState_=null,c.fillState_=null,c.strokeState_=null,c.image_=null,c.imageAnchorX_=0,c.imageAnchorY_=0,c.imageHeight_=0,c.imageOpacity_=0,c.imageOriginX_=0,c.imageOriginY_=0,c.imageRotateWithView_=!1,c.imageRotation_=0,c.imageScale_=[0,0],c.imageWidth_=0,c.text_="",c.textOffsetX_=0,c.textOffsetY_=0,c.textRotateWithView_=!1,c.textRotation_=0,c.textScale_=[0,0],c.textFillState_=null,c.textStrokeState_=null,c.textState_=null,c.pixelCoordinates_=[],c.tmpLocalTransform_=Object(a.d)(),c}return p(t,e),t.prototype.drawImages_=function(e,t,o,n){if(this.image_){var r=Object(d.c)(e,t,o,n,this.transform_,this.pixelCoordinates_),i=this.context_,s=this.tmpLocalTransform_,l=i.globalAlpha;1!=this.imageOpacity_&&(i.globalAlpha=l*this.imageOpacity_);var c=this.imageRotation_;this.imageRotateWithView_&&(c+=this.viewRotation_);for(var u=0,h=r.length;u<h;u+=2){var p=r[u]-this.imageAnchorX_,f=r[u+1]-this.imageAnchorY_;if(0!==c||1!=this.imageScale_[0]||1!=this.imageScale_[1]){var m=p+this.imageAnchorX_,g=f+this.imageAnchorY_;Object(a.b)(s,m,g,1,1,c,-m,-g),i.setTransform.apply(i,s),i.translate(m,g),i.scale(this.imageScale_[0],this.imageScale_[1]),i.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),i.setTransform(1,0,0,1,0,0)}else i.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,p,f,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(i.globalAlpha=l)}},t.prototype.drawText_=function(e,t,o,n){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var r=Object(d.c)(e,t,o,n,this.transform_,this.pixelCoordinates_),i=this.context_,s=this.textRotation_;for(this.textRotateWithView_&&(s+=this.viewRotation_);t<o;t+=n){var l=r[t]+this.textOffsetX_,c=r[t+1]+this.textOffsetY_;if(0!==s||1!=this.textScale_[0]||1!=this.textScale_[1]){var u=Object(a.b)(this.tmpLocalTransform_,l,c,1,1,s,-l,-c);i.setTransform.apply(i,u),i.translate(l,c),i.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&i.strokeText(this.text_,0,0),this.textFillState_&&i.fillText(this.text_,0,0),i.setTransform(1,0,0,1,0,0)}else this.textStrokeState_&&i.strokeText(this.text_,l,c),this.textFillState_&&i.fillText(this.text_,l,c)}}},t.prototype.moveToLineTo_=function(e,t,o,n,r){var i=this.context_,s=Object(d.c)(e,t,o,n,this.transform_,this.pixelCoordinates_);i.moveTo(s[0],s[1]);var a=s.length;r&&(a-=2);for(var l=2;l<a;l+=2)i.lineTo(s[l],s[l+1]);return r&&i.closePath(),o},t.prototype.drawRings_=function(e,t,o,n){for(var r=0,i=o.length;r<i;++r)t=this.moveToLineTo_(e,t,o[r],n,!0);return t},t.prototype.drawCircle=function(e){if(Object(u.O)(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var t=Object(h.c)(e,this.transform_,this.pixelCoordinates_),o=t[2]-t[0],n=t[3]-t[1],r=Math.sqrt(o*o+n*n),i=this.context_;i.beginPath(),i.arc(t[0],t[1],r,0,2*Math.PI),this.fillState_&&i.fill(),this.strokeState_&&i.stroke()}""!==this.text_&&this.drawText_(e.getCenter(),0,2,2)}},t.prototype.setStyle=function(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())},t.prototype.setTransform=function(e){this.transform_=e},t.prototype.drawGeometry=function(e){switch(e.getType()){case r.a.POINT:this.drawPoint(e);break;case r.a.LINE_STRING:this.drawLineString(e);break;case r.a.POLYGON:this.drawPolygon(e);break;case r.a.MULTI_POINT:this.drawMultiPoint(e);break;case r.a.MULTI_LINE_STRING:this.drawMultiLineString(e);break;case r.a.MULTI_POLYGON:this.drawMultiPolygon(e);break;case r.a.GEOMETRY_COLLECTION:this.drawGeometryCollection(e);break;case r.a.CIRCLE:this.drawCircle(e)}},t.prototype.drawFeature=function(e,t){var o=t.getGeometryFunction()(e);o&&Object(u.O)(this.extent_,o.getExtent())&&(this.setStyle(t),this.drawGeometry(o))},t.prototype.drawGeometryCollection=function(e){for(var t=e.getGeometriesArray(),o=0,n=t.length;o<n;++o)this.drawGeometry(t[o])},t.prototype.drawPoint=function(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var t=e.getFlatCoordinates(),o=e.getStride();this.image_&&this.drawImages_(t,0,t.length,o),""!==this.text_&&this.drawText_(t,0,t.length,o)},t.prototype.drawMultiPoint=function(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var t=e.getFlatCoordinates(),o=e.getStride();this.image_&&this.drawImages_(t,0,t.length,o),""!==this.text_&&this.drawText_(t,0,t.length,o)},t.prototype.drawLineString=function(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Object(u.O)(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var t=this.context_,o=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(o,0,o.length,e.getStride(),!1),t.stroke()}if(""!==this.text_){var n=e.getFlatMidpoint();this.drawText_(n,0,2,2)}}},t.prototype.drawMultiLineString=function(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var t=e.getExtent();if(Object(u.O)(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var o=this.context_,n=e.getFlatCoordinates(),r=0,i=e.getEnds(),s=e.getStride();o.beginPath();for(var a=0,l=i.length;a<l;++a)r=this.moveToLineTo_(n,r,i[a],s,!1);o.stroke()}if(""!==this.text_){var c=e.getFlatMidpoints();this.drawText_(c,0,c.length,2)}}},t.prototype.drawPolygon=function(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Object(u.O)(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(""!==this.text_){var o=e.getFlatInteriorPoint();this.drawText_(o,0,2,2)}}},t.prototype.drawMultiPolygon=function(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Object(u.O)(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var t=this.context_,o=e.getOrientedFlatCoordinates(),n=0,r=e.getEndss(),i=e.getStride();t.beginPath();for(var s=0,a=r.length;s<a;++s){var l=r[s];n=this.drawRings_(o,n,l,i)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(""!==this.text_){var c=e.getFlatInteriorPoints();this.drawText_(c,0,c.length,2)}}},t.prototype.setContextFillState_=function(e){var t=this.context_,o=this.contextFillState_;o?o.fillStyle!=e.fillStyle&&(o.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})},t.prototype.setContextStrokeState_=function(e){var t=this.context_,o=this.contextStrokeState_;o?(o.lineCap!=e.lineCap&&(o.lineCap=e.lineCap,t.lineCap=e.lineCap),t.setLineDash&&(Object(c.b)(o.lineDash,e.lineDash)||t.setLineDash(o.lineDash=e.lineDash),o.lineDashOffset!=e.lineDashOffset&&(o.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset)),o.lineJoin!=e.lineJoin&&(o.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),o.lineWidth!=e.lineWidth&&(o.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),o.miterLimit!=e.miterLimit&&(o.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),o.strokeStyle!=e.strokeStyle&&(o.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})},t.prototype.setContextTextState_=function(e){var t=this.context_,o=this.contextTextState_,n=e.textAlign?e.textAlign:l.l;o?(o.font!=e.font&&(o.font=e.font,t.font=e.font),o.textAlign!=n&&(o.textAlign=n,t.textAlign=n),o.textBaseline!=e.textBaseline&&(o.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=n,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:n,textBaseline:e.textBaseline})},t.prototype.setFillStrokeStyle=function(e,t){var o=this;if(e){var n=e.getColor();this.fillState_={fillStyle:Object(s.a)(n||l.b)}}else this.fillState_=null;if(t){var r=t.getColor(),i=t.getLineCap(),a=t.getLineDash(),c=t.getLineDashOffset(),u=t.getLineJoin(),d=t.getWidth(),h=t.getMiterLimit(),p=a||l.e;this.strokeState_={lineCap:void 0!==i?i:l.d,lineDash:1===this.pixelRatio_?p:p.map((function(e){return e*o.pixelRatio_})),lineDashOffset:(c||l.f)*this.pixelRatio_,lineJoin:void 0!==u?u:l.g,lineWidth:(void 0!==d?d:l.h)*this.pixelRatio_,miterLimit:void 0!==h?h:l.i,strokeStyle:Object(s.a)(r||l.k)}}else this.strokeState_=null},t.prototype.setImageStyle=function(e){var t;if(e&&(t=e.getSize())){var o=e.getAnchor(),n=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=o[0]*this.pixelRatio_,this.imageAnchorY_=o[1]*this.pixelRatio_,this.imageHeight_=t[1]*this.pixelRatio_,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=n[0],this.imageOriginY_=n[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation(),this.imageScale_=e.getScaleArray(),this.imageWidth_=t[0]*this.pixelRatio_}else this.image_=null},t.prototype.setTextStyle=function(e){if(e){var t=e.getFill();if(t){var o=t.getColor();this.textFillState_={fillStyle:Object(s.a)(o||l.b)}}else this.textFillState_=null;var n=e.getStroke();if(n){var r=n.getColor(),i=n.getLineCap(),a=n.getLineDash(),c=n.getLineDashOffset(),u=n.getLineJoin(),d=n.getWidth(),h=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==i?i:l.d,lineDash:a||l.e,lineDashOffset:c||l.f,lineJoin:void 0!==u?u:l.g,lineWidth:void 0!==d?d:l.h,miterLimit:void 0!==h?h:l.i,strokeStyle:Object(s.a)(r||l.k)}}else this.textStrokeState_=null;var p=e.getFont(),f=e.getOffsetX(),m=e.getOffsetY(),g=e.getRotateWithView(),y=e.getRotation(),v=e.getScaleArray(),_=e.getText(),b=e.getTextAlign(),w=e.getTextBaseline();this.textState_={font:void 0!==p?p:l.c,textAlign:void 0!==b?b:l.l,textBaseline:void 0!==w?w:l.m},this.text_=void 0!==_?_:"",this.textOffsetX_=void 0!==f?this.pixelRatio_*f:0,this.textOffsetY_=void 0!==m?this.pixelRatio_*m:0,this.textRotateWithView_=void 0!==g&&g,this.textRotation_=void 0!==y?y:0,this.textScale_=[this.pixelRatio_*v[0],this.pixelRatio_*v[1]]}else this.text_=""},t}(i.a);t.a=f},"./node_modules/ol/render/canvas/Instruction.js":function(e,t,o){"use strict";o.d(t,"d",(function(){return r})),o.d(t,"e",(function(){return i})),o.d(t,"a",(function(){return s})),o.d(t,"b",(function(){return a}));var n={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},r=[n.FILL],i=[n.STROKE],s=[n.BEGIN_PATH],a=[n.CLOSE_PATH];t.c=n},"./node_modules/ol/render/canvas/LineStringBuilder.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/render/canvas/Builder.js"),i=o("./node_modules/ol/render/canvas/Instruction.js"),s=o("./node_modules/ol/render/canvas.js"),a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),l=function(e){function t(t,o,n,r){return e.call(this,t,o,n,r)||this}return a(t,e),t.prototype.drawFlatCoordinates_=function(e,t,o,n){var r=this.coordinates.length,s=this.appendFlatLineCoordinates(e,t,o,n,!1,!1),a=[i.c.MOVE_TO_LINE_TO,r,s];return this.instructions.push(a),this.hitDetectionInstructions.push(a),o},t.prototype.drawLineString=function(e,t){var o=this.state,n=o.strokeStyle,r=o.lineWidth;if(void 0!==n&&void 0!==r){this.updateStrokeStyle(o,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([i.c.SET_STROKE_STYLE,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,s.e,s.f],i.a);var a=e.getFlatCoordinates(),l=e.getStride();this.drawFlatCoordinates_(a,0,a.length,l),this.hitDetectionInstructions.push(i.e),this.endGeometry(t)}},t.prototype.drawMultiLineString=function(e,t){var o=this.state,n=o.strokeStyle,r=o.lineWidth;if(void 0!==n&&void 0!==r){this.updateStrokeStyle(o,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([i.c.SET_STROKE_STYLE,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,o.lineDash,o.lineDashOffset],i.a);for(var s=e.getEnds(),a=e.getFlatCoordinates(),l=e.getStride(),c=0,u=0,d=s.length;u<d;++u)c=this.drawFlatCoordinates_(a,c,s[u],l);this.hitDetectionInstructions.push(i.e),this.endGeometry(t)}},t.prototype.finish=function(){var t=this.state;return null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(i.e),this.reverseHitDetectionInstructions(),this.state=null,e.prototype.finish.call(this)},t.prototype.applyStroke=function(t){null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(i.e),t.lastStroke=this.coordinates.length),t.lastStroke=0,e.prototype.applyStroke.call(this,t),this.instructions.push(i.a)},t}(r.a);t.a=l},"./node_modules/ol/render/canvas/PolygonBuilder.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/render/canvas/Builder.js"),i=o("./node_modules/ol/render/canvas/Instruction.js"),s=o("./node_modules/ol/render/canvas.js"),a=o("./node_modules/ol/geom/flat/simplify.js"),l=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),c=function(e){function t(t,o,n,r){return e.call(this,t,o,n,r)||this}return l(t,e),t.prototype.drawFlatCoordinatess_=function(e,t,o,n){var r=this.state,s=void 0!==r.fillStyle,a=void 0!==r.strokeStyle,l=o.length;this.instructions.push(i.a),this.hitDetectionInstructions.push(i.a);for(var c=0;c<l;++c){var u=o[c],d=this.coordinates.length,h=this.appendFlatLineCoordinates(e,t,u,n,!0,!a),p=[i.c.MOVE_TO_LINE_TO,d,h];this.instructions.push(p),this.hitDetectionInstructions.push(p),a&&(this.instructions.push(i.b),this.hitDetectionInstructions.push(i.b)),t=u}return s&&(this.instructions.push(i.d),this.hitDetectionInstructions.push(i.d)),a&&(this.instructions.push(i.e),this.hitDetectionInstructions.push(i.e)),t},t.prototype.drawCircle=function(e,t){var o=this.state,n=o.fillStyle,r=o.strokeStyle;if(void 0!==n||void 0!==r){this.setFillStrokeStyles_(),this.beginGeometry(e,t),void 0!==o.fillStyle&&this.hitDetectionInstructions.push([i.c.SET_FILL_STYLE,s.b]),void 0!==o.strokeStyle&&this.hitDetectionInstructions.push([i.c.SET_STROKE_STYLE,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,o.lineDash,o.lineDashOffset]);var a=e.getFlatCoordinates(),l=e.getStride(),c=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,l,!1,!1);var u=[i.c.CIRCLE,c];this.instructions.push(i.a,u),this.hitDetectionInstructions.push(i.a,u),void 0!==o.fillStyle&&(this.instructions.push(i.d),this.hitDetectionInstructions.push(i.d)),void 0!==o.strokeStyle&&(this.instructions.push(i.e),this.hitDetectionInstructions.push(i.e)),this.endGeometry(t)}},t.prototype.drawPolygon=function(e,t){var o=this.state,n=o.fillStyle,r=o.strokeStyle;if(void 0!==n||void 0!==r){this.setFillStrokeStyles_(),this.beginGeometry(e,t),void 0!==o.fillStyle&&this.hitDetectionInstructions.push([i.c.SET_FILL_STYLE,s.b]),void 0!==o.strokeStyle&&this.hitDetectionInstructions.push([i.c.SET_STROKE_STYLE,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,o.lineDash,o.lineDashOffset]);var a=e.getEnds(),l=e.getOrientedFlatCoordinates(),c=e.getStride();this.drawFlatCoordinatess_(l,0,a,c),this.endGeometry(t)}},t.prototype.drawMultiPolygon=function(e,t){var o=this.state,n=o.fillStyle,r=o.strokeStyle;if(void 0!==n||void 0!==r){this.setFillStrokeStyles_(),this.beginGeometry(e,t),void 0!==o.fillStyle&&this.hitDetectionInstructions.push([i.c.SET_FILL_STYLE,s.b]),void 0!==o.strokeStyle&&this.hitDetectionInstructions.push([i.c.SET_STROKE_STYLE,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,o.lineDash,o.lineDashOffset]);for(var a=e.getEndss(),l=e.getOrientedFlatCoordinates(),c=e.getStride(),u=0,d=0,h=a.length;d<h;++d)u=this.drawFlatCoordinatess_(l,u,a[d],c);this.endGeometry(t)}},t.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(0!==t)for(var o=this.coordinates,n=0,r=o.length;n<r;++n)o[n]=Object(a.i)(o[n],t);return e.prototype.finish.call(this)},t.prototype.setFillStrokeStyles_=function(){var e=this.state;void 0!==e.fillStyle&&this.updateFillStyle(e,this.createFill),void 0!==e.strokeStyle&&this.updateStrokeStyle(e,this.applyStroke)},t}(r.a);t.a=c},"./node_modules/ol/render/canvas/TextBuilder.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return f}));var n,r=o("./node_modules/ol/render/canvas/Builder.js"),i=o("./node_modules/ol/render/canvas/Instruction.js"),s=o("./node_modules/ol/geom/GeometryType.js"),a=o("./node_modules/ol/style/TextPlacement.js"),l=o("./node_modules/ol/colorlike.js"),c=o("./node_modules/ol/render/canvas.js"),u=o("./node_modules/ol/util.js"),d=o("./node_modules/ol/extent.js"),h=o("./node_modules/ol/geom/flat/straightchunk.js"),p=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),f={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},m=function(e){function t(t,o,n,r){var i=e.call(this,t,o,n,r)||this;return i.labels_=null,i.text_="",i.textOffsetX_=0,i.textOffsetY_=0,i.textRotateWithView_=void 0,i.textRotation_=0,i.textFillState_=null,i.fillStates={},i.textStrokeState_=null,i.strokeStates={},i.textState_={},i.textStates={},i.textKey_="",i.fillKey_="",i.strokeKey_="",i.declutterImageWithText_=void 0,i}return p(t,e),t.prototype.finish=function(){var t=e.prototype.finish.call(this);return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t},t.prototype.drawText=function(e,t){var o=this.textFillState_,n=this.textStrokeState_,r=this.textState_;if(""!==this.text_&&r&&(o||n)){var l=this.coordinates,u=l.length,p=e.getType(),f=null,m=e.getStride();if(r.placement!==a.a.LINE||p!=s.a.LINE_STRING&&p!=s.a.MULTI_LINE_STRING&&p!=s.a.POLYGON&&p!=s.a.MULTI_POLYGON){var g=r.overflow?null:[];switch(p){case s.a.POINT:case s.a.MULTI_POINT:f=e.getFlatCoordinates();break;case s.a.LINE_STRING:f=e.getFlatMidpoint();break;case s.a.CIRCLE:f=e.getCenter();break;case s.a.MULTI_LINE_STRING:f=e.getFlatMidpoints(),m=2;break;case s.a.POLYGON:f=e.getFlatInteriorPoint(),r.overflow||g.push(f[2]/this.resolution),m=3;break;case s.a.MULTI_POLYGON:var y=e.getFlatInteriorPoints();f=[];for(P=0,T=y.length;P<T;P+=3)r.overflow||g.push(y[P+2]/this.resolution),f.push(y[P],y[P+1]);if(0===f.length)return;m=2}if((G=this.appendFlatPointCoordinates(f,m))===u)return;if(g&&(G-u)/2!=f.length/m){var v=u/2;g=g.filter((function(e,t){var o=l[2*(v+t)]===f[t*m]&&l[2*(v+t)+1]===f[t*m+1];return o||--v,o}))}this.saveTextStates_(),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),r.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),r.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t);var _=r.padding;if(_!=c.j&&(r.scale[0]<0||r.scale[1]<0)){var b=r.padding[0],w=r.padding[1],E=r.padding[2],O=r.padding[3];r.scale[0]<0&&(w=-w,O=-O),r.scale[1]<0&&(b=-b,E=-E),_=[b,w,E,O]}var S=this.pixelRatio;this.instructions.push([i.c.DRAW_IMAGE,u,G,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterImageWithText_,_==c.j?c.j:_.map((function(e){return e*S})),!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,g]);var x=1/S;this.hitDetectionInstructions.push([i.c.DRAW_IMAGE,u,G,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[x,x],NaN,this.declutterImageWithText_,_,!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,g]),this.endGeometry(t)}else{if(!Object(d.O)(this.getBufferedMaxExtent(),e.getExtent()))return;var C=void 0;if(f=e.getFlatCoordinates(),p==s.a.LINE_STRING)C=[f.length];else if(p==s.a.MULTI_LINE_STRING)C=e.getEnds();else if(p==s.a.POLYGON)C=e.getEnds().slice(0,1);else if(p==s.a.MULTI_POLYGON){var j=e.getEndss();C=[];for(var P=0,T=j.length;P<T;++P)C.push(j[P][0])}this.beginGeometry(e,t);for(var A=r.textAlign,M=0,I=void 0,R=0,L=C.length;R<L;++R){if(null==A){var k=Object(h.a)(r.maxAngle,f,M,C[R],m);M=k[0],I=k[1]}else I=C[R];for(var P=M;P<I;P+=m)l.push(f[P],f[P+1]);var G=l.length;M=C[R],this.drawChars_(u,G),u=G}this.endGeometry(t)}}},t.prototype.saveTextStates_=function(){var e=this.textStrokeState_,t=this.textState_,o=this.textFillState_,n=this.strokeKey_;e&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));var r=this.textKey_;r in this.textStates||(this.textStates[r]={font:t.font,textAlign:t.textAlign||c.l,textBaseline:t.textBaseline||c.m,scale:t.scale});var i=this.fillKey_;o&&(i in this.fillStates||(this.fillStates[i]={fillStyle:o.fillStyle}))},t.prototype.drawChars_=function(e,t){var o=this.textStrokeState_,n=this.textState_,r=this.strokeKey_,s=this.textKey_,a=this.fillKey_;this.saveTextStates_();var l=this.pixelRatio,c=f[n.textBaseline],u=this.textOffsetY_*l,d=this.text_,h=o?o.lineWidth*Math.abs(n.scale[0])/2:0;this.instructions.push([i.c.DRAW_CHARS,e,t,c,n.overflow,a,n.maxAngle,l,u,r,h*l,d,s,1]),this.hitDetectionInstructions.push([i.c.DRAW_CHARS,e,t,c,n.overflow,a,n.maxAngle,1,u,r,h,d,s,1/l])},t.prototype.setTextStyle=function(e,t){var o,n,r;if(e){var i=e.getFill();i?((n=this.textFillState_)||(n={},this.textFillState_=n),n.fillStyle=Object(l.a)(i.getColor()||c.b)):(n=null,this.textFillState_=n);var s=e.getStroke();if(s){(r=this.textStrokeState_)||(r={},this.textStrokeState_=r);var a=s.getLineDash(),d=s.getLineDashOffset(),h=s.getWidth(),p=s.getMiterLimit();r.lineCap=s.getLineCap()||c.d,r.lineDash=a?a.slice():c.e,r.lineDashOffset=void 0===d?c.f:d,r.lineJoin=s.getLineJoin()||c.g,r.lineWidth=void 0===h?c.h:h,r.miterLimit=void 0===p?c.i:p,r.strokeStyle=Object(l.a)(s.getColor()||c.k)}else r=null,this.textStrokeState_=r;o=this.textState_;var f=e.getFont()||c.c;Object(c.t)(f);var m=e.getScaleArray();o.overflow=e.getOverflow(),o.font=f,o.maxAngle=e.getMaxAngle(),o.placement=e.getPlacement(),o.textAlign=e.getTextAlign(),o.textBaseline=e.getTextBaseline()||c.m,o.backgroundFill=e.getBackgroundFill(),o.backgroundStroke=e.getBackgroundStroke(),o.padding=e.getPadding()||c.j,o.scale=void 0===m?[1,1]:m;var g=e.getOffsetX(),y=e.getOffsetY(),v=e.getRotateWithView(),_=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=void 0===g?0:g,this.textOffsetY_=void 0===y?0:y,this.textRotateWithView_=void 0!==v&&v,this.textRotation_=void 0===_?0:_,this.strokeKey_=r?("string"==typeof r.strokeStyle?r.strokeStyle:Object(u.c)(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=o.font+o.scale+(o.textAlign||"?")+(o.textBaseline||"?"),this.fillKey_=n?"string"==typeof n.fillStyle?n.fillStyle:"|"+Object(u.c)(n.fillStyle):""}else this.text_="";this.declutterImageWithText_=t},t}(r.a);t.b=m},"./node_modules/ol/render/canvas/hitdetect.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return d})),o.d(t,"b",(function(){return h})),o.d(t,"c",(function(){return p}));var n=o("./node_modules/ol/render/canvas/Immediate.js"),r=o("./node_modules/ol/geom/GeometryType.js"),i=o("./node_modules/ol/style/IconAnchorUnits.js"),s=o("./node_modules/ol/style/Icon.js"),a=o("./node_modules/ol/math.js"),l=o("./node_modules/ol/dom.js"),c=o("./node_modules/ol/extent.js"),u=o("./node_modules/ol/array.js"),d=.5;function h(e,t,o,a,h,p,f){var m=e[0]*d,g=e[1]*d,y=Object(l.a)(m,g);y.imageSmoothingEnabled=!1;for(var v=y.canvas,_=new n.a(y,d,h,null,f),b=o.length,w=Math.floor(16777215/b),E={},O=1;O<=b;++O){var S=o[O-1],x=S.getStyleFunction()||a;if(a){var C=x(S,p);if(C){Array.isArray(C)||(C=[C]);for(var j="#"+("000000"+(O*w).toString(16)).slice(-6),P=0,T=C.length;P<T;++P){var A=C[P],M=A.getGeometryFunction()(S);if(M&&Object(c.O)(h,M.getExtent())){var I=A.clone(),R=I.getFill();R&&R.setColor(j);var L=I.getStroke();L&&(L.setColor(j),L.setLineDash(null)),I.setText(void 0);var k=A.getImage();if(k&&0!==k.getOpacity()){var G=k.getImageSize();if(!G)continue;var N=Object(l.a)(G[0],G[1],void 0,{alpha:!1}),D=N.canvas;N.fillStyle=j,N.fillRect(0,0,D.width,D.height),I.setImage(new s.a({img:D,imgSize:G,anchor:k.getAnchor(),anchorXUnits:i.a.PIXELS,anchorYUnits:i.a.PIXELS,offset:k.getOrigin(),opacity:1,size:k.getSize(),scale:k.getScale(),rotation:k.getRotation(),rotateWithView:k.getRotateWithView()}))}var F=I.getZIndex()||0;(z=E[F])||(z={},E[F]=z,z[r.a.POLYGON]=[],z[r.a.CIRCLE]=[],z[r.a.LINE_STRING]=[],z[r.a.POINT]=[]),z[M.getType().replace("Multi","")].push(M,I)}}}}}for(var U=Object.keys(E).map(Number).sort(u.i),B=(O=0,U.length);O<B;++O){var z=E[U[O]];for(var V in z){var W=z[V];for(P=0,T=W.length;P<T;P+=2){_.setStyle(W[P+1]);for(var q=0,H=t.length;q<H;++q)_.setTransform(t[q]),_.drawGeometry(W[P])}}}return y.getImageData(0,0,v.width,v.height)}function p(e,t,o){var n=[];if(o){var r=Math.floor(Math.round(e[0])*d),i=Math.floor(Math.round(e[1])*d),s=4*(Object(a.a)(r,0,o.width-1)+Object(a.a)(i,0,o.height-1)*o.width),l=o.data[s],c=o.data[s+1],u=o.data[s+2]+256*(c+256*l),h=Math.floor(16777215/t.length);u&&u%h==0&&n.push(t[u/h-1])}return n}},"./node_modules/ol/renderer/Composite.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/renderer/Map.js"),i=o("./node_modules/ol/ObjectEventType.js"),s=o("./node_modules/ol/render/Event.js"),a=o("./node_modules/ol/render/EventType.js"),l=o("./node_modules/ol/source/State.js"),c=o("./node_modules/ol/css.js"),u=o("./node_modules/ol/render/canvas.js"),d=o("./node_modules/ol/layer/Layer.js"),h=o("./node_modules/ol/events.js"),p=o("./node_modules/ol/dom.js"),f=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),m=function(e){function t(t){var o=e.call(this,t)||this;o.fontChangeListenerKey_=Object(h.a)(u.a,i.a.PROPERTYCHANGE,t.redrawText.bind(t)),o.element_=document.createElement("div");var n=o.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",o.element_.className=c.e+" ol-layers";var r=t.getViewport();return r.insertBefore(o.element_,r.firstChild||null),o.children_=[],o.renderedVisible_=!0,o}return f(t,e),t.prototype.dispatchRenderEvent=function(e,t){var o=this.getMap();if(o.hasListener(e)){var n=new s.a(e,void 0,t);o.dispatchEvent(n)}},t.prototype.disposeInternal=function(){Object(h.c)(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),e.prototype.disposeInternal.call(this)},t.prototype.renderFrame=function(e){if(e){this.calculateMatrices2D(e),this.dispatchRenderEvent(a.a.PRECOMPOSE,e);var t=e.layerStatesArray.sort((function(e,t){return e.zIndex-t.zIndex})),o=e.viewState;this.children_.length=0;for(var n=[],r=null,i=0,s=t.length;i<s;++i){var c=t[i];if(e.layerIndex=i,Object(d.b)(c,o)&&(c.sourceState==l.a.READY||c.sourceState==l.a.UNDEFINED)){var u=c.layer,h=u.render(e,r);h&&(h!==r&&(this.children_.push(h),r=h),"getDeclutter"in u&&n.push(u))}}for(i=n.length-1;i>=0;--i)n[i].renderDeclutter(e);Object(p.f)(this.element_,this.children_),this.dispatchRenderEvent(a.a.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},t.prototype.forEachLayerAtPixel=function(e,t,o,n,r){for(var i=t.viewState,s=t.layerStatesArray,a=s.length-1;a>=0;--a){var l=s[a],c=l.layer;if(c.hasRenderer()&&Object(d.b)(l,i)&&r(c)){var u=c.getRenderer().getDataAtPixel(e,t,o);if(u){var h=n(c,u);if(h)return h}}}},t}(r.a);t.a=m},"./node_modules/ol/renderer/Layer.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/events/EventType.js"),i=o("./node_modules/ol/ImageState.js"),s=o("./node_modules/ol/Observable.js"),a=o("./node_modules/ol/source/State.js"),l=o("./node_modules/ol/util.js"),c=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),u=function(e){function t(t){var o=e.call(this)||this;return o.boundHandleImageChange_=o.handleImageChange_.bind(o),o.layer_=t,o.declutterExecutorGroup=null,o}return c(t,e),t.prototype.getFeatures=function(e){return Object(l.b)()},t.prototype.prepareFrame=function(e){return Object(l.b)()},t.prototype.renderFrame=function(e,t){return Object(l.b)()},t.prototype.loadedTileCallback=function(e,t,o){e[t]||(e[t]={}),e[t][o.tileCoord.toString()]=o},t.prototype.createLoadedTileFinder=function(e,t,o){return function(n,r){var i=this.loadedTileCallback.bind(this,o,n);return e.forEachLoadedTile(t,n,r,i)}.bind(this)},t.prototype.forEachFeatureAtCoordinate=function(e,t,o,n,r){},t.prototype.getDataAtPixel=function(e,t,o){return null},t.prototype.getLayer=function(){return this.layer_},t.prototype.handleFontsChanged=function(){},t.prototype.handleImageChange_=function(e){e.target.getState()===i.a.LOADED&&this.renderIfReadyAndVisible()},t.prototype.loadImage=function(e){var t=e.getState();return t!=i.a.LOADED&&t!=i.a.ERROR&&e.addEventListener(r.a.CHANGE,this.boundHandleImageChange_),t==i.a.IDLE&&(e.load(),t=e.getState()),t==i.a.LOADED},t.prototype.renderIfReadyAndVisible=function(){var e=this.getLayer();e.getVisible()&&e.getSourceState()==a.a.READY&&e.changed()},t}(s.a);t.a=u},"./node_modules/ol/renderer/Map.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/Disposable.js"),i=o("./node_modules/ol/functions.js"),s=o("./node_modules/ol/util.js"),a=o("./node_modules/ol/transform.js"),l=o("./node_modules/ol/extent.js"),c=o("./node_modules/ol/style/IconImageCache.js"),u=o("./node_modules/ol/layer/Layer.js"),d=o("./node_modules/ol/coordinate.js"),h=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),p=function(e){function t(t){var o=e.call(this)||this;return o.map_=t,o}return h(t,e),t.prototype.dispatchRenderEvent=function(e,t){Object(s.b)()},t.prototype.calculateMatrices2D=function(e){var t=e.viewState,o=e.coordinateToPixelTransform,n=e.pixelToCoordinateTransform;Object(a.b)(o,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),Object(a.g)(n,o)},t.prototype.forEachFeatureAtCoordinate=function(e,t,o,n,r,i,s,a){var c,h=t.viewState;function p(e,t,o,n){return r.call(i,t,e?o:null,n)}var f=h.projection,m=Object(d.p)(e.slice(),f),g=[[0,0]];if(f.canWrapX()&&n){var y=f.getExtent(),v=Object(l.N)(y);g.push([-v,0],[v,0])}for(var _=t.layerStatesArray,b=_.length,w=[],E=[],O=0;O<g.length;O++)for(var S=b-1;S>=0;--S){var x=_[S],C=x.layer;if(C.hasRenderer()&&Object(u.b)(x,h)&&s.call(a,C)){var j=C.getRenderer(),P=C.getSource();if(j&&P){var T=P.getWrapX()?m:e,A=p.bind(null,x.managed);E[0]=T[0]+g[O][0],E[1]=T[1]+g[O][1],c=j.forEachFeatureAtCoordinate(E,t,o,A,w)}if(c)return c}}if(0!==w.length){var M=1/w.length;return w.forEach((function(e,t){return e.distanceSq+=t*M})),w.sort((function(e,t){return e.distanceSq-t.distanceSq})),w.some((function(e){return c=e.callback(e.feature,e.layer,e.geometry)})),c}},t.prototype.forEachLayerAtPixel=function(e,t,o,n,r){return Object(s.b)()},t.prototype.hasFeatureAtCoordinate=function(e,t,o,n,r,s){return void 0!==this.forEachFeatureAtCoordinate(e,t,o,n,i.b,this,r,s)},t.prototype.getMap=function(){return this.map_},t.prototype.renderFrame=function(e){Object(s.b)()},t.prototype.scheduleExpireIconCache=function(e){c.b.canExpireCache()&&e.postRenderFunctions.push(f)},t}(r.a);function f(e,t){c.b.expire()}t.a=p},"./node_modules/ol/renderer/canvas/ImageLayer.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/renderer/canvas/Layer.js"),i=o("./node_modules/ol/ViewHint.js"),s=o("./node_modules/ol/reproj/common.js"),a=o("./node_modules/ol/obj.js"),l=o("./node_modules/ol/transform.js"),c=o("./node_modules/ol/extent.js"),u=o("./node_modules/ol/proj.js"),d=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),h=function(e){function t(t){var o=e.call(this,t)||this;return o.image_=null,o}return d(t,e),t.prototype.getImage=function(){return this.image_?this.image_.getImage():null},t.prototype.prepareFrame=function(e){var t=e.layerStatesArray[e.layerIndex],o=e.pixelRatio,n=e.viewState,r=n.resolution,a=this.getLayer().getSource(),l=e.viewHints,d=e.extent;if(void 0!==t.extent&&(d=Object(c.H)(d,Object(u.r)(t.extent,n.projection))),!l[i.a.ANIMATING]&&!l[i.a.INTERACTING]&&!Object(c.Q)(d))if(a){var h=n.projection;if(!s.a){var p=a.getProjection();p&&(h=p)}var f=a.getImage(d,r,o,h);f&&this.loadImage(f)&&(this.image_=f)}else this.image_=null;return!!this.image_},t.prototype.renderFrame=function(e,t){var o=this.image_,n=o.getExtent(),r=o.getResolution(),i=o.getPixelRatio(),s=e.layerStatesArray[e.layerIndex],d=e.pixelRatio,h=e.viewState,p=h.center,f=h.resolution,m=e.size,g=d*r/(f*i),y=Math.round(m[0]*d),v=Math.round(m[1]*d),_=h.rotation;if(_){var b=Math.round(Math.sqrt(y*y+v*v));y=b,v=b}Object(l.b)(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/d,1/d,_,-y/2,-v/2),Object(l.g)(this.inversePixelTransform,this.pixelTransform);var w=Object(l.o)(this.pixelTransform);this.useContainer(t,w,s.opacity);var E=this.context,O=E.canvas;O.width!=y||O.height!=v?(O.width=y,O.height=v):this.containerReused||E.clearRect(0,0,y,v);var S=!1,x=!0;if(s.extent){var C=Object(u.r)(s.extent,h.projection);(S=(x=Object(c.O)(C,e.extent))&&!Object(c.h)(C,e.extent))&&this.clipUnrotated(E,e,C)}var j=o.getImage(),P=Object(l.b)(this.tempTransform,y/2,v/2,g,g,0,i*(n[0]-p[0])/r,i*(p[1]-n[3])/r);this.renderedResolution=r*d/i;var T=j.width*P[0],A=j.height*P[3];if(Object(a.a)(E,this.getLayer().getSource().getContextOptions()),this.preRender(E,e),x&&T>=.5&&A>=.5){var M=P[4],I=P[5],R=s.opacity,L=void 0;1!==R&&(L=E.globalAlpha,E.globalAlpha=R),E.drawImage(j,0,0,+j.width,+j.height,Math.round(M),Math.round(I),Math.round(T),Math.round(A)),1!==R&&(E.globalAlpha=L)}return this.postRender(E,e),S&&E.restore(),w!==O.style.transform&&(O.style.transform=w),this.container},t}(r.a);t.a=h},"./node_modules/ol/renderer/canvas/Layer.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/renderer/Layer.js"),i=o("./node_modules/ol/render/Event.js"),s=o("./node_modules/ol/render/EventType.js"),a=o("./node_modules/ol/transform.js"),l=o("./node_modules/ol/extent.js"),c=o("./node_modules/ol/dom.js"),u=o("./node_modules/ol/css.js"),d=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),h=function(e){function t(t){var o=e.call(this,t)||this;return o.container=null,o.renderedResolution,o.tempTransform=Object(a.d)(),o.pixelTransform=Object(a.d)(),o.inversePixelTransform=Object(a.d)(),o.context=null,o.containerReused=!1,o}return d(t,e),t.prototype.useContainer=function(e,t,o){var n,r,i=this.getLayer().getClassName();e&&e.style.opacity===Object(u.g)(o)&&e.className===i&&((a=e.firstElementChild)instanceof HTMLCanvasElement&&(r=a.getContext("2d")));if(r&&r.canvas.style.transform===t?(this.container=e,this.context=r,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(n=document.createElement("div")).className=i;var s=n.style;s.position="absolute",s.width="100%",s.height="100%";var a=(r=Object(c.a)()).canvas;n.appendChild(a),(s=a.style).position="absolute",s.left="0",s.transformOrigin="top left",this.container=n,this.context=r}},t.prototype.clipUnrotated=function(e,t,o){var n=Object(l.L)(o),r=Object(l.M)(o),i=Object(l.B)(o),s=Object(l.A)(o);Object(a.a)(t.coordinateToPixelTransform,n),Object(a.a)(t.coordinateToPixelTransform,r),Object(a.a)(t.coordinateToPixelTransform,i),Object(a.a)(t.coordinateToPixelTransform,s);var c=this.inversePixelTransform;Object(a.a)(c,n),Object(a.a)(c,r),Object(a.a)(c,i),Object(a.a)(c,s),e.save(),e.beginPath(),e.moveTo(Math.round(n[0]),Math.round(n[1])),e.lineTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.clip()},t.prototype.dispatchRenderEvent_=function(e,t,o){var n=this.getLayer();if(n.hasListener(e)){var r=new i.a(e,this.inversePixelTransform,o,t);n.dispatchEvent(r)}},t.prototype.preRender=function(e,t){this.dispatchRenderEvent_(s.a.PRERENDER,e,t)},t.prototype.postRender=function(e,t){this.dispatchRenderEvent_(s.a.POSTRENDER,e,t)},t.prototype.getRenderTransform=function(e,t,o,n,r,i,s){var l=r/2,c=i/2,u=n/t,d=-u,h=-e[0]+s,p=-e[1];return Object(a.b)(this.tempTransform,l,c,u,d,-o,h,p)},t.prototype.getDataAtPixel=function(e,t,o){var n,r=Object(a.a)(this.inversePixelTransform,e.slice()),i=this.context,s=this.getLayer().getExtent();if(s){var c=Object(a.a)(t.pixelToCoordinateTransform,e.slice());if(!Object(l.g)(s,c))return null}try{var u=Math.round(r[0]),d=Math.round(r[1]),h=document.createElement("canvas"),p=h.getContext("2d");h.width=1,h.height=1,p.clearRect(0,0,1,1),p.drawImage(i.canvas,u,d,1,1,0,0,1,1),n=p.getImageData(0,0,1,1).data}catch(e){return"SecurityError"===e.name?new Uint8Array:n}return 0===n[3]?null:n},t}(r.a);t.a=h},"./node_modules/ol/renderer/canvas/TileLayer.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/renderer/canvas/Layer.js"),i=o("./node_modules/ol/TileRange.js"),s=o("./node_modules/ol/TileState.js"),a=o("./node_modules/ol/transform.js"),l=o("./node_modules/ol/obj.js"),c=o("./node_modules/ol/extent.js"),u=o("./node_modules/ol/css.js"),d=o("./node_modules/ol/proj.js"),h=o("./node_modules/ol/util.js"),p=o("./node_modules/ol/array.js"),f=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),m=function(e){function t(t){var o=e.call(this,t)||this;return o.extentChanged=!0,o.renderedExtent_=null,o.renderedPixelRatio,o.renderedProjection=null,o.renderedRevision,o.renderedTiles=[],o.newTiles_=!1,o.tmpExtent=Object(c.k)(),o.tmpTileRange_=new i.b(0,0,0,0),o}return f(t,e),t.prototype.isDrawableTile=function(e){var t=this.getLayer(),o=e.getState(),n=t.getUseInterimTilesOnError();return o==s.a.LOADED||o==s.a.EMPTY||o==s.a.ERROR&&!n},t.prototype.getTile=function(e,t,o,n){var r=n.pixelRatio,i=n.viewState.projection,a=this.getLayer(),l=a.getSource().getTile(e,t,o,r,i);return l.getState()==s.a.ERROR&&(a.getUseInterimTilesOnError()?a.getPreload()>0&&(this.newTiles_=!0):l.setState(s.a.LOADED)),this.isDrawableTile(l)||(l=l.getInterimTile()),l},t.prototype.loadedTileCallback=function(t,o,n){return!!this.isDrawableTile(n)&&e.prototype.loadedTileCallback.call(this,t,o,n)},t.prototype.prepareFrame=function(e){return!!this.getLayer().getSource()},t.prototype.renderFrame=function(e,t){var o=e.layerStatesArray[e.layerIndex],n=e.viewState,r=n.projection,i=n.resolution,f=n.center,m=n.rotation,g=e.pixelRatio,y=this.getLayer(),v=y.getSource(),_=v.getRevision(),b=v.getTileGridForProjection(r),w=b.getZForResolution(i,v.zDirection),E=b.getResolution(w),O=e.extent,S=o.extent&&Object(d.r)(o.extent,r);S&&(O=Object(c.H)(O,Object(d.r)(o.extent,r)));var x=v.getTilePixelRatio(g),C=Math.round(e.size[0]*x),j=Math.round(e.size[1]*x);if(m){var P=Math.round(Math.sqrt(C*C+j*j));C=P,j=P}var T=E*C/2/x,A=E*j/2/x,M=[f[0]-T,f[1]-A,f[0]+T,f[1]+A],I=b.getTileRangeForExtentAndZ(O,w),R={};R[w]={};var L=this.createLoadedTileFinder(v,r,R),k=this.tmpExtent,G=this.tmpTileRange_;this.newTiles_=!1;for(var N=I.minX;N<=I.maxX;++N)for(var D=I.minY;D<=I.maxY;++D){var F=this.getTile(w,N,D,e);if(this.isDrawableTile(F)){var U=Object(h.c)(this);if(F.getState()==s.a.LOADED){R[w][F.tileCoord.toString()]=F;var B=F.inTransition(U);this.newTiles_||!B&&-1!==this.renderedTiles.indexOf(F)||(this.newTiles_=!0)}if(1===F.getAlpha(U,e.time))continue}var z=b.getTileCoordChildTileRange(F.tileCoord,G,k),V=!1;z&&(V=L(w+1,z)),V||b.forEachTileCoordParentTileRange(F.tileCoord,L,G,k)}var W=E/i;Object(a.b)(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/x,1/x,m,-C/2,-j/2);var q=Object(a.o)(this.pixelTransform);this.useContainer(t,q,o.opacity);var H=this.context,Y=H.canvas;Object(a.g)(this.inversePixelTransform,this.pixelTransform),Object(a.b)(this.tempTransform,C/2,j/2,W,W,0,-C/2,-j/2),Y.width!=C||Y.height!=j?(Y.width=C,Y.height=j):this.containerReused||H.clearRect(0,0,C,j),S&&this.clipUnrotated(H,e,S),Object(l.a)(H,v.getContextOptions()),this.preRender(H,e),this.renderedTiles.length=0;var X,Z,K,J=Object.keys(R).map(Number);J.sort(p.i),1!==o.opacity||this.containerReused&&!v.getOpaque(e.viewState.projection)?(X=[],Z=[]):J=J.reverse();for(var Q=J.length-1;Q>=0;--Q){var $=J[Q],ee=v.getTilePixelSize($,g,r),te=b.getResolution($)/E,oe=ee[0]*te*W,ne=ee[1]*te*W,re=b.getTileCoordForCoordAndZ(Object(c.L)(M),$),ie=b.getTileCoordExtent(re),se=Object(a.a)(this.tempTransform,[x*(ie[0]-M[0])/E,x*(M[3]-ie[3])/E]),ae=x*v.getGutterForProjection(r),le=R[$];for(var ce in le){var ue=(F=le[ce]).tileCoord,de=re[1]-ue[1],he=Math.round(se[0]-(de-1)*oe),pe=re[2]-ue[2],fe=Math.round(se[1]-(pe-1)*ne),me=he-(N=Math.round(se[0]-de*oe)),ge=fe-(D=Math.round(se[1]-pe*ne)),ye=w===$;if(!(B=ye&&1!==F.getAlpha(Object(h.c)(this),e.time)))if(X){H.save(),K=[N,D,N+me,D,N+me,D+ge,N,D+ge];for(var ve=0,_e=X.length;ve<_e;++ve)if(w!==$&&$<Z[ve]){var be=X[ve];H.beginPath(),H.moveTo(K[0],K[1]),H.lineTo(K[2],K[3]),H.lineTo(K[4],K[5]),H.lineTo(K[6],K[7]),H.moveTo(be[6],be[7]),H.lineTo(be[4],be[5]),H.lineTo(be[2],be[3]),H.lineTo(be[0],be[1]),H.clip()}X.push(K),Z.push($)}else H.clearRect(N,D,me,ge);this.drawTileImage(F,e,N,D,me,ge,ae,ye),X&&!B?(H.restore(),this.renderedTiles.unshift(F)):this.renderedTiles.push(F),this.updateUsedTiles(e.usedTiles,v,F)}}this.renderedRevision=_,this.renderedResolution=E,this.extentChanged=!this.renderedExtent_||!Object(c.r)(this.renderedExtent_,M),this.renderedExtent_=M,this.renderedPixelRatio=g,this.renderedProjection=r,this.manageTilePyramid(e,v,b,g,r,O,w,y.getPreload()),this.scheduleExpireCache(e,v),this.postRender(H,e),o.extent&&H.restore(),q!==Y.style.transform&&(Y.style.transform=q);var we=Object(u.g)(o.opacity),Ee=this.container;return we!==Ee.style.opacity&&(Ee.style.opacity=we),this.container},t.prototype.drawTileImage=function(e,t,o,n,r,i,s,a){var l=this.getTileImage(e);if(l){var c=Object(h.c)(this),u=a?e.getAlpha(c,t.time):1,d=u!==this.context.globalAlpha;d&&(this.context.save(),this.context.globalAlpha=u),this.context.drawImage(l,s,s,l.width-2*s,l.height-2*s,o,n,r,i),d&&this.context.restore(),1!==u?t.animate=!0:a&&e.endTransition(c)}},t.prototype.getImage=function(){var e=this.context;return e?e.canvas:null},t.prototype.getTileImage=function(e){return e.getImage()},t.prototype.scheduleExpireCache=function(e,t){if(t.canExpireCache()){var o=function(e,t,o){var n=Object(h.c)(e);n in o.usedTiles&&e.expireCache(o.viewState.projection,o.usedTiles[n])}.bind(null,t);e.postRenderFunctions.push(o)}},t.prototype.updateUsedTiles=function(e,t,o){var n=Object(h.c)(t);n in e||(e[n]={}),e[n][o.getKey()]=!0},t.prototype.manageTilePyramid=function(e,t,o,n,r,i,a,l,c){var u=Object(h.c)(t);u in e.wantedTiles||(e.wantedTiles[u]={});var d,p,f,m,g,y,v=e.wantedTiles[u],_=e.tileQueue,b=0;for(y=o.getMinZoom();y<=a;++y)for(p=o.getTileRangeForExtentAndZ(i,y,p),f=o.getResolution(y),m=p.minX;m<=p.maxX;++m)for(g=p.minY;g<=p.maxY;++g)a-y<=l?(++b,(d=t.getTile(y,m,g,n,r)).getState()==s.a.IDLE&&(v[d.getKey()]=!0,_.isKeyQueued(d.getKey())||_.enqueue([d,u,o.getTileCoordCenter(d.tileCoord),f])),void 0!==c&&c(d)):t.useTile(y,m,g,r);t.updateCacheSize(b,r)},t}(r.a);m.prototype.getLayer,t.a=m},"./node_modules/ol/renderer/canvas/VectorLayer.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/render/canvas/BuilderGroup.js"),i=o("./node_modules/ol/renderer/canvas/Layer.js"),s=o("./node_modules/ol/render/canvas/ExecutorGroup.js"),a=o("./node_modules/ol/ViewHint.js"),l=o("./node_modules/ol/render/canvas/hitdetect.js"),c=o("./node_modules/ol/transform.js"),u=o("./node_modules/ol/extent.js"),d=o("./node_modules/ol/css.js"),h=o("./node_modules/ol/renderer/vector.js"),p=o("./node_modules/ol/array.js"),f=o("./node_modules/ol/proj.js"),m=o("./node_modules/ol/util.js"),g=o("./node_modules/ol/coordinate.js"),y=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),v=function(e){function t(t){var o=e.call(this,t)||this;return o.boundHandleStyleImageChange_=o.handleStyleImageChange_.bind(o),o.animatingOrInteracting_,o.dirty_=!1,o.hitDetectionImageData_=null,o.renderedFeatures_=null,o.renderedRevision_=-1,o.renderedResolution_=NaN,o.renderedExtent_=Object(u.k)(),o.wrappedRenderedExtent_=Object(u.k)(),o.renderedRotation_,o.renderedCenter_=null,o.renderedProjection_=null,o.renderedRenderOrder_=null,o.replayGroup_=null,o.replayGroupChanged=!0,o.declutterExecutorGroup=null,o.clipping=!0,o}return y(t,e),t.prototype.useContainer=function(t,o,n){n<1&&(t=null),e.prototype.useContainer.call(this,t,o,n)},t.prototype.renderWorlds=function(e,t,o){var n=t.extent,r=t.viewState,i=r.center,s=r.resolution,l=r.projection,c=r.rotation,d=l.getExtent(),h=this.getLayer().getSource(),p=t.pixelRatio,f=t.viewHints,m=!(f[a.a.ANIMATING]||f[a.a.INTERACTING]),g=this.context,y=Math.round(t.size[0]*p),v=Math.round(t.size[1]*p),_=h.getWrapX()&&l.canWrapX(),b=_?Object(u.N)(d):null,w=_?Math.ceil((n[2]-d[2])/b)+1:1,E=_?Math.floor((n[0]-d[0])/b):0;do{var O=this.getRenderTransform(i,s,c,p,y,v,E*b);e.execute(g,1,O,c,m,void 0,o)}while(++E<w)},t.prototype.renderDeclutter=function(e){this.declutterExecutorGroup&&this.renderWorlds(this.declutterExecutorGroup,e,e.declutterTree)},t.prototype.renderFrame=function(e,t){var o=e.pixelRatio,n=e.layerStatesArray[e.layerIndex];Object(c.h)(this.pixelTransform,1/o,1/o),Object(c.g)(this.inversePixelTransform,this.pixelTransform);var r=Object(c.o)(this.pixelTransform);this.useContainer(t,r,n.opacity);var i=this.context,s=i.canvas,a=this.replayGroup_,l=this.declutterExecutorGroup;if((!a||a.isEmpty())&&(!l||l.isEmpty()))return null;var h=Math.round(e.size[0]*o),p=Math.round(e.size[1]*o);s.width!=h||s.height!=p?(s.width=h,s.height=p,s.style.transform!==r&&(s.style.transform=r)):this.containerReused||i.clearRect(0,0,h,p),this.preRender(i,e);var m=e.viewState,g=m.projection,y=!1,v=!0;if(n.extent&&this.clipping){var _=Object(f.r)(n.extent,g);(y=(v=Object(u.O)(_,e.extent))&&!Object(u.h)(_,e.extent))&&this.clipUnrotated(i,e,_)}v&&this.renderWorlds(a,e),y&&i.restore(),this.postRender(i,e);var b=Object(d.g)(n.opacity),w=this.container;return b!==w.style.opacity&&(w.style.opacity=b),this.renderedRotation_!==m.rotation&&(this.renderedRotation_=m.rotation,this.hitDetectionImageData_=null),this.container},t.prototype.getFeatures=function(e){return new Promise(function(t){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var o=[this.context.canvas.width,this.context.canvas.height];Object(c.a)(this.pixelTransform,o);var n=this.renderedCenter_,r=this.renderedResolution_,i=this.renderedRotation_,s=this.renderedProjection_,a=this.wrappedRenderedExtent_,d=this.getLayer(),h=[],p=o[0]*l.a,f=o[1]*l.a;h.push(this.getRenderTransform(n,r,i,l.a,p,f,0).slice());var m=d.getSource(),g=s.getExtent();if(m.getWrapX()&&s.canWrapX()&&!Object(u.h)(g,a)){for(var y=a[0],v=Object(u.N)(g),_=0,b=void 0;y<g[0];)b=v*--_,h.push(this.getRenderTransform(n,r,i,l.a,p,f,b).slice()),y+=v;for(_=0,y=a[2];y>g[2];)b=v*++_,h.push(this.getRenderTransform(n,r,i,l.a,p,f,b).slice()),y-=v}this.hitDetectionImageData_=Object(l.b)(o,h,this.renderedFeatures_,d.getStyleFunction(),a,r,i)}t(Object(l.c)(e,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},t.prototype.forEachFeatureAtCoordinate=function(e,t,o,n,r){var i=this;if(this.replayGroup_){var s,a=t.viewState.resolution,l=t.viewState.rotation,c=this.getLayer(),u={},d=function(e,t,o){var i=Object(m.c)(e),s=u[i];if(s){if(!0!==s&&o<s.distanceSq){if(0===o)return u[i]=!0,r.splice(r.lastIndexOf(s),1),n(e,c,t);s.geometry=t,s.distanceSq=o}}else{if(0===o)return u[i]=!0,n(e,c,t);r.push(u[i]={feature:e,layer:c,geometry:t,distanceSq:o,callback:n})}},h=[this.replayGroup_];return this.declutterExecutorGroup&&h.push(this.declutterExecutorGroup),h.some((function(n){return s=n.forEachFeatureAtCoordinate(e,a,l,o,d,n===i.declutterExecutorGroup?t.declutterTree.all().map((function(e){return e.value})):null)})),s}},t.prototype.handleFontsChanged=function(){var e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()},t.prototype.handleStyleImageChange_=function(e){this.renderIfReadyAndVisible()},t.prototype.prepareFrame=function(e){var t=this.getLayer(),o=t.getSource();if(!o)return!1;var n=e.viewHints[a.a.ANIMATING],i=e.viewHints[a.a.INTERACTING],l=t.getUpdateWhileAnimating(),c=t.getUpdateWhileInteracting();if(!this.dirty_&&!l&&n||!c&&i)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var d=e.extent,m=e.viewState,y=m.projection,v=m.resolution,_=e.pixelRatio,b=t.getRevision(),w=t.getRenderBuffer(),E=t.getRenderOrder();void 0===E&&(E=h.a);var O=m.center.slice(),S=Object(u.d)(d,w*v),x=S.slice(),C=[S.slice()],j=y.getExtent();if(o.getWrapX()&&y.canWrapX()&&!Object(u.h)(j,e.extent)){var P=Object(u.N)(j),T=Math.max(Object(u.N)(S)/2,P);S[0]=j[0]-T,S[2]=j[2]+T,Object(g.p)(O,y);var A=Object(u.T)(C[0],y);A[0]<j[0]&&A[2]<j[2]?C.push([A[0]+P,A[1],A[2]+P,A[3]]):A[0]>j[0]&&A[2]>j[2]&&C.push([A[0]-P,A[1],A[2]-P,A[3]])}if(!this.dirty_&&this.renderedResolution_==v&&this.renderedRevision_==b&&this.renderedRenderOrder_==E&&Object(u.h)(this.wrappedRenderedExtent_,S))return Object(p.b)(this.renderedExtent_,x)||(this.hitDetectionImageData_=null,this.renderedExtent_=x),this.renderedCenter_=O,this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var M,I=new r.a(Object(h.c)(v,_),S,v,_);this.getLayer().getDeclutter()&&(M=new r.a(Object(h.c)(v,_),S,v,_));var R,L=Object(f.x)();if(L){for(var k=0,G=C.length;k<G;++k){var N=C[k],D=Object(f.C)(N,y);o.loadFeatures(D,Object(f.D)(v,y),L)}R=Object(f.w)(L,y)}else for(k=0,G=C.length;k<G;++k)o.loadFeatures(C[k],v,y);var F=Object(h.b)(v,_),U=function(e){var o,n=e.getStyleFunction()||t.getStyleFunction();if(n&&(o=n(e,v)),o){var r=this.renderFeature(e,F,o,I,R,M);this.dirty_=this.dirty_||r}}.bind(this),B=Object(f.C)(S,y),z=o.getFeaturesInExtent(B);E&&z.sort(E);for(k=0,G=z.length;k<G;++k)U(z[k]);this.renderedFeatures_=z;var V=I.finish(),W=new s.a(S,v,_,o.getOverlaps(),V,t.getRenderBuffer());return M&&(this.declutterExecutorGroup=new s.a(S,v,_,o.getOverlaps(),M.finish(),t.getRenderBuffer())),this.renderedResolution_=v,this.renderedRevision_=b,this.renderedRenderOrder_=E,this.renderedExtent_=x,this.wrappedRenderedExtent_=S,this.renderedCenter_=O,this.renderedProjection_=y,this.replayGroup_=W,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},t.prototype.renderFeature=function(e,t,o,n,r,i){if(!o)return!1;var s=!1;if(Array.isArray(o))for(var a=0,l=o.length;a<l;++a)s=Object(h.d)(n,e,o[a],t,this.boundHandleStyleImageChange_,r,i)||s;else s=Object(h.d)(n,e,o,t,this.boundHandleStyleImageChange_,r,i);return s},t}(i.a);t.a=v},"./node_modules/ol/renderer/canvas/VectorTileLayer.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/render/canvas/BuilderGroup.js"),i=o("./node_modules/ol/render/canvas/ExecutorGroup.js"),s=o("./node_modules/ol/renderer/canvas/TileLayer.js"),a=o("./node_modules/ol/render/canvas/BuilderType.js"),l=o("./node_modules/ol/TileState.js"),c=o("./node_modules/ol/layer/VectorTileRenderType.js"),u=o("./node_modules/ol/ViewHint.js"),d=o("./node_modules/ol/render/canvas/hitdetect.js"),h=o("./node_modules/ol/transform.js"),p=o("./node_modules/ol/extent.js"),f=o("./node_modules/ol/renderer/vector.js"),m=o("./node_modules/ol/util.js"),g=o("./node_modules/ol/size.js"),y=o("./node_modules/ol/coordinate.js"),v=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),_={image:[a.a.POLYGON,a.a.CIRCLE,a.a.LINE_STRING,a.a.IMAGE,a.a.TEXT],hybrid:[a.a.POLYGON,a.a.LINE_STRING],vector:[]},b={hybrid:[a.a.IMAGE,a.a.TEXT,a.a.DEFAULT],vector:[a.a.POLYGON,a.a.CIRCLE,a.a.LINE_STRING,a.a.IMAGE,a.a.TEXT,a.a.DEFAULT]},w=function(e){function t(t){var o=e.call(this,t)||this;return o.boundHandleStyleImageChange_=o.handleStyleImageChange_.bind(o),o.dirty_=!1,o.renderedLayerRevision_,o.renderedPixelToCoordinateTransform_=null,o.renderedRotation_,o.tmpTransform_=Object(h.d)(),o}return v(t,e),t.prototype.prepareTile=function(e,t,o){var n,r=e.getState();return r!==l.a.LOADED&&r!==l.a.ERROR||(this.updateExecutorGroup_(e,t,o),this.tileImageNeedsRender_(e)&&(n=!0)),n},t.prototype.getTile=function(t,o,n,r){var i=r.pixelRatio,s=r.viewState,a=s.resolution,l=s.projection,d=this.getLayer(),h=d.getSource().getTile(t,o,n,i,l),p=r.viewHints,f=!(p[u.a.ANIMATING]||p[u.a.INTERACTING]);return!f&&h.wantedResolution||(h.wantedResolution=a),this.prepareTile(h,i,l)&&(f||Date.now()-r.time<8)&&d.getRenderMode()!==c.a.VECTOR&&this.renderTileImage_(h,r),e.prototype.getTile.call(this,t,o,n,r)},t.prototype.isDrawableTile=function(t){var o=this.getLayer();return e.prototype.isDrawableTile.call(this,t)&&(o.getRenderMode()===c.a.VECTOR?Object(m.c)(o)in t.executorGroups:t.hasContext(o))},t.prototype.getTileImage=function(e){return e.getImage(this.getLayer())},t.prototype.prepareFrame=function(t){var o=this.getLayer().getRevision();return this.renderedLayerRevision_!=o&&(this.renderedTiles.length=0),this.renderedLayerRevision_=o,e.prototype.prepareFrame.call(this,t)},t.prototype.updateExecutorGroup_=function(e,t,o){var n=this.getLayer(),s=n.getRevision(),a=n.getRenderOrder()||null,u=e.wantedResolution,d=e.getReplayState(n);if(d.dirty||d.renderedResolution!==u||d.renderedRevision!=s||d.renderedRenderOrder!=a){var h=n.getSource(),g=n.getDeclutter(),y=h.getTileGrid(),v=h.getTileGridForProjection(o).getTileCoordExtent(e.wrappedTileCoord),_=h.getSourceTiles(t,o,e),b=Object(m.c)(n);delete e.hitDetectionImageData[b],e.executorGroups[b]=[],g&&(e.declutterExecutorGroups[b]=[]);for(var w=function(o,s){var m=_[o];if(m.getState()!=l.a.LOADED)return"continue";var w=m.tileCoord,O=y.getTileCoordExtent(w),S=Object(p.H)(v,O),x=Object(p.d)(S,n.getRenderBuffer()*u,E.tmpExtent),C=Object(p.r)(O,S)?null:x;d.dirty=!1;var j=new r.a(0,x,u,t),P=g?new r.a(0,S,u,t):void 0,T=Object(f.b)(u,t),A=function(e){var t,o=e.getStyleFunction()||n.getStyleFunction();if(o&&(t=o(e,u)),t){var r=this.renderFeature(e,T,t,j,P);this.dirty_=this.dirty_||r,d.dirty=d.dirty||r}},M=m.getFeatures();a&&a!==d.renderedRenderOrder&&M.sort(a);for(var I=0,R=M.length;I<R;++I){var L=M[I];C&&!Object(p.O)(C,L.getGeometry().getExtent())||A.call(E,L)}var k=j.finish(),G=n.getRenderMode()!==c.a.VECTOR&&g&&1===_.length?null:S,N=new i.a(G,u,t,h.getOverlaps(),k,n.getRenderBuffer());if(e.executorGroups[b].push(N),P){var D=new i.a(null,u,t,h.getOverlaps(),P.finish(),n.getRenderBuffer());e.declutterExecutorGroups[b].push(D)}},E=this,O=0,S=_.length;O<S;++O)w(O);d.renderedRevision=s,d.renderedRenderOrder=a,d.renderedResolution=u}},t.prototype.forEachFeatureAtCoordinate=function(e,t,o,n,r){var i=t.viewState.resolution,s=t.viewState.rotation;o=null==o?0:o;var a=this.getLayer(),l=a.getSource().getTileGridForProjection(t.viewState.projection),c=Object(p.c)([e]);Object(p.d)(c,i*o,c);for(var u,d={},h=function(e,t,o){var i=e.getId();void 0===i&&(i=Object(m.c)(e));var s=d[i];if(s){if(!0!==s&&o<s.distanceSq){if(0===o)return d[i]=!0,r.splice(r.lastIndexOf(s),1),n(e,a,t);s.geometry=t,s.distanceSq=o}}else{if(0===o)return d[i]=!0,n(e,a,t);r.push(d[i]={feature:e,layer:a,geometry:t,distanceSq:o,callback:n})}},f=this.renderedTiles,g=function(n,r){var d=f[n],g=l.getTileCoordExtent(d.wrappedTileCoord);if(!Object(p.O)(g,c))return"continue";var y=Object(m.c)(a),v=[d.executorGroups[y]],_=d.declutterExecutorGroups[y];_&&v.push(_),v.some((function(n){for(var r=n===_?t.declutterTree.all().map((function(e){return e.value})):null,a=0,l=n.length;a<l;++a){var c=n[a];if(u=c.forEachFeatureAtCoordinate(e,i,s,o,h,r))return!0}}))},y=0,v=f.length;!u&&y<v;++y)g(y);return u},t.prototype.getFeatures=function(e){return new Promise(function(t,o){for(var n,r=this.getLayer(),i=Object(m.c)(r),s=r.getSource(),a=this.renderedProjection,c=a.getExtent(),u=this.renderedResolution,f=s.getTileGridForProjection(a),v=Object(h.a)(this.renderedPixelToCoordinateTransform_,e.slice()),_=f.getTileCoordForCoordAndResolution(v,u),b=0,w=this.renderedTiles.length;b<w;++b)if(_.toString()===this.renderedTiles[b].tileCoord.toString()){if((n=this.renderedTiles[b]).getState()===l.a.LOADED){var E=f.getTileCoordExtent(n.tileCoord);s.getWrapX()&&a.canWrapX()&&!Object(p.h)(c,E)&&Object(y.p)(v,a);break}n=void 0}if(!n||n.loadingSourceTiles>0)t([]);else{var O=f.getTileCoordExtent(n.wrappedTileCoord),S=Object(p.L)(O),x=[(v[0]-S[0])/u,(S[1]-v[1])/u],C=n.getSourceTiles().reduce((function(e,t){return e.concat(t.getFeatures())}),[]),j=n.hitDetectionImageData[i];if(!j&&!this.animatingOrInteracting_){var P=Object(g.d)(f.getTileSize(f.getZForResolution(u))),T=this.renderedRotation_,A=[this.getRenderTransform(f.getTileCoordCenter(n.wrappedTileCoord),u,0,d.a,P[0]*d.a,P[1]*d.a,0)];j=Object(d.b)(P,A,C,r.getStyleFunction(),f.getTileCoordExtent(n.wrappedTileCoord),n.getReplayState(r).renderedResolution,T),n.hitDetectionImageData[i]=j}t(Object(d.c)(x,C,j))}}.bind(this))},t.prototype.handleFontsChanged=function(){var e=this.getLayer();e.getVisible()&&void 0!==this.renderedLayerRevision_&&e.changed()},t.prototype.handleStyleImageChange_=function(e){this.renderIfReadyAndVisible()},t.prototype.renderDeclutter=function(e){var t=this.context,o=t.globalAlpha;t.globalAlpha=this.getLayer().getOpacity();for(var n=e.viewHints,r=!(n[u.a.ANIMATING]||n[u.a.INTERACTING]),i=this.renderedTiles,s=0,a=i.length;s<a;++s){var l=i[s],c=l.declutterExecutorGroups[Object(m.c)(this.getLayer())];if(c)for(var d=c.length-1;d>=0;--d)c[d].execute(this.context,1,this.getTileRenderTransform(l,e),e.viewState.rotation,r,void 0,e.declutterTree)}t.globalAlpha=o},t.prototype.getTileRenderTransform=function(e,t){var o=t.pixelRatio,n=t.viewState,r=n.center,i=n.resolution,s=n.rotation,a=t.size,l=Math.round(a[0]*o),c=Math.round(a[1]*o),u=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),d=e.tileCoord,p=u.getTileCoordExtent(e.wrappedTileCoord),f=u.getTileCoordExtent(d,this.tmpExtent)[0]-p[0];return Object(h.i)(Object(h.l)(this.inversePixelTransform.slice(),1/o,1/o),this.getRenderTransform(r,i,s,o,l,c,f))},t.prototype.renderFrame=function(t,o){var n=t.viewHints,r=!(n[u.a.ANIMATING]||n[u.a.INTERACTING]);e.prototype.renderFrame.call(this,t,o),this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation;var i=this.getLayer(),s=i.getRenderMode(),a=this.context,l=a.globalAlpha;a.globalAlpha=i.getOpacity();for(var c=b[s],d=t.viewState.rotation,h=this.renderedTiles,p=[],f=[],g=h.length-1;g>=0;--g)for(var y=h[g],v=this.getTileRenderTransform(y,t),_=y.executorGroups[Object(m.c)(i)],w=!1,E=0,O=_.length;E<O;++E){var S=_[E];if(S.hasExecutors(c)){var x=y.tileCoord[0],C=void 0;if(!w&&(C=S.getClipCoords(v))){a.save();for(var j=0,P=p.length;j<P;++j){var T=p[j];x<f[j]&&(a.beginPath(),a.moveTo(C[0],C[1]),a.lineTo(C[2],C[3]),a.lineTo(C[4],C[5]),a.lineTo(C[6],C[7]),a.moveTo(T[6],T[7]),a.lineTo(T[4],T[5]),a.lineTo(T[2],T[3]),a.lineTo(T[0],T[1]),a.clip())}}S.execute(a,1,v,d,r,c),!w&&C&&(a.restore(),p.push(C),f.push(x),w=!0)}}return a.globalAlpha=l,this.container},t.prototype.renderFeature=function(e,t,o,n,r){if(!o)return!1;var i=!1;if(Array.isArray(o))for(var s=0,a=o.length;s<a;++s)i=Object(f.d)(n,e,o[s],t,this.boundHandleStyleImageChange_,void 0,r)||i;else i=Object(f.d)(n,e,o,t,this.boundHandleStyleImageChange_,void 0,r);return i},t.prototype.tileImageNeedsRender_=function(e){var t=this.getLayer();if(t.getRenderMode()===c.a.VECTOR)return!1;var o=e.getReplayState(t),n=t.getRevision(),r=e.wantedResolution;return o.renderedTileResolution!==r||o.renderedTileRevision!==n},t.prototype.renderTileImage_=function(e,t){var o=this.getLayer(),n=e.getReplayState(o),r=o.getRevision(),i=e.executorGroups[Object(m.c)(o)];n.renderedTileRevision=r;var s=e.wrappedTileCoord,a=s[0],l=o.getSource(),c=t.pixelRatio,u=t.viewState.projection,d=l.getTileGridForProjection(u),p=d.getResolution(e.tileCoord[0]),f=t.pixelRatio/e.wantedResolution*p,g=d.getResolution(a),y=e.getContext(o);c=Math.round(Math.max(c,f/c));var v=l.getTilePixelSize(a,c,u);y.canvas.width=v[0],y.canvas.height=v[1];var b=c/f;if(1!==b){var w=Object(h.j)(this.tmpTransform_);Object(h.l)(w,b,b),y.setTransform.apply(y,w)}var E=d.getTileCoordExtent(s,this.tmpExtent),O=f/g,S=Object(h.j)(this.tmpTransform_);Object(h.l)(S,O,-O),Object(h.p)(S,-E[0],-E[3]);for(var x=0,C=i.length;x<C;++x){i[x].execute(y,b,S,0,!0,_[o.getRenderMode()])}n.renderedTileResolution=e.wantedResolution},t}(s.a);t.a=w},"./node_modules/ol/renderer/vector.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return l})),o.d(t,"b",(function(){return c})),o.d(t,"c",(function(){return u})),o.d(t,"d",(function(){return d}));var n=o("./node_modules/ol/render/canvas/BuilderType.js"),r=o("./node_modules/ol/geom/GeometryType.js"),i=o("./node_modules/ol/ImageState.js"),s=o("./node_modules/ol/util.js"),a={Point:function(e,t,o,r,s){var a,l=o.getImage(),c=o.getText();s&&(e=s,a=l&&c&&c.getText()?{}:void 0);if(l){if(l.getImageState()!=i.a.LOADED)return;var u=e.getBuilder(o.getZIndex(),n.a.IMAGE);u.setImageStyle(l,a),u.drawPoint(t,r)}if(c&&c.getText()){var d=e.getBuilder(o.getZIndex(),n.a.TEXT);d.setTextStyle(c,a),d.drawText(t,r)}},LineString:function(e,t,o,r,i){var s=o.getStroke();if(s){var a=e.getBuilder(o.getZIndex(),n.a.LINE_STRING);a.setFillStrokeStyle(null,s),a.drawLineString(t,r)}var l=o.getText();if(l&&l.getText()){var c=(i||e).getBuilder(o.getZIndex(),n.a.TEXT);c.setTextStyle(l),c.drawText(t,r)}},Polygon:function(e,t,o,r,i){var s=o.getFill(),a=o.getStroke();if(s||a){var l=e.getBuilder(o.getZIndex(),n.a.POLYGON);l.setFillStrokeStyle(s,a),l.drawPolygon(t,r)}var c=o.getText();if(c&&c.getText()){var u=(i||e).getBuilder(o.getZIndex(),n.a.TEXT);u.setTextStyle(c),u.drawText(t,r)}},MultiPoint:function(e,t,o,r,s){var a,l=o.getImage(),c=o.getText();s&&(e=s,a=l&&c&&c.getText()?{}:void 0);if(l){if(l.getImageState()!=i.a.LOADED)return;var u=e.getBuilder(o.getZIndex(),n.a.IMAGE);u.setImageStyle(l,a),u.drawMultiPoint(t,r)}if(c&&c.getText()){var d=(s||e).getBuilder(o.getZIndex(),n.a.TEXT);d.setTextStyle(c,a),d.drawText(t,r)}},MultiLineString:function(e,t,o,r,i){var s=o.getStroke();if(s){var a=e.getBuilder(o.getZIndex(),n.a.LINE_STRING);a.setFillStrokeStyle(null,s),a.drawMultiLineString(t,r)}var l=o.getText();if(l&&l.getText()){var c=(i||e).getBuilder(o.getZIndex(),n.a.TEXT);c.setTextStyle(l),c.drawText(t,r)}},MultiPolygon:function(e,t,o,r,i){var s=o.getFill(),a=o.getStroke();if(a||s){var l=e.getBuilder(o.getZIndex(),n.a.POLYGON);l.setFillStrokeStyle(s,a),l.drawMultiPolygon(t,r)}var c=o.getText();if(c&&c.getText()){var u=(i||e).getBuilder(o.getZIndex(),n.a.TEXT);u.setTextStyle(c),u.drawText(t,r)}},GeometryCollection:function(e,t,o,n,r){var i,s,l=t.getGeometriesArray();for(i=0,s=l.length;i<s;++i){(0,a[l[i].getType()])(e,l[i],o,n,r)}},Circle:function(e,t,o,r,i){var s=o.getFill(),a=o.getStroke();if(s||a){var l=e.getBuilder(o.getZIndex(),n.a.CIRCLE);l.setFillStrokeStyle(s,a),l.drawCircle(t,r)}var c=o.getText();if(c&&c.getText()){var u=(i||e).getBuilder(o.getZIndex(),n.a.TEXT);u.setTextStyle(c),u.drawText(t,r)}}};function l(e,t){return parseInt(Object(s.c)(e),10)-parseInt(Object(s.c)(t),10)}function c(e,t){var o=u(e,t);return o*o}function u(e,t){return.5*e/t}function d(e,t,o,s,l,c,u){var d=!1,h=o.getImage();if(h){var p=h.getImageState();p==i.a.LOADED||p==i.a.ERROR?h.unlistenImageChange(l):(p==i.a.IDLE&&h.load(),p=h.getImageState(),h.listenImageChange(l),d=!0)}return function(e,t,o,i,s,l){var c=o.getGeometryFunction()(t);if(!c)return;var u=c.simplifyTransformed(i,s);if(o.getRenderer())!function e(t,o,i,s){if(o.getType()==r.a.GEOMETRY_COLLECTION){for(var a=o.getGeometries(),l=0,c=a.length;l<c;++l)e(t,a[l],i,s);return}t.getBuilder(i.getZIndex(),n.a.DEFAULT).drawCustom(o,s,i.getRenderer(),i.getHitDetectionRenderer())}(e,u,o,t);else{(0,a[u.getType()])(e,u,o,t,l)}}(e,t,o,s,c,u),d}},"./node_modules/ol/reproj.js":function(e,t,o){"use strict";o.d(t,"b",(function(){return h})),o.d(t,"a",(function(){return p})),o.d(t,"c",(function(){return f}));var n,r=o("./node_modules/ol/source/common.js"),i=o("./node_modules/ol/obj.js"),s=o("./node_modules/ol/extent.js"),a=o("./node_modules/ol/dom.js"),l=o("./node_modules/ol/proj.js"),c=o("./node_modules/ol/math.js");function u(e,t,o,n,r){e.beginPath(),e.moveTo(0,0),e.lineTo(t,o),e.lineTo(n,r),e.closePath(),e.save(),e.clip(),e.fillRect(0,0,Math.max(t,n)+1,Math.max(o,r)),e.restore()}function d(e,t){return Math.abs(e[4*t]-210)>2||Math.abs(e[4*t+3]-191.25)>2}function h(e,t,o,n){var r=Object(l.E)(o,t,e),i=Object(l.u)(t,n,o),a=t.getMetersPerUnit();void 0!==a&&(i*=a);var c=e.getMetersPerUnit();void 0!==c&&(i/=c);var u=e.getExtent();if(!u||Object(s.g)(u,r)){var d=Object(l.u)(e,i,r)/i;isFinite(d)&&d>0&&(i/=d)}return i}function p(e,t,o,n){var r=Object(s.C)(o),i=h(e,t,r,n);return(!isFinite(i)||i<=0)&&Object(s.y)(o,(function(o){return i=h(e,t,o,n),isFinite(i)&&i>0})),i}function f(e,t,o,l,h,p,f,m,g,y,v,_){var b=Object(a.a)(Math.round(o*e),Math.round(o*t));if(Object(i.a)(b,_),0===g.length)return b.canvas;function w(e){return Math.round(e*o)/o}b.scale(o,o),b.globalCompositeOperation="lighter";var E=Object(s.k)();g.forEach((function(e,t,o){Object(s.s)(E,e.extent)}));var O=Object(s.N)(E),S=Object(s.G)(E),x=Object(a.a)(Math.round(o*O/l),Math.round(o*S/l));Object(i.a)(x,_);var C=o/l;g.forEach((function(e,t,o){var n=e.extent[0]-E[0],r=-(e.extent[3]-E[3]),i=Object(s.N)(e.extent),a=Object(s.G)(e.extent);e.image.width>0&&e.image.height>0&&x.drawImage(e.image,y,y,e.image.width-2*y,e.image.height-2*y,n*C,r*C,i*C,a*C)}));var j=Object(s.L)(f);return m.getTriangles().forEach((function(e,t,i){var s=e.source,a=e.target,h=s[0][0],f=s[0][1],m=s[1][0],g=s[1][1],y=s[2][0],v=s[2][1],O=w((a[0][0]-j[0])/p),S=w(-(a[0][1]-j[1])/p),C=w((a[1][0]-j[0])/p),P=w(-(a[1][1]-j[1])/p),T=w((a[2][0]-j[0])/p),A=w(-(a[2][1]-j[1])/p),M=h,I=f;h=0,f=0;var R=[[m-=M,g-=I,0,0,C-O],[y-=M,v-=I,0,0,T-O],[0,0,m,g,P-S],[0,0,y,v,A-S]],L=Object(c.f)(R);if(L){if(b.save(),b.beginPath(),function(){if(void 0===n){var e=document.createElement("canvas").getContext("2d");e.globalCompositeOperation="lighter",e.fillStyle="rgba(210, 0, 0, 0.75)",u(e,4,5,4,0),u(e,4,5,0,5);var t=e.getImageData(0,0,3,3).data;n=d(t,0)||d(t,4)||d(t,8)}return n}()||_===r.b){b.moveTo(C,P);for(var k=O-C,G=S-P,N=0;N<4;N++)b.lineTo(C+w((N+1)*k/4),P+w(N*G/3)),3!=N&&b.lineTo(C+w((N+1)*k/4),P+w((N+1)*G/3));b.lineTo(T,A)}else b.moveTo(C,P),b.lineTo(O,S),b.lineTo(T,A);b.clip(),b.transform(L[0],L[2],L[1],L[3],O,S),b.translate(E[0]-M,E[3]-I),b.scale(l/o,-l/o),b.drawImage(x.canvas,0,0),b.restore()}})),v&&(b.save(),b.globalCompositeOperation="source-over",b.strokeStyle="black",b.lineWidth=1,m.getTriangles().forEach((function(e,t,o){var n=e.target,r=(n[0][0]-j[0])/p,i=-(n[0][1]-j[1])/p,s=(n[1][0]-j[0])/p,a=-(n[1][1]-j[1])/p,l=(n[2][0]-j[0])/p,c=-(n[2][1]-j[1])/p;b.beginPath(),b.moveTo(s,a),b.lineTo(r,i),b.lineTo(l,c),b.closePath(),b.stroke()})),b.restore()),b.canvas}},"./node_modules/ol/reproj/Image.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/reproj/common.js"),i=o("./node_modules/ol/events/EventType.js"),s=o("./node_modules/ol/ImageBase.js"),a=o("./node_modules/ol/ImageState.js"),l=o("./node_modules/ol/reproj/Triangulation.js"),c=o("./node_modules/ol/reproj.js"),u=o("./node_modules/ol/extent.js"),d=o("./node_modules/ol/events.js"),h=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),p=function(e){function t(t,o,n,i,s,d,h){var p=this,f=t.getExtent(),m=o.getExtent(),g=m?Object(u.H)(n,m):n,y=Object(u.C)(g),v=Object(c.b)(t,o,y,i),_=r.b,b=new l.a(t,o,g,f,v*_,i),w=d(b.calculateSourceExtent(),v,s),E=w?a.a.IDLE:a.a.EMPTY,O=w?w.getPixelRatio():1;return(p=e.call(this,n,i,O,E)||this).targetProj_=o,p.maxSourceExtent_=f,p.triangulation_=b,p.targetResolution_=i,p.targetExtent_=n,p.sourceImage_=w,p.sourcePixelRatio_=O,p.contextOptions_=h,p.canvas_=null,p.sourceListenerKey_=null,p}return h(t,e),t.prototype.disposeInternal=function(){this.state==a.a.LOADING&&this.unlistenSource_(),e.prototype.disposeInternal.call(this)},t.prototype.getImage=function(){return this.canvas_},t.prototype.getProjection=function(){return this.targetProj_},t.prototype.reproject_=function(){var e=this.sourceImage_.getState();if(e==a.a.LOADED){var t=Object(u.N)(this.targetExtent_)/this.targetResolution_,o=Object(u.G)(this.targetExtent_)/this.targetResolution_;this.canvas_=Object(c.c)(t,o,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.contextOptions_)}this.state=e,this.changed()},t.prototype.load=function(){if(this.state==a.a.IDLE){this.state=a.a.LOADING,this.changed();var e=this.sourceImage_.getState();e==a.a.LOADED||e==a.a.ERROR?this.reproject_():(this.sourceListenerKey_=Object(d.a)(this.sourceImage_,i.a.CHANGE,(function(e){var t=this.sourceImage_.getState();t!=a.a.LOADED&&t!=a.a.ERROR||(this.unlistenSource_(),this.reproject_())}),this),this.sourceImage_.load())}},t.prototype.unlistenSource_=function(){Object(d.c)(this.sourceListenerKey_),this.sourceListenerKey_=null},t}(s.a);t.a=p},"./node_modules/ol/reproj/Tile.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/reproj/common.js"),i=o("./node_modules/ol/events/EventType.js"),s=o("./node_modules/ol/Tile.js"),a=o("./node_modules/ol/TileState.js"),l=o("./node_modules/ol/reproj/Triangulation.js"),c=o("./node_modules/ol/reproj.js"),u=o("./node_modules/ol/math.js"),d=o("./node_modules/ol/extent.js"),h=o("./node_modules/ol/events.js"),p=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),f=function(e){function t(t,o,n,i,s,h,p,f,m,g,y,v){var _=e.call(this,s,a.a.IDLE)||this;_.renderEdges_=void 0!==y&&y,_.contextOptions_=v,_.pixelRatio_=p,_.gutter_=f,_.canvas_=null,_.sourceTileGrid_=o,_.targetTileGrid_=i,_.wrappedTileCoord_=h||s,_.sourceTiles_=[],_.sourcesListenerKeys_=null,_.sourceZ_=0;var b=i.getTileCoordExtent(_.wrappedTileCoord_),w=_.targetTileGrid_.getExtent(),E=_.sourceTileGrid_.getExtent(),O=w?Object(d.H)(b,w):b;if(0===Object(d.z)(O))return _.state=a.a.EMPTY,_;var S=t.getExtent();S&&(E=E?Object(d.H)(E,S):S);var x=i.getResolution(_.wrappedTileCoord_[0]),C=Object(c.a)(t,n,O,x);if(!isFinite(C)||C<=0)return _.state=a.a.EMPTY,_;var j=void 0!==g?g:r.b;if(_.triangulation_=new l.a(t,n,O,E,C*j,x),0===_.triangulation_.getTriangles().length)return _.state=a.a.EMPTY,_;_.sourceZ_=o.getZForResolution(C);var P=_.triangulation_.calculateSourceExtent();if(E&&(t.canWrapX()?(P[1]=Object(u.a)(P[1],E[1],E[3]),P[3]=Object(u.a)(P[3],E[1],E[3])):P=Object(d.H)(P,E)),Object(d.z)(P)){for(var T=o.getTileRangeForExtentAndZ(P,_.sourceZ_),A=T.minX;A<=T.maxX;A++)for(var M=T.minY;M<=T.maxY;M++){var I=m(_.sourceZ_,A,M,p);I&&_.sourceTiles_.push(I)}0===_.sourceTiles_.length&&(_.state=a.a.EMPTY)}else _.state=a.a.EMPTY;return _}return p(t,e),t.prototype.getImage=function(){return this.canvas_},t.prototype.reproject_=function(){var e=[];if(this.sourceTiles_.forEach(function(t,o,n){t&&t.getState()==a.a.LOADED&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(t.tileCoord),image:t.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===e.length)this.state=a.a.ERROR;else{var t=this.wrappedTileCoord_[0],o=this.targetTileGrid_.getTileSize(t),n="number"==typeof o?o:o[0],r="number"==typeof o?o:o[1],i=this.targetTileGrid_.getResolution(t),s=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Object(c.c)(n,r,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),i,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.contextOptions_),this.state=a.a.LOADED}this.changed()},t.prototype.load=function(){if(this.state==a.a.IDLE){this.state=a.a.LOADING,this.changed();var e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(t,o,n){var r=t.getState();if(r==a.a.IDLE||r==a.a.LOADING){e++;var s=Object(h.a)(t,i.a.CHANGE,(function(o){var n=t.getState();n!=a.a.LOADED&&n!=a.a.ERROR&&n!=a.a.EMPTY||(Object(h.c)(s),0===--e&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(s)}}.bind(this)),0===e?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function(e,t,o){e.getState()==a.a.IDLE&&e.load()}))}},t.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(h.c),this.sourcesListenerKeys_=null},t}(s.a);t.a=f},"./node_modules/ol/reproj/Triangulation.js":function(e,t,o){"use strict";var n=o("./node_modules/ol/extent.js"),r=o("./node_modules/ol/proj.js"),i=o("./node_modules/ol/math.js"),s=function(){function e(e,t,o,s,a,l){this.sourceProj_=e,this.targetProj_=t;var c={},u=Object(r.v)(this.targetProj_,this.sourceProj_);this.transformInv_=function(e){var t=e[0]+"/"+e[1];return c[t]||(c[t]=u(e)),c[t]},this.maxSourceExtent_=s,this.errorThresholdSquared_=a*a,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!s&&!!this.sourceProj_.getExtent()&&Object(n.N)(s)==Object(n.N)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Object(n.N)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Object(n.N)(this.targetProj_.getExtent()):null;var d=Object(n.L)(o),h=Object(n.M)(o),p=Object(n.B)(o),f=Object(n.A)(o),m=this.transformInv_(d),g=this.transformInv_(h),y=this.transformInv_(p),v=this.transformInv_(f),_=10+(l?Math.max(0,Math.ceil(Object(i.d)(Object(n.z)(o)/(l*l*256*256)))):0);if(this.addQuad_(d,h,p,f,m,g,y,v,_),this.wrapsXInSource_){var b=1/0;this.triangles_.forEach((function(e,t,o){b=Math.min(b,e.source[0][0],e.source[1][0],e.source[2][0])})),this.triangles_.forEach(function(e){if(Math.max(e.source[0][0],e.source[1][0],e.source[2][0])-b>this.sourceWorldWidth_/2){var t=[[e.source[0][0],e.source[0][1]],[e.source[1][0],e.source[1][1]],[e.source[2][0],e.source[2][1]]];t[0][0]-b>this.sourceWorldWidth_/2&&(t[0][0]-=this.sourceWorldWidth_),t[1][0]-b>this.sourceWorldWidth_/2&&(t[1][0]-=this.sourceWorldWidth_),t[2][0]-b>this.sourceWorldWidth_/2&&(t[2][0]-=this.sourceWorldWidth_);var o=Math.min(t[0][0],t[1][0],t[2][0]);Math.max(t[0][0],t[1][0],t[2][0])-o<this.sourceWorldWidth_/2&&(e.source=t)}}.bind(this))}c={}}return e.prototype.addTriangle_=function(e,t,o,n,r,i){this.triangles_.push({source:[n,r,i],target:[e,t,o]})},e.prototype.addQuad_=function(e,t,o,r,s,a,l,c,u){var d=Object(n.c)([s,a,l,c]),h=this.sourceWorldWidth_?Object(n.N)(d)/this.sourceWorldWidth_:null,p=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&h>.5&&h<1,m=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var g=Object(n.c)([e,t,o,r]);m=Object(n.N)(g)/this.targetWorldWidth_>.25||m}!f&&this.sourceProj_.isGlobal()&&h&&(m=h>.25||m)}if(!(!m&&this.maxSourceExtent_&&isFinite(d[0])&&isFinite(d[1])&&isFinite(d[2])&&isFinite(d[3]))||Object(n.O)(d,this.maxSourceExtent_)){var y=0;if(!(m||isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(l[0])&&isFinite(l[1])&&isFinite(c[0])&&isFinite(c[1])))if(u>0)m=!0;else if(1!=(y=(isFinite(s[0])&&isFinite(s[1])?0:8)+(isFinite(a[0])&&isFinite(a[1])?0:4)+(isFinite(l[0])&&isFinite(l[1])?0:2)+(isFinite(c[0])&&isFinite(c[1])?0:1))&&2!=y&&4!=y&&8!=y)return;if(u>0){if(!m){var v=[(e[0]+o[0])/2,(e[1]+o[1])/2],_=this.transformInv_(v),b=void 0;if(f)b=(Object(i.e)(s[0],p)+Object(i.e)(l[0],p))/2-Object(i.e)(_[0],p);else b=(s[0]+l[0])/2-_[0];var w=(s[1]+l[1])/2-_[1];m=b*b+w*w>this.errorThresholdSquared_}if(m){if(Math.abs(e[0]-o[0])<=Math.abs(e[1]-o[1])){var E=[(t[0]+o[0])/2,(t[1]+o[1])/2],O=this.transformInv_(E),S=[(r[0]+e[0])/2,(r[1]+e[1])/2],x=this.transformInv_(S);this.addQuad_(e,t,E,S,s,a,O,x,u-1),this.addQuad_(S,E,o,r,x,O,l,c,u-1)}else{var C=[(e[0]+t[0])/2,(e[1]+t[1])/2],j=this.transformInv_(C),P=[(o[0]+r[0])/2,(o[1]+r[1])/2],T=this.transformInv_(P);this.addQuad_(e,C,P,r,s,j,T,c,u-1),this.addQuad_(C,t,o,P,j,a,l,T,u-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&y)&&this.addTriangle_(e,o,r,s,l,c),0==(14&y)&&this.addTriangle_(e,o,t,s,l,a),y&&(0==(13&y)&&this.addTriangle_(t,r,e,a,c,s),0==(7&y)&&this.addTriangle_(t,r,o,a,c,l))}},e.prototype.calculateSourceExtent=function(){var e=Object(n.k)();return this.triangles_.forEach((function(t,o,r){var i=t.source;Object(n.t)(e,i[0]),Object(n.t)(e,i[1]),Object(n.t)(e,i[2])})),e},e.prototype.getTriangles=function(){return this.triangles_},e}();t.a=s},"./node_modules/ol/reproj/common.js":function(e,t,o){"use strict";o.d(t,"b",(function(){return n})),o.d(t,"a",(function(){return r}));var n=.5,r=!0},"./node_modules/ol/resolutionconstraint.js":function(e,t,o){"use strict";o.d(t,"c",(function(){return l})),o.d(t,"b",(function(){return c})),o.d(t,"a",(function(){return u}));var n=o("./node_modules/ol/math.js"),r=o("./node_modules/ol/extent.js"),i=o("./node_modules/ol/array.js");function s(e,t,o,n){var i=Object(r.N)(t)/o[0],s=Object(r.G)(t)/o[1];return n?Math.min(e,Math.max(i,s)):Math.min(e,Math.min(i,s))}function a(e,t,o){var r=Math.min(e,t);return r*=Math.log(1+50*Math.max(0,e/t-1))/50+1,o&&(r=Math.max(r,o),r/=Math.log(1+50*Math.max(0,o/e-1))/50+1),Object(n.a)(r,o/2,2*t)}function l(e,t,o,r){return function(l,c,u,d){if(void 0!==l){var h=e[0],p=e[e.length-1],f=o?s(h,o,u,r):h;if(d)return void 0===t||t?a(l,f,p):Object(n.a)(l,p,f);var m=Math.min(f,l),g=Math.floor(Object(i.h)(e,m,c));return e[g]>f&&g<e.length-1?e[g+1]:e[g]}}}function c(e,t,o,r,i,l){return function(c,u,d,h){if(void 0!==c){var p=i?s(t,i,d,l):t,f=void 0!==o?o:0;if(h)return void 0===r||r?a(c,p,f):Object(n.a)(c,f,p);var m=Math.ceil(Math.log(t/p)/Math.log(e)-1e-9),g=-u*(.5-1e-9)+.5,y=Math.min(p,c),v=Math.floor(Math.log(t/y)/Math.log(e)+g),_=Math.max(m,v),b=t/Math.pow(e,_);return Object(n.a)(b,f,p)}}}function u(e,t,o,r,i){return function(l,c,u,d){if(void 0!==l){var h=r?s(e,r,u,i):e;return(void 0===o||o)&&d?a(l,h,t):Object(n.a)(l,t,h)}}}},"./node_modules/ol/rotationconstraint.js":function(e,t,o){"use strict";o.d(t,"c",(function(){return r})),o.d(t,"d",(function(){return i})),o.d(t,"a",(function(){return s})),o.d(t,"b",(function(){return a}));var n=o("./node_modules/ol/math.js");function r(e){return void 0!==e?0:void 0}function i(e){return void 0!==e?e:void 0}function s(e){var t=2*Math.PI/e;return function(e,o){return o?e:void 0!==e?e=Math.floor(e/t+.5)*t:void 0}}function a(e){var t=e||Object(n.j)(5);return function(e,o){return o?e:void 0!==e?Math.abs(e)<=t?0:e:void 0}}},"./node_modules/ol/size.js":function(e,t,o){"use strict";function n(e,t,o){return void 0===o&&(o=[0,0]),o[0]=e[0]+2*t,o[1]=e[1]+2*t,o}function r(e){return e[0]>0&&e[1]>0}function i(e,t,o){return void 0===o&&(o=[0,0]),o[0]=e[0]*t+.5|0,o[1]=e[1]*t+.5|0,o}function s(e,t){return Array.isArray(e)?e:(void 0===t?t=[e,e]:(t[0]=e,t[1]=e),t)}o.d(t,"a",(function(){return n})),o.d(t,"b",(function(){return r})),o.d(t,"c",(function(){return i})),o.d(t,"d",(function(){return s}))},"./node_modules/ol/source/Image.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return v})),o.d(t,"c",(function(){return b}));var n,r=o("./node_modules/ol/events/Event.js"),i=o("./node_modules/ol/ImageState.js"),s=o("./node_modules/ol/reproj/Image.js"),a=o("./node_modules/ol/source/Source.js"),l=o("./node_modules/ol/reproj/common.js"),c=o("./node_modules/ol/source/common.js"),u=o("./node_modules/ol/util.js"),d=o("./node_modules/ol/extent.js"),h=o("./node_modules/ol/proj.js"),p=o("./node_modules/ol/array.js"),f=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),m="imageloadstart",g="imageloadend",y="imageloaderror",v=function(e){function t(t,o){var n=e.call(this,t)||this;return n.image=o,n}return f(t,e),t}(r.a),_=function(e){function t(t){var o=e.call(this,{attributions:t.attributions,projection:t.projection,state:t.state})||this;return o.on,o.once,o.un,o.resolutions_=void 0!==t.resolutions?t.resolutions:null,o.reprojectedImage_=null,o.reprojectedRevision_=0,o.contextOptions_=!1===t.imageSmoothing?c.b:void 0,o}return f(t,e),t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getContextOptions=function(){return this.contextOptions_},t.prototype.findNearestResolution=function(e){if(this.resolutions_){var t=Object(p.h)(this.resolutions_,e,0);e=this.resolutions_[t]}return e},t.prototype.getImage=function(e,t,o,n){var r=this.getProjection();if(l.a&&r&&n&&!Object(h.o)(r,n)){if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Object(h.o)(this.reprojectedImage_.getProjection(),n)&&this.reprojectedImage_.getResolution()==t&&Object(d.r)(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new s.a(r,n,e,t,o,function(e,t,o){return this.getImageInternal(e,t,o,r)}.bind(this),this.contextOptions_),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}return r&&(n=r),this.getImageInternal(e,t,o,n)},t.prototype.getImageInternal=function(e,t,o,n){return Object(u.b)()},t.prototype.handleImageChange=function(e){var t=e.target;switch(t.getState()){case i.a.LOADING:this.loading=!0,this.dispatchEvent(new v(m,t));break;case i.a.LOADED:this.loading=!1,this.dispatchEvent(new v(g,t));break;case i.a.ERROR:this.loading=!1,this.dispatchEvent(new v(y,t))}},t}(a.a);function b(e,t){e.getImage().src=t}t.b=_},"./node_modules/ol/source/ImageWMS.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/source/common.js"),i=o("./node_modules/ol/events/EventType.js"),s=o("./node_modules/ol/source/Image.js"),a=o("./node_modules/ol/Image.js"),l=o("./node_modules/ol/source/WMSServerType.js"),c=o("./node_modules/ol/uri.js"),u=o("./node_modules/ol/asserts.js"),d=o("./node_modules/ol/obj.js"),h=o("./node_modules/ol/reproj.js"),p=o("./node_modules/ol/string.js"),f=o("./node_modules/ol/extent.js"),m=o("./node_modules/ol/proj.js"),g=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),y=[101,101],v=function(e){function t(t){var o=this,n=t||{};return(o=e.call(this,{attributions:n.attributions,imageSmoothing:n.imageSmoothing,projection:n.projection,resolutions:n.resolutions})||this).crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null,o.url_=n.url,o.imageLoadFunction_=void 0!==n.imageLoadFunction?n.imageLoadFunction:s.c,o.params_=n.params||{},o.v13_=!0,o.updateV13_(),o.serverType_=n.serverType,o.hidpi_=void 0===n.hidpi||n.hidpi,o.image_=null,o.imageSize_=[0,0],o.renderedRevision_=0,o.ratio_=void 0!==n.ratio?n.ratio:1.5,o}return g(t,e),t.prototype.getFeatureInfoUrl=function(e,t,o,n){if(void 0!==this.url_){var i=Object(m.t)(o),s=this.getProjection();s&&s!==i&&(t=Object(h.b)(s,i,e,t),e=Object(m.E)(e,i,s));var a=Object(f.F)(e,t,0,y),l={SERVICE:"WMS",VERSION:r.a,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object(d.a)(l,this.params_,n);var c=Math.floor((e[0]-a[0])/t),u=Math.floor((a[3]-e[1])/t);return l[this.v13_?"I":"X"]=c,l[this.v13_?"J":"Y"]=u,this.getRequestUrl_(a,y,1,s||i,l)}},t.prototype.getLegendUrl=function(e,t){if(void 0!==this.url_){var o={SERVICE:"WMS",VERSION:r.a,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===t||void 0===t.LAYER){var n=this.params_.LAYERS;if(!(!Array.isArray(n)||1===n.length))return;o.LAYER=n}if(void 0!==e){var i=this.getProjection()?this.getProjection().getMetersPerUnit():1;o.SCALE=e*i/28e-5}return Object(d.a)(o,t),Object(c.a)(this.url_,o)}},t.prototype.getParams=function(){return this.params_},t.prototype.getImageInternal=function(e,t,o,n){if(void 0===this.url_)return null;t=this.findNearestResolution(t),1==o||this.hidpi_&&void 0!==this.serverType_||(o=1);var s=t/o,l=Object(f.C)(e),c=Math.ceil(Object(f.N)(e)/s),u=Math.ceil(Object(f.G)(e)/s),h=Object(f.F)(l,s,0,[c,u]),p=Math.ceil(this.ratio_*Object(f.N)(e)/s),m=Math.ceil(this.ratio_*Object(f.G)(e)/s),g=Object(f.F)(l,s,0,[p,m]),y=this.image_;if(y&&this.renderedRevision_==this.getRevision()&&y.getResolution()==t&&y.getPixelRatio()==o&&Object(f.h)(y.getExtent(),h))return y;var v={SERVICE:"WMS",VERSION:r.a,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};Object(d.a)(v,this.params_),this.imageSize_[0]=Math.round(Object(f.N)(g)/s),this.imageSize_[1]=Math.round(Object(f.G)(g)/s);var _=this.getRequestUrl_(g,this.imageSize_,o,n,v);return this.image_=new a.a(g,t,o,_,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener(i.a.CHANGE,this.handleImageChange.bind(this)),this.image_},t.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},t.prototype.getRequestUrl_=function(e,t,o,n,r){if(Object(u.a)(void 0!==this.url_,9),r[this.v13_?"CRS":"SRS"]=n.getCode(),"STYLES"in this.params_||(r.STYLES=""),1!=o)switch(this.serverType_){case l.a.GEOSERVER:var i=90*o+.5|0;"FORMAT_OPTIONS"in r?r.FORMAT_OPTIONS+=";dpi:"+i:r.FORMAT_OPTIONS="dpi:"+i;break;case l.a.MAPSERVER:r.MAP_RESOLUTION=90*o;break;case l.a.CARMENTA_SERVER:case l.a.QGIS:r.DPI=90*o;break;default:Object(u.a)(!1,8)}r.WIDTH=t[0],r.HEIGHT=t[1];var s,a=n.getAxisOrientation();return s=this.v13_&&"ne"==a.substr(0,2)?[e[1],e[0],e[3],e[2]]:e,r.BBOX=s.join(","),Object(c.a)(this.url_,r)},t.prototype.getUrl=function(){return this.url_},t.prototype.setImageLoadFunction=function(e){this.image_=null,this.imageLoadFunction_=e,this.changed()},t.prototype.setUrl=function(e){e!=this.url_&&(this.url_=e,this.image_=null,this.changed())},t.prototype.updateParams=function(e){Object(d.a)(this.params_,e),this.updateV13_(),this.image_=null,this.changed()},t.prototype.updateV13_=function(){var e=this.params_.VERSION||r.a;this.v13_=Object(p.a)(e,"1.3")>=0},t}(s.b);t.a=v},"./node_modules/ol/source/OSM.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return s}));var n,r=o("./node_modules/ol/source/XYZ.js"),i=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),s='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.',a=function(e){function t(t){var o,n=t||{};o=void 0!==n.attributions?n.attributions:[s];var r=void 0!==n.crossOrigin?n.crossOrigin:"anonymous",i=void 0!==n.url?n.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";return e.call(this,{attributions:o,attributionsCollapsible:!1,cacheSize:n.cacheSize,crossOrigin:r,imageSmoothing:n.imageSmoothing,maxZoom:void 0!==n.maxZoom?n.maxZoom:19,opaque:void 0===n.opaque||n.opaque,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileLoadFunction:n.tileLoadFunction,transition:n.transition,url:i,wrapX:n.wrapX,zDirection:n.zDirection})||this}return i(t,e),t}(r.a);t.b=a},"./node_modules/ol/source/Source.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/Object.js"),i=o("./node_modules/ol/source/State.js"),s=o("./node_modules/ol/util.js"),a=o("./node_modules/ol/proj.js"),l=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),c=function(e){function t(t){var o=e.call(this)||this;o.projection=Object(a.t)(t.projection),o.attributions_=u(t.attributions),o.attributionsCollapsible_=void 0===t.attributionsCollapsible||t.attributionsCollapsible,o.loading=!1,o.state_=void 0!==t.state?t.state:i.a.READY,o.wrapX_=void 0!==t.wrapX&&t.wrapX,o.viewResolver=null,o.viewRejector=null;var n=o;return o.viewPromise_=new Promise((function(e,t){n.viewResolver=e,n.viewRejector=t})),o}return l(t,e),t.prototype.getAttributions=function(){return this.attributions_},t.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},t.prototype.getProjection=function(){return this.projection},t.prototype.getResolutions=function(){return Object(s.b)()},t.prototype.getView=function(){return this.viewPromise_},t.prototype.getState=function(){return this.state_},t.prototype.getWrapX=function(){return this.wrapX_},t.prototype.getContextOptions=function(){},t.prototype.refresh=function(){this.changed()},t.prototype.setAttributions=function(e){this.attributions_=u(e),this.changed()},t.prototype.setState=function(e){this.state_=e,this.changed()},t}(r.b);function u(e){return e?Array.isArray(e)?function(t){return e}:"function"==typeof e?e:function(t){return[e]}:null}t.a=c},"./node_modules/ol/source/State.js":function(e,t,o){"use strict";t.a={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"}},"./node_modules/ol/source/Tile.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return g}));var n,r=o("./node_modules/ol/events/Event.js"),i=o("./node_modules/ol/source/Source.js"),s=o("./node_modules/ol/TileCache.js"),a=o("./node_modules/ol/TileState.js"),l=o("./node_modules/ol/util.js"),c=o("./node_modules/ol/asserts.js"),u=o("./node_modules/ol/proj.js"),d=o("./node_modules/ol/tilecoord.js"),h=o("./node_modules/ol/tilegrid.js"),p=o("./node_modules/ol/size.js"),f=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),m=function(e){function t(t){var o=e.call(this,{attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX})||this;o.on,o.once,o.un,o.opaque_=void 0!==t.opaque&&t.opaque,o.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,o.tileGrid=void 0!==t.tileGrid?t.tileGrid:null;var n=t.tileGrid;return n&&Object(p.d)(n.getTileSize(n.getMinZoom()),[256,256]),o.tileCache=new s.a(t.cacheSize||0),o.tmpSize=[0,0],o.key_=t.key||"",o.tileOptions={transition:t.transition},o.zDirection=t.zDirection?t.zDirection:0,o}return f(t,e),t.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},t.prototype.expireCache=function(e,t){var o=this.getTileCacheForProjection(e);o&&o.expireCache(t)},t.prototype.forEachLoadedTile=function(e,t,o,n){var r=this.getTileCacheForProjection(e);if(!r)return!1;for(var i,s,l,c=!0,u=o.minX;u<=o.maxX;++u)for(var h=o.minY;h<=o.maxY;++h)s=Object(d.e)(t,u,h),l=!1,r.containsKey(s)&&(l=(i=r.get(s)).getState()===a.a.LOADED)&&(l=!1!==n(i)),l||(c=!1);return c},t.prototype.getGutterForProjection=function(e){return 0},t.prototype.getKey=function(){return this.key_},t.prototype.setKey=function(e){this.key_!==e&&(this.key_=e,this.changed())},t.prototype.getOpaque=function(e){return this.opaque_},t.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},t.prototype.getTile=function(e,t,o,n,r){return Object(l.b)()},t.prototype.getTileGrid=function(){return this.tileGrid},t.prototype.getTileGridForProjection=function(e){return this.tileGrid?this.tileGrid:Object(h.e)(e)},t.prototype.getTileCacheForProjection=function(e){return Object(c.a)(Object(u.o)(this.getProjection(),e),68),this.tileCache},t.prototype.getTilePixelRatio=function(e){return this.tilePixelRatio_},t.prototype.getTilePixelSize=function(e,t,o){var n=this.getTileGridForProjection(o),r=this.getTilePixelRatio(t),i=Object(p.d)(n.getTileSize(e),this.tmpSize);return 1==r?i:Object(p.c)(i,r,this.tmpSize)},t.prototype.getTileCoordForTileUrlFunction=function(e,t){var o=void 0!==t?t:this.getProjection(),n=this.getTileGridForProjection(o);return this.getWrapX()&&o.isGlobal()&&(e=Object(h.f)(n,e,o)),Object(d.g)(e,n)?e:null},t.prototype.clear=function(){this.tileCache.clear()},t.prototype.refresh=function(){this.clear(),e.prototype.refresh.call(this)},t.prototype.updateCacheSize=function(e,t){var o=this.getTileCacheForProjection(t);e>o.highWaterMark&&(o.highWaterMark=e)},t.prototype.useTile=function(e,t,o,n){},t}(i.a),g=function(e){function t(t,o){var n=e.call(this,t)||this;return n.tile=o,n}return f(t,e),t}(r.a);t.b=m},"./node_modules/ol/source/TileEventType.js":function(e,t,o){"use strict";t.a={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"}},"./node_modules/ol/source/TileImage.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/events/EventType.js"),i=o("./node_modules/ol/ImageTile.js"),s=o("./node_modules/ol/reproj/Tile.js"),a=o("./node_modules/ol/TileCache.js"),l=o("./node_modules/ol/TileState.js"),c=o("./node_modules/ol/source/UrlTile.js"),u=o("./node_modules/ol/reproj/common.js"),d=o("./node_modules/ol/source/common.js"),h=o("./node_modules/ol/proj.js"),p=o("./node_modules/ol/tilecoord.js"),f=o("./node_modules/ol/tilegrid.js"),m=o("./node_modules/ol/util.js"),g=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),y=function(e){function t(t){var o=e.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:v,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})||this;return o.crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,o.tileClass=void 0!==t.tileClass?t.tileClass:i.a,o.tileCacheForProjection={},o.tileGridForProjection={},o.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,o.contextOptions_=!1===t.imageSmoothing?d.b:void 0,o.renderReprojectionEdges_=!1,o}return g(t,e),t.prototype.canExpireCache=function(){if(!u.a)return e.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},t.prototype.expireCache=function(t,o){if(u.a){var n=this.getTileCacheForProjection(t);for(var r in this.tileCache.expireCache(this.tileCache==n?o:{}),this.tileCacheForProjection){var i=this.tileCacheForProjection[r];i.expireCache(i==n?o:{})}}else e.prototype.expireCache.call(this,t,o)},t.prototype.getContextOptions=function(){return this.contextOptions_},t.prototype.getGutterForProjection=function(e){return u.a&&this.getProjection()&&e&&!Object(h.o)(this.getProjection(),e)?0:this.getGutter()},t.prototype.getGutter=function(){return 0},t.prototype.getKey=function(){return e.prototype.getKey.call(this)+(this.contextOptions_?"\n"+JSON.stringify(this.contextOptions_):"")},t.prototype.getOpaque=function(t){return!(u.a&&this.getProjection()&&t&&!Object(h.o)(this.getProjection(),t))&&e.prototype.getOpaque.call(this,t)},t.prototype.getTileGridForProjection=function(t){if(!u.a)return e.prototype.getTileGridForProjection.call(this,t);var o=this.getProjection();if(!this.tileGrid||o&&!Object(h.o)(o,t)){var n=Object(m.c)(t);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=Object(f.e)(t)),this.tileGridForProjection[n]}return this.tileGrid},t.prototype.getTileCacheForProjection=function(t){if(!u.a)return e.prototype.getTileCacheForProjection.call(this,t);var o=this.getProjection();if(!o||Object(h.o)(o,t))return this.tileCache;var n=Object(m.c)(t);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new a.a(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]},t.prototype.createTile_=function(e,t,o,n,i,s){var a=[e,t,o],c=this.getTileCoordForTileUrlFunction(a,i),u=c?this.tileUrlFunction(c,n,i):void 0,d=new this.tileClass(a,void 0!==u?l.a.IDLE:l.a.EMPTY,void 0!==u?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return d.key=s,d.addEventListener(r.a.CHANGE,this.handleTileChange.bind(this)),d},t.prototype.getTile=function(e,t,o,n,r){var i=this.getProjection();if(u.a&&i&&r&&!Object(h.o)(i,r)){var a=this.getTileCacheForProjection(r),l=[e,t,o],c=void 0,d=Object(p.d)(l);a.containsKey(d)&&(c=a.get(d));var f=this.getKey();if(c&&c.key==f)return c;var m=this.getTileGridForProjection(i),g=this.getTileGridForProjection(r),y=this.getTileCoordForTileUrlFunction(l,r),v=new s.a(i,m,r,g,l,y,this.getTilePixelRatio(n),this.getGutter(),function(e,t,o,n){return this.getTileInternal(e,t,o,n,i)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.contextOptions_);return v.key=f,c?(v.interimTile=c,v.refreshInterimChain(),a.replace(d,v)):a.set(d,v),v}return this.getTileInternal(e,t,o,n,i||r)},t.prototype.getTileInternal=function(e,t,o,n,r){var i=null,s=Object(p.e)(e,t,o),a=this.getKey();if(this.tileCache.containsKey(s)){if((i=this.tileCache.get(s)).key!=a){var c=i;i=this.createTile_(e,t,o,n,r,a),c.getState()==l.a.IDLE?i.interimTile=c.interimTile:i.interimTile=c,i.refreshInterimChain(),this.tileCache.replace(s,i)}}else i=this.createTile_(e,t,o,n,r,a),this.tileCache.set(s,i);return i},t.prototype.setRenderReprojectionEdges=function(e){if(u.a&&this.renderReprojectionEdges_!=e){for(var t in this.renderReprojectionEdges_=e,this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}},t.prototype.setTileGridForProjection=function(e,t){if(u.a){var o=Object(h.t)(e);if(o){var n=Object(m.c)(o);n in this.tileGridForProjection||(this.tileGridForProjection[n]=t)}}},t}(c.a);function v(e,t){e.getImage().src=t}t.a=y},"./node_modules/ol/source/TileJSON.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/source/State.js"),i=o("./node_modules/ol/source/TileImage.js"),s=o("./node_modules/ol/extent.js"),a=o("./node_modules/ol/asserts.js"),l=o("./node_modules/ol/tileurlfunction.js"),c=o("./node_modules/ol/tilegrid.js"),u=o("./node_modules/ol/proj.js"),d=o("./node_modules/ol/net.js"),h=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),p=function(e){function t(t){var o=e.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,imageSmoothing:t.imageSmoothing,projection:Object(u.t)("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:r.a.LOADING,tileLoadFunction:t.tileLoadFunction,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection})||this;if(o.tileJSON_=null,o.tileSize_=t.tileSize,t.url)if(t.jsonp)Object(d.d)(t.url,o.handleTileJSONResponse.bind(o),o.handleTileJSONError.bind(o));else{var n=new XMLHttpRequest;n.addEventListener("load",o.onXHRLoad_.bind(o)),n.addEventListener("error",o.onXHRError_.bind(o)),n.open("GET",t.url),n.send()}else t.tileJSON?o.handleTileJSONResponse(t.tileJSON):Object(a.a)(!1,51);return o}return h(t,e),t.prototype.onXHRLoad_=function(e){var t=e.target;if(!t.status||t.status>=200&&t.status<300){var o=void 0;try{o=JSON.parse(t.responseText)}catch(e){return void this.handleTileJSONError()}this.handleTileJSONResponse(o)}else this.handleTileJSONError()},t.prototype.onXHRError_=function(e){this.handleTileJSONError()},t.prototype.getTileJSON=function(){return this.tileJSON_},t.prototype.handleTileJSONResponse=function(e){var t,o=Object(u.t)("EPSG:4326"),n=this.getProjection();if(void 0!==e.bounds){var i=Object(u.w)(o,n);t=Object(s.a)(e.bounds,i)}var a=Object(c.d)(n),d=e.minzoom||0,h=e.maxzoom||22,p=Object(c.c)({extent:a,maxZoom:h,minZoom:d,tileSize:this.tileSize_});if(this.tileGrid=p,this.tileUrlFunction=Object(l.b)(e.tiles,p),void 0!==e.attribution&&!this.getAttributions()){var f=void 0!==t?t:a;this.setAttributions((function(t){return Object(s.O)(f,t.extent)?[e.attribution]:null}))}this.tileJSON_=e,this.setState(r.a.READY)},t.prototype.handleTileJSONError=function(){this.setState(r.a.ERROR)},t}(i.a);t.a=p},"./node_modules/ol/source/TileWMS.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/source/common.js"),i=o("./node_modules/ol/source/TileImage.js"),s=o("./node_modules/ol/source/WMSServerType.js"),a=o("./node_modules/ol/uri.js"),l=o("./node_modules/ol/asserts.js"),c=o("./node_modules/ol/obj.js"),u=o("./node_modules/ol/extent.js"),d=o("./node_modules/ol/size.js"),h=o("./node_modules/ol/reproj.js"),p=o("./node_modules/ol/string.js"),f=o("./node_modules/ol/proj.js"),m=o("./node_modules/ol/math.js"),g=o("./node_modules/ol/tilecoord.js"),y=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),v=function(e){function t(t){var o=this,n=t||{},r=n.params||{},i=!("TRANSPARENT"in r)||r.TRANSPARENT;return(o=e.call(this,{attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,imageSmoothing:n.imageSmoothing,opaque:!i,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileClass:n.tileClass,tileGrid:n.tileGrid,tileLoadFunction:n.tileLoadFunction,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition,zDirection:n.zDirection})||this).gutter_=void 0!==n.gutter?n.gutter:0,o.params_=r,o.v13_=!0,o.serverType_=n.serverType,o.hidpi_=void 0===n.hidpi||n.hidpi,o.tmpExtent_=Object(u.k)(),o.updateV13_(),o.setKey(o.getKeyForParams_()),o}return y(t,e),t.prototype.getFeatureInfoUrl=function(e,t,o,n){var i=Object(f.t)(o),s=this.getProjection(),a=this.getTileGrid();a||(a=this.getTileGridForProjection(i));var l=a.getZForResolution(t,this.zDirection),p=a.getTileCoordForCoordAndZ(e,l);if(!(a.getResolutions().length<=p[0])){var m=a.getResolution(p[0]),g=a.getTileCoordExtent(p,this.tmpExtent_),y=Object(d.d)(a.getTileSize(p[0]),this.tmpSize),v=this.gutter_;0!==v&&(y=Object(d.a)(y,v,this.tmpSize),g=Object(u.d)(g,m*v,g)),s&&s!==i&&(m=Object(h.b)(s,i,e,m),g=Object(f.F)(g,i,s),e=Object(f.E)(e,i,s));var _={SERVICE:"WMS",VERSION:r.a,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object(c.a)(_,this.params_,n);var b=Math.floor((e[0]-g[0])/m),w=Math.floor((g[3]-e[1])/m);return _[this.v13_?"I":"X"]=b,_[this.v13_?"J":"Y"]=w,this.getRequestUrl_(p,y,g,1,s||i,_)}},t.prototype.getLegendUrl=function(e,t){if(void 0!==this.urls[0]){var o={SERVICE:"WMS",VERSION:r.a,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===t||void 0===t.LAYER){var n=this.params_.LAYERS;if(!(!Array.isArray(n)||1===n.length))return;o.LAYER=n}if(void 0!==e){var i=this.getProjection()?this.getProjection().getMetersPerUnit():1;o.SCALE=e*i/28e-5}return Object(c.a)(o,t),Object(a.a)(this.urls[0],o)}},t.prototype.getGutter=function(){return this.gutter_},t.prototype.getParams=function(){return this.params_},t.prototype.getRequestUrl_=function(e,t,o,n,r,i){var c=this.urls;if(c){if(i.WIDTH=t[0],i.HEIGHT=t[1],i[this.v13_?"CRS":"SRS"]=r.getCode(),"STYLES"in this.params_||(i.STYLES=""),1!=n)switch(this.serverType_){case s.a.GEOSERVER:var u=90*n+.5|0;"FORMAT_OPTIONS"in i?i.FORMAT_OPTIONS+=";dpi:"+u:i.FORMAT_OPTIONS="dpi:"+u;break;case s.a.MAPSERVER:i.MAP_RESOLUTION=90*n;break;case s.a.CARMENTA_SERVER:case s.a.QGIS:i.DPI=90*n;break;default:Object(l.a)(!1,52)}var d,h=r.getAxisOrientation(),p=o;if(this.v13_&&"ne"==h.substr(0,2)){var f=void 0;f=o[0],p[0]=o[1],p[1]=f,f=o[2],p[2]=o[3],p[3]=f}if(i.BBOX=p.join(","),1==c.length)d=c[0];else d=c[Object(m.e)(Object(g.f)(e),c.length)];return Object(a.a)(d,i)}},t.prototype.getTilePixelRatio=function(e){return this.hidpi_&&void 0!==this.serverType_?e:1},t.prototype.getKeyForParams_=function(){var e=0,t=[];for(var o in this.params_)t[e++]=o+"-"+this.params_[o];return t.join("/")},t.prototype.updateParams=function(e){Object(c.a)(this.params_,e),this.updateV13_(),this.setKey(this.getKeyForParams_())},t.prototype.updateV13_=function(){var e=this.params_.VERSION||r.a;this.v13_=Object(p.a)(e,"1.3")>=0},t.prototype.tileUrlFunction=function(e,t,o){var n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(o)),!(n.getResolutions().length<=e[0])){1==t||this.hidpi_&&void 0!==this.serverType_||(t=1);var i=n.getResolution(e[0]),s=n.getTileCoordExtent(e,this.tmpExtent_),a=Object(d.d)(n.getTileSize(e[0]),this.tmpSize),l=this.gutter_;0!==l&&(a=Object(d.a)(a,l,this.tmpSize),s=Object(u.d)(s,i*l,s)),1!=t&&(a=Object(d.c)(a,t,this.tmpSize));var h={SERVICE:"WMS",VERSION:r.a,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return Object(c.a)(h,this.params_),this.getRequestUrl_(e,a,s,t,o,h)}},t}(i.a);t.a=v},"./node_modules/ol/source/UrlTile.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/source/TileEventType.js"),i=o("./node_modules/ol/source/Tile.js"),s=o("./node_modules/ol/TileState.js"),a=o("./node_modules/ol/tileurlfunction.js"),l=o("./node_modules/ol/tilecoord.js"),c=o("./node_modules/ol/util.js"),u=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),d=function(e){function t(o){var n=e.call(this,{attributions:o.attributions,cacheSize:o.cacheSize,opaque:o.opaque,projection:o.projection,state:o.state,tileGrid:o.tileGrid,tilePixelRatio:o.tilePixelRatio,wrapX:o.wrapX,transition:o.transition,key:o.key,attributionsCollapsible:o.attributionsCollapsible,zDirection:o.zDirection})||this;return n.generateTileUrlFunction_=n.tileUrlFunction===t.prototype.tileUrlFunction,n.tileLoadFunction=o.tileLoadFunction,o.tileUrlFunction&&(n.tileUrlFunction=o.tileUrlFunction),n.urls=null,o.urls?n.setUrls(o.urls):o.url&&n.setUrl(o.url),n.tileLoadingKeys_={},n}return u(t,e),t.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},t.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},t.prototype.getUrls=function(){return this.urls},t.prototype.handleTileChange=function(e){var t,o=e.target,n=Object(c.c)(o),a=o.getState();a==s.a.LOADING?(this.tileLoadingKeys_[n]=!0,t=r.a.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],t=a==s.a.ERROR?r.a.TILELOADERROR:a==s.a.LOADED?r.a.TILELOADEND:void 0),null!=t&&this.dispatchEvent(new i.a(t,o))},t.prototype.setTileLoadFunction=function(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()},t.prototype.setTileUrlFunction=function(e,t){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),void 0!==t?this.setKey(t):this.changed()},t.prototype.setUrl=function(e){var t=Object(a.d)(e);this.urls=t,this.setUrls(t)},t.prototype.setUrls=function(e){this.urls=e;var t=e.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(Object(a.b)(e,this.tileGrid),t):this.setKey(t)},t.prototype.tileUrlFunction=function(e,t,o){},t.prototype.useTile=function(e,t,o){var n=Object(l.e)(e,t,o);this.tileCache.containsKey(n)&&this.tileCache.get(n)},t}(i.b);t.a=d},"./node_modules/ol/source/Vector.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return O}));var n,r=o("./node_modules/ol/Collection.js"),i=o("./node_modules/ol/CollectionEventType.js"),s=o("./node_modules/ol/events/Event.js"),a=o("./node_modules/ol/events/EventType.js"),l=o("./node_modules/ol/ObjectEventType.js"),c=o("./node_modules/ol/structs/RBush.js"),u=o("./node_modules/ol/source/Source.js"),d=o("./node_modules/ol/source/State.js"),h=o("./node_modules/ol/source/VectorEventType.js"),p=o("./node_modules/ol/functions.js"),f=o("./node_modules/ol/loadingstrategy.js"),m=o("./node_modules/ol/asserts.js"),g=o("./node_modules/ol/extent.js"),y=o("./node_modules/ol/array.js"),v=o("./node_modules/ol/util.js"),_=o("./node_modules/ol/obj.js"),b=o("./node_modules/ol/events.js"),w=o("./node_modules/ol/featureloader.js"),E=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),O=function(e){function t(t,o,n){var r=e.call(this,t)||this;return r.feature=o,r.features=n,r}return E(t,e),t}(s.a),S=function(e){function t(t){var o=this,n=t||{};(o=e.call(this,{attributions:n.attributions,projection:void 0,state:d.a.READY,wrapX:void 0===n.wrapX||n.wrapX})||this).on,o.once,o.un,o.loader_=p.c,o.format_=n.format,o.overlaps_=void 0===n.overlaps||n.overlaps,o.url_=n.url,void 0!==n.loader?o.loader_=n.loader:void 0!==o.url_&&(Object(m.a)(o.format_,7),o.loader_=Object(w.c)(o.url_,o.format_)),o.strategy_=void 0!==n.strategy?n.strategy:f.a;var i,s,a=void 0===n.useSpatialIndex||n.useSpatialIndex;return o.featuresRtree_=a?new c.a:null,o.loadedExtentsRtree_=new c.a,o.loadingExtentsCount_=0,o.nullGeometryFeatures_={},o.idIndex_={},o.uidIndex_={},o.featureChangeKeys_={},o.featuresCollection_=null,Array.isArray(n.features)?s=n.features:n.features&&(s=(i=n.features).getArray()),a||void 0!==i||(i=new r.b(s)),void 0!==s&&o.addFeaturesInternal(s),void 0!==i&&o.bindFeaturesCollection_(i),o}return E(t,e),t.prototype.addFeature=function(e){this.addFeatureInternal(e),this.changed()},t.prototype.addFeatureInternal=function(e){var t=Object(v.c)(e);if(this.addToIndex_(t,e)){this.setupChangeEvents_(t,e);var o=e.getGeometry();if(o){var n=o.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new O(h.a.ADDFEATURE,e))}else this.featuresCollection_&&this.featuresCollection_.remove(e)},t.prototype.setupChangeEvents_=function(e,t){this.featureChangeKeys_[e]=[Object(b.a)(t,a.a.CHANGE,this.handleFeatureChange_,this),Object(b.a)(t,l.a.PROPERTYCHANGE,this.handleFeatureChange_,this)]},t.prototype.addToIndex_=function(e,t){var o=!0,n=t.getId();return void 0!==n&&(n.toString()in this.idIndex_?o=!1:this.idIndex_[n.toString()]=t),o&&(Object(m.a)(!(e in this.uidIndex_),30),this.uidIndex_[e]=t),o},t.prototype.addFeatures=function(e){this.addFeaturesInternal(e),this.changed()},t.prototype.addFeaturesInternal=function(e){for(var t=[],o=[],n=[],r=0,i=e.length;r<i;r++){var s=e[r],a=Object(v.c)(s);this.addToIndex_(a,s)&&o.push(s)}r=0;for(var l=o.length;r<l;r++){s=o[r],a=Object(v.c)(s);this.setupChangeEvents_(a,s);var c=s.getGeometry();if(c){var u=c.getExtent();t.push(u),n.push(s)}else this.nullGeometryFeatures_[a]=s}this.featuresRtree_&&this.featuresRtree_.load(t,n);r=0;for(var d=o.length;r<d;r++)this.dispatchEvent(new O(h.a.ADDFEATURE,o[r]))},t.prototype.bindFeaturesCollection_=function(e){var t=!1;this.addEventListener(h.a.ADDFEATURE,(function(o){t||(t=!0,e.push(o.feature),t=!1)})),this.addEventListener(h.a.REMOVEFEATURE,(function(o){t||(t=!0,e.remove(o.feature),t=!1)})),e.addEventListener(i.a.ADD,function(e){t||(t=!0,this.addFeature(e.element),t=!1)}.bind(this)),e.addEventListener(i.a.REMOVE,function(e){t||(t=!0,this.removeFeature(e.element),t=!1)}.bind(this)),this.featuresCollection_=e},t.prototype.clear=function(e){if(e){for(var t in this.featureChangeKeys_){this.featureChangeKeys_[t].forEach(b.c)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(var o in this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this)),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[o]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var n=new O(h.a.CLEAR);this.dispatchEvent(n),this.changed()},t.prototype.forEachFeature=function(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},t.prototype.forEachFeatureAtCoordinateDirect=function(e,t){var o=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(o,(function(o){return o.getGeometry().intersectsCoordinate(e)?t(o):void 0}))},t.prototype.forEachFeatureInExtent=function(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},t.prototype.forEachFeatureIntersectingExtent=function(e,t){return this.forEachFeatureInExtent(e,(function(o){if(o.getGeometry().intersectsExtent(e)){var n=t(o);if(n)return n}}))},t.prototype.getFeaturesCollection=function(){return this.featuresCollection_},t.prototype.getFeatures=function(){var e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Object(_.d)(this.nullGeometryFeatures_)||Object(y.c)(e,Object(_.c)(this.nullGeometryFeatures_))),e},t.prototype.getFeaturesAtCoordinate=function(e){var t=[];return this.forEachFeatureAtCoordinateDirect(e,(function(e){t.push(e)})),t},t.prototype.getFeaturesInExtent=function(e){return this.featuresRtree_?this.featuresRtree_.getInExtent(e):this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]},t.prototype.getClosestFeatureToCoordinate=function(e,t){var o=e[0],n=e[1],r=null,i=[NaN,NaN],s=1/0,a=[-1/0,-1/0,1/0,1/0],l=t||p.b;return this.featuresRtree_.forEachInExtent(a,(function(e){if(l(e)){var t=e.getGeometry(),c=s;if((s=t.closestPointXY(o,n,i,s))<c){r=e;var u=Math.sqrt(s);a[0]=o-u,a[1]=n-u,a[2]=o+u,a[3]=n+u}}})),r},t.prototype.getExtent=function(e){return this.featuresRtree_.getExtent(e)},t.prototype.getFeatureById=function(e){var t=this.idIndex_[e.toString()];return void 0!==t?t:null},t.prototype.getFeatureByUid=function(e){var t=this.uidIndex_[e];return void 0!==t?t:null},t.prototype.getFormat=function(){return this.format_},t.prototype.getOverlaps=function(){return this.overlaps_},t.prototype.getUrl=function(){return this.url_},t.prototype.handleFeatureChange_=function(e){var t=e.target,o=Object(v.c)(t),n=t.getGeometry();if(n){var r=n.getExtent();o in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[o],this.featuresRtree_&&this.featuresRtree_.insert(r,t)):this.featuresRtree_&&this.featuresRtree_.update(r,t)}else o in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[o]=t);var i=t.getId();if(void 0!==i){var s=i.toString();this.idIndex_[s]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[s]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[o]=t;this.changed(),this.dispatchEvent(new O(h.a.CHANGEFEATURE,t))},t.prototype.hasFeature=function(e){var t=e.getId();return void 0!==t?t in this.idIndex_:Object(v.c)(e)in this.uidIndex_},t.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&Object(_.d)(this.nullGeometryFeatures_)},t.prototype.loadFeatures=function(e,t,o){for(var n=this.loadedExtentsRtree_,r=this.strategy_(e,t,o),i=function(e,i){var a=r[e];n.forEachInExtent(a,(function(e){return Object(g.h)(e.extent,a)}))||(++s.loadingExtentsCount_,s.dispatchEvent(new O(h.a.FEATURESLOADSTART)),s.loader_.call(s,a,t,o,function(e){--this.loadingExtentsCount_,this.dispatchEvent(new O(h.a.FEATURESLOADEND,void 0,e))}.bind(s),function(){--this.loadingExtentsCount_,this.dispatchEvent(new O(h.a.FEATURESLOADERROR))}.bind(s)),n.insert(a,{extent:a.slice()}))},s=this,a=0,l=r.length;a<l;++a)i(a);this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0},t.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),e.prototype.refresh.call(this)},t.prototype.removeLoadedExtent=function(e){var t,o=this.loadedExtentsRtree_;o.forEachInExtent(e,(function(o){if(Object(g.r)(o.extent,e))return t=o,!0})),t&&o.remove(t)},t.prototype.removeFeature=function(e){var t=Object(v.c)(e);t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e),this.changed()},t.prototype.removeFeatureInternal=function(e){var t=Object(v.c)(e);this.featureChangeKeys_[t].forEach(b.c),delete this.featureChangeKeys_[t];var o=e.getId();void 0!==o&&delete this.idIndex_[o.toString()],delete this.uidIndex_[t],this.dispatchEvent(new O(h.a.REMOVEFEATURE,e))},t.prototype.removeFromIdIndex_=function(e){var t=!1;for(var o in this.idIndex_)if(this.idIndex_[o]===e){delete this.idIndex_[o],t=!0;break}return t},t.prototype.setLoader=function(e){this.loader_=e},t.prototype.setUrl=function(e){Object(m.a)(this.format_,7),this.url_=e,this.setLoader(Object(w.c)(e,this.format_))},t}(u.a);t.b=S},"./node_modules/ol/source/VectorEventType.js":function(e,t,o){"use strict";t.a={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"}},"./node_modules/ol/source/VectorTile.js":function(e,t,o){"use strict";o.d(t,"b",(function(){return v}));var n,r=o("./node_modules/ol/events/EventType.js"),i=o("./node_modules/ol/VectorTile.js"),s=o("./node_modules/ol/TileCache.js"),a=o("./node_modules/ol/TileState.js"),l=o("./node_modules/ol/source/UrlTile.js"),c=o("./node_modules/ol/VectorRenderTile.js"),u=o("./node_modules/ol/extent.js"),d=o("./node_modules/ol/tilegrid.js"),h=o("./node_modules/ol/tilecoord.js"),p=o("./node_modules/ol/obj.js"),f=o("./node_modules/ol/featureloader.js"),m=o("./node_modules/ol/size.js"),g=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),y=function(e){function t(t){var o=this,n=t.projection||"EPSG:3857",r=t.extent||Object(d.d)(n),a=t.tileGrid||Object(d.c)({extent:r,maxResolution:t.maxResolution,maxZoom:void 0!==t.maxZoom?t.maxZoom:22,minZoom:t.minZoom,tileSize:t.tileSize||512});return(o=e.call(this,{attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,opaque:!1,projection:n,state:t.state,tileGrid:a,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:v,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:void 0===t.zDirection?1:t.zDirection})||this).format_=t.format?t.format:null,o.sourceTileCache=new s.a(o.tileCache.highWaterMark),o.overlaps_=null==t.overlaps||t.overlaps,o.tileClass=t.tileClass?t.tileClass:i.a,o.tileGrids_={},o}return g(t,e),t.prototype.getFeaturesInExtent=function(e){var t=[],o=this.tileCache;if(0===o.getCount())return t;var n=Object(h.b)(o.peekFirstKey())[0],r=this.tileGrid;return o.forEach((function(o){if(o.tileCoord[0]===n&&o.getState()===a.a.LOADED)for(var i=o.getSourceTiles(),s=0,l=i.length;s<l;++s){var c=i[s],d=c.tileCoord;if(Object(u.O)(e,r.getTileCoordExtent(d))){var h=c.getFeatures();if(h)for(var p=0,f=h.length;p<f;++p){var m=h[p],g=m.getGeometry();Object(u.O)(e,g.getExtent())&&t.push(m)}}}})),t},t.prototype.getOverlaps=function(){return this.overlaps_},t.prototype.clear=function(){this.tileCache.clear(),this.sourceTileCache.clear()},t.prototype.expireCache=function(t,o){var n=this.getTileCacheForProjection(t),r=Object.keys(o).reduce((function(e,t){var o=Object(h.c)(t);if(n.containsKey(o))for(var r=n.get(o).sourceTiles,i=0,s=r.length;i<s;++i)e[r[i].getKey()]=!0;return e}),{});e.prototype.expireCache.call(this,t,o),this.sourceTileCache.expireCache(r)},t.prototype.getSourceTiles=function(e,t,o){var n=this;if(o.getState()===a.a.IDLE){o.setState(a.a.LOADING);var i=o.wrappedTileCoord,s=this.getTileGridForProjection(t),l=s.getTileCoordExtent(i),c=i[0],d=s.getResolution(c);Object(u.d)(l,-d,l);var h=this.tileGrid,f=h.getExtent();f&&Object(u.H)(l,f,l);var m=h.getZForResolution(d,1);h.forEachTileCoord(l,m,(function(i){var s=n.tileUrlFunction(i,e,t),l=n.sourceTileCache.containsKey(s)?n.sourceTileCache.get(s):new n.tileClass(i,s?a.a.IDLE:a.a.EMPTY,s,n.format_,n.tileLoadFunction);o.sourceTiles.push(l);var c=l.getState();if(c<a.a.LOADED){var u=function(e){n.handleTileChange(e);var t=l.getState();if(t===a.a.LOADED||t===a.a.ERROR){var i=l.getKey();i in o.errorTileKeys?l.getState()===a.a.LOADED&&delete o.errorTileKeys[i]:o.loadingSourceTiles--,t===a.a.ERROR?o.errorTileKeys[i]=!0:l.removeEventListener(r.a.CHANGE,u),0===o.loadingSourceTiles&&o.setState(Object(p.d)(o.errorTileKeys)?a.a.LOADED:a.a.ERROR)}};l.addEventListener(r.a.CHANGE,u),o.loadingSourceTiles++}c===a.a.IDLE&&(l.extent=h.getTileCoordExtent(i),l.projection=t,l.resolution=h.getResolution(i[0]),n.sourceTileCache.set(s,l),l.load())})),o.loadingSourceTiles||o.setState(o.sourceTiles.some((function(e){return e.getState()===a.a.ERROR}))?a.a.ERROR:a.a.LOADED)}return o.sourceTiles},t.prototype.getTile=function(e,t,o,n,r){var i,s=Object(h.e)(e,t,o),l=this.getKey();if(this.tileCache.containsKey(s)&&(i=this.tileCache.get(s)).key===l)return i;var d=[e,t,o],p=this.getTileCoordForTileUrlFunction(d,r),f=this.getTileGrid().getExtent(),m=this.getTileGridForProjection(r);if(p&&f){var g=m.getTileCoordExtent(p);Object(u.d)(g,-m.getResolution(e),g),Object(u.O)(f,g)||(p=null)}var y=!0;if(null!==p){var v=this.tileGrid,_=m.getResolution(e),b=v.getZForResolution(_,1),w=m.getTileCoordExtent(p);Object(u.d)(w,-_,w),v.forEachTileCoord(w,b,function(e){y=y&&!this.tileUrlFunction(e,n,r)}.bind(this))}var E=new c.a(d,y?a.a.EMPTY:a.a.IDLE,p,this.getSourceTiles.bind(this,n,r));return E.key=l,i?(E.interimTile=i,E.refreshInterimChain(),this.tileCache.replace(s,E)):this.tileCache.set(s,E),E},t.prototype.getTileGridForProjection=function(e){var t=e.getCode(),o=this.tileGrids_[t];if(!o){var n=this.tileGrid;o=Object(d.b)(e,void 0,n?n.getTileSize(n.getMinZoom()):void 0),this.tileGrids_[t]=o}return o},t.prototype.getTilePixelRatio=function(e){return e},t.prototype.getTilePixelSize=function(e,t,o){var n=this.getTileGridForProjection(o),r=Object(m.d)(n.getTileSize(e),this.tmpSize);return[Math.round(r[0]*t),Math.round(r[1]*t)]},t.prototype.updateCacheSize=function(t,o){e.prototype.updateCacheSize.call(this,2*t,o),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(o).highWaterMark},t}(l.a);function v(e,t){e.setLoader((function(o,n,r){Object(f.a)(t,e.getFormat(),o,n,r,e.onLoad.bind(e),e.onError.bind(e))}))}t.a=y},"./node_modules/ol/source/WMSServerType.js":function(e,t,o){"use strict";t.a={CARMENTA_SERVER:"carmentaserver",GEOSERVER:"geoserver",MAPSERVER:"mapserver",QGIS:"qgis"}},"./node_modules/ol/source/WMTS.js":function(e,t,o){"use strict";o.d(t,"b",(function(){return g}));var n,r=o("./node_modules/ol/source/TileImage.js"),i="KVP",s="REST",a=o("./node_modules/ol/uri.js"),l=o("./node_modules/ol/obj.js"),c=o("./node_modules/ol/extent.js"),u=o("./node_modules/ol/tilegrid/WMTS.js"),d=o("./node_modules/ol/tileurlfunction.js"),h=o("./node_modules/ol/proj.js"),p=o("./node_modules/ol/array.js"),f=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),m=function(e){function t(t){var o=this,n=void 0!==t.requestEncoding?t.requestEncoding:i,r=t.tileGrid,s=t.urls;return void 0===s&&void 0!==t.url&&(s=Object(d.d)(t.url)),(o=e.call(this,{attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,imageSmoothing:t.imageSmoothing,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:r,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,urls:s,wrapX:void 0!==t.wrapX&&t.wrapX,transition:t.transition,zDirection:t.zDirection})||this).version_=void 0!==t.version?t.version:"1.0.0",o.format_=void 0!==t.format?t.format:"image/jpeg",o.dimensions_=void 0!==t.dimensions?t.dimensions:{},o.layer_=t.layer,o.matrixSet_=t.matrixSet,o.style_=t.style,o.requestEncoding_=n,o.setKey(o.getKeyForDimensions_()),s&&s.length>0&&(o.tileUrlFunction=Object(d.c)(s.map(o.createFromWMTSTemplate.bind(o)))),o}return f(t,e),t.prototype.setUrls=function(e){this.urls=e;var t=e.join("\n");this.setTileUrlFunction(Object(d.c)(e.map(this.createFromWMTSTemplate.bind(this))),t)},t.prototype.getDimensions=function(){return this.dimensions_},t.prototype.getFormat=function(){return this.format_},t.prototype.getLayer=function(){return this.layer_},t.prototype.getMatrixSet=function(){return this.matrixSet_},t.prototype.getRequestEncoding=function(){return this.requestEncoding_},t.prototype.getStyle=function(){return this.style_},t.prototype.getVersion=function(){return this.version_},t.prototype.getKeyForDimensions_=function(){var e=0,t=[];for(var o in this.dimensions_)t[e++]=o+"-"+this.dimensions_[o];return t.join("/")},t.prototype.updateDimensions=function(e){Object(l.a)(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())},t.prototype.createFromWMTSTemplate=function(e){var t=this.requestEncoding_,o={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};t==i&&Object(l.a)(o,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=t==i?Object(a.a)(e,o):e.replace(/\{(\w+?)\}/g,(function(e,t){return t.toLowerCase()in o?o[t.toLowerCase()]:e}));var n=this.tileGrid,r=this.dimensions_;return function(o,s,c){if(o){var u={TileMatrix:n.getMatrixId(o[0]),TileCol:o[1],TileRow:o[2]};Object(l.a)(u,r);var d=e;return d=t==i?Object(a.a)(d,u):d.replace(/\{(\w+?)\}/g,(function(e,t){return u[t]}))}}},t}(r.a);t.a=m;function g(e,t){var o=e.Contents.Layer,n=Object(p.d)(o,(function(e,o,n){return e.Identifier==t.layer}));if(null===n)return null;var r,a=e.Contents.TileMatrixSet;(r=n.TileMatrixSetLink.length>1?"projection"in t?Object(p.e)(n.TileMatrixSetLink,(function(e,o,n){var r=Object(p.d)(a,(function(t){return t.Identifier==e.TileMatrixSet})).SupportedCRS,i=Object(h.t)(r),s=Object(h.t)(t.projection);return i&&s?Object(h.o)(i,s):r==t.projection})):Object(p.e)(n.TileMatrixSetLink,(function(e,o,n){return e.TileMatrixSet==t.matrixSet})):0)<0&&(r=0);var l=n.TileMatrixSetLink[r].TileMatrixSet,d=n.TileMatrixSetLink[r].TileMatrixSetLimits,f=n.Format[0];"format"in t&&(f=t.format),(r=Object(p.e)(n.Style,(function(e,o,n){return"style"in t?e.Title==t.style:e.isDefault})))<0&&(r=0);var m=n.Style[r].Identifier,g={};"Dimension"in n&&n.Dimension.forEach((function(e,t,o){var n=e.Identifier,r=e.Default;void 0===r&&(r=e.Value[0]),g[n]=r}));var y,v=e.Contents.TileMatrixSet,_=Object(p.d)(v,(function(e,t,o){return e.Identifier==l})),b=_.SupportedCRS;if(b&&(y=Object(h.t)(b)),"projection"in t){var w=Object(h.t)(t.projection);w&&(y&&!Object(h.o)(w,y)||(y=w))}var E=!1,O="ne"==y.getAxisOrientation().substr(0,2),S=_.TileMatrix[0],x={MinTileCol:0,MinTileRow:0,MaxTileCol:S.MatrixWidth-1,MaxTileRow:S.MatrixHeight-1};if(d){x=d[d.length-1];var C=Object(p.d)(_.TileMatrix,(function(e){return e.Identifier===x.TileMatrix||_.Identifier+":"+e.Identifier===x.TileMatrix}));C&&(S=C)}var j=28e-5*S.ScaleDenominator/y.getMetersPerUnit(),P=O?[S.TopLeftCorner[1],S.TopLeftCorner[0]]:S.TopLeftCorner,T=S.TileWidth*j,A=S.TileHeight*j,M=_.BoundingBox,I=[P[0]+T*x.MinTileCol,P[1]-A*(1+x.MaxTileRow),P[0]+T*(1+x.MaxTileCol),P[1]-A*x.MinTileRow];if(void 0!==M&&!Object(c.h)(M,I)){var R=n.WGS84BoundingBox,L=Object(h.t)("EPSG:4326").getExtent();if(I=M,R)E=R[0]===L[0]&&R[2]===L[2];else{var k=Object(h.F)(M,_.SupportedCRS,"EPSG:4326");E=k[0]-1e-10<=L[0]&&k[2]+1e-10>=L[2]}}var G=Object(u.a)(_,I,d),N=[],D=t.requestEncoding;if(D=void 0!==D?D:"","OperationsMetadata"in e&&"GetTile"in e.OperationsMetadata)for(var F=e.OperationsMetadata.GetTile.DCP.HTTP.Get,U=0,B=F.length;U<B;++U)if(F[U].Constraint){var z=Object(p.d)(F[U].Constraint,(function(e){return"GetEncoding"==e.name})).AllowedValues.Value;if(""===D&&(D=z[0]),D!==i)break;Object(p.f)(z,i)&&N.push(F[U].href)}else F[U].href&&(D=i,N.push(F[U].href));return 0===N.length&&(D=s,n.ResourceURL.forEach((function(e){"tile"===e.resourceType&&(f=e.format,N.push(e.template))}))),{urls:N,layer:t.layer,matrixSet:l,format:f,projection:y,requestEncoding:D,tileGrid:G,style:m,dimensions:g,wrapX:E,crossOrigin:t.crossOrigin}}},"./node_modules/ol/source/XYZ.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/source/TileImage.js"),i=o("./node_modules/ol/tilegrid.js"),s=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=function(e){function t(t){var o=t||{},n=void 0!==o.projection?o.projection:"EPSG:3857",r=void 0!==o.tileGrid?o.tileGrid:Object(i.c)({extent:Object(i.d)(n),maxResolution:o.maxResolution,maxZoom:o.maxZoom,minZoom:o.minZoom,tileSize:o.tileSize});return e.call(this,{attributions:o.attributions,cacheSize:o.cacheSize,crossOrigin:o.crossOrigin,imageSmoothing:o.imageSmoothing,opaque:o.opaque,projection:n,reprojectionErrorThreshold:o.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:o.tileLoadFunction,tilePixelRatio:o.tilePixelRatio,tileUrlFunction:o.tileUrlFunction,url:o.url,urls:o.urls,wrapX:void 0===o.wrapX||o.wrapX,transition:o.transition,attributionsCollapsible:o.attributionsCollapsible,zDirection:o.zDirection})||this}return s(t,e),t}(r.a);t.a=a},"./node_modules/ol/source/common.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return n})),o.d(t,"b",(function(){return r}));var n="1.3.0",r={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1}},"./node_modules/ol/sphere.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return i})),o.d(t,"c",(function(){return s})),o.d(t,"d",(function(){return l})),o.d(t,"b",(function(){return u})),o.d(t,"e",(function(){return d}));var n=o("./node_modules/ol/geom/GeometryType.js"),r=o("./node_modules/ol/math.js"),i=6371008.8;function s(e,t,o){var n=o||i,s=Object(r.j)(e[1]),a=Object(r.j)(t[1]),l=(a-s)/2,c=Object(r.j)(t[0]-e[0])/2,u=Math.sin(l)*Math.sin(l)+Math.sin(c)*Math.sin(c)*Math.cos(s)*Math.cos(a);return 2*n*Math.atan2(Math.sqrt(u),Math.sqrt(1-u))}function a(e,t){for(var o=0,n=0,r=e.length;n<r-1;++n)o+=s(e[n],e[n+1],t);return o}function l(e,t){var o=t||{},r=o.radius||i,s=o.projection||"EPSG:3857",c=e.getType();c!==n.a.GEOMETRY_COLLECTION&&(e=e.clone().transform(s,"EPSG:4326"));var u,d,h,p,f,m,g=0;switch(c){case n.a.POINT:case n.a.MULTI_POINT:break;case n.a.LINE_STRING:case n.a.LINEAR_RING:g=a(u=e.getCoordinates(),r);break;case n.a.MULTI_LINE_STRING:case n.a.POLYGON:for(h=0,p=(u=e.getCoordinates()).length;h<p;++h)g+=a(u[h],r);break;case n.a.MULTI_POLYGON:for(h=0,p=(u=e.getCoordinates()).length;h<p;++h)for(f=0,m=(d=u[h]).length;f<m;++f)g+=a(d[f],r);break;case n.a.GEOMETRY_COLLECTION:var y=e.getGeometries();for(h=0,p=y.length;h<p;++h)g+=l(y[h],t);break;default:throw new Error("Unsupported geometry type: "+c)}return g}function c(e,t){for(var o=0,n=e.length,i=e[n-1][0],s=e[n-1][1],a=0;a<n;a++){var l=e[a][0],c=e[a][1];o+=Object(r.j)(l-i)*(2+Math.sin(Object(r.j)(s))+Math.sin(Object(r.j)(c))),i=l,s=c}return o*t*t/2}function u(e,t){var o=t||{},r=o.radius||i,s=o.projection||"EPSG:3857",a=e.getType();a!==n.a.GEOMETRY_COLLECTION&&(e=e.clone().transform(s,"EPSG:4326"));var l,d,h,p,f,m,g=0;switch(a){case n.a.POINT:case n.a.MULTI_POINT:case n.a.LINE_STRING:case n.a.MULTI_LINE_STRING:case n.a.LINEAR_RING:break;case n.a.POLYGON:for(l=e.getCoordinates(),g=Math.abs(c(l[0],r)),h=1,p=l.length;h<p;++h)g-=Math.abs(c(l[h],r));break;case n.a.MULTI_POLYGON:for(h=0,p=(l=e.getCoordinates()).length;h<p;++h)for(d=l[h],g+=Math.abs(c(d[0],r)),f=1,m=d.length;f<m;++f)g-=Math.abs(c(d[f],r));break;case n.a.GEOMETRY_COLLECTION:var y=e.getGeometries();for(h=0,p=y.length;h<p;++h)g+=u(y[h],t);break;default:throw new Error("Unsupported geometry type: "+a)}return g}function d(e,t,o,n){var s=n||i,a=Object(r.j)(e[1]),l=Object(r.j)(e[0]),c=t/s,u=Math.asin(Math.sin(a)*Math.cos(c)+Math.cos(a)*Math.sin(c)*Math.cos(o)),d=l+Math.atan2(Math.sin(o)*Math.sin(c)*Math.cos(a),Math.cos(c)-Math.sin(a)*Math.sin(u));return[Object(r.i)(d),Object(r.i)(u)]}},"./node_modules/ol/string.js":function(e,t,o){"use strict";function n(e,t,o){var n=void 0!==o?e.toFixed(o):""+e,r=n.indexOf(".");return(r=-1===r?n.length:r)>t?n:new Array(1+t-r).join("0")+n}function r(e,t){for(var o=(""+e).split("."),n=(""+t).split("."),r=0;r<Math.max(o.length,n.length);r++){var i=parseInt(o[r]||"0",10),s=parseInt(n[r]||"0",10);if(i>s)return 1;if(s>i)return-1}return 0}o.d(t,"b",(function(){return n})),o.d(t,"a",(function(){return r}))},"./node_modules/ol/structs/LRUCache.js":function(e,t,o){"use strict";var n=o("./node_modules/ol/asserts.js"),r=function(){function e(e){this.highWaterMark=void 0!==e?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return e.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},e.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},e.prototype.containsKey=function(e){return this.entries_.hasOwnProperty(e)},e.prototype.forEach=function(e){for(var t=this.oldest_;t;)e(t.value_,t.key_,this),t=t.newer},e.prototype.get=function(e,t){var o=this.entries_[e];return Object(n.a)(void 0!==o,15),o===this.newest_||(o===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(o.newer.older=o.older,o.older.newer=o.newer),o.newer=null,o.older=this.newest_,this.newest_.newer=o,this.newest_=o),o.value_},e.prototype.remove=function(e){var t=this.entries_[e];return Object(n.a)(void 0!==t,15),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_},e.prototype.getCount=function(){return this.count_},e.prototype.getKeys=function(){var e,t=new Array(this.count_),o=0;for(e=this.newest_;e;e=e.older)t[o++]=e.key_;return t},e.prototype.getValues=function(){var e,t=new Array(this.count_),o=0;for(e=this.newest_;e;e=e.older)t[o++]=e.value_;return t},e.prototype.peekLast=function(){return this.oldest_.value_},e.prototype.peekLastKey=function(){return this.oldest_.key_},e.prototype.peekFirstKey=function(){return this.newest_.key_},e.prototype.pop=function(){var e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_},e.prototype.replace=function(e,t){this.get(e),this.entries_[e].value_=t},e.prototype.set=function(e,t){Object(n.a)(!(e in this.entries_),16);var o={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=o:this.oldest_=o,this.newest_=o,this.entries_[e]=o,++this.count_},e.prototype.setSize=function(e){this.highWaterMark=e},e}();t.a=r},"./node_modules/ol/structs/PriorityQueue.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return i}));var n=o("./node_modules/ol/asserts.js"),r=o("./node_modules/ol/obj.js"),i=1/0,s=function(){function e(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return e.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Object(r.b)(this.queuedElements_)},e.prototype.dequeue=function(){var e=this.elements_,t=this.priorities_,o=e[0];1==e.length?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));var n=this.keyFunction_(o);return delete this.queuedElements_[n],o},e.prototype.enqueue=function(e){Object(n.a)(!(this.keyFunction_(e)in this.queuedElements_),31);var t=this.priorityFunction_(e);return t!=i&&(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},e.prototype.getCount=function(){return this.elements_.length},e.prototype.getLeftChildIndex_=function(e){return 2*e+1},e.prototype.getRightChildIndex_=function(e){return 2*e+2},e.prototype.getParentIndex_=function(e){return e-1>>1},e.prototype.heapify_=function(){var e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)},e.prototype.isEmpty=function(){return 0===this.elements_.length},e.prototype.isKeyQueued=function(e){return e in this.queuedElements_},e.prototype.isQueued=function(e){return this.isKeyQueued(this.keyFunction_(e))},e.prototype.siftUp_=function(e){for(var t=this.elements_,o=this.priorities_,n=t.length,r=t[e],i=o[e],s=e;e<n>>1;){var a=this.getLeftChildIndex_(e),l=this.getRightChildIndex_(e),c=l<n&&o[l]<o[a]?l:a;t[e]=t[c],o[e]=o[c],e=c}t[e]=r,o[e]=i,this.siftDown_(s,e)},e.prototype.siftDown_=function(e,t){for(var o=this.elements_,n=this.priorities_,r=o[t],i=n[t];t>e;){var s=this.getParentIndex_(t);if(!(n[s]>i))break;o[t]=o[s],n[t]=n[s],t=s}o[t]=r,n[t]=i},e.prototype.reprioritize=function(){var e,t,o,n=this.priorityFunction_,r=this.elements_,s=this.priorities_,a=0,l=r.length;for(t=0;t<l;++t)(o=n(e=r[t]))==i?delete this.queuedElements_[this.keyFunction_(e)]:(s[a]=o,r[a++]=e);r.length=a,s.length=a,this.heapify_()},e}();t.b=s},"./node_modules/ol/structs/RBush.js":function(e,t,o){"use strict";var n=o("./node_modules/rbush/rbush.min.js"),r=o.n(n),i=o("./node_modules/ol/extent.js"),s=o("./node_modules/ol/util.js"),a=o("./node_modules/ol/obj.js"),l=function(){function e(e){this.rbush_=new r.a(e),this.items_={}}return e.prototype.insert=function(e,t){var o={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(o),this.items_[Object(s.c)(t)]=o},e.prototype.load=function(e,t){for(var o=new Array(t.length),n=0,r=t.length;n<r;n++){var i=e[n],a=t[n],l={minX:i[0],minY:i[1],maxX:i[2],maxY:i[3],value:a};o[n]=l,this.items_[Object(s.c)(a)]=l}this.rbush_.load(o)},e.prototype.remove=function(e){var t=Object(s.c)(e),o=this.items_[t];return delete this.items_[t],null!==this.rbush_.remove(o)},e.prototype.update=function(e,t){var o=this.items_[Object(s.c)(t)],n=[o.minX,o.minY,o.maxX,o.maxY];Object(i.r)(n,e)||(this.remove(t),this.insert(e,t))},e.prototype.getAll=function(){return this.rbush_.all().map((function(e){return e.value}))},e.prototype.getInExtent=function(e){var t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map((function(e){return e.value}))},e.prototype.forEach=function(e){return this.forEach_(this.getAll(),e)},e.prototype.forEachInExtent=function(e,t){return this.forEach_(this.getInExtent(e),t)},e.prototype.forEach_=function(e,t){for(var o,n=0,r=e.length;n<r;n++)if(o=t(e[n]))return o;return o},e.prototype.isEmpty=function(){return Object(a.d)(this.items_)},e.prototype.clear=function(){this.rbush_.clear(),this.items_={}},e.prototype.getExtent=function(e){var t=this.rbush_.toJSON();return Object(i.l)(t.minX,t.minY,t.maxX,t.maxY,e)},e.prototype.concat=function(e){for(var t in this.rbush_.load(e.rbush_.all()),e.items_)this.items_[t]=e.items_[t]},e}();t.a=l},"./node_modules/ol/style/Circle.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/style/RegularShape.js"),i=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),s=function(e){function t(t){var o=t||{};return e.call(this,{points:1/0,fill:o.fill,radius:o.radius,stroke:o.stroke,scale:void 0!==o.scale?o.scale:1,rotation:void 0!==o.rotation?o.rotation:0,rotateWithView:void 0!==o.rotateWithView&&o.rotateWithView,displacement:void 0!==o.displacement?o.displacement:[0,0]})||this}return i(t,e),t.prototype.clone=function(){var e=this.getScale(),o=new t({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return o.setOpacity(this.getOpacity()),o},t.prototype.setRadius=function(e){this.radius_=e,this.render()},t}(r.a);t.a=s},"./node_modules/ol/style/Fill.js":function(e,t,o){"use strict";var n=function(){function e(e){var t=e||{};this.color_=void 0!==t.color?t.color:null}return e.prototype.clone=function(){var t=this.getColor();return new e({color:Array.isArray(t)?t.slice():t||void 0})},e.prototype.getColor=function(){return this.color_},e.prototype.setColor=function(e){this.color_=e},e}();t.a=n},"./node_modules/ol/style/Icon.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/events/EventType.js"),i=o("./node_modules/ol/style/IconAnchorUnits.js"),s=o("./node_modules/ol/style/IconOrigin.js"),a=o("./node_modules/ol/ImageState.js"),l=o("./node_modules/ol/style/Image.js"),c=o("./node_modules/ol/color.js"),u=o("./node_modules/ol/asserts.js"),d=o("./node_modules/ol/style/IconImage.js"),h=o("./node_modules/ol/util.js"),p=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),f=function(e){function t(t){var o=this,n=t||{},r=void 0!==n.opacity?n.opacity:1,l=void 0!==n.rotation?n.rotation:0,p=void 0!==n.scale?n.scale:1,f=void 0!==n.rotateWithView&&n.rotateWithView;(o=e.call(this,{opacity:r,rotation:l,scale:p,displacement:void 0!==n.displacement?n.displacement:[0,0],rotateWithView:f})||this).anchor_=void 0!==n.anchor?n.anchor:[.5,.5],o.normalizedAnchor_=null,o.anchorOrigin_=void 0!==n.anchorOrigin?n.anchorOrigin:s.a.TOP_LEFT,o.anchorXUnits_=void 0!==n.anchorXUnits?n.anchorXUnits:i.a.FRACTION,o.anchorYUnits_=void 0!==n.anchorYUnits?n.anchorYUnits:i.a.FRACTION,o.crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null;var m=void 0!==n.img?n.img:null,g=void 0!==n.imgSize?n.imgSize:null,y=n.src;Object(u.a)(!(void 0!==y&&m),4),Object(u.a)(!m||m&&g,5),void 0!==y&&0!==y.length||!m||(y=m.src||Object(h.c)(m)),Object(u.a)(void 0!==y&&y.length>0,6);var v=void 0!==n.src?a.a.IDLE:a.a.LOADED;return o.color_=void 0!==n.color?Object(c.a)(n.color):null,o.iconImage_=Object(d.b)(m,y,g,o.crossOrigin_,v,o.color_),o.offset_=void 0!==n.offset?n.offset:[0,0],o.offsetOrigin_=void 0!==n.offsetOrigin?n.offsetOrigin:s.a.TOP_LEFT,o.origin_=null,o.size_=void 0!==n.size?n.size:null,o}return p(t,e),t.prototype.clone=function(){var e=this.getScale();return new t({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},t.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var e=this.anchor_,t=this.getSize();if(this.anchorXUnits_==i.a.FRACTION||this.anchorYUnits_==i.a.FRACTION){if(!t)return null;e=this.anchor_.slice(),this.anchorXUnits_==i.a.FRACTION&&(e[0]*=t[0]),this.anchorYUnits_==i.a.FRACTION&&(e[1]*=t[1])}if(this.anchorOrigin_!=s.a.TOP_LEFT){if(!t)return null;e===this.anchor_&&(e=this.anchor_.slice()),this.anchorOrigin_!=s.a.TOP_RIGHT&&this.anchorOrigin_!=s.a.BOTTOM_RIGHT||(e[0]=-e[0]+t[0]),this.anchorOrigin_!=s.a.BOTTOM_LEFT&&this.anchorOrigin_!=s.a.BOTTOM_RIGHT||(e[1]=-e[1]+t[1])}var o=this.getDisplacement();return e[0]-=o[0],e[1]+=o[1],this.normalizedAnchor_=e,this.normalizedAnchor_},t.prototype.setAnchor=function(e){this.anchor_=e,this.normalizedAnchor_=null},t.prototype.getColor=function(){return this.color_},t.prototype.getImage=function(e){return this.iconImage_.getImage(e)},t.prototype.getPixelRatio=function(e){return this.iconImage_.getPixelRatio(e)},t.prototype.getImageSize=function(){return this.iconImage_.getSize()},t.prototype.getImageState=function(){return this.iconImage_.getImageState()},t.prototype.getHitDetectionImage=function(){return this.iconImage_.getHitDetectionImage()},t.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var e=this.offset_;if(this.offsetOrigin_!=s.a.TOP_LEFT){var t=this.getSize(),o=this.iconImage_.getSize();if(!t||!o)return null;e=e.slice(),this.offsetOrigin_!=s.a.TOP_RIGHT&&this.offsetOrigin_!=s.a.BOTTOM_RIGHT||(e[0]=o[0]-t[0]-e[0]),this.offsetOrigin_!=s.a.BOTTOM_LEFT&&this.offsetOrigin_!=s.a.BOTTOM_RIGHT||(e[1]=o[1]-t[1]-e[1])}return this.origin_=e,this.origin_},t.prototype.getSrc=function(){return this.iconImage_.getSrc()},t.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},t.prototype.listenImageChange=function(e){this.iconImage_.addEventListener(r.a.CHANGE,e)},t.prototype.load=function(){this.iconImage_.load()},t.prototype.unlistenImageChange=function(e){this.iconImage_.removeEventListener(r.a.CHANGE,e)},t}(l.a);t.a=f},"./node_modules/ol/style/IconAnchorUnits.js":function(e,t,o){"use strict";t.a={FRACTION:"fraction",PIXELS:"pixels"}},"./node_modules/ol/style/IconImage.js":function(e,t,o){"use strict";o.d(t,"b",(function(){return f}));var n,r=o("./node_modules/ol/events/Target.js"),i=o("./node_modules/ol/events/EventType.js"),s=o("./node_modules/ol/ImageState.js"),a=o("./node_modules/ol/color.js"),l=o("./node_modules/ol/dom.js"),c=o("./node_modules/ol/style/IconImageCache.js"),u=o("./node_modules/ol/Image.js"),d=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),h=null,p=function(e){function t(t,o,n,r,i,s){var a=e.call(this)||this;return a.hitDetectionImage_=null,a.image_=t||new Image,null!==r&&(a.image_.crossOrigin=r),a.canvas_={},a.color_=s,a.unlisten_=null,a.imageState_=i,a.size_=n,a.src_=o,a.tainted_,a}return d(t,e),t.prototype.isTainted_=function(){if(void 0===this.tainted_&&this.imageState_===s.a.LOADED){h||(h=Object(l.a)(1,1)),h.drawImage(this.image_,0,0);try{h.getImageData(0,0,1,1),this.tainted_=!1}catch(e){h=null,this.tainted_=!0}}return!0===this.tainted_},t.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(i.a.CHANGE)},t.prototype.handleImageError_=function(){this.imageState_=s.a.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},t.prototype.handleImageLoad_=function(){this.imageState_=s.a.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()},t.prototype.getImage=function(e){return this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_},t.prototype.getPixelRatio=function(e){return this.replaceColor_(e),this.canvas_[e]?e:1},t.prototype.getImageState=function(){return this.imageState_},t.prototype.getHitDetectionImage=function(){if(!this.hitDetectionImage_)if(this.isTainted_()){var e=this.size_[0],t=this.size_[1],o=Object(l.a)(e,t);o.fillRect(0,0,e,t),this.hitDetectionImage_=o.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},t.prototype.getSize=function(){return this.size_},t.prototype.getSrc=function(){return this.src_},t.prototype.load=function(){if(this.imageState_==s.a.IDLE){this.imageState_=s.a.LOADING;try{this.image_.src=this.src_}catch(e){this.handleImageError_()}this.unlisten_=Object(u.b)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},t.prototype.replaceColor_=function(e){if(this.color_&&!this.canvas_[e]&&this.imageState_===s.a.LOADED){var t=document.createElement("canvas");this.canvas_[e]=t,t.width=Math.ceil(this.image_.width*e),t.height=Math.ceil(this.image_.height*e);var o=t.getContext("2d");if(o.scale(e,e),o.drawImage(this.image_,0,0),o.globalCompositeOperation="multiply","multiply"===o.globalCompositeOperation||this.isTainted_())o.fillStyle=Object(a.b)(this.color_),o.fillRect(0,0,t.width/e,t.height/e),o.globalCompositeOperation="destination-in",o.drawImage(this.image_,0,0);else{for(var n=o.getImageData(0,0,t.width,t.height),r=n.data,i=this.color_[0]/255,l=this.color_[1]/255,c=this.color_[2]/255,u=this.color_[3],d=0,h=r.length;d<h;d+=4)r[d]*=i,r[d+1]*=l,r[d+2]*=c,r[d+3]*=u;o.putImageData(n,0,0)}}},t.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},t}(r.a);function f(e,t,o,n,r,i){var s=c.b.get(t,n,i);return s||(s=new p(e,t,o,n,r,i),c.b.set(t,n,i,s)),s}t.a=p},"./node_modules/ol/style/IconImageCache.js":function(e,t,o){"use strict";o.d(t,"b",(function(){return s}));var n=o("./node_modules/ol/color.js"),r=function(){function e(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return e.prototype.clear=function(){this.cache_={},this.cacheSize_=0},e.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},e.prototype.expire=function(){if(this.canExpireCache()){var e=0;for(var t in this.cache_){var o=this.cache_[t];0!=(3&e++)||o.hasListener()||(delete this.cache_[t],--this.cacheSize_)}}},e.prototype.get=function(e,t,o){var n=i(e,t,o);return n in this.cache_?this.cache_[n]:null},e.prototype.set=function(e,t,o,n){var r=i(e,t,o);this.cache_[r]=n,++this.cacheSize_},e.prototype.setSize=function(e){this.maxCacheSize_=e,this.expire()},e}();function i(e,t,o){return t+":"+e+":"+(o?Object(n.b)(o):"null")}t.a=r;var s=new r},"./node_modules/ol/style/IconOrigin.js":function(e,t,o){"use strict";t.a={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"}},"./node_modules/ol/style/Image.js":function(e,t,o){"use strict";var n=o("./node_modules/ol/util.js"),r=o("./node_modules/ol/size.js"),i=function(){function e(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Object(r.d)(e.scale),this.displacement_=e.displacement}return e.prototype.clone=function(){var t=this.getScale();return new e({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},e.prototype.getOpacity=function(){return this.opacity_},e.prototype.getRotateWithView=function(){return this.rotateWithView_},e.prototype.getRotation=function(){return this.rotation_},e.prototype.getScale=function(){return this.scale_},e.prototype.getScaleArray=function(){return this.scaleArray_},e.prototype.getDisplacement=function(){return this.displacement_},e.prototype.getAnchor=function(){return Object(n.b)()},e.prototype.getImage=function(e){return Object(n.b)()},e.prototype.getHitDetectionImage=function(){return Object(n.b)()},e.prototype.getPixelRatio=function(e){return 1},e.prototype.getImageState=function(){return Object(n.b)()},e.prototype.getImageSize=function(){return Object(n.b)()},e.prototype.getOrigin=function(){return Object(n.b)()},e.prototype.getSize=function(){return Object(n.b)()},e.prototype.setOpacity=function(e){this.opacity_=e},e.prototype.setRotateWithView=function(e){this.rotateWithView_=e},e.prototype.setRotation=function(e){this.rotation_=e},e.prototype.setScale=function(e){this.scale_=e,this.scaleArray_=Object(r.d)(e)},e.prototype.listenImageChange=function(e){Object(n.b)()},e.prototype.load=function(){Object(n.b)()},e.prototype.unlistenImageChange=function(e){Object(n.b)()},e}();t.a=i},"./node_modules/ol/style/RegularShape.js":function(e,t,o){"use strict";var n,r=o("./node_modules/ol/ImageState.js"),i=o("./node_modules/ol/style/Image.js"),s=o("./node_modules/ol/color.js"),a=o("./node_modules/ol/colorlike.js"),l=o("./node_modules/ol/dom.js"),c=o("./node_modules/ol/render/canvas.js"),u=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),d=function(e){function t(t){var o=this,n=void 0!==t.rotateWithView&&t.rotateWithView;return(o=e.call(this,{opacity:1,rotateWithView:n,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0]})||this).canvas_=void 0,o.hitDetectionCanvas_=null,o.fill_=void 0!==t.fill?t.fill:null,o.origin_=[0,0],o.points_=t.points,o.radius_=void 0!==t.radius?t.radius:t.radius1,o.radius2_=t.radius2,o.angle_=void 0!==t.angle?t.angle:0,o.stroke_=void 0!==t.stroke?t.stroke:null,o.anchor_=null,o.size_=null,o.renderOptions_=null,o.render(),o}return u(t,e),t.prototype.clone=function(){var e=this.getScale(),o=new t({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice()});return o.setOpacity(this.getOpacity()),o},t.prototype.getAnchor=function(){return this.anchor_},t.prototype.getAngle=function(){return this.angle_},t.prototype.getFill=function(){return this.fill_},t.prototype.getHitDetectionImage=function(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_},t.prototype.getImage=function(e){var t=this.canvas_[e];if(!t){var o=this.renderOptions_,n=Object(l.a)(o.size*e,o.size*e);this.draw_(o,n,e),t=n.canvas,this.canvas_[e]=t}return t},t.prototype.getPixelRatio=function(e){return e},t.prototype.getImageSize=function(){return this.size_},t.prototype.getImageState=function(){return r.a.LOADED},t.prototype.getOrigin=function(){return this.origin_},t.prototype.getPoints=function(){return this.points_},t.prototype.getRadius=function(){return this.radius_},t.prototype.getRadius2=function(){return this.radius2_},t.prototype.getSize=function(){return this.size_},t.prototype.getStroke=function(){return this.stroke_},t.prototype.listenImageChange=function(e){},t.prototype.load=function(){},t.prototype.unlistenImageChange=function(e){},t.prototype.calculateLineJoinSize_=function(e,t,o){if(0===t||this.points_===1/0||"bevel"!==e&&"miter"!==e)return t;var n=this.radius_,r=void 0===this.radius2_?n:this.radius2_;if(n<r){var i=n;n=r,r=i}var s=void 0===this.radius2_?this.points_:2*this.points_,a=2*Math.PI/s,l=r*Math.sin(a),c=n-Math.sqrt(r*r-l*l),u=Math.sqrt(l*l+c*c),d=u/l;if("miter"===e&&d<=o)return d*t;var h=t/2/d,p=t/2*(c/u),f=Math.sqrt((n+h)*(n+h)+p*p)-n;if(void 0===this.radius2_||"bevel"===e)return 2*f;var m=n*Math.sin(a),g=r-Math.sqrt(n*n-m*m),y=Math.sqrt(m*m+g*g)/m;if(y<=o){var v=y*t/2-r-n;return 2*Math.max(f,v)}return 2*f},t.prototype.createRenderOptions=function(){var e,t=c.g,o=0,n=null,r=0,i=0;this.stroke_&&(null===(e=this.stroke_.getColor())&&(e=c.k),e=Object(a.a)(e),void 0===(i=this.stroke_.getWidth())&&(i=c.h),n=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset(),void 0===(t=this.stroke_.getLineJoin())&&(t=c.g),void 0===(o=this.stroke_.getMiterLimit())&&(o=c.i));var s=this.calculateLineJoinSize_(t,i,o),l=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:e,strokeWidth:i,size:Math.ceil(2*l+s),lineDash:n,lineDashOffset:r,lineJoin:t,miterLimit:o}},t.prototype.render=function(){this.renderOptions_=this.createRenderOptions();var e=this.renderOptions_.size,t=this.getDisplacement();this.canvas_={},this.anchor_=[e/2-t[0],e/2+t[1]],this.size_=[e,e]},t.prototype.draw_=function(e,t,o){if(t.scale(o,o),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){var n=this.fill_.getColor();null===n&&(n=c.b),t.fillStyle=Object(a.a)(n),t.fill()}this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,t.setLineDash&&e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())},t.prototype.createHitDetectionCanvas_=function(e){if(this.fill_){var t=this.fill_.getColor(),o=0;if("string"==typeof t&&(t=Object(s.a)(t)),null===t?o=1:Array.isArray(t)&&(o=4===t.length?t[3]:1),0===o){var n=Object(l.a)(e.size,e.size);this.hitDetectionCanvas_=n.canvas,this.drawHitDetectionCanvas_(e,n)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))},t.prototype.createPath_=function(e){var t=this.points_,o=this.radius_;if(t===1/0)e.arc(0,0,o,0,2*Math.PI);else{var n=void 0===this.radius2_?o:this.radius2_;void 0!==this.radius2_&&(t*=2);for(var r=this.angle_-Math.PI/2,i=2*Math.PI/t,s=0;s<t;s++){var a=r+s*i,l=s%2==0?o:n;e.lineTo(l*Math.cos(a),l*Math.sin(a))}e.closePath()}},t.prototype.drawHitDetectionCanvas_=function(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=c.b,t.fill(),this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())},t}(i.a);t.a=d},"./node_modules/ol/style/Stroke.js":function(e,t,o){"use strict";var n=function(){function e(e){var t=e||{};this.color_=void 0!==t.color?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=void 0!==t.lineDash?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}return e.prototype.clone=function(){var t=this.getColor();return new e({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},e.prototype.getColor=function(){return this.color_},e.prototype.getLineCap=function(){return this.lineCap_},e.prototype.getLineDash=function(){return this.lineDash_},e.prototype.getLineDashOffset=function(){return this.lineDashOffset_},e.prototype.getLineJoin=function(){return this.lineJoin_},e.prototype.getMiterLimit=function(){return this.miterLimit_},e.prototype.getWidth=function(){return this.width_},e.prototype.setColor=function(e){this.color_=e},e.prototype.setLineCap=function(e){this.lineCap_=e},e.prototype.setLineDash=function(e){this.lineDash_=e},e.prototype.setLineDashOffset=function(e){this.lineDashOffset_=e},e.prototype.setLineJoin=function(e){this.lineJoin_=e},e.prototype.setMiterLimit=function(e){this.miterLimit_=e},e.prototype.setWidth=function(e){this.width_=e},e}();t.a=n},"./node_modules/ol/style/Style.js":function(e,t,o){"use strict";o.d(t,"d",(function(){return c})),o.d(t,"a",(function(){return d})),o.d(t,"b",(function(){return h}));var n=o("./node_modules/ol/style/Circle.js"),r=o("./node_modules/ol/style/Fill.js"),i=o("./node_modules/ol/geom/GeometryType.js"),s=o("./node_modules/ol/style/Stroke.js"),a=o("./node_modules/ol/asserts.js"),l=function(){function e(e){var t=e||{};this.geometry_=null,this.geometryFunction_=p,void 0!==t.geometry&&this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.renderer_=void 0!==t.renderer?t.renderer:null,this.hitDetectionRenderer_=void 0!==t.hitDetectionRenderer?t.hitDetectionRenderer:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex}return e.prototype.clone=function(){var t=this.getGeometry();return t&&"object"==typeof t&&(t=t.clone()),new e({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.setRenderer=function(e){this.renderer_=e},e.prototype.setHitDetectionRenderer=function(e){this.hitDetectionRenderer_=e},e.prototype.getHitDetectionRenderer=function(){return this.hitDetectionRenderer_},e.prototype.getGeometry=function(){return this.geometry_},e.prototype.getGeometryFunction=function(){return this.geometryFunction_},e.prototype.getFill=function(){return this.fill_},e.prototype.setFill=function(e){this.fill_=e},e.prototype.getImage=function(){return this.image_},e.prototype.setImage=function(e){this.image_=e},e.prototype.getStroke=function(){return this.stroke_},e.prototype.setStroke=function(e){this.stroke_=e},e.prototype.getText=function(){return this.text_},e.prototype.setText=function(e){this.text_=e},e.prototype.getZIndex=function(){return this.zIndex_},e.prototype.setGeometry=function(e){"function"==typeof e?this.geometryFunction_=e:"string"==typeof e?this.geometryFunction_=function(t){return t.get(e)}:e?void 0!==e&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=p,this.geometry_=e},e.prototype.setZIndex=function(e){this.zIndex_=e},e}();function c(e){var t;if("function"==typeof e)t=e;else{var o;if(Array.isArray(e))o=e;else Object(a.a)("function"==typeof e.getZIndex,41),o=[e];t=function(){return o}}return t}var u=null;function d(e,t){if(!u){var o=new r.a({color:"rgba(255,255,255,0.4)"}),i=new s.a({color:"#3399CC",width:1.25});u=[new l({image:new n.a({fill:o,stroke:i,radius:5}),fill:o,stroke:i})]}return u}function h(){var e={},t=[255,255,255,1],o=[0,153,255,1];return e[i.a.POLYGON]=[new l({fill:new r.a({color:[255,255,255,.5]})})],e[i.a.MULTI_POLYGON]=e[i.a.POLYGON],e[i.a.LINE_STRING]=[new l({stroke:new s.a({color:t,width:5})}),new l({stroke:new s.a({color:o,width:3})})],e[i.a.MULTI_LINE_STRING]=e[i.a.LINE_STRING],e[i.a.CIRCLE]=e[i.a.POLYGON].concat(e[i.a.LINE_STRING]),e[i.a.POINT]=[new l({image:new n.a({radius:6,fill:new r.a({color:o}),stroke:new s.a({color:t,width:1.5})}),zIndex:1/0})],e[i.a.MULTI_POINT]=e[i.a.POINT],e[i.a.GEOMETRY_COLLECTION]=e[i.a.POLYGON].concat(e[i.a.LINE_STRING],e[i.a.POINT]),e}function p(e){return e.getGeometry()}t.c=l},"./node_modules/ol/style/Text.js":function(e,t,o){"use strict";var n=o("./node_modules/ol/style/Fill.js"),r=o("./node_modules/ol/style/TextPlacement.js"),i=o("./node_modules/ol/size.js"),s=function(){function e(e){var t=e||{};this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=Object(i.d)(void 0!==t.scale?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.textBaseline_=t.textBaseline,this.fill_=void 0!==t.fill?t.fill:new n.a({color:"#333"}),this.maxAngle_=void 0!==t.maxAngle?t.maxAngle:Math.PI/4,this.placement_=void 0!==t.placement?t.placement:r.a.POINT,this.overflow_=!!t.overflow,this.stroke_=void 0!==t.stroke?t.stroke:null,this.offsetX_=void 0!==t.offsetX?t.offsetX:0,this.offsetY_=void 0!==t.offsetY?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=void 0===t.padding?null:t.padding}return e.prototype.clone=function(){var t=this.getScale();return new e({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()})},e.prototype.getOverflow=function(){return this.overflow_},e.prototype.getFont=function(){return this.font_},e.prototype.getMaxAngle=function(){return this.maxAngle_},e.prototype.getPlacement=function(){return this.placement_},e.prototype.getOffsetX=function(){return this.offsetX_},e.prototype.getOffsetY=function(){return this.offsetY_},e.prototype.getFill=function(){return this.fill_},e.prototype.getRotateWithView=function(){return this.rotateWithView_},e.prototype.getRotation=function(){return this.rotation_},e.prototype.getScale=function(){return this.scale_},e.prototype.getScaleArray=function(){return this.scaleArray_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.getText=function(){return this.text_},e.prototype.getTextAlign=function(){return this.textAlign_},e.prototype.getTextBaseline=function(){return this.textBaseline_},e.prototype.getBackgroundFill=function(){return this.backgroundFill_},e.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},e.prototype.getPadding=function(){return this.padding_},e.prototype.setOverflow=function(e){this.overflow_=e},e.prototype.setFont=function(e){this.font_=e},e.prototype.setMaxAngle=function(e){this.maxAngle_=e},e.prototype.setOffsetX=function(e){this.offsetX_=e},e.prototype.setOffsetY=function(e){this.offsetY_=e},e.prototype.setPlacement=function(e){this.placement_=e},e.prototype.setRotateWithView=function(e){this.rotateWithView_=e},e.prototype.setFill=function(e){this.fill_=e},e.prototype.setRotation=function(e){this.rotation_=e},e.prototype.setScale=function(e){this.scale_=e,this.scaleArray_=Object(i.d)(void 0!==e?e:1)},e.prototype.setStroke=function(e){this.stroke_=e},e.prototype.setText=function(e){this.text_=e},e.prototype.setTextAlign=function(e){this.textAlign_=e},e.prototype.setTextBaseline=function(e){this.textBaseline_=e},e.prototype.setBackgroundFill=function(e){this.backgroundFill_=e},e.prototype.setBackgroundStroke=function(e){this.backgroundStroke_=e},e.prototype.setPadding=function(e){this.padding_=e},e}();t.a=s},"./node_modules/ol/style/TextPlacement.js":function(e,t,o){"use strict";t.a={POINT:"point",LINE:"line"}},"./node_modules/ol/tilecoord.js":function(e,t,o){"use strict";function n(e,t,o,n){return void 0!==n?(n[0]=e,n[1]=t,n[2]=o,n):[e,t,o]}function r(e,t,o){return e+"/"+t+"/"+o}function i(e){return r(e[0],e[1],e[2])}function s(e){var t=e.substring(e.lastIndexOf("/")+1,e.length).split(",").map(Number);return r(t[0],t[1],t[2])}function a(e){return e.split("/").map(Number)}function l(e){return(e[1]<<e[0])+e[2]}function c(e,t){var o=e[0],n=e[1],r=e[2];if(t.getMinZoom()>o||o>t.getMaxZoom())return!1;var i=t.getFullTileRange(o);return!i||i.containsXY(n,r)}o.d(t,"a",(function(){return n})),o.d(t,"e",(function(){return r})),o.d(t,"d",(function(){return i})),o.d(t,"c",(function(){return s})),o.d(t,"b",(function(){return a})),o.d(t,"f",(function(){return l})),o.d(t,"g",(function(){return c}))},"./node_modules/ol/tilegrid.js":function(e,t,o){"use strict";o.d(t,"e",(function(){return u})),o.d(t,"f",(function(){return d})),o.d(t,"a",(function(){return h})),o.d(t,"c",(function(){return p})),o.d(t,"b",(function(){return m})),o.d(t,"d",(function(){return g}));var n=o("./node_modules/ol/extent/Corner.js"),r=o("./node_modules/ol/tilegrid/TileGrid.js"),i=o("./node_modules/ol/proj/Units.js"),s=o("./node_modules/ol/tilegrid/common.js"),a=o("./node_modules/ol/proj.js"),l=o("./node_modules/ol/extent.js"),c=o("./node_modules/ol/size.js");function u(e){var t=e.getDefaultTileGrid();return t||(t=m(e),e.setDefaultTileGrid(t)),t}function d(e,t,o){var n=t[0],r=e.getTileCoordCenter(t),i=g(o);if(Object(l.g)(i,r))return t;var s=Object(l.N)(i),a=Math.ceil((i[0]-r[0])/s);return r[0]+=s*a,e.getTileCoordForCoordAndZ(r,n)}function h(e,t,o,i){var s=void 0!==i?i:n.a.TOP_LEFT,a=f(e,t,o);return new r.a({extent:e,origin:Object(l.D)(e,s),resolutions:a,tileSize:o})}function p(e){var t=e||{},o=t.extent||Object(a.t)("EPSG:3857").getExtent(),n={extent:o,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:f(o,t.maxZoom,t.tileSize,t.maxResolution)};return new r.a(n)}function f(e,t,o,n){for(var r=void 0!==t?t:s.a,i=Object(l.G)(e),a=Object(l.N)(e),u=Object(c.d)(void 0!==o?o:s.b),d=n>0?n:Math.max(a/u[0],i/u[1]),h=r+1,p=new Array(h),f=0;f<h;++f)p[f]=d/Math.pow(2,f);return p}function m(e,t,o,n){return h(g(e),t,o,n)}function g(e){var t=(e=Object(a.t)(e)).getExtent();if(!t){var o=180*a.a[i.b.DEGREES]/e.getMetersPerUnit();t=Object(l.l)(-o,-o,o,o)}return t}},"./node_modules/ol/tilegrid/TileGrid.js":function(e,t,o){"use strict";var n=o("./node_modules/ol/TileRange.js"),r=o("./node_modules/ol/tilegrid/common.js"),i=o("./node_modules/ol/asserts.js"),s=o("./node_modules/ol/math.js"),a=o("./node_modules/ol/extent.js"),l=o("./node_modules/ol/tilecoord.js"),c=o("./node_modules/ol/array.js"),u=o("./node_modules/ol/size.js"),d=[0,0,0],h=function(){function e(e){var t;if(this.minZoom=void 0!==e.minZoom?e.minZoom:0,this.resolutions_=e.resolutions,Object(i.a)(Object(c.g)(this.resolutions_,(function(e,t){return t-e}),!0),17),!e.origins)for(var o=0,s=this.resolutions_.length-1;o<s;++o)if(t){if(this.resolutions_[o]/this.resolutions_[o+1]!==t){t=void 0;break}}else t=this.resolutions_[o]/this.resolutions_[o+1];this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==e.origin?e.origin:null,this.origins_=null,void 0!==e.origins&&(this.origins_=e.origins,Object(i.a)(this.origins_.length==this.resolutions_.length,20));var l=e.extent;void 0===l||this.origin_||this.origins_||(this.origin_=Object(a.L)(l)),Object(i.a)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==e.tileSizes&&(this.tileSizes_=e.tileSizes,Object(i.a)(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==e.tileSize?e.tileSize:this.tileSizes_?null:r.b,Object(i.a)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==l?l:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==e.sizes?this.fullTileRanges_=e.sizes.map((function(e,t){var o=new n.b(Math.min(0,e[0]),Math.max(e[0]-1,-1),Math.min(0,e[1]),Math.max(e[1]-1,-1));if(l){var r=this.getTileRangeForExtentAndZ(l,t);o.minX=Math.max(r.minX,o.minX),o.maxX=Math.min(r.maxX,o.maxX),o.minY=Math.max(r.minY,o.minY),o.maxY=Math.min(r.maxY,o.maxY)}return o}),this):l&&this.calculateTileRanges_(l)}return e.prototype.forEachTileCoord=function(e,t,o){for(var n=this.getTileRangeForExtentAndZ(e,t),r=n.minX,i=n.maxX;r<=i;++r)for(var s=n.minY,a=n.maxY;s<=a;++s)o([t,r,s])},e.prototype.forEachTileCoordParentTileRange=function(e,t,o,r){var i,s,a,l=null,c=e[0]-1;for(2===this.zoomFactor_?(s=e[1],a=e[2]):l=this.getTileCoordExtent(e,r);c>=this.minZoom;){if(2===this.zoomFactor_?(s=Math.floor(s/2),a=Math.floor(a/2),i=Object(n.a)(s,s,a,a,o)):i=this.getTileRangeForExtentAndZ(l,c,o),t(c,i))return!0;--c}return!1},e.prototype.getExtent=function(){return this.extent_},e.prototype.getMaxZoom=function(){return this.maxZoom},e.prototype.getMinZoom=function(){return this.minZoom},e.prototype.getOrigin=function(e){return this.origin_?this.origin_:this.origins_[e]},e.prototype.getResolution=function(e){return this.resolutions_[e]},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getTileCoordChildTileRange=function(e,t,o){if(e[0]<this.maxZoom){if(2===this.zoomFactor_){var r=2*e[1],i=2*e[2];return Object(n.a)(r,r+1,i,i+1,t)}var s=this.getTileCoordExtent(e,o||this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,e[0]+1,t)}return null},e.prototype.getTileRangeForTileCoordAndZ=function(e,t,o){if(t>this.maxZoom||t<this.minZoom)return null;var r=e[0],i=e[1],s=e[2];if(t===r)return Object(n.a)(i,s,i,s,o);if(this.zoomFactor_){var a=Math.pow(this.zoomFactor_,t-r),l=Math.floor(i*a),c=Math.floor(s*a);if(t<r)return Object(n.a)(l,l,c,c,o);var u=Math.floor(a*(i+1))-1,d=Math.floor(a*(s+1))-1;return Object(n.a)(l,u,c,d,o)}var h=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(h,t,o)},e.prototype.getTileRangeExtent=function(e,t,o){var n=this.getOrigin(e),r=this.getResolution(e),i=Object(u.d)(this.getTileSize(e),this.tmpSize_),s=n[0]+t.minX*i[0]*r,l=n[0]+(t.maxX+1)*i[0]*r,c=n[1]+t.minY*i[1]*r,d=n[1]+(t.maxY+1)*i[1]*r;return Object(a.l)(s,c,l,d,o)},e.prototype.getTileRangeForExtentAndZ=function(e,t,o){var r=d;this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,r);var i=r[1],s=r[2];return this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,r),Object(n.a)(i,r[1],s,r[2],o)},e.prototype.getTileCoordCenter=function(e){var t=this.getOrigin(e[0]),o=this.getResolution(e[0]),n=Object(u.d)(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*n[0]*o,t[1]-(e[2]+.5)*n[1]*o]},e.prototype.getTileCoordExtent=function(e,t){var o=this.getOrigin(e[0]),n=this.getResolution(e[0]),r=Object(u.d)(this.getTileSize(e[0]),this.tmpSize_),i=o[0]+e[1]*r[0]*n,s=o[1]-(e[2]+1)*r[1]*n,l=i+r[0]*n,c=s+r[1]*n;return Object(a.l)(i,s,l,c,t)},e.prototype.getTileCoordForCoordAndResolution=function(e,t,o){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,o)},e.prototype.getTileCoordForXYAndResolution_=function(e,t,o,n,r){var i=this.getZForResolution(o),s=o/this.getResolution(i),a=this.getOrigin(i),c=Object(u.d)(this.getTileSize(i),this.tmpSize_),d=n?.5:0,h=n?.5:0,p=Math.floor((e-a[0])/o+d),f=Math.floor((a[1]-t)/o+h),m=s*p/c[0],g=s*f/c[1];return n?(m=Math.ceil(m)-1,g=Math.ceil(g)-1):(m=Math.floor(m),g=Math.floor(g)),Object(l.a)(i,m,g,r)},e.prototype.getTileCoordForXYAndZ_=function(e,t,o,n,r){var i=this.getOrigin(o),s=this.getResolution(o),a=Object(u.d)(this.getTileSize(o),this.tmpSize_),c=n?.5:0,d=n?.5:0,h=Math.floor((e-i[0])/s+c),p=Math.floor((i[1]-t)/s+d),f=h/a[0],m=p/a[1];return n?(f=Math.ceil(f)-1,m=Math.ceil(m)-1):(f=Math.floor(f),m=Math.floor(m)),Object(l.a)(o,f,m,r)},e.prototype.getTileCoordForCoordAndZ=function(e,t,o){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,o)},e.prototype.getTileCoordResolution=function(e){return this.resolutions_[e[0]]},e.prototype.getTileSize=function(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]},e.prototype.getFullTileRange=function(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null},e.prototype.getZForResolution=function(e,t){var o=Object(c.h)(this.resolutions_,e,t||0);return Object(s.a)(o,this.minZoom,this.maxZoom)},e.prototype.calculateTileRanges_=function(e){for(var t=this.resolutions_.length,o=new Array(t),n=this.minZoom;n<t;++n)o[n]=this.getTileRangeForExtentAndZ(e,n);this.fullTileRanges_=o},e}();t.a=h},"./node_modules/ol/tilegrid/WMTS.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return c}));var n,r=o("./node_modules/ol/tilegrid/TileGrid.js"),i=o("./node_modules/ol/array.js"),s=o("./node_modules/ol/proj.js"),a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),l=function(e){function t(t){var o=e.call(this,{extent:t.extent,origin:t.origin,origins:t.origins,resolutions:t.resolutions,tileSize:t.tileSize,tileSizes:t.tileSizes,sizes:t.sizes})||this;return o.matrixIds_=t.matrixIds,o}return a(t,e),t.prototype.getMatrixId=function(e){return this.matrixIds_[e]},t.prototype.getMatrixIds=function(){return this.matrixIds_},t}(r.a);function c(e,t,o){var n=[],r=[],a=[],c=[],u=[],d=void 0!==o?o:[],h=e.SupportedCRS,p=Object(s.t)(h),f=p.getMetersPerUnit(),m="ne"==p.getAxisOrientation().substr(0,2);return e.TileMatrix.sort((function(e,t){return t.ScaleDenominator-e.ScaleDenominator})),e.TileMatrix.forEach((function(t){if(!(d.length>0)||Object(i.d)(d,(function(o){return t.Identifier==o.TileMatrix||-1===t.Identifier.indexOf(":")&&e.Identifier+":"+t.Identifier===o.TileMatrix}))){r.push(t.Identifier);var o=28e-5*t.ScaleDenominator/f,s=t.TileWidth,l=t.TileHeight;m?a.push([t.TopLeftCorner[1],t.TopLeftCorner[0]]):a.push(t.TopLeftCorner),n.push(o),c.push(s==l?s:[s,l]),u.push([t.MatrixWidth,t.MatrixHeight])}})),new l({extent:t,origins:a,resolutions:n,matrixIds:r,tileSizes:c,sizes:u})}t.b=l},"./node_modules/ol/tilegrid/common.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return n})),o.d(t,"b",(function(){return r}));var n=42,r=256},"./node_modules/ol/tileurlfunction.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return s})),o.d(t,"b",(function(){return a})),o.d(t,"c",(function(){return l})),o.d(t,"e",(function(){return c})),o.d(t,"d",(function(){return u}));var n=o("./node_modules/ol/asserts.js"),r=o("./node_modules/ol/math.js"),i=o("./node_modules/ol/tilecoord.js");function s(e,t){var o=/\{z\}/g,r=/\{x\}/g,i=/\{y\}/g,s=/\{-y\}/g;return function(a,l,c){return a?e.replace(o,a[0].toString()).replace(r,a[1].toString()).replace(i,a[2].toString()).replace(s,(function(){var e=a[0],o=t.getFullTileRange(e);return Object(n.a)(o,55),(o.getHeight()-a[2]-1).toString()})):void 0}}function a(e,t){for(var o=e.length,n=new Array(o),r=0;r<o;++r)n[r]=s(e[r],t);return l(n)}function l(e){return 1===e.length?e[0]:function(t,o,n){if(t){var s=Object(i.f)(t),a=Object(r.e)(s,e.length);return e[a](t,o,n)}}}function c(e,t,o){}function u(e){var t=[],o=/\{([a-z])-([a-z])\}/.exec(e);if(o){var n=o[1].charCodeAt(0),r=o[2].charCodeAt(0),i=void 0;for(i=n;i<=r;++i)t.push(e.replace(o[0],String.fromCharCode(i)));return t}if(o=/\{(\d+)-(\d+)\}/.exec(e)){for(var s=parseInt(o[2],10),a=parseInt(o[1],10);a<=s;a++)t.push(e.replace(o[0],a.toString()));return t}return t.push(e),t}},"./node_modules/ol/transform.js":function(e,t,o){"use strict";o.d(t,"d",(function(){return a})),o.d(t,"j",(function(){return l})),o.d(t,"i",(function(){return c})),o.d(t,"m",(function(){return u})),o.d(t,"n",(function(){return d})),o.d(t,"a",(function(){return h})),o.d(t,"k",(function(){return p})),o.d(t,"l",(function(){return f})),o.d(t,"h",(function(){return m})),o.d(t,"p",(function(){return g})),o.d(t,"b",(function(){return y})),o.d(t,"c",(function(){return v})),o.d(t,"f",(function(){return _})),o.d(t,"g",(function(){return b})),o.d(t,"e",(function(){return w})),o.d(t,"o",(function(){return E}));var n,r=o("./node_modules/ol/has.js"),i=o("./node_modules/ol/asserts.js"),s=new Array(6);function a(){return[1,0,0,1,0,0]}function l(e){return u(e,1,0,0,1,0,0)}function c(e,t){var o=e[0],n=e[1],r=e[2],i=e[3],s=e[4],a=e[5],l=t[0],c=t[1],u=t[2],d=t[3],h=t[4],p=t[5];return e[0]=o*l+r*c,e[1]=n*l+i*c,e[2]=o*u+r*d,e[3]=n*u+i*d,e[4]=o*h+r*p+s,e[5]=n*h+i*p+a,e}function u(e,t,o,n,r,i,s){return e[0]=t,e[1]=o,e[2]=n,e[3]=r,e[4]=i,e[5]=s,e}function d(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function h(e,t){var o=t[0],n=t[1];return t[0]=e[0]*o+e[2]*n+e[4],t[1]=e[1]*o+e[3]*n+e[5],t}function p(e,t){var o=Math.cos(t),n=Math.sin(t);return c(e,u(s,o,n,-n,o,0,0))}function f(e,t,o){return c(e,u(s,t,0,0,o,0,0))}function m(e,t,o){return u(e,t,0,0,o,0,0)}function g(e,t,o){return c(e,u(s,1,0,0,1,t,o))}function y(e,t,o,n,r,i,s,a){var l=Math.sin(i),c=Math.cos(i);return e[0]=n*c,e[1]=r*l,e[2]=-n*l,e[3]=r*c,e[4]=s*n*c-a*n*l+t,e[5]=s*r*l+a*r*c+o,e}function v(e,t,o,n,r,i,s){return E(y([1,0,0,1,0,0],e,t,o,n,r,i,s))}function _(e){return b(e,e)}function b(e,t){var o=w(t);Object(i.a)(0!==o,32);var n=t[0],r=t[1],s=t[2],a=t[3],l=t[4],c=t[5];return e[0]=a/o,e[1]=-r/o,e[2]=-s/o,e[3]=n/o,e[4]=(s*c-a*l)/o,e[5]=-(n*c-r*l)/o,e}function w(e){return e[0]*e[3]-e[1]*e[2]}function E(e){var t="matrix("+e.join(", ")+")";if(r.h)return t;var o=n||(n=document.createElement("div"));return o.style.transform=t,o.style.transform}},"./node_modules/ol/uri.js":function(e,t,o){"use strict";function n(e,t){var o=[];Object.keys(t).forEach((function(e){null!==t[e]&&void 0!==t[e]&&o.push(e+"="+encodeURIComponent(t[e]))}));var n=o.join("&");return(e=-1===(e=e.replace(/[?&]$/,"")).indexOf("?")?e+"?":e+"&")+n}o.d(t,"a",(function(){return n}))},"./node_modules/ol/util.js":function(e,t,o){"use strict";function n(){return function(){throw new Error("Unimplemented abstract method.")}()}o.d(t,"b",(function(){return n})),o.d(t,"c",(function(){return i})),o.d(t,"a",(function(){return s}));var r=0;function i(e){return e.ol_uid||(e.ol_uid=String(++r))}var s="6.9.0"},"./node_modules/ol/xml.js":function(e,t,o){"use strict";o.d(t,"b",(function(){return r})),o.d(t,"c",(function(){return i})),o.d(t,"d",(function(){return s})),o.d(t,"e",(function(){return a})),o.d(t,"i",(function(){return l})),o.d(t,"f",(function(){return c})),o.d(t,"t",(function(){return u})),o.d(t,"j",(function(){return d})),o.d(t,"k",(function(){return h})),o.d(t,"p",(function(){return p})),o.d(t,"n",(function(){return f})),o.d(t,"o",(function(){return m})),o.d(t,"m",(function(){return g})),o.d(t,"l",(function(){return y})),o.d(t,"r",(function(){return v})),o.d(t,"a",(function(){return _})),o.d(t,"q",(function(){return b})),o.d(t,"s",(function(){return w})),o.d(t,"u",(function(){return E})),o.d(t,"v",(function(){return O})),o.d(t,"z",(function(){return S})),o.d(t,"w",(function(){return x})),o.d(t,"y",(function(){return j})),o.d(t,"h",(function(){return P})),o.d(t,"x",(function(){return A})),o.d(t,"g",(function(){return M}));var n=o("./node_modules/ol/array.js"),r="http://www.w3.org/2001/XMLSchema-instance";function i(e,t){return M().createElementNS(e,t)}function s(e,t){return a(e,t,[]).join("")}function a(e,t,o){if(e.nodeType==Node.CDATA_SECTION_NODE||e.nodeType==Node.TEXT_NODE)t?o.push(String(e.nodeValue).replace(/(\r\n|\r|\n)/g,"")):o.push(e.nodeValue);else{var n=void 0;for(n=e.firstChild;n;n=n.nextSibling)a(n,t,o)}return o}function l(e){return"documentElement"in e}function c(e,t,o){return e.getAttributeNS(t,o)||""}function u(e){return(new DOMParser).parseFromString(e,"application/xml")}function d(e,t){return function(o,r){var i=e.call(void 0!==t?t:this,o,r);if(void 0!==i){var s=r[r.length-1];Object(n.c)(s,i)}}}function h(e,t){return function(o,n){var r=e.call(void 0!==t?t:this,o,n);void 0!==r&&n[n.length-1].push(r)}}function p(e,t){return function(o,n){var r=e.call(void 0!==t?t:this,o,n);void 0!==r&&(n[n.length-1]=r)}}function f(e,t,o){return function(n,r){var i=e.call(void 0!==o?o:this,n,r);if(void 0!==i){var s=r[r.length-1],a=void 0!==t?t:n.localName,l=void 0;a in s?l=s[a]:(l=[],s[a]=l),l.push(i)}}}function m(e,t,o){return function(n,r){var i=e.call(void 0!==o?o:this,n,r);void 0!==i&&(r[r.length-1][void 0!==t?t:n.localName]=i)}}function g(e,t){return function(o,n,r){e.call(void 0!==t?t:this,o,n,r),r[r.length-1].node.appendChild(o)}}function y(e,t){var o,n;return function(t,r,i){if(void 0===o){o={};var s={};s[t.localName]=e,o[t.namespaceURI]=s,n=v(t.localName)}S(o,n,r,i)}}function v(e,t){var o=e;return function(e,n,r){var s=n[n.length-1].node,a=o;return void 0===a&&(a=r),i(void 0!==t?t:s.namespaceURI,a)}}var _=v();function b(e,t){for(var o=t.length,n=new Array(o),r=0;r<o;++r)n[r]=e[t[r]];return n}function w(e,t,o){var n,r,i=void 0!==o?o:{};for(n=0,r=e.length;n<r;++n)i[e[n]]=t;return i}function E(e,t,o,n){var r;for(r=t.firstElementChild;r;r=r.nextElementSibling){var i=e[r.namespaceURI];if(void 0!==i){var s=i[r.localName];void 0!==s&&s.call(n,r,o)}}}function O(e,t,o,n,r){return n.push(e),E(t,o,n,r),n.pop()}function S(e,t,o,n,r,i){for(var s,a,l=(void 0!==r?r:o).length,c=0;c<l;++c)void 0!==(s=o[c])&&void 0!==(a=t.call(void 0!==i?i:this,s,n,void 0!==r?r[c]:void 0))&&e[a.namespaceURI][a.localName].call(i,a,s,n)}function x(e,t,o,n,r,i,s){return r.push(e),S(t,o,n,r,i,s),r.pop()}var C=void 0;function j(e){C=e}function P(){return void 0===C&&"undefined"!=typeof XMLSerializer&&(C=new XMLSerializer),C}var T=void 0;function A(e){T=e}function M(){return void 0===T&&"undefined"!=typeof document&&(T=document.implementation.createDocument("","",null)),T}},"./node_modules/pbf/index.js":function(e,t,o){"use strict";e.exports=r;var n=o("./node_modules/ieee754/index.js");function r(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}r.Varint=0,r.Fixed64=1,r.Bytes=2,r.Fixed32=5;var i="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function s(e){return e.type===r.Bytes?e.readVarint()+e.pos:e.pos+1}function a(e,t,o){return o?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function l(e,t,o){var n=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));o.realloc(n);for(var r=o.pos-1;r>=e;r--)o.buf[r+n]=o.buf[r]}function c(e,t){for(var o=0;o<e.length;o++)t.writeVarint(e[o])}function u(e,t){for(var o=0;o<e.length;o++)t.writeSVarint(e[o])}function d(e,t){for(var o=0;o<e.length;o++)t.writeFloat(e[o])}function h(e,t){for(var o=0;o<e.length;o++)t.writeDouble(e[o])}function p(e,t){for(var o=0;o<e.length;o++)t.writeBoolean(e[o])}function f(e,t){for(var o=0;o<e.length;o++)t.writeFixed32(e[o])}function m(e,t){for(var o=0;o<e.length;o++)t.writeSFixed32(e[o])}function g(e,t){for(var o=0;o<e.length;o++)t.writeFixed64(e[o])}function y(e,t){for(var o=0;o<e.length;o++)t.writeSFixed64(e[o])}function v(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function _(e,t,o){e[o]=t,e[o+1]=t>>>8,e[o+2]=t>>>16,e[o+3]=t>>>24}function b(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}r.prototype={destroy:function(){this.buf=null},readFields:function(e,t,o){for(o=o||this.length;this.pos<o;){var n=this.readVarint(),r=n>>3,i=this.pos;this.type=7&n,e(r,t,this),this.pos===i&&this.skip(n)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=v(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=b(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=v(this.buf,this.pos)+4294967296*v(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=v(this.buf,this.pos)+4294967296*b(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=n.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=n.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,o,n=this.buf;return t=127&(o=n[this.pos++]),o<128?t:(t|=(127&(o=n[this.pos++]))<<7,o<128?t:(t|=(127&(o=n[this.pos++]))<<14,o<128?t:(t|=(127&(o=n[this.pos++]))<<21,o<128?t:function(e,t,o){var n,r,i=o.buf;if(r=i[o.pos++],n=(112&r)>>4,r<128)return a(e,n,t);if(r=i[o.pos++],n|=(127&r)<<3,r<128)return a(e,n,t);if(r=i[o.pos++],n|=(127&r)<<10,r<128)return a(e,n,t);if(r=i[o.pos++],n|=(127&r)<<17,r<128)return a(e,n,t);if(r=i[o.pos++],n|=(127&r)<<24,r<128)return a(e,n,t);if(r=i[o.pos++],n|=(1&r)<<31,r<128)return a(e,n,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(o=n[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&i?function(e,t,o){return i.decode(e.subarray(t,o))}(this.buf,t,e):function(e,t,o){var n="",r=t;for(;r<o;){var i,s,a,l=e[r],c=null,u=l>239?4:l>223?3:l>191?2:1;if(r+u>o)break;1===u?l<128&&(c=l):2===u?128==(192&(i=e[r+1]))&&(c=(31&l)<<6|63&i)<=127&&(c=null):3===u?(i=e[r+1],s=e[r+2],128==(192&i)&&128==(192&s)&&((c=(15&l)<<12|(63&i)<<6|63&s)<=2047||c>=55296&&c<=57343)&&(c=null)):4===u&&(i=e[r+1],s=e[r+2],a=e[r+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&((c=(15&l)<<18|(63&i)<<12|(63&s)<<6|63&a)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,u=1):c>65535&&(c-=65536,n+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),n+=String.fromCharCode(c),r+=u}return n}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==r.Bytes)return e.push(this.readVarint(t));var o=s(this);for(e=e||[];this.pos<o;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==r.Bytes)return e.push(this.readSVarint());var t=s(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==r.Bytes)return e.push(this.readBoolean());var t=s(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==r.Bytes)return e.push(this.readFloat());var t=s(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==r.Bytes)return e.push(this.readDouble());var t=s(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==r.Bytes)return e.push(this.readFixed32());var t=s(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==r.Bytes)return e.push(this.readSFixed32());var t=s(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==r.Bytes)return e.push(this.readFixed64());var t=s(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==r.Bytes)return e.push(this.readSFixed64());var t=s(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===r.Varint)for(;this.buf[this.pos++]>127;);else if(t===r.Bytes)this.pos=this.readVarint()+this.pos;else if(t===r.Fixed32)this.pos+=4;else{if(t!==r.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var o=new Uint8Array(t);o.set(this.buf),this.buf=o,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),_(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),_(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),_(this.buf,-1&e,this.pos),_(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),_(this.buf,-1&e,this.pos),_(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var o,n;e>=0?(o=e%4294967296|0,n=e/4294967296|0):(n=~(-e/4294967296),4294967295^(o=~(-e%4294967296))?o=o+1|0:(o=0,n=n+1|0));if(e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,o){o.buf[o.pos++]=127&e|128,e>>>=7,o.buf[o.pos++]=127&e|128,e>>>=7,o.buf[o.pos++]=127&e|128,e>>>=7,o.buf[o.pos++]=127&e|128,e>>>=7,o.buf[o.pos]=127&e}(o,0,t),function(e,t){var o=(7&e)<<4;if(t.buf[t.pos++]|=o|((e>>>=3)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;t.buf[t.pos++]=127&e}(n,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,o){for(var n,r,i=0;i<t.length;i++){if((n=t.charCodeAt(i))>55295&&n<57344){if(!r){n>56319||i+1===t.length?(e[o++]=239,e[o++]=191,e[o++]=189):r=n;continue}if(n<56320){e[o++]=239,e[o++]=191,e[o++]=189,r=n;continue}n=r-55296<<10|n-56320|65536,r=null}else r&&(e[o++]=239,e[o++]=191,e[o++]=189,r=null);n<128?e[o++]=n:(n<2048?e[o++]=n>>6|192:(n<65536?e[o++]=n>>12|224:(e[o++]=n>>18|240,e[o++]=n>>12&63|128),e[o++]=n>>6&63|128),e[o++]=63&n|128)}return o}(this.buf,e,this.pos);var o=this.pos-t;o>=128&&l(t,o,this),this.pos=t-1,this.writeVarint(o),this.pos+=o},writeFloat:function(e){this.realloc(4),n.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),n.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var o=0;o<t;o++)this.buf[this.pos++]=e[o]},writeRawMessage:function(e,t){this.pos++;var o=this.pos;e(t,this);var n=this.pos-o;n>=128&&l(o,n,this),this.pos=o-1,this.writeVarint(n),this.pos+=n},writeMessage:function(e,t,o){this.writeTag(e,r.Bytes),this.writeRawMessage(t,o)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,c,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,u,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,p,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,d,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,h,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,f,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,m,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,g,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,y,t)},writeBytesField:function(e,t){this.writeTag(e,r.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,r.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,r.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,r.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,r.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,r.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,r.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,r.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,r.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,r.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}}},"./node_modules/process/browser.js":function(e,t){var o,n,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(o===setTimeout)return setTimeout(e,0);if((o===i||!o)&&setTimeout)return o=setTimeout,setTimeout(e,0);try{return o(e,0)}catch(t){try{return o.call(null,e,0)}catch(t){return o.call(this,e,0)}}}!function(){try{o="function"==typeof setTimeout?setTimeout:i}catch(e){o=i}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var l,c=[],u=!1,d=-1;function h(){u&&l&&(u=!1,l.length?c=l.concat(c):d=-1,c.length&&p())}function p(){if(!u){var e=a(h);u=!0;for(var t=c.length;t;){for(l=c,c=[];++d<t;)l&&l[d].run();d=-1,t=c.length}l=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)t[o-1]=arguments[o];c.push(new f(e,t)),1!==c.length||u||a(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},"./node_modules/proj4/dist/proj4-src.js":function(e,t,o){e.exports=function(){"use strict";var e=484813681109536e-20,t=Math.PI/2,o=.017453292519943295,n=57.29577951308232,r=Math.PI/4,i=2*Math.PI,s=3.14159265359,a={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},l={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},c=/[\s_\-\/\(\)]/g;function u(e,t){if(e[t])return e[t];for(var o,n=Object.keys(e),r=t.toLowerCase().replace(c,""),i=-1;++i<n.length;)if((o=n[i]).toLowerCase().replace(c,"")===r)return e[o]}var d=function(e){var t,n,r,i={},s=e.split("+").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var o=t.split("=");return o.push(!0),e[o[0].toLowerCase()]=o[1],e}),{}),c={proj:"projName",datum:"datumCode",rf:function(e){i.rf=parseFloat(e)},lat_0:function(e){i.lat0=e*o},lat_1:function(e){i.lat1=e*o},lat_2:function(e){i.lat2=e*o},lat_ts:function(e){i.lat_ts=e*o},lon_0:function(e){i.long0=e*o},lon_1:function(e){i.long1=e*o},lon_2:function(e){i.long2=e*o},alpha:function(e){i.alpha=parseFloat(e)*o},gamma:function(e){i.rectified_grid_angle=parseFloat(e)},lonc:function(e){i.longc=e*o},x_0:function(e){i.x0=parseFloat(e)},y_0:function(e){i.y0=parseFloat(e)},k_0:function(e){i.k0=parseFloat(e)},k:function(e){i.k0=parseFloat(e)},a:function(e){i.a=parseFloat(e)},b:function(e){i.b=parseFloat(e)},r_a:function(){i.R_A=!0},zone:function(e){i.zone=parseInt(e,10)},south:function(){i.utmSouth=!0},towgs84:function(e){i.datum_params=e.split(",").map((function(e){return parseFloat(e)}))},to_meter:function(e){i.to_meter=parseFloat(e)},units:function(e){i.units=e;var t=u(l,e);t&&(i.to_meter=t.to_meter)},from_greenwich:function(e){i.from_greenwich=e*o},pm:function(e){var t=u(a,e);i.from_greenwich=(t||parseFloat(e))*o},nadgrids:function(e){"@null"===e?i.datumCode="none":i.nadgrids=e},axis:function(e){3===e.length&&-1!=="ewnsud".indexOf(e.substr(0,1))&&-1!=="ewnsud".indexOf(e.substr(1,1))&&-1!=="ewnsud".indexOf(e.substr(2,1))&&(i.axis=e)},approx:function(){i.approx=!0}};for(t in s)n=s[t],t in c?"function"==typeof(r=c[t])?r(n):i[r]=n:i[t]=n;return"string"==typeof i.datumCode&&"WGS84"!==i.datumCode&&(i.datumCode=i.datumCode.toLowerCase()),i},h=/\s/,p=/[A-Za-z]/,f=/[A-Za-z84]/,m=/[,\]]/,g=/[\d\.E\-\+]/;function y(e){if("string"!=typeof e)throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function v(e,t,o){Array.isArray(t)&&(o.unshift(t),t=null);var n=t?{}:e,r=o.reduce((function(e,t){return _(t,e),e}),n);t&&(e[t]=r)}function _(e,t){if(Array.isArray(e)){var o=e.shift();if("PARAMETER"===o&&(o=e.shift()),1===e.length)return Array.isArray(e[0])?(t[o]={},void _(e[0],t[o])):void(t[o]=e[0]);if(e.length)if("TOWGS84"!==o){if("AXIS"===o)return o in t||(t[o]=[]),void t[o].push(e);var n;switch(Array.isArray(o)||(t[o]={}),o){case"UNIT":case"PRIMEM":case"VERT_DATUM":return t[o]={name:e[0].toLowerCase(),convert:e[1]},void(3===e.length&&_(e[2],t[o]));case"SPHEROID":case"ELLIPSOID":return t[o]={name:e[0],a:e[1],rf:e[2]},void(4===e.length&&_(e[3],t[o]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return e[0]=["name",e[0]],void v(t,o,e);default:for(n=-1;++n<e.length;)if(!Array.isArray(e[n]))return _(e,t[o]);return v(t,o,e)}}else t[o]=e;else t[o]=!0}else t[e]=!0}function b(e){return.017453292519943295*e}y.prototype.readCharicter=function(){var e=this.text[this.place++];if(4!==this.state)for(;h.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case 1:return this.neutral(e);case 2:return this.keyword(e);case 4:return this.quoted(e);case 5:return this.afterquote(e);case 3:return this.number(e);case-1:return}},y.prototype.afterquote=function(e){if('"'===e)return this.word+='"',void(this.state=4);if(m.test(e))return this.word=this.word.trim(),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in afterquote yet, index '+this.place)},y.prototype.afterItem=function(e){return","===e?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):"]"===e?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},y.prototype.number=function(e){if(!g.test(e)){if(m.test(e))return this.word=parseFloat(this.word),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in number yet, index '+this.place)}this.word+=e},y.prototype.quoted=function(e){'"'!==e?this.word+=e:this.state=5},y.prototype.keyword=function(e){if(f.test(e))this.word+=e;else{if("["===e){var t=[];return t.push(this.word),this.level++,null===this.root?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,void(this.state=1)}if(!m.test(e))throw new Error("havn't handled \""+e+'" in keyword yet, index '+this.place);this.afterItem(e)}},y.prototype.neutral=function(e){if(p.test(e))return this.word=e,void(this.state=2);if('"'===e)return this.word="",void(this.state=4);if(g.test(e))return this.word=e,void(this.state=3);if(!m.test(e))throw new Error("havn't handled \""+e+'" in neutral yet, index '+this.place);this.afterItem(e)},y.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var w=function(e){var t=new y(e).output(),o=t.shift(),n=t.shift();t.unshift(["name",n]),t.unshift(["type",o]);var r={};return _(t,r),function(e){if("GEOGCS"===e.type?e.projName="longlat":"LOCAL_CS"===e.type?(e.projName="identity",e.local=!0):"object"==typeof e.PROJECTION?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.AXIS){for(var t="",o=0,n=e.AXIS.length;o<n;++o){var r=e.AXIS[o][0].toLowerCase();-1!==r.indexOf("north")?t+="n":-1!==r.indexOf("south")?t+="s":-1!==r.indexOf("east")?t+="e":-1!==r.indexOf("west")&&(t+="w")}2===t.length&&(t+="u"),3===t.length&&(e.axis=t)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),"metre"===e.units&&(e.units="meter"),e.UNIT.convert&&("GEOGCS"===e.type?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var i=e.GEOGCS;function s(t){return t*(e.to_meter||1)}"GEOGCS"===e.type&&(i=e),i&&(i.DATUM?e.datumCode=i.DATUM.name.toLowerCase():e.datumCode=i.name.toLowerCase(),"d_"===e.datumCode.slice(0,2)&&(e.datumCode=e.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==e.datumCode&&"new_zealand_1949"!==e.datumCode||(e.datumCode="nzgd49"),"wgs_1984"!==e.datumCode&&"world_geodetic_system_1984"!==e.datumCode||("Mercator_Auxiliary_Sphere"===e.PROJECTION&&(e.sphere=!0),e.datumCode="wgs84"),"_ferro"===e.datumCode.slice(-6)&&(e.datumCode=e.datumCode.slice(0,-6)),"_jakarta"===e.datumCode.slice(-8)&&(e.datumCode=e.datumCode.slice(0,-8)),~e.datumCode.indexOf("belge")&&(e.datumCode="rnb72"),i.DATUM&&i.DATUM.SPHEROID&&(e.ellps=i.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===e.ellps.toLowerCase().slice(0,13)&&(e.ellps="intl"),e.a=i.DATUM.SPHEROID.a,e.rf=parseFloat(i.DATUM.SPHEROID.rf,10)),i.DATUM&&i.DATUM.TOWGS84&&(e.datum_params=i.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),"ch1903+"===e.datumCode&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",b],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",b],["x0","false_easting",s],["y0","false_northing",s],["long0","central_meridian",b],["lat0","latitude_of_origin",b],["lat0","standard_parallel_1",b],["lat1","standard_parallel_1",b],["lat2","standard_parallel_2",b],["azimuth","Azimuth"],["alpha","azimuth",b],["srsCode","name"]].forEach((function(t){return function(e,t){var o=t[0],n=t[1];!(o in e)&&n in e&&(e[o]=e[n],3===t.length&&(e[o]=t[2](e[o])))}(e,t)})),e.long0||!e.longc||"Albers_Conic_Equal_Area"!==e.projName&&"Lambert_Azimuthal_Equal_Area"!==e.projName||(e.long0=e.longc),e.lat_ts||!e.lat1||"Stereographic_South_Pole"!==e.projName&&"Polar Stereographic (variant B)"!==e.projName||(e.lat0=b(e.lat1>0?90:-90),e.lat_ts=e.lat1)}(r),r};function E(e){var t=this;if(2===arguments.length){var o=arguments[1];"string"==typeof o?"+"===o.charAt(0)?E[e]=d(arguments[1]):E[e]=w(arguments[1]):E[e]=o}else if(1===arguments.length){if(Array.isArray(e))return e.map((function(e){Array.isArray(e)?E.apply(t,e):E(e)}));if("string"==typeof e){if(e in E)return E[e]}else"EPSG"in e?E["EPSG:"+e.EPSG]=e:"ESRI"in e?E["ESRI:"+e.ESRI]=e:"IAU2000"in e?E["IAU2000:"+e.IAU2000]=e:console.log(e);return}}!function(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}(E);var O=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],S=["3857","900913","3785","102113"];function x(e){if(!function(e){return"string"==typeof e}(e))return e;if(function(e){return e in E}(e))return E[e];if(function(e){return O.some((function(t){return e.indexOf(t)>-1}))}(e)){var t=w(e);if(function(e){var t=u(e,"authority");if(t){var o=u(t,"epsg");return o&&S.indexOf(o)>-1}}(t))return E["EPSG:3857"];var o=function(e){var t=u(e,"extension");if(t)return u(t,"proj4")}(t);return o?d(o):t}return function(e){return"+"===e[0]}(e)?d(e):void 0}var C=function(e,t){var o,n;if(e=e||{},!t)return e;for(n in t)void 0!==(o=t[n])&&(e[n]=o);return e},j=function(e,t,o){var n=e*t;return o/Math.sqrt(1-n*n)},P=function(e){return e<0?-1:1},T=function(e){return Math.abs(e)<=s?e:e-P(e)*i},A=function(e,o,n){var r=e*n,i=.5*e;return r=Math.pow((1-r)/(1+r),i),Math.tan(.5*(t-o))/r},M=function(e,o){for(var n,r,i=.5*e,s=t-2*Math.atan(o),a=0;a<=15;a++)if(n=e*Math.sin(s),s+=r=t-2*Math.atan(o*Math.pow((1-n)/(1+n),i))-s,Math.abs(r)<=1e-10)return s;return-9999};function I(e){return e}var R=[{init:function(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=j(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(e){var o,i,s=e.x,a=e.y;if(a*n>90&&a*n<-90&&s*n>180&&s*n<-180)return null;if(Math.abs(Math.abs(a)-t)<=1e-10)return null;if(this.sphere)o=this.x0+this.a*this.k0*T(s-this.long0),i=this.y0+this.a*this.k0*Math.log(Math.tan(r+.5*a));else{var l=Math.sin(a),c=A(this.e,a,l);o=this.x0+this.a*this.k0*T(s-this.long0),i=this.y0-this.a*this.k0*Math.log(c)}return e.x=o,e.y=i,e},inverse:function(e){var o,n,r=e.x-this.x0,i=e.y-this.y0;if(this.sphere)n=t-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var s=Math.exp(-i/(this.a*this.k0));if(-9999===(n=M(this.e,s)))return null}return o=T(this.long0+r/(this.a*this.k0)),e.x=o,e.y=n,e},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:I,inverse:I,names:["longlat","identity"]}],L={},k=[];function G(e,t){var o=k.length;return e.names?(k[o]=e,e.names.forEach((function(e){L[e.toLowerCase()]=o})),this):(console.log(t),!0)}var N={start:function(){R.forEach(G)},add:G,get:function(e){if(!e)return!1;var t=e.toLowerCase();return void 0!==L[t]&&k[L[t]]?k[L[t]]:void 0}},D={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},F=D.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};D.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var U={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}},B={};function z(e){if(0===e.length)return null;var t="@"===e[0];return t&&(e=e.slice(1)),"null"===e?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:e,mandatory:!t,grid:B[e]||null,isNull:!1}}function V(e){return e/3600*Math.PI/180}function W(e,t,o){return String.fromCharCode.apply(null,new Uint8Array(e.buffer.slice(t,o)))}function q(e){return e.map((function(e){return[V(e.longitudeShift),V(e.latitudeShift)]}))}function H(e,t,o){return{name:W(e,t+8,t+16).trim(),parent:W(e,t+24,t+24+8).trim(),lowerLatitude:e.getFloat64(t+72,o),upperLatitude:e.getFloat64(t+88,o),lowerLongitude:e.getFloat64(t+104,o),upperLongitude:e.getFloat64(t+120,o),latitudeInterval:e.getFloat64(t+136,o),longitudeInterval:e.getFloat64(t+152,o),gridNodeCount:e.getInt32(t+168,o)}}function Y(e,t,o,n){for(var r=t+176,i=[],s=0;s<o.gridNodeCount;s++){var a={latitudeShift:e.getFloat32(r+16*s,n),longitudeShift:e.getFloat32(r+16*s+4,n),latitudeAccuracy:e.getFloat32(r+16*s+8,n),longitudeAccuracy:e.getFloat32(r+16*s+12,n)};i.push(a)}return i}function X(t,o){if(!(this instanceof X))return new X(t);o=o||function(e){if(e)throw e};var n=x(t);if("object"==typeof n){var r=X.projections.get(n.projName);if(r){if(n.datumCode&&"none"!==n.datumCode){var i=u(U,n.datumCode);i&&(n.datum_params=n.datum_params||(i.towgs84?i.towgs84.split(","):null),n.ellps=i.ellipse,n.datumName=i.datumName?i.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var s,a,l,c,d,h,p,f=function(e,t,o,n,r){if(!e){var i=u(D,n);i||(i=F),e=i.a,t=i.b,o=i.rf}return o&&!t&&(t=(1-1/o)*e),(0===o||Math.abs(e-t)<1e-10)&&(r=!0,t=e),{a:e,b:t,rf:o,sphere:r}}(n.a,n.b,n.rf,n.ellps,n.sphere),m=(s=f.a,a=f.b,f.rf,l=n.R_A,h=((c=s*s)-(d=a*a))/c,p=0,l?(c=(s*=1-h*(.16666666666666666+h*(.04722222222222222+.022156084656084655*h)))*s,h=0):p=Math.sqrt(h),{es:h,e:p,ep2:(c-d)/d}),g=function(e){return void 0===e?null:e.split(",").map(z)}(n.nadgrids),y=n.datum||function(t,o,n,r,i,s,a){var l={};return l.datum_type=void 0===t||"none"===t?5:4,o&&(l.datum_params=o.map(parseFloat),0===l.datum_params[0]&&0===l.datum_params[1]&&0===l.datum_params[2]||(l.datum_type=1),l.datum_params.length>3&&(0===l.datum_params[3]&&0===l.datum_params[4]&&0===l.datum_params[5]&&0===l.datum_params[6]||(l.datum_type=2,l.datum_params[3]*=e,l.datum_params[4]*=e,l.datum_params[5]*=e,l.datum_params[6]=l.datum_params[6]/1e6+1))),a&&(l.datum_type=3,l.grids=a),l.a=n,l.b=r,l.es=i,l.ep2=s,l}(n.datumCode,n.datum_params,f.a,f.b,m.es,m.ep2,g);C(this,n),C(this,r),this.a=f.a,this.b=f.b,this.rf=f.rf,this.sphere=f.sphere,this.es=m.es,this.e=m.e,this.ep2=m.ep2,this.datum=y,this.init(),o(null,this)}else o(t)}else o(t)}function Z(e,o,n){var r,i,s,a,l=e.x,c=e.y,u=e.z?e.z:0;if(c<-t&&c>-1.001*t)c=-t;else if(c>t&&c<1.001*t)c=t;else{if(c<-t)return{x:-1/0,y:-1/0,z:e.z};if(c>t)return{x:1/0,y:1/0,z:e.z}}return l>Math.PI&&(l-=2*Math.PI),i=Math.sin(c),a=Math.cos(c),s=i*i,{x:((r=n/Math.sqrt(1-o*s))+u)*a*Math.cos(l),y:(r+u)*a*Math.sin(l),z:(r*(1-o)+u)*i}}function K(e,t,o,n){var r,i,s,a,l,c,u,d,h,p,f,m,g,y,v,_=e.x,b=e.y,w=e.z?e.z:0;if(r=Math.sqrt(_*_+b*b),i=Math.sqrt(_*_+b*b+w*w),r/o<1e-12){if(y=0,i/o<1e-12)return v=-n,{x:e.x,y:e.y,z:e.z}}else y=Math.atan2(b,_);s=w/i,d=(a=r/i)*(1-t)*(l=1/Math.sqrt(1-t*(2-t)*a*a)),h=s*l,g=0;do{g++,c=t*(u=o/Math.sqrt(1-t*h*h))/(u+(v=r*d+w*h-u*(1-t*h*h))),m=(f=s*(l=1/Math.sqrt(1-c*(2-c)*a*a)))*d-(p=a*(1-c)*l)*h,d=p,h=f}while(m*m>1e-24&&g<30);return{x:y,y:Math.atan(f/Math.abs(p)),z:v}}function J(e){return 1===e||2===e}X.projections=N,X.projections.start();var Q=function(e,t,o){if(function(e,t){return e.datum_type===t.datum_type&&!(e.a!==t.a||Math.abs(e.es-t.es)>5e-11)&&(1===e.datum_type?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]:2!==e.datum_type||e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6])}(e,t))return o;if(5===e.datum_type||5===t.datum_type)return o;var n=e.a,r=e.es;if(3===e.datum_type){if(0!==$(e,!1,o))return;n=6378137,r=.0066943799901413165}var i=t.a,s=t.b,a=t.es;return 3===t.datum_type&&(i=6378137,s=6356752.314,a=.0066943799901413165),r!==a||n!==i||J(e.datum_type)||J(t.datum_type)?(o=Z(o,r,n),J(e.datum_type)&&(o=function(e,t,o){if(1===t)return{x:e.x+o[0],y:e.y+o[1],z:e.z+o[2]};if(2===t){var n=o[0],r=o[1],i=o[2],s=o[3],a=o[4],l=o[5],c=o[6];return{x:c*(e.x-l*e.y+a*e.z)+n,y:c*(l*e.x+e.y-s*e.z)+r,z:c*(-a*e.x+s*e.y+e.z)+i}}}(o,e.datum_type,e.datum_params)),J(t.datum_type)&&(o=function(e,t,o){if(1===t)return{x:e.x-o[0],y:e.y-o[1],z:e.z-o[2]};if(2===t){var n=o[0],r=o[1],i=o[2],s=o[3],a=o[4],l=o[5],c=o[6],u=(e.x-n)/c,d=(e.y-r)/c,h=(e.z-i)/c;return{x:u+l*d-a*h,y:-l*u+d+s*h,z:a*u-s*d+h}}}(o,t.datum_type,t.datum_params)),o=K(o,a,i,s),3!==t.datum_type||0===$(t,!0,o)?o:void 0):o};function $(e,t,o){if(null===e.grids||0===e.grids.length)return console.log("Grid shift grids not found"),-1;for(var r={x:-o.x,y:o.y},i={x:Number.NaN,y:Number.NaN},s=[],a=0;a<e.grids.length;a++){var l=e.grids[a];if(s.push(l.name),l.isNull){i=r;break}if(null!==l.grid){var c=l.grid.subgrids[0],u=(Math.abs(c.del[1])+Math.abs(c.del[0]))/1e4,d=c.ll[0]-u,h=c.ll[1]-u,p=c.ll[0]+(c.lim[0]-1)*c.del[0]+u,f=c.ll[1]+(c.lim[1]-1)*c.del[1]+u;if(!(h>r.y||d>r.x||f<r.y||p<r.x||(i=ee(r,t,c),isNaN(i.x))))break}else if(l.mandatory)return console.log("Unable to find mandatory grid '"+l.name+"'"),-1}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*n+" "+r.y*n+" tried: '"+s+"'"),-1):(o.x=-i.x,o.y=i.y,0)}function ee(e,t,o){var n={x:Number.NaN,y:Number.NaN};if(isNaN(e.x))return n;var r={x:e.x,y:e.y};r.x-=o.ll[0],r.y-=o.ll[1],r.x=T(r.x-Math.PI)+Math.PI;var i=te(r,o);if(t){if(isNaN(i.x))return n;i.x=r.x-i.x,i.y=r.y-i.y;var s,a,l=9;do{if(a=te(i,o),isNaN(a.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}s={x:r.x-(a.x+i.x),y:r.y-(a.y+i.y)},i.x+=s.x,i.y+=s.y}while(l--&&Math.abs(s.x)>1e-12&&Math.abs(s.y)>1e-12);if(l<0)return console.log("Inverse grid shift iterator failed to converge."),n;n.x=T(i.x+o.ll[0]),n.y=i.y+o.ll[1]}else isNaN(i.x)||(n.x=e.x+i.x,n.y=e.y+i.y);return n}function te(e,t){var o,n={x:e.x/t.del[0],y:e.y/t.del[1]},r=Math.floor(n.x),i=Math.floor(n.y),s=n.x-1*r,a=n.y-1*i,l={x:Number.NaN,y:Number.NaN};if(r<0||r>=t.lim[0])return l;if(i<0||i>=t.lim[1])return l;o=i*t.lim[0]+r;var c=t.cvs[o][0],u=t.cvs[o][1];o++;var d=t.cvs[o][0],h=t.cvs[o][1];o+=t.lim[0];var p=t.cvs[o][0],f=t.cvs[o][1];o--;var m=t.cvs[o][0],g=t.cvs[o][1],y=s*a,v=s*(1-a),_=(1-s)*(1-a),b=(1-s)*a;return l.x=_*c+v*d+b*m+y*p,l.y=_*u+v*h+b*g+y*f,l}var oe=function(e,t,o){var n,r,i,s=o.x,a=o.y,l=o.z||0,c={};for(i=0;i<3;i++)if(!t||2!==i||void 0!==o.z)switch(0===i?(n=s,r=-1!=="ew".indexOf(e.axis[i])?"x":"y"):1===i?(n=a,r=-1!=="ns".indexOf(e.axis[i])?"y":"x"):(n=l,r="z"),e.axis[i]){case"e":c[r]=n;break;case"w":c[r]=-n;break;case"n":c[r]=n;break;case"s":c[r]=-n;break;case"u":void 0!==o[r]&&(c.z=n);break;case"d":void 0!==o[r]&&(c.z=-n);break;default:return null}return c},ne=function(e){var t={x:e[0],y:e[1]};return e.length>2&&(t.z=e[2]),e.length>3&&(t.m=e[3]),t};function re(e){if("function"==typeof Number.isFinite){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof e||e!=e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function ie(e,t,r){var i;if(Array.isArray(r)&&(r=ne(r)),function(e){re(e.x),re(e.y)}(r),e.datum&&t.datum&&function(e,t){return(1===e.datum.datum_type||2===e.datum.datum_type)&&"WGS84"!==t.datumCode||(1===t.datum.datum_type||2===t.datum.datum_type)&&"WGS84"!==e.datumCode}(e,t)&&(r=ie(e,i=new X("WGS84"),r),e=i),"enu"!==e.axis&&(r=oe(e,!1,r)),"longlat"===e.projName)r={x:r.x*o,y:r.y*o,z:r.z||0};else if(e.to_meter&&(r={x:r.x*e.to_meter,y:r.y*e.to_meter,z:r.z||0}),!(r=e.inverse(r)))return;if(e.from_greenwich&&(r.x+=e.from_greenwich),r=Q(e.datum,t.datum,r))return t.from_greenwich&&(r={x:r.x-t.from_greenwich,y:r.y,z:r.z||0}),"longlat"===t.projName?r={x:r.x*n,y:r.y*n,z:r.z||0}:(r=t.forward(r),t.to_meter&&(r={x:r.x/t.to_meter,y:r.y/t.to_meter,z:r.z||0})),"enu"!==t.axis?oe(t,!0,r):r}var se=X("WGS84");function ae(e,t,o){var n,r,i;return Array.isArray(o)?(n=ie(e,t,o)||{x:NaN,y:NaN},o.length>2?void 0!==e.name&&"geocent"===e.name||void 0!==t.name&&"geocent"===t.name?"number"==typeof n.z?[n.x,n.y,n.z].concat(o.splice(3)):[n.x,n.y,o[2]].concat(o.splice(3)):[n.x,n.y].concat(o.splice(2)):[n.x,n.y]):(r=ie(e,t,o),2===(i=Object.keys(o)).length||i.forEach((function(n){if(void 0!==e.name&&"geocent"===e.name||void 0!==t.name&&"geocent"===t.name){if("x"===n||"y"===n||"z"===n)return}else if("x"===n||"y"===n)return;r[n]=o[n]})),r)}function le(e){return e instanceof X?e:e.oProj?e.oProj:X(e)}function ce(e,t,o){e=le(e);var n,r=!1;return void 0===t?(t=e,e=se,r=!0):(void 0!==t.x||Array.isArray(t))&&(o=t,t=e,e=se,r=!0),t=le(t),o?ae(e,t,o):(n={forward:function(o){return ae(e,t,o)},inverse:function(o){return ae(t,e,o)}},r&&(n.oProj=t),n)}var ue=65,de=73,he=79,pe={forward:fe,inverse:function(e){var t=ve(be(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]},toPoint:me};function fe(e,t){return t=t||5,function(e,t){var o,n,r,i,s,a,l,c,u,d,h,p,f,m,g="00000"+e.easting,y="00000"+e.northing;return e.zoneNumber+e.zoneLetter+(u=e.easting,d=e.northing,h=e.zoneNumber,p=_e(h),f=Math.floor(u/1e5),m=Math.floor(d/1e5)%20,o=f,n=m,i="AJSAJS".charCodeAt(r=p-1),s="AFAFAF".charCodeAt(r),c=!1,(a=i+o-1)>90&&(a=a-90+ue-1,c=!0),(a===de||i<de&&a>de||(a>de||i<de)&&c)&&a++,(a===he||i<he&&a>he||(a>he||i<he)&&c)&&++a===de&&a++,a>90&&(a=a-90+ue-1),(l=s+n)>86?(l=l-86+ue-1,c=!0):c=!1,(l===de||s<de&&l>de||(l>de||s<de)&&c)&&l++,(l===he||s<he&&l>he||(l>he||s<he)&&c)&&++l===de&&l++,l>86&&(l=l-86+ue-1),String.fromCharCode(a)+String.fromCharCode(l))+g.substr(g.length-5,t)+y.substr(y.length-5,t)}(function(e){var t,o,n,r,i,s,a,l=e.lat,c=e.lon,u=6378137,d=ge(l),h=ge(c);a=Math.floor((c+180)/6)+1,180===c&&(a=60),l>=56&&l<64&&c>=3&&c<12&&(a=32),l>=72&&l<84&&(c>=0&&c<9?a=31:c>=9&&c<21?a=33:c>=21&&c<33?a=35:c>=33&&c<42&&(a=37)),s=ge(6*(a-1)-180+3),t=u/Math.sqrt(1-.00669438*Math.sin(d)*Math.sin(d)),o=Math.tan(d)*Math.tan(d),n=.006739496752268451*Math.cos(d)*Math.cos(d),r=Math.cos(d)*(h-s),i=u*(.9983242984503243*d-.002514607064228144*Math.sin(2*d)+2639046602129982e-21*Math.sin(4*d)-3.418046101696858e-9*Math.sin(6*d));var p,f,m=.9996*t*(r+(1-o+n)*r*r*r/6+(5-18*o+o*o+72*n-.39089081163157013)*r*r*r*r*r/120)+5e5,g=.9996*(i+t*Math.tan(d)*(r*r/2+(5-o+9*n+4*n*n)*r*r*r*r/24+(61-58*o+o*o+600*n-2.2240339282485886)*r*r*r*r*r*r/720));return l<0&&(g+=1e7),{northing:Math.round(g),easting:Math.round(m),zoneNumber:a,zoneLetter:(p=l,f="Z",84>=p&&p>=72?f="X":72>p&&p>=64?f="W":64>p&&p>=56?f="V":56>p&&p>=48?f="U":48>p&&p>=40?f="T":40>p&&p>=32?f="S":32>p&&p>=24?f="R":24>p&&p>=16?f="Q":16>p&&p>=8?f="P":8>p&&p>=0?f="N":0>p&&p>=-8?f="M":-8>p&&p>=-16?f="L":-16>p&&p>=-24?f="K":-24>p&&p>=-32?f="J":-32>p&&p>=-40?f="H":-40>p&&p>=-48?f="G":-48>p&&p>=-56?f="F":-56>p&&p>=-64?f="E":-64>p&&p>=-72?f="D":-72>p&&p>=-80&&(f="C"),f)}}({lat:e[1],lon:e[0]}),t)}function me(e){var t=ve(be(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function ge(e){return e*(Math.PI/180)}function ye(e){return e/Math.PI*180}function ve(e){var t=e.northing,o=e.easting,n=e.zoneLetter,r=e.zoneNumber;if(r<0||r>60)return null;var i,s,a,l,c,u,d,h,p=6378137,f=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),m=o-5e5,g=t;n<"N"&&(g-=1e7),u=6*(r-1)-180+3,h=(d=g/.9996/6367449.145945056)+(3*f/2-27*f*f*f/32)*Math.sin(2*d)+(21*f*f/16-55*f*f*f*f/32)*Math.sin(4*d)+151*f*f*f/96*Math.sin(6*d),i=p/Math.sqrt(1-.00669438*Math.sin(h)*Math.sin(h)),s=Math.tan(h)*Math.tan(h),a=.006739496752268451*Math.cos(h)*Math.cos(h),l=.99330562*p/Math.pow(1-.00669438*Math.sin(h)*Math.sin(h),1.5),c=m/(.9996*i);var y=h-i*Math.tan(h)/l*(c*c/2-(5+3*s+10*a-4*a*a-.06065547077041606)*c*c*c*c/24+(61+90*s+298*a+45*s*s-1.6983531815716497-3*a*a)*c*c*c*c*c*c/720);y=ye(y);var v,_=(c-(1+2*s+a)*c*c*c/6+(5-2*a+28*s-3*a*a+.05391597401814761+24*s*s)*c*c*c*c*c/120)/Math.cos(h);if(_=u+ye(_),e.accuracy){var b=ve({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});v={top:b.lat,right:b.lon,bottom:y,left:_}}else v={lat:y,lon:_};return v}function _e(e){var t=e%6;return 0===t&&(t=6),t}function be(e){if(e&&0===e.length)throw"MGRSPoint coverting from nothing";for(var t,o=e.length,n=null,r="",i=0;!/[A-Z]/.test(t=e.charAt(i));){if(i>=2)throw"MGRSPoint bad conversion from: "+e;r+=t,i++}var s=parseInt(r,10);if(0===i||i+3>o)throw"MGRSPoint bad conversion from: "+e;var a=e.charAt(i++);if(a<="A"||"B"===a||"Y"===a||a>="Z"||"I"===a||"O"===a)throw"MGRSPoint zone letter "+a+" not handled: "+e;n=e.substring(i,i+=2);for(var l=_e(s),c=function(e,t){for(var o="AJSAJS".charCodeAt(t-1),n=1e5,r=!1;o!==e.charCodeAt(0);){if(++o===de&&o++,o===he&&o++,o>90){if(r)throw"Bad character: "+e;o=ue,r=!0}n+=1e5}return n}(n.charAt(0),l),u=function(e,t){if(e>"V")throw"MGRSPoint given invalid Northing "+e;for(var o="AFAFAF".charCodeAt(t-1),n=0,r=!1;o!==e.charCodeAt(0);){if(++o===de&&o++,o===he&&o++,o>86){if(r)throw"Bad character: "+e;o=ue,r=!0}n+=1e5}return n}(n.charAt(1),l);u<we(a);)u+=2e6;var d=o-i;if(d%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+e;var h,p,f,m=d/2,g=0,y=0;return m>0&&(h=1e5/Math.pow(10,m),p=e.substring(i,i+m),g=parseFloat(p)*h,f=e.substring(i+m),y=parseFloat(f)*h),{easting:g+c,northing:y+u,zoneLetter:a,zoneNumber:s,accuracy:h}}function we(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+e}function Ee(e,t,o){if(!(this instanceof Ee))return new Ee(e,t,o);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if("object"==typeof e)this.x=e.x,this.y=e.y,this.z=e.z||0;else if("string"==typeof e&&void 0===t){var n=e.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=e,this.y=t,this.z=o||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Ee.fromMGRS=function(e){return new Ee(me(e))},Ee.prototype.toMGRS=function(e){return fe([this.x,this.y],e)};var Oe=.01068115234375,Se=function(e){var t=[];t[0]=1-e*(.25+e*(.046875+e*(.01953125+e*Oe))),t[1]=e*(.75-e*(.046875+e*(.01953125+e*Oe)));var o=e*e;return t[2]=o*(.46875-e*(.013020833333333334+.007120768229166667*e)),o*=e,t[3]=o*(.3645833333333333-.005696614583333333*e),t[4]=o*e*.3076171875,t},xe=function(e,t,o,n){return o*=t,t*=t,n[0]*e-o*(n[1]+t*(n[2]+t*(n[3]+t*n[4])))},Ce=function(e,t,o){for(var n=1/(1-t),r=e,i=20;i;--i){var s=Math.sin(r),a=1-t*s*s;if(r-=a=(xe(r,s,Math.cos(r),o)-e)*(a*Math.sqrt(a))*n,Math.abs(a)<1e-10)return r}return r},je={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Se(this.es),this.ml0=xe(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(e){var t,o,n,r=e.x,i=e.y,s=T(r-this.long0),a=Math.sin(i),l=Math.cos(i);if(this.es){var c=l*s,u=Math.pow(c,2),d=this.ep2*Math.pow(l,2),h=Math.pow(d,2),p=Math.abs(l)>1e-10?Math.tan(i):0,f=Math.pow(p,2),m=Math.pow(f,2);t=1-this.es*Math.pow(a,2),c/=Math.sqrt(t);var g=xe(i,a,l,this.en);o=this.a*(this.k0*c*(1+u/6*(1-f+d+u/20*(5-18*f+m+14*d-58*f*d+u/42*(61+179*m-m*f-479*f)))))+this.x0,n=this.a*(this.k0*(g-this.ml0+a*s*c/2*(1+u/12*(5-f+9*d+4*h+u/30*(61+m-58*f+270*d-330*f*d+u/56*(1385+543*m-m*f-3111*f))))))+this.y0}else{var y=l*Math.sin(s);if(Math.abs(Math.abs(y)-1)<1e-10)return 93;if(o=.5*this.a*this.k0*Math.log((1+y)/(1-y))+this.x0,n=l*Math.cos(s)/Math.sqrt(1-Math.pow(y,2)),(y=Math.abs(n))>=1){if(y-1>1e-10)return 93;n=0}else n=Math.acos(n);i<0&&(n=-n),n=this.a*this.k0*(n-this.lat0)+this.y0}return e.x=o,e.y=n,e},inverse:function(e){var o,n,r,i,s=(e.x-this.x0)*(1/this.a),a=(e.y-this.y0)*(1/this.a);if(this.es)if(o=this.ml0+a/this.k0,n=Ce(o,this.es,this.en),Math.abs(n)<t){var l=Math.sin(n),c=Math.cos(n),u=Math.abs(c)>1e-10?Math.tan(n):0,d=this.ep2*Math.pow(c,2),h=Math.pow(d,2),p=Math.pow(u,2),f=Math.pow(p,2);o=1-this.es*Math.pow(l,2);var m=s*Math.sqrt(o)/this.k0,g=Math.pow(m,2);r=n-(o*=u)*g/(1-this.es)*.5*(1-g/12*(5+3*p-9*d*p+d-4*h-g/30*(61+90*p-252*d*p+45*f+46*d-g/56*(1385+3633*p+4095*f+1574*f*p)))),i=T(this.long0+m*(1-g/6*(1+2*p+d-g/20*(5+28*p+24*f+8*d*p+6*d-g/42*(61+662*p+1320*f+720*f*p))))/c)}else r=t*P(a),i=0;else{var y=Math.exp(s/this.k0),v=.5*(y-1/y),_=this.lat0+a/this.k0,b=Math.cos(_);o=Math.sqrt((1-Math.pow(b,2))/(1+Math.pow(v,2))),r=Math.asin(o),a<0&&(r=-r),i=0===v&&0===b?0:T(Math.atan2(v,b)+this.long0)}return e.x=i,e.y=r,e},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]},Pe=function(e){var t=Math.exp(e);return t=(t-1/t)/2},Te=function(e,t){e=Math.abs(e),t=Math.abs(t);var o=Math.max(e,t),n=Math.min(e,t)/(o||1);return o*Math.sqrt(1+Math.pow(n,2))},Ae=function(e){var t=Math.abs(e);return t=function(e){var t=1+e,o=t-1;return 0===o?e:e*Math.log(t)/o}(t*(1+t/(Te(1,t)+1))),e<0?-t:t},Me=function(e,t){for(var o,n=2*Math.cos(2*t),r=e.length-1,i=e[r],s=0;--r>=0;)o=n*i-s+e[r],s=i,i=o;return t+o*Math.sin(2*t)},Ie=function(e,t,o){for(var n,r,i=Math.sin(t),s=Math.cos(t),a=Pe(o),l=function(e){var t=Math.exp(e);return t=(t+1/t)/2}(o),c=2*s*l,u=-2*i*a,d=e.length-1,h=e[d],p=0,f=0,m=0;--d>=0;)n=f,r=p,h=c*(f=h)-n-u*(p=m)+e[d],m=u*f-r+c*p;return[(c=i*l)*h-(u=s*a)*m,c*m+u*h]},Re={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(je.init.apply(this),this.forward=je.forward,this.inverse=je.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),t=e/(2-e),o=t;this.cgb[0]=t*(2+t*(-2/3+t*(t*(116/45+t*(26/45+t*(-2854/675)))-2))),this.cbg[0]=t*(t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))-2),o*=t,this.cgb[1]=o*(7/3+t*(t*(-227/45+t*(2704/315+t*(2323/945)))-1.6)),this.cbg[1]=o*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),o*=t,this.cgb[2]=o*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=o*(-26/15+t*(34/21+t*(1.6+t*(-12686/2835)))),o*=t,this.cgb[3]=o*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=o*(1237/630+t*(t*(-24832/14175)-2.4)),o*=t,this.cgb[4]=o*(4174/315+t*(-144838/6237)),this.cbg[4]=o*(-734/315+t*(109598/31185)),o*=t,this.cgb[5]=o*(601676/22275),this.cbg[5]=o*(444337/155925),o=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+o*(1/4+o*(1/64+o/256))),this.utg[0]=t*(t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))-.5),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=o*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=o*(13/48+t*(t*(557/1440+t*(281/630+t*(-1983433/1935360)))-.6)),o*=t,this.utg[2]=o*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=o*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),o*=t,this.utg[3]=o*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=o*(49561/161280+t*(-179/168+t*(6601661/7257600))),o*=t,this.utg[4]=o*(-4583/161280+t*(108847/3991680)),this.gtu[4]=o*(34729/80640+t*(-3418889/1995840)),o*=t,this.utg[5]=o*(-20648693/638668800),this.gtu[5]=.6650675310896665*o;var n=Me(this.cbg,this.lat0);this.Zb=-this.Qn*(n+function(e,t){for(var o,n=2*Math.cos(t),r=e.length-1,i=e[r],s=0;--r>=0;)o=n*i-s+e[r],s=i,i=o;return Math.sin(t)*o}(this.gtu,2*n))},forward:function(e){var t=T(e.x-this.long0),o=e.y;o=Me(this.cbg,o);var n=Math.sin(o),r=Math.cos(o),i=Math.sin(t),s=Math.cos(t);o=Math.atan2(n,s*r),t=Math.atan2(i*r,Te(n,r*s)),t=Ae(Math.tan(t));var a,l,c=Ie(this.gtu,2*o,2*t);return o+=c[0],t+=c[1],Math.abs(t)<=2.623395162778?(a=this.a*(this.Qn*t)+this.x0,l=this.a*(this.Qn*o+this.Zb)+this.y0):(a=1/0,l=1/0),e.x=a,e.y=l,e},inverse:function(e){var t,o,n=(e.x-this.x0)*(1/this.a),r=(e.y-this.y0)*(1/this.a);if(r=(r-this.Zb)/this.Qn,n/=this.Qn,Math.abs(n)<=2.623395162778){var i=Ie(this.utg,2*r,2*n);r+=i[0],n+=i[1],n=Math.atan(Pe(n));var s=Math.sin(r),a=Math.cos(r),l=Math.sin(n),c=Math.cos(n);r=Math.atan2(s*c,Te(l,c*a)),n=Math.atan2(l,c*a),t=T(n+this.long0),o=Me(this.cgb,r)}else t=1/0,o=1/0;return e.x=t,e.y=o,e},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]},Le={init:function(){var e=function(e,t){if(void 0===e){if((e=Math.floor(30*(T(t)+Math.PI)/Math.PI)+1)<0)return 0;if(e>60)return 60}return e}(this.zone,this.long0);if(void 0===e)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*o,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Re.init.apply(this),this.forward=Re.forward,this.inverse=Re.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"},ke=function(e,t){return Math.pow((1-e)/(1+e),t)},Ge={init:function(){var e=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+r)/(Math.pow(Math.tan(.5*this.lat0+r),this.C)*ke(this.e*e,this.ratexp))},forward:function(e){var o=e.x,n=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+r),this.C)*ke(this.e*Math.sin(n),this.ratexp))-t,e.x=this.C*o,e},inverse:function(e){for(var o=e.x/this.C,n=e.y,i=Math.pow(Math.tan(.5*n+r)/this.K,1/this.C),s=20;s>0&&(n=2*Math.atan(i*ke(this.e*Math.sin(e.y),-.5*this.e))-t,!(Math.abs(n-e.y)<1e-14));--s)e.y=n;return s?(e.x=o,e.y=n,e):null},names:["gauss"]},Ne={init:function(){Ge.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(e){var t,o,n,r;return e.x=T(e.x-this.long0),Ge.forward.apply(this,[e]),t=Math.sin(e.y),o=Math.cos(e.y),n=Math.cos(e.x),r=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*o*n),e.x=r*o*Math.sin(e.x),e.y=r*(this.cosc0*t-this.sinc0*o*n),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e},inverse:function(e){var t,o,n,r,i;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,i=Math.sqrt(e.x*e.x+e.y*e.y)){var s=2*Math.atan2(i,this.R2);t=Math.sin(s),o=Math.cos(s),r=Math.asin(o*this.sinc0+e.y*t*this.cosc0/i),n=Math.atan2(e.x*t,i*this.cosc0*o-e.y*this.sinc0*t)}else r=this.phic0,n=0;return e.x=n,e.y=r,Ge.inverse.apply(this,[e]),e.x=T(e.x+this.long0),e},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]},De={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=1e-10&&(this.k0=.5*(1+P(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=1e-10&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=1e-10&&(this.k0=.5*this.cons*j(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/A(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=j(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-t,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(e){var o,n,r,i,s,a,l=e.x,c=e.y,u=Math.sin(c),d=Math.cos(c),h=T(l-this.long0);return Math.abs(Math.abs(l-this.long0)-Math.PI)<=1e-10&&Math.abs(c+this.lat0)<=1e-10?(e.x=NaN,e.y=NaN,e):this.sphere?(o=2*this.k0/(1+this.sinlat0*u+this.coslat0*d*Math.cos(h)),e.x=this.a*o*d*Math.sin(h)+this.x0,e.y=this.a*o*(this.coslat0*u-this.sinlat0*d*Math.cos(h))+this.y0,e):(n=2*Math.atan(this.ssfn_(c,u,this.e))-t,i=Math.cos(n),r=Math.sin(n),Math.abs(this.coslat0)<=1e-10?(s=A(this.e,c*this.con,this.con*u),a=2*this.a*this.k0*s/this.cons,e.x=this.x0+a*Math.sin(l-this.long0),e.y=this.y0-this.con*a*Math.cos(l-this.long0),e):(Math.abs(this.sinlat0)<1e-10?(o=2*this.a*this.k0/(1+i*Math.cos(h)),e.y=o*r):(o=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*r+this.cosX0*i*Math.cos(h))),e.y=o*(this.cosX0*r-this.sinX0*i*Math.cos(h))+this.y0),e.x=o*i*Math.sin(h)+this.x0,e))},inverse:function(e){var o,n,r,i,s;e.x-=this.x0,e.y-=this.y0;var a=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var l=2*Math.atan(a/(2*this.a*this.k0));return o=this.long0,n=this.lat0,a<=1e-10?(e.x=o,e.y=n,e):(n=Math.asin(Math.cos(l)*this.sinlat0+e.y*Math.sin(l)*this.coslat0/a),o=Math.abs(this.coslat0)<1e-10?this.lat0>0?T(this.long0+Math.atan2(e.x,-1*e.y)):T(this.long0+Math.atan2(e.x,e.y)):T(this.long0+Math.atan2(e.x*Math.sin(l),a*this.coslat0*Math.cos(l)-e.y*this.sinlat0*Math.sin(l))),e.x=o,e.y=n,e)}if(Math.abs(this.coslat0)<=1e-10){if(a<=1e-10)return n=this.lat0,o=this.long0,e.x=o,e.y=n,e;e.x*=this.con,e.y*=this.con,r=a*this.cons/(2*this.a*this.k0),n=this.con*M(this.e,r),o=this.con*T(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else i=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),o=this.long0,a<=1e-10?s=this.X0:(s=Math.asin(Math.cos(i)*this.sinX0+e.y*Math.sin(i)*this.cosX0/a),o=T(this.long0+Math.atan2(e.x*Math.sin(i),a*this.cosX0*Math.cos(i)-e.y*this.sinX0*Math.sin(i)))),n=-1*M(this.e,Math.tan(.5*(t+s)));return e.x=o,e.y=n,e},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(e,o,n){return o*=n,Math.tan(.5*(t+e))*Math.pow((1-o)/(1+o),.5*n)}},Fe={init:function(){var e=this.lat0;this.lambda0=this.long0;var t=Math.sin(e),o=this.a,n=1/this.rf,r=2*n-Math.pow(n,2),i=this.e=Math.sqrt(r);this.R=this.k0*o*Math.sqrt(1-r)/(1-r*Math.pow(t,2)),this.alpha=Math.sqrt(1+r/(1-r)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(t/this.alpha);var s=Math.log(Math.tan(Math.PI/4+this.b0/2)),a=Math.log(Math.tan(Math.PI/4+e/2)),l=Math.log((1+i*t)/(1-i*t));this.K=s-this.alpha*a+this.alpha*i/2*l},forward:function(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2)),o=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),n=-this.alpha*(t+o)+this.K,r=2*(Math.atan(Math.exp(n))-Math.PI/4),i=this.alpha*(e.x-this.lambda0),s=Math.atan(Math.sin(i)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(i))),a=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(i));return e.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,e.x=this.R*s+this.x0,e},inverse:function(e){for(var t=e.x-this.x0,o=e.y-this.y0,n=t/this.R,r=2*(Math.atan(Math.exp(o/this.R))-Math.PI/4),i=Math.asin(Math.cos(this.b0)*Math.sin(r)+Math.sin(this.b0)*Math.cos(r)*Math.cos(n)),s=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(r))),a=this.lambda0+s/this.alpha,l=0,c=i,u=-1e3,d=0;Math.abs(c-u)>1e-7;){if(++d>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+i/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(c))/2)),u=c,c=2*Math.atan(Math.exp(l))-Math.PI/2}return e.x=a,e.y=c,e},names:["somerc"]},Ue={init:function(){var e,n,s,a,l,c,u,d,h,p,f,m,g,y=0,v=0,_=0,b=0,w=0,E=0,O=0;this.no_off=(g="object"==typeof(m=this).PROJECTION?Object.keys(m.PROJECTION)[0]:m.PROJECTION,"no_uoff"in m||"no_off"in m||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(g)),this.no_rot="no_rot"in this;var S=!1;"alpha"in this&&(S=!0);var x=!1;if("rectified_grid_angle"in this&&(x=!0),S&&(O=this.alpha),x&&(y=this.rectified_grid_angle*o),S||x)v=this.longc;else if(_=this.long1,w=this.lat1,b=this.long2,E=this.lat2,Math.abs(w-E)<=1e-7||(e=Math.abs(w))<=1e-7||Math.abs(e-t)<=1e-7||Math.abs(Math.abs(this.lat0)-t)<=1e-7||Math.abs(Math.abs(E)-t)<=1e-7)throw new Error;var C=1-this.es;n=Math.sqrt(C),Math.abs(this.lat0)>1e-10?(d=Math.sin(this.lat0),s=Math.cos(this.lat0),e=1-this.es*d*d,this.B=s*s,this.B=Math.sqrt(1+this.es*this.B*this.B/C),this.A=this.B*this.k0*n/e,(l=(a=this.B*n/(s*Math.sqrt(e)))*a-1)<=0?l=0:(l=Math.sqrt(l),this.lat0<0&&(l=-l)),this.E=l+=a,this.E*=Math.pow(A(this.e,this.lat0,d),this.B)):(this.B=1/n,this.A=this.k0,this.E=a=l=1),S||x?(S?(f=Math.asin(Math.sin(O)/a),x||(y=O)):(f=y,O=Math.asin(a*Math.sin(f))),this.lam0=v-Math.asin(.5*(l-1/l)*Math.tan(f))/this.B):(c=Math.pow(A(this.e,w,Math.sin(w)),this.B),u=Math.pow(A(this.e,E,Math.sin(E)),this.B),l=this.E/c,h=(u-c)/(u+c),p=((p=this.E*this.E)-u*c)/(p+u*c),(e=_-b)<-Math.pi?b-=i:e>Math.pi&&(b+=i),this.lam0=T(.5*(_+b)-Math.atan(p*Math.tan(.5*this.B*(_-b))/h)/this.B),f=Math.atan(2*Math.sin(this.B*T(_-this.lam0))/(l-1/l)),y=O=Math.asin(a*Math.sin(f))),this.singam=Math.sin(f),this.cosgam=Math.cos(f),this.sinrot=Math.sin(y),this.cosrot=Math.cos(y),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(a*a-1)/Math.cos(O))),this.lat0<0&&(this.u_0=-this.u_0)),l=.5*f,this.v_pole_n=this.ArB*Math.log(Math.tan(r-l)),this.v_pole_s=this.ArB*Math.log(Math.tan(r+l))},forward:function(e){var o,n,r,i,s,a,l,c,u={};if(e.x=e.x-this.lam0,Math.abs(Math.abs(e.y)-t)>1e-10){if(o=.5*((s=this.E/Math.pow(A(this.e,e.y,Math.sin(e.y)),this.B))-(a=1/s)),n=.5*(s+a),i=Math.sin(this.B*e.x),r=(o*this.singam-i*this.cosgam)/n,Math.abs(Math.abs(r)-1)<1e-10)throw new Error;c=.5*this.ArB*Math.log((1-r)/(1+r)),a=Math.cos(this.B*e.x),l=Math.abs(a)<1e-7?this.A*e.x:this.ArB*Math.atan2(o*this.cosgam+i*this.singam,a)}else c=e.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*e.y;return this.no_rot?(u.x=l,u.y=c):(l-=this.u_0,u.x=c*this.cosrot+l*this.sinrot,u.y=l*this.cosrot-c*this.sinrot),u.x=this.a*u.x+this.x0,u.y=this.a*u.y+this.y0,u},inverse:function(e){var o,n,r,i,s,a,l,c={};if(e.x=(e.x-this.x0)*(1/this.a),e.y=(e.y-this.y0)*(1/this.a),this.no_rot?(n=e.y,o=e.x):(n=e.x*this.cosrot-e.y*this.sinrot,o=e.y*this.cosrot+e.x*this.sinrot+this.u_0),i=.5*((r=Math.exp(-this.BrA*n))-1/r),s=.5*(r+1/r),l=((a=Math.sin(this.BrA*o))*this.cosgam+i*this.singam)/s,Math.abs(Math.abs(l)-1)<1e-10)c.x=0,c.y=l<0?-t:t;else{if(c.y=this.E/Math.sqrt((1+l)/(1-l)),c.y=M(this.e,Math.pow(c.y,1/this.B)),c.y===1/0)throw new Error;c.x=-this.rB*Math.atan2(i*this.cosgam-a*this.singam,Math.cos(this.BrA*o))}return c.x+=this.lam0,c},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]},Be={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<1e-10)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var t=Math.sin(this.lat1),o=Math.cos(this.lat1),n=j(this.e,t,o),r=A(this.e,this.lat1,t),i=Math.sin(this.lat2),s=Math.cos(this.lat2),a=j(this.e,i,s),l=A(this.e,this.lat2,i),c=A(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>1e-10?this.ns=Math.log(n/a)/Math.log(r/l):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=n/(this.ns*Math.pow(r,this.ns)),this.rh=this.a*this.f0*Math.pow(c,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(e){var o=e.x,n=e.y;Math.abs(2*Math.abs(n)-Math.PI)<=1e-10&&(n=P(n)*(t-2e-10));var r,i,s=Math.abs(Math.abs(n)-t);if(s>1e-10)r=A(this.e,n,Math.sin(n)),i=this.a*this.f0*Math.pow(r,this.ns);else{if((s=n*this.ns)<=0)return null;i=0}var a=this.ns*T(o-this.long0);return e.x=this.k0*(i*Math.sin(a))+this.x0,e.y=this.k0*(this.rh-i*Math.cos(a))+this.y0,e},inverse:function(e){var o,n,r,i,s,a=(e.x-this.x0)/this.k0,l=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(o=Math.sqrt(a*a+l*l),n=1):(o=-Math.sqrt(a*a+l*l),n=-1);var c=0;if(0!==o&&(c=Math.atan2(n*a,n*l)),0!==o||this.ns>0){if(n=1/this.ns,r=Math.pow(o/(this.a*this.f0),n),-9999===(i=M(this.e,r)))return null}else i=-t;return s=T(c/this.ns+this.long0),e.x=s,e.y=i,e},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc"]},ze={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(e){var t,o,n,r,i,s,a,l=e.x,c=e.y,u=T(l-this.long0);return t=Math.pow((1+this.e*Math.sin(c))/(1-this.e*Math.sin(c)),this.alfa*this.e/2),o=2*(Math.atan(this.k*Math.pow(Math.tan(c/2+this.s45),this.alfa)/t)-this.s45),n=-u*this.alfa,r=Math.asin(Math.cos(this.ad)*Math.sin(o)+Math.sin(this.ad)*Math.cos(o)*Math.cos(n)),i=Math.asin(Math.cos(o)*Math.sin(n)/Math.cos(r)),s=this.n*i,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(r/2+this.s45),this.n),e.y=a*Math.cos(s)/1,e.x=a*Math.sin(s)/1,this.czech||(e.y*=-1,e.x*=-1),e},inverse:function(e){var t,o,n,r,i,s,a,l=e.x;e.x=e.y,e.y=l,this.czech||(e.y*=-1,e.x*=-1),i=Math.sqrt(e.x*e.x+e.y*e.y),r=Math.atan2(e.y,e.x)/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/i,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),o=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(t)),e.x=this.long0-o/this.alfa,s=t,a=0;var c=0;do{e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(s))/(1-this.e*Math.sin(s)),this.e/2))-this.s45),Math.abs(s-e.y)<1e-10&&(a=1),s=e.y,c+=1}while(0===a&&c<15);return c>=15?null:e},names:["Krovak","krovak"]},Ve=function(e,t,o,n,r){return e*r-t*Math.sin(2*r)+o*Math.sin(4*r)-n*Math.sin(6*r)},We=function(e){return 1-.25*e*(1+e/16*(3+1.25*e))},qe=function(e){return.375*e*(1+.25*e*(1+.46875*e))},He=function(e){return.05859375*e*e*(1+.75*e)},Ye=function(e){return e*e*e*(35/3072)},Xe=function(e,t,o){var n=t*o;return e/Math.sqrt(1-n*n)},Ze=function(e){return Math.abs(e)<t?e:e-P(e)*Math.PI},Ke=function(e,t,o,n,r){var i,s;i=e/t;for(var a=0;a<15;a++)if(i+=s=(e-(t*i-o*Math.sin(2*i)+n*Math.sin(4*i)-r*Math.sin(6*i)))/(t-2*o*Math.cos(2*i)+4*n*Math.cos(4*i)-6*r*Math.cos(6*i)),Math.abs(s)<=1e-10)return i;return NaN},Je={init:function(){this.sphere||(this.e0=We(this.es),this.e1=qe(this.es),this.e2=He(this.es),this.e3=Ye(this.es),this.ml0=this.a*Ve(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(e){var t,o,n=e.x,r=e.y;if(n=T(n-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(r)*Math.sin(n)),o=this.a*(Math.atan2(Math.tan(r),Math.cos(n))-this.lat0);else{var i=Math.sin(r),s=Math.cos(r),a=Xe(this.a,this.e,i),l=Math.tan(r)*Math.tan(r),c=n*Math.cos(r),u=c*c,d=this.es*s*s/(1-this.es);t=a*c*(1-u*l*(1/6-(8-l+8*d)*u/120)),o=this.a*Ve(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+a*i/s*u*(.5+(5-l+6*d)*u/24)}return e.x=t+this.x0,e.y=o+this.y0,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var o,n,r=e.x/this.a,i=e.y/this.a;if(this.sphere){var s=i+this.lat0;o=Math.asin(Math.sin(s)*Math.cos(r)),n=Math.atan2(Math.tan(r),Math.cos(s))}else{var a=this.ml0/this.a+i,l=Ke(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(l)-t)<=1e-10)return e.x=this.long0,e.y=t,i<0&&(e.y*=-1),e;var c=Xe(this.a,this.e,Math.sin(l)),u=c*c*c/this.a/this.a*(1-this.es),d=Math.pow(Math.tan(l),2),h=r*this.a/c,p=h*h;o=l-c*Math.tan(l)/u*h*h*(.5-(1+3*d)*h*h/24),n=h*(1-p*(d/3+(1+3*d)*d*p/15))/Math.cos(l)}return e.x=T(n+this.long0),e.y=Ze(o),e},names:["Cassini","Cassini_Soldner","cass"]},Qe=function(e,t){var o;return e>1e-7?(1-e*e)*(t/(1-(o=e*t)*o)-.5/e*Math.log((1-o)/(1+o))):2*t},$e={init:function(){var e,o=Math.abs(this.lat0);if(Math.abs(o-t)<1e-10?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(o)<1e-10?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=Qe(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(e){var t,o=[];return o[0]=.3333333333333333*e,t=e*e,o[0]+=.17222222222222222*t,o[1]=.06388888888888888*t,t*=e,o[0]+=.10257936507936508*t,o[1]+=.0664021164021164*t,o[2]=.016415012942191543*t,o}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=Qe(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(e){var o,n,i,s,a,l,c,u,d,h,p=e.x,f=e.y;if(p=T(p-this.long0),this.sphere){if(a=Math.sin(f),h=Math.cos(f),i=Math.cos(p),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+h*i:1+this.sinph0*a+this.cosph0*h*i)<=1e-10)return null;o=(n=Math.sqrt(2/n))*h*Math.sin(p),n*=this.mode===this.EQUIT?a:this.cosph0*a-this.sinph0*h*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(f+this.lat0)<1e-10)return null;n=r-.5*f,o=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(p),n*=i}}else{switch(c=0,u=0,d=0,i=Math.cos(p),s=Math.sin(p),a=Math.sin(f),l=Qe(this.e,a),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(c=l/this.qp,u=Math.sqrt(1-c*c)),this.mode){case this.OBLIQ:d=1+this.sinb1*c+this.cosb1*u*i;break;case this.EQUIT:d=1+u*i;break;case this.N_POLE:d=t+f,l=this.qp-l;break;case this.S_POLE:d=f-t,l=this.qp+l}if(Math.abs(d)<1e-10)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:d=Math.sqrt(2/d),n=this.mode===this.OBLIQ?this.ymf*d*(this.cosb1*c-this.sinb1*u*i):(d=Math.sqrt(2/(1+u*i)))*c*this.ymf,o=this.xmf*d*u*s;break;case this.N_POLE:case this.S_POLE:l>=0?(o=(d=Math.sqrt(l))*s,n=i*(this.mode===this.S_POLE?d:-d)):o=n=0}}return e.x=this.a*o+this.x0,e.y=this.a*n+this.y0,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var o,n,r,i,s,a,l,c,u,d,h=e.x/this.a,p=e.y/this.a;if(this.sphere){var f,m=0,g=0;if((n=.5*(f=Math.sqrt(h*h+p*p)))>1)return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(g=Math.sin(n),m=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(f)<=1e-10?0:Math.asin(p*g/f),h*=g,p=m*f;break;case this.OBLIQ:n=Math.abs(f)<=1e-10?this.lat0:Math.asin(m*this.sinph0+p*g*this.cosph0/f),h*=g*this.cosph0,p=(m-Math.sin(n)*this.sinph0)*f;break;case this.N_POLE:p=-p,n=t-n;break;case this.S_POLE:n-=t}o=0!==p||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(h,p):0}else{if(l=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(h/=this.dd,p*=this.dd,(a=Math.sqrt(h*h+p*p))<1e-10)return e.x=this.long0,e.y=this.lat0,e;i=2*Math.asin(.5*a/this.rq),r=Math.cos(i),h*=i=Math.sin(i),this.mode===this.OBLIQ?(l=r*this.sinb1+p*i*this.cosb1/a,s=this.qp*l,p=a*this.cosb1*r-p*this.sinb1*i):(l=p*i/a,s=this.qp*l,p=a*r)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(p=-p),!(s=h*h+p*p))return e.x=this.long0,e.y=this.lat0,e;l=1-s/this.qp,this.mode===this.S_POLE&&(l=-l)}o=Math.atan2(h,p),c=Math.asin(l),u=this.apa,d=c+c,n=c+u[0]*Math.sin(d)+u[1]*Math.sin(d+d)+u[2]*Math.sin(d+d+d)}return e.x=T(this.long0+o),e.y=n,e},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},et=function(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)},tt={init:function(){Math.abs(this.lat1+this.lat2)<1e-10||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=j(this.e3,this.sin_po,this.cos_po),this.qs1=Qe(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=j(this.e3,this.sin_po,this.cos_po),this.qs2=Qe(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Qe(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>1e-10?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(e){var t=e.x,o=e.y;this.sin_phi=Math.sin(o),this.cos_phi=Math.cos(o);var n=Qe(this.e3,this.sin_phi,this.cos_phi),r=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,i=this.ns0*T(t-this.long0),s=r*Math.sin(i)+this.x0,a=this.rh-r*Math.cos(i)+this.y0;return e.x=s,e.y=a,e},inverse:function(e){var t,o,n,r,i,s;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(t=Math.sqrt(e.x*e.x+e.y*e.y),n=1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),n=-1),r=0,0!==t&&(r=Math.atan2(n*e.x,n*e.y)),n=t*this.ns0/this.a,this.sphere?s=Math.asin((this.c-n*n)/(2*this.ns0)):(o=(this.c-n*n)/this.ns0,s=this.phi1z(this.e3,o)),i=T(r/this.ns0+this.long0),e.x=i,e.y=s,e},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(e,t){var o,n,r,i,s=et(.5*t);if(e<1e-10)return s;for(var a=e*e,l=1;l<=25;l++)if(s+=i=.5*(r=1-(n=e*(o=Math.sin(s)))*n)*r/Math.cos(s)*(t/(1-a)-o/r+.5/e*Math.log((1-n)/(1+n))),Math.abs(i)<=1e-7)return s;return null}},ot={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(e){var t,o,n,r,i,s,a,l=e.x,c=e.y;return n=T(l-this.long0),t=Math.sin(c),o=Math.cos(c),r=Math.cos(n),(i=this.sin_p14*t+this.cos_p14*o*r)>0||Math.abs(i)<=1e-10?(s=this.x0+1*this.a*o*Math.sin(n)/i,a=this.y0+1*this.a*(this.cos_p14*t-this.sin_p14*o*r)/i):(s=this.x0+this.infinity_dist*o*Math.sin(n),a=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*o*r)),e.x=s,e.y=a,e},inverse:function(e){var t,o,n,r,i,s;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(t=Math.sqrt(e.x*e.x+e.y*e.y))?(r=Math.atan2(t,this.rc),o=Math.sin(r),n=Math.cos(r),s=et(n*this.sin_p14+e.y*o*this.cos_p14/t),i=Math.atan2(e.x*o,t*this.cos_p14*n-e.y*this.sin_p14*o),i=T(this.long0+i)):(s=this.phic0,i=0),e.x=i,e.y=s,e},names:["gnom"]},nt={init:function(){this.sphere||(this.k0=j(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(e){var t,o,n=e.x,r=e.y,i=T(n-this.long0);if(this.sphere)t=this.x0+this.a*i*Math.cos(this.lat_ts),o=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts);else{var s=Qe(this.e,Math.sin(r));t=this.x0+this.a*this.k0*i,o=this.y0+this.a*s*.5/this.k0}return e.x=t,e.y=o,e},inverse:function(e){var o,n;return e.x-=this.x0,e.y-=this.y0,this.sphere?(o=T(this.long0+e.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(n=function(e,o){var n=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(o)-n)<1e-6)return o<0?-1*t:t;for(var r,i,s,a,l=Math.asin(.5*o),c=0;c<30;c++)if(i=Math.sin(l),s=Math.cos(l),a=e*i,l+=r=Math.pow(1-a*a,2)/(2*s)*(o/(1-e*e)-i/(1-a*a)+.5/e*Math.log((1-a)/(1+a))),Math.abs(r)<=1e-10)return l;return NaN}(this.e,2*e.y*this.k0/this.a),o=T(this.long0+e.x/(this.a*this.k0))),e.x=o,e.y=n,e},names:["cea"]},rt={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(e){var t=e.x,o=e.y,n=T(t-this.long0),r=Ze(o-this.lat0);return e.x=this.x0+this.a*n*this.rc,e.y=this.y0+this.a*r,e},inverse:function(e){var t=e.x,o=e.y;return e.x=T(this.long0+(t-this.x0)/(this.a*this.rc)),e.y=Ze(this.lat0+(o-this.y0)/this.a),e},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},it={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=We(this.es),this.e1=qe(this.es),this.e2=He(this.es),this.e3=Ye(this.es),this.ml0=this.a*Ve(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(e){var t,o,n,r=e.x,i=e.y,s=T(r-this.long0);if(n=s*Math.sin(i),this.sphere)Math.abs(i)<=1e-10?(t=this.a*s,o=-1*this.a*this.lat0):(t=this.a*Math.sin(n)/Math.tan(i),o=this.a*(Ze(i-this.lat0)+(1-Math.cos(n))/Math.tan(i)));else if(Math.abs(i)<=1e-10)t=this.a*s,o=-1*this.ml0;else{var a=Xe(this.a,this.e,Math.sin(i))/Math.tan(i);t=a*Math.sin(n),o=this.a*Ve(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+a*(1-Math.cos(n))}return e.x=t+this.x0,e.y=o+this.y0,e},inverse:function(e){var t,o,n,r,i,s,a,l,c;if(n=e.x-this.x0,r=e.y-this.y0,this.sphere)if(Math.abs(r+this.a*this.lat0)<=1e-10)t=T(n/this.a+this.long0),o=0;else{var u;for(s=this.lat0+r/this.a,a=n*n/this.a/this.a+s*s,l=s,i=20;i;--i)if(l+=c=-1*(s*(l*(u=Math.tan(l))+1)-l-.5*(l*l+a)*u)/((l-s)/u-1),Math.abs(c)<=1e-10){o=l;break}t=T(this.long0+Math.asin(n*Math.tan(l)/this.a)/Math.sin(o))}else if(Math.abs(r+this.ml0)<=1e-10)o=0,t=T(this.long0+n/this.a);else{var d,h,p,f,m;for(s=(this.ml0+r)/this.a,a=n*n/this.a/this.a+s*s,l=s,i=20;i;--i)if(m=this.e*Math.sin(l),d=Math.sqrt(1-m*m)*Math.tan(l),h=this.a*Ve(this.e0,this.e1,this.e2,this.e3,l),p=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),l-=c=(s*(d*(f=h/this.a)+1)-f-.5*d*(f*f+a))/(this.es*Math.sin(2*l)*(f*f+a-2*s*f)/(4*d)+(s-f)*(d*p-2/Math.sin(2*l))-p),Math.abs(c)<=1e-10){o=l;break}d=Math.sqrt(1-this.es*Math.pow(Math.sin(o),2))*Math.tan(o),t=T(this.long0+Math.asin(n*d/this.a)/Math.sin(o))}return e.x=t,e.y=o,e},names:["Polyconic","poly"]},st={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var o,n=t.x,r=t.y-this.lat0,i=n-this.long0,s=r/e*1e-5,a=i,l=1,c=0;for(o=1;o<=10;o++)l*=s,c+=this.A[o]*l;var u,d=c,h=a,p=1,f=0,m=0,g=0;for(o=1;o<=6;o++)u=f*d+p*h,p=p*d-f*h,f=u,m=m+this.B_re[o]*p-this.B_im[o]*f,g=g+this.B_im[o]*p+this.B_re[o]*f;return t.x=g*this.a+this.x0,t.y=m*this.a+this.y0,t},inverse:function(t){var o,n,r=t.x,i=t.y,s=r-this.x0,a=(i-this.y0)/this.a,l=s/this.a,c=1,u=0,d=0,h=0;for(o=1;o<=6;o++)n=u*a+c*l,c=c*a-u*l,u=n,d=d+this.C_re[o]*c-this.C_im[o]*u,h=h+this.C_im[o]*c+this.C_re[o]*u;for(var p=0;p<this.iterations;p++){var f,m=d,g=h,y=a,v=l;for(o=2;o<=6;o++)f=g*d+m*h,m=m*d-g*h,g=f,y+=(o-1)*(this.B_re[o]*m-this.B_im[o]*g),v+=(o-1)*(this.B_im[o]*m+this.B_re[o]*g);m=1,g=0;var _=this.B_re[1],b=this.B_im[1];for(o=2;o<=6;o++)f=g*d+m*h,m=m*d-g*h,g=f,_+=o*(this.B_re[o]*m-this.B_im[o]*g),b+=o*(this.B_im[o]*m+this.B_re[o]*g);var w=_*_+b*b;d=(y*_+v*b)/w,h=(v*_-y*b)/w}var E=d,O=h,S=1,x=0;for(o=1;o<=9;o++)S*=E,x+=this.D[o]*S;var C=this.lat0+x*e*1e5,j=this.long0+O;return t.x=j,t.y=C,t},names:["New_Zealand_Map_Grid","nzmg"]},at={init:function(){},forward:function(e){var t=e.x,o=e.y,n=T(t-this.long0),r=this.x0+this.a*n,i=this.y0+this.a*Math.log(Math.tan(Math.PI/4+o/2.5))*1.25;return e.x=r,e.y=i,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t=T(this.long0+e.x/this.a),o=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=t,e.y=o,e},names:["Miller_Cylindrical","mill"]},lt={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Se(this.es)},forward:function(e){var t,o,n=e.x,r=e.y;if(n=T(n-this.long0),this.sphere){if(this.m)for(var i=this.n*Math.sin(r),s=20;s;--s){var a=(this.m*r+Math.sin(r)-i)/(this.m+Math.cos(r));if(r-=a,Math.abs(a)<1e-10)break}else r=1!==this.n?Math.asin(this.n*Math.sin(r)):r;t=this.a*this.C_x*n*(this.m+Math.cos(r)),o=this.a*this.C_y*r}else{var l=Math.sin(r),c=Math.cos(r);o=this.a*xe(r,l,c,this.en),t=this.a*n*c/Math.sqrt(1-this.es*l*l)}return e.x=t,e.y=o,e},inverse:function(e){var o,n,r,i;return e.x-=this.x0,r=e.x/this.a,e.y-=this.y0,o=e.y/this.a,this.sphere?(o/=this.C_y,r/=this.C_x*(this.m+Math.cos(o)),this.m?o=et((this.m*o+Math.sin(o))/this.n):1!==this.n&&(o=et(Math.sin(o)/this.n)),r=T(r+this.long0),o=Ze(o)):(o=Ce(e.y/this.a,this.es,this.en),(i=Math.abs(o))<t?(i=Math.sin(o),n=this.long0+e.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(o)),r=T(n)):i-1e-10<t&&(r=this.long0)),e.x=r,e.y=o,e},names:["Sinusoidal","sinu"]},ct={init:function(){},forward:function(e){for(var t=e.x,o=e.y,n=T(t-this.long0),r=o,i=Math.PI*Math.sin(o);;){var s=-(r+Math.sin(r)-i)/(1+Math.cos(r));if(r+=s,Math.abs(s)<1e-10)break}r/=2,Math.PI/2-Math.abs(o)<1e-10&&(n=0);var a=.900316316158*this.a*n*Math.cos(r)+this.x0,l=1.4142135623731*this.a*Math.sin(r)+this.y0;return e.x=a,e.y=l,e},inverse:function(e){var t,o;e.x-=this.x0,e.y-=this.y0,o=e.y/(1.4142135623731*this.a),Math.abs(o)>.999999999999&&(o=.999999999999),t=Math.asin(o);var n=T(this.long0+e.x/(.900316316158*this.a*Math.cos(t)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),o=(2*t+Math.sin(2*t))/Math.PI,Math.abs(o)>1&&(o=1);var r=Math.asin(o);return e.x=n,e.y=r,e},names:["Mollweide","moll"]},ut={init:function(){Math.abs(this.lat1+this.lat2)<1e-10||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=We(this.es),this.e1=qe(this.es),this.e2=He(this.es),this.e3=Ye(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=j(this.e,this.sinphi,this.cosphi),this.ml1=Ve(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<1e-10?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=j(this.e,this.sinphi,this.cosphi),this.ml2=Ve(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Ve(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(e){var t,o=e.x,n=e.y;if(this.sphere)t=this.a*(this.g-n);else{var r=Ve(this.e0,this.e1,this.e2,this.e3,n);t=this.a*(this.g-r)}var i=this.ns*T(o-this.long0),s=this.x0+t*Math.sin(i),a=this.y0+this.rh-t*Math.cos(i);return e.x=s,e.y=a,e},inverse:function(e){var t,o,n,r;e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns>=0?(o=Math.sqrt(e.x*e.x+e.y*e.y),t=1):(o=-Math.sqrt(e.x*e.x+e.y*e.y),t=-1);var i=0;if(0!==o&&(i=Math.atan2(t*e.x,t*e.y)),this.sphere)return r=T(this.long0+i/this.ns),n=Ze(this.g-o/this.a),e.x=r,e.y=n,e;var s=this.g-o/this.a;return n=Ke(s,this.e0,this.e1,this.e2,this.e3),r=T(this.long0+i/this.ns),e.x=r,e.y=n,e},names:["Equidistant_Conic","eqdc"]},dt={init:function(){this.R=this.a},forward:function(e){var o,n,r=e.x,i=e.y,s=T(r-this.long0);Math.abs(i)<=1e-10&&(o=this.x0+this.R*s,n=this.y0);var a=et(2*Math.abs(i/Math.PI));(Math.abs(s)<=1e-10||Math.abs(Math.abs(i)-t)<=1e-10)&&(o=this.x0,n=i>=0?this.y0+Math.PI*this.R*Math.tan(.5*a):this.y0+Math.PI*this.R*-Math.tan(.5*a));var l=.5*Math.abs(Math.PI/s-s/Math.PI),c=l*l,u=Math.sin(a),d=Math.cos(a),h=d/(u+d-1),p=h*h,f=h*(2/u-1),m=f*f,g=Math.PI*this.R*(l*(h-m)+Math.sqrt(c*(h-m)*(h-m)-(m+c)*(p-m)))/(m+c);s<0&&(g=-g),o=this.x0+g;var y=c+h;return g=Math.PI*this.R*(f*y-l*Math.sqrt((m+c)*(c+1)-y*y))/(m+c),n=i>=0?this.y0+g:this.y0-g,e.x=o,e.y=n,e},inverse:function(e){var t,o,n,r,i,s,a,l,c,u,d,h;return e.x-=this.x0,e.y-=this.y0,d=Math.PI*this.R,i=(n=e.x/d)*n+(r=e.y/d)*r,d=3*(r*r/(l=-2*(s=-Math.abs(r)*(1+i))+1+2*r*r+i*i)+(2*(a=s-2*r*r+n*n)*a*a/l/l/l-9*s*a/l/l)/27)/(c=(s-a*a/3/l)/l)/(u=2*Math.sqrt(-c/3)),Math.abs(d)>1&&(d=d>=0?1:-1),h=Math.acos(d)/3,o=e.y>=0?(-u*Math.cos(h+Math.PI/3)-a/3/l)*Math.PI:-(-u*Math.cos(h+Math.PI/3)-a/3/l)*Math.PI,t=Math.abs(n)<1e-10?this.long0:T(this.long0+Math.PI*(i-1+Math.sqrt(1+2*(n*n-r*r)+i*i))/2/n),e.x=t,e.y=o,e},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},ht={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(e){var o,n,r,i,s,a,l,c,u,d,h,p,f,m,g,y,v,_,b,w,E,O,S=e.x,x=e.y,C=Math.sin(e.y),j=Math.cos(e.y),P=T(S-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=1e-10?(e.x=this.x0+this.a*(t-x)*Math.sin(P),e.y=this.y0-this.a*(t-x)*Math.cos(P),e):Math.abs(this.sin_p12+1)<=1e-10?(e.x=this.x0+this.a*(t+x)*Math.sin(P),e.y=this.y0+this.a*(t+x)*Math.cos(P),e):(_=this.sin_p12*C+this.cos_p12*j*Math.cos(P),v=(y=Math.acos(_))?y/Math.sin(y):1,e.x=this.x0+this.a*v*j*Math.sin(P),e.y=this.y0+this.a*v*(this.cos_p12*C-this.sin_p12*j*Math.cos(P)),e):(o=We(this.es),n=qe(this.es),r=He(this.es),i=Ye(this.es),Math.abs(this.sin_p12-1)<=1e-10?(s=this.a*Ve(o,n,r,i,t),a=this.a*Ve(o,n,r,i,x),e.x=this.x0+(s-a)*Math.sin(P),e.y=this.y0-(s-a)*Math.cos(P),e):Math.abs(this.sin_p12+1)<=1e-10?(s=this.a*Ve(o,n,r,i,t),a=this.a*Ve(o,n,r,i,x),e.x=this.x0+(s+a)*Math.sin(P),e.y=this.y0+(s+a)*Math.cos(P),e):(l=C/j,c=Xe(this.a,this.e,this.sin_p12),u=Xe(this.a,this.e,C),d=Math.atan((1-this.es)*l+this.es*c*this.sin_p12/(u*j)),b=0===(h=Math.atan2(Math.sin(P),this.cos_p12*Math.tan(d)-this.sin_p12*Math.cos(P)))?Math.asin(this.cos_p12*Math.sin(d)-this.sin_p12*Math.cos(d)):Math.abs(Math.abs(h)-Math.PI)<=1e-10?-Math.asin(this.cos_p12*Math.sin(d)-this.sin_p12*Math.cos(d)):Math.asin(Math.sin(P)*Math.cos(d)/Math.sin(h)),p=this.e*this.sin_p12/Math.sqrt(1-this.es),y=c*b*(1-(w=b*b)*(g=(f=this.e*this.cos_p12*Math.cos(h)/Math.sqrt(1-this.es))*f)*(1-g)/6+(E=w*b)/8*(m=p*f)*(1-2*g)+(O=E*b)/120*(g*(4-7*g)-3*p*p*(1-7*g))-O*b/48*m),e.x=this.x0+y*Math.sin(h),e.y=this.y0+y*Math.cos(h),e))},inverse:function(e){var o,n,r,i,s,a,l,c,u,d,h,p,f,m,g,y,v,_,b,w,E,O,S;if(e.x-=this.x0,e.y-=this.y0,this.sphere){if((o=Math.sqrt(e.x*e.x+e.y*e.y))>2*t*this.a)return;return n=o/this.a,r=Math.sin(n),i=Math.cos(n),s=this.long0,Math.abs(o)<=1e-10?a=this.lat0:(a=et(i*this.sin_p12+e.y*r*this.cos_p12/o),l=Math.abs(this.lat0)-t,s=Math.abs(l)<=1e-10?this.lat0>=0?T(this.long0+Math.atan2(e.x,-e.y)):T(this.long0-Math.atan2(-e.x,e.y)):T(this.long0+Math.atan2(e.x*r,o*this.cos_p12*i-e.y*this.sin_p12*r))),e.x=s,e.y=a,e}return c=We(this.es),u=qe(this.es),d=He(this.es),h=Ye(this.es),Math.abs(this.sin_p12-1)<=1e-10?(p=this.a*Ve(c,u,d,h,t),o=Math.sqrt(e.x*e.x+e.y*e.y),a=Ke((p-o)/this.a,c,u,d,h),s=T(this.long0+Math.atan2(e.x,-1*e.y)),e.x=s,e.y=a,e):Math.abs(this.sin_p12+1)<=1e-10?(p=this.a*Ve(c,u,d,h,t),o=Math.sqrt(e.x*e.x+e.y*e.y),a=Ke((o-p)/this.a,c,u,d,h),s=T(this.long0+Math.atan2(e.x,e.y)),e.x=s,e.y=a,e):(o=Math.sqrt(e.x*e.x+e.y*e.y),g=Math.atan2(e.x,e.y),f=Xe(this.a,this.e,this.sin_p12),y=Math.cos(g),_=-(v=this.e*this.cos_p12*y)*v/(1-this.es),b=3*this.es*(1-_)*this.sin_p12*this.cos_p12*y/(1-this.es),O=1-_*(E=(w=o/f)-_*(1+_)*Math.pow(w,3)/6-b*(1+3*_)*Math.pow(w,4)/24)*E/2-w*E*E*E/6,m=Math.asin(this.sin_p12*Math.cos(E)+this.cos_p12*Math.sin(E)*y),s=T(this.long0+Math.asin(Math.sin(g)*Math.sin(E)/Math.cos(m))),S=Math.sin(m),a=Math.atan2((S-this.es*O*this.sin_p12)*Math.tan(m),S*(1-this.es)),e.x=s,e.y=a,e)},names:["Azimuthal_Equidistant","aeqd"]},pt={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(e){var t,o,n,r,i,s,a,l=e.x,c=e.y;return n=T(l-this.long0),t=Math.sin(c),o=Math.cos(c),r=Math.cos(n),((i=this.sin_p14*t+this.cos_p14*o*r)>0||Math.abs(i)<=1e-10)&&(s=1*this.a*o*Math.sin(n),a=this.y0+1*this.a*(this.cos_p14*t-this.sin_p14*o*r)),e.x=s,e.y=a,e},inverse:function(e){var o,n,r,i,s,a,l;return e.x-=this.x0,e.y-=this.y0,o=Math.sqrt(e.x*e.x+e.y*e.y),n=et(o/this.a),r=Math.sin(n),i=Math.cos(n),a=this.long0,Math.abs(o)<=1e-10?(l=this.lat0,e.x=a,e.y=l,e):(l=et(i*this.sin_p14+e.y*r*this.cos_p14/o),s=Math.abs(this.lat0)-t,Math.abs(s)<=1e-10?(a=this.lat0>=0?T(this.long0+Math.atan2(e.x,-e.y)):T(this.long0-Math.atan2(-e.x,e.y)),e.x=a,e.y=l,e):(a=T(this.long0+Math.atan2(e.x*r,o*this.cos_p14*i-e.y*this.sin_p14*r)),e.x=a,e.y=l,e))},names:["ortho"]},ft=1,mt=2,gt=3,yt=4,vt=5,_t=6,bt=1,wt=2,Et=3,Ot=4;function St(e,o,n,i){var a;return e<1e-10?(i.value=bt,a=0):(a=Math.atan2(o,n),Math.abs(a)<=r?i.value=bt:a>r&&a<=t+r?(i.value=wt,a-=t):a>t+r||a<=-(t+r)?(i.value=Et,a=a>=0?a-s:a+s):(i.value=Ot,a+=t)),a}function xt(e,t){var o=e+t;return o<-s?o+=i:o>+s&&(o-=i),o}var Ct,jt={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=t-r/2?this.face=vt:this.lat0<=-(t-r/2)?this.face=_t:Math.abs(this.long0)<=r?this.face=ft:Math.abs(this.long0)<=t+r?this.face=this.long0>0?mt:yt:this.face=gt,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(e){var o,n,i,a,l,c,u={x:0,y:0},d={value:0};if(e.x-=this.long0,o=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(e.y)):e.y,n=e.x,this.face===vt)a=t-o,n>=r&&n<=t+r?(d.value=bt,i=n-t):n>t+r||n<=-(t+r)?(d.value=wt,i=n>0?n-s:n+s):n>-(t+r)&&n<=-r?(d.value=Et,i=n+t):(d.value=Ot,i=n);else if(this.face===_t)a=t+o,n>=r&&n<=t+r?(d.value=bt,i=-n+t):n<r&&n>=-r?(d.value=wt,i=-n):n<-r&&n>=-(t+r)?(d.value=Et,i=-n-t):(d.value=Ot,i=n>0?-n+s:-n-s);else{var h,p,f,m,g,y;this.face===mt?n=xt(n,+t):this.face===gt?n=xt(n,+s):this.face===yt&&(n=xt(n,-t)),m=Math.sin(o),g=Math.cos(o),y=Math.sin(n),h=g*Math.cos(n),p=g*y,f=m,this.face===ft?i=St(a=Math.acos(h),f,p,d):this.face===mt?i=St(a=Math.acos(p),f,-h,d):this.face===gt?i=St(a=Math.acos(-h),f,-p,d):this.face===yt?i=St(a=Math.acos(-p),f,h,d):(a=i=0,d.value=bt)}return c=Math.atan(12/s*(i+Math.acos(Math.sin(i)*Math.cos(r))-t)),l=Math.sqrt((1-Math.cos(a))/(Math.cos(c)*Math.cos(c))/(1-Math.cos(Math.atan(1/Math.cos(i))))),d.value===wt?c+=t:d.value===Et?c+=s:d.value===Ot&&(c+=1.5*s),u.x=l*Math.cos(c),u.y=l*Math.sin(c),u.x=u.x*this.a+this.x0,u.y=u.y*this.a+this.y0,e.x=u.x,e.y=u.y,e},inverse:function(e){var o,n,r,i,a,l,c,u,d,h,p,f,m={lam:0,phi:0},g={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,n=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),o=Math.atan2(e.y,e.x),e.x>=0&&e.x>=Math.abs(e.y)?g.value=bt:e.y>=0&&e.y>=Math.abs(e.x)?(g.value=wt,o-=t):e.x<0&&-e.x>=Math.abs(e.y)?(g.value=Et,o=o<0?o+s:o-s):(g.value=Ot,o+=t),d=s/12*Math.tan(o),a=Math.sin(d)/(Math.cos(d)-1/Math.sqrt(2)),l=Math.atan(a),(c=1-(r=Math.cos(o))*r*(i=Math.tan(n))*i*(1-Math.cos(Math.atan(1/Math.cos(l)))))<-1?c=-1:c>1&&(c=1),this.face===vt)u=Math.acos(c),m.phi=t-u,g.value===bt?m.lam=l+t:g.value===wt?m.lam=l<0?l+s:l-s:g.value===Et?m.lam=l-t:m.lam=l;else if(this.face===_t)u=Math.acos(c),m.phi=u-t,g.value===bt?m.lam=-l+t:g.value===wt?m.lam=-l:g.value===Et?m.lam=-l-t:m.lam=l<0?-l-s:-l+s;else{var y,v,_;d=(y=c)*y,v=(d+=(_=d>=1?0:Math.sqrt(1-d)*Math.sin(l))*_)>=1?0:Math.sqrt(1-d),g.value===wt?(d=v,v=-_,_=d):g.value===Et?(v=-v,_=-_):g.value===Ot&&(d=v,v=_,_=-d),this.face===mt?(d=y,y=-v,v=d):this.face===gt?(y=-y,v=-v):this.face===yt&&(d=y,y=v,v=-d),m.phi=Math.acos(-_)-t,m.lam=Math.atan2(v,y),this.face===mt?m.lam=xt(m.lam,-t):this.face===gt?m.lam=xt(m.lam,-s):this.face===yt&&(m.lam=xt(m.lam,+t))}return 0!==this.es&&(h=m.phi<0?1:0,p=Math.tan(m.phi),f=this.b/Math.sqrt(p*p+this.one_minus_f_squared),m.phi=Math.atan(Math.sqrt(this.a*this.a-f*f)/(this.one_minus_f*f)),h&&(m.phi=-m.phi)),m.lam+=this.long0,e.x=m.lam,e.y=m.phi,e},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},Pt=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Tt=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],At=n/5,Mt=function(e,t){return e[0]+t*(e[1]+t*(e[2]+t*e[3]))},It={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(e){var t=T(e.x-this.long0),o=Math.abs(e.y),r=Math.floor(o*At);r<0?r=0:r>=18&&(r=17);var i={x:Mt(Pt[r],o=n*(o-.08726646259971647*r))*t,y:Mt(Tt[r],o)};return e.y<0&&(i.y=-i.y),i.x=i.x*this.a*.8487+this.x0,i.y=i.y*this.a*1.3523+this.y0,i},inverse:function(e){var n={x:(e.x-this.x0)/(.8487*this.a),y:Math.abs(e.y-this.y0)/(1.3523*this.a)};if(n.y>=1)n.x/=Pt[18][0],n.y=e.y<0?-t:t;else{var r=Math.floor(18*n.y);for(r<0?r=0:r>=18&&(r=17);;)if(Tt[r][0]>n.y)--r;else{if(!(Tt[r+1][0]<=n.y))break;++r}var i=Tt[r],s=5*(n.y-i[0])/(Tt[r+1][0]-i[0]);s=function(e,t,o,n){for(var r=t;n;--n){var i=e(r);if(r-=i,Math.abs(i)<o)break}return r}((function(e){return(Mt(i,e)-n.y)/function(e,t){return e[1]+t*(2*e[2]+3*t*e[3])}(i,e)}),s,1e-10,100),n.x/=Mt(Pt[r],s),n.y=(5*r+s)*o,e.y<0&&(n.y=-n.y)}return n.x=T(n.x+this.long0),n},names:["Robinson","robin"]},Rt={init:function(){this.name="geocent"},forward:function(e){return Z(e,this.es,this.a)},inverse:function(e){return K(e,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]},Lt=0,kt=1,Gt=2,Nt=3,Dt={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}},Ft={init:function(){if(Object.keys(Dt).forEach(function(e){if(void 0===this[e])this[e]=Dt[e].def;else{if(Dt[e].num&&isNaN(this[e]))throw new Error("Invalid parameter value, must be numeric "+e+" = "+this[e]);Dt[e].num&&(this[e]=parseFloat(this[e]))}Dt[e].degrees&&(this[e]=this[e]*o)}.bind(this)),Math.abs(Math.abs(this.lat0)-t)<1e-10?this.mode=this.lat0<0?kt:Lt:Math.abs(this.lat0)<1e-10?this.mode=Gt:(this.mode=Nt,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var e=this.tilt,n=this.azi;this.cg=Math.cos(n),this.sg=Math.sin(n),this.cw=Math.cos(e),this.sw=Math.sin(e)},forward:function(e){e.x-=this.long0;var t,o,n,r,i=Math.sin(e.y),s=Math.cos(e.y),a=Math.cos(e.x);switch(this.mode){case Nt:o=this.sinph0*i+this.cosph0*s*a;break;case Gt:o=s*a;break;case kt:o=-i;break;case Lt:o=i}switch(t=(o=this.pn1/(this.p-o))*s*Math.sin(e.x),this.mode){case Nt:o*=this.cosph0*i-this.sinph0*s*a;break;case Gt:o*=i;break;case Lt:o*=-s*a;break;case kt:o*=s*a}return r=1/((n=o*this.cg+t*this.sg)*this.sw*this.h1+this.cw),t=(t*this.cg-o*this.sg)*this.cw*r,o=n*r,e.x=t*this.a,e.y=o*this.a,e},inverse:function(e){e.x/=this.a,e.y/=this.a;var t,o,n,r={x:e.x,y:e.y};n=1/(this.pn1-e.y*this.sw),t=this.pn1*e.x*n,o=this.pn1*e.y*this.cw*n,e.x=t*this.cg+o*this.sg,e.y=o*this.cg-t*this.sg;var i=Te(e.x,e.y);if(Math.abs(i)<1e-10)r.x=0,r.y=e.y;else{var s,a;switch(a=1-i*i*this.pfact,a=(this.p-Math.sqrt(a))/(this.pn1/i+i/this.pn1),s=Math.sqrt(1-a*a),this.mode){case Nt:r.y=Math.asin(s*this.sinph0+e.y*a*this.cosph0/i),e.y=(s-this.sinph0*Math.sin(r.y))*i,e.x*=a*this.cosph0;break;case Gt:r.y=Math.asin(e.y*a/i),e.y=s*i,e.x*=a;break;case Lt:r.y=Math.asin(s),e.y=-e.y;break;case kt:r.y=-Math.asin(s)}r.x=Math.atan2(e.x,e.y)}return e.x=r.x+this.long0,e.y=r.y,e},names:["Tilted_Perspective","tpers"]};return ce.defaultDatum="WGS84",ce.Proj=X,ce.WGS84=new ce.Proj("WGS84"),ce.Point=Ee,ce.toPoint=ne,ce.defs=E,ce.nadgrid=function(e,t){var o=new DataView(t),n=function(e){var t=e.getInt32(8,!1);return 11!==t&&(11!==(t=e.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}(o),r=function(e,t){return{nFields:e.getInt32(8,t),nSubgridFields:e.getInt32(24,t),nSubgrids:e.getInt32(40,t),shiftType:W(e,56,64).trim(),fromSemiMajorAxis:e.getFloat64(120,t),fromSemiMinorAxis:e.getFloat64(136,t),toSemiMajorAxis:e.getFloat64(152,t),toSemiMinorAxis:e.getFloat64(168,t)}}(o,n);r.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var i=function(e,t,o){for(var n=[],r=0;r<t.nSubgrids;r++){var i=H(e,176,o),s=Y(e,176,i,o),a=Math.round(1+(i.upperLongitude-i.lowerLongitude)/i.longitudeInterval),l=Math.round(1+(i.upperLatitude-i.lowerLatitude)/i.latitudeInterval);n.push({ll:[V(i.lowerLongitude),V(i.lowerLatitude)],del:[V(i.longitudeInterval),V(i.latitudeInterval)],lim:[a,l],count:i.gridNodeCount,cvs:q(s)})}return n}(o,r,n),s={header:r,subgrids:i};return B[e]=s,s},ce.transform=ie,ce.mgrs=pe,ce.version="2.7.2",(Ct=ce).Proj.projections.add(je),Ct.Proj.projections.add(Re),Ct.Proj.projections.add(Le),Ct.Proj.projections.add(Ne),Ct.Proj.projections.add(De),Ct.Proj.projections.add(Fe),Ct.Proj.projections.add(Ue),Ct.Proj.projections.add(Be),Ct.Proj.projections.add(ze),Ct.Proj.projections.add(Je),Ct.Proj.projections.add($e),Ct.Proj.projections.add(tt),Ct.Proj.projections.add(ot),Ct.Proj.projections.add(nt),Ct.Proj.projections.add(rt),Ct.Proj.projections.add(it),Ct.Proj.projections.add(st),Ct.Proj.projections.add(at),Ct.Proj.projections.add(lt),Ct.Proj.projections.add(ct),Ct.Proj.projections.add(ut),Ct.Proj.projections.add(dt),Ct.Proj.projections.add(ht),Ct.Proj.projections.add(pt),Ct.Proj.projections.add(jt),Ct.Proj.projections.add(It),Ct.Proj.projections.add(Rt),Ct.Proj.projections.add(Ft),ce}()},"./node_modules/proj4/dist/proj4-src.js-exposed":function(e,t,o){(function(t){e.exports=t.proj4=o("./node_modules/proj4/dist/proj4-src.js")}).call(this,o("./node_modules/webpack/buildin/global.js"))},"./node_modules/rbush/rbush.min.js":function(e,t,o){e.exports=function(){"use strict";function e(e,n,r,i,s){!function e(o,n,r,i,s){for(;i>r;){if(i-r>600){var a=i-r+1,l=n-r+1,c=Math.log(a),u=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*u*(a-u)/a)*(l-a/2<0?-1:1);e(o,n,Math.max(r,Math.floor(n-l*u/a+d)),Math.min(i,Math.floor(n+(a-l)*u/a+d)),s)}var h=o[n],p=r,f=i;for(t(o,r,n),s(o[i],h)>0&&t(o,r,i);p<f;){for(t(o,p,f),p++,f--;s(o[p],h)<0;)p++;for(;s(o[f],h)>0;)f--}0===s(o[r],h)?t(o,r,f):t(o,++f,i),f<=n&&(r=f+1),n<=f&&(i=f-1)}}(e,n,r||0,i||e.length-1,s||o)}function t(e,t,o){var n=e[t];e[t]=e[o],e[o]=n}function o(e,t){return e<t?-1:e>t?1:0}var n=function(e){void 0===e&&(e=9),this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function r(e,t,o){if(!o)return t.indexOf(e);for(var n=0;n<t.length;n++)if(o(e,t[n]))return n;return-1}function i(e,t){s(e,0,e.children.length,t,e)}function s(e,t,o,n,r){r||(r=f(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var i=t;i<o;i++){var s=e.children[i];a(r,e.leaf?n(s):s)}return r}function a(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function l(e,t){return e.minX-t.minX}function c(e,t){return e.minY-t.minY}function u(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function d(e){return e.maxX-e.minX+(e.maxY-e.minY)}function h(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function p(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function f(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function m(t,o,n,r,i){for(var s=[o,n];s.length;)if(!((n=s.pop())-(o=s.pop())<=r)){var a=o+Math.ceil((n-o)/r/2)*r;e(t,a,o,n,i),s.push(o,a,a,n)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(e){var t=this.data,o=[];if(!p(e,t))return o;for(var n=this.toBBox,r=[];t;){for(var i=0;i<t.children.length;i++){var s=t.children[i],a=t.leaf?n(s):s;p(e,a)&&(t.leaf?o.push(s):h(e,a)?this._all(s,o):r.push(s))}t=r.pop()}return o},n.prototype.collides=function(e){var t=this.data;if(!p(e,t))return!1;for(var o=[];t;){for(var n=0;n<t.children.length;n++){var r=t.children[n],i=t.leaf?this.toBBox(r):r;if(p(e,i)){if(t.leaf||h(e,i))return!0;o.push(r)}}t=o.pop()}return!1},n.prototype.load=function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0;t<e.length;t++)this.insert(e[t]);return this}var o=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===o.height)this._splitRoot(this.data,o);else{if(this.data.height<o.height){var n=this.data;this.data=o,o=n}this._insert(o,this.data.height-o.height-1,!0)}else this.data=o;return this},n.prototype.insert=function(e){return e&&this._insert(e,this.data.height-1),this},n.prototype.clear=function(){return this.data=f([]),this},n.prototype.remove=function(e,t){if(!e)return this;for(var o,n,i,s=this.data,a=this.toBBox(e),l=[],c=[];s||l.length;){if(s||(s=l.pop(),n=l[l.length-1],o=c.pop(),i=!0),s.leaf){var u=r(e,s.children,t);if(-1!==u)return s.children.splice(u,1),l.push(s),this._condense(l),this}i||s.leaf||!h(s,a)?n?(o++,s=n.children[o],i=!1):s=null:(l.push(s),c.push(o),o=0,n=s,s=s.children[0])}return this},n.prototype.toBBox=function(e){return e},n.prototype.compareMinX=function(e,t){return e.minX-t.minX},n.prototype.compareMinY=function(e,t){return e.minY-t.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(e){return this.data=e,this},n.prototype._all=function(e,t){for(var o=[];e;)e.leaf?t.push.apply(t,e.children):o.push.apply(o,e.children),e=o.pop();return t},n.prototype._build=function(e,t,o,n){var r,s=o-t+1,a=this._maxEntries;if(s<=a)return i(r=f(e.slice(t,o+1)),this.toBBox),r;n||(n=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,n-1))),(r=f([])).leaf=!1,r.height=n;var l=Math.ceil(s/a),c=l*Math.ceil(Math.sqrt(a));m(e,t,o,c,this.compareMinX);for(var u=t;u<=o;u+=c){var d=Math.min(u+c-1,o);m(e,u,d,l,this.compareMinY);for(var h=u;h<=d;h+=l){var p=Math.min(h+l-1,d);r.children.push(this._build(e,h,p,n-1))}}return i(r,this.toBBox),r},n.prototype._chooseSubtree=function(e,t,o,n){for(;n.push(t),!t.leaf&&n.length-1!==o;){for(var r=1/0,i=1/0,s=void 0,a=0;a<t.children.length;a++){var l=t.children[a],c=u(l),d=(h=e,p=l,(Math.max(p.maxX,h.maxX)-Math.min(p.minX,h.minX))*(Math.max(p.maxY,h.maxY)-Math.min(p.minY,h.minY))-c);d<i?(i=d,r=c<r?c:r,s=l):d===i&&c<r&&(r=c,s=l)}t=s||t.children[0]}var h,p;return t},n.prototype._insert=function(e,t,o){var n=o?e:this.toBBox(e),r=[],i=this._chooseSubtree(n,this.data,t,r);for(i.children.push(e),a(i,n);t>=0&&r[t].children.length>this._maxEntries;)this._split(r,t),t--;this._adjustParentBBoxes(n,r,t)},n.prototype._split=function(e,t){var o=e[t],n=o.children.length,r=this._minEntries;this._chooseSplitAxis(o,r,n);var s=this._chooseSplitIndex(o,r,n),a=f(o.children.splice(s,o.children.length-s));a.height=o.height,a.leaf=o.leaf,i(o,this.toBBox),i(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(o,a)},n.prototype._splitRoot=function(e,t){this.data=f([e,t]),this.data.height=e.height+1,this.data.leaf=!1,i(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(e,t,o){for(var n,r,i,a,l,c,d,h=1/0,p=1/0,f=t;f<=o-t;f++){var m=s(e,0,f,this.toBBox),g=s(e,f,o,this.toBBox),y=(r=m,i=g,a=Math.max(r.minX,i.minX),l=Math.max(r.minY,i.minY),c=Math.min(r.maxX,i.maxX),d=Math.min(r.maxY,i.maxY),Math.max(0,c-a)*Math.max(0,d-l)),v=u(m)+u(g);y<h?(h=y,n=f,p=v<p?v:p):y===h&&v<p&&(p=v,n=f)}return n||o-t},n.prototype._chooseSplitAxis=function(e,t,o){var n=e.leaf?this.compareMinX:l,r=e.leaf?this.compareMinY:c;this._allDistMargin(e,t,o,n)<this._allDistMargin(e,t,o,r)&&e.children.sort(n)},n.prototype._allDistMargin=function(e,t,o,n){e.children.sort(n);for(var r=this.toBBox,i=s(e,0,t,r),l=s(e,o-t,o,r),c=d(i)+d(l),u=t;u<o-t;u++){var h=e.children[u];a(i,e.leaf?r(h):h),c+=d(i)}for(var p=o-t-1;p>=t;p--){var f=e.children[p];a(l,e.leaf?r(f):f),c+=d(l)}return c},n.prototype._adjustParentBBoxes=function(e,t,o){for(var n=o;n>=0;n--)a(t[n],e)},n.prototype._condense=function(e){for(var t=e.length-1,o=void 0;t>=0;t--)0===e[t].children.length?t>0?(o=e[t-1].children).splice(o.indexOf(e[t]),1):this.clear():i(e[t],this.toBBox)},n}()},"./node_modules/sortablejs/Sortable.js":function(e,t,o){var n,r;
/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */!function(i){"use strict";void 0===(r="function"==typeof(n=i)?n.call(t,o,t,e):n)||(e.exports=r)}((function(){"use strict";if("undefined"==typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var e,t,o,n,r,i,s,a,l,c,u,d,h,p,f,m,g,y,v,_,b,w,E,O,S,x,C=[],j=!1,P=!1,T=!1,A=[],M=!1,I=!1,R=[],L=/\s+/g,k="Sortable"+(new Date).getTime(),G=window,N=G.document,D=G.parseInt,F=G.setTimeout,U=G.jQuery||G.Zepto,B=G.Polymer,z={capture:!1,passive:!1},V=!!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie|iemobile)/i),W=!!navigator.userAgent.match(/Edge/i),q=!!navigator.userAgent.match(/firefox/i),H=!(!navigator.userAgent.match(/safari/i)||navigator.userAgent.match(/chrome/i)||navigator.userAgent.match(/android/i)),Y=!!navigator.userAgent.match(/iP(ad|od|hone)/i),X=W||V?"cssFloat":"float",Z="draggable"in N.createElement("div"),K=function(){if(V)return!1;var e=N.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}(),J=!1,Q=!1,$=Math.abs,ee=Math.min,te=Math.max,oe=[],ne=function(e,t){var o=Oe(e),n=D(o.width)-D(o.paddingLeft)-D(o.paddingRight)-D(o.borderLeftWidth)-D(o.borderRightWidth),r=Ae(e,0,t),i=Ae(e,1,t),s=r&&Oe(r),a=i&&Oe(i),l=s&&D(s.marginLeft)+D(s.marginRight)+Be(r).width,c=a&&D(a.marginLeft)+D(a.marginRight)+Be(i).width;if("flex"===o.display)return"column"===o.flexDirection||"column-reverse"===o.flexDirection?"vertical":"horizontal";if("grid"===o.display)return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&"none"!==s.float){var u="left"===s.float?"left":"right";return!i||"both"!==a.clear&&a.clear!==u?"horizontal":"vertical"}return r&&("block"===s.display||"flex"===s.display||"table"===s.display||"grid"===s.display||l>=n&&"none"===o[X]||i&&"none"===o[X]&&l+c>n)?"vertical":"horizontal"},re=function(e,t){if(!e||!e.getBoundingClientRect)return ie();var o=e,n=!1;do{if(o.clientWidth<o.scrollWidth||o.clientHeight<o.scrollHeight){var r=Oe(o);if(o.clientWidth<o.scrollWidth&&("auto"==r.overflowX||"scroll"==r.overflowX)||o.clientHeight<o.scrollHeight&&("auto"==r.overflowY||"scroll"==r.overflowY)){if(!o||!o.getBoundingClientRect||o===N.body)return ie();if(n||t)return o;n=!0}}}while(o=o.parentNode);return ie()},ie=function(){return V?N.documentElement:N.scrollingElement},se=function(e,t,o){e.scrollLeft+=t,e.scrollTop+=o},ae=Ge((function(e,t,o,n){if(t.scroll){var r=o?o[k]:window,i=t.scrollSensitivity,s=t.scrollSpeed,u=e.clientX,d=e.clientY,h=ie(),p=!1;l!==o&&(le(),a=t.scroll,c=t.scrollFn,!0===a&&(a=re(o,!0),l=a));var f=0,m=a;do{var g,y,_,b,w,E,O,S,x,P=m,T=Be(P),A=T.top,M=T.bottom,I=T.left,R=T.right,L=T.width,G=T.height;if(g=P.scrollWidth,y=P.scrollHeight,_=Oe(P),S=P.scrollLeft,x=P.scrollTop,P===h?(E=L<g&&("auto"===_.overflowX||"scroll"===_.overflowX||"visible"===_.overflowX),O=G<y&&("auto"===_.overflowY||"scroll"===_.overflowY||"visible"===_.overflowY)):(E=L<g&&("auto"===_.overflowX||"scroll"===_.overflowX),O=G<y&&("auto"===_.overflowY||"scroll"===_.overflowY)),b=E&&($(R-u)<=i&&S+L<g)-($(I-u)<=i&&!!S),w=O&&($(M-d)<=i&&x+G<y)-($(A-d)<=i&&!!x),!C[f])for(var N=0;N<=f;N++)C[N]||(C[N]={});C[f].vx==b&&C[f].vy==w&&C[f].el===P||(C[f].el=P,C[f].vx=b,C[f].vy=w,clearInterval(C[f].pid),!P||0==b&&0==w||(p=!0,C[f].pid=setInterval(function(){n&&0===this.layer&&(ye.active._emulateDragOver(!0),ye.active._onTouchMove(v,!0));var t=C[this.layer].vy?C[this.layer].vy*s:0,o=C[this.layer].vx?C[this.layer].vx*s:0;"function"==typeof c&&"continue"!==c.call(r,o,t,e,v,C[this.layer].el)||se(C[this.layer].el,o,t)}.bind({layer:f}),24))),f++}while(t.bubbleScroll&&m!==h&&(m=re(m,!1)));j=p}}),30),le=function(){C.forEach((function(e){clearInterval(e.pid)})),C=[]},ce=function(e){function t(e,o){return function(n,r,i,s){var a=n.options.group.name&&r.options.group.name&&n.options.group.name===r.options.group.name;if(null==e&&(o||a))return!0;if(null==e||!1===e)return!1;if(o&&"clone"===e)return e;if("function"==typeof e)return t(e(n,r,i,s),o)(n,r,i,s);var l=(o?n:r).options.group.name;return!0===e||"string"==typeof e&&e===l||e.join&&e.indexOf(l)>-1}}var o={},n=e.group;n&&"object"==typeof n||(n={name:n}),o.name=n.name,o.checkPull=t(n.pull,!0),o.checkPut=t(n.put),o.revertClone=n.revertClone,e.group=o},ue=function(t){e&&e.parentNode&&e.parentNode[k]&&e.parentNode[k]._computeIsAligned(t)},de=function(e,t){for(var o=t;!o[k];)o=o.parentNode;return e===o},he=function(e,t,o){for(var n=e.parentNode;n&&!n[k];)n=n.parentNode;n&&n[k][o](Ne(t,{artificialBubble:!0}))},pe=function(){!K&&o&&Oe(o,"display","none")},fe=function(){!K&&o&&Oe(o,"display","")};N.addEventListener("click",(function(e){if(T)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),T=!1,!1}),!0);var me,ge=function(t){if(t=t.touches?t.touches[0]:t,e){var o=function(e,t){for(var o=0;o<A.length;o++)if(!Me(A[o])){var n=Be(A[o]),r=A[o][k].options.emptyInsertThreshold,i=e>=n.left-r&&e<=n.right+r,s=t>=n.top-r&&t<=n.bottom+r;if(i&&s)return A[o]}}(t.clientX,t.clientY);o&&o[k]._onDragOver({clientX:t.clientX,clientY:t.clientY,target:o,rootEl:o})}};function ye(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be HTMLElement, not "+{}.toString.call(e);this.el=e,this.options=t=Ne({},t),e[k]=this;var o={group:null,sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0,draggable:/[uo]l/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return ne(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,touchStartThreshold:D(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==ye.supportPointer&&("PointerEvent"in window||window.navigator&&"msPointerEnabled"in window.navigator),emptyInsertThreshold:5};for(var n in o)!(n in t)&&(t[n]=o[n]);for(var r in ce(t),this)"_"===r.charAt(0)&&"function"==typeof this[r]&&(this[r]=this[r].bind(this));this.nativeDraggable=!t.forceFallback&&Z,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?be(e,"pointerdown",this._onTapStart):(be(e,"mousedown",this._onTapStart),be(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(be(e,"dragover",this),be(e,"dragenter",this)),A.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[])}function ve(e,t,o,n){if(e){o=o||N;do{if(null!=t&&(">"===t[0]&&e.parentNode===o&&ke(e,t.substring(1))||ke(e,t))||n&&e===o)return e;if(e===o)break}while(e=_e(e))}return null}function _e(e){return e.host&&e!==N&&e.host.nodeType?e.host:e.parentNode}function be(e,t,o){e.addEventListener(t,o,z)}function we(e,t,o){e.removeEventListener(t,o,z)}function Ee(e,t,o){if(e&&t)if(e.classList)e.classList[o?"add":"remove"](t);else{var n=(" "+e.className+" ").replace(L," ").replace(" "+t+" "," ");e.className=(n+(o?" "+t:"")).replace(L," ")}}function Oe(e,t,o){var n=e&&e.style;if(n){if(void 0===o)return N.defaultView&&N.defaultView.getComputedStyle?o=N.defaultView.getComputedStyle(e,""):e.currentStyle&&(o=e.currentStyle),void 0===t?o:o[t];t in n||-1!==t.indexOf("webkit")||(t="-webkit-"+t),n[t]=o+("string"==typeof o?"":"px")}}function Se(e){var t="";do{var o=Oe(e,"transform");o&&"none"!==o&&(t=o+" "+t)}while(e=e.parentNode);return window.DOMMatrix?new DOMMatrix(t):window.WebKitCSSMatrix?new WebKitCSSMatrix(t):window.CSSMatrix?new CSSMatrix(t):void 0}function xe(e,t,o){if(e){var n=e.getElementsByTagName(t),r=0,i=n.length;if(o)for(;r<i;r++)o(n[r],r);return n}return[]}function Ce(e,t,o,r,i,s,a,l,c){var u,d=(e=e||t[k]).options,h="on"+o.charAt(0).toUpperCase()+o.substr(1);!window.CustomEvent||V||W?(u=N.createEvent("Event")).initEvent(o,!0,!0):u=new CustomEvent(o,{bubbles:!0,cancelable:!0}),u.to=i||t,u.from=s||t,u.item=r||t,u.clone=n,u.oldIndex=a,u.newIndex=l,u.originalEvent=c,u.pullMode=p?p.lastPutMode:void 0,t&&t.dispatchEvent(u),d[h]&&d[h].call(e,u)}function je(e,t,o,n,r,i,s,a){var l,c,u=e[k],d=u.options.onMove;return!window.CustomEvent||V||W?(l=N.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=o,l.draggedRect=n,l.related=r||t,l.relatedRect=i||Be(t),l.willInsertAfter=a,l.originalEvent=s,e.dispatchEvent(l),d&&(c=d.call(u,l,s)),c}function Pe(e){e.draggable=!1}function Te(){J=!1}function Ae(t,n,r){for(var i=0,s=0,a=t.children;s<a.length;){if("none"!==a[s].style.display&&a[s]!==o&&a[s]!==e&&ve(a[s],r.draggable,t,!1)){if(i===n)return a[s];i++}s++}return null}function Me(e){for(var t=e.lastElementChild;t&&(t===o||"none"===t.style.display);)t=t.previousElementSibling;return t||null}function Ie(t){return Le(e)<Le(t)?1:-1}function Re(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,o=t.length,n=0;o--;)n+=t.charCodeAt(o);return n.toString(36)}function Le(e,t){var o=0;if(!e||!e.parentNode)return-1;for(;e&&(e=e.previousElementSibling);)"TEMPLATE"!==e.nodeName.toUpperCase()&&e!==n&&o++;return o}function ke(e,t){if(e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}function Ge(e,t){return function(){if(!me){var o=arguments,n=this;me=F((function(){1===o.length?e.call(n,o[0]):e.apply(n,o),me=void 0}),t)}}}function Ne(e,t){if(e&&t)for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e}function De(e){return B&&B.dom?B.dom(e).cloneNode(!0):U?U(e).clone(!0)[0]:e.cloneNode(!0)}function Fe(e){return F(e,0)}function Ue(e){return clearTimeout(e)}function Be(e,t,o,n){if(e.getBoundingClientRect||e===G){var r,i,s,a,l,c,u;if(e!==G&&e!==ie()?(i=(r=e.getBoundingClientRect()).top,s=r.left,a=r.bottom,l=r.right,c=r.height,u=r.width):(i=0,s=0,a=window.innerHeight,l=window.innerWidth,c=window.innerHeight,u=window.innerWidth),n&&e!==G&&(o=o||e.parentNode,!V))do{if(o&&o.getBoundingClientRect&&"none"!==Oe(o,"transform")){var d=o.getBoundingClientRect();i-=d.top+D(Oe(o,"border-top-width")),s-=d.left+D(Oe(o,"border-left-width")),a=i+r.height,l=s+r.width;break}}while(o=o.parentNode);if(t&&e!==G){var h=Se(o||e),p=h&&h.a,f=h&&h.d;h&&(a=(i/=f)+(c/=f),l=(s/=p)+(u/=p))}return{top:i,left:s,bottom:a,right:l,width:u,height:c}}}function ze(e,t){for(var o=re(e,!0),n=Be(e)[t];o;){var r=Be(o)[t];if(!("top"===t||"left"===t?n>=r:n<=r))return o;if(o===ie())break;o=re(o,!1)}return!1}function Ve(e){var t=0,o=0,n=ie();if(e)do{var r=Se(e),i=r.a,s=r.d;t+=e.scrollLeft*i,o+=e.scrollTop*s}while(e!==n&&(e=e.parentNode));return[t,o]}return be(N,"dragover",ge),be(N,"mousemove",ge),be(N,"touchmove",ge),ye.prototype={constructor:ye,_computeIsAligned:function(t){var n;if(o&&!K?(pe(),n=N.elementFromPoint(t.clientX,t.clientY),fe()):n=t.target,n=ve(n,this.options.draggable,this.el,!1),!Q&&e&&e.parentNode===this.el){for(var r,i,s,a,l,c,u,d,h=this.el.children,p=0;p<h.length;p++)ve(h[p],this.options.draggable,this.el,!1)&&h[p]!==n&&(h[p].sortableMouseAligned=(r=t.clientX,i=t.clientY,s=h[p],a=this._getDirection(t,null),this.options,l=void 0,c=void 0,u=void 0,d=void 0,l=Be(s),c="vertical"===a?l.left:l.top,u="vertical"===a?l.right:l.bottom,c<(d="vertical"===a?r:i)&&d<u));ve(n,this.options.draggable,this.el,!0)||(b=null),Q=!0,F((function(){Q=!1}),30)}},_getDirection:function(t,o){return"function"==typeof this.options.direction?this.options.direction.call(this,t,o,e):this.options.direction},_onTapStart:function(t){if(t.cancelable){var o,n=this,r=this.el,i=this.options,a=i.preventOnFilter,l=t.type,c=t.touches&&t.touches[0],u=(c||t).target,d=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||u,h=i.filter;if(function(e){oe.length=0;var t=e.getElementsByTagName("input"),o=t.length;for(;o--;){var n=t[o];n.checked&&oe.push(n)}}(r),(!V||t.artificialBubble||de(r,u))&&!e&&!(/mousedown|pointerdown/.test(l)&&0!==t.button||i.disabled||d.isContentEditable))if(u=ve(u,i.draggable,r,!1)){if(s!==u){if(o=Le(u,i.draggable),"function"==typeof h){if(h.call(this,t,u,this))return Ce(n,d,"filter",u,r,r,o),void(a&&t.cancelable&&t.preventDefault())}else if(h&&(h=h.split(",").some((function(e){if(e=ve(d,e.trim(),r,!1))return Ce(n,e,"filter",u,r,r,o),!0}))))return void(a&&t.cancelable&&t.preventDefault());i.handle&&!ve(d,i.handle,r,!1)||this._prepareDragStart(t,c,u,o)}}else V&&he(r,t,"_onTapStart")}},_handleAutoScroll:function(t,o){if(e&&this.options.scroll){var n=t.clientX,r=t.clientY,i=N.elementFromPoint(n,r),s=this;if(o||W||V||H){ae(t,s.options,i,o);var a=re(i,!0);!j||f&&n===m&&r===g||(f&&clearInterval(f),f=setInterval((function(){if(e){var i=re(N.elementFromPoint(n,r),!0);i!==a&&(a=i,le(),ae(t,s.options,a,o))}}),10),m=n,g=r)}else{if(!s.options.bubbleScroll||re(i,!0)===ie())return void le();ae(t,s.options,re(i,!1),!1)}}},_prepareDragStart:function(o,n,a,l){var c,d=this,p=d.el,f=d.options,m=p.ownerDocument;a&&!e&&a.parentNode===p&&(r=p,t=(e=a).parentNode,i=e.nextSibling,s=a,h=f.group,u=l,y={target:e,clientX:(n||o).clientX,clientY:(n||o).clientY},this._lastX=(n||o).clientX,this._lastY=(n||o).clientY,e.style["will-change"]="all",e.style.transition="",e.style.transform="",c=function(){d._disableDelayedDragEvents(),!q&&d.nativeDraggable&&(e.draggable=!0),d._triggerDragStart(o,n),Ce(d,r,"choose",e,r,r,u),Ee(e,f.chosenClass,!0)},f.ignore.split(",").forEach((function(t){xe(e,t.trim(),Pe)})),f.supportPointer?be(m,"pointerup",d._onDrop):(be(m,"mouseup",d._onDrop),be(m,"touchend",d._onDrop),be(m,"touchcancel",d._onDrop)),q&&this.nativeDraggable&&(this.options.touchStartThreshold=4,e.draggable=!0),!f.delay||this.nativeDraggable&&(W||V)?c():(be(m,"mouseup",d._disableDelayedDrag),be(m,"touchend",d._disableDelayedDrag),be(m,"touchcancel",d._disableDelayedDrag),be(m,"mousemove",d._delayedDragTouchMoveHandler),be(m,"touchmove",d._delayedDragTouchMoveHandler),f.supportPointer&&be(m,"pointermove",d._delayedDragTouchMoveHandler),d._dragStartTimer=F(c,f.delay)))},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;te($(t.clientX-this._lastX),$(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){e&&Pe(e),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;we(e,"mouseup",this._disableDelayedDrag),we(e,"touchend",this._disableDelayedDrag),we(e,"touchcancel",this._disableDelayedDrag),we(e,"mousemove",this._delayedDragTouchMoveHandler),we(e,"touchmove",this._delayedDragTouchMoveHandler),we(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,o){o=o||("touch"==t.pointerType?t:null),!this.nativeDraggable||o?this.options.supportPointer?be(N,"pointermove",this._onTouchMove):be(N,o?"touchmove":"mousemove",this._onTouchMove):(be(e,"dragend",this),be(r,"dragstart",this._onDragStart));try{N.selection?Fe((function(){N.selection.empty()})):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(t,o){if(P=!1,r&&e){this.nativeDraggable&&(be(N,"dragover",this._handleAutoScroll),be(N,"dragover",ue));var n=this.options;!t&&Ee(e,n.dragClass,!1),Ee(e,n.ghostClass,!0),Oe(e,"transform",""),ye.active=this,t&&this._appendGhost(),Ce(this,r,"start",e,r,r,u,void 0,o)}else this._nulling()},_emulateDragOver:function(t){if(v){if(this._lastX===v.clientX&&this._lastY===v.clientY&&!t)return;this._lastX=v.clientX,this._lastY=v.clientY,pe();for(var o=N.elementFromPoint(v.clientX,v.clientY),n=o;o&&o.shadowRoot;)n=o=o.shadowRoot.elementFromPoint(v.clientX,v.clientY);if(n)do{if(n[k])if(n[k]._onDragOver({clientX:v.clientX,clientY:v.clientY,target:o,rootEl:n})&&!this.options.dragoverBubble)break;o=n}while(n=n.parentNode);e.parentNode[k]._computeIsAligned(v),fe()}},_onTouchMove:function(e,t){if(y){var n=this.options,r=n.fallbackTolerance,i=n.fallbackOffset,s=e.touches?e.touches[0]:e,a=o&&Se(o),l=o&&a&&a.a,c=o&&a&&a.d,u=Y&&S&&Ve(S),d=(s.clientX-y.clientX+i.x)/(l||1)+(u?u[0]-R[0]:0)/(l||1),h=(s.clientY-y.clientY+i.y)/(c||1)+(u?u[1]-R[1]:0)/(c||1),p=e.touches?"translate3d("+d+"px,"+h+"px,0)":"translate("+d+"px,"+h+"px)";if(!ye.active&&!P){if(r&&ee($(s.clientX-this._lastX),$(s.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}!t&&this._handleAutoScroll(s,!0),_=!0,v=s,Oe(o,"webkitTransform",p),Oe(o,"mozTransform",p),Oe(o,"msTransform",p),Oe(o,"transform",p),e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!o){var t=this.options.fallbackOnBody?N.body:r,n=Be(e,!0,t,!Y),i=(Oe(e),this.options);if(Y){for(S=t;"static"===Oe(S,"position")&&"none"===Oe(S,"transform")&&S!==N;)S=S.parentNode;if(S!==N){var s=Be(S,!0);n.top-=s.top,n.left-=s.left}S!==N.body&&S!==N.documentElement?(S===N&&(S=ie()),n.top+=S.scrollTop,n.left+=S.scrollLeft):S=ie(),R=Ve(S)}Ee(o=e.cloneNode(!0),i.ghostClass,!1),Ee(o,i.fallbackClass,!0),Ee(o,i.dragClass,!0),Oe(o,"box-sizing","border-box"),Oe(o,"margin",0),Oe(o,"top",n.top),Oe(o,"left",n.left),Oe(o,"width",n.width),Oe(o,"height",n.height),Oe(o,"opacity","0.8"),Oe(o,"position",Y?"absolute":"fixed"),Oe(o,"zIndex","100000"),Oe(o,"pointerEvents","none"),t.appendChild(o)}},_onDragStart:function(t,o){var i=this,s=t.dataTransfer,a=i.options;(n=De(e)).draggable=!1,n.style["will-change"]="",this._hideClone(),Ee(n,i.options.chosenClass,!1),i._cloneId=Fe((function(){i.options.removeCloneOnHide||r.insertBefore(n,e),Ce(i,r,"clone",e)})),!o&&Ee(e,a.dragClass,!0),o?(T=!0,i._loopId=setInterval(i._emulateDragOver,50)):(we(N,"mouseup",i._onDrop),we(N,"touchend",i._onDrop),we(N,"touchcancel",i._onDrop),s&&(s.effectAllowed="move",a.setData&&a.setData.call(i,s,e)),be(N,"drop",i),Oe(e,"transform","translateZ(0)")),P=!0,i._dragStartId=Fe(i._dragStarted.bind(i,o,t)),be(N,"selectstart",i),H&&Oe(N.body,"user-select","none")},_onDragOver:function(o){var n,s,a,l=this.el,c=o.target,d=this.options,f=d.group,m=ye.active,g=h===f,y=d.sort,v=this;if(!J&&(!V||o.rootEl||o.artificialBubble||de(l,c))){if(void 0!==o.preventDefault&&o.cancelable&&o.preventDefault(),_=!0,c=ve(c,d.draggable,l,!0),ve(o.target,null,e,!0)||c.animated)return W(!1);if(c!==e&&(T=!1),m&&!d.disabled&&(g?y||(a=!r.contains(e)):p===this||(this.lastPutMode=h.checkPull(this,m,e,o))&&f.checkPut(this,m,e,o))){var S=this._getDirection(o,c);if(n=Be(e),a)return this._hideClone(),t=r,i?r.insertBefore(e,i):r.appendChild(e),W(!0);var C=Me(l);if(!C||function(e,t,o){var n=Be(Me(o)),r="vertical"===t?e.clientY:e.clientX,i="vertical"===t?e.clientX:e.clientY,s="vertical"===t?n.bottom:n.right,a="vertical"===t?n.left:n.top,l="vertical"===t?n.right:n.bottom;return"vertical"===t?i>l+10||i<=l&&r>s&&i>=a:r>s&&i>a||r<=s&&i>l+10}(o,S,l)&&!C.animated){if(C&&l===o.target&&(c=C),c&&(s=Be(c)),g?m._hideClone():m._showClone(this),!1!==je(r,l,e,n,c,s,o,!!c))return l.appendChild(e),t=l,x=null,q(),W(!0)}else if(c&&c!==e&&c.parentNode===l){var j,P=0,A=c.sortableMouseAligned,R=e.parentNode!==l,L="vertical"===S?"top":"left",G=ze(c,"top")||ze(e,"top"),D=G?G.scrollTop:void 0;if(b!==c&&(E=null,j=Be(c)[L],M=!1),function(t,o,n){var r=t===e&&x||Be(t),i=o===e&&x||Be(o),s="vertical"===n?r.left:r.top,a="vertical"===n?r.right:r.bottom,l="vertical"===n?r.width:r.height,c="vertical"===n?i.left:i.top,u="vertical"===n?i.right:i.bottom,d="vertical"===n?i.width:i.height;return s===c||a===u||s+l/2===c+d/2}(e,c,S)&&A||R||G||d.invertSwap||"insert"===E||"swap"===E?("swap"!==E&&(I=d.invertSwap||R),P=function(t,o,n,r,i,s,a){var l=Be(o),c="vertical"===n?t.clientY:t.clientX,u="vertical"===n?l.height:l.width,d="vertical"===n?l.top:l.left,h="vertical"===n?l.bottom:l.right,p=Be(e),f=!1;if(!s)if(a&&O<u*r)if(!M&&(1===w?c>d+u*i/2:c<h-u*i/2)&&(M=!0),M)f=!0;else{"vertical"===n?p.top:p.left,"vertical"===n?p.bottom:p.right;if(1===w?c<d+O:c>h-O)return-1*w}else if(c>d+u*(1-r)/2&&c<h-u*(1-r)/2)return Ie(o);if((f=f||s)&&(c<d+u*i/2||c>h-u*i/2))return c>d+u/2?1:-1;return 0}(o,c,S,d.swapThreshold,null==d.invertedSwapThreshold?d.swapThreshold:d.invertedSwapThreshold,I,b===c),E="swap"):(P=Ie(c),E="insert"),0===P)return W(!1);x=null,b=c,w=P,s=Be(c);var U=c.nextElementSibling,B=!1,z=je(r,l,e,n,c,s,o,B=1===P);if(!1!==z)return 1!==z&&-1!==z||(B=1===z),J=!0,F(Te,30),g?m._hideClone():m._showClone(this),B&&!U?l.appendChild(e):c.parentNode.insertBefore(e,B?U:c),G&&se(G,0,D-G.scrollTop),t=e.parentNode,void 0===j||I||(O=$(j-Be(c)[L])),q(),W(!0)}if(l.contains(e))return W(!1)}return V&&!o.rootEl&&he(l,o,"_onDragOver"),!1}function W(t){return t&&(g?m._hideClone():m._showClone(v),m&&(Ee(e,p?p.options.ghostClass:m.options.ghostClass,!1),Ee(e,d.ghostClass,!0)),p!==v&&v!==ye.active?p=v:v===ye.active&&(p=null),n&&v._animate(n,e),c&&s&&v._animate(s,c)),(c===e&&!e.animated||c===l&&!c.animated)&&(b=null),d.dragoverBubble||o.rootEl||c===N||(v._handleAutoScroll(o),e.parentNode[k]._computeIsAligned(o)),!d.dragoverBubble&&o.stopPropagation&&o.stopPropagation(),!0}function q(){Ce(v,r,"change",c,l,r,u,Le(e,d.draggable),o)}},_animate:function(t,o){var n=this.options.animation;if(n){var r=Be(o);if(o===e&&(x=r),1===t.nodeType&&(t=Be(t)),t.left+t.width/2!==r.left+r.width/2||t.top+t.height/2!==r.top+r.height/2){var i=Se(this.el),s=i&&i.a,a=i&&i.d;Oe(o,"transition","none"),Oe(o,"transform","translate3d("+(t.left-r.left)/(s||1)+"px,"+(t.top-r.top)/(a||1)+"px,0)"),o.offsetWidth,Oe(o,"transition","transform "+n+"ms"+(this.options.easing?" "+this.options.easing:"")),Oe(o,"transform","translate3d(0,0,0)")}"number"==typeof o.animated&&clearTimeout(o.animated),o.animated=F((function(){Oe(o,"transition",""),Oe(o,"transform",""),o.animated=!1}),n)}},_offUpEvents:function(){var e=this.el.ownerDocument;we(N,"touchmove",this._onTouchMove),we(N,"pointermove",this._onTouchMove),we(e,"mouseup",this._onDrop),we(e,"touchend",this._onDrop),we(e,"pointerup",this._onDrop),we(e,"touchcancel",this._onDrop),we(N,"selectstart",this)},_onDrop:function(s){var a=this.el,l=this.options;P=!1,j=!1,I=!1,M=!1,clearInterval(this._loopId),clearInterval(f),le(),clearTimeout(me),me=void 0,clearTimeout(this._dragStartTimer),Ue(this._cloneId),Ue(this._dragStartId),we(N,"mousemove",this._onTouchMove),this.nativeDraggable&&(we(N,"drop",this),we(a,"dragstart",this._onDragStart),we(N,"dragover",this._handleAutoScroll),we(N,"dragover",ue)),H&&Oe(N.body,"user-select",""),this._offUpEvents(),s&&(_&&(s.cancelable&&s.preventDefault(),!l.dropBubble&&s.stopPropagation()),o&&o.parentNode&&o.parentNode.removeChild(o),(r===t||p&&"clone"!==p.lastPutMode)&&n&&n.parentNode&&n.parentNode.removeChild(n),e&&(this.nativeDraggable&&we(e,"dragend",this),Pe(e),e.style["will-change"]="",Ee(e,p?p.options.ghostClass:this.options.ghostClass,!1),Ee(e,this.options.chosenClass,!1),Ce(this,r,"unchoose",e,t,r,u,null,s),r!==t?((d=Le(e,l.draggable))>=0&&(Ce(null,t,"add",e,t,r,u,d,s),Ce(this,r,"remove",e,t,r,u,d,s),Ce(null,t,"sort",e,t,r,u,d,s),Ce(this,r,"sort",e,t,r,u,d,s)),p&&p.save()):e.nextSibling!==i&&(d=Le(e,l.draggable))>=0&&(Ce(this,r,"update",e,t,r,u,d,s),Ce(this,r,"sort",e,t,r,u,d,s)),ye.active&&(null!=d&&-1!==d||(d=u),Ce(this,r,"end",e,t,r,u,d,s),this.save()))),this._nulling()},_nulling:function(){r=e=t=o=i=n=s=a=l=C.length=f=m=g=y=v=_=d=u=b=w=x=p=h=ye.active=null,oe.forEach((function(e){e.checked=!0})),oe.length=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":e&&(this._onDragOver(t),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var e,t=[],o=this.el.children,n=0,r=o.length,i=this.options;n<r;n++)ve(e=o[n],i.draggable,this.el,!1)&&t.push(e.getAttribute(i.dataIdAttr)||Re(e));return t},sort:function(e){var t={},o=this.el;this.toArray().forEach((function(e,n){var r=o.children[n];ve(r,this.options.draggable,o,!1)&&(t[e]=r)}),this),e.forEach((function(e){t[e]&&(o.removeChild(t[e]),o.appendChild(t[e]))}))},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return ve(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var o=this.options;if(void 0===t)return o[e];o[e]=t,"group"===e&&ce(o)},destroy:function(){var e=this.el;e[k]=null,we(e,"mousedown",this._onTapStart),we(e,"touchstart",this._onTapStart),we(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(we(e,"dragover",this),we(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),A.splice(A.indexOf(this.el),1),this.el=e=null},_hideClone:function(){n.cloneHidden||(Oe(n,"display","none"),n.cloneHidden=!0,n.parentNode&&this.options.removeCloneOnHide&&n.parentNode.removeChild(n))},_showClone:function(t){"clone"===t.lastPutMode?n.cloneHidden&&(r.contains(e)&&!this.options.group.revertClone?r.insertBefore(n,e):i?r.insertBefore(n,i):r.appendChild(n),this.options.group.revertClone&&this._animate(e,n),Oe(n,"display",""),n.cloneHidden=!1):this._hideClone()}},be(N,"touchmove",(function(e){(ye.active||P)&&e.cancelable&&e.preventDefault()})),ye.utils={on:be,off:we,css:Oe,find:xe,is:function(e,t){return!!ve(e,t,e,!1)},extend:Ne,throttle:Ge,closest:ve,toggleClass:Ee,clone:De,index:Le,nextTick:Fe,cancelNextTick:Ue,detectDirection:ne,getChild:Ae},ye.create=function(e,t){return new ye(e,t)},ye.version="1.8.4",ye}))},"./node_modules/threads/dist-esm/common.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return i})),o.d(t,"b",(function(){return s}));const n={deserialize:e=>Object.assign(Error(e.message),{name:e.name,stack:e.stack}),serialize:e=>({__error_marker:"$$error",message:e.message,name:e.name,stack:e.stack})};let r={deserialize(e){return(t=e)&&"object"==typeof t&&"__error_marker"in t&&"$$error"===t.__error_marker?n.deserialize(e):e;var t},serialize:e=>e instanceof Error?n.serialize(e):e};function i(e){return r.deserialize(e)}function s(e){return r.serialize(e)}},"./node_modules/threads/dist-esm/master/invocation-proxy.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return v})),o.d(t,"b",(function(){return _}));var n=o("./node_modules/debug/src/browser.js"),r=o.n(n),i=o("./node_modules/observable-fns/dist.esm/observable.js"),s=o("./node_modules/observable-fns/dist.esm/multicast.js"),a=o("./node_modules/threads/dist-esm/common.js");const l=()=>{},c=e=>e,u=e=>Promise.resolve().then(e);function d(e){throw e}class h extends i.a{constructor(e){super(t=>{const o=this,n=Object.assign(Object.assign({},t),{complete(){t.complete(),o.onCompletion()},error(e){t.error(e),o.onError(e)},next(e){t.next(e),o.onNext(e)}});try{return this.initHasRun=!0,e(n)}catch(e){n.error(e)}}),this.initHasRun=!1,this.fulfillmentCallbacks=[],this.rejectionCallbacks=[],this.firstValueSet=!1,this.state="pending"}onNext(e){this.firstValueSet||(this.firstValue=e,this.firstValueSet=!0)}onError(e){this.state="rejected",this.rejection=e;for(const t of this.rejectionCallbacks)u(()=>t(e))}onCompletion(){this.state="fulfilled";for(const e of this.fulfillmentCallbacks)u(()=>e(this.firstValue))}then(e,t){const o=e||c,n=t||d;let r=!1;return new Promise((e,t)=>{const i=o=>{if(!r){r=!0;try{e(n(o))}catch(e){t(e)}}};return this.initHasRun||this.subscribe({error:i}),"fulfilled"===this.state?e(o(this.firstValue)):"rejected"===this.state?(r=!0,e(n(this.rejection))):(this.fulfillmentCallbacks.push(t=>{try{e(o(t))}catch(e){i(e)}}),void this.rejectionCallbacks.push(i))})}catch(e){return this.then(void 0,e)}finally(e){const t=e||l;return this.then(e=>(t(),e),()=>t())}static from(e){return function(e){return e&&"function"==typeof e.then}(e)?new h(t=>{e.then(e=>{t.next(e),t.complete()},e=>{t.error(e)})}):super.from(e)}}var p=o("./node_modules/threads/dist-esm/transferable.js"),f=o("./node_modules/threads/dist-esm/types/messages.js");const m=r()("threads:master:messages");let g=1;function y(e,t){return new i.a(o=>{let n;const r=i=>{var s;if(m("Message from worker:",i.data),i.data&&i.data.uid===t)if((s=i.data)&&s.type===f.b.running)n=i.data.resultType;else if((e=>e&&e.type===f.b.result)(i.data))"promise"===n?(void 0!==i.data.payload&&o.next(Object(a.a)(i.data.payload)),o.complete(),e.removeEventListener("message",r)):(i.data.payload&&o.next(Object(a.a)(i.data.payload)),i.data.complete&&(o.complete(),e.removeEventListener("message",r)));else if((e=>e&&e.type===f.b.error)(i.data)){const t=Object(a.a)(i.data.error);o.error(t),e.removeEventListener("message",r)}};return e.addEventListener("message",r),()=>{if("observable"===n||!n){const o={type:f.a.cancel,uid:t};e.postMessage(o)}e.removeEventListener("message",r)}})}function v(e,t){return(...o)=>{const n=g++,{args:r,transferables:i}=function(e){if(0===e.length)return{args:[],transferables:[]};const t=[],o=[];for(const n of e)Object(p.b)(n)?(t.push(Object(a.b)(n.send)),o.push(...n.transferables)):t.push(Object(a.b)(n));return{args:t,transferables:0===o.length?o:(n=o,Array.from(new Set(n)))};var n}(o),l={type:f.a.run,uid:n,method:t,args:r};m("Sending command to run function to worker:",l);try{e.postMessage(l,i)}catch(e){return h.from(Promise.reject(e))}return h.from(Object(s.a)(y(e,n)))}}function _(e,t){const o={};for(const n of t)o[n]=v(e,n);return o}},"./node_modules/threads/dist-esm/master/spawn.js":function(e,t,o){"use strict";(function(e){o.d(t,"a",(function(){return y}));var n=o("./node_modules/debug/src/browser.js"),r=o.n(n),i=o("./node_modules/observable-fns/dist.esm/observable.js"),s=o("./node_modules/threads/dist-esm/common.js"),a=o("./node_modules/threads/dist-esm/promise.js"),l=o("./node_modules/threads/dist-esm/symbols.js"),c=o("./node_modules/threads/dist-esm/types/master.js"),u=o("./node_modules/threads/dist-esm/master/invocation-proxy.js"),d=function(e,t,o,n){return new(o||(o=Promise))((function(r,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};const h=r()("threads:master:messages"),p=r()("threads:master:spawn"),f=r()("threads:master:thread-utils"),m=void 0!==e&&e.env.THREADS_WORKER_INIT_TIMEOUT?Number.parseInt(e.env.THREADS_WORKER_INIT_TIMEOUT,10):1e4;function g(e,t,o,n){const r=o.filter(e=>e.type===c.a.internalError).map(e=>e.error);return Object.assign(e,{[l.a]:r,[l.b]:o,[l.c]:n,[l.e]:t})}function y(e,t){return d(this,void 0,void 0,(function*(){p("Initializing new thread");const o=t&&t.timeout?t.timeout:m,n=(yield function(e,t,o){return d(this,void 0,void 0,(function*(){let n;const r=new Promise((e,r)=>{n=setTimeout(()=>r(Error(o)),t)}),i=yield Promise.race([e,r]);return clearTimeout(n),i}))}(function(e){return new Promise((t,o)=>{const n=r=>{var i;h("Message from worker before finishing initialization:",r.data),(i=r.data)&&"init"===i.type?(e.removeEventListener("message",n),t(r.data)):(e=>e&&"uncaughtError"===e.type)(r.data)&&(e.removeEventListener("message",n),o(Object(s.a)(r.data.error)))};e.addEventListener("message",n)})}(e),o,`Timeout: Did not receive an init message from worker after ${o}ms. Make sure the worker calls expose().`)).exposed,{termination:r,terminate:l}=function(e){const[t,o]=Object(a.a)();return{terminate:()=>d(this,void 0,void 0,(function*(){f("Terminating worker"),yield e.terminate(),o()})),termination:t}}(e),y=function(e,t){return new i.a(o=>{const n=e=>{const t={type:c.a.message,data:e.data};o.next(t)},r=e=>{f("Unhandled promise rejection event in thread:",e);const t={type:c.a.internalError,error:Error(e.reason)};o.next(t)};e.addEventListener("message",n),e.addEventListener("unhandledrejection",r),t.then(()=>{const t={type:c.a.termination};e.removeEventListener("message",n),e.removeEventListener("unhandledrejection",r),o.next(t),o.complete()})})}(e,r);if("function"===n.type){return g(Object(u.a)(e),e,y,l)}if("module"===n.type){return g(Object(u.b)(e,n.methods),e,y,l)}{const e=n.type;throw Error("Worker init message states unexpected type of expose(): "+e)}}))}}).call(this,o("./node_modules/process/browser.js"))},"./node_modules/threads/dist-esm/promise.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return r}));const n=()=>{};function r(){let e,t=!1,o=n;return[new Promise(n=>{t?n(e):o=n}),n=>{t=!0,e=n,o(e)}]}},"./node_modules/threads/dist-esm/symbols.js":function(e,t,o){"use strict";o.d(t,"a",(function(){return n})),o.d(t,"b",(function(){return r})),o.d(t,"c",(function(){return i})),o.d(t,"d",(function(){return s})),o.d(t,"e",(function(){return a}));const n=Symbol("thread.errors"),r=Symbol("thread.events"),i=Symbol("thread.terminate"),s=Symbol("thread.transferable"),a=Symbol("thread.worker")},"./node_modules/threads/dist-esm/transferable.js":function(e,t,o){"use strict";o.d(t,"b",(function(){return r})),o.d(t,"a",(function(){return i}));var n=o("./node_modules/threads/dist-esm/symbols.js");function r(e){return e&&"object"==typeof e&&e[n.d]}function i(e,t){if(!t){if(!(o=e)||"object"!=typeof o)throw Error();t=[e]}var o;return{[n.d]:!0,send:e,transferables:t}}},"./node_modules/threads/dist-esm/types/master.js":function(e,t,o){"use strict";var n;o.d(t,"a",(function(){return n})),function(e){e.internalError="internalError",e.message="message",e.termination="termination"}(n||(n={}))},"./node_modules/threads/dist-esm/types/messages.js":function(e,t,o){"use strict";var n,r;o.d(t,"a",(function(){return n})),o.d(t,"b",(function(){return r})),function(e){e.cancel="cancel",e.run="run"}(n||(n={})),function(e){e.error="error",e.init="init",e.result="result",e.running="running",e.uncaughtError="uncaughtError"}(r||(r={}))},"./node_modules/webfont-matcher/lib/fonts/google.js":function(e,t){(function(){var t;e.exports={icon:"icons/google.svg",name:"google",title:"Google Fonts",link:"google.com/fonts",getNames:function(){return t},getLink:function(e){return"https://fonts.google.com/specimen/"+e.replace(/( )/g,"+")},normalizeName:function(e){return e}},t=["ABeeZee","Abel","Abril Fatface","Aclonica","Acme","Actor","Adamina","Advent Pro","Aguafina Script","Akronim","Aladin","Aldrich","Alef","Alegreya","Alegreya SC","Alegreya Sans","Alegreya Sans SC","Alex Brush","Alfa Slab One","Alice","Alike","Alike Angular","Allan","Allerta","Allerta Stencil","Allura","Almendra","Almendra Display","Almendra SC","Amarante","Amaranth","Amatic SC","Amethysta","Amiri","Amita","Anaheim","Andada","Andika","Angkor","Annie Use Your Telescope","Anonymous Pro","Antic","Antic Didone","Antic Slab","Anton","Arapey","Arbutus","Arbutus Slab","Architects Daughter","Archivo Black","Archivo Narrow","Arimo","Arizonia","Armata","Artifika","Arvo","Arya","Asap","Asar","Asset","Astloch","Asul","Atomic Age","Aubrey","Audiowide","Autour One","Average","Average Sans","Averia Gruesa Libre","Averia Libre","Averia Sans Libre","Averia Serif Libre","Bad Script","Balthazar","Bangers","Basic","Battambang","Baumans","Bayon","Belgrano","Belleza","BenchNine","Bentham","Berkshire Swash","Bevan","Bigelow Rules","Bigshot One","Bilbo","Bilbo Swash Caps","Biryani","Bitter","Black Ops One","Bokor","Bonbon","Boogaloo","Bowlby One","Bowlby One SC","Brawler","Bree Serif","Bubblegum Sans","Bubbler One","Buda","Buenard","Butcherman","Butterfly Kids","Cabin","Cabin Condensed","Cabin Sketch","Caesar Dressing","Cagliostro","Calligraffitti","Cambay","Cambo","Candal","Cantarell","Cantata One","Cantora One","Capriola","Cardo","Carme","Carrois Gothic","Carrois Gothic SC","Carter One","Catamaran","Caudex","Caveat","Caveat Brush","Cedarville Cursive","Ceviche One","Changa One","Chango","Chau Philomene One","Chela One","Chelsea Market","Chenla","Cherry Cream Soda","Cherry Swash","Chewy","Chicle","Chivo","Chonburi","Cinzel","Cinzel Decorative","Clicker Script","Coda","Coda Caption","Codystar","Combo","Comfortaa","Coming Soon","Concert One","Condiment","Content","Contrail One","Convergence","Cookie","Copse","Corben","Courgette","Cousine","Coustard","Covered By Your Grace","Crafty Girls","Creepster","Crete Round","Crimson Text","Croissant One","Crushed","Cuprum","Cutive","Cutive Mono","Damion","Dancing Script","Dangrek","Dawning of a New Day","Days One","Dekko","Delius","Delius Swash Caps","Delius Unicase","Della Respira","Denk One","Devonshire","Dhurjati","Didact Gothic","Diplomata","Diplomata SC","Domine","Donegal One","Doppio One","Dorsa","Dosis","Dr Sugiyama","Droid Sans","Droid Sans Mono","Droid Serif","Duru Sans","Dynalight","EB Garamond","Eagle Lake","Eater","Economica","Eczar","Ek Mukta","Electrolize","Elsie","Elsie Swash Caps","Emblema One","Emilys Candy","Engagement","Englebert","Enriqueta","Erica One","Esteban","Euphoria Script","Ewert","Exo","Exo 2","Expletus Sans","Fanwood Text","Fascinate","Fascinate Inline","Faster One","Fasthand","Fauna One","Federant","Federo","Felipa","Fenix","Finger Paint","Fira Mono","Fira Sans","Fjalla One","Fjord One","Flamenco","Flavors","Fondamento","Fontdiner Swanky","Forum","Francois One","Freckle Face","Fredericka the Great","Fredoka One","Freehand","Fresca","Frijole","Fruktur","Fugaz One","GFS Didot","GFS Neohellenic","Gabriela","Gafata","Galdeano","Galindo","Gentium Basic","Gentium Book Basic","Geo","Geostar","Geostar Fill","Germania One","Gidugu","Gilda Display","Give You Glory","Glass Antiqua","Glegoo","Gloria Hallelujah","Goblin One","Gochi Hand","Gorditas","Goudy Bookletter 1911","Graduate","Grand Hotel","Gravitas One","Great Vibes","Griffy","Gruppo","Gudea","Gurajada","Habibi","Halant","Hammersmith One","Hanalei","Hanalei Fill","Handlee","Hanuman","Happy Monkey","Headland One","Henny Penny","Herr Von Muellerhoff","Hind","Hind Siliguri","Hind Vadodara","Holtwood One SC","Homemade Apple","Homenaje","IM Fell DW Pica","IM Fell DW Pica SC","IM Fell Double Pica","IM Fell Double Pica SC","IM Fell English","IM Fell English SC","IM Fell French Canon","IM Fell French Canon SC","IM Fell Great Primer","IM Fell Great Primer SC","Iceberg","Iceland","Imprima","Inconsolata","Inder","Indie Flower","Inika","Inknut Antiqua","Irish Grover","Istok Web","Italiana","Italianno","Itim","Jacques Francois","Jacques Francois Shadow","Jaldi","Jim Nightshade","Jockey One","Jolly Lodger","Josefin Sans","Josefin Slab","Joti One","Judson","Julee","Julius Sans One","Junge","Jura","Just Another Hand","Just Me Again Down Here","Kadwa","Kalam","Kameron","Kantumruy","Karla","Karma","Kaushan Script","Kavoon","Kdam Thmor","Keania One","Kelly Slab","Kenia","Khand","Khmer","Khula","Kite One","Knewave","Kotta One","Koulen","Kranky","Kreon","Kristi","Krona One","Kurale","La Belle Aurore","Laila","Lakki Reddy","Lancelot","Lateef","Lato","League Script","Leckerli One","Ledger","Lekton","Lemon","Libre Baskerville","Life Savers","Lilita One","Lily Script One","Limelight","Linden Hill","Lobster","Lobster Two","Londrina Outline","Londrina Shadow","Londrina Sketch","Londrina Solid","Lora","Love Ya Like A Sister","Loved by the King","Lovers Quarrel","Luckiest Guy","Lusitana","Lustria","Macondo","Macondo Swash Caps","Magra","Maiden Orange","Mako","Mallanna","Mandali","Marcellus","Marcellus SC","Marck Script","Margarine","Marko One","Marmelad","Martel","Martel Sans","Marvel","Mate","Mate SC","Maven Pro","McLaren","Meddon","MedievalSharp","Medula One","Megrim","Meie Script","Merienda","Merienda One","Merriweather","Merriweather Sans","Metal","Metal Mania","Metamorphous","Metrophobic","Michroma","Milonga","Miltonian","Miltonian Tattoo","Miniver","Miss Fajardose","Modak","Modern Antiqua","Molengo","Molle","Monda","Monofett","Monoton","Monsieur La Doulaise","Montaga","Montez","Montserrat","Montserrat Alternates","Montserrat Subrayada","Moul","Moulpali","Mountains of Christmas","Mouse Memoirs","Mr Bedfort","Mr Dafoe","Mr De Haviland","Mrs Saint Delafield","Mrs Sheppards","Muli","Mystery Quest","NTR","Neucha","Neuton","New Rocker","News Cycle","Niconne","Nixie One","Nobile","Nokora","Norican","Nosifer","Nothing You Could Do","Noticia Text","Noto Sans","Noto Serif","Nova Cut","Nova Flat","Nova Mono","Nova Oval","Nova Round","Nova Script","Nova Slim","Nova Square","Numans","Nunito","Odor Mean Chey","Offside","Old Standard TT","Oldenburg","Oleo Script","Oleo Script Swash Caps","Open Sans","Open Sans Condensed","Oranienbaum","Orbitron","Oregano","Orienta","Original Surfer","Oswald","Over the Rainbow","Overlock","Overlock SC","Ovo","Oxygen","Oxygen Mono","PT Mono","PT Sans","PT Sans Caption","PT Sans Narrow","PT Serif","PT Serif Caption","Pacifico","Palanquin","Palanquin Dark","Paprika","Parisienne","Passero One","Passion One","Pathway Gothic One","Patrick Hand","Patrick Hand SC","Patua One","Paytone One","Peddana","Peralta","Permanent Marker","Petit Formal Script","Petrona","Philosopher","Piedra","Pinyon Script","Pirata One","Plaster","Play","Playball","Playfair Display","Playfair Display SC","Podkova","Poiret One","Poller One","Poly","Pompiere","Pontano Sans","Poppins","Port Lligat Sans","Port Lligat Slab","Pragati Narrow","Prata","Preahvihear","Press Start 2P","Princess Sofia","Prociono","Prosto One","Puritan","Purple Purse","Quando","Quantico","Quattrocento","Quattrocento Sans","Questrial","Quicksand","Quintessential","Qwigley","Racing Sans One","Radley","Rajdhani","Raleway","Raleway Dots","Ramabhadra","Ramaraja","Rambla","Rammetto One","Ranchers","Rancho","Ranga","Rationale","Ravi Prakash","Redressed","Reenie Beanie","Revalia","Rhodium Libre","Ribeye","Ribeye Marrow","Righteous","Risque","Roboto","Roboto Condensed","Roboto Mono","Roboto Slab","Rochester","Rock Salt","Rokkitt","Romanesco","Ropa Sans","Rosario","Rosarivo","Rouge Script","Rozha One","Rubik","Rubik Mono One","Rubik One","Ruda","Rufina","Ruge Boogie","Ruluko","Rum Raisin","Ruslan Display","Russo One","Ruthie","Rye","Sacramento","Sahitya","Sail","Salsa","Sanchez","Sancreek","Sansita One","Sarala","Sarina","Sarpanch","Satisfy","Scada","Scheherazade","Schoolbell","Seaweed Script","Sevillana","Seymour One","Shadows Into Light","Shadows Into Light Two","Shanti","Share","Share Tech","Share Tech Mono","Shojumaru","Short Stack","Siemreap","Sigmar One","Signika","Signika Negative","Simonetta","Sintony","Sirin Stencil","Six Caps","Skranji","Slabo 13px","Slabo 27px","Slackey","Smokum","Smythe","Sniglet","Snippet","Snowburst One","Sofadi One","Sofia","Sonsie One","Sorts Mill Goudy","Source Code Pro","Source Sans Pro","Source Serif Pro","Special Elite","Spicy Rice","Spinnaker","Spirax","Squada One","Sree Krushnadevaraya","Stalemate","Stalinist One","Stardos Stencil","Stint Ultra Condensed","Stint Ultra Expanded","Stoke","Strait","Sue Ellen Francisco","Sumana","Sunshiney","Supermercado One","Sura","Suranna","Suravaram","Suwannaphum","Swanky and Moo Moo","Syncopate","Tangerine","Taprom","Tauri","Teko","Telex","Tenali Ramakrishna","Tenor Sans","Text Me One","The Girl Next Door","Tienne","Tillana","Timmana","Tinos","Titan One","Titillium Web","Trade Winds","Trocchi","Trochut","Trykker","Tulpen One","Ubuntu","Ubuntu Condensed","Ubuntu Mono","Ultra","Uncial Antiqua","Underdog","Unica One","UnifrakturCook","UnifrakturMaguntia","Unkempt","Unlock","Unna","VT323","Vampiro One","Varela","Varela Round","Vast Shadow","Vesper Libre","Vibur","Vidaloka","Viga","Voces","Volkhov","Vollkorn","Voltaire","Waiting for the Sunrise","Wallpoet","Walter Turncoat","Warnes","Wellfleet","Wendy One","Wire One","Work Sans","Yanone Kaffeesatz","Yantramanav","Yellowtail","Yeseva One","Yesteryear","Zeyada"]}).call(this)},"./node_modules/webpack/buildin/global.js":function(e,t){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch(e){"object"==typeof window&&(o=window)}e.exports=o},"./node_modules/whatwg-fetch/fetch.js":function(e,t,o){"use strict";o.r(t),o.d(t,"Headers",(function(){return p})),o.d(t,"Request",(function(){return b})),o.d(t,"Response",(function(){return E})),o.d(t,"DOMException",(function(){return S})),o.d(t,"fetch",(function(){return x}));var n="URLSearchParams"in self,r="Symbol"in self&&"iterator"in Symbol,i="FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),s="FormData"in self,a="ArrayBuffer"in self;if(a)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(e){return e&&l.indexOf(Object.prototype.toString.call(e))>-1};function u(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function d(e){return"string"!=typeof e&&(e=String(e)),e}function h(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function f(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function m(e){return new Promise((function(t,o){e.onload=function(){t(e.result)},e.onerror=function(){o(e.error)}}))}function g(e){var t=new FileReader,o=m(t);return t.readAsArrayBuffer(e),o}function y(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function v(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:i&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:s&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:n&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():a&&i&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=y(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a&&(ArrayBuffer.prototype.isPrototypeOf(e)||c(e))?this._bodyArrayBuffer=y(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var e=f(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?f(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var e,t,o,n=f(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,o=m(t),t.readAsText(e),o;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),o=new Array(t.length),n=0;n<t.length;n++)o[n]=String.fromCharCode(t[n]);return o.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(e,t){e=u(e),t=d(t);var o=this.map[e];this.map[e]=o?o+", "+t:t},p.prototype.delete=function(e){delete this.map[u(e)]},p.prototype.get=function(e){return e=u(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(u(e))},p.prototype.set=function(e,t){this.map[u(e)]=d(t)},p.prototype.forEach=function(e,t){for(var o in this.map)this.map.hasOwnProperty(o)&&e.call(t,this.map[o],o,this)},p.prototype.keys=function(){var e=[];return this.forEach((function(t,o){e.push(o)})),h(e)},p.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),h(e)},p.prototype.entries=function(){var e=[];return this.forEach((function(t,o){e.push([o,t])})),h(e)},r&&(p.prototype[Symbol.iterator]=p.prototype.entries);var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(e,t){var o,n,r=(t=t||{}).body;if(e instanceof b){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=(o=t.method||this.method||"GET",n=o.toUpperCase(),_.indexOf(n)>-1?n:o),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function w(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var o=e.split("="),n=o.shift().replace(/\+/g," "),r=o.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(r))}})),t}function E(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},v.call(b.prototype),v.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},E.error=function(){var e=new E(null,{status:0,statusText:""});return e.type="error",e};var O=[301,302,303,307,308];E.redirect=function(e,t){if(-1===O.indexOf(t))throw new RangeError("Invalid status code");return new E(null,{status:t,headers:{location:e}})};var S=self.DOMException;try{new S}catch(e){(S=function(e,t){this.message=e,this.name=t;var o=Error(e);this.stack=o.stack}).prototype=Object.create(Error.prototype),S.prototype.constructor=S}function x(e,t){return new Promise((function(o,n){var r=new b(e,t);if(r.signal&&r.signal.aborted)return n(new S("Aborted","AbortError"));var s=new XMLHttpRequest;function a(){s.abort()}s.onload=function(){var e,t,n={status:s.status,statusText:s.statusText,headers:(e=s.getAllResponseHeaders()||"",t=new p,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var o=e.split(":"),n=o.shift().trim();if(n){var r=o.join(":").trim();t.append(n,r)}})),t)};n.url="responseURL"in s?s.responseURL:n.headers.get("X-Request-URL");var r="response"in s?s.response:s.responseText;o(new E(r,n))},s.onerror=function(){n(new TypeError("Network request failed"))},s.ontimeout=function(){n(new TypeError("Network request failed"))},s.onabort=function(){n(new S("Aborted","AbortError"))},s.open(r.method,r.url,!0),"include"===r.credentials?s.withCredentials=!0:"omit"===r.credentials&&(s.withCredentials=!1),"responseType"in s&&i&&(s.responseType="blob"),r.headers.forEach((function(e,t){s.setRequestHeader(t,e)})),r.signal&&(r.signal.addEventListener("abort",a),s.onreadystatechange=function(){4===s.readyState&&r.signal.removeEventListener("abort",a)}),s.send(void 0===r._bodyInit?null:r._bodyInit)}))}x.polyfill=!0,self.fetch||(self.fetch=x,self.Headers=p,self.Request=b,self.Response=E)},"./node_modules/xml-utils/find-tag-by-name.js":function(e,t,o){const n=o("./node_modules/xml-utils/index-of-match.js");e.exports=function(e,t,o){const r=o&&o.debug||!1,i=o&&o.startIndex||0;r&&console.log("starting findTagByName with",t," and ",o);const s=n(e,`<${t}[ >]`,i);if(r&&console.log("start:",s),-1===s)return;const a=e.slice(s+t.length);let l=n(a,"[ /]"+t+">",0);const c=-1===l;c&&(l=n(a,"[ /]>",0));const u=s+t.length+l+1+(c?0:t.length)+1;if(r&&console.log("end:",u),-1===u)return;const d=e.slice(s,u);let h;return h=c?null:d.slice(d.indexOf(">")+1,d.lastIndexOf("<")),{inner:h,outer:d,start:s,end:u}}},"./node_modules/xml-utils/find-tags-by-name.js":function(e,t,o){const n=o("./node_modules/xml-utils/find-tag-by-name.js");e.exports=function(e,t,o){const r=[],i=o&&o.debug||!1;let s,a=o&&o.startIndex||0;for(;s=n(e,t,{debug:i,startIndex:a});)a=s.end,r.push(s);return i&&console.log("findTagsByName found",r.length,"tags"),r}},"./node_modules/xml-utils/get-attribute.js":function(e,t){e.exports=function(e,t,o){const n=o&&o.debug||!1;n&&console.log("getting "+t+" in "+e);const r="object"==typeof e?e.outer:e,i=t+'\\="([^"]*)"';n&&console.log("pattern:",i);const s=new RegExp(i).exec(r);if(n&&console.log("match:",s),s)return s[1]}},"./node_modules/xml-utils/index-of-match.js":function(e,t){e.exports=function(e,t,o){const n=new RegExp(t).exec(e.slice(o));return n?o+n.index:-1}},"./package.json":function(e){e.exports=JSON.parse('{"name":"geoportal-sdk","version":"3.3.6","date":"28/01/2022","SDK2DVersion":"3.3.6","SDK3DVersion":"3.3.6","description":"French Geoportal SDK based on OpenLayers (2D) and iTowns (3D) libraries","main":"dist/2d/GpSDK2D-src.js, dist/3d/GpSDK3d-src.js","module":"src/SDK2D.js, src/SDK3D.js","scripts":{"setup":"npm install","clean":"echo \\"Warning: target not yet implemented!\\" && exit 0","check":"eslint src/","test:serve":"webpack-dev-server --config webpack.test.serve.js","doc:serve":"webpack-dev-server --config webpack.config.3d --content-base jsdoc/ --port 9001 --open","sample:3d:serve":"webpack-dev-server --config webpack.config.3d --mode=development --https --open-page samples/index-3d-map.html --content-base . --output-public-path \'/dist/3d/\' --port 9001 --open","sample:2d:serve":"webpack-dev-server --config webpack.config.2d --mode=development --https --open-page samples/index-2d-map.html --content-base . --output-public-path \'/dist/2d/\' --port 9001 --open","stat:2d":"npm run build:2d:src -- --profile --json > map-2d.json","stat:3d":"npm run build:3d:src -- --profile --json > map-3d.json","clean:chunk":"rm dist/*/chunk*","build":"npm-run-all --print-label --print-name build:*:*","build:dev":"npm-run-all --print-label --print-name build:*:dev","build:prod":"npm-run-all --print-label --print-name build:*:prod","build:src":"npm-run-all --print-label --print-name build:*:src","build:3d":"npm-run-all --print-label --print-name build:3d:*","build:3d:src":"webpack --config webpack.config.3d --mode=none && npm run clean:chunk","build:3d:dev":"webpack --config webpack.config.3d --mode=development && npm run clean:chunk","build:3d:prod":"webpack --config webpack.config.3d --mode=production && npm run clean:chunk","build:2d":"npm-run-all --print-label --print-name build:2d:*","build:2d:src":"webpack --config webpack.config.2d --mode=none && npm run clean:chunk","build:2d:dev":"webpack --config webpack.config.2d --mode=development && npm run clean:chunk","build:2d:prod":"webpack --config webpack.config.2d --mode=production && npm run clean:chunk"},"repository":{"type":"git","url":"https://github.com/IGNF/geoportal-sdk.git"},"keywords":["openlayers","itowns","geoportail","webservice","javascript"],"author":"IGNF","license":"CECILL-B","bugs":{"url":"https://github.com/IGNF/geoportal-sdk/issues"},"homepage":"https://geoservices.ign.fr/documentation/utilisation_web/sdk.html","dependencies":{"whatwg-fetch":"3.0.0"},"devDependencies":{"@babel/core":"^7.8.3","@babel/plugin-transform-runtime":"^7.8.3","@babel/preset-env":"^7.8.3","@mapbox/mapbox-gl-style-spec":"13.20.1","babel-loader":"^8.0.5","chai":"^4.2.0","chalk":"^4.0.0","copy-webpack-plugin":"^5.1.1","core-js":"^3.6.4","css-loader":"^3.4.2","eslint":"^6.8.0","eslint-config-standard":"^14.1.1","eslint-loader":"^4.0.0","eslint-plugin-import":"^2.17.2","eslint-plugin-node":"^11.1.0","eslint-plugin-promise":"^4.1.1","eslint-plugin-standard":"^4.0.0","exports-loader":"^0.7.0","expose-loader":"^0.7.5","fs-extra":"^9.0.0","geoportal-extensions-itowns":"2.3.4","geoportal-extensions-openlayers":"3.2.7","handlebars":"^4.7.5","handlebars-layouts":"^3.1.4","html-webpack-plugin":"^4.0.4","itowns":"2.33.0","jsdoc-webpack-plugin":"^0.3.0","loglevel":"1.6.6","mini-css-extract-plugin":"^0.9.0","mocha":"^7.1.1","mocha-loader":"^5.0.0","npm-run-all":"^4.1.5","ol":"6.9.0","ol-mapbox-style":"6.7.0","optimize-css-assets-webpack-plugin":"^5.0.1","path":"^0.12.7","proj4":"2.7.2","replace-bundle-webpack-plugin":"^1.0.0","requirejs":"^2.3.6","responsive-loader":"^1.2.0","shelljs":"^0.8.3","speed-measure-webpack-plugin":"^1.3.0","string-template":"^1.0.0","style-loader":"^1.1.3","terser-webpack-plugin":"^2.0.0","three":"0.127.0","three.meshline":"1.2.0","url-loader":"^4.0.0","webpack":"^4.41.5","webpack-cli":"^3.3.10","webpack-dev-server":"^3.10.1","webpack-merge":"^4.2.1","webpack-node-externals":"^1.7.2"}}')},"./src/OpenLayers/CSS/OlMap.css":function(e,t,o){},"./src/SDK2D.js":function(e,t,o){"use strict";o.r(t),o.d(t,"Services",(function(){return ss})),o.d(t,"Error",(function(){return as})),o.d(t,"Helper",(function(){return ls})),o.d(t,"Protocols",(function(){return cs})),o.d(t,"Logger",(function(){return Mo.a})),o.d(t,"servicesDate",(function(){return us})),o.d(t,"servicesVersion",(function(){return ds})),o.d(t,"LayerUtils",(function(){return en})),o.d(t,"ProxyUtils",(function(){return Io})),o.d(t,"ColorUtils",(function(){return fr})),o.d(t,"MathUtils",(function(){return Un})),o.d(t,"olUtils",(function(){return Wo})),o.d(t,"olExtVersion",(function(){return hs})),o.d(t,"olExtDate",(function(){return ps})),o.d(t,"olExtended",(function(){return ms})),o.d(t,"Map",(function(){return s})),o.d(t,"sdkVersion",(function(){return zs})),o.d(t,"sdkDate",(function(){return Vs}));var n=o("./package.json"),r=o("./node_modules/loglevel/lib/loglevel.js"),i={getLogger:function(e){"true".match(/true/)?r.disableAll():r.enableAll();var t=e||"default";return r.getLogger(t)}},s={load:function(e,t){var o=i.getLogger("MapLoader.load");if(!e)throw new Error("missing parameter div !");if("string"==typeof e&&(e=document.getElementById(e)),!e)throw new Error("HTML element with id ["+e+"] not found.");t||(t={}),t.hasOwnProperty("viewMode")||(t.viewMode="2d");var n=null,r=null;null!==this.__class2d&&"function"==typeof this.__class2d&&(n=this.__class2d),null!==this.__class3d&&"function"==typeof this.__class3d&&(r=this.__class3d);var s=null;switch(t.viewMode){case"2d":if(o.trace("construction de la carte 2D"),null===n||"function"!=typeof n)throw new Error("library ol is not loaded !");s=new n({div:e,mapOptions:t});break;case"3d":if(o.trace("construction du globe 3D"),null===r||"function"!=typeof r)throw new Error("library itowns is not loaded !");s=new r({div:e,mapOptions:t});break;default:throw new Error("not supported view mode")}return s}},a=o("./node_modules/ol/proj.js"),l=o("./node_modules/geoportal-extensions-openlayers/package.json"),c=(o("./node_modules/geoportal-extensions-openlayers/src/Common/CSS/GPboostRelief.css"),o("./node_modules/geoportal-extensions-openlayers/src/Common/CSS/GPdrawing.css"),o("./node_modules/geoportal-extensions-openlayers/src/Common/CSS/GPelevationPath.css"),o("./node_modules/geoportal-extensions-openlayers/src/Common/CSS/GPgeneralWidget.css"),o("./node_modules/geoportal-extensions-openlayers/src/Common/CSS/GPgetFeatureInfo.css"),o("./node_modules/geoportal-extensions-openlayers/src/Common/CSS/GPisochron.css"),o("./node_modules/geoportal-extensions-openlayers/src/Common/CSS/GPlayerSwitcher.css"),o("./node_modules/geoportal-extensions-openlayers/src/Common/CSS/GPlocation.css"),o("./node_modules/geoportal-extensions-openlayers/src/Common/CSS/GPmeasureArea.css"),o("./node_modules/geoportal-extensions-openlayers/src/Common/CSS/GPmeasureAzimuth.css"),o("./node_modules/geoportal-extensions-openlayers/src/Common/CSS/GPmeasureLength.css"),o("./node_modules/geoportal-extensions-openlayers/src/Common/CSS/GPmeasureToolTip.css"),o("./node_modules/geoportal-extensions-openlayers/src/Common/CSS/GPmousePosition.css"),o("./node_modules/geoportal-extensions-openlayers/src/Common/CSS/GPreverseGeocoding.css"),o("./node_modules/geoportal-extensions-openlayers/src/Common/CSS/GProute.css"),o("./node_modules/geoportal-extensions-openlayers/src/Common/CSS/GPsearchEngine.css"),o("./node_modules/geoportal-extensions-openlayers/src/Common/CSS/GPwaiting.css"),o("./node_modules/geoportal-extensions-openlayers/src/OpenLayers/CSS/GPgeneralWidgetOpenLayers.css"),o("./node_modules/geoportal-extensions-openlayers/src/OpenLayers/CSS/Controls/Attribution/GPattributionOpenLayers.css"),o("./node_modules/geoportal-extensions-openlayers/src/OpenLayers/CSS/Controls/Drawing/GPdrawingOpenLayers.css"),o("./node_modules/geoportal-extensions-openlayers/src/OpenLayers/CSS/Controls/Editor/GPeditorOpenLayers.css"),o("./node_modules/geoportal-extensions-openlayers/src/OpenLayers/CSS/Controls/ElevationPath/GPelevationPathOpenLayers.css"),o("./node_modules/geoportal-extensions-openlayers/src/OpenLayers/CSS/Controls/GetFeatureInfo/GPgetFeatureInfoOpenLayers.css"),o("./node_modules/geoportal-extensions-openlayers/src/OpenLayers/CSS/Controls/Isochrone/GPisochronOpenLayers.css"),o("./node_modules/geoportal-extensions-openlayers/src/OpenLayers/CSS/Controls/LayerImport/GPimportOpenLayers.css"),o("./node_modules/geoportal-extensions-openlayers/src/OpenLayers/CSS/Controls/LayerSwitcher/GPlayerSwitcherOpenLayers.css"),o("./node_modules/geoportal-extensions-openlayers/src/OpenLayers/CSS/Controls/LocationSelector/GPlocationOpenLayers.css"),o("./node_modules/geoportal-extensions-openlayers/src/OpenLayers/CSS/Controls/Measures/GPmeasureAreaOpenLayers.css"),o("./node_modules/geoportal-extensions-openlayers/src/OpenLayers/CSS/Controls/Measures/GPmeasureAzimuthOpenLayers.css"),o("./node_modules/geoportal-extensions-openlayers/src/OpenLayers/CSS/Controls/Measures/GPmeasureLengthOpenLayers.css"),o("./node_modules/geoportal-extensions-openlayers/src/OpenLayers/CSS/Controls/MousePosition/GPmousePositionOpenLayers.css"),o("./node_modules/geoportal-extensions-openlayers/src/OpenLayers/CSS/Controls/ReverseGeocoding/GPreverseGeocodingOpenLayers.css"),o("./node_modules/geoportal-extensions-openlayers/src/OpenLayers/CSS/Controls/Route/GProuteOpenLayers.css"),o("./node_modules/geoportal-extensions-openlayers/src/OpenLayers/CSS/Controls/SearchEngine/GPsearchEngineOpenLayers.css"),o("./node_modules/geoportal-extensions-openlayers/src/OpenLayers/CSS/Controls/ToolBoxMeasure/GPtoolBoxMeasureOpenLayers.css"),o("./node_modules/ol/Overlay.js")),u=o("./node_modules/ol/source/VectorTile.js"),d=o("./node_modules/ol/source/Vector.js"),h=o("./node_modules/ol/source/TileWMS.js"),p=o("./node_modules/ol/source/WMTS.js"),f=o("./node_modules/ol/source/ImageWMS.js"),m=o("./node_modules/ol/interaction/Select.js"),g=o("./node_modules/ol/interaction/Modify.js"),y=o("./node_modules/ol/interaction/Draw.js"),v={getLogger:function(e){"true".match(/true/)?r.disableAll():r.enableAll();var t=e||"default";return r.getLogger(t)}},_={PARAM_MISSING:"Parameter(s) '%var%' missing",PARAM_EMPTY:"Parameter(s) '%var%' empty",PARAM_TYPE:"Wrong type(s) for parameter(s) '%var%'",PARAM_FORMAT:"Parameter(s) '%var%' not correctly formatted",PARAM_NOT_SUPPORT:"Value(s) for parameter(s) '%var%' not supported",PARAM_NOT_SUPPORT_NODEJS:"Value(s) for parameter(s) '%var%' not supported to NodeJS",PARAM_UNKNOWN:"Value(s) for parameter(s) '%var%' unknown",SERVICE_REQUEST_BUILD:"An error occurred during the request building of the service",SERVICE_REQUEST_EMPTY:"The request sent to the service is empty",SERVICE_RESPONSE_EXCEPTION:"The service returned an exception : '%var%'",SERVICE_RESPONSE_EXCEPTION_2:"The service returned an exception",SERVICE_RESPONSE_ANALYSE:"An error occurred while parsing the response '%var%' of the service",SERVICE_RESPONSE_ANALYSE_2:"An unknown error occurred while parsing the response",SERVICE_RESPONSE_EMPTY:"The response of the service is empty",SERVICE_RESPONSE_EMPTY_2:"The response from the service could not be analyzed or is empty",SERVICE_RESPONSE_FORMAT:"The format of the service response is not supported (handled format(s) : '%var%')",SERVICE_RESPONSE_FORMAT_2:"The format of the service response is not supported",SERVICE_RESPONSE_FORMAT_3:"No suggestion matching the search",CLASS_CONSTRUCTOR:"'%var%' constructor cannot be called as a function.",getMessage:function(e,t){if(0===Object.keys(arguments).length)return"Message indefined !";var o=Array.prototype.slice.call(arguments),n=o.shift(),r=o,i=this[n];try{i=Array.isArray(r)&&r.length>0?i.replace("%var%",r.join(" - ")):i.replace("%var%","%var% (not specified)")}catch(e){}return i}};function b(e){if(!(this instanceof b))throw new TypeError("ErrorService constructor cannot be called as a function.");var t=e;"string"==typeof e||e instanceof String?(this.message=e,this.status=-1,this.type=b.TYPE_UNKERR):(this.message=t.message||"undefined!?",this.type=t.type,this.status=t.status||-1),this.name="ErrorService",this.stack=(new Error).stack}b.TYPE_SRVERR="SERVICE_ERROR",b.TYPE_USEERR="USAGE_ERROR",b.TYPE_UNKERR="UNKNOWN_ERROR",b.prototype=Object.create(Error.prototype,{constructor:{value:b,writable:!0,configurable:!0}});var w=b,E={normalyzeParameters:function(e){var t=null;if(e){var o=[];for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];r||(r=""),o.push(n+"="+r)}t=o.join("&")}return t},normalyzeUrl:function(e,t,o){var n=e;if(e){var r=e.indexOf("?");-1===r&&(n+="?"),-1!==r&&r!==e.length-1&&(n+="&")}return t&&(n+="string"==typeof t?t:this.normalyzeParameters(t)),o&&(n=encodeURIComponent(n)),n},indent:function(e,t){return new Array((e||0)+1).join("\t")+t}},O=o("./node_modules/es6-promise/dist/es6-promise.js"),S=o.n(O);function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var C,j={call:function(e){var t=v.getLogger("XHR");if(t.trace("[XHR::call()]"),S.a.polyfill(),!e.url)throw new Error("missing parameter : url is not defined !");if(!e.method)throw new Error("missing parameter : method is not defined !");e.format||(e.format="text");var o={};switch(o.url=e.url,o.data=e.data?e.data:null,o.method=e.method,o.timeOut=e.timeOut||0,o.scope=e.scope||this,o.proxy=e.proxy||null,o.content=e.content||null,o.headers=e.headers||{referer:"http://localhost"},e.method){case"DELETE":case"GET":break;case"PUT":case"POST":o.content=e.content?e.content:"application/x-www-form-urlencoded",o.headers=e.headers?e.headers:{referer:"http://localhost"};break;case"HEAD":case"OPTIONS":throw new Error("HTTP method not yet supported !");default:throw new Error("HTTP method unknown !")}switch(e.format){case"text":this.__call(o).then((function(o){t.trace(o),e.onResponse.call(this,o)})).catch((function(t){e.onFailure.call(this,t)}));break;case"json":this.__callJSON(o).then((function(o){t.trace(o),e.onResponse.call(this,o)})).catch((function(t){e.onFailure.call(this,t)}));break;case"xml":this.__callXML(o).then((function(o){t.trace(o),e.onResponse.call(this,o)})).catch((function(t){e.onFailure.call(this,t)}));break;default:throw new Error("This output Format is not yet supported !")}},__call:function(e){var t=v.getLogger("XHR");return t.trace("[XHR::__call()]"),new Promise((function(n,r){var i="POST"===e.method||"PUT"===e.method?1:0;e.data&&("object"===x(e.data)&&Object.keys(e.data).length||"string"==typeof e.data&&e.data.length)&&!i&&(e.url=E.normalyzeUrl(e.url,e.data)),t.trace("URL = ",e.url);var s=null;if("undefined"==typeof window){var a=o("node-fetch"),l={headers:{Referer:"https://localhost"}};return e.data&&"string"==typeof e.data&&i&&(l={method:e.method,body:e.data,headers:{"Content-Type":e.content,Referer:"https://localhost"}}),a(e.url,l).then((function(e){if(e.ok)n(e.text());else{var t="Errors Occured on Http Request (status : '"+e.statusText+"' | url : '"+e.url+"')",o=e.status;r({message:t,status:o})}})).catch((function(e){r({message:e,status:-1})}))}if(window.XMLHttpRequest){t.trace("XMLHttpRequest"),(s=new XMLHttpRequest).open(e.method,e.url,!0),s.overrideMimeType=e.content;var c=null;e.timeOut>0&&(t.trace("XHR - TimeOut actif !"),c=window.setTimeout((function(){r({message:"TimeOut Occured on Http Request with XMLHttpRequest !",status:-1})}),e.timeOut)),i&&(t.trace("data = ",e.data),s.setRequestHeader("Content-type",e.content)),s.onerror=function(e){console.log(e),r(new Error("Errors Occured on Http Request with XMLHttpRequest !"))},s.ontimeout=function(e){console.log(e),r(new Error("TimeOut Occured on Http Request with XMLHttpRequest !"))},s.onreadystatechange=function(e){if(4===s.readyState)if(200===s.status)window.clearTimeout(c),n(s.response);else{var t="Errors Occured on Http Request (status : '"+e.target.statusText+"' | url : '"+e.target.responseURL+"')",o=e.target.status;r({message:t,status:o})}};var u=e.data&&i?e.data:null;s.send(u)}else{if(!window.XDomainRequest)throw new Error("CORS not supported");t.trace("XDomainRequest"),(s=new XDomainRequest).open(e.method,e.url),s.overrideMimeType=e.content,e.timeOut>0&&(s.timeout=e.timeout,t.trace("XHR - TimeOut actif !")),i&&s.setRequestHeader("Content-type",e.content),s.onerror=function(){r(new Error("Errors Occured on Http Request with XMLHttpRequest !"))},s.ontimeout=function(){r(new Error("TimeOut Occured on Http Request with XMLHttpRequest !"))},s.onload=function(e){if(200===s.status)n(s.responseText);else{var t="Errors Occured on Http Request (status : '"+e.target.statusText+"' | url : '"+e.target.responseURL+"')",o=e.target.status;r({message:t,status:o})}};var d=e.data&&i?e.data:null;s.send(d)}}))},__callJSON:function(e){return this.__call(e).then(JSON.parse).catch((function(t){console.log("_callJSON failed on : ",e.url,t)}))},__callXML:function(e){return this.__call(e).then((function(e){var t;"undefined"==typeof window?t=(new(0,o("xmldom").DOMParser)).parseFromString(e,"text/xml"):window.DOMParser?t=(new window.DOMParser).parseFromString(e,"text/xml"):((t=new window.ActiveXObject("Microsoft.XMLDOM")).async=!1,t.loadXML(e));return t})).catch((function(t){console.log("__callXML failed on : ",e.url,t)}))}},P={uuid:(C=Math.floor(Date.now()),function(){return C++}),call:function(e){var t=v.getLogger("JSONP");if(t.trace("[JSONP::call ()]"),!e)throw t.error("missing parameter : options !"),new Error("missing parameter : options !");if(!e.url)throw t.error("missing parameter : options.url !"),new Error("missing parameter : options.url !");if(e.timeOut||(t.info("setting 'options.timeOut' default value"),e.timeOut=0),!e.onResponse)throw t.error("missing parameter : options.onResponse !"),new Error("missing parameter : options.onResponse !");var o="string"==typeof e.callbackSuffix?e.callbackSuffix:this.uuid(),n=!1,r=!1,i=e.url.indexOf("callback=");if(-1!==i){n=!0;var s=e.url.indexOf("&",i);-1===s&&(s=e.url.length);var a=e.url.substring(i+9,s);a&&(r=!0,e.callbackName=a,t.info("setting 'options.callbackName' value ("+e.callbackName+") from 'options.url' parameter"))}if(!n){var l=e.url.indexOf("?");-1===l?e.url=e.url+"?callback=":l===e.url.length?e.url=e.url+"callback=":e.url=e.url+"&callback=",t.info("setting callback default key in 'options.url' : "+e.url)}var c=!!e.callbackName||r;if(r||(e.callbackName||(t.info("setting 'options.callbackName' default value"),e.callbackName="callback",(o||""===o)&&(e.callbackName+=o)),e.url=e.url.replace("callback=","callback="+e.callbackName),t.info("setting callback function name in 'options.url' : "+e.url)),e.onTimeOut||(t.info("setting 'options.onTimeOut' default value"),e.onTimeOut=function(){console.log("TimeOut while invoking url : "+e.url)}),!c){var u=this,d=null;e.timeOut>0&&(d=window.setTimeout((function(){window[e.callbackName]=function(){},e.onTimeOut(),u._deleteScript(o)}),e.timeOut)),window[e.callbackName]=function(t){window.clearTimeout(d),e.onResponse(t),u._deleteScript(o)}}this._createScript(o,e.url)},_createScript:function(e,t){var o,n=document.getElementById("results"+e);(o=document.createElement("script")).setAttribute("type","text/javascript"),o.setAttribute("src",t),o.setAttribute("charset","UTF-8"),o.setAttribute("id","results"+e),o.setAttribute("async","true");var r=document.documentElement||document.getElementsByTagName("head")[0];null===n?r.appendChild(o):r.replaceChild(o,n)},_deleteScript:function(e){var t=document.getElementById("results"+e);if(t){var o=t.parentNode||document.documentElement;if(!o)return;o.removeChild(t)}}},T={send:function(e){var t=e||{method:"GET",protocol:"XHR",timeOut:0,format:null,wrap:!0,nocache:!0,output:"json",callback:null,callbackSuffix:null};if("undefined"!=typeof window||"JSONP"!==e.protocol){if("XHR"===e.protocol||"json"===e.format?t.wrap=!1:"JSONP"===e.protocol&&"xml"===e.format&&(t.wrap=!0),t.callback=null,t.output=t.wrap?"json":null,t.wrap){var o={};o.output=t.output,o.callback=t.callback,delete o.callback,t.url=E.normalyzeUrl(e.url,o)}switch(t.protocol){case"XHR":"GET"===e.method&&e.nocache&&(t.url=E.normalyzeUrl(t.url,{t:(new Date).getTime()})),j.call(t);break;case"JSONP":t.data&&(t.url=E.normalyzeUrl(t.url,t.data)),P.call(t);break;default:throw new Error("protocol not supported (XHR|JSONP) !")}}else console.log("Value (s) for parameter (s) 'protocol=JSONP (instead use XHR)' not supported to NodeJS")}},A={ssl:!0,url:function(e,t){return(!1===A.ssl?"http://":"https://")+"wxs.ign.fr".concat("/",e,t)},Alti:{_key:{"elevation-json":"/alti/rest/elevation.json","elevation-xml":"/alti/rest/elevation.xml","profil-json":"/alti/rest/elevationLine.json","profil-xml":"/alti/rest/elevationLine.xml",wps:"/alti/wps"},url:function(e){return{"elevation-json":A.url(e,this._key["elevation-json"]),"elevation-xml":A.url(e,this._key["elevation-xml"]),"profil-json":A.url(e,this._key["profil-json"]),"profil-xml":A.url(e,this._key["profil-xml"]),wps:A.url(e,this._key.wps)}}},ProcessIsoCurve:{_key:{"iso-json":"/isochrone/isochrone.json","iso-xml":"/isochrone/isochrone.xml"},url:function(e){return{"iso-json":A.url(e,this._key["iso-json"]),"iso-xml":A.url(e,this._key["iso-xml"])}}},AutoComplete:{_key:"/ols/apis/completion",url:function(e){return A.url(e,this._key)}},ReverseGeocode:{_key:"/geoportail/ols",url:function(e){return A.url(e,this._key)}},AutoConf:{_key:{apiKey:"/autoconf",apiKeys:"/autoconf?keys=%KEYS%",aggregate:"/autoconf/id/"},url:function(e){var t="";if(Array.isArray(e)&&e.length>0){t=e[0];for(var o=1;o<e.length;o++)t+=","+e[o]}return{apiKey:A.url(e,this._key.apiKey),apiKeys:A.url(e[0],this._key.apiKeys).replace("%KEYS%",t),aggregate:A.url(e,this._key.aggregate)}}},Geocode:{_key:"/geoportail/ols",url:function(e){return A.url(e,this._key)}},Route:{_key:"/geoportail/itineraire/rest/1.0.0/route",url:function(e){return A.url(e,this._key)}}},M=A,I=o("./node_modules/geoportal-access-lib/package.json");function R(e){if(!(this instanceof R))throw new TypeError(_.getMessage("CLASS_CONSTRUCTOR"));for(var t in this.logger=v.getLogger("CommonService"),this.logger.trace("[Constructeur CommonService (options)]"),this.options={protocol:"XHR",ssl:!0,proxyURL:"",callbackSuffix:null,httpMethod:"GET",timeOut:0,rawResponse:!1,scope:this,onSuccess:function(e){console.log("onSuccess - la reponse est la suivante : ",e)},onFailure:function(e){200!==e.status&&e.status?console.log("onFailure - Erreur (",e.status,") : ",e.message):console.log("onFailure : ",e.message)}},e)e.hasOwnProperty(t)&&(this.options[t]=e[t]);if(!this.options.apiKey&&!this.options.serverUrl)throw new Error(_.getMessage("PARAM_MISSING","apiKey","serverUrl"));if(this.options.rawResponse&&!this.options.onSuccess&&(this.options.onSuccess=function(e){console.log("onSuccess - la rÃ©ponse brute du service est la suivante : ",e)}),!!(null===this.options.onSuccess||"function"!=typeof this.options.onSuccess))throw new Error(_.getMessage("PARAM_MISSING","onSuccess()"));if(!this.options.serverUrl){M.ssl=this.options.ssl;var o=M[this.CLASSNAME].url(this.options.apiKey);"string"==typeof o?this.options.serverUrl=o:this.logger.trace("URL par defaut Ã  determiner au niveau du composant...")}switch(this.options.httpMethod="string"==typeof e.httpMethod?e.httpMethod.toUpperCase():"GET",this.options.httpMethod){case"POST":case"GET":break;case"PUT":case"DELETE":case"HEAD":case"OPTIONS":throw new Error(_.getMessage("PARAM_NOT_SUPPORT","httpMethod"));default:throw new Error(_.getMessage("PARAM_UNKNOWN","httpMethod"))}switch(this.options.protocol="string"==typeof e.protocol?e.protocol.toUpperCase():"XHR",this.options.protocol){case"JSONP":case"XHR":break;default:throw new Error(_.getMessage("PARAM_UNKNOWN","protocol"))}if("undefined"==typeof window&&"JSONP"===this.options.protocol)throw new Error(_.getMessage("PARAM_NOT_SUPPORT_NODEJS","protocol=JSONP (instead use XHR)"));"JSONP"===this.options.protocol&&(this.options.httpMethod="GET"),this.options.nocache=e.nocache||!1,this.options.outputFormat=null,this.request=null,this.response=null}R.prototype={constructor:R,call:function(){this.logger.trace("CommonService::call ()");var e=this;function t(t){this.logger.trace("CommonService::onBuildRequest : ",t),this.callService.call(e,r,o)}function o(t){this.logger.trace("CommonService::onCallService : ",t),this.analyzeResponse.call(e,r,n)}function n(e){if(this.logger.trace("CommonService::onAnalyzeResponse : ",e),!e)return r.call(this,new w("Analyse de la reponse en Ã©chec !?"));this.options.onSuccess.call(this,e)}function r(e){this.logger.trace("CommonService::onError()");var t=e;t instanceof w||(t=new w(e.message)),this.options.onFailure.call(this,t)}(function(){this.logger.trace("CommonService::run ()"),this.buildRequest.call(e,r,t)}).call(e)},buildRequest:function(e,t){this.logger.error("overwritten method !"),e&&e.call(this,"This method must be overwritten !"),t.call(this,"This method must be overwritten !")},callService:function(e,t){var o=null,n=this.request,r=!(!this.options.proxyURL||"XHR"!==this.options.protocol);this.options.serverUrl=E.normalyzeUrl(this.options.serverUrl,{"gp-access-lib":I.version},!1),r&&("GET"===this.options.httpMethod&&(o=this.options.proxyURL+E.normalyzeUrl(this.options.serverUrl,this.request,!0),n=null),"POST"===this.options.httpMethod&&(o=this.options.proxyURL+E.normalyzeUrl(this.options.serverUrl,null,!0),n=this.request));var i=this,s={url:o||this.options.serverUrl,method:this.options.httpMethod,protocol:this.options.protocol,timeOut:this.options.timeOut||0,format:this.options.outputFormat,nocache:this.options.nocache||!1,wrap:"XHR"!==this.options.protocol,callbackSuffix:this.options.callbackSuffix,data:n,headers:null,content:this.options.contentType||"application/xml",scope:this.options.scope||this,onResponse:function(o){i.logger.trace("callService::onResponse()");var n=null;if("XHR"===i.options.protocol&&(i.logger.trace("Response XHR",o),n=o),"JSONP"===i.options.protocol){if(i.logger.trace("Response JSON",o),!o)return void e.call(i,new w("Le contenu de la reponse est vide !?"));if(o.http){if(200!==o.http.status)return void e.call(i,new w({status:o.http.status,message:o.http.error,type:w.TYPE_SRVERR}));n=o.xml,i.options.rawResponse&&(n=o)}else n=o}if("function"==typeof i.options.onBeforeParse){var r=i.options.onBeforeParse(n);"string"==typeof r&&(n=r)}i.response=n,t.call(i,n)},onFailure:function(t){i.logger.trace("callService::onFailure()"),t.type=w.TYPE_SRVERR,e.call(i,new w(t))},onTimeOut:function(){i.logger.trace("callService::onTimeOut()"),e.call(i,new w("TimeOut!"))}};T.send(s)},analyzeResponse:function(e,t){this.logger.error("overwritten method !"),e&&e.call(this,"This method must be overwritten !"),t.call(this,"This method must be overwritten !")}};var L=R;function k(e){if(!(this instanceof k))throw new TypeError("AltiRequest constructor cannot be called as a function.");this.logger=v.getLogger(),this.logger.trace("[Constructeur AltiRequest ()]"),this.options=e||{},this.positions=this.options.positions||[],this.delimiter=this.options.delimiter||"|",this.indent=this.options.indent||!1,this.crs=this.options.crs||"CRS:84",this.format=this.options.format||"json"}k.CLASSNAME="AltiRequest",k.prototype={constructor:k,setPositions:function(e){for(var t=[],o=0;o<e.length;o++){var n=e[o];n.lon&&n.lat&&t.push(n)}this.positions=t},getPositions:function(e){if(!e)return this.positions;var t=this.positions.length-1;return e>t||e<t?(this.logger.warn("index out of range !"),this.positions):this.positions[e]},addPositions:function(e){for(var t=0;t<e.length;t++){var o=e[t];o.lon&&o.lat&&this.positions.push(e[t])}},getLon:function(){for(var e=[],t=0;t<this.positions.length;t++)e.push(this.positions[t].lon);return this.logger.trace(e),e.join(this.delimiter)},getLat:function(){for(var e=[],t=0;t<this.positions.length;t++)e.push(this.positions[t].lat);return this.logger.trace(e),e.join(this.delimiter)}},k.prototype.getData=function(){var e=[];return e.push({k:"lon",v:this.getLon()}),e.push({k:"lat",v:this.getLat()}),e.push({k:"delimiter",v:this.delimiter}),e.push({k:"indent",v:this.indent}),e.push({k:"crs",v:this.crs}),e.push({k:"format",v:this.format}),e};var G=k;function N(e){if(!(this instanceof N))throw new TypeError("AltiElevationRequest constructor cannot be called as a function.");this.CLASSNAME="AltiElevationRequest",G.apply(this,arguments),this.logger=v.getLogger(),this.logger.trace("[Constructeur AltiElevationRequest ()]"),this.zonly=this.options.zonly||!1}N.prototype=Object.create(G.prototype,{zonly:{get:function(){return this._zonly},set:function(e){this._zonly=e}}}),N.prototype.constructor=N,N.prototype.getData=function(){var e=[];return e.push({k:"lon",v:this.getLon()}),e.push({k:"lat",v:this.getLat()}),e.push({k:"indent",v:this.indent}),e.push({k:"crs",v:this.crs}),e.push({k:"zonly",v:this.zonly}),e.push({k:"format",v:this.format}),e};var D=N;function F(e){if(!(this instanceof F))throw new TypeError("AltiProfilRequest constructor cannot be called as a function.");this.CLASSNAME="AltiProfilRequest",G.apply(this,arguments),this.logger=v.getLogger(),this.logger.trace("[Constructeur AltiProfilRequest ()]"),this.sampling=this.options.sampling||3}F.prototype=Object.create(G.prototype,{sampling:{get:function(){return this._sampling},set:function(e){this._sampling=e}}}),F.prototype.constructor=F,F.prototype.getData=function(){var e=[];return e.push({k:"lon",v:this.getLon()}),e.push({k:"lat",v:this.getLat()}),e.push({k:"indent",v:this.indent}),e.push({k:"crs",v:this.crs}),e.push({k:"sampling",v:this.sampling}),e.push({k:"format",v:this.format}),e};var U=F;function B(e){if(this.logger=v.getLogger("AltiRequestREST"),this.logger.trace("[Constructeur AltiRequestREST ()]"),!(this instanceof B))throw new TypeError("AltiRequestREST constructor cannot be called as a function.");if(this.options=e||{},!this.options)throw new Error(_.getMessage("PARAM_EMPTY","options"));if(!this.options.type)throw new Error(_.getMessage("PARAM_EMPTY","type (Elevation or Profil)"));switch(this.DataObject=null,this.options.type){case"Elevation":this.DataObject=new D(this.options.param);break;case"Profil":this.DataObject=new U(this.options.param);break;default:throw new Error(_.getMessage("PARAM_TYPE","type (Elevation or Profil)"))}this.method=this.options.method||"GET"}B.prototype={requestString:null,constructor:B,template:{get:{value:"lon=__LON__&lat=__LAT__&indent=__INDENT__&crs='__CRS__'",input:{point:"&zonly=__ZONLY__",profil:"&sampling=__SAMPLING__"}},post:{value:"lon=__LON__\nlat=__LAT__\nindent=__INDENT__\ncrs='__CRS__'\n",input:{point:"zonly=__ZONLY__",profil:"sampling=__SAMPLING__"}}},processRequestString:function(){this.logger.trace("AltiRequestREST::processRequestString ()");var e="";return"POST"===this.method?e=this.template.post.value:"GET"===this.method&&(e=this.template.get.value),e=(e=(e=(e=e.replace(/__LON__/g,this.DataObject.getLon())).replace(/__LAT__/g,this.DataObject.getLat())).replace(/__INDENT__/g,this.DataObject.indent)).replace(/__CRS__/g,this.DataObject.crs),e+=this.__addDataInputs(),this.logger.trace("traduction tmpl",e),this.requestString=e,this.requestString},__addDataInputs:function(){var e;if(this.logger.trace("AltiRequestREST::addDataInput ()"),"POST"===this.method)e=this.template.post;else{if("GET"!==this.method)throw new Error("No other HTTP method supported by the service !");e=this.template.get}if("AltiElevationRequest"===this.DataObject.CLASSNAME)return e.input.point.replace(/__ZONLY__/g,this.DataObject.zonly);if("AltiProfilRequest"===this.DataObject.CLASSNAME)return e.input.profil.replace(/__SAMPLING__/g,this.DataObject.sampling);throw new Error("No other object supported than elevation or profil !?")}};var z=B;function V(e){if(this.logger=v.getLogger(),this.logger.trace("[Constructeur WPS()]"),!(this instanceof V))throw new TypeError("WPS constructor cannot be called as a function.");if(this.options=e||{},this.DataObject=this.options.data,!this.DataObject)throw new TypeError("This data object is not defined !");this.paramservice=this.options.param.service||"WPS",this.paramversion=this.options.param.version||"1.0.0",this.paramidentifier=this.options.param.identifier||"gs:WPS",this.paramrawdataoutput=this.options.param.rawdataoutput||"result",this.paramrequest=this.options.param.request||"Execute",this.method=this.options.method||"GET"}V.prototype={requestString:null,constructor:V,template:{get:{value:"service=__SERVICE__&version=__VERSION__&rawdataoutput=__RAWDATAOUTPUT__&identifier=__IDENTIFIER__&request=__REQUEST__&datainputs=\x3c!-- __DATAINPUTS__ --\x3e",input:"__KEY__=__DATA__"},post:{value:'<?xml version="1.0" encoding="UTF-8"?><wps:__REQUEST__ version="__VERSION__" service="__SERVICE__" __NAMESPACE__ __SCHEMALOCATION__><ows:Identifier>__IDENTIFIER__</ows:Identifier><wps:DataInputs>\x3c!-- __DATAINPUTS__ --\x3e</wps:DataInputs><wps:ResponseForm><wps:RawDataOutput><ows:Identifier>__RAWDATAOUTPUT__</ows:Identifier></wps:RawDataOutput></wps:ResponseForm></wps:__REQUEST__>',input:"<wps:Input><ows:Identifier>__KEY__</ows:Identifier><wps:Data><wps:LiteralData>__DATA__</wps:LiteralData></wps:Data></wps:Input>"}},namespaceByDefault:function(){return['xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"','xmlns="http://www.opengis.net/wps/1.0.0"','xmlns:wfs="http://www.opengis.net/wfs"','xmlns:wps="http://www.opengis.net/wps/1.0.0"','xmlns:ows="http://www.opengis.net/ows/1.1"','xmlns:gml="http://www.opengis.net/gml"','xmlns:ogc="http://www.opengis.net/ogc"','xmlns:wcs="http://www.opengis.net/wcs/1.1.1"','xmlns:xlink="http://www.w3.org/1999/xlink"'].join(" ")},schemaLocationByDefault:function(){return'xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd"'},processRequestString:function(){this.logger.trace("WPS::processRequestString ()");var e="";if("POST"===this.method)e=this.template.post.value;else{if("GET"!==this.method)return this.logger.error("No other method supported by the service !"),!1;e=this.template.get.value}return e=(e=(e=(e=(e=e.replace(/__SERVICE__/g,this.paramservice)).replace(/__VERSION__/g,this.paramversion)).replace(/__RAWDATAOUTPUT__/g,this.paramrawdataoutput)).replace(/__IDENTIFIER__/g,this.paramidentifier)).replace(/__REQUEST__/g,this.paramrequest),"POST"===this.method&&(e=(e=e.replace(/__NAMESPACE__/g,this.namespaceByDefault)).replace(/__SCHEMALOCATION__/g,this.schemaLocationByDefault)),(e=e.replace(/<!-- __DATAINPUTS__ -->/g,this.__addDataInputs()))?(this.requestString=e,this.logger.trace("traduction tmpl",e),!0):(this.logger.warn("traduction tmpl : empty request !?"),!1)},__addDataInputs:function(){this.logger.trace("WPS::__addDataInputs ()");for(var e,t="GET"===this.method?this.template.get.input:this.template.post.input,o="GET"===this.method?";":"",n="",r=this,i=this.DataObject.getData(),s=0;s<i.length;s++)e=s,o&&(o=e===i.length-1?"":";"),n=n.concat(r.__addDataInput(t,i[e].k,i[e].v),o);return n},__addDataInput:function(e,t,o){var n=e;return n=(n=n.replace(/__KEY__/g,t)).replace(/__DATA__/g,o)},setMethod:function(e){"GET"===e||"POST"===e?this.method=e:this.logger.warn("support only GET and POST method !")},getMethod:function(){return this.method}};var W=V,q={build:function(e){if(v.getLogger("AltiRequestWPS").trace(["AltiRequestWPS::build()"]),!e)throw new Error(_.getMessage("PARAM_EMPTY","options"));if(!e.type)throw new Error(_.getMessage("PARAM_EMPTY","type (Elevation or Profil)"));var t=null;switch(e.type){case"Elevation":e.wps.identifier="gs:WPSElevation",t=new D(e.param);break;case"Profil":e.wps.identifier="gs:WPSLineElevation",t=new U(e.param);break;default:throw new Error(_.getMessage("PARAM_TYPE","type (Elevation or Profil)"))}var o={data:t,method:e.method,param:e.wps},n=new W(o);if(!n.processRequestString())throw new Error("Enable to process request !");return n.requestString}},H={build:function(e){v.getLogger("AltiRequestFactory").trace(["AltiRequestFactory::build()"]);var t=null,o={type:e.sampling?"Profil":"Elevation",method:e.httpMethod,param:{positions:null,delimiter:null,indent:null,crs:null,format:null,sampling:null,zonly:null}};o.param.positions=e.positions,o.param.format=e.outputFormat,o.param.sampling=e.sampling,o.param.zonly=e.zonly;var n=!(null===e.onError||"function"!=typeof e.onError),r=!(null===e.onSuccess||"function"!=typeof e.onSuccess),i=null;switch(e.api){case"REST":var s=new z(o);if(!s.processRequestString()){if(i="Error in process request (rest) !",n)return void e.onError.call(e.scope,new w(i));throw new Error(i)}t=s.requestString;break;case"WPS":if(o.wps={service:null,version:null,identifier:null,rawdataoutput:null,request:null},!(t=q.build(o))){if(i="Error in process request (wps) !",n)return void e.onError.call(e.scope,new w(i));throw new Error(i)}break;default:if(i="Type of API is not supported by service (REST or WPS) !",n)return void e.onError.call(e.scope,new w(i));throw new Error(i)}return r&&e.onSuccess.call(e.scope,t),t}};function Y(e){if(!(this instanceof Y))throw new TypeError("XML constructor cannot be called as a function.");this.logger=v.getLogger(),this.logger.trace("[Constructeur XML ()]"),this.xmlString=null,this.xmlDoc=null,this.reader=null,e&&(e.xmlString&&"string"==typeof e.xmlString&&(this.xmlString=e.xmlString,this.xmlDoc=X(e.xmlString)),e.reader&&this.setReader(e.reader))}function X(e){if("undefined"==typeof window)return(new(0,o("xmldom").DOMParser)).parseFromString(e,"text/xml");var t,n,r="Erreur lors du parsing de la rÃ©ponse du service : XML non conforme";if(window.ActiveXObject){(n=new window.ActiveXObject("Microsoft.XMLDOM")).async=!1,n.loadXML(e);var i=n.parseError;if(i.errorCode)throw i.line&&i.linepos&&(r+="( ligne "+i.line+", colonne "+i.linepos),i.reason&&(r+=":  "+i.reason+")"),new Error(r);return n}if(window.DOMParser){t=new window.DOMParser;try{n=t.parseFromString(e,"text/xml")}catch(e){throw"SyntaxError"===e.message?new Error(r):new Error("Erreur lors du parsing de la rÃ©ponse du service : "+e.message)}if(n.getElementsByTagName("parsererror").length>0)for(var s=n.getElementsByTagName("parsererror"),a=0;a<s.length;a++){var l=s[a].innerHTML;if(-1===l.indexOf("Huge input lookup"))throw r+="("+l+")",new Error(r)}else if(!n.documentElement)throw new Error(r);return n}throw new Error("Incompatible DOM Parser pour ce navigateur !")}Y.prototype={constructor:Y,getXMLString:function(){return this.xmlString},setXMLString:function(e){e&&"string"==typeof e&&(this.xmlString=e,this.xmlDoc=X(e))},getReader:function(){return this.reader},setReader:function(e){e&&e.read&&"function"==typeof e.read&&(this.reader=e)},getXMLDoc:function(){return this.xmlDoc},setXMLDoc:function(e){this.xmlDoc=e},parse:function(){if(!this.xmlDoc&&this.xmlString&&(this.xmlDoc=X(this.xmlString)),this.xmlDoc){var e,t=function(e){var t;9===e.nodeType?t=e.documentElement:1===e.nodeType&&(t=e);return t}(this.xmlDoc);return t?(this.reader&&this.reader.read?e=this.reader.read(t):(e={})[t.nodeName]=function e(t){var o={};if(t.attributes.length>0){var n=function(e){if(e.attributes.length>0){for(var t={},o=e.attributes,n=0;n<o.length;n++){var r=o[n];t[r.nodeName]=r.nodeValue}return t}}(t);o.attributes=n}if(t.hasChildNodes())for(var r,i={},s=t.childNodes,a=0;a<s.length;a++)if(3===(r=s[a]).nodeType)o.textContent=r.nodeValue;else if(1===r.nodeType)if(i=e(r),o[r.nodeName]){if(!Array.isArray(o[r.nodeName])){var l=o[r.nodeName];o[r.nodeName]=[],o[r.nodeName].push(l)}o[r.nodeName].push(i)}else o[r.nodeName]=i;return o}(t),e):{}}}};var Z=Y;function K(){if(!(this instanceof K))throw new TypeError("AltiResponse constructor cannot be called as a function.");this.elevations=[]}K.prototype={constructor:K};var J=K;function Q(){if(!(this instanceof Q))throw new TypeError("Elevation constructor cannot be called as a function.");this.z=null}Q.prototype={constructor:Q};var $=Q,ee={};ee.READERS={elevations:function(e){var t=new J;if(e.hasChildNodes())for(var o,n,r=e.childNodes,i=0;i<r.length;i++)o=r[i],ee.READERS[o.nodeName]&&(n=ee.READERS[o.nodeName](o),t.elevations.push(n));return t},elevation:function(e){var t=new $;if(e.hasChildNodes())for(var o,n=e.childNodes,r=0;r<n.length;r++)o=n[r],ee.READERS[o.nodeName]&&ee.READERS[o.nodeName](o,t);return t},lat:function(e,t){var o=e.firstChild;if(!o||3!==o.nodeType)throw new Error("Erreur dans la lecture de la rÃ©ponse du service : latitude attendue mais absente");t.lat=parseFloat(o.nodeValue)},lon:function(e,t){var o=e.firstChild;if(!o||3!==o.nodeType)throw new Error("Erreur dans la lecture de la rÃ©ponse du service : longitude attendue mais absente");t.lon=parseFloat(o.nodeValue)},z:function(e,t){var o=e.firstChild;if(!o||3!==o.nodeType)throw new Error("Erreur dans la lecture de la rÃ©ponse du service : altitude attendue mais absente");if(!t)return(t=new $).z=parseFloat(o.nodeValue),t;t.z=parseFloat(o.nodeValue)},acc:function(e,t){var o=e.firstChild;if(!o||3!==o.nodeType)throw new Error("Erreur dans la lecture de la rÃ©ponse du service : prÃ©cision (acc) attendue mais absente");t.acc=parseFloat(o.nodeValue)},exceptionreport:function(e){var t={};if(e.hasChildNodes())for(var o,n=e.childNodes,r=0;r<n.length;r++)"Exception"===(o=n[r]).nodeName&&(t.exceptionReport=ee.READERS.exception(o));return t},exception:function(e){var t={},o=e.getAttribute("exceptionCode");o&&(t.exceptionCode=o);var n=e.firstChild;return n&&3===n.nodeType&&(t.exception=n.nodeValue),t},error:function(e){var t={error:{}};if(e.hasChildNodes())for(var o,n=e.childNodes,r=0;r<n.length;r++){var i;1===(o=n[r]).nodeType&&"code"===o.nodeName&&(i=o.firstChild)&&3===i.nodeType&&(t.error.code=i.nodeValue),1===o.nodeType&&"description"===o.nodeName&&(i=o.firstChild)&&3===i.nodeType&&(t.error.description=i.nodeValue)}return t}},ee.read=function(e){if("elevations"===e.nodeName)return ee.READERS.elevations(e);if("ExceptionReport"===e.nodeName)return ee.READERS.exceptionreport(e);if("error"===e.nodeName)return ee.READERS.error(e);throw new Error("Erreur lors de la lecture de la rÃ©ponse : elle n'est pas au format attendu.")};var te=ee;function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ne={build:function(e){var t=v.getLogger("AltiResponseFactory");t.trace(["AltiResponseFactory::build()"]);var o=null;if(e.response){if(e.rawResponse)t.trace("analyze response : raw"),o=e.response;else{switch(e.outputFormat){case"xml":t.trace("analyze response : xml");try{var n=new Z({reader:te});if("string"==typeof e.response?n.setXMLString(e.response):n.setXMLDoc(e.response),!(o=n.parse()))throw new Error(_.getMessage("SERVICE_RESPONSE_EXCEPTION_2"))}catch(t){var r=t.message;return void e.onError.call(e.scope,new w({message:_.getMessage("SERVICE_RESPONSE_EXCEPTION",r),status:200,type:w.TYPE_SRVERR}))}break;case"json":t.trace("analyze response : json"),t.trace("analyze response : ",oe(e.response));var i=null;if((i="string"==typeof e.response?JSON.parse(e.response):e.response)&&i.error)return void e.onError.call(e.scope,new w({message:_.getMessage("SERVICE_RESPONSE_EXCEPTION",i.error.description),status:200,type:w.TYPE_SRVERR}));if(i){var s,a=i.elevations,l=new J;if(Array.isArray(a)&&a.length)for(var c=0;c<a.length;c++)s=new $,"object"===oe(a[c])?(a[c].lon&&(s.lon=a[c].lon),a[c].lat&&(s.lat=a[c].lat),a[c].z&&(s.z=a[c].z),a[c].acc&&(s.acc=a[c].acc)):"number"==typeof a[c]&&(s.z=a[c]),Array.isArray(l.elevations)&&l.elevations.push(s);o=l}if(!o)return void e.onError.call(e.scope,new w({message:_.getMessage("SERVICE_RESPONSE_ANALYSE_2"),type:w.TYPE_UNKERR,status:-1}));break;default:return void e.onError.call(e.scope,new w({message:_.getMessage("SERVICE_RESPONSE_FORMAT_2"),type:w.TYPE_UNKERR,status:-1}))}if(o.exceptionReport)return void e.onError.call(e.scope,new w({message:_.getMessage("SERVICE_RESPONSE_EXCEPTION",o.exceptionReport),type:w.TYPE_SRVERR,status:200}));if(o.error){var u=o.error.description;return void e.onError.call(e.scope,new w({message:_.getMessage("SERVICE_RESPONSE_EXCEPTION",u),type:w.TYPE_SRVERR,status:200}))}}e.onSuccess.call(e.scope,o)}else e.onError.call(e.scope,new w(_.getMessage("SERVICE_RESPONSE_EMPTY")))}};function re(e){if(!(this instanceof re))throw new TypeError(_.getMessage("CLASS_CONSTRUCTOR","Alti"));if(this.CLASSNAME="Alti",L.apply(this,arguments),this.logger=v.getLogger("Gp.Services.Alti"),this.logger.trace("[Constructeur Alti (options)]"),!e.positions)throw new Error(_.getMessage("PARAM_MISSING","positions"));if(0===e.positions.length)throw new Error(_.getMessage("PARAM_EMPTY","positions"));if(this.options.positions=e.positions,this.options.outputFormat="string"==typeof e.outputFormat?e.outputFormat.toLowerCase():"xml",this.options.sampling=e.sampling||null,this.options.api="string"==typeof e.api?e.api.toUpperCase():"REST","REST"===this.options.api&&(this.options.httpMethod="GET"),this.options.zonly=e.zonly||!1,!this.options.serverUrl){var t=M.Alti.url(this.options.apiKey),o=null;switch(this.options.api){case"WPS":o=t.wps;break;case"REST":var n=(e.sampling?"profil":"elevation")+"-"+this.options.outputFormat;o=t[n];break;default:throw new Error(_.getMessage("PARAM_UNKNOWN","api"))}if(!o)throw new Error("Url by default not found !");this.options.serverUrl=o,this.logger.trace("Server URL by default : "+this.options.serverUrl)}var r=this.options.serverUrl.lastIndexOf(".");if(-1!==r){var i=this.options.serverUrl.substring(r+1);if(i&&i.length<5)switch(this.logger.trace("Server Extension URL : "+i),i.toLowerCase()){case"json":case"xml":this.options.outputFormat=i.toLowerCase();break;default:throw new Error("type of service : unknown or unsupported (json or xml) !")}}}re.prototype=Object.create(L.prototype,{}),re.prototype.constructor=re,re.prototype.buildRequest=function(e,t){var o={httpMethod:this.options.httpMethod,onSuccess:function(e){this.request=e,t.call(this,this.request)},onError:e,scope:this,positions:this.options.positions,outputFormat:this.options.outputFormat,sampling:this.options.sampling,api:this.options.api,zonly:this.options.zonly};H.build(o)},re.prototype.analyzeResponse=function(e,t){if(this.response){var o={response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onError:e,onSuccess:t,scope:this};ne.build(o)}else e.call(this,new w(_.getMessage("SERVICE_RESPONSE_EMPTY")))};var ie=re;function se(){if(!(this instanceof se))throw new TypeError("AutoConfResponse constructor cannot be called as a function.");this.generalOptions={apiKeys:{},title:null,defaultGMLGFIStyle:null,theme:null,wgs84Resolutions:[]},this.layers={},this.territories={},this.tileMatrixSets={},this.services={}}se.prototype={constructor:se,isConfLoaded:function(e){if(e)return!!this.generalOptions.apiKeys[e]},getLayersId:function(e){return this.generalOptions.apiKeys[e]},getLayersConf:function(e){var t={},o=this.getLayersId(e);if(o)for(var n=0;n<o.length;n++){var r=o[n];t[r]=this.layers[r]}return t},getLayerConf:function(e){if(this.layers)return this.layers[e]},getTileMatrixSets:function(){return this.tileMatrixSets},getTMSConf:function(e){if(this.tileMatrixSets)return this.tileMatrixSets[e]},getTerritories:function(){return this.territories},getTerritoryConf:function(e){if(this.territories)return this.territories[e]},getServices:function(){return this.services},getServiceConf:function(e){if(this.services)return this.services[e]}};var ae=se;function le(){if(!(this instanceof le))throw new TypeError("Constraint constructor cannot be called as a function.");this.crs=null,this.bbox={left:null,right:null,top:null,bottom:null},this.minScaleDenominator=null,this.maxScaleDenominator=null,this.temporalExtent=[null,null]}le.prototype={constructor:le};var ce=le;function ue(){if(!(this instanceof ue))throw new TypeError("Format constructor cannot be called as a function.");this.current=null,this.name=null}ue.prototype={constructor:ue};var de=ue;function he(){if(!(this instanceof he))throw new TypeError("Layer constructor cannot be called as a function.")}he.prototype={constructor:he,getName:function(){return this.name},getTitle:function(){return this.title},getDescription:function(){return this.description},getLayerId:function(){return this.layerId},getQuicklookUrl:function(){return this.quicklookUrl},getDefaultProjection:function(){return this.defaultProjection},getProjections:function(){var e=[];return e.push(this.defaultProjection),e.concat(this.additionalProjections)},getBBOX:function(){if(this.globalConstraint)return this.globalConstraint.bbox},getMinScaleDenominator:function(){if(this.globalConstraint)return this.globalConstraint.minScaleDenominator},getMaxScaleDenominator:function(){if(this.globalConstraint)return this.globalConstraint.maxScaleDenominator},getTMSID:function(){if(this.wmtsOptions)return this.wmtsOptions.tileMatrixSetLink},getServiceParams:function(){return this.serviceParams},getServerUrl:function(e){if(e&&this.serviceParams&&this.serviceParams.serverUrl)return this.serviceParams.serverUrl[e]},getLegends:function(){return this.legends},getMetadata:function(){return this.metadata},getStyles:function(){return this.styles},getDefaultStyle:function(){if(this.styles){for(var e,t=this.styles,o=0;o<t.length;o++)if(!0===t[o].current){e=t[o].name;break}return e}},getThematics:function(){return this.thematics},getDefaultFormat:function(){if(this.formats){for(var e,t=this.formats,o=0;o<t.length;o++)if(!0===t[o].current){e=t[o].name;break}return e}},getConstraints:function(){return this.constraints},getOriginators:function(){return this.originators},getDimensions:function(){return this.dimensions},getAggregatedLayers:function(){if(this.isAggregate)return this.aggregatedLayers}};var pe=he;function fe(){if(!(this instanceof fe))throw new TypeError("Legend constructor cannot be called as a function.");this.format=null,this.url=null,this.minScaleDenominator=null}fe.prototype={constructor:fe};var me=fe;function ge(){if(!(this instanceof ge))throw new TypeError("Metadata constructor cannot be called as a function.");this.format=null,this.url=null}ge.prototype={constructor:ge};var ye=ge;function ve(){if(!(this instanceof ve))throw new TypeError("Originator constructor cannot be called as a function.");this.name=null,this.attribution=null,this.logo=null,this.url=null,this.constraints=[]}ve.prototype={constructor:ve};var _e=ve;function be(){if(!(this instanceof be))throw new TypeError("Service constructor cannot be called as a function.");this.title=null,this.serverUrl=null,this.version=null}be.prototype={constructor:be};var we=be;function Ee(){if(!(this instanceof Ee))throw new TypeError("Style constructor cannot be called as a function.");this.name=null,this.title=null,this.current=null,this.url=null}Ee.prototype={constructor:Ee};var Oe=Ee;function Se(){if(!(this instanceof Se))throw new TypeError("Territory constructor cannot be called as a function.");this.isDefault=null,this.defaultCRS=null,this.additionalCRS=[],this.geoBBOX={left:null,right:null,top:null,bottom:null},this.geoCenter={lon:null,lat:null},this.defaultOptions={resolution:null,minScaleDenominator:null,maxScaleDenominator:null},this.defaultLayers=[]}Se.prototype={constructor:Se};var xe=Se;function Ce(){if(!(this instanceof Ce))throw new TypeError("Thematic constructor cannot be called as a function.");this.inspire=null,this.name=null}Ce.prototype={constructor:Ce};var je=Ce;function Pe(){if(!(this instanceof Pe))throw new TypeError("TileMatrixSet constructor cannot be called as a function.");this.projection=null,this.nativeResolutions=[],this.matrixIds=[],this.tileMatrices={}}Pe.prototype={constructor:Pe,getResolutions:function(){return this.nativeResolutions},getMatrixIds:function(){return this.matrixIds},getProjection:function(){return this.projection},getTileMatrices:function(){return this.tileMatrices},getTopLeftCorner:function(){var e,t=this.getTileMatrices();if(t)for(var o in t)if(t.hasOwnProperty(o)){e=t[o].topLeftCorner;break}return e}};var Te=Pe;function Ae(){if(!(this instanceof Ae))throw new TypeError("TileMatrix constructor cannot be called as a function.");this.matrixId=null,this.matrixHeight=null,this.matrixWidth=null,this.scaleDenominator=null,this.tileHeight=null,this.tileWidth=null,this.topLeftCorner=null}Ae.prototype={constructor:Ae,getTopLeftCorner:function(){return this.topLeftCorner},getScaleDenominator:function(){return this.scaleDenominator},getTileHeight:function(){return this.tileHeight},getTileWidth:function(){return this.tileWidth},getMatrixHeight:function(){return this.matrixHeight},getMatrixWidth:function(){return this.matrixWidth}};var Me=Ae;function Ie(){if(!(this instanceof Ie))throw new TypeError("TileMatrixLimit constructor cannot be called as a function.");this.minTileRow=null,this.maxTileRow=null,this.minTileCol=null,this.maxTileCol=null}Ie.prototype={constructor:Ie};var Re=Ie;function Le(e){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ke={};function Ge(e,t){if(e.hasChildNodes())for(var o,n,r,i=e.childNodes,s=0;s<i.length;s++){if(1===(o=i[s]).nodeType)if(n=o.localName||o.baseName||o.nodeName,r=o.prefix||ke.DEFAULTPREFIX,ke.READERS[r][n])(0,ke.READERS[r][n])(o,t);else Ge(o,t)}}function Ne(e){var t,o="";return e.hasChildNodes()&&(3!==(t=e.firstChild).nodeType&&4!==t.nodeType||(o=t.nodeValue)),o}ke.VERSION="1.1.0",ke.NAMESPACES={xmlns:"http://www.opengis.net/context",gpp:"http://api.ign.fr/geoportail",ows:"http://www.opengis.net/ows/2.0",sld:"http://www.opengis.net/sld",wmts:"http://www.opengis.net/wmts/1.0",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},ke.SCHEMALOCATION=["http://www.opengis.net/context http://wxs.ign.fr/schemas/extContext.xsd http://api.ign.fr/geoportail http://wxs.ign.fr/schemas/autoconf/autoconf.xsd","http://www.opengis.net/context http://wxs.ign.fr/schemas/extContext.xsd http://api.ign.fr/geoportail http://wxs.ign.fr/schemas/autoconf.xsd"],ke.DEFAULTPREFIX="context",ke.READERS={context:{ViewContext:function(e){!function(e){if(e.attributes.length>0){var t=function(e){if(e.attributes.length>0){for(var t={},o=e.attributes,n=0;n<o.length;n++){var r=o[n];t[r.nodeName]=r.nodeValue}return t}}(e);for(var o in t)if(t.hasOwnProperty(o)){if("version"===o&&t.version!==ke.VERSION)return void console.log("[AutoConfResponseReader] autoconf version is not the expected one : there may be errors in parsing");if("xmlns"===o){if(t[o]!==ke.NAMESPACES.xmlns)return void console.log("[AutoConfResponseReader] autoconf response default namespace is not the expected one");continue}var n=o.split(":")[0],r=o.split(":")[1];if("xmlns"===n&&r&&ke.NAMESPACES[r]&&ke.NAMESPACES[r]!==t[o])return void console.log("[AutoConfResponseReader] autoconf response "+o+" namespace is not the expected one");if("schemaLocation"===r&&t[o]!==ke.SCHEMALOCATION[0]&&t[o]!==ke.SCHEMALOCATION[1])return void console.log("[AutoConfResponseReader] autoconf response schema location is not the expected one")}}}(e);var t=new ae;return Ge(e,t),t},Title:function(e,t){t&&t.generalOptions?t.generalOptions.title=Ne(e):t&&t.lyr&&(t.lyr.title=Ne(e))},Abstract:function(e,t){t&&t.lyr&&(t.lyr.description=Ne(e))},Server:function(e,t){var o=e.getAttribute("service"),n=e.getAttribute("title"),r=e.getAttribute("version");if(o)if(t&&t.services&&"object"===Le(t.services)&&!t.services[o]){var i=new we;i.title=n,i.version=r,Ge(e,i),t.services[o]=i}else t&&t.lyr&&(t.lyr.serviceParams||(t.lyr.serviceParams={}),t.lyr.serviceParams.id=o,t.lyr.serviceParams.version=r)},OnlineResource:function(e,t){t&&t.hasOwnProperty("serverUrl")&&(t.serverUrl=e.getAttribute("xlink:href"))},LayerList:function(e,t){if(Ge(e,t),t&&t.layers&&t.generalOptions&&t.services)for(var o in t.layers)if(t.layers.hasOwnProperty(o)){var n=t.layers[o],r=n.apiKeys;if(r&&Array.isArray(r))for(var i=0;i<r.length;i++){var s=r[i];t.generalOptions.apiKeys&&(t.generalOptions.apiKeys[s]&&Array.isArray(t.generalOptions.apiKeys[s])||(t.generalOptions.apiKeys[s]=[]),t.generalOptions.apiKeys[s].push(o))}var a=n.serviceParams;if(a&&a.id&&!t.services[a.id]){var l=new we;a.serverUrl&&(l.serverUrl=a.serverUrl),a.version&&(l.version=a.version),t.services[a.id]=l}if(n.wmtsOptions&&n.wmtsOptions.tileMatrixSetLink&&t.tileMatrixSets){var c=n.wmtsOptions.tileMatrixSetLink,u=t.tileMatrixSets;for(var d in u)u.hasOwnProperty(d)&&d===c&&(n.defaultProjection=u[d].projection)}}},Layer:function(e,t){if(t&&t.layers){var o={lyr:new pe,lyrId:null},n=e.getAttribute("hidden");o.lyr.hidden="1"===n;var r=e.getAttribute("queryable");if(o.lyr.queryable="1"===r,Ge(e,o),o.lyrId){if(o.lyr.serviceParams&&o.lyr.serviceParams.id){var i=o.lyr.serviceParams.id;if(-1!==i.toUpperCase().indexOf("OPENLS")||-1!==i.toUpperCase().indexOf("ELEVATION")){var s=o.lyrId.split("$")[0];o.lyrId=s+"$"+i}}o.lyr.layerId=o.lyrId,t.layers[o.lyrId]=o.lyr}}},Name:function(e,t){t&&t.lyr&&(t.lyr.name=Ne(e))},SRS:function(e,t){t&&t.lyr&&(t.lyr.defaultProjection=Ne(e))},Format:function(e,t){if(t&&t.lyr){var o=new de,n=e.getAttribute("current");o.current="1"===n,o.name=Ne(e),t.lyr.formats&&Array.isArray(t.lyr.formats)||(t.lyr.formats=[]),t.lyr.formats.push(o)}},Style:function(e,t){if(t&&t.lyr){var o=new Oe,n=e.getAttribute("current");if(o.current="1"===n||1===n,e.hasChildNodes)for(var r,i,s=e.childNodes,a=0;a<s.length;a++)1===(r=s[a]).nodeType&&("Name"===(i=r.localName||r.baseName||r.nodeName)?o.name=Ne(r):"Title"===i?o.title=Ne(r):"URL"===i&&(o.url=Ne(r)));t.lyr.styles&&Array.isArray(t.lyr.styles)||(t.lyr.styles=[]),t.lyr.styles.push(o)}},Dimension:function(e,t){var o=e.getAttribute("name"),n=Ne(e);t&&t.lyr&&(t.lyr.dimensions||(t.lyr.dimensions={}),"Type"===o?t.lyr.dimensions.type=n:"VisibilityRange"===o?t.lyr.dimensions.visibilityRange=n:"VisibilityMode "===o?t.lyr.dimensions.visibilityMode=n:"GeometricType"===o?t.lyr.dimensions.geometricType=n:"NoDataValue"===o&&(t.lyr.dimensions.noDataValue=n))}},gpp:{Theme:function(e,t){t&&t.generalOptions&&t.generalOptions.hasOwnProperty("theme")&&(t.generalOptions.theme=Ne(e))},defaultGMLGFIStyleUrl:function(e,t){t&&t.generalOptions&&t.generalOptions.hasOwnProperty("defaultGMLGFIStyle")&&(t.generalOptions.defaultGMLGFIStyle=Ne(e))},Territory:function(e,t){var o=e.getAttribute("id");if(o){var n=new xe,r=e.getAttribute("default");n.isDefault="1"===r,Ge(e,n),t&&t.territories&&"object"===Le(t.territories)&&(t.territories[o]=n)}},defaultCRS:function(e,t){t&&t.hasOwnProperty("defaultCRS")&&(t.defaultCRS=Ne(e))},AdditionalCRS:function(e,t){var o=Ne(e);o&&t&&(Array.isArray(t.additionalCRS)?t.additionalCRS.push(o):(t.additionalProjections&&Array.isArray(t.additionalProjections)||(t.additionalProjections=[]),t.additionalProjections.push(o)))},DefaultLayer:function(e,t){var o=e.getAttribute("layerId");o&&t&&Array.isArray(t.defaultLayers)&&t.defaultLayers.push(o)},BoundingBox:function(e,t){if(t){var o=Ne(e).split(",");if(4===o.length){var n={left:parseFloat(o[0]),right:parseFloat(o[2]),top:parseFloat(o[3]),bottom:parseFloat(o[1])},r=e.getAttribute("minT"),i=e.getAttribute("maxT");if(t.hasOwnProperty("geoBBOX"))t.geoBBOX=n;else if(t.hasOwnProperty("bbox"))if(t.bbox.left||t.bbox.right||t.bbox.top||t.bbox.bottom){t.multiConstraints||(t.multiConstraints=[]);var s=new ce;s.bbox=n,s.temporalExtent=[r,i],t.multiConstraints.push(s)}else t.bbox=n,t.temporalExtent=[r,i];else t.globalConstraint||(t.globalConstraint=new ce),t.globalConstraint.bbox=n,t.globalConstraint.temporalExtent=[r,i]}}},Resolution:function(e,t){var o=Ne(e);o&&t&&t.defaultOptions&&t.defaultOptions.hasOwnProperty("resolution")&&(t.defaultOptions.resolution=parseFloat(o))},x:function(e,t){var o=Ne(e);o&&t&&t.geoCenter&&t.geoCenter.hasOwnProperty("lon")&&(t.geoCenter.lon=parseFloat(o))},y:function(e,t){var o=Ne(e);o&&t&&t.geoCenter&&t.geoCenter.hasOwnProperty("lat")&&(t.geoCenter.lat=parseFloat(o))},Resolutions:function(e,t){t&&t.generalOptions&&t.generalOptions.hasOwnProperty("wgs84Resolutions")&&(t.generalOptions.wgs84Resolutions=Ne(e).split(","))},Layer:function(e,t){if(t&&t.hasOwnProperty("lyrId")&&t.lyr){t.lyrId=e.getAttribute("id");var o=e.getAttribute("aggregate"),n=e.getAttribute("more");(o||n)&&(t.lyr.isAggregate=!0),Ge(e,t.lyr)}},Constraint:function(e,t){var o=new ce;if(Ge(e,o),t)if(t.constraints&&Array.isArray(t.constraints)||(t.constraints=[]),o.multiConstraints&&Array.isArray(o.multiConstraints)){var n=new ce;n.crs=o.crs,n.bbox=o.bbox,n.minScaleDenominator=o.minScaleDenominator,n.maxScaleDenominator=o.maxScaleDenominator,n.temporalExtent=o.temporalExtent,t.constraints.push(n);for(var r=0;r<o.multiConstraints.length;r++)(n=new ce).crs=o.crs,n.minScaleDenominator=o.minScaleDenominator,n.maxScaleDenominator=o.maxScaleDenominator,n.bbox=o.multiConstraints[r].bbox,n.temporalExtent=o.multiConstraints[r].temporalExtent,t.constraints.push(n)}else t.constraints.push(o)},CRS:function(e,t){t&&t.hasOwnProperty("crs")&&(t.crs=Ne(e))},Thematic:function(e,t){if(t){var o=new je;o.inspire=!1,o.name=Ne(e),t.thematics&&Array.isArray(t.thematics)||(t.thematics=[]),t.thematics.push(o)}},InspireThematic:function(e,t){if(t){var o=new je;o.inspire=!0,o.name=Ne(e),t.thematics&&Array.isArray(t.thematics)||(t.thematics=[]),t.thematics.push(o)}},Originator:function(e,t){if(t){var o=new _e;o.name=e.getAttribute("name"),Ge(e,o),t.originators&&Array.isArray(t.originators)||(t.originators=[]),t.originators.push(o)}},Attribution:function(e,t){t&&t.hasOwnProperty("attribution")&&(t.attribution=Ne(e))},Logo:function(e,t){t&&t.hasOwnProperty("logo")&&(t.logo=Ne(e))},URL:function(e,t){t&&t.hasOwnProperty("url")&&(t.url=Ne(e))},Legend:function(e,t){var o=new me;Ge(e,o),t&&(t.legends&&Array.isArray(t.legends)||(t.legends=[]),t.legends.push(o))},LegendURL:function(e,t){if(t&&t.hasOwnProperty("format")&&(t.format=e.getAttribute("format"),e.hasChildNodes)){var o=e.childNodes[0];"OnlineResource"===(o.localName||o.baseName||o.nodeName)&&t.hasOwnProperty("url")&&(t.url=o.getAttribute("xlink:href"))}},QuickLook:function(e,t){if(e.hasChildNodes){var o=e.childNodes[0];"OnlineResource"===(o.localName||o.baseName||o.nodeName)&&t&&(t.quicklookUrl=o.getAttribute("xlink:href"))}},MetadataURL:function(e,t){if(t){var o=new ye;if(o.format=e.getAttribute("format"),e.hasChildNodes){var n=e.childNodes[0];"OnlineResource"===(n.localName||n.baseName||n.nodeName)&&(o.url=n.getAttribute("xlink:href"))}t.metadata||(t.metadata=[]),t.metadata.push(o)}},Key:function(e,t){if(t){var o=e.getAttribute("id");t.apiKeys&&Array.isArray(t.apiKeys)||(t.apiKeys=[]),t.apiKeys.push(o);var n=Ne(e);t.serviceParams||(t.serviceParams={}),t.serviceParams.serverUrl||(t.serviceParams.serverUrl={}),t.serviceParams.serverUrl[o]||(t.serviceParams.serverUrl[o]=n)}}},ows:{Identifier:function(e,t){t&&t.hasOwnProperty("TMS")?t.identifier=Ne(e):t&&t.hasOwnProperty("matrixId")&&(t.matrixId=Ne(e))},SupportedCRS:function(e,t){t&&t.TMS&&t.TMS.hasOwnProperty("projection")&&(t.TMS.projection=Ne(e))}},sld:{MinScaleDenominator:function(e,t){var o=Ne(e);o&&t&&(t.hasOwnProperty("defaultOptions")?t.defaultOptions.minScaleDenominator=parseFloat(o):t.lyr?(t.lyr.globalConstraint||(t.lyr.globalConstraint=new ce),t.lyr.globalConstraint.minScaleDenominator=parseFloat(o)):t.hasOwnProperty("minScaleDenominator")&&(t.minScaleDenominator=parseFloat(o)))},MaxScaleDenominator:function(e,t){var o=Ne(e);o&&t&&(t.hasOwnProperty("defaultOptions")?t.defaultOptions.maxScaleDenominator=parseFloat(o):t.lyr?(t.lyr.globalConstraint||(t.lyr.globalConstraint=new ce),t.lyr.globalConstraint.maxScaleDenominator=parseFloat(o)):t.hasOwnProperty("maxScaleDenominator")&&(t.maxScaleDenominator=parseFloat(o)))}},wmts:{TileMatrixSetLimits:function(e,t){if(t){var o={};Ge(e,o),t.wmtsOptions||(t.wmtsOptions={}),t.wmtsOptions.tileMatrixSetLimits=o}},TileMatrixLimits:function(e,t){var o,n=new Re;if(e.hasChildNodes){for(var r=e.childNodes,i=0;i<r.length;i++){var s=r[i],a=s.localName||s.baseName||s.nodeName;"TileMatrix"===a?o=Ne(s):"MinTileRow"===a?n.minTileRow=Ne(s):"MaxTileRow"===a?n.maxTileRow=Ne(s):"MinTileCol"===a?n.minTileCol=Ne(s):"MaxTileCol"===a&&(n.maxTileCol=Ne(s))}o&&t&&!t[o]&&(t[o]=n)}},TileMatrixSet:function(e,t){if(t&&t.tileMatrixSets){var o={};o.TMS=new Te,o.resolutions=[],Ge(e,o);var n=o.TMS.tileMatrices;for(var r in n)n.hasOwnProperty(r)&&o.TMS.matrixIds.push(r);if(("IGNF:WGS84G"===o.TMS.getProjection()||"EPSG:4326"===o.TMS.getProjection())&&t.generalOptions&&Array.isArray(t.generalOptions.wgs84Resolutions))for(var i=t.generalOptions.wgs84Resolutions,s=0;s<i.length;s++)o.resolutions[s]=parseFloat(i[s]);Array.isArray(o.resolutions)&&void 0!==o.resolutions.sort&&o.resolutions.sort((function(e,t){return t-e})),o.TMS.nativeResolutions=o.resolutions,t.tileMatrixSets[o.identifier]=o.TMS}else t&&!t.wmtsOptions&&(t.wmtsOptions={}),t.wmtsOptions.tileMatrixSetLink=Ne(e)},TileMatrix:function(e,t){if(t){var o=new Me;if(Ge(e,o),t.TMS&&t.TMS.getProjection()){var n=t.TMS.getProjection();if("EPSG:3857"===n||"EPSG:2154"===n){var r=28e-5*o.scaleDenominator;t.resolutions&&Array.isArray(t.resolutions)&&t.resolutions.push(r)}}t.TMS&&t.TMS.tileMatrices&&(t.TMS.tileMatrices[o.matrixId]=o)}},ScaleDenominator:function(e,t){var o=Ne(e);o&&t&&t.hasOwnProperty("scaleDenominator")&&(t.scaleDenominator=parseFloat(o))},TopLeftCorner:function(e,t){var o=Ne(e).split(" ");o&&t&&(t.topLeftCorner={},t.topLeftCorner.x=parseFloat(o[0]),t.topLeftCorner.y=parseFloat(o[1]))},TileWidth:function(e,t){var o=Ne(e);o&&t&&t.hasOwnProperty("tileWidth")&&(t.tileWidth=parseInt(o,10))},TileHeight:function(e,t){var o=Ne(e);o&&t&&t.hasOwnProperty("tileHeight")&&(t.tileHeight=parseInt(o,10))},MatrixWidth:function(e,t){var o=Ne(e);o&&t&&t.hasOwnProperty("matrixWidth")&&(t.matrixWidth=parseInt(o,10))},MatrixHeight:function(e,t){var o=Ne(e);o&&t&&t.hasOwnProperty("matrixHeight")&&(t.matrixHeight=parseInt(o,10))}},serviceException:function(e){var t={};if(e.hasChildNodes())for(var o,n=e.childNodes,r=0;r<n.length;r++)"exception"===(o=n[r]).nodeName&&(t.exceptionReport=ke.READERS.exception(o));return t},exception:function(e){var t={},o=e.getAttribute("code");o&&(t.exceptionCode=o);var n=e.firstChild;return n&&3===n.nodeType&&(t.exception=n.nodeValue),t}},ke.read=function(e){if("ViewContext"===e.nodeName){var t=e.prefix||ke.DEFAULTPREFIX;return ke.READERS[t][e.nodeName](e)}if("serviceException"===e.nodeName)return ke.READERS[e.nodeName](e);throw new Error("Erreur lors de la lecture de la rÃ©ponse : elle n'est pas au format attendu.")};var De=ke,Fe={build:function(e){v.getLogger("AutoConfResponseFactory").trace(["AutoConfResponseFactory::build()"]);var t=null;if(e.response){if(e.rawResponse)t=e.response;else{try{var o=new Z({reader:De});"string"==typeof e.response?o.setXMLString(e.response):o.setXMLDoc(e.response),t=o.parse()}catch(t){var n=t.message;return"string"==typeof e.response?n+="\n (raw response service'"+e.response+"')":n+="\n (raw response service'"+e.response.documentElement.innerHTML+"')",void e.onError.call(e.scope,new w({message:_.getMessage("SERVICE_RESPONSE_EXCEPTION",n),status:200,type:w.TYPE_SRVERR}))}var r=!0;for(var i in t)t.hasOwnProperty(i)&&(r=!1);if(r)return void e.onError.call(e.scope,new w(_.getMessage("SERVICE_RESPONSE_EMPTY_2")));if(t.exceptionReport)return void e.onError.call(e.scope,new w({message:_.getMessage("SERVICE_RESPONSE_EXCEPTION",t.exceptionReport),type:w.TYPE_SRVERR,status:200}))}var s="undefined"!=typeof window?window:{};s.Gp||(s.Gp={}),s.Gp.Config?this.mergeConfig(s.Gp.Config,t,e.layerId):s.Gp.Config=t,e.onSuccess.call(e.scope,s.Gp.Config)}else e.onError.call(e.scope,new w(_.getMessage("SERVICE_RESPONSE_EMPTY")))},mergeConfig:function(e,t,o){if(t&&e){for(var n in t)if(t.hasOwnProperty(n))if("generalOptions"===n)for(var r in t[n].apiKeys)t[n].apiKeys.hasOwnProperty(r)&&!e.generalOptions.apiKeys[r]&&(e.generalOptions.apiKeys[r]=t[n].apiKeys[r]);else if(e[n])for(var i in t[n])t[n].hasOwnProperty(i)&&!e[n][i]&&(e[n][i]=t[n][i]);if(o){var s=[];for(var a in t.layers)t.layers.hasOwnProperty(a)&&s.push(a);e.layers[o]&&(e.layers[o].aggregatedLayers=s)}}}};function Ue(e){if(!(this instanceof Ue))throw new TypeError(_.getMessage("CLASS_CONSTRUCTOR","AutoConf"));if(this.CLASSNAME="AutoConf",e||(e={}),e.protocol=e.protocol||"JSONP",L.apply(this,arguments),this.logger=v.getLogger("Gp.Services.AutoConf"),this.logger.trace("[Constructeur AutoConf (options)]"),("string"==typeof this.options.apiKey||this.options.apiKey instanceof String)&&Array.isArray(this.options.apiKey.split(","))&&this.options.apiKey.split(",").length>1&&(this.options.apiKey=this.options.apiKey.split(",")),!this.options.serverUrl&&!this.options.serverUrl){var t=M.AutoConf.url(this.options.apiKey);this.options.layerId?this.options.serverUrl=t.aggregate+this.options.layerId:Array.isArray(this.options.apiKey)&&this.options.apiKey.length>0?this.options.serverUrl=t.apiKeys:this.options.serverUrl=t.apiKey}"XHR"===this.options.protocol&&"POST"===this.options.httpMethod&&(this.logger.warn("Le service ne gÃ©re pas le mode d'interrogation en POST, on bascule sur du GET !"),this.options.httpMethod="GET"),this.options.outputFormat=this.options.rawResponse?"":"xml"}Ue.prototype=Object.create(L.prototype,{}),Ue.prototype.constructor=Ue,Ue.prototype.buildRequest=function(e,t){var o="undefined"!=typeof window?window:{};if(o.Gp&&o.Gp.Config&&o.Gp.Config.generalOptions&&o.Gp.Config.layers&&o.Gp.Config.generalOptions.apiKeys[this.options.apiKey]){if(!this.options.layerId)return this.logger.warn("Gp.Config existe dÃ©jÃ  pour cette clÃ©"),void this.options.onSuccess.call(this,o.Gp.Config);if(o.Gp.Config.layers[this.options.layerId]&&o.Gp.Config.layers[this.options.layerId].aggregatedLayers)return this.logger.warn("Gp.Config existe dÃ©jÃ  pour cette clÃ© et cette couche"),void this.options.onSuccess.call(this,o.Gp.Config)}this.request="",!(-1===this.options.serverUrl.indexOf("http://"))&&this.layerId&&(this.request=E.normalyzeParameters({layerId:this.layerId})),this.request||""===this.request?t.call(this,this.request):e.call(this,new w(_.getMessage("SERVICE_REQUEST_BUILD")))},Ue.prototype.analyzeResponse=function(e,t){if(this.response){var o={layerId:this.options.layerId,response:this.response,rawResponse:this.options.rawResponse,onSuccess:t,onError:e,scope:this};Fe.build(o)}else e.call(this,new w(_.getMessage("SERVICE_RESPONSE_EMPTY")))};var Be=Ue;function ze(e){if(this.logger=v.getLogger(),this.logger.trace("[Constructeur RequestHeader ()]"),!(this instanceof ze))throw new TypeError("RequestHeader constructor cannot be called as a function.");for(var t in this.options=e||{srsName:"EPSG:4326"},e)e.hasOwnProperty(t)&&(this.options[t]=e[t])}ze.prototype={requestString:null,template:'<RequestHeader srsName="__SRSNAME__"/>',constructor:ze,toString:function(){var e=null;return e=(e=this.template).replace(/__SRSNAME__/g,this.options.srsName),this.requestString=e,this.requestString}};var Ve=ze;function We(e){if(this.logger=v.getLogger(),this.logger.trace("[Constructeur Request ()]"),!(this instanceof We))throw new TypeError("Request constructor cannot be called as a function.");for(var t in this.options=e||{maximumResponses:25,methodName:null,version:"1.2"},e)e.hasOwnProperty(t)&&(this.options[t]=e[t])}We.prototype={requestString:null,template:'<Request maximumResponses="__MAXRESPONSES__" methodName="__METHODNAME__" requestID="__UUID__" version="__VERSION__">\x3c!-- __REQUESTSERVICE__ --\x3e</Request>',constructor:We,guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},toString:function(){var e=null;return e=(e=(e=(e=(e=this.template).replace(/__MAXRESPONSES__/g,this.options.maximumResponses)).replace(/__METHODNAME__/g,this.options.methodName)).replace(/__UUID__/g,this.guid())).replace(/__VERSION__/g,this.options.version),this.requestString=e,this.requestString}};var qe=We;function He(e){if(this.logger=v.getLogger(),this.logger.trace("[Constructeur AbstractService ()]"),!(this instanceof He))throw new TypeError("AbstractService constructor cannot be called as a function.");for(var t in this.options=e||{},e)e.hasOwnProperty(t)&&(this.options[t]=e[t])}He.prototype={strRequest:null,oRequest:null,oFilter:null,constructor:He,addRequest:function(e){this.logger.error("overwritten method !")},addFilter:function(e){this.logger.error("overwritten method !")},toString:function(){this.logger.error("overwritten method !")}};var Ye=He;function Xe(e){if(this.logger=v.getLogger(),this.logger.trace("[Constructeur XLS()]"),!(this instanceof Xe))throw new TypeError("XLS constructor cannot be called as a function.");for(var t in this.options={srsName:"EPSG:4326",maximumResponses:25},e)e.hasOwnProperty(t)&&e[t]&&(this.options[t]=e[t])}Xe.VERSION="1.2",Xe.prototype={requestString:null,namespace:!1,oService:null,constructor:Xe,template:'<?xml version="1.0" encoding="UTF-8"?>\n<XLS version="__VERSION__"\n__NAMESPACE__ \n__SCHEMALOCATION__>\n__REQUESTHEADER__\n__REQUEST__\n</XLS>\n',namespaceByDefault:function(){return['xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"','xmlns:xls="http://www.opengis.net/xls"','xmlns:gml="http://www.opengis.net/gml"'].join(" ")},schemaLocationByDefault:function(){return'xsi:schemaLocation="http://www.opengis.net/xls http://schemas.opengis.net/ols/1.2/olsAll.xsd"'},setService:function(e){e?e instanceof Ye?this.oService=e:this.logger.error("L'objet n'est pas du type 'LocationUtilityService' ou 'RouteService' !?"):this.logger.trace("L'objet de type Service XSL n'est pas encore defini !?")},getService:function(){return this.oService}},Xe.prototype.addNamespace=function(e,t){for(var o,n,r=e.key,i=!1,s=this.namespaceByDefault().split(" "),a=0;a<s.length;a++){if(s[a].split("=")[0]==="xmlns:"+r){i=!0;break}}return i?(o=/<(\w+[\s>])/g,n="<"+r+":$1",t=t.replace(o,n),o=/<\/(\w+[\s>])/g,n="</"+r+":$1",t=t.replace(o,n),this.logger.trace("namespace",t),t):(this.logger.warn("L'ajout d'un nouvel namespace n'est pas encore implÃ©mentÃ© !"),t)},Xe.prototype.build=function(){var e=!!this.getService(),t="";t=(t=(t=(t=this.template).replace(/__VERSION__/g,Xe.VERSION)).replace(/__NAMESPACE__/g,this.namespaceByDefault)).replace(/__SCHEMALOCATION__/g,this.schemaLocationByDefault);var o=new Ve({srsName:this.options.srsName});t=t.replace(/__REQUESTHEADER__/g,o.toString());var n=new qe({maximumResponses:this.options.maximumResponses,version:Xe.VERSION,methodName:e?this.getService().CLASSTYPE:null});if(t=t.replace(/__REQUEST__/g,n.toString()),e&&(t=t.replace(/<!-- __REQUESTSERVICE__ -->/g,this.getService().toString())),t)return this.namespace&&(t=this.addNamespace({key:"xls",url:"http://www.opengis.net/xls"},t)),this.requestString=t,this.logger.trace("traduction tmpl",t),this.requestString;this.logger.warn("traduction tmpl : empty request !?")};var Ze=Xe;function Ke(e){if(this.logger=v.getLogger("Address"),this.logger.trace("[Constructeur Address ()]"),!(this instanceof Ke))throw new TypeError("Address constructor cannot be called as a function.");if(this.options=e||{location:{},type:["StreetAddress"],filter:{}},!this.options.location||0===Object.keys(this.options.location).length)throw new Error("l'option 'location' n'est pas renseignÃ©e !")}Ke.prototype={constructor:Ke,requestString:null,template:{address:'<Address countryCode="__COUNTRYCODE__">__LOCATION____PLACE____POSTALCODE____ENVELOPE__</Address>',location:{freeFormAddress:"<freeFormAddress>__FREEFORMADDRESSVALUE__</freeFormAddress>",streetAddress:{container:"<StreetAddress>__STREET____BUILDING__</StreetAddress>",building:'<Building number="__BUILDINGVALUE__"/>',street:"<Street>__STREETVALUE__</Street>"}},place:'<Place type="__PLACETYPE__">__PLACEVALUE__</Place>',postalCode:"<PostalCode>__POSTALCODEVALUE__</PostalCode>",envelope:"<gml:Envelope><gml:lowerCorner>__LEFT__ __BOTTOM__</gml:lowerCorner><gml:upperCorner>__RIGHT__ __TOP__</gml:upperCorner></gml:Envelope>"}},Ke.prototype.toString=function(){var e=null;if(e=(e=this.template.address).replace(/__COUNTRYCODE__/g,this.options.type),"string"==typeof this.options.location){var t=this.template.location.freeFormAddress;t=t.replace(/__FREEFORMADDRESSVALUE__/g,this.options.location),e=e.replace(/__LOCATION__/g,t)}else{var o="",n="";this.options.location.number&&(o=(o=this.template.location.streetAddress.building).replace(/__BUILDINGVALUE__/g,this.options.location.number)),this.options.location.street&&(n=(n=this.template.location.streetAddress.street).replace(/__STREETVALUE__/g,this.options.location.street));var r=this.template.location.streetAddress.container;r=(r=r.replace(/__STREET__/g,n)).replace(/__BUILDING__/g,o),e=e.replace(/__LOCATION__/g,r)}var i="";this.options.location.postalCode&&(i=(i=this.template.postalCode).replace(/__POSTALCODEVALUE__/g,this.options.location.postalCode));var s="";if(this.options.filter){var a=this.options.filter.bbox;a&&(s=(s=(s=(s=(s=this.template.envelope).replace(/__LEFT__/g,a.left)).replace(/__BOTTOM__/g,a.bottom)).replace(/__RIGHT__/g,a.right)).replace(/__TOP__/g,a.top))}var l=[],c="";if(this.options.filter){var u=this.options.filter;for(var d in u)"bbox"!==d&&(c=(c=(c=this.template.place).replace(/__PLACETYPE__/g,d)).replace(/__PLACEVALUE__/g,u[d]),l.push(c))}var h="";return this.options.location.city&&(h=(h=(h=this.template.place).replace(/__PLACETYPE__/g,"Municipality")).replace(/__PLACEVALUE__/g,this.options.location.city),l.push(h)),e=(e=(e=e.replace(/__POSTALCODE__/g,i)).replace(/__PLACE__/g,l.join("\n"))).replace(/__ENVELOPE__/g,s),this.requestString=e,this.requestString};var Je=Ke;function Qe(){if(this.logger=v.getLogger("GeocodeFilterExtension"),this.logger.trace("[Constructeur GeocodeFilterExtension ()]"),!(this instanceof Qe))throw new TypeError("GeocodeFilterExtension constructor cannot be called as a function.");this.filters=[]}Qe.prototype={constructor:Qe,addFilterExtensions:function(e){e&&this.filters.push(e)},getNames:function(){var e=[];for(var t in this.filters)e.push(this.filters[t].CLASSNAME);return this.logger.trace(e),e},getFilter:function(e){var t=null;for(var o in this.filters)this.filters[o].CLASSNAME===e&&(t=this.filters[o]);return this.logger.trace(t),t},getFilters:function(){return this.logger.trace(this.filters),this.filters},getAttributs:function(e){var t=[];for(var o in this.filters)this.filters[o].CLASSNAME===e&&(t=this.filters[o].attributesList);return this.logger.trace(t),t},setPlaceAttributs:function(e,t){var o=this.getFilter(e),n=this.getAttributs(e);for(var r in n){var i=n[r];t[i]&&(o.placeAttributes[i]=t[i])}},getPlaceAttributs:function(e){var t={};for(var o in this.filters)this.filters[o].CLASSNAME===e&&(t=this.filters[o].placeAttributes);return this.logger.trace(t),t}};var $e=Qe;function et(e){if(this.logger=v.getLogger(),this.logger.trace("[Constructeur GeocodeRequest ()]"),!(this instanceof et))throw new TypeError("GeocodeRequest constructor cannot be called as a function.");for(var t in this.options=e||{},e)e.hasOwnProperty(t)&&(this.options[t]=e[t]);this.CLASSNAME="GeocodeRequest"}et.prototype={strRequest:null,oAddress:null,oFilter:null,template:'<GeocodeRequest returnFreeForm="__RETURNFREEFORM__">__ADDRESS__</GeocodeRequest>',addAddress:function(e){e instanceof Je&&(this.oAddress=e)},addFilter:function(e){e instanceof $e&&(this.oFilter=e)},constructor:et,toString:function(){var e="";if(e=this.template,!this.oAddress){var t={};if(t.location=this.options.location,t.type=this.options.filterOptions.type||["StreetAddress"],t.filter=this.options.filterOptions,delete t.filter.type,this.oFilter)for(var o in t.filter={},t.type){var n=t.type[o],r=this.oFilter.getFilter(n);if(r){for(var i=this.options.filterOptions,s=r.attributesList,a=0;a<s.length;a++){var l=s[a];if(i[l]){var c=r.serviceAttributes[a];r.placeAttributes[c]=i[l],this.logger.trace("Selection du filtre '"+l+"' sur le type '"+n+"'.")}}var u=r.placeAttributes;for(var d in u)u.hasOwnProperty(d)&&(t.filter[d]=u[d])}else this.logger.warn("Le filtre '"+n+"' n'existe pas !?")}if(this.oAddress=new Je(t),!this.oAddress)throw new Error("La construction de l'adresse n'est pas correctement definie !?")}return e=(e=e.replace(/__ADDRESS__/g,this.oAddress.toString())).replace(/__RETURNFREEFORM__/g,this.options.returnFreeForm?"true":"false"),this.strRequest=e,this.strRequest}};var tt=et;function ot(e){if(this.logger=v.getLogger("Position"),this.logger.trace("[Constructeur Position ()]"),!(this instanceof ot))throw new TypeError("Position constructor cannot be called as a function.");if(this.options=e||{},!this.options.position)throw new Error("l'option 'position' n'est pas renseignÃ©e !")}ot.prototype={constructor:ot,requestString:null,template:{position:"<Position>__GMLPOINT____GMLFILTER__</Position>",gml:{point:'<gml:Point xmlns:gml="http://www.opengis.net/gml"><gml:pos>__X__ __Y__</gml:pos></gml:Point>',pos:null,filter:{bbox:'<gml:Envelope xmlns:gml="http://www.opengis.net/gml"><gml:lowerCorner>__LEFT__ __BOTTOM__</gml:lowerCorner><gml:upperCorner>__RIGHT__ __TOP__</gml:upperCorner></gml:Envelope>',circle:'<gml:CircleByCenterPoint xmlns:gml="http://www.opengis.net/gml"><gml:pos>__X__ __Y__</gml:pos><gml:radius>__RADIUS__</gml:radius></gml:CircleByCenterPoint>',polygon:'<gml:Polygon xmlns:gml="http://www.opengis.net/gml"><gml:exterior><gml:LinearRing><gml:posList>__XY__</gml:posList></gml:LinearRing></gml:exterior></gml:Polygon>',multipolygon:null}}}},ot.prototype.toString=function(){var e=this.template.position,t=this.template.gml.point;t=(t=t.replace(/__X__/g,this.options.position.x)).replace(/__Y__/g,this.options.position.y);var o="";if(this.options.filter){var n=this.options.filter;for(var r in n)switch(r){case"circle":o=(o=(o=(o=this.template.gml.filter[r]).replace(/__X__/g,n[r].x)).replace(/__Y__/g,n[r].y)).replace(/__RADIUS__/g,n[r].radius);break;case"bbox":o=(o=(o=(o=(o=this.template.gml.filter[r]).replace(/__LEFT__/g,n[r].left)).replace(/__BOTTOM__/g,n[r].bottom)).replace(/__RIGHT__/g,n[r].right)).replace(/__TOP__/g,n[r].top);break;case"polygon":o=this.template.gml.filter[r];for(var i="",s=n[r],a=0;a<s.length;a++){var l=s[a];if(Array.isArray(l)){this.logger.error("Holes are not implemented !");break}(l.x&&l.y||0===l.x||0===l.y)&&(i+=l.x+" "+l.y),s.length!==a+1&&(i+=" ")}o=o.replace(/__XY__/g,i);break;case"multipolygon":this.logger.warn("Filter '"+r+"' is not yet implemented !");break;default:this.logger.error("This filter '"+r+"' is not useful !")}}return e=(e=e.replace(/__GMLPOINT__/g,t)).replace(/__GMLFILTER__/g,o),this.requestString=e,this.requestString};var nt=ot;function rt(e){if(this.logger=v.getLogger("Preference"),this.logger.trace("[Constructeur Preference ()]"),!(this instanceof rt))throw new TypeError("Preference constructor cannot be called as a function.");this.type=e}rt.prototype={constructor:rt,requestString:null,template:"<ReverseGeocodePreference>__TYPE__</ReverseGeocodePreference>"},rt.prototype.toString=function(){for(var e=[],t="",o=0;o<this.type.length;o++)t=(t=this.template).replace(/__TYPE__/g,this.type[o]),e.push(t);return this.strRequest=e.join("\n"),this.strRequest};var it=rt;function st(e){if(this.logger=v.getLogger(),this.logger.trace("[Constructeur ReverseGeocodeRequest ()]"),!(this instanceof st))throw new TypeError("ReverseGeocodeRequest constructor cannot be called as a function.");for(var t in this.options=e||{},e)e.hasOwnProperty(t)&&(this.options[t]=e[t]);this.CLASSNAME="ReverseGeocodeRequest"}st.prototype={strRequest:null,oPosition:null,oPreference:null,constructor:st,template:'<ReverseGeocodeRequest returnFreeForm="__RETURNFREEFORM__">__POSITION____PREFERENCE__</ReverseGeocodeRequest>',addPosition:function(e){e instanceof nt&&(this.oPosition=e)},addPreferences:function(e){e instanceof it&&(this.oPreference=e)},toString:function(){var e="";if(e=this.template,!this.oPreference&&(this.oPreference=new it(this.options.filterOptions.type||["StreetAddress"]),!this.oPreference))throw new Error("Les preferences ne sont pas definies !?");if(e=e.replace(/__PREFERENCE__/g,this.oPreference.toString()),!this.oPosition){var t={position:this.options.position,filter:{}};if(this.options.filterOptions&&(t.filter=this.options.filterOptions,delete t.filter.type),this.oPosition=new nt(t),!this.oPosition)throw new Error("La position et ses filtres ne sont pas definis !?")}return e=(e=e.replace(/__POSITION__/g,this.oPosition.toString())).replace(/__RETURNFREEFORM__/g,this.options.returnFreeForm?"true":"false"),this.strRequest=e,this.strRequest}};var at=st;function lt(e){if(this.logger=v.getLogger(),this.logger.trace("[Constructeur LocationUtilityService ()]"),!(this instanceof lt))throw new TypeError("LocationUtilityService constructor cannot be called as a function.");this.CLASSNAME="LocationUtilityService",this.CLASSTYPE=null,Ye.apply(this,arguments),this.options&&(this.CLASSTYPE=this.options.location?"GeocodeRequest":this.options.position?"ReverseGeocodeRequest":null)}lt.prototype=Object.create(Ye.prototype,{}),lt.prototype.constructor=lt,lt.prototype.addRequest=function(e){switch(this.CLASSTYPE=e.CLASSNAME,this.CLASSTYPE){case"GeocodeRequest":case"ReverseGeocodeRequest":this.oRequest=e;break;default:throw new Error("Ce n'est pas un objet de type 'LUS Request' !?")}},lt.prototype.addFilter=function(e){e instanceof $e&&(this.oFilter=e)},lt.prototype.toString=function(){if(!this.oRequest){if(!this.options)throw new Error("Les options ne sont pas renseignÃ©es, impossible de construire la requÃªte !");if("GeocodeRequest"===this.CLASSTYPE){var e={location:this.options.location,returnFreeForm:this.options.returnFreeForm,filterOptions:this.options.filterOptions||{}};this.oRequest=new tt(e),this.oFilter&&this.oRequest.addFilter(this.oFilter)}else if("ReverseGeocodeRequest"===this.CLASSTYPE){var t={position:this.options.position,returnFreeForm:this.options.returnFreeForm,filterOptions:this.options.filterOptions||{}};this.oRequest=new at(t)}else this.logger.error("impossible de determiner le type de geocodage : Direct ou Inverse !?")}if(!this.oRequest)throw new Error("Type de Geocodage indefini !");return this.strRequest=this.oRequest.toString(),this.strRequest};var ct=lt;function ut(){if(!(this instanceof ut))throw new TypeError("GeocodeLocation constructor cannot be called as a function.");this.placeAttributes={},this.attributesList=[],this.serviceAttributes=[]}ut.prototype={constructor:ut};var dt=ut;function ht(){if(!(this instanceof ht))throw new TypeError("StreetAddress constructor cannot be called as a function.");dt.apply(this,arguments),this.CLASSNAME="StreetAddress",this.attributesList=["bbox","ID","IDTR","quality","territory","commune","department","insee","municipality"],this.serviceAttributes=["bbox","ID","IDTR","Qualite","Territoire","Commune","Departement","INSEE","Municipality"]}ht.prototype=Object.create(dt.prototype),ht.prototype.constructor=ht;var pt=ht;function ft(){if(!(this instanceof ft))throw new TypeError("PositionOfInterest constructor cannot be called as a function.");dt.apply(this,arguments),this.CLASSNAME="PositionOfInterest",this.attributesList=["bbox","importance","nature","territory","commune","department","insee","municipality"],this.serviceAttributes=["bbox","Importance","Nature","Territoire","Commune","Departement","INSEE","Municipality"]}ft.prototype=Object.create(dt.prototype),ft.prototype.constructor=ft;var mt=ft;function gt(){if(!(this instanceof gt))throw new TypeError("CadastralParcel constructor cannot be called as a function.");dt.apply(this,arguments),this.CLASSNAME="CadastralParcel",this.attributesList=["absorbedCity","sheet","number","section","commune","department","insee","municipality","origin"],this.serviceAttributes=["CommuneAbsorbee","Feuille","Numero","Section","Commune","Departement","INSEE","Municipality","Type"]}gt.prototype=Object.create(dt.prototype),gt.prototype.constructor=gt;var yt=gt;function vt(){if(!(this instanceof vt))throw new TypeError("Administratif constructor cannot be called as a function.");dt.apply(this,arguments),this.CLASSNAME="Administratif",this.attributesList=["bbox","prefecture","inseeRegion","inseeDepartment","municipality"],this.serviceAttributes=["bbox","Prefecture","InseeRegion","InseeDepartement","Municipality"]}vt.prototype=Object.create(dt.prototype),vt.prototype.constructor=vt;var _t=vt,bt={build:function(e){var t=v.getLogger("DirectGeocodeRequestFactory");t.trace(["DirectGeocodeRequestFactory::build()"]);var o=null,n=new $e;n.addFilterExtensions(new _t),n.addFilterExtensions(new pt),n.addFilterExtensions(new mt),n.addFilterExtensions(new yt);var r=new ct({location:e.location,returnFreeForm:e.returnFreeForm,filterOptions:e.filterOptions});r.addFilter(n);var i=new Ze({srsName:e.srs,maximumResponses:e.maximumResponses});(i.namespace=!0,i.setService(r),o=i.build(),"GET"===e.httpMethod)&&(o="qxml="+encodeURIComponent(o).replace(/-/g,"%2D").replace(/_/g,"%5F").replace(/\./g,"%2E").replace(/!/g,"%21").replace(/~/g,"%7E").replace(/\*/g,"%2A").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29"));return t.trace(o),o}};function wt(){if(!(this instanceof wt))throw new TypeError("GeocodeResponse constructor cannot be called as a function.");this.locations=[]}wt.prototype={constructor:wt};var Et=wt;function Ot(){if(!(this instanceof Ot))throw new TypeError("GeocodedLocation constructor cannot be called as a function.");this.position={x:null,y:null},this.matchType=null,this.placeAttributes={},this.type=null}Ot.prototype={constructor:Ot};var St=Ot;function xt(){if(!(this instanceof xt))throw new TypeError("DirectGeocodedLocation constructor cannot be called as a function.");St.apply(this,arguments),this.CLASSNAME="DirectGeocodedLocation",this.accuracy=null}xt.prototype=Object.create(St.prototype),xt.prototype.constructor=xt;var Ct=xt,jt={};function Pt(e,t){if(e.hasChildNodes())for(var o,n,r,i=e.childNodes,s=0;s<i.length;s++){if(1===(o=i[s]).nodeType)if(n=o.localName||o.baseName||o.nodeName,r=o.prefix||jt.DEFAULTPREFIX,jt.READERS[r][n])(0,jt.READERS[r][n])(o,t);else Pt(o,t)}}function Tt(e){var t,o="";return e.hasChildNodes()&&3===(t=e.firstChild).nodeType&&(o=t.nodeValue),o}jt.VERSION="1.2",jt.NAMESPACES={xmlns:"http://www.opengis.net/xls",gml:"http://www.opengis.net/gml",xls:"http://www.opengis.net/xls",xlsext:"http://www.opengis.net/xlsext",xsi:"http://www.w3.org/2001/XMLSchema-instance"},jt.SCHEMALOCATION="http://wxs.ign.fr/schemas/olsAll.xsd",jt.DEFAULTPREFIX="xls",jt.READERS={xls:{XLS:function(e){var t=new Et;return function(e){if(e.attributes.length>0){var t=function(e){if(e.attributes.length>0){for(var t={},o=e.attributes,n=0;n<o.length;n++){var r=o[n];t[r.nodeName]=r.nodeValue}return t}}(e);for(var o in t)if(t.hasOwnProperty(o)){if("version"===o&&t.version!==jt.VERSION)return void console.log("[DirectGeocodeResponseReader] geocode version is not the expected one : there may be errors in parsing");if("xmlns"===o){if(t[o]!==jt.NAMESPACES[jt.DEFAULTPREFIX])return void console.log("[DirectGeocodeResponseReader] geocode response default namespace is not the expected one");continue}var n=o.split(":")[0],r=o.split(":")[1];if("xmlns"===n&&r&&jt.NAMESPACES[r]&&jt.NAMESPACES[r]!==t[o])return void console.log("[DirectGeocodeResponseReader] geocode response "+o+" namespace is not the expected one");if("schemaLocation"===r&&jt.SCHEMALOCATION!==t[o])return void console.log("[DirectGeocodeResponseReader] geocode response schema location is not the expected one")}}}(e),Pt(e,t),t},GeocodedAddress:function(e,t){var o=new Ct;Pt(e,o),t&&Array.isArray(t.locations)&&t.locations.push(o)},GeocodeMatchCode:function(e,t){var o=e.getAttribute("accuracy");o&&t&&(t.accuracy=parseFloat(o));var n=e.getAttribute("matchType");n&&t&&(t.matchType=n)},Address:function(e,t){var o=e.getAttribute("countryCode");t&&o&&(t.type=o),Pt(e,t)},freeFormAddress:function(e,t){t&&t.hasOwnProperty("placeAttributes")&&(t.placeAttributes.freeform=Tt(e))},Building:function(e,t){var o=e.getAttribute("number");t&&t.hasOwnProperty("placeAttributes")&&(o?t.placeAttributes.number=o:e.getAttribute("buildingName")?t.placeAttributes.number=e.getAttribute("buildingName"):e.getAttribute("subdivision")&&(t.placeAttributes.number=e.getAttribute("subdivision")))},Street:function(e,t){t&&t.hasOwnProperty("placeAttributes")&&("StreetAddress"===t.type?t.placeAttributes.street=Tt(e):"CadastralParcel"===t.type&&(t.placeAttributes.cadastralParcel=Tt(e)))},Place:function(e,t){var o=e.getAttribute("type"),n=Tt(e);if(t&&t.hasOwnProperty("placeAttributes"))if("Municipality"===o)t.placeAttributes.municipality=n;else if("Bbox"===o){var r=n.split(";");4===r.length&&(t.placeAttributes.bbox={left:parseFloat(r[0]),right:parseFloat(r[2]),top:parseFloat(r[1]),bottom:parseFloat(r[3])})}else"Commune"===o?t.placeAttributes.commune=n:"Departement"===o?t.placeAttributes.department=n:"INSEE"===o?t.placeAttributes.insee=n:"Qualite"===o?t.placeAttributes.quality=n:"Territoire"===o?t.placeAttributes.territory=n:"ID"===o?t.placeAttributes.ID=n:"ID_TR"===o?t.placeAttributes.IDTR=n:"Importance"===o?t.placeAttributes.importance=parseInt(n,10):"Nature"===o?t.placeAttributes.nature=n:"Numero"===o?t.placeAttributes.number=n:"Feuille"===o?t.placeAttributes.sheet=n:"Section"===o?t.placeAttributes.section=n:"CommuneAbsorbee"===o?t.placeAttributes.absorbedCity=n:"Arrondissement"===o?n&&(t.placeAttributes.arrondissement=n):"Type"===o?t.placeAttributes.origin=n:"Prefecture"===o?t.placeAttributes.prefecture=n:"InseeRegion"===o?t.placeAttributes.inseeRegion=n:"InseeDepartment"===o&&(t.placeAttributes.inseeDepartment=n)},PostalCode:function(e,t){t&&t.hasOwnProperty("placeAttributes")&&(t.placeAttributes.postalCode=Tt(e))},Error:function(e){var t=e.getAttribute("message"),o=e.getAttribute("errorCode"),n=_.getMessage("SERVICE_RESPONSE_EXCEPTION","("+o+") : "+t);throw new w({message:n,type:w.TYPE_SRVERR})}},gml:{pos:function(e,t){var o=Tt(e);t&&o&&(t.position={x:parseFloat(o.split(" ")[0]),y:parseFloat(o.split(" ")[1])})}},ExceptionReport:function(e){var t={};if(e.hasChildNodes())for(var o,n=e.childNodes,r=0;r<n.length;r++)"Exception"===(o=n[r]).nodeName&&(t.exceptionReport=jt.READERS.Exception(o));return t},Exception:function(e){var t={},o=e.getAttribute("exceptionCode");o&&(t.exceptionCode=o);var n=e.firstChild;return n&&3===n.nodeType&&(t.exception=n.nodeValue),t}},jt.read=function(e){if("XLS"===e.nodeName){var t=e.prefix;return t||(t=jt.DEFAULTPREFIX),jt.READERS[t][e.nodeName](e)}if("ExceptionReport"===e.nodeName)return jt.READERS[e.nodeName](e);var o=_.getMessage("SERVICE_RESPONSE_ANALYSE",e.nodeName);throw new w({message:o,type:w.TYPE_UNKERR,status:200})};var At=jt,Mt={build:function(e){var t=null;if(e.response){if(e.rawResponse)t=e.response;else{try{var o=new Z({reader:At});if("string"==typeof e.response?o.setXMLString(e.response):o.setXMLDoc(e.response),!(t=o.parse()))throw new Error("L'analyse de la rÃ©ponse du service !?")}catch(t){var n=t.message;return"string"==typeof e.response?n+="('"+e.response+"')":n+="('"+e.response.documentElement.innerHTML+"')",void e.onError.call(e.scope,new w({message:_.getMessage("SERVICE_RESPONSE_ANALYSE",n),type:w.TYPE_UNKERR,status:-1}))}if(t.exceptionReport)return void e.onError.call(e.scope,new w({message:_.getMessage("SERVICE_RESPONSE_EXCEPTION",t.exceptionReport),type:w.TYPE_SRVERR,status:200}))}e.onSuccess.call(e.scope,t)}else e.onError.call(e.scope,new w({message:_.getMessage("SERVICE_RESPONSE_EMPTY"),type:w.TYPE_SRVERR,status:-1}))}};function It(e){return(It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rt(e){if(!(this instanceof Rt))throw new TypeError(_.getMessage("CLASS_CONSTRUCTOR","Geocode"));if(this.CLASSNAME="Geocode",L.apply(this,arguments),this.logger=v.getLogger("Gp.Services.Geocode"),this.logger.trace("[Constructeur Geocode (options)]"),!e.location)throw new Error(_.getMessage("PARAM_MISSING","location"));if("object"===It(e.location)&&0===Object.keys(e.location).length)throw new Error(_.getMessage("PARAM_EMPTY","location"));if("string"==typeof e.location&&0===e.location.length)throw new Error(_.getMessage("PARAM_EMPTY","location"));this.options.location=e.location,e.filterOptions&&"object"===It(e.filterOptions)||(this.options.filterOptions=e.filterOptions={type:["StreetAddress"]}),0===Object.keys(e.filterOptions).length&&(this.options.filterOptions={type:["StreetAddress"]});for(var t=Object.keys(e.filterOptions),o=0;o<t.length;o++){var n=t[o],r=["department","number","postalCode","insee","importance","ID","IDTR","absorbedCity","sheet","section","inseeRegion","inseeDepartment"];-1!==r.indexOf(n)&&"string"!=typeof e.filterOptions[n]&&(e.filterOptions[n]=e.filterOptions[n].toString()),e.filterOptions[n]||delete this.options.filterOptions[n]}this.options.filterOptions.type=e.filterOptions.type||["StreetAddress"],this.options.maximumResponses=e.maximumResponses||25,this.options.returnFreeForm=e.returnFreeForm||!1,this.options.srs=e.srs||"EPSG:4326",this.options.outputFormat=this.options.rawResponse?"":"xml"}Rt.prototype=Object.create(L.prototype,{}),Rt.prototype.constructor=Rt,Rt.prototype.buildRequest=function(e,t){var o={httpMethod:this.options.httpMethod,location:this.options.location,returnFreeForm:this.options.returnFreeForm,filterOptions:this.options.filterOptions,srs:this.options.srs,maximumResponses:this.options.maximumResponses};this.request=bt.build(o),this.request?t.call(this,this.request):e.call(this,new w(_.getMessage("SERVICE_REQUEST_BUILD")))},Rt.prototype.analyzeResponse=function(e,t){if(this.response){var o={response:this.response,rawResponse:this.options.rawResponse,onError:e,onSuccess:t,scope:this};Mt.build(o)}else e.call(this,new w(_.getMessage("SERVICE_RESPONSE_EMPTY")))};var Lt=Rt,kt={build:function(e){var t=v.getLogger("ReverseGeocodeRequestFactory");t.trace(["ReverseGeocodeRequestFactory::build()"]);var o=e||{},n=null,r=new ct({position:o.position,returnFreeForm:o.returnFreeForm,filterOptions:o.filterOptions}),i=new Ze({srsName:o.srs,maximumResponses:o.maximumResponses});(i.namespace=!0,i.setService(r),n=i.build(),"GET"===o.httpMethod)&&(n="qxml="+encodeURIComponent(n).replace(/-/g,"%2D").replace(/_/g,"%5F").replace(/\./g,"%2E").replace(/!/g,"%21").replace(/~/g,"%7E").replace(/\*/g,"%2A").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29"));return t.trace(n),n}};function Gt(){if(!(this instanceof Gt))throw new TypeError("ReverseGeocodedLocation constructor cannot be called as a function.");St.apply(this,arguments),this.CLASSNAME="ReverseGeocodedLocation",this.searchCenterDistance=null}Gt.prototype=Object.create(St.prototype),Gt.prototype.constructor=Gt;var Nt=Gt,Dt={};function Ft(e,t){if(e.hasChildNodes())for(var o,n,r,i=e.childNodes,s=0;s<i.length;s++){if(1===(o=i[s]).nodeType)if(n=o.localName||o.baseName||o.nodeName,r=o.prefix||Dt.DEFAULTPREFIX,Dt.READERS[r][n])(0,Dt.READERS[r][n])(o,t);else Ft(o,t)}}function Ut(e){var t,o="";return e.hasChildNodes()&&3===(t=e.firstChild).nodeType&&(o=t.nodeValue),o}Dt.VERSION="1.2",Dt.NAMESPACES={xmlns:"http://www.opengis.net/xls",gml:"http://www.opengis.net/gml",xls:"http://www.opengis.net/xls",xlsext:"http://www.opengis.net/xlsext",xsi:"http://www.w3.org/2001/XMLSchema-instance"},Dt.SCHEMALOCATION="http://wxs.ign.fr/schemas/olsAll.xsd",Dt.DEFAULTPREFIX="xls",Dt.READERS={xls:{XLS:function(e){var t=new Et;return function(e){if(e.attributes.length>0){var t=function(e){if(e.attributes.length>0){for(var t={},o=e.attributes,n=0;n<o.length;n++){var r=o[n];t[r.nodeName]=r.nodeValue}return t}}(e);for(var o in t)if(t.hasOwnProperty(o)){if("version"===o&&t.version!==Dt.VERSION)return void console.log("[ReverseGeocodeResponseReader] geocode version is not the expected one : there may be errors in parsing");if("xmlns"===o){if(t[o]!==Dt.NAMESPACES[Dt.DEFAULTPREFIX])return void console.log("[ReverseGeocodeResponseReader] geocode response default namespace is not the expected one");continue}var n=o.split(":")[0],r=o.split(":")[1];if("xmlns"===n&&r&&Dt.NAMESPACES[r]&&Dt.NAMESPACES[r]!==t[o])return void console.log("[ReverseGeocodeResponseReader] geocode response "+o+" namespace is not the expected one");if("schemaLocation"===r&&Dt.SCHEMALOCATION!==t[o])return void console.log("[ReverseGeocodeResponseReader] geocode response schema location is not the expected one")}}}(e),Ft(e,t),t},ReverseGeocodedLocation:function(e,t){var o=new Nt;Ft(e,o),t&&Array.isArray(t.locations)&&t.locations.push(o)},Address:function(e,t){var o=e.getAttribute("countryCode");t&&o&&(t.type=o),Ft(e,t)},Building:function(e,t){var o=e.getAttribute("number");t&&t.hasOwnProperty("placeAttributes")&&(o?t.placeAttributes.number=o:e.getAttribute("buildingName")?t.placeAttributes.number=e.getAttribute("buildingName"):e.getAttribute("subdivision")&&(t.placeAttributes.number=e.getAttribute("subdivision")))},Street:function(e,t){"StreetAddress"===t.type?t.placeAttributes.street=Ut(e):"CadastralParcel"===t.type&&(t.placeAttributes.cadastralParcel=Ut(e))},Place:function(e,t){var o=e.getAttribute("type"),n=Ut(e);if(t&&t.hasOwnProperty("placeAttributes"))if("Municipality"===o)t.placeAttributes.municipality=n;else if("Bbox"===o){var r=n.split(";");4===r.length&&(t.placeAttributes.bbox={left:parseFloat(r[0]),right:parseFloat(r[2]),top:parseFloat(r[1]),bottom:parseFloat(r[3])})}else"Commune"===o?t.placeAttributes.commune=n:"Departement"===o?t.placeAttributes.department=n:"INSEE"===o?t.placeAttributes.insee=n:"Qualite"===o?t.placeAttributes.quality=n:"Territoire"===o?t.placeAttributes.territory=n:"ID"===o?t.placeAttributes.ID=n:"ID_TR"===o?t.placeAttributes.IDTR=n:"Importance"===o?t.placeAttributes.importance=parseInt(n,10):"Nature"===o?t.placeAttributes.nature=n:"Numero"===o?t.placeAttributes.number=n:"Feuille"===o?t.placeAttributes.sheet=n:"Section"===o?t.placeAttributes.section=n:"CommuneAbsorbee"===o?t.placeAttributes.absorbedCity=n:"Arrondissement"===o?n&&(t.placeAttributes.arrondissement=n):"Type"===o?t.placeAttributes.origin=n:"Prefecture"===o?t.placeAttributes.prefecture=n:"InseeRegion"===o?t.placeAttributes.inseeRegion=n:"InseeDepartment"===o&&(t.placeAttributes.inseeDepartment=n)},PostalCode:function(e,t){t&&t.hasOwnProperty("placeAttributes")&&(t.placeAttributes.postalCode=Ut(e))},SearchCentreDistance:function(e,t){t&&(t.searchCenterDistance=parseFloat(e.getAttribute("value")))},Error:function(e){var t=e.getAttribute("message"),o=e.getAttribute("errorCode"),n=_.getMessage("SERVICE_RESPONSE_EXCEPTION","("+o+") : "+t);throw new w({message:n,type:w.TYPE_SRVERR})}},gml:{pos:function(e,t){var o=Ut(e);t&&o&&(t.position={x:parseFloat(o.split(" ")[0]),y:parseFloat(o.split(" ")[1])})}},xlsext:{ExtendedGeocodeMatchCode:function(e,t){t&&(t.matchType=Ut(e))}},ExceptionReport:function(e){var t={};if(e.hasChildNodes())for(var o,n=e.childNodes,r=0;r<n.length;r++)"Exception"===(o=n[r]).nodeName&&(t.exceptionReport=Dt.READERS.Exception(o));return t},Exception:function(e){var t={},o=e.getAttribute("exceptionCode");o&&(t.exceptionCode=o);var n=e.firstChild;return n&&3===n.nodeType&&(t.exception=n.nodeValue),t}},Dt.read=function(e){if("XLS"===e.nodeName){var t=e.prefix;return t||(t=Dt.DEFAULTPREFIX),Dt.READERS[t][e.nodeName](e)}if("ExceptionReport"===e.nodeName)return Dt.READERS[e.nodeName](e);throw new Error("Erreur lors de la lecture de la rÃ©ponse : elle n'est pas au format attendu.")};var Bt=Dt,zt={build:function(e){var t=null;if(e.response){if(e.rawResponse)t=e.response;else{try{var o=new Z({reader:Bt});if("string"==typeof e.response?o.setXMLString(e.response):o.setXMLDoc(e.response),!(t=o.parse()))throw new Error("L'analyse de la rÃ©ponse du service !?")}catch(t){return t.status=200,void e.onError.call(e.scope,t)}if(t.exceptionReport)return void e.onError.call(e.scope,new w({message:_.getMessage("SERVICE_RESPONSE_EXCEPTION",t.exceptionReport),type:w.TYPE_SRVERR,status:200}));var n,r;if(e.scope&&e.scope.options&&e.scope.options.srs&&"EPSG:4326"!==e.scope.options.srs)if(t.locations)for(var i=0;i<t.locations.length;i++)(n=t.locations[i])&&(r=n.position)&&(n.position={x:r.y,y:r.x})}e.onSuccess.call(e.scope,t)}else e.onError.call(e.scope,new w({message:_.getMessage("SERVICE_RESPONSE_EMPTY"),type:w.TYPE_SRVERR,status:-1}))}};function Vt(e){return(Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wt(e){if(!(this instanceof Wt))throw new TypeError(_.getMessage("CLASS_CONSTRUCTOR","ReverseGeocode"));if(this.CLASSNAME="ReverseGeocode",L.apply(this,arguments),this.logger=v.getLogger("Gp.Services.ReverseGeocode"),this.logger.trace("[Constructeur ReverseGeocode (options)]"),!e.position)throw new Error(_.getMessage("PARAM_MISSING","position"));if(null===e.position.x)throw new Error(_.getMessage("PARAM_MISSING","position.x"));if(null===e.position.y)throw new Error(_.getMessage("PARAM_MISSING","position.y"));this.options.position=e.position,e.filterOptions&&"object"===Vt(e.filterOptions)||(this.options.filterOptions=e.filterOptions={type:["StreetAddress"]}),0===Object.keys(e.filterOptions).length&&(this.options.filterOptions={type:["StreetAddress"]});for(var t=Object.keys(e.filterOptions),o=0;o<t.length;o++){var n=t[o];e.filterOptions[n]&&0!==Object.keys(e.filterOptions[n]).length||delete this.options.filterOptions[n]}if(this.options.filterOptions.type=e.filterOptions.type||["StreetAddress"],!Array.isArray(this.options.filterOptions.type))throw new Error(_.getMessage("PARAM_TYPE","filterOptions.type"));if(this.options.maximumResponses=e.maximumResponses||25,this.options.returnFreeForm=e.returnFreeForm||!1,this.options.srs=e.srs||"CRS:84",-1===Wt.geoEPSG.indexOf(this.options.srs)){if(this.options.position={x:this.options.position.y,y:this.options.position.x},this.options.filterOptions&&this.options.filterOptions.circle){var r=this.options.filterOptions.circle;this.options.filterOptions.circle={x:r.y,y:r.x,radius:r.radius}}if(this.options.filterOptions&&this.options.filterOptions.polygon){var i=this.options.filterOptions.polygon;for(o=0;o<i.length;o++){var s=i[o];this.options.filterOptions.polygon[o]={x:s.y,y:s.x}}}}this.options.outputFormat=this.options.rawResponse?"":"xml"}Wt.prototype=Object.create(L.prototype,{}),Wt.prototype.constructor=Wt,Wt.prototype.buildRequest=function(e,t){var o={httpMethod:this.options.httpMethod,position:this.options.position,returnFreeForm:this.options.returnFreeForm,filterOptions:this.options.filterOptions,srs:"EPSG:4326",maximumResponses:this.options.maximumResponses};this.request=kt.build(o),this.request?t.call(this,this.request):e.call(this,new w(_.getMessage("SERVICE_REQUEST_BUILD")))},Wt.prototype.analyzeResponse=function(e,t){if(this.response){var o={response:this.response,rawResponse:this.options.rawResponse,onError:e,onSuccess:t,scope:this};zt.build(o)}else e.call(this,new w(_.getMessage("SERVICE_RESPONSE_EMPTY")))},Wt.geoEPSG=["EPSG:4326"];var qt=Wt;function Ht(){if(!(this instanceof Ht))throw new TypeError("AutoCompleteResponse constructor cannot be called as a function.");this.suggestedLocations=[]}Ht.prototype={constructor:Ht};var Yt=Ht;function Xt(){if(!(this instanceof Xt))throw new TypeError("SuggestedLocation constructor cannot be called as a function.");this.type=null,this.position={x:null,y:null},this.commune=null,this.fullText=null,this.postalCode=null,this.classification=null,this.street=null,this.poi=null,this.kind=null}Xt.prototype={constructor:Xt};var Zt=Xt,Kt={build:function(e){var t=v.getLogger("AutoCompleteResponseFactory");t.trace(["AutoCompleteResponseFactory::build()"]);var o=null;if(e.response){if(e.rawResponse)t.trace("analyze response : raw"),o=e.response;else{var n=null;if(n="string"==typeof e.response?JSON.parse(e.response):e.response){if(n.error)return void e.onError.call(e.scope,new w({message:_.getMessage("SERVICE_RESPONSE_EXCEPTION",n.error.description),status:n.error.code,type:w.TYPE_SRVERR}));if(o=new Yt,!n.results||!Array.isArray(n.results))return void e.onError.call(e.scope,new w(_.getMessage("SERVICE_RESPONSE_FORMAT_3")));for(var r=null,i=0;i<n.results.length;i++){var s=n.results[i];r=new Zt,s&&("StreetAddress"===s.country?(r.street=s.street,r.type="StreetAddress"):"PositionOfInterest"===s.country&&(r.poi=s.street,r.kind=s.kind,r.type="PositionOfInterest"),r.position&&(r.position.x=s.x,r.position.y=s.y),r.commune=s.city,r.fullText=s.fulltext,r.postalCode=s.zipcode,r.classification=s.classification),o.suggestedLocations.push(r)}if(!o.suggestedLocations.length)return void e.onError.call(e.scope,new w(_.getMessage("SERVICE_RESPONSE_FORMAT_3")))}if(!o)return void e.onError.call(e.scope,new w({message:_.getMessage("SERVICE_RESPONSE_ANALYSE_2"),type:w.TYPE_UNKERR,status:-1}));if(o.exceptionReport)return void e.onError.call(e.scope,new w({message:_.getMessage("SERVICE_RESPONSE_EXCEPTION",o.exceptionReport),type:w.TYPE_SRVERR,status:200}))}e.onSuccess.call(e.scope,o)}else e.onError.call(e.scope,new w(_.getMessage("SERVICE_RESPONSE_EMPTY")))}};function Jt(e){return(Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qt(e){if(!(this instanceof Qt))throw new TypeError(_.getMessage("CLASS_CONSTRUCTOR","AutoComplete"));if(this.CLASSNAME="AutoComplete",L.apply(this,arguments),this.logger=v.getLogger("Gp.Services.AutoComplete"),this.logger.trace("[Constructeur AutoComplete (options)]"),!e.text)throw new Error(_.getMessage("PARAM_MISSING","text"));this.options.text=e.text,e.filterOptions&&"object"===Jt(e.filterOptions)||(this.options.filterOptions=e.filterOptions={territory:[],type:["StreetAddress"]}),0===Object.keys(e.filterOptions).length&&(this.options.filterOptions={territory:[],type:["StreetAddress"]}),this.options.filterOptions.type=e.filterOptions.type||["StreetAddress"],this.options.filterOptions.territory=e.filterOptions.territory||[],this.options.maximumResponses=e.maximumResponses||10,"XHR"===this.options.protocol&&"POST"===this.options.httpMethod&&(this.logger.warn("Le service ne gÃ©re pas le mode d'interrogation en POST, on bascule sur du GET !"),this.options.httpMethod="GET"),this.options.outputFormat=this.options.rawResponse?"":"json"}Qt.prototype=Object.create(L.prototype,{}),Qt.prototype.constructor=Qt,Qt.prototype.buildRequest=function(e,t){var o="";this.options.filterOptions.territory&&(o=this.options.filterOptions.territory.join(";"));var n="";this.options.filterOptions.type&&(n=this.options.filterOptions.type.join(",")),this.request=E.normalyzeParameters({text:encodeURIComponent(this.options.text),type:n,terr:o,maximumResponses:this.options.maximumResponses}),this.request?t.call(this,this.request):e.call(this,new w(_.getMessage("SERVICE_REQUEST_BUILD")))},Qt.prototype.analyzeResponse=function(e,t){if(this.response){var o={response:this.response,rawResponse:this.options.rawResponse,onSuccess:t,onError:e,scope:this};Kt.build(o)}else e.call(this,new w(_.getMessage("SERVICE_RESPONSE_EMPTY")))};var $t=Qt;function eo(e){if(!(this instanceof eo))throw new TypeError("RouteParamREST constructor cannot be called as a function.");this.logger=v.getLogger(),this.logger.trace("[Constructeur RouteParamREST ()]"),this.options=e||{},this.resource=this.options.resource,this.start=this.options.startPoint.x+","+this.options.startPoint.y,this.end=this.options.endPoint.x+","+this.options.endPoint.y,this.intermediates=this.options.viaPoints,this.profile=this.options.graph,this.crs=this.options.srs,this.constraints=this.options.constraints,this.optimization=this.options.routePreference,this.getSteps=this.options.geometryInInstructions?"true":"false",this.distanceUnit=this.options.distanceUnit,this.timeUnit=this.options.timeUnit,this.waysAttributes=this.options.waysAttributes}eo.CLASSNAME="RouteParamREST",eo.prototype={constructor:eo,getIntermediates:function(){var e=[];if(0!==this.intermediates.length)for(var t=0;t<this.intermediates.length;t++){var o=this.intermediates[t];e.push(o.x+","+o.y)}return e.join("|")},getWaysAttributes:function(){return this.waysAttributes.join("|")},getProfile:function(){return this.profile},getDistanceUnit:function(){return"m"===this.distanceUnit?"meter":"km"===this.distanceUnit?"kilometer":""},getOptimization:function(){return this.optimization?this.optimization:""},getConstraints:function(){var e=[];if(0!==this.constraints.length)for(var t=0;t<this.constraints.length;t++)e.push(JSON.stringify(this.constraints[t]));return e.join("|")}},eo.prototype.getParams=function(){var e=[];return e.push({k:"resource",v:this.resource}),e.push({k:"start",v:this.start}),e.push({k:"end",v:this.end}),e.push({k:"geometryFormat",v:"geojson"}),this.optimization&&e.push({k:"optimization",v:this.getOptimization()}),this.intermediates&&e.push({k:"intermediates",v:this.getIntermediates()}),this.profile&&e.push({k:"profile",v:this.getProfile()}),this.constraints&&e.push({k:"constraints",v:this.getConstraints()}),this.crs&&e.push({k:"crs",v:this.crs}),this.distanceUnit&&e.push({k:"distanceUnit",v:this.getDistanceUnit()}),this.timeUnit&&e.push({k:"timeUnit",v:this.timeUnit}),this.waysAttributes&&e.push({k:"waysAttributes",v:this.getWaysAttributes()}),e};var to=eo;function oo(e){if(this.logger=v.getLogger("RouteRequestREST"),this.logger.trace("[Constructeur RouteRequestREST ()]"),!(this instanceof oo))throw new TypeError("RouteRequestREST constructor cannot be called as a function.");if(!e)throw new Error(_.getMessage("PARAM_EMPTY","options"));this.settings=e}oo.prototype={requestString:null,constructor:oo,processRequestString:function(){this.logger.warn(" PROTOTYPE !");for(var e=new to(this.settings).getParams(),t="",o=0;o<e.length;o++){var n=e[o];t&&(t+="&"),t+=n.k+"="+n.v}return this.logger.trace(t),this.requestString=t,this.requestString}};var no=oo,ro={build:function(e){v.getLogger("RouteRequestFactory").trace(["RouteRequestFactory::build()"]);var t=e||{},o=!(null===e.onError||"function"!=typeof e.onError),n=null,r=new no(t);if(!r.processRequestString()){if(n="Error process request (rest) !",o)return void e.onError.call(e.scope,new w(n));throw new Error(n)}return r.requestString}};function io(){if(!(this instanceof io))throw new TypeError("RouteResponse constructor cannot be called as a function.");this.totalTime=null,this.totalDistance=null,this.bbox={left:null,right:null,top:null,bottom:null},this.routeGeometry=null,this.routeInstructions=[]}io.prototype={constructor:io};var so=io;function ao(){if(!(this instanceof ao))throw new TypeError("RouteInstruction constructor cannot be called as a function.");this.duration=null,this.distance=null,this.code=null,this.instruction=null,this.geometry=null}ao.prototype={constructor:ao};var lo=ao,co={build:function(e){var t=v.getLogger("RouteResponseFactory");t.trace("RouteResponseFactory::build()");var o=null;if(e.response){if(e.rawResponse)t.trace("analyze response : raw"),o=e.response;else{var n;if(t.trace("analyze response : json"),n="string"==typeof e.response?JSON.parse(e.response):e.response){if(n.message)return void e.onError.call(e.scope,new w(_.getMessage("SERVICE_RESPONSE_EXCEPTION",n.message)));var r=[],i=[],s=[];if((o=new so).hasOwnProperty("totalTime")&&(o.totalTime=parseFloat(n.duration)),o.hasOwnProperty("totalDistance")&&(o.totalDistance=parseFloat(n.distance)),o.hasOwnProperty("bbox")&&(o.bbox.left=parseFloat(n.bbox[0]),o.bbox.bottom=parseFloat(n.bbox[1]),o.bbox.right=parseFloat(n.bbox[2]),o.bbox.top=parseFloat(n.bbox[3])),o.hasOwnProperty("routeGeometry")&&!e.geometryInInstructions&&(o.routeGeometry=n.geometry),o.hasOwnProperty("routeInstructions")&&e.geometryInInstructions){var a,l=n.portions;if(Array.isArray(l)&&l.length)for(a=0;a<l.length;a++)r.push(l[a]);if(r.length)for(a=0;a<r.length;a++)i.push(r[a].steps);if(i.length)for(a=0;a<i.length;a++)s=s.concat(i[a]);s.forEach((function(e){switch(o.routeInstructions.push(new lo),o.routeInstructions[o.routeInstructions.length-1].duration=e.duration,o.routeInstructions[o.routeInstructions.length-1].distance=e.distance,o.routeInstructions[o.routeInstructions.length-1].code="",o.routeInstructions[o.routeInstructions.length-1].instruction="",o.routeInstructions[o.routeInstructions.length-1].geometry=e.geometry,"Valeur non renseignÃ©e"===e.name&&(e.name=""),e.instruction.type){case"turn":o.routeInstructions[o.routeInstructions.length-1].instruction+="Tourner";break;case"new name":o.routeInstructions[o.routeInstructions.length-1].instruction+="Continuer tout droit";break;case"depart":o.routeInstructions[o.routeInstructions.length-1].instruction+="DÃ©part";break;case"arrive":o.routeInstructions[o.routeInstructions.length-1].instruction+="ArrivÃ©e";break;case"merge":o.routeInstructions[o.routeInstructions.length-1].instruction+="Rejoindre";break;case"ramp":case"on ramp":o.routeInstructions[o.routeInstructions.length-1].instruction+="Prendre la bretelle";break;case"off ramp":o.routeInstructions[o.routeInstructions.length-1].instruction+="Prendre la sortie";break;case"fork":o.routeInstructions[o.routeInstructions.length-1].instruction+="Sur la bifurcation, prendre";break;case"end of road":o.routeInstructions[o.routeInstructions.length-1].instruction+="Ã la fin de la route, prendre";break;case"use lane":o.routeInstructions[o.routeInstructions.length-1].instruction+="Utiliser la file";break;case"continue":o.routeInstructions[o.routeInstructions.length-1].instruction+="Continuer";break;case"roundabout":case"rotary":o.routeInstructions[o.routeInstructions.length-1].instruction+="Au rond-point";break;case"roundabout turn":o.routeInstructions[o.routeInstructions.length-1].instruction+="Au rond point, tourner";break;case"notification":o.routeInstructions[o.routeInstructions.length-1].instruction+="";break;default:o.routeInstructions[o.routeInstructions.length-1].instruction+="?"+e.instruction.type+"?"}if(e.instruction.modifier)switch(e.instruction.modifier){case"uturn":o.routeInstructions[o.routeInstructions.length-1].instruction="Faire demi-tour";break;case"sharp right":o.routeInstructions[o.routeInstructions.length-1].instruction+=" complÃ¨tement Ã  droite";break;case"right":o.routeInstructions[o.routeInstructions.length-1].instruction+=" Ã  droite";break;case"slight right":o.routeInstructions[o.routeInstructions.length-1].instruction+=" lÃ©gÃ¨rement Ã  droite";break;case"straight":o.routeInstructions[o.routeInstructions.length-1].instruction="Continuer tout droit";break;case"slight left":o.routeInstructions[o.routeInstructions.length-1].instruction+=" lÃ¨gÃ¨rement Ã  gauche";break;case"left":o.routeInstructions[o.routeInstructions.length-1].instruction+=" Ã  gauche";break;case"sharp left":o.routeInstructions[o.routeInstructions.length-1].instruction+=" complÃ¨tement Ã  gauche";break;default:o.routeInstructions[o.routeInstructions.length-1].instruction+=" ?"+e.instruction.modifier+"?"}e.instruction.exit&&(o.routeInstructions[o.routeInstructions.length-1].instruction+="".concat(e.instruction.exit,"e sortie")),e.attributes.name&&((e.attributes.name.nom_1_droite||e.attributes.name.toponyme)&&(o.routeInstructions[o.routeInstructions.length-1].instruction+=" sur"),e.attributes.name.nom_1_droite&&(o.routeInstructions[o.routeInstructions.length-1].instruction+=" ".concat(e.attributes.name.nom_1_droite)),e.attributes.name.toponyme&&(o.routeInstructions[o.routeInstructions.length-1].instruction+=" ".concat(e.attributes.name.toponyme)))}))}}if(!o)return void e.onError.call(e.scope,new w(_.getMessage("SERVICE_RESPONSE_ANALYSE","json")));if(o.exceptionReport)return void e.onError.call(e.scope,new w(_.getMessage("SERVICE_RESPONSE_EXCEPTION_2")))}e.onSuccess.call(e.scope,o)}else e.onError.call(e.scope,new w(_.getMessage("SERVICE_RESPONSE_EMPTY")))}};function uo(e){if(!(this instanceof uo))throw new TypeError(_.getMessage("CLASS_CONSTRUCTOR","Route"));if(this.CLASSNAME="Route",L.apply(this,arguments),this.logger=v.getLogger("Gp.Services.Route"),this.logger.trace("[Constructeur Route (options)]"),!e.startPoint)throw new Error(_.getMessage("PARAM_MISSING","startPoint"));if(null===e.startPoint.x)throw new Error(_.getMessage("PARAM_MISSING","startPoint.x"));if(null===e.startPoint.y)throw new Error(_.getMessage("PARAM_MISSING","startPoint.y"));if(!e.endPoint)throw new Error(_.getMessage("PARAM_MISSING","endPoint"));if(null===e.endPoint.x)throw new Error(_.getMessage("PARAM_MISSING","endPoint.x"));if(null===e.endPoint.y)throw new Error(_.getMessage("PARAM_MISSING","endPoint.y"));if(e.outputFormat&&"json"!==e.outputFormat&&this.logger.warn("options.outputFormat could only be json"),this.options.outputFormat="json",this.options.resource=e.resource||"bdtopo-osrm",this.options.startPoint=e.startPoint,this.options.endPoint=e.endPoint,this.options.viaPoints=e.viaPoints||[],this.options.routePreference=e.routePreference||"fastest",e.graph?("Voiture"===e.graph&&(this.options.graph="car"),"Pieton"===e.graph&&(this.options.graph="pedestrian")):this.options.graph="car",this.options.constraints=[],e.constraints){if(!Array.isArray(e.constraints))throw new Error(_.getMessage("PARAM_TYPE","constraints"));for(var t=0;t<e.constraints.length;t++)this.options.constraints.push(e.constraints[t])}var o={},n={},r={};if(e.exclusions&&0!==e.exclusions.length){this.logger.warn("options.exclusions is DEPRECATED !!");for(var i=0;i<e.exclusions.length;i++)"string"==typeof e.exclusions[i]&&(e.exclusions[i]=e.exclusions[i].toLowerCase(),"toll"===e.exclusions[i]&&(r.constraintType="banned",r.key="wayType",r.operator="=",r.value="autoroute",this.options.constraints.push(r)),"tunnel"===e.exclusions[i]&&(o.constraintType="banned",o.key="wayType",o.operator="=",o.value="tunnel",this.options.constraints.push(o)),"bridge"===e.exclusions[i]&&(n.constraintType="banned",n.key="wayType",n.operator="=",n.value="pont",this.options.constraints.push(n)))}if(this.options.geometryInInstructions=e.geometryInInstructions||!1,this.options.provideBbox=e.provideBbox||!0,this.options.distanceUnit=e.distanceUnit||"m",this.options.timeUnit=e.timeUnit||"second",this.options.expectedStartTime=null,this.options.srs=e.srs||"EPSG:4326",this.options.waysAttributes=e.waysAttributes||[],!this.options.serverUrl){var s=M.Route.url(this.options.apiKey);if(!s)throw new Error("Url by default not found !");this.options.serverUrl=s,this.logger.trace("Serveur URL par defaut : "+this.options.serverUrl)}}uo.prototype=Object.create(L.prototype,{}),uo.prototype.constructor=uo,uo.prototype.buildRequest=function(e,t){var o={resource:this.options.resource,startPoint:this.options.startPoint,endPoint:this.options.endPoint,viaPoints:this.options.viaPoints,provideBbox:this.options.provideBbox,constraints:this.options.constraints,distanceUnit:this.options.distanceUnit,timeUnit:this.options.timeUnit,graph:this.options.graph,geometryInInstructions:this.options.geometryInInstructions,routePreference:this.options.routePreference,srs:this.options.srs,waysAttributes:this.options.waysAttributes};this.request=ro.build(o),this.request?t.call(this,this.request):e.call(this,new w(_.getMessage("SERVICE_REQUEST_BUILD")))},uo.prototype.analyzeResponse=function(e,t){if(this.response){var o={distanceUnit:this.options.distanceUnit,timeUnit:this.options.timeUnit,response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onError:e,onSuccess:t,scope:this,geometryInInstructions:this.options.geometryInInstructions};co.build(o)}else e.call(this,new w(_.getMessage("SERVICE_RESPONSE_EMPTY")))};var ho=uo;function po(e){if(!(this instanceof po))throw new TypeError("ProcessIsoCurveParam constructor cannot be called as a function.");switch(this.logger=v.getLogger(),this.logger.trace("[Constructeur ProcessIsoCurveParam ()]"),this.options=e||{},this.id=this.options.id,this.location=this.options.position,this.srs=this.options.srs,this.graphName=this.options.graph,this.profileId=this.options.profileId||null,this.profileName=this.options.profileName||null,this.exclusions=this.options.exclusions,this.reverse=this.options.reverse,this.smoothing=this.options.smoothing,this.holes=this.options.holes,this.options.method){case"time":this.method="time",this.time=this.options.time;break;case"distance":this.method="distance",this.distance=this.options.distance;break;default:this.logger.warn("Par defaut, on calcule un isochrone !"),this.method="time"}}po.CLASSNAME="ProcessIsoCurveParam",po.prototype={constructor:po,getLocation:function(){return this.location.x+","+this.location.y},getExclusions:function(){return this.exclusions.join(";")}},po.prototype.getParams=function(){var e=[];return e.push({k:"location",v:this.getLocation()}),e.push({k:"smoothing",v:this.smoothing}),e.push({k:"holes",v:this.holes}),e.push({k:"reverse",v:this.reverse}),e.push({k:"method",v:this.method}),this.time&&e.push({k:"time",v:this.time}),this.distance&&e.push({k:"distance",v:this.distance}),e.push({k:"graphName",v:this.graphName}),this.exclusions&&e.push({k:"exclusions",v:this.getExclusions()}),this.srs&&e.push({k:"srs",v:this.srs}),e};var fo=po;function mo(e){if(this.logger=v.getLogger("ProcessIsoCurveRequest"),this.logger.trace("[Constructeur ProcessIsoCurveRequest ()]"),!(this instanceof mo))throw new TypeError("ProcessIsoCurveRequest constructor cannot be called as a function.");if(!e)throw new Error(_.getMessage("PARAM_EMPTY","options"));this.settings=e,this.mode=this.settings.httpMethod||"GET"}mo.prototype={requestString:null,constructor:mo,template:{container:'<?xml version="1.0" encoding="UTF-8"?>\n<isochroneRequest>\n__ID__\t<location>\n\t\t<x>__X__</x>\n\t\t<y>__Y__</y>\n\t</location>\n\t<srs>__SRS__</srs>\n\t<graphName>__GRAPHNAME__</graphName>\n__PROFIL____EXCLUSIONS__\t<method>__METHOD__</method>\n__TIME____DISTANCE__\t<reverse>__REVERSE__</reverse>\n\t<smoothing>__SMOOTHING__</smoothing>\n\t<holes>__HOLES__</holes>\n</isochroneRequest>',id:"\t<id>__IDVALUE__</id>\n",profil:"\t<profileId>__PROFILID__</profileId>\n\t<profileName>__PROFILNAME__</profileName>\n",exclusions:{container:"\t<exclusions>\n__EXCLUSIONFEATURE__\n\t</exclusions>\n",feature:"\t\t<exclusion>__EXCLUSIONVALUE__</exclusion>"},time:"\t<time>__TIMEVALUE__</time>\n",distance:"\t<distance>__DISTANCEVALUE__</distance>\n"},processRequestString:function(){var e="",t=0;switch(this.mode){case"GET":this.logger.trace("Process GET Request");var o=new fo(this.settings).getParams();for(t=0;t<o.length;t++){var n=o[t];e&&(e+="&"),e+=n.k+"="+n.v}break;case"POST":if(this.logger.trace("Process POST Request"),e=(e=(e=(e=(e=(e=(e=(e=(e=(e=this.template.container).replace(/__ID__/g,"")).replace(/__PROFIL__/g,"")).replace(/__X__/g,this.settings.position.x)).replace(/__Y__/g,this.settings.position.y)).replace(/__GRAPHNAME__/g,this.settings.graph)).replace(/__SRS__/g,this.settings.srs)).replace(/__SMOOTHING__/g,this.settings.smoothing)).replace(/__HOLES__/g,this.settings.holes)).replace(/__REVERSE__/g,this.settings.reverse),this.settings.exclusions){var r=this.template.exclusions.container,i=[];for(t=0;t<this.settings.exclusions.length;t++){var s=this.template.exclusions.feature;s=s.replace(/__EXCLUSIONVALUE__/,this.settings.exclusions[t]),i.push(s)}r=r.replace(/__EXCLUSIONFEATURE__/,i.join("\n")),e=e.replace(/__EXCLUSIONS__/g,r)}if(e=e.replace(/__EXCLUSIONS__/g,""),this.settings.distance){var a=this.template.distance;a=a.replace(/__DISTANCEVALUE__/g,this.settings.distance),e=(e=e.replace(/__DISTANCE__/g,a)).replace(/__METHOD__/g,"distance")}if(e=e.replace(/__DISTANCE__/g,""),this.settings.time){var l=this.template.time;l=l.replace(/__TIMEVALUE__/g,this.settings.time),e=(e=e.replace(/__TIME__/g,l)).replace(/__METHOD__/g,"time")}e=e.replace(/__TIME__/g,"");break;default:this.logger.error("No other HTTP method supported by the service !")}return this.logger.trace(e),this.requestString=e,this.requestString}};var go=mo,yo={toJson:function(e,t,o){var n=v.getLogger(),r=null;try{if(!e)throw new Error("La chaine WKT n'est pas renseignÃ©e !");var i,s;if(t||(t=function(e){console.log(e)}),o||(o=function(e){console.log(e)}),i=/(-?\d+\.?[0-9]*)\s(-?\d+\.?[0-9]+)/g,s="[$1,$2]",e=e.replace(i,s),(i=/^(\w+)/).exec(e),"POLYGON"===RegExp.$1?(s='{"type" : "Polygon",',e=e.replace(RegExp.$1,s),i=/(\({2}?)/,s='"coordinates" : [[',e=e.replace(i,s),i=/(\){2}?)/,s="]]}",e=e.replace(i,s),i=/(\()/g,s="[",e=e.replace(i,s),i=/(\))/g,s="]",e=e.replace(i,s)):"LINESTRING"===RegExp.$1&&(s='{"type" : "LineString",',e=e.replace(RegExp.$1,s),i=/(\(\(?)/,s='"coordinates" : [',e=e.replace(i,s),i=/(\)\)?)/,s="]}",e=e.replace(i,s)),n.trace(e),!(r=JSON.parse(e)))throw new Error("Le JSON est vide !");if(!r.type)throw new Error("Le type de geometrie n'est pas connu !");if(!r.coordinates)throw new Error("La liste des points est vide !");t.call(this,r)}catch(e){if("SyntaxError"===e.name)return void o.call(this,"Erreur de parsing JSON !");o.call(this,e)}}};function vo(){if(!(this instanceof vo))throw new TypeError("ProcessIsoCurveResponse constructor cannot be called as a function.");this.message=null,this.id=null,this.location={},this.location.x=null,this.location.y=null,this.srs=null,this.geometry=null,this.time=null,this.distance=null}vo.prototype={constructor:vo};var _o=vo,bo={};function wo(e){var t,o="";return e.hasChildNodes()&&(t=e.firstChild)&&3===t.nodeType&&(o=t.nodeValue),o}bo.READERS={isochronResult:function(e){var t=new _o;if(e.hasChildNodes())for(var o,n=e.childNodes,r=0;r<n.length;r++)o=n[r],bo.READERS[o.nodeName]&&bo.READERS[o.nodeName](o,t);if("error"===t.status){var i=_.getMessage("SERVICE_RESPONSE_EXCEPTION",t.message);throw new w({message:i,type:w.TYPE_SRVERR})}return t},message:function(e,t){t&&(t.message=wo(e))},status:function(e,t){var o=wo(e);"ERROR"!==o&&"error"!==o||t&&(t.status="error")},id:function(e,t){t&&(t.id=wo(e))},location:function(e,t){var o=wo(e);t&&t.location&&(t.location.x=parseFloat(o.split(",")[0]),t.location.y=parseFloat(o.split(",")[1]))},srs:function(e,t){t&&(t.srs=wo(e))},distance:function(e,t){t&&(t.distance=parseFloat(wo(e)))},time:function(e,t){t&&(t.time=parseFloat(wo(e)))},wktGeometry:function(e,t){if(t){var o=e.innerHTML;t.hasOwnProperty("geometry")&&yo.toJson(o,(function(e){t.geometry=e}),(function(){var e=_.getMessage("PARAM_FORMAT",["wktGeometry"]);throw new Error(e)}))}},serviceResult:function(e){var t={};if(e.hasChildNodes())for(var o,n=e.childNodes,r=0;r<n.length;r++)o=n[r],bo.READERS[o.nodeName]&&bo.READERS[o.nodeName](o,t);return t},ExceptionReport:function(e){var t={};if(e.hasChildNodes())for(var o,n=e.childNodes,r=0;r<n.length;r++)"Exception"===(o=n[r]).nodeName&&(t.exceptionReport=bo.READERS.Exception(o));return t},Exception:function(e){var t={},o=e.getAttribute("exceptionCode");o&&(t.exceptionCode=o);var n=e.firstChild;return n&&3===n.nodeType&&(t.exception=n.nodeValue),t}},bo.read=function(e){var t;if("isochronResult"===e.nodeName||"isochroneResult"===e.nodeName||"IsochroneResult"===e.nodeName)return t=bo.READERS.isochronResult(e);if("ExceptionReport"===e.nodeName)return t=bo.READERS[e.nodeName](e);if(bo.READERS[e.nodeName]){if("error"===(t=bo.READERS[e.nodeName](e)).status){var o=_.getMessage("SERVICE_RESPONSE_EXCEPTION",t.message);throw new w({message:o,type:w.TYPE_SRVERR})}return t}throw new w({message:_.getMessage("SERVICE_RESPONSE_ANALYSE",e.nodeName),type:w.TYPE_UNKERR})};var Eo=bo,Oo={build:function(e){var t=v.getLogger("ProcessIsoCurveResponseFactory");t.trace(["ProcessIsoCurveResponseFactory::build()"]);var o=null;if(e.response){if(e.rawResponse)t.trace("analyze response : raw"),o=e.response;else{switch(e.outputFormat){case"xml":t.trace("analyze response : xml");try{var n=new Z({reader:Eo});if("string"==typeof e.response?n.setXMLString(e.response):n.setXMLDoc(e.response),!(o=n.parse()))throw new Error(_.getMessage("SERVICE_RESPONSE_EXCEPTION_2"))}catch(t){var r=t.message;return r+="\n (raw response service : '"+e.response+"')",void e.onError.call(e.scope,new w({message:_.getMessage("SERVICE_RESPONSE_EXCEPTION",r),status:200,type:w.TYPE_SRVERR}))}break;case"json":t.trace("analyze response : json");var i=null;if(!(i="string"==typeof e.response?JSON.parse(e.response):e.response)||"OK"!==i.status&&"ok"!==i.status){if(i&&("ERROR"===i.status||"error"===i.status)){var s=i.message;return s+="\n (raw response service : '"+i+"')",void e.onError.call(e.scope,new w(_.getMessage("SERVICE_RESPONSE_EXCEPTION",s)))}}else{(o=new _o).time=i.time,o.distance=i.distance,o.message=i.message,o.id=i.id,o.srs=i.srs;if(o.hasOwnProperty("geometry")&&(yo.toJson(i.wktGeometry,(function(e){o.geometry=e}),(function(){e.onError.call(e.scope,new w({message:_.getMessage("PARAM_FORMAT","wktGeometry")}))})),!o.geometry))return void e.onError.call(e.scope,new w(_.getMessage("SERVICE_RESPONSE_ANALYSE",e.response)));var a=i.location.split(",");o.location&&(o.location.x=a[0],o.location.y=a[1])}break;default:return void e.onError.call(e.scope,new w(_.getMessage("SERVICE_RESPONSE_FORMAT","json","xml")))}if(o&&o.exceptionReport)return void e.onError.call(e.scope,new w({message:_.getMessage("SERVICE_RESPONSE_EXCEPTION",o.exceptionReport),type:w.TYPE_SRVERR,status:200}))}e.onSuccess.call(e.scope,o)}else e.onError.call(e.scope,new w(_.getMessage("SERVICE_RESPONSE_EMPTY")))}};function So(e){if(!(this instanceof So))throw new TypeError(_.getMessage("CLASS_CONSTRUCTOR","ProcessIsoCurve"));if(this.CLASSNAME="ProcessIsoCurve",L.apply(this,arguments),this.logger=v.getLogger("Gp.Services.ProcessIsoCurve"),this.logger.trace("[Constructeur ProcessIsoCurve (options)]"),!e.position)throw new Error(_.getMessage("PARAM_MISSING","position"));if(null===e.position.x)throw new Error(_.getMessage("PARAM_MISSING","position.x"));if(null===e.position.y)throw new Error(_.getMessage("PARAM_MISSING","position.y"));if(!e.time&&!e.distance)throw new Error("Parameter (s) 'distance' missing. Parameter time to calculate an isochrone, parameter distance for an isodistance");if(!e.time&&e.distance&&(this.options.method="distance",this.options.time&&delete this.options.time),e.time&&!e.distance&&(this.options.method="time",this.options.distance&&delete this.options.distance),this.options.method=this.options.method||"time",this.options.exclusions=e.exclusions||null,this.options.graph=e.graph||"Voiture",this.options.reverse=e.reverse||!1,this.options.smoothing=e.smoothing||!1,this.options.holes=e.holes||!1,this.options.srs=e.srs||"EPSG:4326",this.options.outputFormat="string"==typeof e.outputFormat?e.outputFormat.toLowerCase():"json",!this.options.serverUrl){var t=M.ProcessIsoCurve.url(this.options.apiKey),o=t["iso-"+this.options.outputFormat];if(!o)throw new Error("Url by default not found !");this.options.serverUrl=o,this.logger.trace("Serveur URL par defaut : "+this.options.serverUrl)}var n=this.options.serverUrl.lastIndexOf(".");if(-1!==n){var r=this.options.serverUrl.substring(n+1);if(r&&r.length<5)switch(this.logger.trace("Serveur Extension URL : "+r),r.toLowerCase()){case"json":case"xml":this.options.outputFormat=r.toLowerCase();break;default:throw new Error("type of service : unknown or unsupported (json or xml) !")}}}So.prototype=Object.create(L.prototype,{}),So.prototype.constructor=So,So.prototype.buildRequest=function(e,t){try{var o=new go(this.options);if(!o.processRequestString())throw new Error(_.getMessage("SERVICE_REQUEST_BUILD"));this.request=o.requestString}catch(t){return void e.call(this,new w(t.message))}t.call(this,this.request)},So.prototype.analyzeResponse=function(e,t){if(this.response){var o={response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onSuccess:t,onError:e,scope:this};Oo.build(o)}else e.call(this,new w(_.getMessage("SERVICE_RESPONSE_EMPTY")))};var xo=So,Co={getConfig:function(e){new Be(e).call()},getAltitude:function(e){new ie(e).call()},geocode:function(e){new Lt(e).call()},reverseGeocode:function(e){new qt(e).call()},autoComplete:function(e){new $t(e).call()},route:function(e){new ho(e).call()},isoCurve:function(e){new xo(e).call()}},jo=I.version,Po=I.date,To={};To.servicesVersion=jo,To.servicesDate=Po,To.Protocols={},To.Protocols.XHR=j,To.Services=Co,To.Services.DefaultUrl=M,To.Services.AltiResponse=J,To.Services.Alti={},To.Services.Alti.Elevation=$,To.Services.AutoCompleteResponse=Yt,To.Services.AutoComplete={},To.Services.AutoComplete.SuggestedLocation=Zt,To.Services.GetConfigResponse=ae,To.Services.Config={},To.Services.Config.Constraint=ce,To.Services.Config.Format=de,To.Services.Config.Layer=pe,To.Services.Config.Legend=me,To.Services.Config.Metadata=ye,To.Services.Config.Originator=_e,To.Services.Config.Service=we,To.Services.Config.Style=Oe,To.Services.Config.Territory=xe,To.Services.Config.Thematic=je,To.Services.Config.TileMatrix=Me,To.Services.Config.TileMatrixLimit=Re,To.Services.Config.TileMatrixSet=Te,To.Services.GeocodeResponse=Et,To.Services.Geocode={},To.Services.Geocode.GeocodedLocation=St,To.Services.Geocode.DirectGeocodedLocation=Ct,To.Services.Geocode.ReverseGeocodedLocation=Nt,To.Services.IsoCurveResponse=_o,To.Services.RouteResponse=so,To.Services.Route={},To.Services.Route.RouteInstruction=lo,To.Error=w,To.Helper=E;var Ao=To,Mo=o("./node_modules/geoportal-extensions-openlayers/src/Common/Utils/LoggerByDefault.js"),Io={proxifyUrl:function(e,t){var o=Mo.a.getLogger("proxifyUrl");if(!t||!t.hasOwnProperty("proxyUrl")||null===t.proxyUrl||0===t.proxyUrl.trim().length)return e;if(t.noProxyDomains&&Array.isArray(t.noProxyDomains)&&t.noProxyDomains.length>0)for(var n in t.noProxyDomains)if(o.trace("[ProxyUtils] proxifyUrl : analyzing "+t.noProxyDomains[n]),-1!==e.indexOf(t.noProxyDomains[n]))return o.info("[ProxyUtils] proxifyUrl : "+e+" found in noProxyDomains list ("+t.noProxyDomains[n]+")."),e;return t.proxyUrl+encodeURIComponent(e)}};function Ro(e){return(Ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Lo=Mo.a.getLogger("GfiUtils"),ko={getLayerFormat:function(e){var t="function"==typeof e.getType?e.getType():null,o=e.getSource();if(t){if("VECTOR"===t||"VECTOR_TILE"===t)return"vector";if("TILE"===t)return o.tileGrid?"wmts":"wms";if("IMAGE"===t)return"wms"}else{if(o instanceof h.a||o instanceof f.a)return"wms";if(o instanceof p.a)return"wmts";if(o instanceof d.b||o instanceof u.a)return"vector"}return"unknown"},displayInfo:function(e,t,n,r,i){if(Lo.trace("[GfiUtils] : displayInfo..."),r||(r="text/html"),null!==n){var s=null,a=n;a=(a=a.replace(/\n/g,"")).replace(/(>)\s*(<)/g,"$1$2");var l="undefined"!=typeof window?window:null;if("object"===("undefined"==typeof exports?"undefined":Ro(exports))&&null===window)s=(new(0,o("xmldom").DOMParser)).parseFromString(a,r);else if(l.DOMParser)s=(new l.DOMParser).parseFromString(a,r);else{if(!l.ActiveXObject)return Lo.log("Incompatible environment for DOM Parser !"),!1;(s=new l.ActiveXObject("Microsoft.XMLDOM")).async=!1,s.loadXML(a)}var u=s.getElementsByTagName("body");if(u&&1===u.length&&!u[0].hasChildNodes())return!1;var d=document.createElement("div");d.className="gp-feature-info-div";var h=document.createElement("input");h.type="button",h.className="gp-styling-button closer",h.onclick=function(){return e.featuresOverlay&&(e.removeOverlay(e.featuresOverlay),e.featuresOverlay=null),!1};var p=document.createElement("div");return p.className="gp-features-content-div",p.innerHTML=n,d.appendChild(p),d.appendChild(h),e.featuresOverlay&&(e.removeOverlay(e.featuresOverlay),e.featuresOverlay=null),e.featuresOverlay=new c.a({element:d,autoPan:i.autoPan,autoPanAnimation:i.autoPanAnimation,autoPanMargin:i.autoPanMargin,positioning:"bottom-center",insertFirst:!1,stopEvent:!0}),e.addOverlay(e.featuresOverlay),e.featuresOverlay.setPosition(t),e.featuresOverlay.render(),!0}},features2html:function(e,t){var o=document.createElement("div");return t.forEach((function(e){var t=e.getProperties();if(t.hasOwnProperty("name")){var n=document.createElement("div");n.className="gp-att-name-div",n.insertAdjacentHTML("afterbegin",t.name),o.appendChild(n)}if(t.hasOwnProperty("description")){var r=document.createElement("div");r.className="gp-att-description-div",r.insertAdjacentHTML("afterbegin",t.description),o.appendChild(r)}var i=null,s=!1,a=null,l=null,c=null;for(i in t)if("geometry"!==i&&"value"!==i&&"name"!==i&&"description"!==i&&"styleUrl"!==i&&("extensionsNode_"!==i||void 0!==t[i])){s||((a=document.createElement("div")).className="gp-att-others-div",l=document.createElement("ul"),s=!0),c=document.createElement("li");var u=document.createElement("span");u.className="gp-attname-others-span",u.appendChild(document.createTextNode(i+" : ")),c.appendChild(u),c.appendChild(document.createTextNode(t[i])),l.appendChild(c)}l&&(a.appendChild(l),o.appendChild(a))}),e),o.hasChildNodes()||(o=null),o},layerGetFeatureAtCoordinates:function(e,t,o){var n=e.getPixelFromCoordinate(o);return e.hasFeatureAtPixel(n,(function(e){return e===t}))},displayVectorFeatureInfo:function(e,t,o,n){var r=e.getPixelFromCoordinate(t),i=[];if(e.forEachFeatureAtPixel(r,(function(e,t){(!o||o.indexOf(t)>-1)&&i.push(e)})),0===i.length)return!1;var s=this.features2html(e,i);return null!==s&&(this.displayInfo(e,t,s.innerHTML,"text/html",n),!0)},displayFeatureInfo:function(e,t,o,n,r){for(var i={},s=0;s<o.length;s++){var a=o[s],l=a.obj.getZIndex();i[l]||(i[l]=[]),i[l].push(a)}var c=[],u=Object.keys(i);u.sort((function(e,t){return t-e}));for(var d=0;d<u.length;d++)for(var h=u[d],p=0;p<i[h].length;++p){var f=i[h][p].obj,m=i[h][p].infoFormat||"text/html",g=!0;if(f.minResolution&&f.minResolution>e.getResolution()&&(g=!1),g&&f.maxResolution&&f.maxResolution<e.getResolution()&&(g=!1),f.getVisible()&&g){var y=this.getLayerFormat(f);if("vector"===y){this.layerGetFeatureAtCoordinates(e,f,t)&&c.push({format:y,scope:this,coordinate:t});continue}if("wms"!==y&&"wmts"!==y){Lo.log("[ERROR] DisplayFeatureInfo - layer format '"+y+"' not allowed");continue}var v=e.getView().getResolution(),_=null;_="wmts"===y?f.getSource().getFeatureInfoUrl.call(f.getSource(),t,v,e.getView().getProjection(),{INFOFORMAT:m}):f.getSource().getFeatureInfoUrl.call(f.getSource(),t,v,e.getView().getProjection(),{INFO_FORMAT:m}),c.push({format:m,url:Io.proxifyUrl(_,n),scope:this,coordinate:t})}}var b=null;var w=this;!function(e,t,o){if(0!==e.length){var n=0;t(e[0],(function r(i){n++,i||n===e.length?o():t(e[n],r)}))}}(c,(function(t,o){if("vector"===t.format){if(!b){b=[];for(var n=0;n<u.length;n++)for(var s=u[n],a=0;a<i[s].length;++a)b.push(i[s][a].obj)}o(t.scope.displayVectorFeatureInfo(e,t.coordinate,b,r))}else Ao.Protocols.XHR.call({url:t.url,method:"GET",scope:t.scope,onResponse:function(n){var i=!1;0!==n.trim().length&&-1===n.indexOf("java.lang.NullPointerException")&&-1===n.indexOf("not queryable")||(i=!0);var s=!i&&w.displayInfo(e,t.coordinate,n,"text/html",r);o(s)},onFailure:function(e){Lo.log(e),o(!1)}})}),(function(){Lo.trace("Finish sync to GFI !")}))},getPosition:function(e,t){if(e.coordinate)return e.coordinate;var o=[0,0];if(e.offsetX||e.offsetY)o[0]=e.offsetX,o[1]=e.offsetY;else if("touch"===e.pointerType){var n=e.pointers[0];o[0]=n.pageX,o[1]=n.pageY}return t.getCoordinateFromPixel(o)},onDisplayFeatureInfo:function(e,t){if(t.isActive()){Lo.trace(e);var o=t.getMap();if("contextmenu"===e.type||"dblclick"===e.type)e.preventDefault();else if("singleclick"===e.type)for(var n=o.getInteractions().getArray(),r=0;r<n.length;r++)if(n[r].getActive()&&(n[r]instanceof m.b||n[r]instanceof g.b||n[r]instanceof y.d))return;var i={};t._proxyUrl&&(i.proxyUrl=t._proxyUrl),t._noProxyDomains&&(i.noProxyDomains=t._noProxyDomains);var s={};t._autoPan&&(s.autoPan=t._autoPan),t._autoPanAnimation&&(s.autoPanAnimation=t._autoPanAnimation),t._autoPanMargin&&(s.autoPanMargin=t._autoPanMargin);for(var a=[],l=0;l<t._layers.length;++l){if((t._layers[l].event?t._layers[l].event:t._defaultEvent)===e.type){var c=a.push(t._layers[l])-1;a[c].infoFormat||(a[c].infoFormat=t._defaultInfoFormat)}}var u=this.getPosition(e,o);this.displayFeatureInfo(o,u,a,i,s)}}},Go=ko;window.ol&&(window.ol.gp?window.ol.gp.GfiUtils=ko:window.ol.gp={GfiUtils:ko});var No=o("./node_modules/ol/format/KML.js"),Do=o("./node_modules/ol/style/Style.js"),Fo=o("./node_modules/ol/style/Icon.js"),Uo=o("./node_modules/ol/style/Text.js"),Bo=o("./node_modules/ol/style/Fill.js"),zo=o("./node_modules/ol/style/Stroke.js");function Vo(e){return(Vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Wo={detectSupport:function(){var e=!0,t=window.navigator.userAgent.toLowerCase();return-1===t.indexOf("iphone")&&-1===t.indexOf("ipod")&&-1===t.indexOf("ipad")&&-1===t.indexOf("android")&&-1===t.indexOf("mobile")&&-1===t.indexOf("blackberry")&&-1===t.indexOf("tablet")&&-1===t.indexOf("phone")&&-1===t.indexOf("touch")||(e=!1),-1===t.indexOf("msie")&&-1===t.indexOf("trident")||(e=!0),e},assign:function(e,t){for(var o in e=e||{},t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e},mergeParams:function(e,t,o){if(e&&t)for(var n in void 0===o&&(o=!0),t)t.hasOwnProperty(n)&&("object"===Vo(t[n])?e.hasOwnProperty(n)?this.mergeParams(e[n],t[n],o):e[n]=t[n]:e.hasOwnProperty(n)?o&&(e[n]=t[n]):e[n]=t[n])}};function qo(e){return(qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ho=Mo.a.getLogger("extended KML format"),Yo=function(e){function t(o){if(!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");e.call(this,o),this.options=o||{}}function n(e){var t=null,n="undefined"!=typeof window?window:null;"object"===("undefined"==typeof exports?"undefined":qo(exports))&&null===window?t=(new(0,o("xmldom").DOMParser)).parseFromString(e,"text/xml"):n.DOMParser?t=(new n.DOMParser).parseFromString(e,"text/xml"):n.ActiveXObject?((t=new n.ActiveXObject("Microsoft.XMLDOM")).async=!1,t.loadXML(e)):Ho.log("Incompatible environment for DOM Parser !");return Ho.trace(t),t}function r(e,t,o){var n=e.documentElement.childNodes,r=n;1===n.length&&"Document"===n[0].nodeName&&(r=n[0].childNodes);for(var i={},s=-1,a=0;a<r.length;a++){var l=r[a];switch(l.nodeName){case"Style":var c=l.attributes[0];if(c&&"id"===c.nodeName){var u=l;i[c.nodeValue]=u}break;case"Placemark":s++;for(var d=l.childNodes,h=!1,p=null,f=null,m=l,g=0;g<d.length;g++)switch(d[g].nodeName){case"Point":h=!0;break;case"Style":p=d[g].childNodes;break;case"styleUrl":var y=d[g].textContent.slice(1);i[y]&&(p=i[y].childNodes);break;case"ExtendedData":f=d[g].childNodes;break;case"name":m=null}if(f){Ho.log("ExtendedData :",f);var v=o.extendedData;v&&"function"==typeof v&&v(t[s],f)}if(m){Ho.log("Name :",m);var _=o.nameData;_&&"function"==typeof _&&_(t[s],m)}if(h&&p&&p.length){for(var b=null,w=null,E=0;E<p.length;E++)switch(p[E].nodeName){case"LabelStyle":b=p[E];break;case"IconStyle":w=p[E]}var O=t[s].getProperties().name,S=t[s].getProperties().description,x=O||S;if(Ho.trace(x),!w&&b){var C=o.labelStyle;C&&"function"==typeof C&&C(t[s],b)}else if(w&&!b){var j=o.iconStyle;j&&"function"==typeof j&&j(t[s],w)}else if(w&&b){var P=o.iconLabelStyle;P&&"function"==typeof P&&P(t[s],w,b)}}break;default:Ho.trace("tag is not processing !")}}}return e&&(t.__proto__=e),t.prototype=Object.create(e.prototype,{}),t.prototype.constructor=t,t.prototype.writeFeatures=function(e,t){return Ho.log("overload : ol.format.KML.writeFeatures"),this._writeExtendStylesFeatures(e,t)},t.prototype._writeExtendStylesFeatures=function(t,o){var i=e.prototype.writeFeatures.call(this,t,o),s=n(i);if(null===s)return i;var a=function(e,t){if((Ho.trace("label with style :",t),e)&&(e.getProperties().name&&e.getStyle()instanceof Do.c)){var o=e.getStyle().getText().getStroke();if(!o)return;var n=a(o.getColor())||a("#FFFFFF"),r=o.getWidth()||"0";if(t&&0===t.getElementsByTagName("LabelStyleSimpleExtensionGroup").length){var i=s.createElement("LabelStyleSimpleExtensionGroup");i.setAttribute("fontFamily","Sans"),i.setAttribute("haloColor",n),i.setAttribute("haloRadius",r),i.setAttribute("haloOpacity","1"),t.appendChild(i)}}function a(e){var t=e.toString(16);"#"===t.charAt(0)&&(t=t.slice(1));var o=1,n=o=(o=parseInt(255*o,10)).toString(16);return n+=t.substr(4,2),n+=t.substr(2,2),(n+=t.substr(0,2)).toLowerCase()}},l=function(e,t){if(Ho.trace("marker with style (hotspot):",t),e&&e.getStyle()instanceof Do.c){var o=e.getStyle().getImage();if(!o)return;var n=0,r=0,i=o.getSize(),a=o.getAnchor();if(a.length&&(n=a[0],r=(r=a[1])===i[1]?0:i[1]-r),t&&0===t.getElementsByTagName("hotSpot").length){var l=s.createElement("hotSpot");l.setAttribute("x",n),l.setAttribute("y",r),l.setAttribute("xunits","pixels"),l.setAttribute("yunits","pixels"),t.appendChild(l)}}};r(s,t,{labelStyle:a,iconStyle:l,iconLabelStyle:function(e,t,o){Ho.trace("write an icon with a label"),l(e,t),a(e,o)},nameData:function(e,t){for(var o=0;o<t.length;o++){if("name"===t[o].nodeName)return}var n=e.getProperties().name;if(n){var r=s.createElement("name");r.innerHTML=n,t.appendChild(r)}}});var c=function(e){var t=(new XMLSerializer).serializeToString(e);return Ho.trace(t),t}(s);c||(c=i);var u=function(e){for(var t="",o=(e=e.replace(/(>)\s*(<)(\/*)/g,"$1\n$2$3").replace(/ *(.*) +\n/g,"$1\n").replace(/(<.+>)(.+\n)/g,"$1\n$2")).split("\n"),n=0,r="other",i={"single->single":0,"single->closing":-1,"single->opening":0,"single->other":0,"closing->single":0,"closing->closing":-1,"closing->opening":0,"closing->other":0,"opening->single":1,"opening->closing":0,"opening->opening":1,"opening->other":1,"other->single":0,"other->closing":-1,"other->opening":0,"other->other":0},s=0;s<o.length;s++){var a=o[s],l=Boolean(a.match(/<.+\/>/)),c=Boolean(a.match(/<\/.+>/)),u=Boolean(a.match(/<[^!].*>/)),d=l?"single":c?"closing":u?"opening":"other",h=r+"->"+d;r=d;var p="";n+=i[h];for(var f=0;f<n;f++)p+="\t";"opening->closing"===h?t=t.substr(0,t.length-1)+a+"\n":t+=p+a+"\n"}return Ho.trace(t),t}(c);return""===u&&(u=i),u},t.prototype.readFeatures=function(e,t){Ho.log("overload : ol.format.KML.readFeatures");var o=this._readExtendStylesFeatures(e,t);return Ho.trace("Styles Ã©tendus",o),o},t.prototype._readExtendStylesFeatures=function(t,o){var i,s=e.prototype.readFeatures.call(this,t,o);if(null===(i=n(("string"==typeof t?t:t.documentElement.outerHTML).replace(/\n/g,"").replace(/(>)\s*(<)/g,"$1$2"))))return s;var a=function(e,t){if(Ho.trace("label with style :",t),e){for(var o=e.getProperties().name||"---",n=d("ff000000"),r="#FFFFFF",i=0,s=!1,a=t.childNodes,l=0;l<a.length;l++)switch(a[l].nodeName){case"scale":case"colorMode":break;case"color":n=d(a[l].textContent);break;case"LabelStyleSimpleExtensionGroup":s=!0;for(var c=a[l].attributes,u=0;u<c.length;u++)switch(c[u].nodeName){case"fontFamily":break;case"haloColor":r=d(c[u].nodeValue);break;case"haloRadius":i=parseInt(c[u].nodeValue,10)}}s?e.setStyle(new Do.c({image:new Fo.a({src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNiYAAAAAkAAxkR2eQAAAAASUVORK5CYII=",size:[51,38],anchor:[25.5,38],anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels"}),text:new Uo.a({font:"16px Sans",textAlign:"left",text:o,fill:new Bo.a({color:n}),stroke:new zo.a({color:r,width:i})})})):Ho.trace("it's not a Label Style Simple Extension Group !")}function d(e){var t="";t+=e.substr(6,2),t+=e.substr(4,2),t+=e.substr(2,2);for(var o=parseInt(t,16).toString(16),n="",r=o.length||0,i=0;i<6-r;i++)n+="0";return(o="#"+n+o).toString(16)}},l=function(e,t){Ho.trace("hotspot :",t);for(var o=null,n=null,r=!1,i=51,s=38,a=!1,l=25.5,c="pixels",u=38,d="pixels",h=t.childNodes,p=0;p<h.length;p++)switch(h[p].nodeName){case"Icon":for(var f=h[p].childNodes,m=0;m<f.length;m++)switch(f[m].nodeName){case"href":o=f[m].textContent;break;case"gx:w":r=!0,i=parseFloat(f[m].textContent);break;case"gx:h":r=!0,s=parseFloat(f[m].textContent)}break;case"hotSpot":a=!0;for(var g=h[p].attributes,y=0;y<g.length;y++)switch(g[y].nodeName){case"x":l=parseFloat(g[y].nodeValue);break;case"y":u=parseFloat(g[y].nodeValue);break;case"yunits":c=g[y].nodeValue;break;case"xunits":d=g[y].nodeValue}break;case"scale":n=parseFloat(h[p].textContent)}var v={src:o,crossOrigin:"anonymous",scale:n||1};r&&Wo.mergeParams(v,{size:[i,s]}),a&&Wo.mergeParams(v,{anchor:[l,u],anchorOrigin:"bottom-left",anchorXUnits:c||"pixels",anchorYUnits:d||"pixels"});var _=e.getStyleFunction();if(_){var b=_(e,0);if(b&&!Array.isArray(b)&&(b=[b]),b&&0!==b.length){var w=1===b.length?b[0]:b[b.length-1];e.setStyle(new Do.c({image:new Fo.a(v),text:w.getText()}))}}};return r(i,s,{labelStyle:this.options.showPointNames?a:null,iconStyle:l,iconLabelStyle:this.options.showPointNames?function(e,t,o){Ho.trace("display icon and label"),a(e,o),l(e,t)}:l,extendedData:function(e,t){if(Ho.trace("extendData :",t),e){for(var o=e.getProperties().name||"",n=e.getProperties().description||"",r=null,i=0;i<t.length;i++){var s=t[i],a=s.attributes[0],l=s.childNodes;if("name"===a.nodeName)switch(a.nodeValue){case"label":o=s.textContent;break;case"title":case"attributetitle":for(var c=0;c<l.length;c++)"value"===l[c].nodeName&&(r=l[c].textContent)}}r&&(n=n?r+" : "+n:r),e.setProperties({name:o,description:n})}}}),s},t}(No.a),Xo=Yo;window.ol&&window.ol.format&&(window.ol.format.KMLExtended=Yo);var Zo=o("./node_modules/ol/extent.js"),Ko=function(e){function t(o){if(!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");e.call(this,o)}return e&&(t.__proto__=e),t.prototype=Object.create(e.prototype,{}),t.prototype.constructor=t,t.prototype.getFeatureInfoUrl=function(e,t,o,n){var r=this.option&&this.options.tilePixelRatio?this.options.tilePixelRatio:1,i=this.tileGrid,s=this.tileGrid.getTileCoordForCoordAndResolution(e,t),a=i.getTileCoordExtent(s),l=function(e,t,o){var n=[0,0,0],r=Object(Zo.k)(),i=e[1],s=e[2],a=t.getTileCoordExtent(e),l=o.getExtent();null!=l&&o.isGlobal()&&(i%=Math.ceil(Object(Zo.N)(l)/Object(Zo.N)(a)),n[0]=e[0],n[1]=i,n[2]=e[2],a=t.getTileCoordExtent(n,r));return Object(Zo.O)(a,l)?[e[0],i,s]:null}(s,i,o);if(!(i.getResolutions().length<=s[0])){var c=i.getResolution(s[0]),u=i.getMatrixIds()[s[0]],d={SERVICE:"WMTS",VERSION:"1.0.0",REQUEST:"GetFeatureInfo",LAYER:this.getLayer(),TILECOL:l[1],TILEROW:l[2],TILEMATRIX:u,TILEMATRIXSET:this.getMatrixSet(),FORMAT:this.getFormat()||"image/png",STYLE:this.getStyle()||"normal"};Wo.assign(d,n);var h=Math.floor((e[0]-a[0])/(c/r)),p=Math.floor((a[3]-e[1])/(c/r)),f=i.getTileSize(s[0]);h=Math.min(h,(f[0]|f)-1),p=Math.max(p,0),d.I=h,d.J=p;var m=this.urls[0];return Ao.Helper.normalyzeUrl(m,d)}},t}(p.a),Jo=Ko;window.ol&&window.ol.source&&(window.ol.source.WMTSExtended=Ko);var Qo=o("./node_modules/ol/tilegrid/WMTS.js"),$o=o("./node_modules/geoportal-extensions-openlayers/src/Common/Utils/Config.js"),en={getZoomLevelFromScaleDenominator:function(e,t){var o={};switch(t){case"EPSG:2154":o={0:104579.224549894,1:52277.5323537905,2:26135.4870785954,3:13066.8913818,4:6533.2286041135,5:3266.5595244627,6:1633.2660045974,7:816.629554986,8:408.3139146768,9:204.1567415109,10:102.0783167832,11:51.0391448966,12:25.5195690743,13:12.7597836936,14:6.379891636,15:3.1899457653,16:1.5949728695,17:.7974864315,18:.3987432149,19:.1993716073,20:.0996858037,21:.0498429018};break;default:o={0:156543.033928041,1:78271.51696402048,2:39135.758482010235,3:19567.87924100512,4:9783.93962050256,5:4891.96981025128,6:2445.98490512564,7:1222.99245256282,8:611.49622628141,9:305.7481131407048,10:152.8740565703525,11:76.43702828517624,12:38.21851414258813,13:19.10925707129406,14:9.554628535647032,15:4.777314267823516,16:2.388657133911758,17:1.194328566955879,18:.5971642834779395,19:.2985821417389697,20:.1492910708694849,21:.0746455354347424}}var n=28e-5*e;for(var r in o)if(o.hasOwnProperty(r)&&o[r]<=n)return r=parseInt(r,10);return 0},getAttributions:function(e){var t=e.zoom,o=[];if(null!=e.originators&&e.visibility)for(var n,r=0,i=e.originators.length;r<i;r++){n=!0;for(var s=e.originators[r],a=e.originators[r].constraints||[],l=0,c=a.length;l<c;l++){var u=a[l];n=!0;var d=this.getZoomLevelFromScaleDenominator(u.maxScaleDenominator,e.crs),h=this.getZoomLevelFromScaleDenominator(u.minScaleDenominator,e.crs)||21;d&&d>t&&(n=!1),n&&h&&h<t&&(n=!1);var p=u.bbox;if(n&&p){n=!1;var f=e.extent;if(f){var m=[p.top,p.left,p.bottom,p.right];if(this.intersects(f,m)){n=!0;break}}}}if(n){var g=s.logo,y=s.url,v=s.name?s.name:"",_=s.attribution,b=document.createElement("div");b.className="gp-control-attribution";var w=null;(w=document.createElement("a")).className="gp-control-attribution-link",w.target="_blank",b.appendChild(w),y&&(w.href=y);var E=null;!!g?(E=document.createElement("img"),w?(E.className="gp-control-attribution-image",w.appendChild(E)):(E.className="",b.appendChild(E)),E.src=g,E.title=_||v,E.style.height="30px",E.style.width="30px"):w.textContent=v||(_||(y||"")),o.push(b.innerHTML+" ")}}return o},intersects:function(e,t){var o=e[1]<=t[3]&&t[1]<=e[3],n=e[2]<=t[0]&&t[2]<=e[0];return o&&n}},tn=Mo.a.getLogger("sourcewmts"),on=function(e){function t(o){if(!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(!o.layer)throw new Error("ERROR PARAM_MISSING : layer");if("string"!=typeof o.layer)throw new Error("ERROR WRONG TYPE : layer");if(void 0===o.ssl&&(o.ssl=!0),!$o.a.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers. See http://ignf.github.io/evolution-apigeoportail/ol3/ol3-autoconf.html");var n=$o.a.getLayerId(o.layer,"WMTS");if(!n||!$o.a.configuration.getLayerConf(n))return tn.log("[source WMTS] ERROR : "+o.layer+" cannot be found in Geoportal Configuration. Make sure that this resource is included in your contract key."),new e({});var r=$o.a.getLayerParams(o.layer,"WMTS",o.apiKey),i=!1===o.ssl?"http://":"https://";this._originators=r.originators,this._legends=r.legends,this._metadata=r.metadata;var s={url:Ao.Helper.normalyzeUrl(r.url.replace(/(http|https):\/\//,i),{"gp-ol-ext":l.olExtVersion||l.version},!1),version:r.version,style:r.styles,format:r.format,projection:r.projection,maxZoom:en.getZoomLevelFromScaleDenominator(r.minScale),layer:o.layer,matrixSet:r.TMSLink,tileGrid:new Qo.b({resolutions:r.nativeResolutions,matrixIds:r.matrixIds,origin:[r.matrixOrigin.x,r.matrixOrigin.y]})};Wo.mergeParams(s,o.olParams),e.call(this,s),this._originators=r.originators,this._legends=r.legends,this._metadata=r.metadata,this._description=r.description,this._title=r.title,this._quicklookUrl=r.quicklookUrl}return e&&(t.__proto__=e),t.prototype=Object.create(e.prototype,{}),t.prototype.constructor=t,t}(Jo),nn=on;window.ol&&window.ol.source&&(window.ol.source.GeoportalWMTS=on);var rn=Mo.a.getLogger("sourcewms"),sn=function(e){function t(o){if(!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(!o.layer)throw new Error("ERROR PARAM_MISSING : layer");if("string"!=typeof o.layer)throw new Error("ERROR WRONG TYPE : layer");if(void 0===o.ssl&&(o.ssl=!0),!$o.a.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers. See http://ignf.github.io/evolution-apigeoportail/ol3/ol3-autoconf.html");var n=$o.a.getLayerId(o.layer,"WMS");if(!n||!$o.a.configuration.getLayerConf(n))return rn.log("[source WMS] ERROR : "+o.layer+" cannot be found in Geoportal Configuration. Make sure that this resource is included in your contract key."),new e({});var r=$o.a.getLayerParams(o.layer,"WMS",o.apiKey),i=!1===o.ssl?"http://":"https://",s={url:Ao.Helper.normalyzeUrl(r.url.replace(/(http|https):\/\//,i),{"gp-ol-ext":l.olExtVersion||l.version},!1),params:{SERVICE:"WMS",LAYERS:o.layer,VERSION:r.version,STYLES:r.styles,FORMAT:r.format}};Wo.mergeParams(s,o.olParams),e.call(this,s),this._originators=r.originators,this._legends=r.legends,this._metadata=r.metadata,this._title=r.title,this._description=r.description,this._quicklookUrl=r.quicklookUrl}return e&&(t.__proto__=e),t.prototype=Object.create(e.prototype,{}),t.prototype.constructor=t,t}(h.a),an=sn;window.ol&&window.ol.source&&(window.ol.source.GeoportalWMS=sn);var ln=o("./node_modules/ol/layer/Tile.js"),cn=function(e){function t(o){if(!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(!o.layer)throw new Error("ERROR PARAM_MISSING : layer");if("string"!=typeof o.layer)throw new Error("ERROR WRONG TYPE : layer");if(void 0===o.ssl&&(o.ssl=!0),!$o.a.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers. See http://ignf.github.io/evolution-apigeoportail/ol3/ol3-autoconf.html");var n;o.olParams&&o.olParams.sourceParams&&(n=o.olParams.sourceParams);var r=new nn({layer:o.layer,ssl:o.ssl,apiKey:o.apiKey,olParams:n}),i={source:r};if(void 0!==r.getLayer()){var s,l=$o.a.getLayerId(o.layer,"WMTS"),c=$o.a.getGlobalConstraints(l);if(c&&c.projection)"string"==typeof c.projection&&(s=Object(a.t)(c.projection)),s&&s.getUnits()&&("m"===s.getUnits()?(i.minResolution=28e-5*(c.minScale-1),i.maxResolution=28e-5*(c.maxScale+1)):"degrees"===s.getUnits()&&(i.minResolution=28e-5*(c.minScale-1)*180/(6378137*Math.PI),i.maxResolution=28e-5*(c.maxScale+1)*180/(6378137*Math.PI)))}Wo.mergeParams(i,o.olParams),e.call(this,i)}return e&&(t.__proto__=e),t.prototype=Object.create(e.prototype,{}),t.prototype.constructor=t,t}(ln.a),un=cn;function dn(e){return(dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.ol&&window.ol.layer&&(window.ol.layer.GeoportalWMTS=cn);var hn=function(e){function t(o){if(!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(!o.layer)throw new Error("ERROR PARAM_MISSING : layer");if("string"!=typeof o.layer)throw new Error("ERROR WRONG TYPE : layer");if(void 0===o.ssl&&(o.ssl=!0),!$o.a.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers. See http://ignf.github.io/evolution-apigeoportail/ol3/ol3-autoconf.html");var n;o.olParams&&o.olParams.sourceParams&&(n=o.olParams.sourceParams);var r=new an({layer:o.layer,ssl:o.ssl,apiKey:o.apiKey,olParams:n}),i={source:r};if(void 0!==r.getParams().LAYERS){var s=$o.a.getLayerId(o.layer,"WMS"),l=$o.a.getGlobalConstraints(s);if(n&&n.projection){var c,u=[l.extent.left,l.extent.bottom,l.extent.right,l.extent.top];i.extent=Object(a.F)(u,"EPSG:4326",n.projection),"string"==typeof n.projection?c=Object(a.t)(n.projection):"object"===dn(n.projection)&&n.projection.getCode()&&(c=Object(a.t)(n.projection.getCode())),c&&c.getUnits()&&("m"===c.getUnits()?(i.minResolution=28e-5*(l.minScale-1),i.maxResolution=28e-5*(l.maxScale+1)):"degrees"===c.getUnits()&&(i.minResolution=28e-5*(l.minScale-1)*180/(6378137*Math.PI),i.maxResolution=28e-5*(l.maxScale+1)*180/(6378137*Math.PI)))}}Wo.mergeParams(i,o.olParams),e.call(this,i)}return e&&(t.__proto__=e),t.prototype=Object.create(e.prototype,{}),t.prototype.constructor=t,t}(ln.a),pn=hn;window.ol&&window.ol.layer&&(window.ol.layer.GeoportalWMS=hn);var fn,mn=o("./node_modules/ol/control/Control.js"),gn=o("./node_modules/ol/Observable.js"),yn={generate:(fn=Math.floor(Date.now()),function(){return fn++}),name:function(e){var t=null,o=e.lastIndexOf("-");return t=-1===o?e:e.substring(0,o),t},index:function(e){var t=null,o=this.name(e),n=o.lastIndexOf("_");return-1!==n&&(t=o.substring(n+1)),t},uuid:function(e){var t=null,o=e.lastIndexOf("-");return-1!==o&&(t=parseInt(e.substring(o+1),10)),t}},vn=o("./node_modules/sortablejs/Sortable.js"),_n=o.n(vn),bn={_createDraggableElement:function(e,t){_n.a.create(e,{handle:".GPlayerName",draggable:".draggable-layer",ghostClass:"GPghostLayer",animation:200,forceFallback:!0,onEnd:function(e){t._onDragAndDropLayerClick(e)}})},_addUID:function(e){return this._uid?e+"-"+this._uid:e},_createMainContainerElement:function(){var e=document.createElement("div");return e.id=this._addUID("GPlayerSwitcher"),e.className="GPwidget",e},_createMainLayersShowElement:function(){var e=document.createElement("input");return e.id=this._addUID("GPshowLayersList"),e.type="checkbox",e},_createMainLayersElement:function(){var e=document.createElement("div");return e.id=this._addUID("GPlayersList"),e.className="GPpanel",e},_createMainPictoElement:function(){var e=this,t=document.createElement("label");t.id=this._addUID("GPshowLayersListPicto"),t.className="GPshowAdvancedToolPicto",t.htmlFor=this._addUID("GPshowLayersList"),t.title="Afficher/masquer le gestionnaire de couches";var o=document.createElement("span");o.id=this._addUID("GPshowLayersListOpen"),o.className="GPshowAdvancedToolOpen",o.addEventListener("click",(function(){if(document.getElementById(e._addUID("GPshowLayersList")).checked){for(var t=document.getElementsByClassName("GPlayerInfoOpened"),o=0;o<t.length;o++)t[o].className="GPlayerInfo";document.getElementById(e._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed"}})),t.appendChild(o);var n=document.createElement("span");return n.addEventListener("click",(function(){if(document.getElementById(e._addUID("GPshowLayersList")).checked){for(var t=document.getElementsByClassName("GPlayerInfoOpened"),o=0;o<t.length;o++)t[o].className="GPlayerInfo";document.getElementById(e._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed"}})),n.id=e._addUID("GPshowLayersListClose"),t.appendChild(n),t},_createMainInfoElement:function(){var e=document.createElement("div");return e.id=this._addUID("GPlayerInfoPanel"),e.className="GPpanel GPlayerInfoPanelClosed",e},_createContainerLayerElement:function(e){var t=document.createElement("div");t.id=this._addUID("GPlayerSwitcher_ID_"+e.id),t.className="GPlayerSwitcher_layer draggable-layer",t.appendChild(this._createBasicToolElement(e));for(var o=this._createAdvancedToolShowElement(e),n=0;n<o.length;n++)t.appendChild(o[n]);return t.appendChild(this._createAdvancedToolElement(e)),t},_createBasicToolElement:function(e){var t=document.createElement("div");t.id=this._addUID("GPbasicTools_ID_"+e.id),t.className="GPlayerBasicTools",t.appendChild(this._createBasicToolNameElement(e));for(var o=this._createBasicToolVisibilityElement(e),n=0;n<o.length;n++)t.appendChild(o[n]);return t},_createBasicToolNameElement:function(e){var t=document.createElement("span");return t.id=this._addUID("GPname_ID_"+e.id),t.className="GPlayerName",t.title=e.description||e.title,t.innerHTML=e.title,t},_createBasicToolVisibilityElement:function(e){var t=[],o=void 0===e.visibility||e.visibility,n=this._addUID("GPvisibility_ID_"+e.id),r=document.createElement("input");r.id=n,r.type="checkbox",r.checked=o;var i=document.createElement("label");i.htmlFor=n,i.id=this._addUID("GPvisibilityPicto_ID_"+e.id),i.className="GPlayerVisibility",i.title="Afficher/masquer la couche";var s=this;return r.addEventListener?r.addEventListener("click",(function(e){s._onVisibilityLayerClick(e)})):r.attachEvent&&r.attachEvent("onclick",(function(e){s._onVisibilityLayerClick(e)})),t.push(r),t.push(i),t},_createAdvancedToolShowElement:function(e){var t=[],o=document.createElement("label");o.id=this._addUID("GPshowAdvancedToolsPicto_ID_"+e.id),o.htmlFor=this._addUID("GPshowAdvancedTools_ID_"+e.id),o.title="Plus d'outils",o.className="GPshowMoreOptions GPshowLayerAdvancedTools";var n=document.createElement("input");return n.type="checkbox",n.id=this._addUID("GPshowAdvancedTools_ID_"+e.id),t.push(n),t.push(o),t},_createAdvancedToolElement:function(e){var t=document.createElement("div");if(t.id=this._addUID("GPadvancedTools_ID_"+e.id),t.className="GPlayerAdvancedTools",t.appendChild(this._createAdvancedToolDeleteElement(e)),e.title&&e.description&&t.appendChild(this._createAdvancedToolInformationElement(e)),"feature"!==e.type)for(var o=this._createAdvancedToolOpacityElement(e),n=0;n<o.length;n++)t.appendChild(o[n]);return t},_createAdvancedToolDeleteElement:function(e){var t=document.createElement("div");t.id=this._addUID("GPremove_ID_"+e.id),t.className="GPlayerRemove",t.title="Supprimer la couche",t.layerId=e.id;var o=this;return t.addEventListener?t.addEventListener("click",(function(e){o._onDropLayerClick(e)})):t.attachEvent&&t.attachEvent("onclick",(function(e){o._onDropLayerClick(e)})),t},_createAdvancedToolInformationElement:function(e){var t=document.createElement("div");t.id=this._addUID("GPinfo_ID_"+e.id),t.className="GPlayerInfo",t.title="Informations/lÃ©gende",t.layerId=e.id;var o=this;return t.addEventListener?t.addEventListener("click",(function(e){o._onOpenLayerInfoClick(e)})):t.attachEvent&&t.attachEvent("onclick",(function(e){o._onOpenLayerInfoClick(e)})),t},_createAdvancedToolOpacityElement:function(e){var t=[],o=document.createElement("div");o.id=this._addUID("GPopacity_ID_"+e.id),o.className="GPlayerOpacity",o.title="OpacitÃ©";var n=void 0!==e.opacity?e.opacity:1;n=Math.round(100*n);var r=document.createElement("input");r.id=this._addUID("GPopacityValueDiv_ID_"+e.id),r.type="range",r.value=n;var i=this;r.addEventListener?r.addEventListener("change",(function(e){i._onChangeLayerOpacity(e)})):r.attachEvent&&r.attachEvent("onchange",(function(e){i._onChangeLayerOpacity(e)})),r.addEventListener?r.addEventListener("input",(function(e){i._onChangeLayerOpacity(e)})):r.attachEvent&&r.attachEvent("oninput",(function(e){i._onChangeLayerOpacity(e)})),o.appendChild(r);var s=document.createElement("div");s.id=this._addUID("GPopacityValueDiv_ID_"+e.id),s.className="GPlayerOpacityValue";var a=document.createElement("span");return a.id=this._addUID("GPopacityValue_ID_"+e.id),a.innerHTML=n+"%",s.appendChild(a),t.push(o),t.push(s),t},_createContainerLayerInfoElement:function(e){var t=document.createElement("div");t.id=this._addUID("GPlayerInfoContent");var o=document.createElement("div");if(o.id=this._addUID("GPlayerInfoTitle"),o.innerHTML=e.title,t.appendChild(o),e.quicklookUrl){var n=document.createElement("div");n.id=this._addUID("GPlayerInfoQuicklook"),n.title="Afficher un aperÃ§u de la couche";var r=document.createElement("a");r.href=e.quicklookUrl,r.appendChild(n),t.appendChild(r)}var i=document.createElement("div");i.id=this._addUID("GPlayerInfoClose"),i.title="Fermer la fenÃªtre";var s=this,a=function(){document.getElementById(s._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed";for(var e=document.getElementsByClassName("GPlayerInfoOpened"),t=0;t<e.length;t++)e[t].className="GPlayerInfo"};i.addEventListener?i.addEventListener("click",a):i.attachEvent&&i.attachEvent("onclick",a),t.appendChild(i);var l=document.createElement("div");if(l.id=this._addUID("GPlayerInfoDescription"),l.innerHTML=e.description,t.appendChild(l),e.metadata){var c=document.createElement("div");c.id=this._addUID("GPlayerInfoMetadata");var u=document.createElement("div");u.className="GPlayerInfoSubtitle",u.innerHTML="MÃ©tadonnÃ©es",c.appendChild(u);for(var d=0;d<e.metadata.length;d++){var h=e.metadata[d].url,p=document.createElement("div");p.className="GPlayerInfoLink";var f=document.createElement("a");f.href=h,f.innerHTML=h,p.appendChild(f),c.appendChild(p)}0!==e.metadata.length&&t.appendChild(c)}if(e.legends){var m=document.createElement("div");m.id=this._addUID("GPlayerInfoLegend");var g=document.createElement("div");g.className="GPlayerInfoSubtitle",g.innerHTML="LÃ©gende",m.appendChild(g);for(var y={},v=e.maxScaleDenominator||56e7,_=0;_<e.legends.length;_++){var b=e.legends[_].minScaleDenominator;if(b){var w=b.toString();b=Math.round(parseInt(w.substring(0,3),10)/10)*Math.pow(10,w.length-2)}else b=270;y[b]=e.legends[_]}for(var E in y)if(y.hasOwnProperty(E)){var O=y[E].url;if("string"==typeof O&&-1===O.toLowerCase().indexOf("nolegend.jpg")){var S=document.createElement("div");S.className="GPlayerInfoLink",v=y[E].maxScaleDenominator||v;var x=document.createElement("a");x.href=O,x.innerHTML="Du 1/"+E+" au 1/"+v,S.appendChild(x),m.appendChild(S)}else delete y[E]}0!==Object.keys(y).length&&t.appendChild(m)}return t}};function wn(e){return(wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var En=Mo.a.getLogger("layerswitcher"),On=function(e){function t(o){var n=(o=o||{}).options||{},r=o.layers||[];if(!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(!Array.isArray(r))throw new Error("ERROR WRONG_TYPE : layers should be an array");if("object"!==wn(n))throw new Error("ERROR WRONG_TYPE : options should be an object");this._initialize(n,r);var i=this._container=this._initContainer(n);e.call(this,{element:i,target:n.target,render:n.render})}return e&&(t.__proto__=e),t.prototype=Object.create(e.prototype,{}),Wo.assign(t.prototype,bn),t.prototype.constructor=t,t.prototype.setMap=function(t){var o=this;if(t)this._addMapLayers(t),this._listeners.onMoveListener=t.on("moveend",(function(){return o._onMapMoveEnd(t)})),this._listeners.onAddListener=t.getLayers().on("add",(function(e){var t,n=e.element;n.hasOwnProperty("gpLayerId")?t=n.gpLayerId:(t=o._layerId,n.gpLayerId=t,o._layerId++),o._layers[t]||o.addLayer(n)})),this._listeners.onRemoveListener=t.getLayers().on("remove",(function(e){var t=e.element,n=t.gpLayerId;o._layers[n]&&o.removeLayer(t)}));else{Object(gn.b)(this._listeners.onMoveListener),Object(gn.b)(this._listeners.onAddListener),Object(gn.b)(this._listeners.onRemoveListener);for(var n=this._layersOrder.length-1;n>=0;n--)this._layersOrder[n].layer.setZIndex(0)}e.prototype.setMap.call(this,t)},t.prototype.addLayer=function(e,t){var o=this,n=this.getMap();if(t=t||{},e){var r=e.gpLayerId;if(void 0!==r){var i=!1;if(n.getLayers().forEach((function(e){e.gpLayerId===r&&(i=!0)})),i)if(this._layers[r]){for(var s in t)t.hasOwnProperty(s)&&(this._layers[r][s]=t[s]);if(t.title){var a=document.getElementById(this._addUID("GPname_ID_"+r));a&&(a.innerHTML=t.title,a.title=t.description||t.title)}var l=document.getElementById(this._addUID("GPinfo_ID_"+r));if(!document.getElementById(this._addUID("GPinfo_ID_"+r))&&t.description){var c=document.getElementById(this._addUID("GPadvancedTools_ID_"+r));c&&c.appendChild(this._createAdvancedToolInformationElement({id:r}))}l&&"GPlayerInfoOpened"===l.className&&(document.getElementById(this._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed",l.className="GPlayerInfo")}else{var u=this.getLayerInfo(e)||{},d=e.getOpacity(),h=e.getVisible(),p=this.isInRange(e,n),f={layer:e,id:r,opacity:null!=d?d:1,visibility:null==h||h,inRange:null==p||p,title:null!=t.title?t.title:u._title||r,description:t.description||u._description||null,legends:t.legends||u._legends||[],metadata:t.metadata||u._metadata||[],quicklookUrl:t.quicklookUrl||u._quicklookUrl||null};this._layers[r]=f;var m=this._createLayerDiv(f);this._layers[r].div=m,e.getZIndex&&0!==e.getZIndex()&&void 0!==e.getZIndex()||e._forceNullzIndex?this._updateLayersOrder():(this._layersOrder.unshift(f),this._lastZIndex++,e.setZIndex(this._lastZIndex),this._layerListContainer.insertBefore(m,this._layerListContainer.firstChild)),this._listeners.updateLayerOpacity=e.on("change:opacity",(function(e){return o._updateLayerOpacity(e)})),this._listeners.updateLayerVisibility=e.on("change:visible",(function(e){return o._updateLayerVisibility(e)})),null==this._layers[r].onZIndexChangeEvent&&(this._layers[r].onZIndexChangeEvent=e.on("change:zIndex",(function(){return o._updateLayersOrder()})))}else En.log("[ERROR] LayerSwitcher:addLayer - configuration cannot be set for ",e," layer (layer is not in map.getLayers() )")}else En.trace("[WARN] LayerSwitcher:addLayer - configuration cannot be set for this layer (layer id not found)",e)}else En.log("[ERROR] LayerSwitcher:addLayer - missing layer parameter")},t.prototype.removeLayer=function(e){if(e){Object(gn.b)(this._listeners.updateLayerOpacity),Object(gn.b)(this._listeners.updateLayerVisibility),En.trace(e);var t=e.gpLayerId,o=document.getElementById(this._addUID("GPlayersList")),n=document.getElementById(this._addUID("GPinfo_ID_"+t));n&&"GPlayerInfoOpened"===n.className&&(document.getElementById(this._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed",n.className="GPlayerInfo");var r=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+t));r&&o.removeChild(r);var i=Math.abs(e.getZIndex()-this._lastZIndex);this._layersOrder.splice(i,1),this._lastZIndex--;for(var s=this._layersOrder,a=0;a<s.length;a++)s[a].layer.setZIndex(this._lastZIndex-a);delete this._layers[t]}},t.prototype.setCollapsed=function(e){if(void 0!==e){var t=!document.getElementById(this._addUID("GPshowLayersList")).checked;if(!(e&&t||!e&&!t)){if(!t){for(var o=document.getElementsByClassName("GPlayerInfoOpened"),n=0;n<o.length;n++)o[n].className="GPlayerInfo";document.getElementById(this._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed"}document.getElementById(this._addUID("GPshowLayersList")).checked=!e}}else En.log("[ERROR] LayerSwitcher:setCollapsed - missing collapsed parameter")},t.prototype.getCollapsed=function(){return this.collapsed},t.prototype.setRemovable=function(e,t){if(e){var o=e.gpLayerId;if(null!=o){var n=document.getElementById(this._addUID("GPremove_ID_"+o));n&&(!1===t?n.style.display="none":!0===t&&(n.style.display="block"))}else En.log("[LayerSwitcher:setRemovable] layer should be added to map before calling setRemovable method")}},t.prototype._initialize=function(e,t){this._uid=yn.generate(),this._layers={},this._layersOrder=[],this._layersIndex={},this._lastZIndex=0,this._layerId=0,this.collapsed=void 0===e.collapsed||e.collapsed,this._layerListContainer=null,this._listeners={};for(var o=0;o<t.length;o++){var n=t[o].layer;if(n){var r;n.hasOwnProperty("gpLayerId")?r=n.gpLayerId:(r=this._layerId,n.gpLayerId=r,this._layerId++);var i=t[o].config||{},s=n.getOpacity(),a=n.getVisible(),l={layer:n,id:r,opacity:null!=s?s:1,visibility:null==a||a,title:null!=i.title?i.title:r,description:i.description||null,legends:i.legends||[],metadata:i.metadata||[],quicklookUrl:i.quicklookUrl||null};this._layers[r]=l}}},t.prototype._initContainer=function(){var e=this._createMainContainerElement(),t=this._createMainLayersShowElement();e.appendChild(t),this.collapsed?this.collapsed=!0:(t.checked="checked",this.collapsed=!1);var o=this,n=function(e){this.collapsed=!e.target.checked,this.dispatchEvent("change:collapsed")};t.addEventListener("click",(function(e){n.call(o,e)}));var r=this._layerListContainer=this._createMainLayersElement();e.appendChild(r),this._createDraggableElement(r,this);var i=this._createMainPictoElement();e.appendChild(i);var s=this._createMainInfoElement();return e.appendChild(s),e},t.prototype._addMapLayers=function(e){var t=this;for(var o in this._layersIndex={},e.getLayers().forEach((function(o){var n;o.hasOwnProperty("gpLayerId")?n=o.gpLayerId:(n=t._layerId,o.gpLayerId=n,t._layerId++);var r=t.getLayerInfo(o)||{};if(t._layers[n])t._layers[n].opacity=o.getOpacity(),t._layers[n].visibility=o.getVisible(),t._layers[n].inRange=t.isInRange(o,e);else{var i=o.getOpacity(),s=o.getVisible(),a=t.isInRange(o,e),l={layer:o,id:n,opacity:null!=i?i:1,visibility:null==s||s,inRange:null==a||a,title:r._title||n,description:r._description||null,legends:r._legends||[],metadata:r._metadata||[],quicklookUrl:r._quicklookUrl||null};t._layers[n]=l}if(t._listeners.updateLayerOpacity=o.on("change:opacity",(function(e){return t._updateLayerOpacity(e)})),t._listeners._updateLayerVisibility=o.on("change:visible",(function(e){return t._updateLayerVisibility(e)})),void 0!==o.getZIndex){var c=o.getZIndex()||0;t._layersIndex[c]&&Array.isArray(t._layersIndex[c])||(t._layersIndex[c]=[]),t._layersIndex[c].push(t._layers[n])}})),this._layersIndex)if(this._layersIndex.hasOwnProperty(o))for(var n=this._layersIndex[o],r=0;r<n.length;r++)this._layersOrder.unshift(n[r]),this._lastZIndex++,n[r].layer.setZIndex(this._lastZIndex),null==this._layers[n[r].layer.gpLayerId].onZIndexChangeEvent&&(this._layers[n[r].layer.gpLayerId].onZIndexChangeEvent=n[r].layer.on("change:zIndex",(function(){return t._updateLayersOrder()})));for(var i=0;i<this._layersOrder.length;i++){var s=this._layersOrder[i],a=this._createLayerDiv(s);this._layerListContainer.appendChild(a),this._layers[s.id].div=a}},t.prototype._createLayerDiv=function(e){var t=e.legends&&0!==e.legends.length,o=e.metadata&&0!==e.metadata.length,n=e.quicklookUrl;(t||o||n)&&(e.displayInformationElement=!0);var r=this._createContainerLayerElement(e);return e.inRange||r.classList.add("outOfRange"),r},t.prototype._onChangeLayerOpacity=function(e){var t=e.target.id,o=yn.index(t),n=this._layers[o].layer,r=e.target.value;document.getElementById(this._addUID("GPopacityValue_ID_"+o)).innerHTML=r+"%",n.setOpacity(r/100)},t.prototype._updateLayerOpacity=function(e){var t=e.target.getOpacity();t>1&&(t=1),t<0&&(t=0);var o=e.target.gpLayerId,n=document.getElementById(this._addUID("GPopacityValueDiv_ID_"+o));n&&(n.value=Math.round(100*t));var r=document.getElementById(this._addUID("GPopacityValue_ID_"+o));r&&(r.innerHTML=Math.round(100*t)+"%")},t.prototype._onVisibilityLayerClick=function(e){var t=e.target.id,o=yn.index(t);this._layers[o].layer.setVisible(e.target.checked)},t.prototype._updateLayerVisibility=function(e){var t=e.target.getVisible(),o=e.target.gpLayerId,n=document.getElementById(this._addUID("GPvisibility_ID_"+o));n&&(n.checked=t)},t.prototype._updateLayersOrder=function(){var e=this,t=this.getMap();if(t){var o,n;for(var r in this._layersIndex={},t.getLayers().forEach((function(t){n=t.gpLayerId,Object(gn.b)(e._layers[n].onZIndexChangeEvent),e._layers[n].onZIndexChangeEvent=null,o=null,void 0!==t.getZIndex&&(o=t.getZIndex(),e._layersIndex[o]&&Array.isArray(e._layersIndex[o])||(e._layersIndex[o]=[]),e._layersIndex[o].push(e._layers[n]))})),this._lastZIndex=0,this._layersOrder=[],this._layersIndex)if(this._layersIndex.hasOwnProperty(r))for(var i=this._layersIndex[r],s=0;s<i.length;s++)this._layersOrder.unshift(i[s]),this._lastZIndex++,null==this._layers[i[s].layer.gpLayerId].onZIndexChangeEvent&&(this._layers[i[s].layer.gpLayerId].onZIndexChangeEvent=i[s].layer.on("change:zIndex",(function(){return e._updateLayersOrder()})));if(this._layerListContainer){for(;this._layerListContainer.firstChild;)this._layerListContainer.removeChild(this._layerListContainer.firstChild);for(var a=0;a<this._layersOrder.length;a++){var l=this._layersOrder[a];this._layerListContainer.appendChild(l.div)}}else En.log("[ol.control.LayerSwitcher] _updateLayersOrder : layer list container not found to update layers order ?!")}},t.prototype._onOpenLayerInfoClick=function(e){var t,o,n=e.target.id,r=yn.index(n),i=this._layers[r];if("GPlayerInfoOpened"===(n=document.getElementById(e.target.id)).className)return void 0!==n.classList&&(n.classList.remove("GPlayerInfoOpened"),n.classList.add("GPlayerInfo")),void 0!==(t=document.getElementById(this._addUID("GPlayerInfoPanel"))).classList&&(t.classList.remove("GPpanel"),t.classList.remove("GPlayerInfoPanelOpened"),t.classList.add("GPlayerInfoPanelClosed")),o=document.getElementById(this._addUID("GPlayerInfoContent")),void t.removeChild(o);for(var s=document.getElementsByClassName("GPlayerInfoOpened"),a=0;a<s.length;a++)s[a].className="GPlayerInfo";void 0!==n.classList&&(n.classList.remove("GPlayerInfo"),n.classList.add("GPlayerInfoOpened")),void 0!==(t=document.getElementById(this._addUID("GPlayerInfoPanel"))).classList&&(t.classList.add("GPpanel"),t.classList.remove("GPlayerInfoPanelClosed"),t.classList.add("GPlayerInfoPanelOpened")),(o=document.getElementById(this._addUID("GPlayerInfoContent")))&&t.removeChild(o);var l={title:i.title,description:i.description,quicklookUrl:i.quicklookUrl,metadata:i.metadata,legends:i.legends},c=i.layer.getMaxResolution();l._maxScaleDenominator=c===1/0?56e7:Math.round(c/28e-5);var u=this._createContainerLayerInfoElement(l);t.appendChild(u)},t.prototype._onDropLayerClick=function(e){var t=e.target.id,o=yn.index(t),n=this._layers[o].layer;this.getMap().getLayers().remove(n)},t.prototype._onDragAndDropLayerClick=function(){var e=this,t=this.getMap(),o=document.querySelectorAll("div.GPlayerSwitcher_layer"),n=o.length;this._layersOrder=[];for(var r=0;r<o.length;r++){var i=o[r].id,s=yn.index(i),a=this._layers[s].layer;Object(gn.b)(this._layers[s].onZIndexChangeEvent),this._layers[s].onZIndexChangeEvent=null,a.setZIndex&&(a.setZIndex(n),this._layersOrder.push(this._layers[s]),n--),null==this._layers[s].onZIndexChangeEvent&&(this._layers[s].onZIndexChangeEvent=a.on("change:zIndex",(function(){return e._updateLayersOrder()})))}t.updateSize()},t.prototype._onMapMoveEnd=function(e){var t=this;e.getLayers().forEach((function(o){var n=o.gpLayerId;if(t._layers[n]){var r=t._layers[n];t.isInRange(o,e)&&!r.inRange?(r.inRange=!0,document.getElementById(t._addUID("GPlayerSwitcher_ID_"+n)).classList.remove("outOfRange")):!t.isInRange(o,e)&&r.inRange&&(r.inRange=!1,document.getElementById(t._addUID("GPlayerSwitcher_ID_"+n)).classList.add("outOfRange"))}}))},t.prototype.getLayerDOMId=function(e){var t=null;return this.getMap().getLayers().forEach((function(o){o===e&&(t=o.hasOwnProperty("gpLayerId")?o.gpLayerId:null)})),null!==t?this._addUID("GPlayerSwitcher_ID_"+t):null},t.prototype.isInRange=function(e,t){if(t){var o=t.getView().getResolution();if(o>e.getMaxResolution()||o<e.getMinResolution())return!1;var n=t.getView().calculateExtent(t.getSize()),r=e.getExtent();return!(r&&!Object(Zo.O)(n,r))}},t.prototype.getLayerInfo=function(e){var t={};if(void 0!==e.getSource){var o=e.getSource();o&&(t._title=o._title||"",t._description=o._description||"",t._quicklookUrl=o._quicklookUrl||"",t._metadata=o._metadata||[],t._legends=o._legends||[])}return t},t}(mn.a),Sn=On;window.ol&&window.ol.control&&(window.ol.control.LayerSwitcher=On);var xn={_addUID:function(e){return this._uid?e+"-"+this._uid:e},_createMainContainerElement:function(){var e=document.createElement("div");return e.id=this._addUID("GPgetFeatureInfo"),e.className="GPwidget",e},_createActivateGetFeatureInfoElement:function(e){var t=this,o=document.createElement("input");return o.id=this._addUID("GPactivateGetFeatureInfo"),o.type="checkbox",o.checked=e,o.addEventListener("change",(function(e){t.onActivateGetFeatureInfoElementChange(e)})),o},_createMainPictoElement:function(){var e=document.createElement("label");e.id=this._addUID("GPgetFeatureInfoPicto"),e.className="GPshowAdvancedToolPicto",e.htmlFor=this._addUID("GPactivateGetFeatureInfo"),e.title="activer/desactiver l'interrogation des couches";var t=document.createElement("span");t.id=this._addUID("GPgetFeatureInfoActivate"),t.className="GPshowAdvancedToolOpen",e.appendChild(t);var o=document.createElement("span");return o.id=this._addUID("GPgetFeatureInfoDeactivate"),e.appendChild(o),e}};function Cn(e){return(Cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var jn=Mo.a.getLogger("getfeatureinfo"),Pn=function(e){function t(o){var n=(o=o||{}).options||{},r=o.layers||[];if(!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(!Array.isArray(r))throw new Error("ERROR WRONG_TYPE : layers should be an array");if("object"!==Cn(n))throw new Error("ERROR WRONG_TYPE : options should be an object");this._initialize(n,r);var i=this._container=this._initContainer(n);e.call(this,{element:i,target:n.target,render:n.render})}return e&&(t.__proto__=e),t.prototype=Object.create(e.prototype,{}),Wo.assign(t.prototype,xn),t.prototype.constructor=t,t.prototype._initialize=function(e,t){if(this._uid=yn.generate(),this._events={dblclick:!1,singleclick:!1,contextmenu:!1},this._eventsHandler={},void 0===e.auto||"boolean"==typeof e.auto)if(this._auto=e.auto||!1,void 0===e.active||"boolean"==typeof e.active)if(this._active=void 0===e.active||e.active,e.defaultEvent&&"string"!=typeof e.defaultEvent)jn.log("[ERROR] GetFeatureInfo:_initialize - defaultEvent parameter should be a string");else if(this._defaultEvent=e.defaultEvent||"singleclick",this._isValidEvent(this._defaultEvent))if(e.defaultInfoFormat&&"string"!=typeof e.defaultInfoFormat)jn.log("[ERROR] GetFeatureInfo:_initialize - defaultInfoFormat parameter should be a string");else if(this._defaultInfoFormat=e.defaultInfoFormat||"text/html",e.cursorStyle&&"string"!=typeof e.cursorStyle)jn.log("[ERROR] GetFeatureInfo:_initialize - cursorStyle parameter should be a string");else{if(this._cursorStyle=e.cursorStyle||"pointer",e.proxyUrl){if("string"!=typeof e.proxyUrl)return void jn.log("[ERROR] GetFeatureInfo:_initialize - proxyUrl parameter should be a string");this._proxyUrl=e.proxyUrl}if(e.noProxyDomains){if(!Array.isArray(e.noProxyDomains))return void jn.log("[ERROR] GetFeatureInfo:_initialize - noProxyDomains parameter should be a array");this._noProxyDomains=e.noProxyDomains}if(void 0===e.autoPan||"boolean"==typeof e.autoPan){if(this._autoPan=void 0===e.autoPan||e.autoPan,e.autoPanAnimation){if(e.autoPanAnimation.duration&&"number"!=typeof e.autoPanAnimation.duration)return void jn.log("[ERROR] GetFeatureInfo:_initialize - autoPanAnimation parameter is invalid : duration should be a number.");if(e.autoPanAnimation.easing&&"function"!=typeof e.autoPanAnimation.easing)return void jn.log("[ERROR] GetFeatureInfo:_initialize - autoPanAnimation parameter is invalid : easing should be a ol.easing function or a custom function.");this._autoPanAnimation=e.autoPanAnimation}if(e.autoPanMargin){if("number"!=typeof e.autoPanMargin)return void jn.log("[ERROR] GetFeatureInfo:_initialize - autoPanMargin parameter should be a number");this._autoPanMargin=e.autoPanMargin}Array.isArray(t)?(this._setLayers(t),this._activateGetFeatureInfoContainer=null):jn.log("[ERROR] GetFeatureInfo:_initialize - layers parameter should be an array")}else jn.log("[ERROR] GetFeatureInfo:_initialize - autoPan parameter should be a boolean")}else jn.log("[ERROR] GetFeatureInfo:_initialize - _defaultEvent '"+this._defaultEvent+"' is not a valid event");else jn.log("[ERROR] GetFeatureInfo:_initialize - active parameter should be a boolean");else jn.log("[ERROR] GetFeatureInfo:_initialize - auto parameter should be a boolean")},t.prototype.setMap=function(t){var o=this;if(t){if(this._updateEvents(t),this._cursorStyle&&this._active&&this._activateCursor(!0,t),t.getLayers().on("remove",(function(e){for(var n=0;n<o._layers.length;++n)if(o._layers[n].obj===e.element){o._layers.splice(n,1);break}o._updateEvents(t)})),this._auto){var n=!1;t.getLayers().forEach((function(e){var t=Go.getLayerFormat(e);o._hasLayer(e)||"vector"!==t||(o._layers.push({obj:e}),n=!0)})),n&&this._updateEvents(t),t.getLayers().on("add",(function(e){"vector"===Go.getLayerFormat(e.element)&&o._layers.push({obj:e.element}),o._updateEvents(t)}))}}else this._clearEvents(),this._activateCursor(!1);e.prototype.setMap.call(this,t)},t.prototype.getLayers=function(){return this._layers},t.prototype.setDefaultEvent=function(e){"string"==typeof e?e&&this._isValidEvent(e)?(this._defaultEvent=e,this._updateEvents()):jn.log("[ERROR] GetFeatureInfo:setDefaultEvent - event '"+e+"' is not allowed."):jn.log("[ERROR] GetFeatureInfo:setDefaultEvent - eventName parameter should be a string")},t.prototype.setCursorStyle=function(e){"string"==typeof e?(this._active&&(!this._cursorStyle&&e?this._activateCursor(!0):this._cursorStyle&&!e&&this._activateCursor(!1)),this._cursorStyle=e):jn.log("[ERROR] GetFeatureInfo:setCursorStyle - cursorStyle parameter should be a string")},t.prototype.setActive=function(e){this._setActive(e);var t=document.getElementById(this._addUID("GPactivateGetFeatureInfo"));t&&(t.checked=e)},t.prototype._setActive=function(e){"boolean"==typeof e?this._active!==e&&(this._active=e,this._cursorStyle&&this._activateCursor(e)):jn.log("[ERROR] GetFeatureInfo:_setActive - active parameter should be a boolean")},t.prototype.isActive=function(){return this._active},t.prototype.setHidden=function(e){this.element.style.visibility=e?"hidden":""},t.prototype.isHidden=function(){return"hidden"===this.element.style.visibility},t.prototype.setLayers=function(e){this._setLayers(e),this._updateEvents()},t.prototype._isValidEvent=function(e){return Object.keys(this._events).indexOf(e)>-1},t.prototype._activateEvent=function(e,t){var o=this,n=function(e){Go.onDisplayFeatureInfo(e,o)};"contextmenu"===e?t.getViewport().addEventListener(e,n):t.on(e,n),this._eventsHandler[e]=n,this._events[e]=!0},t.prototype._deactivateEvent=function(e,t){"contextmenu"===e?t.getViewport().removeEventListener(e,this._eventsHandler[e]):t.un(e,this._eventsHandler[e]),delete this._eventsHandler[e],this._events[e]=!1},t.prototype._updateEvents=function(e){e||(e=this.getMap());for(var t=[],o=0;o<this._layers.length;++o){var n=this._layers[o].event?this._layers[o].event:this._defaultEvent;t.indexOf(n)<0&&t.push(n)}for(var r in this._events)!this._events[r]&&t.indexOf(r)>=0?this._activateEvent(r,e):this._events[r]&&t.indexOf(r)<0&&this._deactivateEvent(r,e)},t.prototype._clearEvents=function(){var e=this.getMap();for(var t in this._events)this._events[t]&&this._deactivateEvent(t,e)},t.prototype._hasLayer=function(e){for(var t=0;t<this._layers.length;++t)if(this._layers[t].obj===e)return!0;return!1},t.prototype._activateCursor=function(e,t){if(t||(t=this.getMap()),e){if(this._eventsHandler.hasOwnProperty("pointermove"))return void jn.log("[ERROR] _activateCursor - inconsistent state: pointermove event handler already registered");var o=this,n=function(e){var n=t.forEachFeatureAtPixel(e.pixel,(function(e,t){for(var n=o.getLayers(),r=0;r<n.length;++r)if(n[r].obj===t)return!0}));t.getTargetElement().style.cursor=n?o._cursorStyle:""};this._eventsHandler.pointermove=n,t.on("pointermove",n)}else this._eventsHandler.hasOwnProperty("pointermove")&&(t.un("pointermove",this._eventsHandler.pointermove),delete this._eventsHandler.pointermove),t.getTargetElement().style.cursor=""},t.prototype._setLayers=function(e){if(e&&Array.isArray(e)){this._layers=[];for(var t=0;t<e.length;++t){var o=this._layers.push({})-1;e[t].event&&(this._isValidEvent(e[t].event)?this._layers[o].event=e[t].event:jn.log("[ERROR] GetFeatureInfo:setLayers - layer event '"+this._layers[t].event+"' is not allowed.")),e[t].infoFormat&&(this._layers[o].infoFormat=e[t].infoFormat),this._layers[o].obj=e[t].obj}}else jn.log("[ERROR] GetFeatureInfo:setLayers - gfiLayers parameter should be a array")},t.prototype.onActivateGetFeatureInfoElementChange=function(e){this._setActive(e.target.checked)},t.prototype._initContainer=function(e){var t=this._createMainContainerElement(),o=this._activateGetFeatureInfoContainer=this._createActivateGetFeatureInfoElement(this.isActive());t.appendChild(o);var n=this._createMainPictoElement();if(t.appendChild(n),void 0!==e.hidden){if("boolean"!=typeof e.hidden)return void jn.log("[ERROR] GetFeatureInfo:_initContainer - hidden parameter should be a boolean");e.hidden&&(t.style.visibility="hidden")}return t},t}(mn.a),Tn=Pn;window.ol&&window.ol.control&&(window.ol.control.GetFeatureInfo=Pn);var An={lightOrange:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAARDSURBVFiF3ZndaxxVGMZ/Z/YjX00Nadpo1qrFBgu56D9QbAtiLoRC7ywSNK1NURRREBKRFlSwFBW0gnSrJXY1CmISgyjFiyYSFC9ajE3MmpjdjWlMUtNos9lN9mteLzbRuCbZmTMTBB+Yi51znvd5n3nPnjnnjBIR/i/wuh4xpCpI0ojiENAA1AE1wCzwKzCE0EM5l2iShJvSyrXKnFVb8dOK4hmg3AIjifAmaU7ztMy7kYI7Zs6rQwjvka+AXcyiOMZx6XGahuE0AEHVitCFnhGAGoQugqrVaSrOKpNP4FWnSaxCGy1yWpesbyY/tLpwo7p/w0RxWHfI6Zk5q7ZSwhj6Q2sjzJLiXp1JQe+p+mllc4wA1CzHtw37lQmpCha5gbXpVxdJythh9z1kvzJJGrFixPBmOXixl+Z4mONmguZ4mIMXezG8WQsq5cs6tmDfTP7NXiSqN0vTzBD1TQfwbdmDUhX4tuyhvukATTNDlgxZ0SmUtUsgv0TZGPsv9FNSvXfNtpLqvey/0O+KTgF0zNQV7XHP4dsdtVvVKYCOmeqiPbwVOx21W9UpgI6ZWNEe2cSEo3arOgWwb0YYLp5G17Sjdqs6BdCZzYqL9B3dR2puYM221NwAfUf3uaJTAB0zaye5GmbWS6i2gdFQL5mFMCIJMgthRkO9hGobMLPFN4VWdAoptlcAQeUDRoG77YrZwDhQT4tk7JDsV6ZFMggv2+bZwyt2jYDuQnOa94GIFrc4IkzRrkPUM3NKsijatLjF0copsbJ++xec7TTPqw6EI/oB/glT+PC+13Y/aSQNv/Is+tNer09lMn7DMHwAYppp8fvTIpISkVQsFrslqww4M9OuqkgzANzl1MhCyrjZGAycm573pK1yFCyi5FoWvo/FYlPOT2fOqftRXMbB9lkEs+3zbe2f/FD5i3YMj2p3vn8/IV8DZ5yE+Gqkot+JEQCPada5dRhxEriiQ5ya90w+272916F+KpnJDLhjpkUy5HgESNqhZU2Vfr5ne+dSFtOBeso06J6cnEy6d0z0hPwEPGeH8sGVykvfjpfe1NZUci2+mHg7Go2G8z/d/goQVJ9B8S1veMYffujduo/thl+ZwUzDuBqJRGZWt7n/FcDH46lFNVLilar1uiTTxsJTnTssH/QpJVlMNQa5wbGJiWERya3Vz30zzfLb3OveY3dU5j5dp4e80Xdbd3TOu/H/yyAtpjnqgeGS8crRQRks+v5xf5gtY/KM/6NAVebhwvv90bLvHu2o/XId2pJSMmIaxo/RaHRMxN6yZtPM0K5K/7hl/FxVZgZWbs0mPDceeKcuGE95/kpSKUmaImHDNIfHrl+PiIj2zOb+MFvBY7IUOVl2ZG9g6bJH4ckJuRe/2NYZT3myKIkrGM4pNRyLjY+LW09URDb1+uaF0pfm3zJ+7zhRGdq1c9eDuwOBOzdLa/OG2X+APwE8DU64Y/5gfAAAAABJRU5ErkJggg==",darkOrange:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAQ+SURBVFiF3ZlLaFxlGIaf/5zJpJNpaoxpYieoCxULEYK7Lqp0IWQhFLooKNKEtNIULxWlQoJgQQWLFMEg0lQMuXgD0dRSkNJFgoy0IrYNSTpj08xMmoxNYhLUyUwyt/O5mFbjmGTOLS58d3O+y/u95/vnvx0lIvxf4HE9Y7PyU0ETwl6gAQgANcA88AswhuIsKc7TJ0k3qZVrnTmqtpGhHeFloMJERArF+3g5Qaf84UYJ7og5rPai+JhCB6xiHuEQp+Ws0zI0pwloU+0oBrAnBKAGxQBtqt1pKc46UyjgHadFrEIHXXLCbrB9MYWhNYAb3f0bBsI+u0POnpijahtpJrA/tDbCPOU8aGdSsPdWM7SzOUIAam7ntwzrnWlWfnzMYW76tYsUy9RaXYesd6aCJswI0Tw5WvuG6EyEOWUk6UyEae0bQvPkTLEUeCzBupjCyl4iqyfHydkxdh3YQ/nWnSjlp3zrTnYd2MPJ2TFTgszwFNNaDaCwRdkYLd1B/NWNa9r81Y20dAdd4SmCHTGBkh6P7bvXkd0sTxHsiKku6eH13+fIbpanCHbExEp6ZJJTjuxmeYpgXYwiVNLnysCMI7tZniLYmc1Kk/Qe3E1ycXhNW3JxmN6Du13hKYIdMWsXuRpGzsOxugYu9Q+RXgojkiS9FOZS/xDH6howcqUPhWZ4imB9B9CmyoBx4AGrZBYwCTxMl2StBFnvTJdkUbxlOc4a3rYqBOxuNHfQC0RsxZZGhAA9dgLtiTkuOYQOW7Gl0c5xMbN/+xecnTQPq89QPGM/wT9hCJ8+MvjQ81pK8yp92ZvxeMpUNuvVNK0MQAwjI15vRkTSIpKOxWK/yyoBzsS0qiq8DAP3OxWylNMWmoL1XTMresZsjIJllIzk4GosFrvl/HbmiHoCYRAHx2cBo2Pknp4v45U3befQVY/z8/sp+Q5410mKC7P+oBMhALphBNy6jHgDxU92Am+t6PFXhrcPOeRPp7LZYXfEdEkWjWeBlJWwnKEyr41s/3rFwHDAnjY0zsTj8ZR710Qfys/Aq1ZCPrlZef7iwpYF25xKRhLLyQ+i0Wi48NPtrwBt6hsofeQNJ7zhp74PfGE1/Z0ZzNC0y5FIZHa1zf2vAFmeS2vqerkuVeu5pPLa0otXa01f9CklOQw1AfnRiampkIjk1/JzX0y3/LrY7Dm0w5f/ah0Pee/GXWeiSc/G/y+NjBjGuA6h8snK8VEZLbn+uD/MbiPe7P283pd9uvh5cMH3Q8uPdd+uE7ailFw3NO1aNBqdELG2rdk0MbSqLb8p7UZVmVF/59F8Wp97Mhg4ncjqfxWplKQMkbBmGKGJ6emIiNie2TZPDHB5v+/xxrtXBnWFnhfyL1yp/ejCXMUMShIKQnmlQrFYbFJcKmJTxQBc3O9789FtmZfOzfjPvT5S068bmWvj09PTm8G16WL+S/wJLybNu1V6htkAAAAASUVORK5CYII=",red:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAQxSURBVFiF3ZldaBxVFMd/d2ayTRtjQpo2mlilWBEMshoj+FAERZIHIdA3iw+V1icRREFIQAKNgsUHQfBFwZI2WgWxqYUiVTDBBj9ILC5Nu2tjdjemsR+mSZNNNvsxO8eHTTRuk+zMnQmCf9iHnXvO+Z//nDvn3rmjRIT/C6zAI4ZVFRbtKDpQNCM0AvXANIo/EC4inMbmLBFZDJJaBVaZJ9Sd2HQCrwDbXHikgfewOMKPMh9ECsGIeVx1IHxEsQJeMY3iEMNy2m8aht8AtKpOhH70hADUI/TTqjr9puKvMsUE3vabxCp0MSJHdJ31xRSnVj9BVPcfOCj26U45PTHFh30c/am1EaaxuF+nKejd1WLX2gwhAPXL8T3De2XCqooKbuCu/eoiTZ6dXtch75WxaMeNENOyOXx8kHOpGMPOIudSMQ4fH8S0bBcs25Z5PMF7ZVpVL3BgQxvTsvn6+kVq6sK3jc3NRGhraKZgl9t9HGNEXvCSmvfKKJrL2nQfHVpTCEBNXZjuo0OB8JTAu5jiXmtjPL3vLl/jbnlKoNPN6spaVFbt8jXulqcEOmKSZS0yi5O+xt3ylEBHTLSsxbf913yNu+UpgU4DKE/Sc3AvczORNcfmZiL0HNwbCE8JvItxWDvJ1SjYFm0NzZzpG2RpIYbIIksLMc70Dbpsy+54SqCzzlQAY8B9Xsk8YAJ4gBHJe3HyXpkRyaN407OfN7zlVQjobjTv4BgQ1/ItjzjV9Oo46okZEBuhS8u3PDoZEDf7t9vg903zBLBfP8C/4cAnD87teclIGyFlLoVyllWh8vmQYRgVAOI4OQmFciKSFZFsMpmck1UC/Il5VNViEgHu9StkQYyb7bNNH1wrmDm3PgqWUHLBhl+SyeRV/6czLepJDAbw8fos4HTNb+/9PFv9u3YMU/X6f38/L98B7/gJ8U2uasiPEADTcRqDOozoBn7WcbzqmFOvpnYM+uTPpvP5SDBiimvP8xRPKV3DFpV7fX7HyYyD44M96xicmpqaSgd3TDQsv6J4zYvLx5nqsz/kK29qcyq5kFpafD+RSMSKf4P+CvCY+hJFRzmzmB2KPTvb+JnX8CsdzDGM8/F4/PrqseC/AggvZlGXtyipXc8kLcbCy6mdrg/6lBIbR41DYXR8cjIqIoW17IIXc17+nHnEOnS3VfhiHQt5d7HmVMK2Nn6+DHLiOGMmRLdMVI+NymjZ9Sf4abaMqZbQp01G/rnS60P5rT8duNXw1TpuGaXksmMYlxKJxLiIt23NponhKVV5a874rdZwmlYuTTvmjWdmGj9Mifl3kkpJ2hGJGY4THb9yJS4i2p0t+Gm2ggHJxMNb94eNzIAJZgEKbyxsP5kS00ZJSkG0oFQ0mZyYkKDuqIhs6u/7hyt75luM2RMPVfft3rW7bU9T0z2bxbV50+w/wF8f81R5OpwBhwAAAABJRU5ErkJggg==",turquoiseBlue:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAASxSURBVFiF3ZhdbBRVGIafc2Z2210hbeWnpcQVUC8kwBUJXJBIgwkgBEPEC1GMxhgE4gUJJsYERMWI3orYaiqgrYSWH/mvMaQLciE1RAKUkrLbbhMobQ20/LT7N3OOF0CC0O7szGwv9L3c73u/93vnnD3zzYH/EUTBKx6sHUvQWgR6GTAdmASMA26A6AYuofUhQnYTVevuFlK6cGaObC9DGh8i9PtAKA/GEIKvSRZtZfnbA4VooTBmjlWvQFADPOmBfRN4l8Xv7ffbhvTF1lpwrHoTgga8GeE+by9NNRvR2tfDNfyQmVv5MYJP8L/CAqgidtai/sgpP0W84d7WavBV43Eo0CtYvOaAF7K3Rg7sKKU4Hcf71sqFfmz1DEvX9rslevvPFKc/YnSMAJRhyA+8EN2vzMHasQSzveR3/HrFEMV2udv3kOlaJmgtIg8jYcMcqpu1oGXJhMi0oJQVGaV6Dvd1day62DwnaWWd+GHSciGwz01rHraZXuaUETbMoe6qVR3Ly6fMD0oZAYJBKSOvVEyd3z3/jVjIDCSddYSjzqPwYEY875RRN2tBS4kZnDFcrNQMztw144UzjjKa6W4787IylU4ZSyZEpuWKv1w+dWohdB6Fl9NsnFNCUMqKnHGRO34PYnz+Ld2DFzN3nBIySvXkjGt1PQ+d23l3dB9ezPQ6JRzu6+rIFT/Q25lwVNHkfCDDwYuZFqeEVReb5wxYmQvDxfqz6QtvnW+e69yZcNR5jOKWgKbZKSVpZUOV0bpnG3vi0YxWXUAmo1XXnp54tLL5p+dSyi52FlJRt625nwCavxlDyrgKlLjm5o9byPBkFr456IbkfmWq1t1FsMM1zx1q3RoBr4OmpT4F+jxxndGHrbZ4IXozs3RtP0Ks98R1ghDrvYz/4PfD6ti39Qix0leNh6H07siaL9ZJKYuKtA6lhSgKaC0sWwYATENlLSmVECIZTKcHZ167NtAI9gO6PzO/1ZRg6XPAFF91AJnKDES21NaYN26l8uVoLWyhSZhS/345kUj4/+Q9XjMPdBR/9wl6Qn3TjyWnzyW88i3Y5e92BmDx6tPAV35KjDnXftqHEQBhKDXZvxmA4p5NCJzH+mFg3rxzvXzn0ZN+5BUoW8p4YcxUbbZQ4nXyGEIfhrDt7MS6o/tEOm07Z48ArTPCMPYnEomewpgBeGl1HMQGN5SSk381hdsSNzwqag1tRbZdHY/HL8JoXJwfr24AXnVKK7rae/mpz3fs8aCQ1FqfxzTPxuPxf7243V9oOMESa4XOvqgDZtlIKTKVHpz4w6Ej+ZbUWlgIHdNStkYikbZoNGoNl1f4lQGM3V8us0tLfhmhvh6/98Tu0hN/XslVQ2uRlahOIWWrMozLsVgs7aQ7KmYAAnVb67PjSh+bDsKtHX9Ubmv4dQRaEiE6JLQHwuG21tbWjBvNwm+z+8hmU+/Iu8l5akwo8uA34/bg3+W1B088nKdhCK2vmFJemjV7dqyxsdHzyTZqKwMQ2r55bmpK+SktRABb2ZO+2//9E+djvcAthIgZ0P5aZ+eVzaAKoTeqZgCKt238LP10xYaxZy7tq/j5+E5Ms629vb0b0KOt/Z/GP4jqqfL5oxVsAAAAAElFTkSuQmCC",defaultOffset:[-25.5,-38]},Mn=Mo.a.getLogger("interactions"),In={_extensions:["Measures","ElevationPath","Drawing"],_options:{current:null,clean:null},unset:function(e,t){Mn.trace("unset()");var o={};Wo.mergeParams(o,this._options),Wo.mergeParams(o,t);for(var n=e.getInteractions().getArray(),r=0;r<n.length;r++)if(n[r].getActive()&&(n[r]instanceof y.d||n[r]instanceof m.b||n[r]instanceof g.b)){var i=n[r].getProperties(),s=i.name;if(void 0!==s&&this._extensions.indexOf(s)>-1){if(o.current&&o.current===s)continue;n[r].setActive(!1);var a=i.source;if(void 0!==a&&a instanceof mn.a)for(var l in o)if(o.hasOwnProperty(l)){if("current"===l)continue;if("function"==typeof a[l]){var c=Array.isArray(o[l])?o[l]:[o[l]];a[l].apply(a,c)}}}}}},Rn=function(e){var t=Mo.a.getLogger("checkrightmanagement");if(e){var o=e.key,n=e.resources||[],r=e.services||[];if(0!==n.length){if(0!==r.length){var i={};if(!o){if(!$o.a.isConfigLoaded())return void t.warn("WARNING : The 'apiKey' parameter is missing, and the contract key configuration has not been loaded, so impossible to check yours rights !");o=Object.keys($o.a.configuration.generalOptions.apiKeys),t.log(o)}if($o.a.isConfigLoaded()){for(var s=0;s<n.length;s++)for(var a=n[s],l=0;l<r.length;l++){var c=r[l],u=$o.a.getServiceParams(a,c,o);u&&0!==Object.keys(u).length?(i[c]||(i[c]=[]),i[c].push(a)):t.warn("WARNING : The contract key configuration has no rights to load this geoportal resource ("+a+") for this service ("+c+") ")}return 0===Object.keys(i).length?void t.warn("WARNING : The contract key configuration has been loaded, and the 'apiKey' parameter has been set, but, there is a problem on the mapping between the contract and the key !"):(i.key=u.key,t.log("right management checked",i),i)}t.warn("WARNING : the contract key configuration has not been loaded, so be carefull !");for(var d={},h=0;h<r.length;h++){var p=r[h];d[p]=[];for(var f=0;f<n.length;f++){var m=n[f];d[p].push(m)}}return d.key=o,t.log("right management not checked",d),d}t.error("WARNING : no parameter 'services' specified !")}else t.error("WARNING : no parameter 'resources' specified !")}else t.error("WARNING : no parameter specified !")},Ln={advancedSearchFiltersByDefault:{PositionOfInterest:[{name:"importance",title:"Importance"},{name:"nature",title:"Nature"},{name:"territory",title:"Territoire"},{name:"insee",title:"Code INSEE"},{name:"municipality",title:"Ville"},{name:"department",title:"DÃ©partement"}],StreetAddress:[{name:"territory",title:"Territoire"},{name:"insee",title:"Code INSEE"},{name:"municipality",title:"Ville"},{name:"department",title:"DÃ©partement"}],CadastralParcel:[{name:"department",title:"DÃ©partement",description:"NumÃ©ro du dÃ©partement (ex: 01, 94)"},{name:"commune",title:"Code commune (INSEE)",description:"Code commune (INSEE) : 3 chiffres (ex: 067)"},{name:"absorbedCity",title:"Commune absorbÃ©e",description:"Commune absorbÃ©e : 3 chiffres (ex: 000, 001)"},{name:"section",title:"Section",description:"Section : 2 caractÃ¨res (ex: AA, 0D)"},{name:"number",title:"NumÃ©ro",description:"NumÃ©ro de la parcelle : 4 chiffres (ex: 0041, 0250)"}],Administratif:[{name:"prefecture",title:"PrÃ©fecture"},{name:"inseeRegion",title:"Code rÃ©gion (INSEE)"},{name:"inseeDepartment",title:"Code dÃ©partement (INSEE)"},{name:"municipality",title:"Ville"}]},zoomToResultsByDefault:function(e){var t=15,o=e.service,n=e.fields,r=e.type,i={1:11,2:12,3:13,4:14,5:15,6:16,7:17,8:17};return"SuggestedLocation"===o&&"PositionOfInterest"===r&&(t=i[n.classification]),"DirectGeocodedLocation"===o&&"PositionOfInterest"===r&&(t=i[n.importance]||14),"StreetAddress"===r&&(t=17),"CadastralParcel"===r&&(t=17),"Administratif"===r&&(t=12),t}},kn={_addUID:function(e){return this._uid?e+"-"+this._uid:e},_createMainContainerElement:function(){var e=document.createElement("div");return e.id=this._addUID("GPsearchEngine"),e.className="GPwidget",e},_createShowSearchEngineElement:function(){var e=document.createElement("input");return e.id=this._addUID("GPshowSearchEngine"),e.type="checkbox",e},_createShowSearchEnginePictoElement:function(){var e=this,t=document.createElement("label");t.id=this._addUID("GPshowSearchEnginePicto"),t.className="GPshowAdvancedToolPicto",t.htmlFor=this._addUID("GPshowSearchEngine"),t.title="Afficher/masquer la recherche par lieux",t.addEventListener("click",(function(){document.getElementById(e._addUID("GPautoCompleteList")).style.display="none",document.getElementById(e._addUID("GPgeocodeResultsList")).style.display="none";var t=document.getElementById(e._addUID("GPshowAdvancedSearch"));t&&(t.style.display=null,document.getElementById(e._addUID("GPadvancedSearchPanel")).style.display="none");var o="#GPsearchInput-"+e._uid;document.querySelector(o+" input").disabled=!1,e.onShowSearchEngineClick()}));var o=document.createElement("span");return o.id=this._addUID("GPshowSearchEngineOpen"),o.className="GPshowAdvancedToolOpen",t.appendChild(o),t},_createSearchInputElement:function(e){var t=this,o=document.createElement("form");o.id=this._addUID("GPsearchInput"),o.addEventListener("submit",(function(e){return e.preventDefault(),document.getElementById(t._addUID("GPgeocodeResultsList")).style.display="block",document.getElementById(t._addUID("GPautoCompleteList")).style.display="none",t.onGeocodingSearchSubmit(e),!1}));var n=document.createElement("input");n.id=this._addUID("GPsearchInputText"),n.type="text",n.placeholder=e,n.autocomplete="off",n.addEventListener("keyup",(function(e){var o=e.which||e.keyCode;13!==o&&10!==o&&38!==o&&40!==o&&(document.getElementById(t._addUID("GPgeocodeResultsList")).style.display="none",n.value.length>2?document.getElementById(t._addUID("GPautoCompleteList")).style.display="block":document.getElementById(t._addUID("GPautoCompleteList")).style.display="none",t.onAutoCompleteSearchText(e))})),n.addEventListener("keydown",(function(e){var o=e.which||e.keyCode,n=document.getElementById(t._addUID("GPautocompleteResults"));if(n){var r=n.getElementsByClassName("GPautoCompleteProposal current"),i=n.getElementsByClassName("GPautoCompleteProposal"),s=i.length;if(s){var a=null;if(!r.length)return(a=i[0]).className="GPautoCompleteProposal current",a.style.color="#000000",void(a.style["background-color"]="#CEDBEF");a=r[0];var l=parseInt(yn.index(a.id),10),c=l===s-1?i[0]:i[l+1],u=0===l?i[s-1]:i[l-1];switch(a.style["background-color"]="",a.style.color="",u.style["background-color"]="",u.style.color="",c.style["background-color"]="",c.style.color="",o){case 38:a.className="GPautoCompleteProposal",u.className="GPautoCompleteProposal current",u.style.color="#000000",u.style["background-color"]="#CEDBEF";break;case 40:a.className="GPautoCompleteProposal",c.className="GPautoCompleteProposal current",c.style.color="#000000",c.style["background-color"]="#CEDBEF";break;case 13:e.preventDefault(),a.click(e)}a.focus()}}})),o.appendChild(n);var r=document.createElement("div");return r.id=this._addUID("GPsearchInputReset"),r.addEventListener("click",(function(){document.getElementById(t._addUID("GPsearchInputText")).value="",document.getElementById(t._addUID("GPautoCompleteList")).style.display="none",document.getElementById(t._addUID("GPgeocodeResultsList")).style.display="none",t.onSearchResetClick()})),o.appendChild(r),o},_createShowAdvancedSearchElement:function(){var e=this,t=document.createElement("div");t.id=this._addUID("GPshowAdvancedSearch"),t.className="GPshowAdvancedToolPicto",t.title="Ouvrir la recherche avancÃ©e",t.addEventListener("click",(function(){var t="#GPsearchInput-"+e._uid;document.querySelector(t+" input").disabled=!0,document.getElementById(e._addUID("GPautoCompleteList")).style.display="none",document.getElementById(e._addUID("GPgeocodeResultsList")).style.display="none",document.getElementById(e._addUID("GPshowAdvancedSearch")).style.display="none",document.getElementById(e._addUID("GPadvancedSearchPanel")).style.display="inline-block"}));var o=document.createElement("span");return o.id=this._addUID("GPshowAdvancedSearchOpen"),o.className="GPshowAdvancedToolOpen",t.appendChild(o),t},_createAdvancedSearchPanelElement:function(){var e=document.createElement("div");return e.id=this._addUID("GPadvancedSearchPanel"),e.className="GPpanel",e.style.display="none",e},_createGeocodeResultsElement:function(){var e=document.createElement("div");return e.id=this._addUID("GPgeocodeResultsList"),e.className="GPpanel",e.style.display="none",e.appendChild(this._createGeocodeResultsHeaderElement()),e},_createAutoCompleteElement:function(){var e=document.createElement("div");return e.id=this._addUID("GPautoCompleteList"),e.className="GPautoCompleteList",e.style.display="none",e},_createAutoCompleteListElement:function(){var e=this,t=document.createElement("div");return t.id=this._addUID("GPautocompleteResults"),t.addEventListener?t.addEventListener("click",(function(t){e.onAutoCompletedResultsItemClick(t),document.getElementById(e._addUID("GPautoCompleteList")).style.display="none"}),!1):t.attachEvent&&t.attachEvent("onclick",(function(t){e.onAutoCompletedResultsItemClick(t),document.getElementById(e._addUID("GPautoCompleteList")).style.display="none"})),t},_createAutoCompletedLocationElement:function(e,t){var o=document.getElementById(this._addUID("GPautocompleteResults")),n=document.createElement("div");n.id=this._addUID("AutoCompletedLocation_"+t),n.className="GPautoCompleteProposal",n.innerHTML=e.fullText,n.addEventListener?n.addEventListener("click",(function(e){o.click(e)}),!1):n.attachEvent&&n.attachEvent("onclick",(function(e){o.click(e)})),o.appendChild(n)},_createAdvancedSearchPanelHeaderElement:function(){var e=this,t=document.createElement("div");t.className="GPpanelHeader";var o=document.createElement("div");o.className="GPpanelTitle",o.innerHTML="Recherche avancÃ©e",t.appendChild(o);var n=document.createElement("div");return n.id=this._addUID("GPadvancedSearchClose"),n.className="GPpanelClose",n.title="Fermer la recherche avancÃ©e",n.addEventListener?n.addEventListener("click",(function(){var t="#GPsearchInput-"+e._uid;document.querySelector(t+" input").disabled=!1,document.getElementById(e._addUID("GPgeocodeResultsList")).style.display="none",document.getElementById(e._addUID("GPshowAdvancedSearch")).style.display="inline-block",document.getElementById(e._addUID("GPadvancedSearchPanel")).style.display="none"}),!1):n.attachEvent&&n.attachEvent("onclick",(function(){var t="#GPsearchInput-"+e._uid;document.querySelector(t+" input").disabled=!1,document.getElementById(e._addUID("GPgeocodeResultsList")).style.display="none",document.getElementById(e._addUID("GPshowAdvancedSearch")).style.display="inline-block",document.getElementById(e._addUID("GPadvancedSearchPanel")).style.display="none"})),t.appendChild(n),t},_createAdvancedSearchPanelFormElement:function(e){var t=this,o=document.createElement("form");o.id=this._addUID("GPadvancedSearchForm"),o.addEventListener("submit",(function(e){e.preventDefault();for(var o=[],n="#GPadvancedSearchFilters-"+t._uid,r=document.querySelectorAll(n+" > div > div > input"),i=0;i<r.length;i++){var s=r[i];o.push({key:s.name,value:s.value})}return t.onGeocodingAdvancedSearchSubmit(e,o),document.getElementById(t._addUID("GPgeocodeResultsList")).style.display="block",!1}));var n=document.createElement("div");n.className="GPflexInput";var r=document.createElement("label");r.className="GPadvancedSearchCodeLabel",r.innerHTML="Recherche par",n.appendChild(r);var i=this._createAdvancedSearchFormCodeElement(e);return n.appendChild(i),o.appendChild(n),o},_createAdvancedSearchFormCodeElement:function(e){var t=this,o=document.createElement("select");o.id=this._addUID("GPadvancedSearchCode"),o.className="GPadvancedSearchCode",o.addEventListener("change",(function(e){t.onGeocodingAdvancedSearchCodeChange(e)}),!1),e||(e=[{id:"PositionOfInterest",title:"Lieux/toponymes"},{id:"StreetAddress",title:"Adresses"},{id:"CadastralParcel",title:"Parcelles cadastrales"},{id:"Administratif",title:"Administratif"}]);for(var n=0;n<e.length;n++){var r=document.createElement("option");r.value=e[n].id,r.text=e[n].title,o.appendChild(r)}return o},_createAdvancedSearchFormInputElement:function(){var e=document.createElement("input");return e.type="submit",e.id=this._addUID("GPadvancedSearchSubmit"),e.className="GPinputSubmit",e.value="Chercher",e},_createAdvancedSearchFormFiltersElement:function(){var e=document.createElement("div");return e.id=this._addUID("GPadvancedSearchFilters"),e},_createAdvancedSearchFiltersTableElement:function(e,t){var o=document.createElement("div");return o.id=this._addUID(e),t||(o.style.display="none"),o},_createAdvancedSearchFiltersAttributElement:function(e){var t=null,o=e.name,n=e.title,r=e.description,i=e.code,s=e.value,a=document.createElement("div");a.className="GPflexInput";var l=document.createElement("label");l.className="GPadvancedSearchFilterLabel",l.htmlFor=o,l.title=r||n,l.innerHTML=n,a.appendChild(l);var c=document.createElement("input");return c.id=o,c.className="GPadvancedSearchFilterInput",c.type="text",c.name=o,s&&(c.value=s),a.appendChild(c),(t=document.getElementById(this._addUID(i)))?t.appendChild(a):t=a,t},_createGeocodeResultsHeaderElement:function(){var e=this,t=document.createElement("div");t.className="GPpanelHeader";var o=document.createElement("div");o.className="GPpanelTitle",o.innerHTML="RÃ©sultats de la recherche",t.appendChild(o);var n=document.createElement("div");return n.id=this._addUID("GPgeocodeResultsClose"),n.className="GPpanelClose",n.title="Fermer la fenÃªtre de rÃ©sultats",n.addEventListener?n.addEventListener("click",(function(){document.getElementById(e._addUID("GPgeocodeResultsList")).style.display="none"}),!1):n.attachEvent&&n.attachEvent("onclick",(function(){document.getElementById(e._addUID("GPgeocodeResultsList")).style.display="none"})),t.appendChild(n),t},_createGeocodeResultsListElement:function(){var e=this,t=document.createElement("div");return t.id=this._addUID("GPgeocodeResults"),t.addEventListener?t.addEventListener("click",(function(t){t.ctrlKey||(document.getElementById(e._addUID("GPgeocodeResultsList")).style.display="none"),e.onGeocodedResultsItemClick(t)}),!1):t.attachEvent&&t.attachEvent("onclick",(function(t){t.ctrlKey||(document.getElementById(e._addUID("GPgeocodeResultsList")).style.display="none"),e.onGeocodedResultsItemClick(t)})),t},_createGeocodedLocationElement:function(e,t){var o=document.getElementById(this._addUID("GPgeocodeResults")),n=document.createElement("div");if(n.id=this._addUID("GeocodedLocation_"+t),n.className="GPautoCompleteProposal","string"==typeof e)n.innerHTML=e;else{var r=e.placeAttributes;r.freeform?n.innerHTML=r.freeform:r.postalCode?n.innerHTML=r.postalCode+" "+r.commune:r.cadastralParcel?n.innerHTML=r.cadastralParcel:n.innerHTML="..."}o.appendChild(n)}};function Gn(e){return(Gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Nn=Mo.a.getLogger("searchengine"),Dn=function(e){function t(o){if(o=o||{},!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.initialize(o),this._container=this._initContainer(),this._containerElement=null,o.element&&o.element.appendChild&&(o.element.appendChild(this._container),this._containerElement=o.element),e.call(this,{element:this._containerElement||this._container,target:o.target,render:o.render})}return e&&(t.__proto__=e),t.prototype=Object.create(e.prototype,{}),Wo.assign(t.prototype,kn),t.prototype.constructor=t,t.prototype.setMap=function(t){t||this._clearResults(),e.prototype.setMap.call(this,t)},t.prototype.getCollapsed=function(){return this.collapsed},t.prototype.setCollapsed=function(e){void 0!==e?e&&this.collapsed||!e&&!this.collapsed||(this._showSearchEngineInput.click(),this.collapsed=e):Nn.log("[ERROR] SearchEngine:setCollapsed - missing collapsed parameter")},t.prototype.initialize=function(e){this._checkInputOptions(e),this.options={collapsed:!0,zoomTo:"",resources:{geocode:[],autocomplete:[]},displayAdvancedSearch:!0,advancedSearch:{},geocodeOptions:{serviceOptions:{}},autocompleteOptions:{serviceOptions:{},triggerGeocode:!1,triggerDelay:1e3},displayMarker:!0,markerStyle:"lightOrange",placeholder:"Rechercher un lieu, une adresse"},Wo.mergeParams(this.options,e),0===this.options.resources.geocode.length&&(this.options.resources.geocode=["PositionOfInterest","StreetAddress"]),0===this.options.resources.autocomplete.length&&(this.options.resources.autocomplete=["PositionOfInterest","StreetAddress"]),this.collapsed=this.options.collapsed,this._uid=yn.generate(),this._showSearchEngineInput=null,this._inputSearchContainer=null,this._autocompleteContainer=null,this._suggestedContainer=null,this._suggestedLocations=[],this._geocodedContainer=null,this._geocodedLocations=[],this._filterContainer=null,this._currentGeocodingCode=null,this._currentGeocodingLocation=null,this._advancedSearchFilters={},this._initAdvancedSearchFilters(),this._advancedSearchCodes=[],this._initAdvancedSearchCodes(),this._marker=null;var t=this.options.markerStyle;this._markerUrl=-1===Object.keys(An).indexOf(t)?An.lightOrange:An[t],this._displayMarker=this.options.displayMarker,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null,this._servicesRightManagement={},this._noRightManagement=!1,this._checkRightsManagement(),this._triggerHandler=null},t.prototype._checkInputOptions=function(e){var t;if(e.resources)if("object"===Gn(e.resources)){var o=e.resources.geocode;if(o)if(Array.isArray(o)){var n=["StreetAddress","PositionOfInterest","CadastralParcel","Administratif"];for(t=0;t<o.length;t++)-1===n.indexOf(o[t])&&Nn.log("[SearchEngine] options.resources.geocode : "+o[t]+" is not a resource for geocode")}else Nn.log("[SearchEngine] 'options.resources.geocode' parameter should be an array"),o=null;var r=e.resources.autocomplete;if(r)if(Array.isArray(r)){var i=["StreetAddress","PositionOfInterest"];for(t=0;t<r.length;t++)-1===i.indexOf(r[t])&&Nn.log("[SearchEngine] options.resources.autocomplete : "+r[t]+" is not a resource for autocomplete")}else Nn.log("[SearchEngine] 'options.resources.autocomplete' parameter should be an array"),r=null}else Nn.log("[SearchEngine] 'resources' parameter should be an object"),e.resources=null},t.prototype._initAdvancedSearchCodes=function(){for(var e=this.options.resources.geocode,t=0;t<e.length;t++)switch(e[t]){case"PositionOfInterest":this._advancedSearchCodes.push({id:"PositionOfInterest",title:"Lieux/toponymes"});break;case"StreetAddress":this._advancedSearchCodes.push({id:"StreetAddress",title:"Adresses"});break;case"CadastralParcel":this._advancedSearchCodes.push({id:"CadastralParcel",title:"Parcelles cadastrales"});break;case"Administratif":this._advancedSearchCodes.push({id:"Administratif",title:"Administratif"})}0===this._advancedSearchCodes.length&&(this._advancedSearchCodes=[{id:"StreetAddress",title:"Adresses"},{id:"PositionOfInterest",title:"Lieux/toponymes"}]),Nn.log("advancedSearchCodes",this._advancedSearchCodes)},t.prototype._initAdvancedSearchFilters=function(){this._advancedSearchFilters=Ln.advancedSearchFiltersByDefault;var e=this.options.advancedSearch;Wo.assign(this._advancedSearchFilters,e),Nn.log("advancedSearchFilters",this._advancedSearchFilters)},t.prototype._initPopupDiv=function(){var e=this,t=document.createElement("div");t.className="gp-feature-info-div";var o=document.createElement("input");return o.type="button",o.className="gp-styling-button closer",o.onclick=function(){return null!=e._popupOverlay&&e._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",this._popupContent.style["min-width"]="200px",t.appendChild(this._popupContent),t.appendChild(o),t},t.prototype._initContainer=function(){var e=this._createMainContainerElement(),t=this._showSearchEngineInput=this._createShowSearchEngineElement();e.appendChild(t),this.options.collapsed||(t.checked=!0);var o=this._createShowSearchEnginePictoElement();e.appendChild(o);var n=this._inputSearchContainer=this._createSearchInputElement(this.options.placeholder),r=this;if(n.addEventListener?n.addEventListener("click",(function(){r.onAutoCompleteInputClick()})):n.attachEvent&&n.attachEvent("onclick",(function(){r.onAutoCompleteInputClick()})),e.appendChild(n),this.options.displayAdvancedSearch){var i=this._createShowAdvancedSearchElement();e.appendChild(i);var s=this._createAdvancedSearchPanelElement(),a=this._createAdvancedSearchPanelHeaderElement(),l=this._createAdvancedSearchPanelFormElement(this._advancedSearchCodes),c=this._filterContainer=this._createAdvancedSearchFormFiltersElement();this._setFilter(this._advancedSearchCodes[0].id);var u=this._createAdvancedSearchFormInputElement();l.appendChild(c),l.appendChild(u),s.appendChild(a),s.appendChild(l),e.appendChild(s)}var d=this._autocompleteContainer=this._createAutoCompleteElement(),h=this._suggestedContainer=this._createAutoCompleteListElement();d.appendChild(h),e.appendChild(d);var p=this._createGeocodeResultsElement(),f=this._geocodedContainer=this._createGeocodeResultsListElement();return p.appendChild(f),e.appendChild(p),e},t.prototype._setFilter=function(e){for(var t=this._filterContainer,o=!1,n=0;n<this._advancedSearchCodes.length;n++)if(this._advancedSearchCodes[n].id===e){o=!0;break}if(o){for(this._currentGeocodingCode=e;t.firstChild;)t.removeChild(t.firstChild);var r=this._advancedSearchFilters[e];if(r&&0!==r.length){for(var i=this._createAdvancedSearchFiltersTableElement(e,!0),s=0;s<r.length;s++){var a=this._createAdvancedSearchFiltersAttributElement(r[s]);i.appendChild(a)}return t.appendChild(i),t}}else for(;t.firstChild;)t.removeChild(t.firstChild)},t.prototype._checkRightsManagement=function(){var e,t=[],o=null;e=this.options.autocompleteOptions.apiKey,(t=(o=this.options.autocompleteOptions.filterOptions)?o.type:[])&&0!==t.length||(t=this.options.resources.autocomplete),t&&0!==t.length||(t=["StreetAddress","PositionOfInterest"]);var n=Rn({key:e||this.options.apiKey,resources:t,services:["AutoCompletion"]});Nn.log("rightManagementAutoComplete",n),e=this.options.geocodeOptions.apiKey,(t=(o=this.options.geocodeOptions.filterOptions)?o.type:[])&&0!==t.length||(t=this.options.resources.geocode),t&&0!==t.length||(t=["StreetAddress","PositionOfInterest"]);var r=Rn({key:e||this.options.apiKey,resources:t,services:["Geocode"]});Nn.log("rightManagementGeocode",r),n||r?(this.options.apiKey||(this.options.apiKey=r?r.key:n.key),n&&(this._servicesRightManagement.AutoCompletion=n.AutoCompletion),r&&(this._servicesRightManagement.Geocode=r.Geocode)):this._noRightManagement=!0},t.prototype._requestAutoComplete=function(e){if(e&&("object"!==Gn(e)||0!==Object.keys(e).length)&&e.text){Nn.log(e);var t={};Wo.assign(t,this.options.autocompleteOptions.serviceOptions),Wo.assign(t,e);var o=this.options.resources.autocomplete;o&&Array.isArray(o)&&(t.filterOptions||(t.filterOptions={}),t.filterOptions.type||(t.filterOptions.type=o)),t.apiKey=t.apiKey||this.options.apiKey,"boolean"!=typeof t.ssl&&("boolean"==typeof this.options.ssl?t.ssl=this.options.ssl:t.ssl=!0),Nn.log(t),Ao.Services.autoComplete(t)}},t.prototype._fillAutoCompletedLocationListContainer=function(e){if(e&&0!==e.length){var t=this._suggestedContainer;if(t.childElementCount)for(;t.firstChild;)t.removeChild(t.firstChild);this._displaySuggestedLocation();for(var o=0;o<e.length;o++)this._createAutoCompletedLocationElement(e[o],o)}},t.prototype._requestGeocoding=function(e){if(e&&("object"!==Gn(e)||0!==Object.keys(e).length)&&e.location){Nn.log(e);var t={returnFreeForm:!0};Wo.assign(t,this.options.geocodeOptions.serviceOptions),Wo.assign(t,e);var o=this.options.resources.geocode;o&&Array.isArray(o)&&(t.filterOptions||(t.filterOptions={}),t.filterOptions.type||(t.filterOptions.type=o)),t.apiKey=t.apiKey||this.options.apiKey,"boolean"!=typeof t.ssl&&("boolean"==typeof this.options.ssl?t.ssl=this.options.ssl:t.ssl=!0),Nn.log(t),Ao.Services.geocode(t)}},t.prototype._fillGeocodedLocationListContainer=function(e){if(e&&0!==e.length){var t=this._geocodedContainer;if(t.childElementCount)for(;t.firstChild;)t.removeChild(t.firstChild);for(var o=0;o<e.length;o++)Nn.log(e[o]),this._createGeocodedLocationElement(e[o],o);this._geocodedLocations=e}else this._clearGeocodedLocation()},t.prototype._setLabel=function(e){document.getElementById("GPsearchInputText-"+this._uid).value=e},t.prototype._setPosition=function(e,t){var o=this.getMap().getView();o.setCenter(e),o.setZoom(t)},t.prototype._setMarker=function(e,t){var o=this.getMap(),n=this;if(null!=this._marker&&(o.removeOverlay(this._marker),this._marker=null),e){var r=document.createElement("img");r.src=this._markerUrl,r.addEventListener?r.addEventListener("click",(function(){n._onResultMarkerSelect(t)})):r.attachEvent&&r.attachEvent("onclick",(function(){n._onResultMarkerSelect(t)})),this._marker=new c.a({position:e,offset:[-25.5,-38],element:r,stopEvent:!1}),o.addOverlay(this._marker)}},t.prototype._getZoom=function(e){var t=this.getMap(),o=this.options.zoomTo,n=null;if("function"==typeof o&&(Nn.trace("zoom function"),n=o.call(this,e)),"number"==typeof o&&(Nn.trace("zoom level"),n=o),"string"==typeof o)if("auto"===o)Nn.trace("zoom auto"),n=Ln.zoomToResultsByDefault(e);else{Nn.trace("zoom level parsing");var r=parseInt(o,10);isNaN(r)||(Nn.trace("zoom parsing"),n=r)}Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},n&&""!==n&&Number.isInteger(n)||(Nn.trace("zoom not found, current zoom..."),n=t.getView().getZoom());var i=t.minZoom,s=t.maxZoom;return n<i&&(Nn.trace("zoom level min..."),n=i),n>s&&(Nn.trace("zoom level max..."),n=s),Nn.trace("zoom",n),n},t.prototype._onResultMarkerSelect=function(e){var t=this.getMap(),o="";if(e.attributes){o="<ul>";var n=e.attributes;for(var r in n)n.hasOwnProperty(r)&&"bbox"!==r&&(o+="<li>",o+='<span class="gp-attname-others-span">'+r.toUpperCase()+" : </span>",o+=n[r],o+=" </li>");o+=" </ul>"}else o=e.label;this._popupContent.innerHTML=o,this._popupOverlay?this._popupOverlay.setPosition(this._marker.getPosition()):(this._popupOverlay=new c.a({element:this._popupDiv,positioning:"bottom-center",position:this._marker.getPosition(),offset:[0,-42]}),t.addOverlay(this._popupOverlay))},t.prototype.onShowSearchEngineClick=function(){var e=this.getMap();In.unset(e),this.collapsed=this._showSearchEngineInput.checked,this.dispatchEvent("change:collapsed")},t.prototype.onSearchResetClick=function(){this._clearResults()},t.prototype.onAutoCompleteInputClick=function(){var e=document.getElementById("GPsearchInputText-"+this._uid);e&&!e.disabled&&e.value.length>2&&this._displaySuggestedLocation()},t.prototype.onAutoCompleteSearchText=function(e){var t=e.target.value;if(t)if(this._noRightManagement)Nn.log("no rights for this service !");else if(this._currentGeocodingLocation=t,t.length<3)this._clearSuggestedLocation();else{var o=this.options.autocompleteOptions.triggerGeocode,n=this.options.autocompleteOptions.triggerDelay,r=this;this._requestAutoComplete({text:t,onSuccess:function(e){if(Nn.log("request from AutoComplete",e),e){r._suggestedLocations=e.suggestedLocations,r._locationsToBeDisplayed=[];for(var t=0;t<r._suggestedLocations.length;t++){var o=r._suggestedLocations[t];o.position&&0===o.position.x&&0===o.position.y&&o.fullText?r._getGeocodeCoordinatesFromFullText(o,t):r._locationsToBeDisplayed.push(o)}r._fillAutoCompletedLocationListContainer(r._locationsToBeDisplayed),r._triggerHandler&&(clearTimeout(r._triggerHandler),r._triggerHandler=null,Nn.warn("Cancel a geocode request !"))}},onFailure:function(e){r._clearSuggestedLocation(),Nn.log(e.message),"No suggestion matching the search"===e.message&&o&&(r._triggerHandler&&(clearTimeout(r._triggerHandler),Nn.warn("Cancel the last geocode request !")),r._triggerHandler=setTimeout((function(){Nn.warn("Launch a geocode request (code postal) !"),r._requestGeocoding({location:t,returnFreeForm:!0,onSuccess:function(e){if(Nn.log("request from Geocoding",e),e){r._locationsToBeDisplayed=[];for(var t=e.locations,o=0;o<t.length;o++){var n=t[o];n.fullText=n.placeAttributes.freeform,n.position={x:n.position.y,y:n.position.x},r._locationsToBeDisplayed.push(n)}r._fillAutoCompletedLocationListContainer(t)}},onFailure:function(e){Nn.log(e.message)}})}),n))}});var i=this.getMap();i.on("click",this._hideSuggestedLocation,this),i.on("pointerdrag",this._hideSuggestedLocation,this)}},t.prototype._getGeocodeCoordinatesFromFullText=function(e,t){var o=this;Ao.Services.geocode({apiKey:this.options.apiKey,ssl:this.options.ssl,location:e.fullText,filterOptions:{type:e.type},onSuccess:function(e){Nn.log("request from Geocoding (coordinates null)",e),e.locations&&0!==e.locations.length&&e.locations[0].position&&o._suggestedLocations&&o._suggestedLocations[t]&&(o._suggestedLocations[t].position={x:e.locations[0].position.y,y:e.locations[0].position.x},o._locationsToBeDisplayed.unshift(o._suggestedLocations[t]),o._fillAutoCompletedLocationListContainer(o._locationsToBeDisplayed))},onFailure:function(){o._suggestedLocations&&o._suggestedLocations[t]&&o._createAutoCompletedLocationElement(o._suggestedLocations[t],t)}})},t.prototype.onAutoCompletedResultsItemClick=function(e){var t=yn.index(e.target.id);if(Nn.log(t),Nn.log(this._locationsToBeDisplayed[t]),t){var o=[this._locationsToBeDisplayed[t].position.x,this._locationsToBeDisplayed[t].position.y],n={service:"SuggestedLocation",type:this._locationsToBeDisplayed[t].type,fields:this._locationsToBeDisplayed[t]},r=this._locationsToBeDisplayed[t].fullText;this._setLabel(r),n.label=r;var i=this.getMap().getView().getProjection().getCode();"EPSG:4326"!==i&&(o=Object(a.E)(o,"EPSG:4326",i));var s=this._getZoom(n);this._setPosition(o,s),this._displayMarker&&this._setMarker(o,n)}},t.prototype.onGeocodingSearchSubmit=function(e){var t=e.target[0].value;if(t)if(this._noRightManagement)Nn.log("no rights for this service !");else{this._currentGeocodingLocation=t;var o=this;this._requestGeocoding({location:t,onSuccess:function(e){if(Nn.log("request from Geocoding",e),e){var t=e.locations;o._fillGeocodedLocationListContainer(t)}},onFailure:function(e){o._clearGeocodedLocation(),Nn.log(e.message)}})}},t.prototype.onGeocodedResultsItemClick=function(e){var t=yn.index(e.target.id);if(t){var o,n=[this._geocodedLocations[t].position.y,this._geocodedLocations[t].position.x],r=this._geocodedLocations[t].placeAttributes,i={service:"DirectGeocodedLocation",type:this._geocodedLocations[t].type,fields:this._geocodedLocations[t]};r.freeform?o=r.freeform:r.postalCode?(o=r.postalCode+" "+r.commune,i.attributes=r):r.cadastralParcel?(o=r.cadastralParcel,i.attributes=r):o="...",this._setLabel(o),i.label=o;var s=this.getMap().getView().getProjection().getCode();"EPSG:4326"!==s&&(n=Object(a.E)(n,"EPSG:4326",s));var l=this._getZoom(i);this._setPosition(n,l),this._displayMarker&&this._setMarker(n,i)}},t.prototype.onGeocodingAdvancedSearchCodeChange=function(e){Nn.log(e);var t=e.target.selectedIndex,o=e.target.options[t].value;o&&this._setFilter(o)},t.prototype.onGeocodingAdvancedSearchSubmit=function(e,t){if(Nn.log(t),t&&0!==t.length){var o,n,r={};r.type=[this._currentGeocodingCode];for(var i=0;i<t.length;i++)r[(n=t[i]).key]=n.value;"CadastralParcel"===this._currentGeocodingCode?(o=this._getCadastralParcelRequestParams(r),r={type:[this._currentGeocodingCode]}):o=this._currentGeocodingLocation;var s=this;this._requestGeocoding({location:o,filterOptions:r,onSuccess:function(e){if(Nn.log(e),e){var t=e.locations;s._fillGeocodedLocationListContainer(t)}},onFailure:function(e){s._clearGeocodedLocation(),Nn.log(e.message)}})}},t.prototype._getCadastralParcelRequestParams=function(e){var t,o="",n=e.department;o=n?2===(t=n.length)?n:1===t?"0"+n:n.substring(0,2):"__";var r=e.commune;o+=r?3===(t=r.length)?r:2===t?"_"+r:1===t?"__"+r:r.substring(0,3):"___";var i=e.insee;i&&5===i.length&&(o=i);var s=e.absorbedCity;s?3===(t=s.length)?o+=s:t<3?2===t?o+="_"+s:1===t&&(o+="__"+s):o+=s.substring(0,3):o+="___";var a=e.section;o+=a?2===(t=a.length)?a:1===t?"_"+a:a.substring(0,2):"__";var l=e.number;return o+=l?4===(t=l.length)?l:3===t?"_"+l:2===t?"__"+l:1===t?"___"+l:l.substring(0,4):"___",Nn.log("location : "+o),o},t.prototype._clearResults=function(){var e=this.getMap();this._currentGeocodingLocation=null,this._clearSuggestedLocation(),this._clearGeocodedLocation(),this._setMarker(),null!=this._popupOverlay&&(e.removeOverlay(this._popupOverlay),this._popupOverlay=null)},t.prototype._clearSuggestedLocation=function(){if(this._suggestedLocations=[],this._suggestedContainer)for(;this._suggestedContainer.firstChild;)this._suggestedContainer.removeChild(this._suggestedContainer.firstChild)},t.prototype._hideSuggestedLocation=function(){this._autocompleteContainer&&(this._autocompleteContainer.style.display="none")},t.prototype._displaySuggestedLocation=function(){this._autocompleteContainer&&(this._autocompleteContainer.style.display="block")},t.prototype._clearGeocodedLocation=function(){if(this._geocodedLocations=[],this._geocodedContainer)for(;this._geocodedContainer.firstChild;)this._geocodedContainer.removeChild(this._geocodedContainer.firstChild)},t}(mn.a),Fn=Dn;window.ol&&window.ol.control&&(window.ol.control.SearchEngine=Dn);var Un={modulo:function(e,t){var o=e%t;return o*t<0?o+t:o},decimalToDMS:function(e,t,o){var n=this.modulo(e+180,360)-180,r=Math.abs(3600*n),i=o||0,s=Math.pow(10,i),a=Math.floor(r/3600),l=Math.floor((r-3600*a)/60),c=r-3600*a-60*l;return(c=Math.ceil(c*s)/s)>=60&&(c=0,l+=1),l>=60&&(l=0,a+=1),{d:a,m:l,s:c,direction:t.charAt(n<0?1:0)}},toInteger:function(e,t){var o=parseInt(e,t||10);return!isNaN(o)&&isFinite(o)?o:null},isInteger:function(e){if(isNaN(e))return!1;var t=parseFloat(e);return(0|t)===t},toFloat:function(e){var t=parseFloat(e);return!isNaN(t)&&isFinite(t)?t:null}},Bn=Mo.a.getLogger("draggable"),zn={dragElement:function(e,t,o){var n,r,i=!1,s={x:0,y:0};function a(t){(t=t||window.event).preventDefault(),i=!0,t._pageX=t._pageX||t.clientX+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft),t._pageY=t._pageY||t.clientY+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop),s.x=t._pageX-e.offsetLeft,s.y=t._pageY-e.offsetTop,document.addEventListener("mouseup",l,!0),document.addEventListener("mousemove",c,!0)}function l(){i=!1,document.removeEventListener("mouseup",l,!0),document.removeEventListener("mousemove",c,!0)}function c(t){if(t=t||window.event,i){t._pageX=t._pageX||t.clientX+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft),t._pageY=t._pageY||t.clientY+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop);var o=e.parentElement.offsetLeft,a=e.parentElement.offsetTop;Bn.trace("parent offset",o,a),n=t._pageX-s.x<0-o?0-o:t._pageX-s.x+e.clientWidth>document.body.clientWidth?document.body.clientWidth-e.clientWidth:t._pageX-s.x,Bn.trace("left/right constraint",n),r=t._pageY-s.y<0-a?0-a:t._pageY-s.y+e.clientHeight>document.body.clientHeight?document.body.clientHeight-e.clientHeight:t._pageY-s.y,Bn.trace("top/bottom constraint",r),e.style.top=r+"px",e.style.left=n+"px"}}t?t.addEventListener("mousedown",a,!0):e.addEventListener("mousedown",a,!0)}},Vn=o("./node_modules/proj4/dist/proj4-src.js-exposed"),Wn=o.n(Vn),qn=o("./node_modules/ol/proj/transforms.js"),Hn=o("./node_modules/ol/proj/Projection.js"),Yn=Mo.a.getLogger("CRS");function Xn(e){var t=Object.keys(e.defs);Yn.trace("proj. codes :",t);var o,n,r=t.length;for(o=0;o<r;++o){var i=t[o];if(!Object(a.t)(i)){var s=e.defs(i);Object(a.g)(new Hn.a({code:i,axisOrientation:s.axis,metersPerUnit:s.to_meter,units:s.units}))}}for(o=0;o<r;++o){var l=t[o],c=Object(a.t)(l);for(n=0;n<r;++n){var u=t[n],d=Object(a.t)(u);if(!Object(qn.c)(l,u))if(e.defs[l]===e.defs[u])Object(a.e)([c,d]);else{var h=e(l,u);Object(a.d)(c,d,h.forward,h.inverse)}}}}var Zn={isLoaded:!1,get:function(e){if(""!==e&&null!=e){var t=e.split(":");if(2===t.length){var o=t[0],n=t[1];if(this.hasOwnProperty(o)&&this[o].hasOwnProperty(n))return this[o][n]}}},exist:function(e){if(""===e||null==e)return!1;var t=e.split(":");if(2!==t.length)return!1;var o=t[0],n=t[1];return!!this.hasOwnProperty(o)&&!!this[o].hasOwnProperty(n)},load:function(e){if(!this.isLoaded){for(var t=["IGNF","EPSG","CRS"],o=0;o<t.length;o++){var n=t[o],r=this[n];for(var i in r)if(r.hasOwnProperty(i)){var s=n+":"+i;e.defs(s,this.get(s))}}this.isLoaded=!0}},loadByDefault:function(e){var t={EPSG:{2154:Zn.EPSG[2154],27571:Zn.EPSG[27571],27572:Zn.EPSG[27572],27573:Zn.EPSG[27573],27574:Zn.EPSG[27574]},CRS:{84:Zn.CRS[84]},IGNF:{LAMB93:Zn.IGNF.LAMB93,LAMBE:Zn.IGNF.LAMBE,LAMB1:Zn.IGNF.LAMB1,LAMB2:Zn.IGNF.LAMB2,LAMB3:Zn.IGNF.LAMB3,LAMB4:Zn.IGNF.LAMB4,RGF93G:Zn.IGNF.RGF93G,WGS84G:Zn.IGNF.WGS84G}};for(var o in t)if(t.hasOwnProperty(o)){var n=t[o];for(var r in n)if(n.hasOwnProperty(r)){var i=o+":"+r;e.defs(i,n[r])}}},loadByName:function(e,t){if(!this.exist(t))return!1;try{e.defs(t,this.get(t))}catch(e){return!1}return!0},EPSG:{4978:"+proj=geocent +datum=WGS84 +units=m +no_defs ",3857:"+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",3785:"+title=WGS 84 / Pseudo-Mercator (deprecated) +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",4149:"+title=CH1903 +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +no_defs ",4150:"+title=CH1903plus +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +no_defs ",4151:"+title=CHTRF95 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4171:"+title=RGF93 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4230:"+title=ED50 +proj=longlat +ellps=intl +no_defs ",4235:"+title=Guyane Francaise +proj=longlat +ellps=intl +no_defs ",4258:"+title=ETRS89 +proj=longlat +ellps=GRS80 +no_defs ",4275:"+title=NTF +proj=longlat +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +no_defs ",4322:"+title=WGS 72 +proj=longlat +ellps=WGS72 +no_defs ",4326:"+title=WGS 84 +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs ",4467:"+proj=utm +zone=21 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4470:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4471:"+proj=utm +zone=38 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4474:"+proj=utm +zone=38 +south +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +units=m +no_defs ",4558:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4559:"+proj=utm +zone=20 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4621:"+title=Fort Marigot +proj=longlat +ellps=intl +towgs84=137,248,-430,0,0,0,0 +no_defs ",4622:"+title=Guadeloupe 1948 +proj=longlat +ellps=intl +no_defs ",4623:"+title=CSG67 +proj=longlat +ellps=intl +towgs84=-186,230,110,0,0,0,0 +no_defs ",4624:"+title=RGFG95 +proj=longlat +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +no_defs ",4625:"+title=Martinique 1938 +proj=longlat +ellps=intl +no_defs ",4626:"+title=Reunion 1947 +proj=longlat +ellps=intl +no_defs ",4627:"+title=RGR92 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4628:"+title=Tahiti 52 +proj=longlat +ellps=intl +towgs84=162,117,154,0,0,0,0 +no_defs ",4629:"+title=Tahaa 54 +proj=longlat +ellps=intl +no_defs ",4630:"+title=IGN72 Nuku Hiva +proj=longlat +ellps=intl +no_defs ",4632:"+title=Combani 1950 +proj=longlat +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +no_defs ",4633:"+title=IGN56 Lifou +proj=longlat +ellps=intl +no_defs ",4634:"+title=IGN72 Grand Terre +proj=longlat +ellps=intl +no_defs ",4637:"+title=Perroud 1950 +proj=longlat +ellps=intl +towgs84=325,154,172,0,0,0,0 +no_defs ",4638:"+title=Saint Pierre et Miquelon 1950 +proj=longlat +ellps=clrk66 +towgs84=30,430,368,0,0,0,0 +no_defs ",4640:"+title=RRAF 1991 +proj=longlat +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +no_defs ",4641:"+title=IGN53 Mare +proj=longlat +ellps=intl +no_defs ",4645:"+title=RGNC 1991 +proj=longlat +ellps=intl +towgs84=0,0,0,0,0,0,0 +no_defs ",4687:"+proj=longlat +ellps=GRS80 +no_defs ",4662:"+title=IGN72 Grande Terre +proj=longlat +ellps=intl +no_defs ",4689:"+title=IGN63 Hiva Oa +proj=longlat +ellps=intl +no_defs ",4690:"+title=Tahiti 79 +proj=longlat +ellps=intl +no_defs ",4691:"+title=Moorea 87 +proj=longlat +ellps=intl +towgs84=215.525,149.593,176.229,-3.2624,-1.692,-1.1571,10.4773 +no_defs ",4692:"+title=Maupiti 83 +proj=longlat +ellps=intl +towgs84=217.037,86.959,23.956,0,0,0,0 +no_defs ",4698:"+title=IGN 1962 Kerguelen +proj=longlat +ellps=intl +towgs84=145,-187,103,0,0,0,0 +no_defs ",4749:"+title=RGNC91-93 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4750:"+title=ST87 Ouvea +proj=longlat +ellps=WGS84 +towgs84=-56.263,16.136,-22.856,0,0,0,0 +no_defs ",4807:"+title=NTF (Paris) +proj=longlat +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +no_defs ",2056:"+title=CH1903+ / LV95 +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +x_0=2600000 +y_0=1200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs ",2154:"+title=RGF93 / Lambert-93 +proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2213:"+title=ETRS89 / TM 30 NE +proj=tmerc +lat_0=0 +lon_0=30 +k=0.9996 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs ",2969:"+title=Fort Marigot / UTM zone 20N +proj=utm +zone=20 +ellps=intl +towgs84=137,248,-430,0,0,0,0 +units=m +no_defs ",2970:"+title=Guadeloupe 1948 / UTM zone 20N +proj=utm +zone=20 +ellps=intl +units=m +no_defs ",2971:"+title=CSG67 / UTM zone 22N +proj=utm +zone=22 +ellps=intl +towgs84=-186,230,110,0,0,0,0 +units=m +no_defs ",2972:"+title=RGFG95 / UTM zone 22N +proj=utm +zone=22 +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +units=m +no_defs ",2973:"+title=Martinique 1938 / UTM zone 20N +proj=utm +zone=20 +ellps=intl +units=m +no_defs ",2975:"+title=RGR92 / UTM zone 40S +proj=utm +zone=40 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2976:"+title=Tahiti 52 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +towgs84=162,117,154,0,0,0,0 +units=m +no_defs ",2977:"+title=Tahaa 54 / UTM zone 5S +proj=utm +zone=5 +south +ellps=intl +units=m +no_defs ",2978:"+title=IGN72 Nuku Hiva / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +units=m +no_defs ",2980:"+title=Combani 1950 / UTM zone 38S +proj=utm +zone=38 +south +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +units=m +no_defs ",2981:"+title=IGN56 Lifou / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",2982:"+title=IGN72 Grand Terre / UTM zone 58S (deprecated) +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",2984:"+title=RGNC 1991 / Lambert New Caledonia (deprecated) +proj=lcc +lat_1=-20.66666666666667 +lat_2=-22.33333333333333 +lat_0=-21.5 +lon_0=166 +x_0=400000 +y_0=300000 +ellps=intl +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2986:"+title=Terre Adelie 1950 +proj=stere +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-90.000000000 +lon_0=140.000000000 +lat_ts=-67.000000000 +k=0.96027295 +x_0=300000.000 +y_0=-2299363.482 +units=m +no_defs",2987:"+title=Saint Pierre et Miquelon 1950 / UTM zone 21N +proj=utm +zone=21 +ellps=clrk66 +towgs84=30,430,368,0,0,0,0 +units=m +no_defs ",2989:"+title=RRAF 1991 / UTM zone 20N +proj=utm +zone=20 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2990:"+title=Reunion 1947 / TM Reunion (deprecated) +proj=tmerc +lat_0=-21.11666666666667 +lon_0=55.53333333333333 +k=1 +x_0=50000 +y_0=160000 +ellps=intl +units=m +no_defs ",2995:"+title=IGN53 Mare / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",3038:"+proj=utm +zone=26 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3039:"+proj=utm +zone=27 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3040:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3041:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3045:"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3046:"+proj=utm +zone=34 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3047:"+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3048:"+proj=utm +zone=36 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3049:"+proj=utm +zone=37 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3050:"+proj=utm +zone=38 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3051:"+proj=utm +zone=39 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3034:"+title=ETRS89 / ETRS-LCC +proj=lcc +lat_1=35 +lat_2=65 +lat_0=52 +lon_0=10 +x_0=4000000 +y_0=2800000 +ellps=GRS80 +units=m +no_defs ",3035:"+title=ETRS89 / ETRS-LAEA +proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs ",3042:"+title=ETRS89 / ETRS-TM30 +proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs ",3043:"+title=ETRS89 / ETRS-TM31 +proj=utm +zone=31 +ellps=GRS80 +units=m +no_defs ",3044:"+title=ETRS89 / ETRS-TM32 +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs ",25828:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25829:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25833:"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25834:"+proj=utm +zone=34 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25835:"+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25836:"+proj=utm +zone=36 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25837:"+proj=utm +zone=37 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25838:"+proj=utm +zone=38 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3060:"+title=IGN72 Grande Terre / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",3163:"+title=RGNC91-93 / Lambert New Caledonia +proj=lcc +lat_1=-20.66666666666667 +lat_2=-22.33333333333333 +lat_0=-21.5 +lon_0=166 +x_0=400000 +y_0=300000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3164:"+title=ST87 Ouvea / UTM zone 58S +proj=utm +zone=58 +south +ellps=WGS84 +towgs84=-56.263,16.136,-22.856,0,0,0,0 +units=m +no_defs ",3165:"+title=NEA74 Noumea / Noumea Lambert +proj=lcc +lat_1=-22.24469175 +lat_2=-22.29469175 +lat_0=-22.26969175 +lon_0=166.44242575 +x_0=0.66 +y_0=1.02 +ellps=intl +units=m +no_defs ",3166:"+title=NEA74 Noumea / Noumea Lambert 2 +proj=lcc +lat_1=-22.24472222222222 +lat_2=-22.29472222222222 +lat_0=-22.26972222222222 +lon_0=166.4425 +x_0=8.313000000000001 +y_0=-2.354 +ellps=intl +units=m +no_defs ",3169:"+title=RGNC91-93 / UTM zone 57S +proj=utm +zone=57 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3170:"+title=RGNC91-93 / UTM zone 58S +proj=utm +zone=58 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3171:"+title=RGNC91-93 / UTM zone 59S +proj=utm +zone=59 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3172:"+title=IGN53 Mare / UTM zone 59S +proj=utm +zone=59 +south +ellps=intl +units=m +no_defs ",3296:"+title=RGPF / UTM zone 5S +proj=utm +zone=5 +south +ellps=GRS80 +units=m +no_defs ",3297:"+title=RGPF / UTM zone 6S +proj=utm +zone=6 +south +ellps=GRS80 +units=m +no_defs ",3298:"+title=RGPF / UTM zone 7S +proj=utm +zone=7 +south +ellps=GRS80 +units=m +no_defs ",3299:"+title=RGPF / UTM zone 8S +proj=utm +zone=8 +south +ellps=GRS80 +units=m +no_defs ",3302:"+title=IGN63 Hiva Oa / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +units=m +no_defs ",3303:"+title=Fatu Iva 72 / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +towgs84=347.103,1078.12,2623.92,-33.8875,70.6773,-9.3943,186.074 +units=m +no_defs ",3304:"+title=Tahiti 79 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +units=m +no_defs ",3305:"+title=Moorea 87 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +towgs84=215.525,149.593,176.229,-3.2624,-1.692,-1.1571,10.4773 +units=m +no_defs ",3306:"+title=Maupiti 83 / UTM zone 5S +proj=utm +zone=5 +south +ellps=intl +towgs84=217.037,86.959,23.956,0,0,0,0 +units=m +no_defs ",3312:"+title=CSG67 / UTM zone 21N +proj=utm +zone=21 +ellps=intl +towgs84=-186,230,110,0,0,0,0 +units=m +no_defs ",3313:"+title=RGFG95 / UTM zone 21N +proj=utm +zone=21 +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +units=m +no_defs ",3336:"+title=IGN 1962 Kerguelen / UTM zone 42S +proj=utm +zone=42 +south +ellps=intl +towgs84=145,-187,103,0,0,0,0 +units=m +no_defs ",3395:"+title=WGS 84 / World Mercator +proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",3727:"+title=Reunion 1947 / TM Reunion +proj=tmerc +lat_0=-21.11666666666667 +lon_0=55.53333333333333 +k=1 +x_0=160000 +y_0=50000 +ellps=intl +units=m +no_defs ",21781:"+title=CH1903 / LV03 +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +x_0=600000 +y_0=200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs ",25830:"+title=ETRS89 / UTM zone 30N +proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs ",25831:"+title=ETRS89 / UTM zone 31N +proj=utm +zone=31 +ellps=GRS80 +units=m +no_defs ",25832:"+title=ETRS89 / UTM zone 32N +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs ",27561:"+title=NTF (Paris) / Lambert Nord France +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27562:"+title=NTF (Paris) / Lambert Centre France +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27563:"+title=NTF (Paris) / Lambert Sud France +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27564:"+title=NTF (Paris) / Lambert Corse +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27571:"+title=NTF (Paris) / Lambert zone I +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27572:"+title=NTF (Paris) / Lambert zone II +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27573:"+title=NTF (Paris) / Lambert zone III +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27574:"+title=NTF (Paris) / Lambert zone IV +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27581:"+title=NTF (Paris) / France I (deprecated) +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27582:"+title=NTF (Paris) / France II (deprecated) +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27583:"+title=NTF (Paris) / France III (deprecated) +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27584:"+title=NTF (Paris) / France IV (deprecated) +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27591:"+title=NTF (Paris) / Nord France (deprecated) +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27592:"+title=NTF (Paris) / Centre France (deprecated) +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27593:"+title=NTF (Paris) / Sud France (deprecated) +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27594:"+title=NTF (Paris) / Corse (deprecated) +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",32601:"+proj=utm +zone=1 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32602:"+proj=utm +zone=2 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32603:"+proj=utm +zone=3 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32604:"+proj=utm +zone=4 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32605:"+proj=utm +zone=5 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32606:"+proj=utm +zone=6 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32607:"+proj=utm +zone=7 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32608:"+proj=utm +zone=8 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32609:"+proj=utm +zone=9 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32610:"+proj=utm +zone=10 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32611:"+proj=utm +zone=11 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32612:"+proj=utm +zone=12 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32613:"+proj=utm +zone=13 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32614:"+proj=utm +zone=14 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32615:"+proj=utm +zone=15 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32616:"+proj=utm +zone=16 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32617:"+proj=utm +zone=17 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32618:"+proj=utm +zone=18 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32619:"+proj=utm +zone=19 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32620:"+proj=utm +zone=20 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32621:"+proj=utm +zone=21 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32622:"+proj=utm +zone=22 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32623:"+proj=utm +zone=23 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32624:"+proj=utm +zone=24 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32625:"+proj=utm +zone=25 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32626:"+proj=utm +zone=26 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32627:"+proj=utm +zone=27 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32628:"+proj=utm +zone=28 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32629:"+proj=utm +zone=29 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32630:"+proj=utm +zone=30 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32631:"+proj=utm +zone=31 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32632:"+proj=utm +zone=32 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32633:"+proj=utm +zone=33 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32634:"+proj=utm +zone=34 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32635:"+proj=utm +zone=35 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32636:"+proj=utm +zone=36 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32637:"+proj=utm +zone=37 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32638:"+proj=utm +zone=38 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32639:"+proj=utm +zone=39 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32640:"+proj=utm +zone=40 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32641:"+proj=utm +zone=41 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32642:"+proj=utm +zone=42 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32643:"+proj=utm +zone=43 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32644:"+proj=utm +zone=44 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32645:"+proj=utm +zone=45 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32646:"+proj=utm +zone=46 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32647:"+proj=utm +zone=47 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32648:"+proj=utm +zone=48 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32649:"+proj=utm +zone=49 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32650:"+proj=utm +zone=50 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32651:"+proj=utm +zone=51 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32652:"+proj=utm +zone=52 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32653:"+proj=utm +zone=53 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32654:"+proj=utm +zone=54 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32655:"+proj=utm +zone=55 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32656:"+proj=utm +zone=56 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32657:"+proj=utm +zone=57 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32658:"+proj=utm +zone=58 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32659:"+proj=utm +zone=59 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32660:"+proj=utm +zone=60 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32661:"+proj=stere +lat_0=90 +lat_ts=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32662:"+title=WGS 84 / Plate Carree +proj=eqc +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32701:"+proj=utm +zone=1 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32702:"+proj=utm +zone=2 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32703:"+proj=utm +zone=3 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32704:"+proj=utm +zone=4 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32705:"+proj=utm +zone=5 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32706:"+proj=utm +zone=6 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32707:"+proj=utm +zone=7 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32708:"+proj=utm +zone=8 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32709:"+proj=utm +zone=9 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32710:"+proj=utm +zone=10 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32711:"+proj=utm +zone=11 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32712:"+proj=utm +zone=12 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32713:"+proj=utm +zone=13 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32714:"+proj=utm +zone=14 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32715:"+proj=utm +zone=15 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32716:"+proj=utm +zone=16 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32717:"+proj=utm +zone=17 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32718:"+proj=utm +zone=18 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32719:"+proj=utm +zone=19 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32720:"+proj=utm +zone=20 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32721:"+proj=utm +zone=21 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32722:"+proj=utm +zone=22 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32723:"+proj=utm +zone=23 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32724:"+proj=utm +zone=24 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32725:"+proj=utm +zone=25 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32726:"+proj=utm +zone=26 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32727:"+proj=utm +zone=27 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32728:"+proj=utm +zone=28 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32729:"+proj=utm +zone=29 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32730:"+proj=utm +zone=30 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32731:"+proj=utm +zone=31 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32732:"+proj=utm +zone=32 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32733:"+proj=utm +zone=33 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32734:"+proj=utm +zone=34 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32735:"+proj=utm +zone=35 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32736:"+proj=utm +zone=36 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32737:"+proj=utm +zone=37 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32738:"+proj=utm +zone=38 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32739:"+proj=utm +zone=39 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32740:"+proj=utm +zone=40 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32741:"+proj=utm +zone=41 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32742:"+proj=utm +zone=42 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32743:"+proj=utm +zone=43 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32744:"+proj=utm +zone=44 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32745:"+proj=utm +zone=45 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32746:"+proj=utm +zone=46 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32747:"+proj=utm +zone=47 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32748:"+proj=utm +zone=48 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32749:"+proj=utm +zone=49 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32750:"+proj=utm +zone=50 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32751:"+proj=utm +zone=51 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32752:"+proj=utm +zone=52 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32753:"+proj=utm +zone=53 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32754:"+proj=utm +zone=54 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32755:"+proj=utm +zone=55 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32756:"+proj=utm +zone=56 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32757:"+proj=utm +zone=57 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32758:"+proj=utm +zone=58 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32759:"+proj=utm +zone=59 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32760:"+proj=utm +zone=60 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32761:"+proj=stere +lat_0=-90 +lat_ts=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",310024802:"+title=Geoportail - France metropolitaine +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=46.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310915814:"+title=Geoportail - Antilles francaises +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310486805:"+title=Geoportail - Guyane +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=4.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310700806:"+title=Geoportail - Reunion et dependances +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-21.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310702807:"+title=Geoportail - Mayotte +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-12.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310706808:"+title=Geoportail - Saint-Pierre et Miquelon +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=47.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310547809:"+title=Geoportail - Nouvelle-Caledonie +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-22.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642810:"+title=Geoportail - Wallis et Futuna +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.000000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-14.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310032811:"+title=Geoportail - Polynesie francaise +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642812:"+title=Geoportail - Kerguelen +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-49.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642801:"+title=Geoportail - Crozet +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-46.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642813:"+title=Geoportail - Amsterdam et Saint-Paul +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-38.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642901:"+title=Geoportail - Monde +proj=mill +towgs84=0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.000000 +a=6378137.0000 +rf=298.2572221010000 +lon_0=0.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",5489:"+title=RGAF09 geographiques (dms) +proj=longlat +nadgrids=@null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137 +rf=298.257222101 +units=m +no_defs",5490:"+title=RGAF09 UTM Nord Fuseau 20 +proj=tmerc +nadgrids=@null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137 +rf=298.257222101 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs"},CRS:{84:"+title=WGS 84 longitude-latitude +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs "},IGNF:{AMST63:"+title=Amsterdam 1963 +proj=geocent +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CROZ63:"+title=Crozet 1963 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CSG67:"+title=Guyane CSG67 +proj=geocent +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ED50:"+title=ED50 +proj=geocent +towgs84=-84.0000,-97.0000,-117.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ETRS89:"+title=Systeme de reference terrestre Europeen (1989) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",GUAD48:"+title=Guadeloupe Ste Anne +proj=geocent +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUADFM49:"+title=Guadeloupe Fort Marigot +proj=geocent +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN63:"+title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=geocent +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN72:"+title=IGN 1972 Grande-Terre / Ile des Pins +proj=geocent +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",KERG62CAR:"+title=Kerguelen - K0 +proj=geocent +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MART38:"+title=Martinique Fort-Desaix +proj=geocent +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MAYO50:"+title=Mayotte Combani +proj=geocent +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MOOREA87:"+title=Moorea 1987 +proj=geocent +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",NTF:"+title=Nouvelle Triangulation Francaise +proj=geocent +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +units=m +no_defs",NUKU72:"+title=IGN 1972 Nuku Hiva +proj=geocent +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",REUN47:"+title=Reunion 1947 +proj=geocent +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",RGF93:"+title=Reseau geodesique francais 1993 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGFG95:"+title=Reseau geodesique francais de Guyane 1995 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGM04:"+title=RGM04 (Reseau Geodesique de Mayotte 2004) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGNC:"+title=Reseau Geodesique de Nouvelle-Caledonie +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGPF:"+title=RGPF (Reseau Geodesique de Polynesie Francaise) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGR92:"+title=Reseau geodesique Reunion 1992 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGSPM06:"+title=Reseau Geodesique Saint-Pierre-et-Miquelon (2006) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGTAAF07:"+title=Reseau Geodesique des TAAF (2007) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RRAF91:"+title=RRAF 1991 (Reseau de Reference des Antilles Francaises) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",STPL69:"+title=Saint-Paul 1969 +proj=geocent +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",STPM50:"+title=St Pierre et Miquelon 1950 +proj=geocent +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +units=m +no_defs",TAHAA:"+title=Raiatea - Tahaa 51-54 (Tahaa, Base Terme Est) +proj=geocent +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TAHI79:"+title=IGN79 (Tahiti) Iles de la Societe +proj=geocent +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TERA50:"+title=Pointe Geologie - Perroud 1950 +proj=geocent +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WALL78:"+title=Wallis-Uvea 1978 (MOP78) +proj=geocent +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WGS72:"+title=World Geodetic System 1972 +proj=geocent +towgs84=0.0000,12.0000,6.0000 +a=6378135.0000 +rf=298.2600000000000 +units=m +no_defs",WGS84:"+title=World Geodetic System 1984 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",AMST63GEO:"+title=Amsterdam 1963 +proj=longlat +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CROZ63GEO:"+title=Crozet 1963 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CSG67GEO:"+title=Guyane CSG67 +proj=longlat +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ED50G:"+title=ED50 +proj=longlat +towgs84=-84.0000,-97.0000,-117.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUAD48GEO:"+title=Guadeloupe Ste Anne +proj=longlat +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUADFM49GEO:"+title=Guadeloupe Fort Marigot +proj=longlat +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN63GEO:"+title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=longlat +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN72GEO:"+title=IGN 1972 Grande-Terre / Ile des Pins +proj=longlat +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",KERG62GEO:"+title=Kerguelen - K0 +proj=longlat +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MART38GEO:"+title=Martinique Fort-Desaix +proj=longlat +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MAYO50GEO:"+title=Mayotte Combani +proj=longlat +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MOOREA87GEO:"+title=Moorea 1987 +proj=longlat +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",NTFG:"+title=Nouvelle Triangulation Francaise Greenwich degres sexagesimaux +proj=longlat +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +units=m +no_defs",NTFP:"+title=Nouvelle Triangulation Francaise Paris grades +proj=longlat +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +units=m +no_defs",NUKU72GEO:"+title=IGN 1972 Nuku Hiva +proj=longlat +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",REUN47GEO:"+title=Reunion 1947 +proj=longlat +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",RGF93G:"+title=Reseau geodesique francais 1993 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGFG95GEO:"+title=Reseau geodesique francais de Guyane 1995 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGM04GEO:"+title=RGM04 (Reseau Geodesique de Mayotte 2004) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGNCGEO:"+title=Reseau Geodesique de Nouvelle-Caledonie +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGPFGEO:"+title=RGPF (Reseau Geodesique de Polynesie Francaise) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGR92GEO:"+title=Reseau geodesique de la Reunion 1992 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGSPM06GEO:"+title=Saint-Pierre-et-Miquelon (2006) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGTAAF07G:"+title=Reseau Geodesique des TAAF (2007) (dms) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",STPL69GEO:"+title=Saint-Paul 1969 +proj=longlat +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",STPM50GEO:"+title=St Pierre et Miquelon 1950  +proj=longlat +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +units=m +no_defs",TAHAAGEO:"+title=Raiatea - Tahaa 51-54 (Tahaa, Base Terme Est) +proj=longlat +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TAHI79GEO:"+title=IGN79 (Tahiti) Iles de la Societe +proj=longlat +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TERA50G:"+title=Pointe Geologie - Perroud 1950 +proj=longlat +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WALL78GEO:"+title=Wallis - Uvea 1978 (MOP78) +proj=longlat +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WGS72G:"+title=WGS72 +proj=longlat +towgs84=0.0000,12.0000,6.0000 +a=6378135.0000 +rf=298.2600000000000 +units=m +no_defs",WGS84G:"+title=World Geodetic System 1984 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",WGS84RRAFGEO:"+title=Reseau de reference des Antilles francaises (1988-1991) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",XGEO:"+title=Systeme CIO-BIH +proj=longlat +towgs84=0.0000,0.0000,0.5000,0.0000,0.0000,0.0140,-0.100000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",AMST63UTM43S:"+title=Amsterdam 1963 UTM fuseau 43 Sud +proj=tmerc +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",CROZ63UTM39S:"+title=Crozet 1963 +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",CSG67UTM21:"+title=Guyane CSG67 UTM fuseau 21 +proj=tmerc +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",CSG67UTM22:"+title=Guyane CSG67 UTM fuseau 22 +proj=tmerc +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",GEOPORTALANF:"+title=Geoportail - Antilles francaises +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALASP:"+title=Geoportail - Amsterdam et Saint-Paul +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-38.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALCRZ:"+title=Geoportail - Crozet +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-46.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALFXX:"+title=Geoportail - France metropolitaine +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=46.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALGUF:"+title=Geoportail - Guyane +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=4.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALKER:"+title=Geoportail - Kerguelen +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-49.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALMYT:"+title=Geoportail - Mayotte +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-12.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALNCL:"+title=Geoportail - Nouvelle-Caledonie +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-22.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALPYF:"+title=Geoportail - Polynesie francaise +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALREU:"+title=Geoportail - Reunion et dependances +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-21.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALSPM:"+title=Geoportail - Saint-Pierre et Miquelon +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=47.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALWLF:"+title=Geoportail - Wallis et Futuna +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-14.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GUAD48UTM20:"+title=Guadeloupe Ste Anne +proj=tmerc +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",GUADFM49U20:"+title=Guadeloupe Fort Marigot  +proj=tmerc +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",IGN63UTM7S:"+title=IGN 1963 - Hiva Oa, Tahuata, Mohotani - UTM fuseau 7 Sud +proj=tmerc +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",IGN72UTM58S:"+title=IGN 1972 - UTM fuseau 58 Sud +proj=tmerc +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=165.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",KERG62UTM42S:"+title=Kerguelen 1962 +proj=tmerc +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=69.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",LAMB1:"+title=Lambert I +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=49.500000000 +lon_0=0.000000000 +k_0=0.99987734 +lat_1=49.500000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB1C:"+title=Lambert I Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=49.500000000 +lon_0=0.000000000 +k_0=0.99987734 +lat_1=49.500000000 +x_0=600000.000 +y_0=1200000.000 +units=m +no_defs",LAMB2:"+title=Lambert II +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB2C:"+title=Lambert II Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=2200000.000 +units=m +no_defs",LAMB3:"+title=Lambert III +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=44.100000000 +lon_0=0.000000000 +k_0=0.99987750 +lat_1=44.100000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB3C:"+title=Lambert III Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=44.100000000 +lon_0=0.000000000 +k_0=0.99987750 +lat_1=44.100000000 +x_0=600000.000 +y_0=3200000.000 +units=m +no_defs",LAMB4:"+title=Lambert IV +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=42.165000000 +lon_0=0.000000000 +k_0=0.99994471 +lat_1=42.165000000 +x_0=234.358 +y_0=185861.369 +units=m +no_defs",LAMB4C:"+title=Lambert IV Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=42.165000000 +lon_0=0.000000000 +k_0=0.99994471 +lat_1=42.165000000 +x_0=234.358 +y_0=4185861.369 +units=m +no_defs",LAMB93:"+title=Lambert 93 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=46.500000000 +lon_0=3.000000000 +lat_1=44.000000000 +lat_2=49.000000000 +x_0=700000.000 +y_0=6600000.000 +units=m +no_defs",RGF93CC42:"+title=Lambert conique conforme Zone 1 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=42.000000000 +lon_0=3.000000000 +lat_1=41.200000000 +lat_2=42.800000000 +x_0=1700000.000 +y_0=1200000.000 +units=m +no_defs",RGF93CC43:"+title=Lambert conique conforme Zone 2 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=43.000000000 +lon_0=3.000000000 +lat_1=42.200000000 +lat_2=43.800000000 +x_0=1700000.000 +y_0=2200000.000 +units=m +no_defs",RGF93CC44:"+title=Lambert conique conforme Zone 3 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=44.000000000 +lon_0=3.000000000 +lat_1=43.200000000 +lat_2=44.800000000 +x_0=1700000.000 +y_0=3200000.000 +units=m +no_defs",RGF93CC45:"+title=Lambert conique conforme Zone 4 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=45.000000000 +lon_0=3.000000000 +lat_1=44.200000000 +lat_2=45.800000000 +x_0=1700000.000 +y_0=4200000.000 +units=m +no_defs",RGF93CC46:"+title=Lambert conique conforme Zone 5 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=46.000000000 +lon_0=3.000000000 +lat_1=45.200000000 +lat_2=46.800000000 +x_0=1700000.000 +y_0=5200000.000 +units=m +no_defs",RGF93CC47:"+title=Lambert conique conforme Zone 6 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=47.000000000 +lon_0=3.000000000 +lat_1=46.200000000 +lat_2=47.800000000 +x_0=1700000.000 +y_0=6200000.000 +units=m +no_defs",RGF93CC48:"+title=Lambert conique conforme Zone 7 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=48.000000000 +lon_0=3.000000000 +lat_1=47.200000000 +lat_2=48.800000000 +x_0=1700000.000 +y_0=7200000.000 +units=m +no_defs",RGF93CC49:"+title=Lambert conique conforme Zone 8 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=49.000000000 +lon_0=3.000000000 +lat_1=48.200000000 +lat_2=49.800000000 +x_0=1700000.000 +y_0=8200000.000 +units=m +no_defs",RGF93CC50:"+title=Lambert conique conforme Zone 9 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=50.000000000 +lon_0=3.000000000 +lat_1=49.200000000 +lat_2=50.800000000 +x_0=1700000.000 +y_0=9200000.000 +units=m +no_defs",LAMBE:"+title=Lambert II etendu +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=2200000.000 +units=m +no_defs",MART38UTM20:"+title=Martinique Fort-Desaix +proj=tmerc +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",MAYO50UTM38S:"+title=Mayotte Combani +proj=tmerc +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",MILLER:"+title=Geoportail - Monde +proj=mill +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lon_0=0.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",MOOREA87U6S:"+title=Moorea 1987 - UTM fuseau 6 Sud +proj=tmerc +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",NUKU72U7S:"+title=IGN 1972 Nuku Hiva - UTM fuseau 7 Sud +proj=tmerc +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGM04UTM38S:"+title=UTM fuseau 38 Sud (Reseau Geodesique de Mayotte 2004) +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM57S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 57 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=159.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM58S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 58 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=165.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM59S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 59 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=171.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM5S:"+title=RGPF - UTM fuseau 5 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-153.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM6S:"+title=RGPF - UTM fuseau 6 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM7S:"+title=RGPF - UTM fuseau 7 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGR92UTM40S:"+title=RGR92 UTM fuseau 40 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGSPM06U21:"+title=Saint-Pierre-et-Miquelon (2006) UTM Fuseau 21 Nord +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",STPL69UTM43S:"+title=Saint-Paul 1969 UTM fuseau 43 Sud +proj=tmerc +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",STPM50UTM21:"+title=St Pierre et Miquelon 1950 +proj=tmerc +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",TAHAAUTM05S:"+title=Tahaa 1951 +proj=tmerc +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-153.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TAHI51UTM06S:"+title=Tahiti-Terme Nord UTM fuseau 6 Sud +proj=tmerc +towgs84=162.0000,117.0000,154.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TAHI79UTM6S:"+title=Tahiti 1979 +proj=tmerc +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TERA50STEREO:"+title=Terre Adelie 1950 +proj=stere +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-90.000000000 +lon_0=140.000000000 +lat_ts=-67 +k=0.96027295 +x_0=300000.000 +y_0=-2299363.482 +units=m +no_defs",UTM01SW84:"+title=World Geodetic System 1984 UTM fuseau 01 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-177.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM20W84GUAD:"+title=World Geodetic System 1984 UTM fuseau 20 Nord-Guadeloupe +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM20W84MART:"+title=World Geodetic System 1984 UTM fuseau 20 Nord-Martinique +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM22RGFG95:"+title=RGFG95 UTM fuseau 22 Nord-Guyane +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM39SW84:"+title=World Geodetic System 1984 UTM fuseau 39 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM42SW84:"+title=World Geodetic System 1984 UTM fuseau 42 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=69.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM43SW84:"+title=World Geodetic System 1984 UTM fuseau 43 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",WALL78UTM1S:"+title=Wallis-Uvea 1978 (MOP78) UTM 1 SUD +proj=tmerc +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-177.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",ETRS89GEO:"+title=ETRS89 geographiques (dms) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",ETRS89LAEA:"+title=ETRS89 Lambert Azimutal Equal Area +proj=laea +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=52.000000000 +lon_0=10.000000000 +x_0=4321000.000 +y_0=3210000.000 +units=m +no_defs",ETRS89LCC:"+title=ETRS89 Lambert Conformal Conic +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=52.000000000 +lon_0=9.999999995 +lat_1=35.000000000 +lat_2=65.000000000 +x_0=4000000.000 +y_0=2800000.000 +units=m +no_defs",UTM26ETRS89:"+title=Europe - de 30d a 24d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-27.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM27ETRS89:"+title=Europe - de 24d a 18d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-21.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM28ETRS89:"+title=Europe - de 18d a 12d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-15.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM29ETRS89:"+title=Europe - de 12d a 6d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-9.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM30ETRS89:"+title=Europe - de -6d a 0d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-3.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM31ETRS89:"+title=Europe - de 0d a 6d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=3.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM32ETRS89:"+title=Europe - de 6d a 12d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=9.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM33ETRS89:"+title=Europe - de 12d a 18d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=15.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM34ETRS89:"+title=Europe - de 18d a 24d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=21.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM35ETRS89:"+title=Europe - de 24d a 30d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=27.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM36ETRS89:"+title=Europe - de 30d a 36d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=33.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM37ETRS89:"+title=Europe - de 36d a 42d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=39.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM38ETRS89:"+title=Europe - de 42d a 48d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs"}},Kn=Zn,Jn=Mo.a.getLogger("CRS"),Qn={projectionsExtent:{"EPSG:2154":{left:-9.62,bottom:41.18,right:10.3,top:51.54},"EPSG:27572":{left:-4.87,bottom:42.33,right:8.23,top:51.14}},load:function(){if(Jn.trace("Loading custom definitions projections"),!Kn.isLoaded){Kn.load(Wn.a);try{Xn(Wn.a),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=Xn,window.ol.proj.proj4.register(Wn.a))}catch(e){Jn.error(e)}}},loadByDefault:function(){if(Jn.trace("Loading custom definitions projections by default"),!Kn.isLoaded){Kn.loadByDefault(Wn.a);try{Xn(Wn.a),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=Xn,window.ol.proj.proj4.register(Wn.a))}catch(e){Jn.error(e)}}},loadByName:function(e){if(Jn.trace("Loading a custom definition projection : ",e),!Kn.isLoaded){Kn.loadByName(Wn.a,e);try{Xn(Wn.a),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=Xn,window.ol.proj.proj4.register(Wn.a))}catch(e){Jn.error(e)}}},overload:function(){for(var e in Jn.trace("Loading projections aera (extent)"),this.projectionsExtent)if(this.projectionsExtent.hasOwnProperty(e)){var t=this.projectionsExtent[e],o=Object(a.t)(e),n=Object(a.v)("EPSG:4326",o),r=Object(Zo.a)([t.bottom,t.right,t.top,t.left],n);o.setExtent(r),Object(a.g)(o),window.ol&&window.ol.proj&&window.ol.proj.addProjection&&window.ol.proj.addProjection(o)}}};function $n(e){return($n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=Xn);var er={_addUID:function(e){return this._uid?e+"-"+this._uid:e},_createMainContainerElement:function(){var e=document.createElement("div");return e.id=this._addUID("GPmousePosition"),e.className="GPwidget",e},_createShowMousePositionElement:function(){var e=document.createElement("input");return e.id=this._addUID("GPshowMousePosition"),e.type="checkbox",e},_createShowMousePositionPictoElement:function(e){var t=this,o=document.createElement("label");o.id=this._addUID("GPshowMousePositionPicto"),o.className="GPshowAdvancedToolPicto",o.htmlFor=this._addUID("GPshowMousePosition"),o.title="Afficher les coordonnÃ©es du curseur",o.addEventListener("click",(function(o){var n="";document.getElementById(t._addUID("GPshowMousePosition")).checked||e||(n="GPmapCenterVisible"),document.getElementById("GPmapCenter").className=n,t.onShowMousePositionClick(o)}));var n=document.createElement("span");return n.id=this._addUID("GPshowMousePositionOpen"),n.className="GPshowAdvancedToolOpen",o.appendChild(n),o},_createMousePositionPanelElement:function(){var e=document.createElement("div");return e.id=this._addUID("GPmousePositionPanel"),e.className="GPpanel",e},_createMapCenter:function(){var e=document.createElement("div");return e.id="GPmapCenter",e.className="",e},_createMousePositionPanelHeaderElement:function(){var e=document.createElement("div");e.className="GPpanelHeader";var t=document.createElement("div");t.className="GPpanelTitle",t.innerHTML="CoordonnÃ©es",e.appendChild(t);var o=document.createElement("div");o.id="GPmousePositionPanelClose",o.className="GPpanelClose",o.title="Fermer le panneau";var n=this;return o.addEventListener?o.addEventListener("click",(function(){document.getElementById(n._addUID("GPshowMousePositionPicto")).click()}),!1):o.attachEvent&&o.attachEvent("onclick",(function(){document.getElementById(n._addUID("GPshowMousePositionPicto")).click()})),e.appendChild(o),e},_createMousePositionPanelBasicElement:function(e,t,o,n){e=void 0===e||e,t=void 0===t||t,o=void 0!==o&&o;var r=document.createElement("div");return r.id=this._addUID("GPmousePositionBasicPanel"),r.appendChild(this._createMousePositionPanelBasicCoordinateElement(t,o,n)),r.appendChild(this._createMousePositionPanelEditToolsElement(o)),r.appendChild(this._createMousePositionPanelBasicAltitudeElement(e)),r},_createCoordinateElement:function(e,t){var o=this;if(-1===["Lon","Lat"].indexOf(e))return[];var n=[],r=document.createElement("input");r.id=this._addUID("GPmousePosition"+e),r.title=!0===t?"Cliquer pour saisir des coordonnÃ©es":"",r.readOnly=!0,t&&(r.addEventListener("click",(function(){o.onMousePositionEditModeClick(!0)})),r.addEventListener("change",(function(t){this.classList.remove("error"),o.validateExtentCoordinate(e,this.value,t)?this.classList.remove("error"):this.classList.add("error")}))),n.push(r);var i=document.createElement("span");return i.className="GPmousePositionUnits",n.push(i),n},_createDMSCoordinateElement:function(e,t){if(-1===["Lon","Lat"].indexOf(e))return[];var o=this,n=[],r=document.createElement("input");r.id=this._addUID("GPmousePosition"+e+"Degrees"),r.className="GPSexagesimal",r.setAttribute("name","degrees"),r.title=!0===t?"Cliquer pour saisir des coordonnÃ©es":"",r.readOnly=!0,r.dataset.min=0,r.dataset.max="Lon"===e?180:90,t&&(r.addEventListener("click",(function(){o.onMousePositionEditModeClick(!0)})),r.addEventListener("change",(function(){this.classList.remove("error"),o._checkDMSDegrees(e,this)?this.classList.remove("error"):this.classList.add("error")}))),n.push(r);var i=document.createElement("span");i.className="GPmousePositionSexagesimalLabel",i.innerHTML="Â°",n.push(i);var s=document.createElement("input");s.id=this._addUID("GPmousePosition"+e+"Minutes"),s.className="GPSexagesimal",s.setAttribute("name","minutes"),s.title=!0===t?"Cliquer pour saisir des coordonnÃ©es":"",s.readOnly=!0,s.dataset.min=0,s.dataset.max=59,t&&(s.addEventListener("click",(function(){o.onMousePositionEditModeClick(!0)})),s.addEventListener("change",(function(){this.classList.remove("error"),o._checkDMSElement(this)?this.classList.remove("error"):this.classList.add("error")}))),n.push(s);var a=document.createElement("span");a.className="GPmousePositionSexagesimalLabel",a.innerHTML="'",n.push(a);var l=document.createElement("input");l.id=this._addUID("GPmousePosition"+e+"Seconds"),l.className="GPSexagesimalsec",l.setAttribute("name","seconds"),l.title=!0===t?"Cliquer pour saisir des coordonnÃ©es":"",l.readOnly=!0,l.dataset.min=0,l.dataset.max=59,t&&(l.addEventListener("click",(function(){o.onMousePositionEditModeClick(!0)})),l.addEventListener("change",(function(){this.classList.remove("error"),o._checkDMSElement(this,!0)?this.classList.remove("error"):this.classList.add("error")}))),n.push(l);var c=document.createElement("span");c.className="GPmousePositionSexagesimalLabel",c.innerHTML="''",n.push(c);var u=document.createElement("select");u.id=this._addUID("GPmousePosition"+e+"Direction"),u.className="GPmousePositionDirection",u.setAttribute("name","direction"),u.disabled=!0;var d=document.createElement("option");d.value="Lon"===e?"E":"N",d.innerHTML="Lon"===e?"E":"N",u.appendChild(d);var h=document.createElement("option");return h.value="Lon"===e?"O":"S",h.innerHTML="Lon"===e?"O":"S",u.appendChild(h),n.push(u),n},_createMousePositionPanelBasicCoordinateElement:function(e,t,o){var n=document.createElement("div");n.id=this._addUID("GPmousePositionCoordinate"),n.style.display=e?"block":"none";var r=document.createElement("div"),i=document.createElement("span");i.className="GPmousePositionLabel",i.id=this._addUID("GPmousePositionLatLabel"),i.innerHTML="Latitude : ",r.appendChild(i);var s,a=document.createElement("span");a.id=this._addUID("GPmousePositionLatCoordinate"),s="DMS"===o?this._createDMSCoordinateElement("Lat",t):this._createCoordinateElement("Lat",t);for(var l=0;l<s.length;l++)a.appendChild(s[l]);r.appendChild(a),n.appendChild(r);var c=document.createElement("div"),u=document.createElement("span");u.className="GPmousePositionLabel",u.id=this._addUID("GPmousePositionLonLabel"),u.innerHTML="Longitude : ",c.appendChild(u);var d,h=document.createElement("span");h.id=this._addUID("GPmousePositionLonCoordinate"),d="DMS"===o?this._createDMSCoordinateElement("Lon",t):this._createCoordinateElement("Lon",t);for(var p=0;p<d.length;p++)h.appendChild(d[p]);return c.appendChild(h),n.appendChild(c),n},_createMousePositionPanelBasicAltitudeElement:function(e){var t=document.createElement("div");t.id=this._addUID("GPmousePositionAltitude"),t.style.display=e?"block":"none";var o=document.createElement("span");o.className="GPmousePositionLabel",o.innerHTML="Altitude : ",t.appendChild(o);var n=document.createElement("span");n.className="GPmousePositionCoords",n.id=this._addUID("GPmousePositionAlt"),n.innerHTML="...",t.appendChild(n);var r=document.createElement("span");return r.className="GPmousePositionAltitudeUnits",r.innerHTML="m",t.appendChild(r),t},_createMousePositionPanelEditToolsElement:function(e){var t=this,o=document.createElement("div");o.className="GPmousePositionPanelEditTools",o.id=this._addUID("GPmousePositionPanelEditTools"),e||(o.style.display="none");var n=document.createElement("span");n.className="GPmousePositionEditTool",n.id=this._addUID("GPmousePositionLocate"),n.title=!0===e?"Cliquer pour saisir des coordonnÃ©es":"",e&&n.addEventListener("click",(function(){t.onMousePositionEditModeLocateClick()})),o.appendChild(n);var r=document.createElement("span");return r.className="GPmousePositionEditTool",r.id=this._addUID("GPmousePositionCloseEdit"),r.title="Quitter la saisie des coordonnÃ©es",r.style.display="none",e&&r.addEventListener("click",(function(){t.onMousePositionEditModeClick(!1)})),o.appendChild(r),o},_createShowMousePositionSettingsElement:function(e){var t=[],o=this,n=document.createElement("input");n.type="checkbox",n.id=this._addUID("GPshowMousePositionSettings");var r=document.createElement("label");return r.id=this._addUID("GPshowMousePositionSettingsPicto"),r.htmlFor=this._addUID("GPshowMousePositionSettings"),r.title="RÃ©glages",r.className="GPshowMoreOptionsImage GPshowMoreOptions GPshowMousePositionSettingsPicto",r.style.display=e?"block":"none",r.addEventListener?r.addEventListener("click",(function(e){"function"==typeof o.onShowMousePositionSettingsClick&&o.onShowMousePositionSettingsClick(e)}),!1):r.attachEvent&&r.attachEvent("onclick",(function(e){"function"==typeof o.onShowMousePositionSettingsClick&&o.onShowMousePositionSettingsClick(e)})),t.push(n),t.push(r),t},_createMousePositionSettingsElement:function(e){var t=document.createElement("div");t.id=this._addUID("GPmousePositionSettings"),t.style.display=void 0===e||e?"block":"none";var o=document.createElement("span");return o.className="GPmousePositionSettingsLabel",o.innerHTML="SystÃ¨me de rÃ©fÃ©rence",t.appendChild(o),t},_createMousePositionSettingsSystemsElement:function(e){var t=this,o=document.createElement("select");o.id=this._addUID("GPmousePositionProjectionSystem"),o.className="GPinputSelect GPmousePositionSettingsSelect",o.addEventListener("change",(function(e){t.onMousePositionProjectionSystemChange(e)})),o.addEventListener("mouseover",(function(e){"OPTION"!==e.target.nodeName&&t.onMousePositionProjectionSystemMouseOver(e)}));for(var n=0;n<e.length;n++){var r=e[n],i=document.createElement("option");i.value=r.code,i.text=r.label||n,o.appendChild(i)}return o},_createMousePositionSettingsUnitsElement:function(e){var t=this,o=document.createElement("select");o.id=this._addUID("GPmousePositionProjectionUnits"),o.className="GPinputSelect GPmousePositionSettingsSelect",o.addEventListener("change",(function(e){t.onMousePositionProjectionUnitsChange(e)}));for(var n=0;n<e.length;n++){var r=e[n],i=document.createElement("option");i.value=r.code?r.code:n,i.text=r.label||n,o.appendChild(i)}return o},_resetLabelElements:function(e){document.getElementById(this._addUID("GPmousePositionLatLabel")).innerHTML="Geographical"===e?"Latitude :":"X :",document.getElementById(this._addUID("GPmousePositionLonLabel")).innerHTML="Geographical"===e?"Longitude :":"Y :"},_resetUnitElements:function(e){var t="";"M"!==e&&"KM"!==e||(t=e.toLowerCase());for(var o=document.getElementsByClassName("GPmousePositionUnits"),n=0;n<o.length;n++)o[n].innerHTML=t},_resetCoordinateElements:function(e,t,o){for(var n,r=document.getElementById(this._addUID("GPmousePositionLatCoordinate"));r.firstChild;)r.removeChild(r.firstChild);n="DMS"===o?this._createDMSCoordinateElement("Lat",e):this._createCoordinateElement("Lat",e);for(var i=0;i<n.length;i++)r.appendChild(n[i]);for(var s,a=document.getElementById(this._addUID("GPmousePositionLonCoordinate"));a.firstChild;)a.removeChild(a.firstChild);s="DMS"===o?this._createDMSCoordinateElement("Lon",e):this._createCoordinateElement("Lon",e);for(var l=0;l<s.length;l++)a.appendChild(s[l])},_setEditMode:function(e){document.getElementById(this._addUID("GPmousePositionLocate")).title=e?"Aller Ã  la position ...":"Cliquer pour saisir des coordonnÃ©es",document.getElementById(this._addUID("GPmousePositionCloseEdit")).style.display=e?"inline-block":"none";for(var t="div[id^="+this._addUID("GPmousePositionCoordinate")+"]",o=document.querySelectorAll(t+" input"),n=0;n<o.length;n++)o[n].readOnly=!e,e&&(o[n].value="",o[n].classList.remove("error"));for(var r=document.querySelectorAll(t+" select"),i=0;i<r.length;i++)r[i].disabled=!e},_checkDMSElement:function(e,t){var o=void 0!==t,n=e.value;if(o&&(n=n.replace(",",".")),isNaN(n))return!1;var r=parseFloat(n);if(!o&&(0|r)!==r)return!1;var i=Number(e.dataset.min),s=Number(e.dataset.max);return r>=i&&r<=s},_checkDMSDegrees:function(e,t){if(isNaN(t.value))return!1;var o=parseFloat(t.value);if((0|o)!==o)return!1;var n=Number(t.dataset.min),r=Number(t.dataset.max);if(o<n||o>r)return!1;var i=document.getElementById(this._addUID("GPmousePosition"+e+"Minutes")),s=document.getElementById(this._addUID("GPmousePosition"+e+"Seconds"));return o>=r?(i.dataset.max=0,s.dataset.max=0):(i.dataset.max=59,s.dataset.max=59.9999),!0},GPdisplayCoords:function(e){if(e){var t=document.getElementById(this._addUID("GPmousePositionLonLabel")),o=document.getElementById(this._addUID("GPmousePositionLatLabel"));if(e.x||e.y?(o.innerHTML="X : ",t.innerHTML="Y : "):e.e||e.n?(o.innerHTML="E : ",t.innerHTML="N : "):(o.innerHTML="Latitude : ",t.innerHTML="Longitude : "),"object"===$n(e.lat)&&"object"===$n(e.lng)){var n={lng:"Lon",lat:"Lat"},r=["Degrees","Minutes","Seconds"];for(var i in n)for(var s=0;s<r.length;++s){var a="GPmousePosition"+n[i]+r[s],l=document.getElementById(this._addUID(a)),c=r[s].charAt(0).toLowerCase();l.value=e[i][c]}document.getElementById(this._addUID("GPmousePositionLonDirection")).value=e.lng.direction,document.getElementById(this._addUID("GPmousePositionLatDirection")).value=e.lat.direction}else{var u=document.getElementById(this._addUID("GPmousePositionLat")),d=document.getElementById(this._addUID("GPmousePositionLon"));u.value=e.x||e.lat||e.e||"0",d.value=e.y||e.lng||e.lon||e.n||"0";for(var h=void 0===e.unit?"":e.unit,p=document.getElementsByClassName("GPmousePositionUnits"),f=0;f<p.length;++f)p[f].innerHTML=h}}},GPdisplayElevation:function(e,t,o,n){var r,i=this;t||(t=500),clearTimeout(r),document.getElementById(this._addUID("GPmousePositionAlt")).innerHTML="...",null==o&&(o=-99999),null==n&&(n=99980);var s=o+n,a=o-n;e&&document.getElementById(this._addUID("GPmousePositionAltitude"))&&(r=setTimeout((function(){i.onRequestAltitude(e,(function(e){a<e&&e<s?i.GPresetElevation():document.getElementById(i._addUID("GPmousePositionAlt")).innerHTML=e}))}),t))},GPresetElevation:function(){document.getElementById(this._addUID("GPmousePositionAltitude"))&&(document.getElementById(this._addUID("GPmousePositionAlt")).innerHTML="---")}};function tr(e){return(tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var or=Mo.a.getLogger("GeoportalMousePosition"),nr=function(e){function t(o){if(o=o||{},!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(o);var n=this._container=this._initContainer(o);e.call(this,{element:n,target:o.target,render:o.render})}return e&&(t.__proto__=e),t.prototype=Object.create(e.prototype,{}),Wo.assign(t.prototype,er),t.prototype.constructor=t,t.prototype.setMap=function(t){var o=this,n=this;if(t){var r=this._createMapCenter();if(t.getViewport().appendChild(r),this.collapsed||this._isDesktop||(r.className="GPmapCenterVisible"),this.draggable&&zn.dragElement(this._panelMousePositionContainer,this._panelHeaderMousePositionContainer,t.getTargetElement()),this.collapsed||(this._isDesktop?this.listenerKey=t.on("pointermove",(function(e){o.onMouseMove(e)})):this.listenerKey=t.on("moveend",(function(e){return o.onMapMove(e)}))),this.options.editCoordinates){var i=document.createElement("img");i.id=this._addUID("GPmousePositionMarker"),i.src=this._markerUrl,i.title="Cliquer pour supprimer",i.addEventListener("click",(function(){n._markerOverlay.setPosition(void 0)})),this._markerOverlay=new c.a({offset:this._markerOffset,element:i,stopEvent:!1}),t.addOverlay(this._markerOverlay)}}else Object(gn.b)(this.listenerKey);(e.prototype.setMap.call(this,t),null!==t)&&(this.collapsed||(document.getElementById("GPshowMousePosition-"+this._uid).checked="checked",this._setElevationPanel(this.options.displayAltitude),this._setCoordinatesPanel(this.options.displayCoordinates),this.options.displayCoordinates||this._setSettingsPanel(!1)))},t.prototype.addSystem=function(e){if("object"===tr(e))if(e.crs)if(e.label||(or.warn("crs label not defined, use crs code by default."),e.label=e.crs),e.type||(or.warn("type srs not defined, use 'Metric' by default."),e.type="Metric"),Qn.loadByName(e.crs),Object(a.t)(e.crs)){for(var t=0;t<this._projectionSystems.length;t++){var o=this._projectionSystems[t];e.crs===o.crs&&or.info("crs '{}' already configured",o.crs)}e.code=this._projectionSystems.length,this._projectionSystems.push(e);var n=document.getElementById("GPmousePositionProjectionSystem-"+this._uid);if(n){var r=document.createElement("option");r.value=e.code,r.text=e.label,n.appendChild(r)}}else or.error("crs '{}' not available into proj4 definitions !",e.crs);else or.error("crs not defined !");else or.log("[ERROR] MousePosition:addSystem - system parameter should be an object")},t.prototype.addSystems=function(e){if(e)if(Array.isArray(e))for(var t=0;t<e.length;t++)this.addSystem(e[t]);else or.log("[ERROR] MousePosition:addSystems - systems parameter should be an array")},t.prototype.removeSystem=function(e){if(e&&"string"==typeof e){for(var t=document.getElementById("GPmousePositionProjectionSystem-"+this._uid),o=null,n=0;n<this._projectionSystems.length;n++){var r=this._projectionSystems[n];if(e===r.crs){o=r.code,this._projectionSystems.splice(n,1);break}}if(null!=o){for(var i=[],s=0;s<this._projectionSystems.length;s++)i[Number(this._projectionSystems[s].code)]=s,this._projectionSystems[s].code=s;for(var a=null,l=0;l<t.childNodes.length;l++)o!==t.childNodes[s].value?t.childNodes[s].value=i[Number(t.childNodes[s].value)]:a=l;null!=a&&t.removeChild(t.childNodes[a]),this._currentProjectionSystems.code===Number(o)&&(t.childNodes[0].setAttribute("selected","selected"),this._setCurrentSystem(t.childNodes[0].value))}else or.log("[WARN] MousePosition:removeSystem - system not found")}else or.log("[ERROR] MousePosition:removeSystem - systemCode parameter should be a string")},t.prototype.setUnits=function(e){e&&Array.isArray(e)&&(this.options.units=e,this._projectionUnits=[],this._initProjectionUnits(),this._currentProjectionType&&this._setTypeUnitsPanel(this._currentProjectionType))},t.prototype.setAltitudeOptions=function(e){if(e&&"object"===tr(e)&&(this.options.altitude.triggerDelay=e.triggerDelay,this.options.altitude.responseDelay=e.responseDelay,e.serviceOptions))for(var t in e.serviceOptions)e.serviceOptions.hasOwnProperty(t)&&(this.options.altitude.serviceOptions[t]=e.serviceOptions[t])},t.prototype.displayAltitude=function(e){void 0!==e&&(void 0===this._noRightManagement&&this._checkRightsManagement(),this.options.displayAltitude=e,this._setElevationPanel(e))},t.prototype.displayCoordinates=function(e){void 0!==e&&(this.options.displayCoordinates=e,this._setCoordinatesPanel(e),this._setSettingsPanel(e))},t.prototype.setCollapsed=function(e){void 0!==e?e&&this.collapsed||!e&&!this.collapsed||(this._isDesktop||(document.getElementById("GPmapCenter").className=e?"":"GPmapCenterVisible"),this.onShowMousePositionClick(),this._showMousePositionContainer.checked=!e):or.log("[ERROR] MousePosition:setCollapsed - missing collapsed parameter")},t.prototype._initialize=function(e){if(e=e||{},this.options=e,this.options.collapsed=void 0===e.collapsed||e.collapsed,this.collapsed=this.options.collapsed,this.options.draggable=void 0!==e.draggable&&e.draggable,this.draggable=this.options.draggable,this._markerOverlay=null,this._markerUrl=null,this._markerOffset=[0,0],this._hideMarker=!1,this._initMarker(e.positionMarker),this.options.units=e.units||[],this.options.displayAltitude=void 0===e.displayAltitude||e.displayAltitude,this.options.displayCoordinates=void 0===e.displayCoordinates||e.displayCoordinates,this.options.displayCoordinates?this.options.editCoordinates=void 0!==e.editCoordinates&&e.editCoordinates:this.options.editCoordinates=!1,this.editing=!1,this.options.systems=e.systems||[],e.altitude){var t=e.altitude;this.options.altitude={triggerDelay:void 0!==t.triggerDelay?t.triggerDelay:200,responseDelay:void 0!==t.responseDelay?t.responseDelay:500,serviceOptions:t.serviceOptions||{},noDataValue:void 0!==t.noDataValue?t.noDataValue:-99999,noDataValueTolerance:void 0!==t.noDataValueTolerance?t.noDataValueTolerance:9e4}}else this.options.altitude={triggerDelay:200,responseDelay:500,serviceOptions:{}};this._uid=yn.generate(),this._projectionSystems=[],this._initProjectionSystems(),this._projectionUnits={},this._initProjectionUnits(),this._isDesktop=Wo.detectSupport(),this.options.altitude.triggerDelay<100&&(this.options.altitude.triggerDelay=100),this._timer=this.options.altitude.triggerDelay,this._currentProjectionSystems=this._projectionSystems[0],this._currentProjectionType=this._projectionSystems[0].type,this._currentProjectionUnits=this._projectionUnits[this._currentProjectionType][0].code,this._projectionUnitsContainer=null,this._showMousePositionContainer=null,this._panelMousePositionContainer=null,this._panelHeaderMousePositionContainer=null,this.options.displayAltitude||this.options.displayCoordinates||(this.options.displayCoordinates=!0),this.options.displayAltitude&&this._checkRightsManagement(),this.listenerKey=null},t.prototype._initMarker=function(e){if(this.options.editCoordinates){if(!e)return this._markerUrl=An.lightOrange,void(this._markerOffset=An.defaultOffset);this._hideMarker=void 0!==e.hide&&e.hide,e.offset?Array.isArray(e.offset)&&2===e.offset.length?this._markerOffset=e.offset:(or.log("positionMarker.offset should be an array. e.g. : [0,0]"),this._markerOffset=An.defaultOffset):this._markerOffset=An.defaultOffset;var t=e.url;t?t.match(/^[a-zA-Z]+$/)?this._markerUrl=void 0!==An[t]?An[t]:An.lightOrange:this._markerUrl=t:this._markerUrl=An.lightOrange}},t.prototype._initProjectionSystems=function(){for(var e=[{label:"GÃ©ographique",crs:Object(a.t)("EPSG:4326").getCode(),type:"Geographical"},{label:"Web Mercator",crs:Object(a.t)("EPSG:3857").getCode(),type:"Metric"},{label:"Lambert 93",crs:Object(a.t)("EPSG:2154").getCode(),type:"Metric",geoBBox:{left:-9.86,bottom:41.15,right:10.38,top:51.56}},{label:"Lambert II Ã©tendu",crs:Object(a.t)("EPSG:27572").getCode(),type:"Metric",geoBBox:{left:-4.87,bottom:42.33,right:8.23,top:51.14}}],t=this.options.systems,o=0;o<t.length;o++){var n=t[o];this.addSystem(n)}if(0===this._projectionSystems.length)for(var r=0;r<e.length;r++)this.addSystem(e[r])},t.prototype._initProjectionUnits=function(){var e={Geographical:[{code:"DEC",label:"degrÃ©s dÃ©cimaux",format:this._displayDEC},{code:"DMS",label:"degrÃ©s sexagÃ©simaux",format:this._displayDMS},{code:"RAD",label:"radians",format:this._displayRAD},{code:"GON",label:"grades",format:this._displayGON}],Metric:[{code:"M",label:"mÃ¨tres",format:this._displayMeter},{code:"KM",label:"kilomÃ¨tres",format:this._displayKMeter}]},t=this.options.units;for(var o in e)if(e.hasOwnProperty(o)){for(var n=!1,r=0;r<e[o].length;r++)for(var i=e[o][r],s=0;s<t.length;s++){var a=t[s];i.code===a&&(n=!0,this._projectionUnits[o]||(this._projectionUnits[o]=[]),this._projectionUnits[o].push(i))}n||(this._projectionUnits[o]=e[o])}"object"===tr(this._projectionUnits)&&0===Object.keys(this._projectionUnits).length&&(this._projectionUnits=e)},t.prototype._getCurrentProjectionInformation=function(){for(var e=[this._currentProjectionSystems.label,"en"],t=this._projectionUnits[this._currentProjectionType],o=0;o<t.length;++o)if(t[o].code===this._currentProjectionUnits){e.push(t[o].label);break}return e.join(" ")},t.prototype._checkRightsManagement=function(){var e=Rn({key:this.options.apiKey,resources:["SERVICE_CALCUL_ALTIMETRIQUE_RSC"],services:["Elevation"]});e?this.options.apiKey||(this.options.apiKey=e.key):this._noRightManagement=!0},t.prototype._initContainer=function(){var e=this._createMainContainerElement(),t=this._showMousePositionContainer=this._createShowMousePositionElement();e.appendChild(t);var o=this._createShowMousePositionPictoElement(this._isDesktop);e.appendChild(o);var n=this._panelMousePositionContainer=this._createMousePositionPanelElement(),r=this._panelHeaderMousePositionContainer=this._createMousePositionPanelHeaderElement();n.appendChild(r);var i=this._createMousePositionPanelBasicElement(this.options.displayAltitude,this.options.displayCoordinates,this.options.editCoordinates,this._currentProjectionUnits);n.appendChild(i);for(var s=this._createShowMousePositionSettingsElement(this.options.displayCoordinates),a=0;a<s.length;a++)n.appendChild(s[a]);var l=this._createMousePositionSettingsElement(),c=this._projectionSystemsContainer=this._createMousePositionSettingsSystemsElement(this._projectionSystems),u=this._projectionUnitsContainer=this._createMousePositionSettingsUnitsElement(this._projectionUnits[this._currentProjectionType]);return l.appendChild(c),l.appendChild(u),n.appendChild(l),e.appendChild(n),e},t.prototype._setElevationPanel=function(e){e?this._noRightManagement?document.getElementById("GPmousePositionAlt-"+this._uid).innerHTML="No rights!":document.getElementById("GPmousePositionAltitude-"+this._uid).style.display="":document.getElementById("GPmousePositionAltitude-"+this._uid).style.display="none"},t.prototype._setCoordinatesPanel=function(e){var t=document.getElementById("GPmousePositionCoordinate-"+this._uid);t.style.display=e?"":"none"},t.prototype._setSettingsPanel=function(e){var t=document.getElementById("GPshowMousePositionSettingsPicto-"+this._uid),o=document.getElementById("GPmousePositionSettings-"+this._uid);e?(t.style.display="",o.style.display=""):(t.style.display="none",o.style.display="none")},t.prototype._setTypeUnitsPanel=function(e){for(var t=this._projectionUnitsContainer;t.firstChild;)t.removeChild(t.firstChild);for(var o=this._projectionUnits[e],n=0;n<o.length;n++){var r=o[n],i=document.createElement("option");i.value=r.code?r.code:n,i.text=r.label||n,t.appendChild(i)}var s=this._projectionUnits[e][0].code;"DMS"!==this._currentProjectionUnits&&"DMS"!==s||(this._resetCoordinateElements(this.options.editCoordinates,e,s),this._setEditMode(this.editing)),this._currentProjectionType=e,this._resetLabelElements(e),this._resetUnitElements(s),this._currentProjectionUnits=s},t.prototype._displayDEC=function(e){var t={};return t.lat=e[1].toFixed(6),t.lng=e[0].toFixed(6),t.unit="Â°",t},t.prototype._displayDMS=function(e){return{lng:Un.decimalToDMS(e[0],"EO",2),lat:Un.decimalToDMS(e[1],"NS",2),unit:"DMS"}},t.prototype._displayRAD=function(e){var t={},o=.017453292519943295;return t.lng=e[0]*o,t.lng=t.lng.toFixed(8),t.lat=e[1]*o,t.lat=t.lat.toFixed(8),t.unit="rad",t},t.prototype._displayGON=function(e){var t={},o=1.1111111111111112;return t.lng=e[0]*o,t.lng=t.lng.toFixed(8),t.lat=e[1]*o,t.lat=t.lat.toFixed(8),t.unit="gon",t},t.prototype._displayMeter=function(e){var t={};return t.x=e[0].toFixed(2),t.y=e[1].toFixed(2),t.unit="m",t},t.prototype._displayKMeter=function(e){var t={};return t.x=(e[0]/1e3).toFixed(2),t.y=(e[1]/1e3).toFixed(2),t.unit="km",t},t.prototype._setCoordinate=function(e,t){var o={},n=this._currentProjectionSystems.crs;if(n){e=Object(a.E)(e,t,n);for(var r=this._currentProjectionSystems.type,i=null,s=this._projectionUnits[r],l=0;l<s.length;l++)if(s[l].code===this._currentProjectionUnits){i=s[l].format;break}i&&"function"==typeof i?(o=i(e))&&0!==Object.keys(o).length&&this.GPdisplayCoords(o):or.log("WARNING : coordinates format function not found")}else or.log("ERROR : system crs not found")},t.prototype._setElevation=function(e){var t=this.options.altitude.responseDelay,o=this.options.altitude.noDataValue,n=this.options.altitude.noDataValueTolerance;this.GPdisplayElevation(e,t,o,n)},t.prototype.onMoveStopped=function(e,t){var o=Object(a.E)(e,t,"EPSG:4326");this._setElevation(o)},t.prototype.onMouseMove=function(e){var t=this,o=e.coordinate;if(e.map&&e.map.getView()){var n=e.map.getView().getProjection();this._setCoordinate(o,n),clearTimeout(this._timer),this._timer=setTimeout((function(){t.onMoveStopped(o,n)}),this.options.altitude.triggerDelay)}},t.prototype.onMapMove=function(){var e=this,t=this.getMap();if(t&&t.getView()){var o=t.getView(),n=o.getCenter(),r=o.getProjection();this._setCoordinate(n,r),clearTimeout(this._timer),this._timer=setTimeout((function(){e.onMoveStopped(n,r)}),this.options.altitude.triggerDelay)}},t.prototype.onRequestAltitude=function(e,t){if(e&&0!==Object.keys(e).length&&this.options.displayAltitude){if(this._noRightManagement)return or.log("[WARNING] contract key configuration has no rights to load geoportal elevation "),void(document.getElementById("GPmousePositionAlt-"+this._uid).innerHTML="No rights!");var o=this.options.altitude.serviceOptions||{},n=o.protocol||"XHR",r=o.timeOut||0;"JSONP"===n&&0===r&&(r=15e3);var i,s=[{lon:e[0],lat:e[1]}],a=o.rawResponse||!1,l=null;l=a?function(e){or.log("alti service raw response : ",e)}:function(e){e&&Object.keys(e).length&&t.call(this,e.elevations[0].z)},i=function(e){or.log("[getAltitude] ERROR : "+e.message)};var c=o.apiKey||this.options.apiKey;"boolean"!=typeof o.ssl&&("boolean"==typeof this.options.ssl?o.ssl=this.options.ssl:o.ssl=!0);var u=o.ssl;Ao.Services.getAltitude({apiKey:c,protocol:n,ssl:u,timeOut:r,scope:this,rawResponse:a,onSuccess:l,onFailure:i,zonly:!0,positions:s})}},t.prototype.onShowMousePositionClick=function(){var e=this,t=this.getMap();In.unset(t),this.collapsed=this._showMousePositionContainer.checked,this.dispatchEvent("change:collapsed"),this._showMousePositionContainer.checked?Object(gn.b)(this.listenerKey):this.editing||(this._isDesktop?this.listenerKey=t.on("pointermove",(function(t){e.onMouseMove(t)})):(this.listenerKey=t.on("moveend",(function(t){return e.onMapMove(t)})),this.onMapMove())),this._setElevationPanel(this.options.displayAltitude),this._setCoordinatesPanel(this.options.displayCoordinates),this.options.displayCoordinates||this._setSettingsPanel(!1)},t.prototype.onShowMousePositionSettingsClick=function(e){if(!this.draggable){this._panelMousePositionContainer.style.transition="top 0.5s ease-out 0s",this._panelMousePositionContainer.style.transitionProperty="top",this._panelMousePositionContainer.style.transitionDuration="0.5s",this._panelMousePositionContainer.style.transitionTimingFunction="ease-out",this._panelMousePositionContainer.style.transitionDelay="0s";var t=this._panelMousePositionContainer.offsetTop;document.getElementById(e.target.htmlFor).checked?this._panelMousePositionContainer.style.top=t- -95+"px":this._panelMousePositionContainer.style.top=t+-95+"px"}},t.prototype.onMousePositionEditModeClick=function(e){var t=this;if(this.options.editCoordinates&&this.editing!==e){this.editing=e,this._setEditMode(this.editing);var o=this.getMap();this._isDesktop?this.editing?Object(gn.b)(this.listenerKey):(this.listenerKey=o.on("pointermove",(function(e){t.onMouseMove(e)})),this.onMapMove()):this.editing?Object(gn.b)(this.listenerKey):(this.listenerKey=o.on("moveend",(function(e){return t.onMapMove(e)})),this.onMapMove()),!this.editing&&this._markerOverlay&&this._markerOverlay.setPosition(void 0)}},t.prototype.getCoordinate=function(e){var t=document.getElementById(this._addUID("GPmousePosition"+e+"Degrees")),o=t.value;if(!o)return null;if(o=o.replace(",","."),!Un.isInteger(o))return null;var n=Un.toInteger(o);if(n<Number(t.dataset.min)||n>Number(t.dataset.max))return null;var r=document.getElementById(this._addUID("GPmousePosition"+e+"Direction")).value,i=document.getElementById(this._addUID("GPmousePosition"+e+"Minutes")),s=i.value;if(s&&(s=s.replace(",","."),Un.isInteger(s))){var a=Un.toInteger(s);a>=Number(i.dataset.min)&&a<=Number(i.dataset.max)&&(n+=a/60)}var l=document.getElementById(this._addUID("GPmousePosition"+e+"Seconds")),c=l.value;if(c){c=c.replace(",",".");var u=Un.toFloat(c);u&&u>=Number(l.dataset.min)&&u<=Number(l.dataset.max)&&(n+=u/3600)}return"O"!==r&&"S"!==r||(n=-n),n},t.prototype.locateDMSCoordinates=function(){var e=[this.getCoordinate("Lon"),this.getCoordinate("Lat")];if(null!==e[0]&&null!==e[1]){var t=this._currentProjectionSystems.crs;if(t){var o=this.getMap().getView(),n=Object(a.E)(e,t,o.getProjection());o.setCenter(n),this._markerOverlay&&!this._hideMarker&&this._markerOverlay.setPosition(n)}else or.log("ERROR : system crs not found")}},t.prototype.locateCoordinates=function(){var e=document.getElementById(this._addUID("GPmousePositionLon")).value;if(e=e.replace(",","."),null!==(e=Un.toFloat(e))){var t=document.getElementById(this._addUID("GPmousePositionLat")).value;if(t=t.replace(",","."),null!==(t=Un.toFloat(t))){var o=this._currentProjectionSystems.crs;if(o){var n;n="Geographical"===this._currentProjectionSystems.type?[this.convert(e),this.convert(t)]:[this.convert(t),this.convert(e)];var r=Object(a.E)(n,this._currentProjectionSystems.crs,"EPSG:4326"),i=this._currentProjectionSystems.geoBBox;if(i){var s=[i.left,i.bottom,i.right,i.top];if(r[0]<s[0]||r[0]>s[2])return;if(r[1]<s[1]||r[1]>s[3])return}var l=this.getMap().getView(),c=Object(a.E)(n,o,l.getProjection());l.setCenter(c),this._markerOverlay&&!this._hideMarker&&this._markerOverlay.setPosition(c)}else or.log("ERROR : system crs not found")}}},t.prototype.onMousePositionEditModeLocateClick=function(){if(this.options.editCoordinates)if(this.editing){"DMS"===this._currentProjectionUnits?this.locateDMSCoordinates():this.locateCoordinates();var e=this.options.mapCenterCallback;if("function"==typeof e){var t=this.getMap().getView().getCenter();e.call(this,t)}}else this.onMousePositionEditModeClick(!0)},t.prototype.onMousePositionProjectionSystemChange=function(e){var t=e.target.selectedIndex,o=e.target.options[t].value;this._setCurrentSystem(o)},t.prototype._setCurrentSystem=function(e){for(var t=null,o=0;o<this._projectionSystems.length;++o)if(this._projectionSystems[o].code===Number(e)){t=this._projectionSystems[o].type;break}t?(this._currentProjectionSystems=this._projectionSystems[Number(e)],t!==this._currentProjectionType&&this._setTypeUnitsPanel(t),this._isDesktop||this.onMapMove()):or.log("system not found in projection systems container")},t.prototype.onMousePositionProjectionSystemMouseOver=function(e){or.trace(e);var t=this.getMap();if(t&&t.getView()){var o=t.getView(),n=o.getProjection(),r=o.calculateExtent(t.getSize());r=Object(a.F)(r,n,"EPSG:4326");var i=document.getElementById(this._addUID("GPmousePositionProjectionSystem"));i.innerHTML="";for(var s=0;s<this._projectionSystems.length;s++){var l=this._projectionSystems[s],c=null;if(l.geoBBox&&(r[0]>l.geoBBox.right||r[1]>l.geoBBox.top||r[2]<l.geoBBox.left||r[3]<l.geoBBox.bottom))l===this._currentProjectionSystems&&((c=document.createElement("option")).value=l.code,c.text=l.label||s,c.setAttribute("selected","selected"),c.setAttribute("disabled","disabled"),i.appendChild(c));else{var u=document.createElement("option");u.value=l.code,u.text=l.label||s,l===this._currentProjectionSystems&&u.setAttribute("selected","selected"),i.appendChild(u)}}}},t.prototype.onMousePositionProjectionUnitsChange=function(e){var t=e.target.selectedIndex,o=e.target.options[t].value,n=this._currentProjectionUnits;this._currentProjectionUnits=o,this._resetLabelElements(this._currentProjectionType),this._resetUnitElements(this._currentProjectionUnits),"DMS"!==n&&"DMS"!==this._currentProjectionUnits||(this._resetCoordinateElements(this.options.editCoordinates,this._currentProjectionType,this._currentProjectionUnits),this._setEditMode(this.editing)),this._isDesktop||this.onMapMove()},t.prototype.convert=function(e){var t;if("M"===this._currentProjectionUnits||"DEC"===this._currentProjectionUnits)t=e;else if("KM"===this._currentProjectionUnits)t=1e3*e;else if("RAD"===this._currentProjectionUnits){t=(e*(180/Math.PI).toFixed(20)).toFixed(20)}else if("GON"===this._currentProjectionUnits){t=(e*.9.toFixed(20)).toFixed(20)}return t},t.prototype.validateExtentCoordinate=function(e,t){if(-1===["Lon","Lat"].indexOf(e))return!1;var o=t.replace(",",".");if(null===(o=Un.toFloat(o)))return!1;o=this.convert(o);var n=this._currentProjectionSystems.geoBBox;if(void 0===n)return!0;var r=[n.left,n.bottom,n.right,n.top];return r=Object(a.F)(r,"EPSG:4326",this._currentProjectionSystems.crs),("Lat"!==e||!(o<r[0]||o>r[2]))&&("Lon"!==e||!(o<r[1]||o>r[3]))},t}(mn.a),rr=nr;window.ol&&window.ol.control&&(window.ol.control.GeoportalMousePosition=nr);var ir=o("./node_modules/ol/Collection.js"),sr=o("./node_modules/ol/layer/Vector.js"),ar=o("./node_modules/ol/style/Circle.js"),lr=o("./node_modules/ol/geom/Point.js"),cr=o("./node_modules/ol/geom/LineString.js"),ur=o("./node_modules/ol/geom/Polygon.js"),dr=o("./node_modules/ol/geom/LinearRing.js"),hr=o("./node_modules/ol/events/condition.js"),pr=o("./node_modules/ol/sphere.js"),fr={rgbaToHex:function(e){function t(e){if(e>255)throw new Error("'"+e+"'' is greater than 255(0xff);");return("0"+Number(e).toString(16)).slice(-2)}var o=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(0?.?\d+)\s*)?\)/.exec(e);if(!o)throw new Error("Invalid format: "+e);var n=o[1],r=o[2],i=o[3],s=o[4],a=[t(n),t(r),t(i)],l={};return l.hex="#"+a.join(""),s&&(l.opacity=parseFloat(s)),l},hexToRgba:function(e,t){if(!e)throw new Error("Invalid format");e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,o,n){return t+t+o+o+n+n}));var o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return(o=o?{r:parseInt(o[1],16),g:parseInt(o[2],16),b:parseInt(o[3],16)}:null)?"rgba("+o.r+", "+o.g+", "+o.b+", "+t+")":null}},mr=Mo.a.getLogger("DrawingDOM"),gr={_addUID:function(e){return this._uid?e+"-"+this._uid:e},_createMainContainerElement:function(){var e=document.createElement("div");return e.id=this._addUID("GPdrawing"),e.className="GPwidget",e},_createShowDrawingElement:function(){var e=document.createElement("input");return e.id=this._addUID("GPshowDrawing"),e.className="GPshowDrawing",e.type="checkbox",e},_createShowDrawingPictoElement:function(){var e=this,t=document.createElement("label");t.id=this._addUID("GPshowDrawingPicto"),t.className="GPshowAdvancedToolPicto",t.htmlFor=this._addUID("GPshowDrawing"),t.title=this.options.labels.control,t.addEventListener?t.addEventListener("click",(function(t){e.onShowDrawingClick(t)})):t.attachEvent&&t.attachEvent("onclick",(function(t){e.onShowDrawingClick(t)}));var o=document.createElement("span");return o.id=this._addUID("GPshowDrawingOpen"),o.className="GPshowAdvancedToolOpen",t.appendChild(o),t},_createDrawingPanelElement:function(){var e=document.createElement("div");return e.id=this._addUID("GPdrawingPanel"),e.className="GPpanel",e},_createDrawingPanelHeaderElement:function(){var e=document.createElement("div");e.className="GPpanelHeader";var t=document.createElement("div");t.className="GPpanelTitle",t.innerHTML=this.options.controlLabel||"Annoter la carte",e.appendChild(t);var o=document.createElement("div");o.id=this._addUID("GPdrawingPanelClose"),o.className="GPpanelClose",o.title="Fermer le panneau";var n=this;return o.addEventListener?o.addEventListener("click",(function(){document.getElementById(n._addUID("GPshowDrawingPicto")).click()}),!1):o.attachEvent&&o.attachEvent("onclick",(function(){document.getElementById(n._addUID("GPshowDrawingPicto")).click()})),e.appendChild(o),e},_createDrawingToolsSections:function(){var e=[];return this.dtOptions={},this.options.tools.points&&(this.dtOptions.points={label:this.options.labels.points,active:!1,panel:"draw",id:"point"}),this.options.tools.lines&&(this.dtOptions.lines={label:this.options.labels.lines,active:!1,panel:"draw",id:"line"}),this.options.tools.polygons&&(this.dtOptions.polygons={label:this.options.labels.polygons,active:!1,panel:"draw",id:"polygon"}),this.options.tools.holes&&(this.dtOptions.holes={label:this.options.labels.holes,active:!1,panel:"draw",id:"holes"}),this.options.tools.text&&(this.dtOptions.text={label:this.options.labels.text,active:!1,panel:"draw",id:"text"}),this.options.tools.edit&&(this.dtOptions.edit={label:this.options.labels.edit,active:!1,panel:"edit",id:"edit"}),this.options.tools.display&&(this.dtOptions.display={label:this.options.labels.display,active:!1,panel:"edit",id:"display"}),this.options.tools.tooltip&&(this.dtOptions.tooltip={label:this.options.labels.tooltip,active:!1,panel:"edit",id:"tooltip"}),this.options.tools.remove&&(this.dtOptions.remove={label:this.options.labels.remove,active:!1,panel:"edit",id:"remove"}),(this.dtOptions.points||this.dtOptions.lines||this.dtOptions.polygons||this.dtOptions.text)&&e.push(this._createDrawingToolSection(this.options.labels.creatingTools,"draw")),(this.dtOptions.edit||this.dtOptions.display||this.dtOptions.tooltip||this.dtOptions.remove)&&e.push(this._createDrawingToolSection(this.options.labels.editingTools,"edit")),this.options.tools.export&&e.push(this._createSavingSection(this.options.labels.export,this.options.labels.exportTitle)),e},_createDrawingToolSection:function(e,t){var o=document.createElement("div");o.className="drawing-tool-section";var n=document.createElement("p");n.className="drawing-tool-section-title",n.innerHTML=e,o.appendChild(n);var r=document.createElement("ul");r.className="drawing-tools-flex-display";var i=this;function s(e){i._handleDOMToolClick(e,this.id,i),i._handleToolClick(e,this.id,i)}for(var a in this.dtOptions)if(this.dtOptions[a].panel===t){var l=document.createElement("li");l.className="drawing-tool",l.id=this._addUID("drawing-tool-"+this.dtOptions[a].id),l.title=this.dtOptions[a].label,l.addEventListener("click",s),r.appendChild(l)}return o.appendChild(r),o},_createSavingSection:function(e,t){var o=document.createElement("div");o.className="drawing-tool-section drawing-tools-flex-display";var n=document.createElement("button");n.title=t,n.className="tool-form-submit drawing-button",n.id=this._addUID("drawing-export"),n.type="button",n.textContent=e;var r=this;return n.onclick=function(){r.onExportFeatureClick()},o.appendChild(n),o},_createMarkersChooser:function(e){var t=document.createElement("li");t.className=e.className;for(var o=0;o<this.options.markersList.length;o++){var n=document.createElement("input");n.type="radio",n.name="marker",n.id=this._addUID("marker-"+o),n.value=this.options.markersList[o].src,n.className="marker-input-radio",e.defaultValue===n.value&&(n.checked=!0),t.appendChild(n);var r=document.createElement("label");r.className="marker-label",r.setAttribute("for",n.id);var i=document.createElement("img");i.src=n.value,r.appendChild(i),t.appendChild(r)}return t},_createStylingElement:function(e){var t=document.createElement("li");t.className=e.className;var o=document.createTextNode(e.label);t.appendChild(o);var n=document.createElement("input");try{n.type=e.type}catch(e){n.type="text"}return n.id=e.id,n.value=e.defaultValue,e.title&&(n.title=e.title),void 0!==e.min&&(n.min=e.min),void 0!==e.max&&(n.max=e.max),void 0!==e.step&&(n.step=e.step),t.appendChild(n),t},_createStylingDiv:function(e){var t=document.createElement("div");t.className="gp-styling-div";var o=document.createElement("ul"),n=null;switch(e.geomType.toLowerCase()){case"point":n=this._createMarkersChooser({className:"gp-styling-option",defaultValue:e.initValues.markerSrc}),o.appendChild(n);break;case"text":n=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.fillColor,id:this._addUID("fillColor"),defaultValue:e.initValues.fillColor}),o.appendChild(n),n=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.strokeColor,id:this._addUID("strokeColor"),defaultValue:e.initValues.strokeColor}),o.appendChild(n);break;case"line":n=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.strokeColor,id:this._addUID("strokeColor"),defaultValue:e.initValues.strokeColor}),o.appendChild(n),n=this._createStylingElement({type:"range",className:"gp-styling-option",label:this.options.labels.strokeWidth,title:"1 Ã  10 pixels",id:this._addUID("strokeWidth"),min:1,max:10,step:1,defaultValue:e.initValues.strokeWidth}),o.appendChild(n);break;case"polygon":n=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.strokeColor,id:this._addUID("strokeColor"),defaultValue:e.initValues.strokeColor}),o.appendChild(n),n=this._createStylingElement({type:"range",className:"gp-styling-option",label:this.options.labels.strokeWidth,title:"1 Ã  10 pixels",id:this._addUID("strokeWidth"),min:1,max:10,step:1,defaultValue:e.initValues.strokeWidth}),o.appendChild(n),n=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.fillColor,id:this._addUID("fillColor"),defaultValue:e.initValues.fillColor}),o.appendChild(n),n=this._createStylingElement({type:"range",className:"gp-styling-option",label:this.options.labels.fillOpacity,title:"0 (transparent) Ã  100% (opaque)",id:this._addUID("fillOpacity"),min:0,max:10,step:1,defaultValue:10*e.initValues.fillOpacity}),o.appendChild(n);break;default:mr.log("Unhandled geometry type for styling.")}t.appendChild(o);var r=document.createElement("input");r.type="button",r.className="gp-styling-button",r.value=this.options.labels.applyToObject,r.onclick=function(){e.applyFunc.call(this,"apply")},t.appendChild(r);var i=document.createElement("input");i.type="button",i.value=this.options.labels.setAsDefault,i.className="gp-styling-button",i.onclick=function(){e.applyFunc.call(this,"default")},t.appendChild(i);var s=document.createElement("input");return s.type="button",s.className="gp-styling-button closer",s.onclick=function(){e.applyFunc.call(this,"cancel")},t.appendChild(s),t},_createLabelDiv:function(e){var t=document.createElement("div");t.className="gp-label-div";var o=null;if("Text"===e.geomType?((o=document.createElement("input")).type="text",o.className="gp-input-label-style"):((o=document.createElement("textArea")).rows=2,o.cols=40,o.className="gp-textarea-att-label-style"),e.text&&(o.value=e.text),o.autocomplete="off",o.placeholder=e.placeholder,o.id=e.inputId,t.appendChild(o),o.onblur=function(){e.applyFunc.call(this,o.value,!0)},o.onkeyup=function(t){"Text"===e.geomType&&13===t.keyCode&&e.applyFunc.call(this,o.value,!0),27===t.keyCode&&e.applyFunc.call(this,o.value,!1)},e.measure&&"Text"!==e.geomType){var n=document.createElement("input");n.type="text",n.readonly=!0,n.className="gp-input-measure-style",n.value=e.measure,t.appendChild(n)}if("Text"!==e.geomType){var r=document.createElement("input");r.type="button",r.className="gp-styling-button",r.value=this.options.labels.saveDescription,r.onclick=function(){e.applyFunc.call(this,o.value,!0)},t.appendChild(r);var i=document.createElement("input");i.type="button",i.className="gp-styling-button closer",i.onclick=function(){e.applyFunc.call(this,o.value,!1)},t.appendChild(i)}return t},_handleDOMToolClick:function(e,t,o){for(var n in o.dtOptions){var r=o._addUID("drawing-tool-"+o.dtOptions[n].id),i=document.getElementById(r);r===t?(o.dtOptions[n].active?i.className="drawing-tool":i.className="drawing-tool drawing-tool-active",o.dtOptions[n].active=!o.dtOptions[n].active):(i.className="drawing-tool",o.dtOptions[n].active=!1)}}},yr=Mo.a.getLogger("Drawing"),vr=function(e){function t(o){if(o=o||{},!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(o);var n=this._container=this._initContainer();e.call(this,{element:n,target:o.target,render:o.render})}return e&&(t.__proto__=e),t.DefaultTools={points:!0,lines:!0,polygons:!0,holes:!1,text:!0,remove:!0,display:!0,tooltip:!0,edit:!0,export:!0,measure:!1},t.DefaultLabels={control:"Annoter la carte",creatingTools:"Outils de crÃ©ation",points:"Placer des points",lines:"Dessiner des lignes",polygons:"Dessiner des polygones",holes:"CrÃ©er des trous sur un polygone",text:"Ecrire sur la carte",editingTools:"Outils d'Ã©dition",edit:"Editer les tracÃ©s",display:"Modifier l'apparence des objets",tooltip:"Modifier les textes / infos-bulles",remove:"Supprimer des objets",export:"Exporter",exportTitle:"Exporter en KML",applyToObject:"Appliquer Ã  l'objet",saveDescription:"Enregistrer",setAsDefault:"DÃ©finir par dÃ©faut",strokeColor:"Couleur du trait : ",strokeWidth:"Epaisseur du trait : ",fillColor:"Couleur de remplissage : ",fillOpacity:"OpacitÃ© du remplissage : "},t.DefaultStyles={textFillColor:"#000000",textStrokeColor:"#FFFFFF",textIcon1x1:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNiYAAAAAkAAxkR2eQAAAAASUVORK5CYII=",anchor:[0,0]},polyFillColor:"#ffffff",polyFillOpacity:.4,polyStrokeColor:"#ffcc33",polyStrokeWidth:4,strokeColor:"#ffcc33",strokeWidth:4},t.DefaultCursorStyle={radius:6,strokeColor:"#FFF",strokeWidth:1,fillColor:"rgba(0, 153, 255, 1)"},t.prototype=Object.create(e.prototype,{}),t.prototype.assign=function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])},t.prototype.assign(gr),t.prototype.constructor=t,t.prototype.setMap=function(t){var o=this;if(e.prototype.setMap.call(this,t),this.getMap()&&this.eventKey&&Object(gn.b)(this.eventKey),null!=t){if(this.draggable&&zn.dragElement(this._drawingPanel,this._drawingPanelHeader,t.getTargetElement()),!this.collapsed)document.getElementById(this._addUID("GPshowDrawing")).checked="checked";this.layer&&this.setLayer(this.layer),this.eventKey=this.getMap().getLayers().on("remove",(function(e){e.element===o.layer&&(o.layer=null,o.interactionCurrent&&(o.getMap().removeInteraction(o.interactionCurrent),o.interactionCurrent=null))}))}},t.prototype.exportFeatures=function(){var t=null;if(null==e.prototype.getMap.call(this))return yr.log("Impossible to export : control isn't attached to any map."),t;if(!this.layer)return yr.log("Impossible to export : no layer is hosting features."),t;if(!this.layer.getSource()||!this.layer.getSource().getFeatures()||!this.layer.getSource().getFeatures().length)return yr.log("Impossible to export : no features found."),t;var o=this.layer.getSource().getProjection();return o=o||this.getMap().getView().getProjection(),t=new Xo({writeStyles:!0}).writeFeatures(this.layer.getSource().getFeatures(),{dataProjection:"EPSG:4326",featureProjection:o})},t.prototype.setCollapsed=function(e){void 0!==e?e&&this.collapsed||!e&&!this.collapsed||(this.onShowDrawingClick(),this._showDrawingContainer.checked=!e):yr.error("[ERROR] Drawing:setCollapsed - missing collapsed parameter")},t.prototype.setExportName=function(e){this._exportName=e},t.prototype.getExportName=function(){return this._exportName},t.prototype._getsMarkersOptionsFromSrc=function(e){for(var t=null,o=0;o<this.options.markersList.length;o++)if(this.options.markersList[o].src===e)return t=this.options.markersList[o];return t},t.prototype._getIconStyleOptions=function(e){var t={};return Object.keys(e).forEach((function(o){switch(o){case"src":case"size":case"anchor":case"anchorOrigin":case"anchorXUnits":case"anchorYUnits":t[o]=e[o]}})),t},t.prototype._initialize=function(e){var o=this;this._uid=yn.generate(),this._exportName="Croquis",this._exportFormat=".kml",e=e||{},this.options=e,this.options.layerDescription||(this.options.layerDescription={title:"Croquis",description:"Mon croquis"}),this.options.tools||(this.options.tools={}),Object.keys(t.DefaultTools).forEach((function(e){o.options.tools.hasOwnProperty(e)||(o.options.tools[e]=t.DefaultTools[e])})),this.options.cursorStyle||(this.options.cursorStyle={}),Object.keys(t.DefaultCursorStyle).forEach((function(e){o.options.cursorStyle.hasOwnProperty(e)||(o.options.cursorStyle[e]=t.DefaultCursorStyle[e])})),this.options.collapsed=void 0===e.collapsed||e.collapsed,this.collapsed=this.options.collapsed,this.options.draggable=void 0!==e.draggable&&e.draggable,this.draggable=this.options.draggable,this.options.markersList=e.markersList||[{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAARfSURBVFiF3ZhfbBRVGMV/d2Z3212tbSkCbuNaqzaRiL6QyAMPjSFoYqgx4oOiRmMFUzQG479o2lQ0QXk1EhYFgmlD2mIRkYhRwqLEaA2GiKWV7rZLQ0sLwbZId7t/Zq4PFK1125m5s/vCedz7nXO+M9/N3jsD1xFEvgXlTkrI8hBQBywFbgEqgEvAMHAayZcYHBYbuZJP77yFkdsoR+ct4GXAb4OSQPARXj4QzzGejx7yEkZuZy2CMLBAgf4nkhfEi3S67UNzQ5YSIXfQhKAdtSAACxDsk2EapXT3cF2FYQdNSN7F/YQFsJkw77gVUcL01mp3o5EDJoK1Yj37VchKjcjdlJEmhvrWmg9jGNwhGhhzSlTbZmnepjBBAMrReF2F6Hgy0+fIKPb+flWRIMtip+eQ88lcPRCtg3gCCVZ3RqhPDbJepqlPDbJ6XwSvP2nDJYCXB522prLN6iwrPIEETw33U/VoLZovBPjQfCGqHqtl3XDUZiBrn1lQCXO3ZcUDLV34Su/JueYrW0btnp8tNSRLnTamEiZoWRF6uHre9dseuT0vPrOgEqbCWtW3xNX6VSy02c+/sk4JwF+WFWZ6xGL9vA2fyzb7+QcqYUYtKwYP9s+7PrA/bsNn/geSA87DSLosa44+fT/p8VM511Jjp4g8u8KGk7XPLKhM5qhlRSbppzV4JwMdEcz0WSCNmT5LrC1CS/AujKliSw1BxGljzm8AH3MjHs4BpU65DjCBn0rxDJNOSI4nM33F2O2U58yEnU6DgOpF02AzcEGJa40LZHlfhagUZvp6vkmFawObVK7/4PLFSoZpBZ50ozEThsne6i2hjZqmFRVJ6U8JUeSVUmQNzQvg0c1MVtNMIUTSl0pNLhsaGu8A4xrfbZhS4CRQ5SoFcCWtja/5NBg+N+GZsu0vhSEkcY8mf+iNx+OuX3llmJVABNCVNUA2fl3xWdvJkriqRBb2uPugAYgNHEey1Y3Gt3/ccNxFEAChm2al6zAAjNAEWF/rc1Ev6+ffOLTwmBt7E0xD02J5CSOayQLrsHMJnYGMITJvHrr588mUMKyr54CUaaHrnfF4fCQ/kwHEBmLAa044rb+WHP4xXnxJ0VJK6CkyjO2xWOx3KMSH8zDtwONWdb2jvt41u4JtChZJKeVveDwnYrHYfw5uj4KYFRpSWbGqyCPL5ypIpMTkKwcWfWVXUEqRRcio1LTuUCjUE4lEsrnq8j4ZgKEP9bpgmfHFHPpyy3fle3f9Uto3n4aUIqNhDghN6zZ1vTcajaasfAsSBmBwq7f11tLM/24Hx2L+n+rbF38zBy2JEP0anPEGAj3d3d1pJ56F2GYAGInM82M+bWW53wxd++3ipH7x1QMLj8ysk5BAyj6Ppp2+d/nyaEdHh/I/W8EmA3Ci2b/iviVT3+tCerMmxkudiz450hcYBSYQIqrDmScGBvqawSxkH3lDV2Pxe6ltItnWcFNLTXX1qpqamkoK/BCvC/wNB+l5MdQKNHsAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAS7SURBVFiF3VhNTFxVFP7OfTNvOjMtM9AoJSSYEEVMCv6kJi5NoCa1TRqNxDTaFhcWNSmxaaxNQ0w3mqgLdGeRhKFYXVC7qDU2BhVt/YdqEQRhRgYTKD8VZqAMzM+7xwVCcIR58+6b2fRb3nO+853v3fvuu+8CtxEo1wX5pTu2IpasBfEeSFSCUAygCMAsgEkAQyD6DClXF3VMLeZSO2dmuN7vB+MYiBsAbDEn8BIIZ6BrzdQyF81FDzkxw8/594P5HQCFCvQ5QDRSYO4Tu30IO2QGiA/5XgVzAGpGsMKTZ/mw7wTbfLi2yFzvOwngpJ0aaXidAtG3VcnKZv5dWgE7Nf5fFBJCHqK2hUsqdKVG+EihDwn5K9SXViZEAHqAApGIVaLaO5Pg48iPEQDwg2WjCtHyzKx8RxJBZLP9qoJ5CdJ9t9XvkPWZiSVrkY0R3b2MxnM9aJ2Ooi3iRut0FEc/6IHuiZtyidwQ8RqrrVk3Q7zHNEd3L6N5eAYP7q2BppcB0KHpZXhoXw2aB6eyM8SPW23NuhnGvaY5L7T2w7Nt54Yxj68KDS19WSiZ66RBZQPYYZpRvfuejPH7H8scX0FJlv2sQcVMkWmGpmc2bBbPVicNKsvslmmOkZg0id/IQmkhy47WoLABYNo05/rnIxnjv1wOmtbgLHTSoDIz10xzzhypQiz624axWLQPLQ3V5kLUa7U1la35G9OcRMyFY/cV49qlLhiJMQAJGIkx9FzswsuVO5BccpnryKuWW7NK4IPFXmjLgwAKrHItYB66t5JaJmJWSJZnhjqmFiFxzirPIjqsGgFUD5qC3gRjRolrBsYMQEr/NEpmKBCJgHBKhWteHKdUjv8rVBvgw773QaizU2M9DMb58q98rwghXC5md5zI5WSmlCGcAODQZDIlhCSiJT0eX6waH490AsYq356ZZ4oK4DSuAihT4UuGYIaQILGQ4vknen2BibhYzlqfySBG2CH4ylA4HLb9y8v1BY8A9CkAzVwcZDA0BgkG0+oFBjP49Ij3o48n9b9U20gB7bZuZwCAAvM/gPndTDmSIZKS9CRDNwCHBIv1NzFdfzu/t2EEAEiTstS2GQDA2PwbAHrSh9ebSDewihtxMdn0h/dbO/ISkIYQoZyYoW6kYOD59YdQg8mRYjgleFONpKRk07D34qJBxmY5pmBOkKZdCIfDk7mZGQDUER0FUROwaoQdZpd6H07oXT/OOWYVJZmBQZdhvBcKhfqBfFyc1xcEEpKeNjMytOgYfqp32wUFiSVm7oPD0RsKhf5zsnYoFMsMyccTUtvtFHL7ZimxFC2eGPJezrYkM6VAHGQhBsrKyga7u7tTG+XlfGYAIFxXuLfEzZ288fvCb4U858+Ou0KZajBTUkCOkhADUtOGgsGg6SVIXswAQKiuqK3UbRxIH78yq//8Yr/3i01oSyD6UwDDTo9ncGBgIGFFM29mRh/FFm+J/3qBk+9aHbsZFzf39WwN3DK0tWXCQAzMIw4hfq/etSvY2dmpvLPlzQwA/PTk9od3eowvhWCnZEodHfC2fz3rnAEQBVFQA4YPjI6OnAZkPvvIGb7bX/Ta/LP+SEftne0V5eW1FRUVpcjzQ7wt8A+9at5zXMB2DQAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAP0SURBVFiF3ZnLbxtVFIe/e8eOPU5DapI2whEWyiILJGDTBQuWSGTTSkVlQRGs2MGSh4RoQWLB4x/gpVIViNokJUV0U4RQXKgQr0ookCYkdjONSJtQJTGltjO2Zw6LJlEbkszLTgQ/6Ww859xzPt97556Zgf+RVKMHFGgD+oADwP3APUAHsABcBS4BXwDnFNxsdP6GSCAt8LZAWUB8WEngLYHdO137HRI4JLDgE2K9LQg8vtMMCCiBowJuSJBVcwWOSBOWfRCY1yJCrLdXdwrkUANmZL05Age3G2R3hD3iZYsC6TB16ZA8rwB3h4z1Uhp4MUxg4A23co7MA2aYhD5VBrqCnkNhZqYPPyCpVJnh4Ry2PYNIFdue4fTpHKZZ8ZEjBTwWorZgEvjEc92nUiUpFn+VjbS0NCqm6edgPbEdMD97FjI8PLIhyKoGB0d8wPy0HTBXPQux7Stbwti25QNmNmhtYW4ANtCytZNUPXxslEp4pKoq8PK5Q2FuAH97elSrcx7Xr/nIc8NnPWsKAzPv6XH27OUtr585Y/nIs/Uf0ggJHPdc76ZZlqWl0Q33y+LiqCSTFR975th2wDzjqy0xzbIMDo6IbVsiYottW3Lq1IhPEBF4ejtgdgkUm9SXrVpRoDVobYH3zEqLcTxoXEAdU1Bqco5bkluPyPNNmpV5Cdk1RwE63CSYw2FrivSYKtBPhOTr5cDJnmz2Oa11IiFi2kol4iKq7ug4QMxwa3WtXaVUpcW2Sw/MzhaHwFmNjwrTDvwC3BeJAripdXF/JvP+H7HYsu/8ohwlWDEt305YlhX5BYLAI0AOMCKMIUc6Oj4eaGuzwg5RhxNhnzTXpOAC8E6UMb5qbb0QAQRAGa7bHRlmRUeBH8IEzhnGtZc6O89HSe6C62hdaAiMgjrwFH6a0NtUU6r28p49n5WUcry9N5FIVRnGsGVZc42aGRQUgBeCxPS3tZ37LplcCJlSBMYTjvNeoVD4baWGxkpgEHjCy2+ipWVifyYzECJFRURGicUuFgqFP2+/0AyYTlupyYTIpqd4WanSwe7udy/HYr5aFhFVR0letB7LZrPjuVyuvpFfU97tzhrGgYzjfL7J+PJmOn3yo/b2qa3GEFE1jTuttB5zDWMin8/bXnmb9qJ6Jh7vv7dW+1d3cN40v3+2q+vLTcIqKHVZw2Q8lRofGxurBsnZNJhpSLZr/XvadbOrv103jOt9mcwHNwxjbZkIlBGZiml96cF9+/JDQ0Oh72xN/YRw0TQffmh5+RtDJF4H5/m9ez/8OpWaB/5CqbwBk09OT0+9Dm4z62iYfkwm37CVqgzsuuvT3p6eR3t7e7vZye8w/xX9A0ynxee2hlfFAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAASKSURBVFiF3ZhdbBRVHMV/9+5uPwikFExEiCtWbSKCCEsCiU1EJIEXeMIHxZgYPzBUYzB+RUPlwwTl1UhYFIiGhrQVFCMRAoQFidGaEgIuVLrbLgSkhWBb2N3uzs7M3weBILadnZndF87j3P8553/m3ty5c+Eugiq1oDy5dRw5czGKpQjTgPuAicBV4C+E02j5gSFrn4o3pkvpXbIwMmNTLaHAByjeBKqLoGRBfY4V+lSdeGmgFD2UJIzM2bwMUVFgggf634i8qo6/vttvH9oPWRAlkS1NiGrFWxCACSj1rUSiqwXx9XJ9hWH2liaQtfifYQWsIxL9yK+IJ9xYWq1+NIaBjahl6vhr33khe2pEntg+noCRxPvSGg39GNZD6tTKfrdEb8ssaHxIeYIA1FKh3/VCdD0zN74jfRS3/XpFlpx5r9vvUNC1Tc5cTDFBqoJZ1i9opyFcR0hPomD3cvR8N02H55IvOPHHUB1aBOxy05r7ZaZY6lhTFcyy74Vunp46n5AOAxWEdJhnps5n//IElaEhRw0pwucOuA8jPOpYs35BO2Mrpg87NrZiBmvn/+aooWSa29a8bACTHSsawnWjjj/1wIOOGlKEzx3wEmaiY0VIT/I1/i/uKbKfW/AS5rpjRcHudRi/VITPtSL7uQUvYfocK46e7x51PNaTKsJn9BcyDDyEkXbHkqbDc0kbp4Ydu54/xcexec42OPvcAS9b82HHmnyhmkXND3OwJ0bBPgcYFOxzHEjGWLTjEQyryrkzFXPfmkvIY1+MpSp4Aahxy3WBQQrVU9TJFzNuSK5nRsUb0yi2u+W5dNnqNgh4PWjmrXXAZU9cZ1zGMD/xQvQU5sbxfJUXbhFY5eX4Dz5/rCQSbQae96NxOyzsnXVXNjRqrSsrRarzSlWGRJRp6RBAMGAXTK1tpdRQRT6fmXHx4kAbWDf5fsPUACeAqb5SAGkxBpYMfBW9YA/mivYXZSkhFdTyc2cqlfL9yyuRaAMQAwKeNUBWZ376piV3IuVVwoSv/V1oAKpjxTGQjX40Dhh/HvMRBEAFbHuK7zAAjOttApyP9cOg17526b303iN+7G2wLa2TJQmjYmtMYDnFHEJvQwGr8H5m766M5C3n6hEgYqhAYHcqleotzcwAqmNFEuEdN5zm3PF9vxipqx4tReBMpWVtTiaTf0A5Ls4j0VbgWae6TrOvc8ngthYPFkMicpJgsCOZTP7nw+3+QsMZK/NiLqxUwdqRCrJ2PvNWes+PxQqKKBMlCdE6Hg6Hz8RiMXO4upLPDMDFWZ8tnazHfz+CvmzIHNy5Lfd712gaIqqgsXuU1nE7EOhMJBJ5J9+yhAE4P2tj8/265n+ngyNG8tdXrrfuH4E2hFLdGs6Gxow5E4/HDTee5VhmAFj92Zf7J1Q01Krq8M1nV+zMlbfTew7dXieQRaQrqPXpx+fMSbS1tXne2co2MwAds9fMm6kmHQ2gQia29ca13V8eKnT1AYMolQjA2ed6errWgF3OPkqG9pmr1+cjm4ZapjfuqK+rW1hfXz+FMr/EuwL/AGOdsbn1H7gQAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAATNSURBVFiF3VhZTFxlFP7Of+8Mi12Eot2Sia36IIJCIWmT0lhSK30wfaoaNcampBhrfGhSl5hIW9HE5VFTpWilNpUI0hrTh1YwjJSkthFEcABhBoZ0YekCFGa72/FBSLAF7jY86Pc453znO9/9//nvuT/wPwIlu2DLns1Lo3J8hwDtZHA2gNUAVgC4SYRrzNxFJH6UpNjZ4iOBqWRqJ83MmVdzM7y6520CvQ4gzQIlSoxPJVX/sLi6fTwZPSTFTOMrhbuYuRJApgP6LRDv3V7ZdsptH8INmQH6aW9BOTPXwpkRAMgE0/eNZQXvssuHK7khF5VtOEhEh+F+hQlAcX/hGu1E61CzmyKOML21at3UmAMGM+96qqrttBOyo0aadufdq3mlEJxvrXlBwFhcUh58+vPOMbtcR/8ZzSu/g0UwAgAMZHgN7xtOuLZXpmXP5qUxOT4Ca8evU0RlOb7S7ntItq8S30EWjEje1GhOacWlrNyi9SR5VrGuDo92NPd3HSvfqCsJM366pqaVAKi305vtbSZAO81yJG9qdMsnZ/vvyyveSpLHB8BLkse3Mn/b1i0fnQtK3pSYuRKb6tzdm10QP2KWklNacUlOXZIzV0xOX5KbvfvwRXMdyrbbmm0zzFhjlpOVW7R+ofj9eU+ss6BkqnMnnJxmK8wSSPKschOfRpbljqbhxMykWQLr6rBJfMiCzm3LHU3DiZkRs4TRjub+BeO/+8MWdBZ8IHPBthkiXDLL6TpWvlGLTnXOFVOjk52B6oObzJXYVOdO2D8AQE1mObqSSDv/VslDI62NftbVQQAK6+rgyG8N/vNvljxsqEqqqQ4Lv93ebE8ATfseXaJpqVcALLfLtYEJI6auLTnREbFDsr0y/4wY9LVdnh0w4yu7RgCHg2ZCSrwHYNQJ1wJGFVl53wnRkZnp8Xy/E64F7Hcy/gMuP6waygpOAnjBTY3Z0Bk1ZeeuvyaESElhTksQpXiYSdOFBwBkyVA1IQwiinkTiUju1avjdYA+w3drZjkB7Qw84NIH4hqPV1wYr7wVM+JWOcykEyMsCz7fEw6HXX/yNpQVFAHww819AoNP9kS+abkcDzutoAHHXd3OAMD2o60tTPjYTY3260qLCyMAQJJhrHVtBgA8q5eWAzAf6+fAeNwYqu6c+sWNvgEYuhChpJgpPuTXBPAiLAyhs6Ez1ONdkfqEzrp59jxgVkiSToXD4eGkmAGAbUdbQ0R8wA7Hfzl+tueGctOhJDPQnaLrX4RCoT+BRbg4bywrqGXgGbO8K5NazwcXJr5zIBFj5g7IcmsoFPrXi9v2hYYZJGBfzOAnPYIy5stJaEbky86pM1ZrMpMG4iALEfD5fN1+v1+bKy/pKwMAtS/n78xIET/MU5/r/4rUNA7G+xaqwUyqgDFAQgQMSeoJBoMJM91FMQMANS/ln8xKE3dNB4Ebyq+ftU2em4cWA1G/AHo96endgUBAsaOZ9G02g7g0VhpRMovu8ZJv5rcJxbh+rHPq59l5DETB3CcL0fVYYWGwrq7O8cm2aCsDAFXPbdjkW0bNguDRDehV7ber/rihjgCYAFFQAnqfHxjoOwQYydBbVDMAcOTZxyvWLZMPXBxS6r/tjlRDlrt7e3uvAeDF1v5P42/pFun0pc2xBwAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAARrSURBVFiF3ZhNbFRVFMd/985H26m1VEoL0zj0Ayqi6IZElpiQ2MSgIeJCDZGFuEEXJH4bG9QN6spoImiMIaExbREEYoIxhgEb1CZNjFg6lHnTacNHW8QW7Mx0pjPvuKDVprR9X1MX/Jfvnv/5n/89N++d++AOgip2QolRQZAWhCeA9cAqYDlwHbiCcB7NcTKcVA8wUUztopmRQarI8wbwMlBmg5IGPkGzTzUwXowaimJGEmxHOADc44L+F7BLNXHEax3aC1kEJQatCB24M8I077DEeUfE2+Z6MkOCVuBdvHdYoXgPg7e9JXGJ6aPV4SXHPDARtqs1HHVDdlWIDLAMEwP3R2sxjOGnSa1mzCnR3TET3mJpjABUkedVN0THnZEYFQQYwd7r1y3STFLr9DvkvDNBWrBjRIfS1B6J0pAdolFyNGSHqD0cRZVlbKiEKOUxp6U5N3Pry26RNZRm9ZUE5ds2o4IRIIgKRih/ajOrr8RtGVI2dObKOiUA91tGrDjUjap8cH7FZRuoOfirZQ5hvdPC3JgJW0aEHm9cfP3JBsscYkNnDtyYWW4ZoYIrPa0DKKptVzQN52YUf1vGSG548YDcVRtKN+0V9B/cvABGLGPSJxKLrqeOJm0oWWzI7XBzzLotI0Z3PII5fm7eNXPsHKM7NxVFZw7cdOaUdUymjMHwGlKdUSQ3COSQ3CCp9iiD4bXIZKllDkXUaWnOJ4Be7qKUS0ClU64D3KCcOrWSlBOS485MjxhfOeU5xJdOjYDbqfnWFTkG1LjhW2AUP+v+t6l5WmiPG64N7HFjBDxerMSgDXjWS47ZKBT4unFLZLfWuqREpCyrVElAROULOgDg95lTea1NpVQmmM2mNly+PN4JhRm+VzOVwG9AvScXwERaj2/dFT5wadg/aVtfVEEJSb+Wn2LJZNLTPwDVxA1gB7N2xw1EkH37q445MQKglPjQ0pSH5+vr6+u9/dAAVBNdwIdecvzQVd7V/l1F0ksZPtOs82wGgCFaAeuxfh4MX/Ndfe2D6tNe5E0wC1obRTGjHiWPyXNgYwidhakpNfX6Ryu+SWWU+2MqklM+35FkMjlcnM4Aai0GwitOOG0nKk6e7Sm97lJSBPpKCoX9hmH8AUvx49ygA3jaKi5mBGNbXwy3u5DIiMjv+P09hmGMzl4ovpkLVGcLqr+kRKoWikmnVWrb7rrPEkN+WyOLiMqjJC5a90Yikb5oNJqfL87vtuiFoO7jz8s/653hmsK3zL9Z8vHBZcesjIioKY05oLTuNf2+WDwezwIkEgtflYremRkMdQXa7l01ddt0cLq77JcX3qz9fgFaBqUSGvoDoVBfb29vzonmkpkZOEVpZaW+UFVpRmaeXRvzXWvZGf785oTv32MikEbkol/r8w9t3Bjv7Ox0/WZbMjMAPcfLNj28bvKMzyeBfIHCS3trvvjxbGgEuIFScR/0PzMwcHEvmEtZR9HQfaz0/WxMZdo/vftQc2Pjlubm5jqWeBPvCPwD/KOH+jnO5aMAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAASxSURBVFiF3ZhdbBRVGIafc2Z2210hbeWnpcQVUC8kwBUJXJBIgwkgBEPEC1GMxhgE4gUJJsYERMWI3orYaiqgrYSWH/mvMaQLciE1RAKUkrLbbhMobQ20/LT7N3OOF0CC0O7szGwv9L3c73u/93vnnD3zzYH/EUTBKx6sHUvQWgR6GTAdmASMA26A6AYuofUhQnYTVevuFlK6cGaObC9DGh8i9PtAKA/GEIKvSRZtZfnbA4VooTBmjlWvQFADPOmBfRN4l8Xv7ffbhvTF1lpwrHoTgga8GeE+by9NNRvR2tfDNfyQmVv5MYJP8L/CAqgidtai/sgpP0W84d7WavBV43Eo0CtYvOaAF7K3Rg7sKKU4Hcf71sqFfmz1DEvX9rslevvPFKc/YnSMAJRhyA+8EN2vzMHasQSzveR3/HrFEMV2udv3kOlaJmgtIg8jYcMcqpu1oGXJhMi0oJQVGaV6Dvd1day62DwnaWWd+GHSciGwz01rHraZXuaUETbMoe6qVR3Ly6fMD0oZAYJBKSOvVEyd3z3/jVjIDCSddYSjzqPwYEY875RRN2tBS4kZnDFcrNQMztw144UzjjKa6W4787IylU4ZSyZEpuWKv1w+dWohdB6Fl9NsnFNCUMqKnHGRO34PYnz+Ld2DFzN3nBIySvXkjGt1PQ+d23l3dB9ezPQ6JRzu6+rIFT/Q25lwVNHkfCDDwYuZFqeEVReb5wxYmQvDxfqz6QtvnW+e69yZcNR5jOKWgKbZKSVpZUOV0bpnG3vi0YxWXUAmo1XXnp54tLL5p+dSyi52FlJRt625nwCavxlDyrgKlLjm5o9byPBkFr456IbkfmWq1t1FsMM1zx1q3RoBr4OmpT4F+jxxndGHrbZ4IXozs3RtP0Ks98R1ghDrvYz/4PfD6ti39Qix0leNh6H07siaL9ZJKYuKtA6lhSgKaC0sWwYATENlLSmVECIZTKcHZ167NtAI9gO6PzO/1ZRg6XPAFF91AJnKDES21NaYN26l8uVoLWyhSZhS/345kUj4/+Q9XjMPdBR/9wl6Qn3TjyWnzyW88i3Y5e92BmDx6tPAV35KjDnXftqHEQBhKDXZvxmA4p5NCJzH+mFg3rxzvXzn0ZN+5BUoW8p4YcxUbbZQ4nXyGEIfhrDt7MS6o/tEOm07Z48ArTPCMPYnEomewpgBeGl1HMQGN5SSk381hdsSNzwqag1tRbZdHY/HL8JoXJwfr24AXnVKK7rae/mpz3fs8aCQ1FqfxzTPxuPxf7243V9oOMESa4XOvqgDZtlIKTKVHpz4w6Ej+ZbUWlgIHdNStkYikbZoNGoNl1f4lQGM3V8us0tLfhmhvh6/98Tu0hN/XslVQ2uRlahOIWWrMozLsVgs7aQ7KmYAAnVb67PjSh+bDsKtHX9Ubmv4dQRaEiE6JLQHwuG21tbWjBvNwm+z+8hmU+/Iu8l5akwo8uA34/bg3+W1B088nKdhCK2vmFJemjV7dqyxsdHzyTZqKwMQ2r55bmpK+SktRABb2ZO+2//9E+djvcAthIgZ0P5aZ+eVzaAKoTeqZgCKt238LP10xYaxZy7tq/j5+E5Ms629vb0b0KOt/Z/GP4jqqfL5oxVsAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAS8SURBVFiF3VhdTBxVGD3f3Rl2oRAstZXaBGxpoxaxhSVpE0ha0ib0qU/1QX009UHjQ5Oa+BO3pdTEn0QffNDGGH+SprGUqlUTSGtcKfGHBELALYTuwGJsSyEVKLuz87Mzny80sQjMzp3lQc/j3O+c8525N3fuXOB/BCq0YNNoU5lRZBwipsMM3glgM4ANAO4AuMnM14QQl7LZbFeiNpEupHfBwtRN1q1Xc+orBHoJQHEeFB3AB45w3hrcOjhXiB4KEqZxvPEIM58BUCFB/4vBRwdqBi4G7UMEYjMoqkVjzHweckEAoIJAF6LJ6BvgYC83UJiG8YYYgDYEn2EC4VRUi74eTEQSi0vrfBCNZeAy85GB7QNfyZClGtk9sfuBkBvSIL+0VsOspVg1w9XDs36JUstMYeU1rE0QAFhflCt6WYboe2aaRpvKDNW4jfy2X1nohmE85Pc7pPh1MYqMQ2DvIBER0ds3tvc1lzRvU0mttNme6tF7xmPTsT0mm178kuJIcSuATj+9+V5mxHTYqyYiInpXddd4y7qW/SqpVQCKVFKrDqw7sL+7ujsZpnDWS4OJPX2WwncYBj/uVdO+sb2vlEqfWG6sVJTWtW1q+81Lg5h2+u1NZgN42KuguaR522rj+0r2bfXSYGZPn6WQCbPBq0AltTLIOACA8KCPngDIhCEseJXYbE+tOg77Vh5Od/PuaRH+wzBue5X06D3jq43HM/FUHk6rvpDlILPM+rwKYtOxPWk3Pbzc2IK7MHxi+sReLw0Ge/oshczW/KNXjclmcetk6/YrmStxm+1JAJbN9uTlzOV462TrDoutiGdjJOK+e/NLqE3UlkYikT8BlPvl+sC8vc7eMlQ5lPFD8j0zidpEmkCf+uX5xCd+gwCSB01TMU8BmJbh5oFpS7FOyxClwiwez4/JcPPAMZnjPxDwxyqqRc8CeCaIxn1wcG7m4MyLQohwmLnYJAqrzJRzhAoASsi1c0K4RJQtMs1M3Y0bcx2Ac48eNEw5gEEAjwQKAYB1nksfnTvjTrlG3hwmhxgpRfDV0VQqFfiXN6pFmwHEAYSkRRisv5/5wv7eSMkq5IDPg93OAOiv6e8F8E4QDbvX6g0QBAAo5LpbAocBgLI/ymIAPI/1y4Fn3FvZt9M/BfF3AdcRQitImHhLPAcXzwLeh9D7YMPW3810cpYd7+IVwGxRKHQxlUpNFSQMAPTv6NeY+bgfjvmt0ZXrt+5IWjIDI2HH+UjTtN+BNbg4j2rR8wCe8qpztdzowvPzX0pYZJl5CIrSr2nafR9u3xcansjhBXb4IIVp/UolrLuZ9On0d/lKMlMOxEkWIlFVVTUSj8dzy9UVfGYAoP6X+sNik/h6BX02PsycMy8Y11fTYCZbwJ0gIRJuKDSaTCZNL981CQMA9b31Z8Vm8a/Tgd1n/aq/utC9Ai0LonEBjKklJSOJRMLy41n4ZbaIWXv2uYr5imYqp6p7z9xZdyb7ZvqHf9YxoIP5uiLEtScbG5MdHR3SO9uazQwANFxq2EuPUQ9CUOHA0U/e/dj+2b4NYB5EyRAw9vTExPWTgFsIvzUNAwC7vtnVrjyqHLeuWJ3me5nPoCgjY2NjNwHwWnv/p/E3iQfm3w9KV7kAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAATaSURBVFiF3VhbbBRVGP7+M9NddtmyvcYKSbGoAYn4REJNIGmRpMREfMEH5YEYY6ptfCCBxEgEvMR4eeCBtBYa1EIIsbVAFAIIsis0og1GpJbWdrdsiUBLuXQp3e3MzpzfB23Cpe3pzGwf9Huc83/f939z5nLOAf5HoGwL7m4ryjWssdVgWkPEi5npURAKwbgJ4CoYF5n4WyBwrLZy6G42vbMWpv5MOJ9s+TYz3gIQUDtzCkw7DGgfb6gcHs5GD1kJUxcJrSWinWAUuOjgFkt+vXbl3QNe+xBeyMyg+lOhLQRqdhUEABgFRPTN59HQu8zebq7mhVxSEdoKovfgfYYJoMpzCZ91pMk87UHEHeoiobUEavai8RAYkgTWvlkxctAN3VUj2yN5eX6y464fralxG7p4vGZF8rZToqt3xs/2OzMUBADykZGb3BAdz8zutqJcI2MMYjqfX7cgTjEHHnH6H9Kd+hjW2GqAlEF0PZhataixfX5h1QJBvhLJ5kD/jaN9J7url1l2amo+U1BwugpAq5PenD9mTGtUJboeTK0v7+0rK3qhQpCvFIBPkK+0rPjFivXP/hnTtWBaaSPUPg/CzTvzlKpg1aLGdp+e+/REYz49vGTlooZfVBrMWOy0MTdh5qoK5hdWLZhqvKzo+TKVBpHa50E4D0MoVIqSr8TL+L8omnZP47pOCWCMqEokmwOK8WvT8LnjoCsA7mZmUFXSf+No31TjfTeOJKbhNOUNmQiOwxCjXVVzsrt6mWklOyYaMzLDHae63ihXaTCpfR6E4zCSKaKqsexUoOnswifiQ4eiks1+AKZksz82dDDadHbhk7ZMz1I3RlGnvTleAdRFikOEsb8AhJ1yHSA5agbnbaoaHHVCcjwz/ywx+EunPEcg7HYaBHC7OdO190G47oqrAuE6NPGhG6qrMDUrkrchaYMbrhKSNrhZ/gMeN1b10dA+ML3iReNe2JL3f/ZqQa0Qwu9nDhhE/hxmsmyRAwC6JjOWEJKI0j7DGF1y5cpwC2CP8z2F2XkiP2zr1nkAj3mLAZhpMbx3a3hnckiMTZfDTDYxErrgM92JRMLzlrcukrucgCi8nCcw+MSe2Xs6orMSbhUsoMnT6QwA1FaOtIHxqReN2G/+Ng9BAIA0Ked5DgMA12lkCwDlsn4ijNyia8d3zf7Ri78EpC1EPCthtlXC0qRYB6gXofc1YSNz/Is5rYZBtrp6EjCbpGkHEonEQFbCAED1c8k4GBudcM6fmnXscqd+06UlM9Dlt+2GeDz+BzADB+f1kTnNAL+kqhu6rHfv3Rr+2oVFmpkvQNd/jcfj9/24HR9oqKCBawyTVuk+zp+sxhyj0cMNocPT1WQmC8QxFqKztLS0KxqNWhPVZX1mAOCT1rw1uQX2oUn0+fT+4P5z3wd6p9JgpoyAvERCdEpN647FYobKd0bCAMBHzeF9ecXyodVB4kLOzwe2zzk+CS0Noj4B9OQEg12dnZ2mE8+sP2bjMEeTr6UD4eWBkCwdvzZ6Rwwd2TX7h3vrGEiBuVcX4uIzS5fGWlpaXH/ZZmxmAGBzY0H53AXWaRKcI23Y3+0INcZ/9w8CSIIopgE9L1+61LsNkNnwm9EwALB5V8EHJWWZjV0/BVpPNoW+gq539fT0XAXAM+39n8bfE7XcWzV66JYAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAR4SURBVFiF3ZhbbBRVGMd/58x2u7vQbmtvssSNAjaRiE8k8oAPBowkVTAGTVAJJMYXiTGYNFxisHiJ7ZMPQiIxxhRLCG1tjSBRubiAJEhiNDaFSlu6baRQELsI7e7sZY4PlKT2sjNzZvvC/3HO9//+33++M2e+GbiPIAqesYkSLNYgWAssBRYAFcBNYBjFBSTfkuR7GrhTSOnCmfmYcgTbgbeAoAPGOIJP8dPIVhKFKKEwZppYj2If8IAG+x8Eb7CNDq9lGJ7YCkGQXcBeIKSZJQi8zDNYHOMMu/XL8WYmxHvAbrx3WABPc5YsxzntJYke7m6tVk85psNCsZ4ddOqQ9Qr5hDJM+tF7RuwwimIxOxh1S5Racml2MjdGAMqBeh2i+840UYJiBGfHry7GSVHj9j3kvjMWa3BgJOQPjXe82BEz680htU2lzXpzqP2F9ljQF0w6UAlRzLNuS3PfmUa+Al7LW4k/ND68Zfhy2B9+fOpawkx0RfZEliSzSbsbsp/tbHJTms4z85hdQMtzLednMgJQVly2rLmu+RcHOkvdFqZjJmIXULe4blG+9XW16x4phM5U6JipsAvwS/+DXtYnUOm4ognomLltF5C20tds1q860PnXcUUT0DEzYhdwuPfw5XzrnZc647Yqgrw3ZCbomDlvF7DxyMYnE2aia6a10dRo1+bvNq+wVVH2OlOhY+Ynu4BkNhmM7Iksaetpi6Wt9CCQTlvpwUM9h2KRvZFHU9lUwFZFEHNbmPv3TAPzCfAXEHbNdY5bGCyknjE3JPeduTtifOma5w5fuDUCuoOm4n3guhbXHtdRfKhD1DNzdzzfqsW1x1ad8R+8flg1cgB4xVOOybA4GP0sukVKWVysVNAUorhIKZHNySIAn2FlslJaQoik3zTHll25kmiD3D26VzNh4HfgYU95AJmRiWhrZJ/vti/llKOUyAlF3CfVmZ54PO79k7eRlUAMb/8TVNWpiv3hiyVxXX4Wmr390AA4zhCrCCB4SjfF/IF5P1eeK//NQxVCWNYNvQNgKkx2AU7G+mnw3TGu1pysPOVF3gIrJ2V/Ycw0kEXyKg6G0MkQlshUn6r6WmREzj56FiiVFobREY/Hr3nfZvdwjFFWcRPB804pZV2lR8PdJXmH0jxQCnoCuVzrn4ODgzA3P85bUbxkF1b8t7/nofbIIQ2FpFLqD3y+X/v7+//34vZpJMsPgzeFKVYrQ5XPFiIzYqz6ZPURpymVElmE6lNSdkej0YuxWCw7U1zhOwMY7xprc/Nz38ySX1WeLT9Y1hXuzZdDKZGRWANCym7LMHr6+vpMO905MQNQtLPoQKY0M206CA0Fz0WO1vwwCy2JEJclXCoKhS52d3en3WgWfptNIOPPvC5TcqUVsKL3rhnjxo2aE5UnJscpGEepXp+UF55Yvryvra1N+2Sbs84ABN8JrkhVpU4roYqwyC34sfrzefHQCHALIfoMuLRhYKC3Aay5rKNgCLwd+EB8JJKlm0pbahctWl1bW7uQOb6J9wX+A8zucxGCTS9IAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAARZSURBVFiF3ZhbbFRVFIa/vedSZkTbClJow1irNpGIvpDIAw+NIYghqTHig6JGIoLSGEK8xEhoKpKovBoJg1aCaVNpsYhIRINh1D5oDYaIvUhn2qGhNwi2RabtXM7ZPrQk0Ns5Z5+ZF/7Hs9e//vXvtXP2OgduI4isZ1S1d0JmPVAJrACWAYuAq0A/0A7qWzBOIaquZ1M6e2bU/kLwvAu8AQRsMMZAfAK+jxCbR7JRQnbMqAMbQYSBuzXY/4J6FfFas9sypCu2UgJ1sBpEI3pGmOSJo6jwbpRytbnuzHCwGtT7uO+wAPZAeJfbJHqYPFqNrnLMhAliI2LrMR2yXiHqUAGkYugfrfkwDMb9iO3DTomaxyz1HrkxAlAI8m0dovPOTN4jQ9h7/epiDDJFTu8hjc5k1mPDSBDvWDPrIkm29Cq2ppJs6T3KukgA37gNkSD4nnBamc4xq7SuxDvWzwvdT1Na4UeGAL8fGXqG0op+NkVtGrLUmQ4dMw9ZBdTxeGs+/odnWyvAv/IwFb9by6gVTgvTMVNsFbCBUNl8609x733Z0JkOHTOLrAL8yKVu1qew2HZFU9Ax859VQApz0GJ9wIbONdsVTUHHzJBVwAl6u+dbP0ZP3IbOvBsyGzTMqFariBc589gIqfOzrQ2TPP8ykdU2hCx1pkOnM2esAsZJB4qpf6CJnkgK8yKQSmFePEIsUkzdgxMYC6xlRMRpYRoTwKcLwXsJyHfMtY9RCJQgXko4ITnvzOSIccgxz5lIrVMjoD1oGnuAy3pcS1yGzF4dop6ZyfF8pxbXGjt1xn9w+2GlwvXA865y3AzDbAiVfVglpczLUyqQFCLPp5TIGNIH4PWY6YyUphBi3J9MJlb29Y00gXGD7tZMPnAOKHWVB5DXUyOhJz8Pey+NTtiWV8IQirhXql874/G4+09eFV4DRACPfg7UPbu+/zK/4VxcN0MGDrv8oQGIbS2g9rlJsfDHf1pcGAEQHtMscW8GgMFqwMZYPxPegWsDRW+e/NmNugmmIWUsO2ZETQbYhI0h9BZa2kgveefk1yKRNKyj54BSKeHxNMfj8cEsdQYQ22LAW04o+XV/ngq2xK9qKioFHXmGcSAWi/0NOflxHm4EnrUKy2sf6ly+4YsjGgrjSqm/8HrPxmKxWy5ur0YyK2wXycxalectnCtAJpKJJTuOf2c3oVIig1BRJWVbKBTqiEQimdnist8ZwNP3caVRXPDNHPnV4r2nGwpq/+iaL4dSIi0xe4SUbabH0xmNRpNWujkxA+Dr3VefXp4/YzoIRmK/FW9u/GEO2jhCdEu44AsGO9ra2lJONHNxzABIG2OvyGH/GrMwELrxzHMlcaVox/Gfbo5TMIZSXV4p2x9ZtSra1NSk/WbLWWcAAmdrVk88uvQX5RE+Mqax7PXmz+443TUEjCJE1AMXnuvp6aoBM5d1ZA0LWnd/IJL7x+/6qqquvKxsbXl5eQk53sTbAv8DzFJ5Mvw8/r8AAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAQLSURBVFiF3ZnPT1xVHMU/983QYcbqlNZoCmEkqCxMtJsm+gfQ2KaJqaYurDHaZeO2dmH8lZg06qZLtYY0RhqkKFrd1KYJE2VhqiQG5YftDAwEShFpARmGN8y84wIxhQLvx8xA0pPczbzv955z7u97B+4hmLLXKN0PHASeA54A9gJ7gGngBtAPfAdcwpj5svOXBVIN0odIC0jyULJIHyDt2m7pqyEdRZr2aGJtmUZ6YbstgGSQ3kFyAhpZKQ7S20jlH/Y+zLxboom15a3tMnK0DD2ythSRnt9qI7tKmCNu5RZSTRBZVkA7bwK7A+a6oQZ4I0ii/wm3vI9MAtEghB6xADzsdx8K0jMH8WAkBgudkLRhVJC3YfQrSEYh54EjBjwbQJtPSF+4jfuYlJ2Rftc6uC31Rr1trJ9vhZlf3YR0Sl3rGVnBBanLg5lftsLMDTchtjSymRlbyngwM+5XWpAFwAZ2bBoCeZcY20DEhSmPMW4xqxBkAfjHLSAPN12+T3jgmfOs6D8EMTPpFvA9DG32/RvIeODZtEHKA+mc23iPSgu3pd715sstqbdaynmYMy1+pQXpmS63gBxEa+GxDkjmYQTI52GkHZK18PgiVHvgSfoVFmQB2AmMAXHfud4xC9RhTNZPkv+eWT5inPOd5w8tfo0Ex/IVebJCp+bJoKfmUgwdq5CZY0EllXZNlc4DgcnvQrHYlmhsfN2yrEhEitrGRKokUyhaVQDhkLNUsCzHGJPbYdvZJ8fHZzqguJJeqpk48BvQUFI9gDU/P5M4dOjT8NjYond6UzQiE7b002Amkwl6OVuGMbPAK9zROoEgac/p0xf9GFmmVwhLjxbg1YaGhobSzCzX2A18VEoVOy9f7o63tWVKURFynLryPO1IYaAbeNpvanhiYuKRAwdaTDYbuHcdcBw4W3rPABhTAF7GwyF0VdrS0tJDp059XYoRpLwJhTozmczN8pgBMCYNnPSTEm9tvRTr7p4OyCjBQKRY/CSdTv8BlXk4vwC86BYW6e8frD98uD0AQ05SL+FwTzqd/uvOD5Uw86Cx7WuKRDbcxa1sNlt35MjHkVTK05FFMgWMUrKsvkQiMZBMJgvrxYWDat4QxvxtjY+/Vqyt/Zb1G0u7z5y56GZEMksWzrCxrD4nHBpMpVI2wNDQxlelij1UV42Onl+qr7/rdBBLJn+uPX78hw3SchgzZMG1qlhsoK+vL++Hs3Kv7sPD1VY8/qdTU5NY+Sk0NTWVaG4+G5qb+3+YCBaQroctq/+p/ftTHR0dgVe2iv6FEO3peWZx374fFQpVUSgU95448dl9V65MArMYkwrBtZeGh6+/B04ldZQN1Vevvm9sO/fAl+2tTY2NzU1NTXVUuBHvCfwLna16k1MlopgAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAATaSURBVFiF3VhdbBRVFP7Ondlddvqz/aERARtFMUos4YFIH3iAxESICfCABtqkCRiJtjGRBBODivhH1PigEovFGKhJXWktpdgQfDCugEFrCEhbitvdditSKIhtge52d3bu8YE2AWx7d2a2D/o97jnf+c43996Zsxf4H4GyXXD25ta8MSOxiiWvAWERCPeCUQzCNYAGwHyOGIf90I5erX3mZja1s2Ym8EJDYZq0V0D8IgB/BpQ4gN0ez9h7wx9tGs5GD1kxk1sdXM+EOgBFDuh/E9NzN2s3HHTbh3BHZzJqvt7BhEY4MwIARUz8jVEdfB1gVw9Xc0M2qh95gwhvwv0KExFWeh7vTJu/Nh9zXMQpcXxrNbqpMQmkBNYnPt3Y4oTsqJGCl/YVmOasKJxvrekwpEv54MieyiG7REdnxjR92zEzRgCgMC3Ey06Itldm9ubWvIQ/PojMXr9OETdYu8fud0i3qzJmJFaB1UZyvHp8b1V5++qyuQu8mpiTsuTlIx0DvVvqTy6Lm5aKbyRE+kkAzXZ6s73NWPIaVU6OV4+Hd63tXbtk/gqvJkoBeL2aKF23ZP6K8LvrIoZHSyh1AKXO3bB/ZgQ9qkrZW1XeHpjleWyyWIHhKaurKv9FqcO0yHZrdgkAz1VlrC6bu2C6+FOL5z2QgZBS527YN8MoVqV4NTHHTXwcszPuaRxOXs03VAkpS15WxC9loHM9447G4WSbDaoyjnQM9E4X//bMhZhShjDtA5kMDsxQuypjS/3JZcNxs2Oy2HA81fF8Q3u5Uoah1LkbDs4M/aBKiZuW/+FXDz3UcvpCKGXJfgCplCX7m0/1hxa+1rowkbJmZaAUstua7QmgpLoxN07WnwACdrk2MDLqN+fhw6pROyTbK3NrxKB9dnn2wF/YNQI4HDR1ab0F4IoTbga4okt+xwnRkZmRPZVDIGx1wlWCsNXJ+H+L6gI5NcEGABVuatwBtoLFbdtrhBA+H7M/SeTzMFPaEh4A0DVppoWQRJTwJpOjZRcvDjcB1gTdlZnCLY2BlMc6A+B+dy4AkU4Olxz7uE4khsYy5TCTRYyYLvj4+Vgs5vovb171V8slUQhu7hMYHOhs+dL4oz3mtEIaqHd5OwPcqK04AeADNzX8g10nXBgBANKknOfaDACMlszZAUA91k8CbWzkUuBs049u9CUgLSGiWTGDnSvTuqBKgJVD6O0gaZmB35qbyUxa6uwpwJwiTTsYi8UuZ8cMgJHdG6JMYpsdjr//5FHfXz3XHEoyA90+y/osGo12AjNwcZ5TE2wE8LQqz3v90vni458ccCCRYOaz0PVT0Wj0jg+37QsNFYTJ1axZT7DQC6fOSY7mnw62ZVqTmdIgjrAQXaWlpd2hUCg9WV7WVwYA8jbXrpH+wkNT1Of8c23BnL6feqarwUymgOwjIbqkpp2PRCJJle6MmAGA/E21DZZR+K/pwHf195+L2vd/NwUtAaJeAYQ9htHd1dWVsqOZ9W02gevsfzY3NbqcvTmlE7+J5M2rgdMHvr89j4E4mHt0Ic4tXro00tTU5PjNNmMrAwBFle+XpwLzjzEJD6RlFZ1q+Nx3pXsQwAiIIhoQ3tjX17MTkNnQm1EzAFBQsettM3DfNv/FM81FnS37oevd4XB4AADPtPZ/Gv8AkvXQkIP4nXQAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAASpSURBVFiF3ZhbbBRlFMd/3ze7bXdp0yKlQI2NIqZlK8YHjDxgFEIikVhKAibeooH4otFIosFLgvdEn9QQHojxAkoIFChRMWBCXC5GxRgb6sJSWrrlDgXbUrrbndmZ44Mlwdru7MxsH/T/ON/5n//5z5n55swH/yOoomesb6rAMBaDNAExYAYwBbiC4hxwFORrKNlDouVaMaWLZ2bOksk44VeA5xEiBTDSiFpHqbxP267+YpRQHDONS5cjagNwkw/2n2j1DH+07gxahhGQr2hcthZhPRD1mSOC8Ag1DQ69yYNBiglmJtb8BvAWwTusgAVUN+S4nDzgN4l/M41Ll4NaTzHfO8UDVNe3c/l40h/dD+5ursKkC3/viBv6MKzbad/d55WofclZ8hoTYwRgMnb4ZT9E752pb6ogpC8WuP36RRoVnub1O+S9M4axuBAj0bLS9M6P18SzbdtPSaLVzLZtP7X9ozXxSKQkU4BKFKwHvZbmvTOx5i+BJ/JWUlaaPrf/s5OV5dE7R6/1Dw611y5YOSuTMfPfEKU2kWh9yktp3jujmO0W8tUHLx4eywhAVcWkORvfe+EXVx1HYl5L825GqHULWXL/PTPzrS9dOO82Vx3lrjMafnazKW4BJWFjepD1EVQXXNEI/JgZdAswLfuCy/r5AnSuFlzRCPyYuegW8E3815P51lv3/ZQqQCfvDRkLfswcdgt48tUP7+0fHGofa61v4Fr706+vm1cMndHwsQHID24hmYwZqV2wclbL3h/jpmX3AKZp2T1b9xyK1y5cdcfwsFnmrkPca2nevzONK8rBOoNQ6ZlbKBQDGOmbOfL9kBea9878PWJ87pnnBcKnXo2A30FTW28Dl3xx3XEJw3rXD9GfmfbdfShZ7YvrBiWr/Yz/EPTHKta8GXgsUI4bIc6WuqG257TWpaUikaxSpWERlbN1GCBkOFZOa0cplSnJZofmnD3b3wL2dXowMzNXVFJmtQG3BsoDaJz+uuHkhpBjDhfKEVG2ElIhLQeTqVQq+C9v47L5IHEkyHmCyFTrzKZK60rKb4IcbAx6OgO9yVNMbSgD7vObotweOFRtnv89QBVKOU6vvw1gNGr61wLuY/0YCIl5fpp5en8QeQccW+uu4piJx3NoHqeAIfRGKLBqzNM7lNi2e/Q4EDGVYexMpVIXgj9m13Ep2UdNwxXg4UIpVVbvd5W5y3mH0jwQgWSZbW873tPTAxNxcB5r3gascAsrdTLJW4aPb/WhkBGRI4RCv3V1df3jwx3ykSw/cvazKqQWCXryeCFa7KEaq+fbQlOKqBxKOkXrRF1d3bF4PJ4bK674nQGM+iVNthHeNU5+qTbPbqnK9Z7Il0NEWRqnW2mdcAwj2dnZmXXTnRAzAOHYQ5stSv41HURzgz/Xml17x6FlUOqkho5wNHoskUiYXjSL/5iNwEqnV+mInu+oUN31a4bkeqdlU/tuvIUCaUROhLQ+etfcuZ0tLS2+d7YJ6wxAZPaiecO6/IAIYUTsGWb3J5PsqxeBAZTqNKDj0e7uE2+CUwy9CTUDUFa/6J2sEX2pwurfMd0+8wWh0LGOjo5zgEy09n8afwEcs7T5cvn0GwAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAS2SURBVFiF3VhbTBxVGP7+szPscmkq1FZqE2pvUYvYwpK0SUla0ib0iaf6oD6a+qDxoUlNvMTthZp4ifHBB22M8ZI0jVCqVk0gbeOKxAsJpAG3ENiBxdiWSypQdmd3Znbm9wGaCAKzc2b3Qb/HOf/3ff835+TMmQP8j0D5FjxwYGhdJlN0lIibmbEbwGYAGwDcBXCbmW8KIa6k0+mOWKw6mU/vvIWpqRkvV9XsK0R4CUBxDhQdwAe2Ld66cWPbbD56yEuY+vrRY8x8HkCFBP0vZhzv69tx2W8fwh+dKRzWIszcCrkgAFBBhEvhcPwNgH29XF9h6upGIwDOwP8ME0Bnw2HtdZ8iclhcWq1+NFaAw8zH+vp2fiVDlmpk796xBwIBR4P80loLM6ap7BgY2DrjlSi1zBSFX0NhggBAeVFR9mUZoueZWfiOqJPIbfuVhZ7JZB7y+h1SvLpkMkVHAXYNEgoJvaVlY09DQ8l2VaVKy+KJri59NBKZ2mcYrvyS4uJQE4B2L715XmZE3OxWEwoJvaNj62hjY+khVaUqAEWqSlWHD5ce6uzcGg8GKe2mwUyuPsvhOQwzHneraWnZ2FNWRk+sNFZWJmrOnNn0m5sGEe/22pvMBvCwW0FDQ8n2tcYPHizZ5qbBzK4+yyETZoNbgapSpZ/xBdCDube0AIkwNO9WYVk8sfY47uRgdC/nlhYhEYYn3Sq6uvTRtcaj0VQiB6M1X8hKkFlmPW4FkcjUvmTSGVhpbH7eGTh1amq/mwazu89yyGzNP7jVGAYXNzWN77x2LRW1LB4HYFoWj1+9moo2NY3vMk0OuTYmKOq5N6+E6upYWSgU+hPAeq9cD5izrNIt/f2VKS8kzzMTi1UnifCpV55HfOI1CCB50DQM5SyAKRluDpgyTeWcDFEqzOLx/IQMNweckDn+Az5/rMJh7QKAZ/xoLIV9cXr6yItCiGCQudggCqrMlLWFCgBKwLGyQjhElC4yjFTNrVuzbYB9n+03zHoANwA84isDAGZ9Njl7/LzjTGRy55BNjIQi+KehRCLh+5c3HNYaAEQBBORVmPXU+19Yme8TsgJZ4HOftzNAb++ObgDv+NGwzO5uH0EAgAKOs8V3GABYt+6PCADXY/1KYGf6Tjr59o9+/B3AsYXQ8hImGm3MAs6zAFwPoUthWXrq3XbmtO1euwqYTQoELicSiYm8hAGA3t5dGjOf9MIxMt92ZM3eu5KWzMBg0LY/0jTtd6AAF+fhsNYK4Cm3OierDc3PPf+lhEWamfuhKL2api35cHu+0HBH9gVm+whRsHy1Cnb0VDJ57rtcFZkpC+I4CxGrqqoajEaj2ZXq8j4zAFBb+0uzEJu+XkWfM6kPLxqZSyNraTCTJeCMkRAxJxAYisfjhptvQcIAQG1t9wUhNv/rdGCZPb/q8692rkJLg2hUAMNqSclgLBYzvXgWYJktYGbGeq6iYq6BaH3V/WeOMzOdTr55/Z91DOhgHlGEuPlkfX28ra1Nemcr2MwAQF3dlf1Ej3UBARWwbf3e6Y8t6+dJAHMgigeA4afHxkZOA04+/AoaBgD27PmmRVEePWka19sN/b3PoCiDw8PDtwFwob3/0/gbh/Lm30zcQi4AAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAASdSURBVFiF3ZhbbBRVHMZ/58xeSgNCqRegsamt1EhEXwjw4AMmJGpAEhNoVOItxgdFQ1C5qqQiKiVRHtQIGuKDXNItFJGSoFFYpIltExIj9EK7WxbTUi7BFqHbTndm/r60CWDp7MxsX/ge9/y/7/t/55ydOXPgDoLKtWDVQZnkDPGUgiUIs4DpQCFwBTgv0KLhpwE4UlmhrufSO2dhPtstBSrEOhRvAxOyoKSV4stIiC2rnlV9ueghJ2GqYrJUYAcw1Qf9H6V4fe0yVRu0Dx2ELCJqS0w2CsTwFwRgqgj7qqrlQxEJNLmBwmzdx0bgI4KvsBLFpqp9vB9IxC9xeGvFgmiMAkdg6foKdcAP2Vcj2w7IFDNDEv9bayz0Soay9ctVr1eir202lGED4xMEoIAQq/0QPa9M1UGZJCYXye7x6xfpQbjP63so5NVl+IXoGiQSIr14Lk1l0ynVmmmOw4WOHjrrGpln2a78/KjwJLDfS2+et5mCJW41kRDpFYvpnFnEAq0pBiJaU/xQEQveeoZEyGAgFz63wvt/RnjYrWTxXJoiYR4ZbSwaZvaiuTS6+ihmeW3NzwNghltB2XRKxxovn8EDufC5FX7CFLqKaqYFGR/G3Vl3NKLrlQBccytwHC6MOS70ZOHzb9YdDcNPmItuBR09dI413t5Nyk1DMfaEjAY/YZrcCuoamWdmODXa2OAQpw43Md9NQ5S7z63wHkZxzK3Espnw1SEebOsi7jicA4Ych3NtXcS/rmOmZZPnaiPEvbfmEZUxmZgHXcBkr1wPuGoMUrT6JdXvheR5ZSor1HWE773yPGKn1yDg86ApFpuAS364WeCSZNjsh+grzPDxfJUfbhZY5ef4DwE/rLbEZDfwQhCNG+HY9t7ta0tXaK2jUZEJplLRsIiybB0GCBlOxtLaUUoNREyzf3Z3d18N2CP8oGEmA38CJYFSABnzel/tF0/vuNbbNZgtR0TZSkiFtJxoS6VSge4A1lWoq8CL3DA7/iDScPjTg16CACglBlrKLHi5pKSkJFAYgHUVql6ErUE0Uqd/qT/TsDcVQEIZjlMUOAyAeS8bIYtj/Sjo7+vpOV797vEg/g44ttbJnISpfEJZ2mE5WRxCb2rCzmSO16zZnzH7/W9TkSFlGLWpVOpCTsIArHlOJQXe88Jp+WPXkfMd9Vd8WopAa9S2tyeTydMwHhfnMYkJLHOru9LT0nZg26JqHxYDIvIXodDJZDJ504vb84WGGwyLN00xFxrhaMHtaiyzv//onpV12WqKKAslCdG6ubi4uDUej1uj1eV8ZQA++LZ7ycQpM368jb40HNq89/SJnR1jaYiojMY5q7RudgyjLZFImG6+4xIGYMM3f+++q/D+/50Ous7EG47sfPXn29AGUKpTQ3s4P7+1ubl5yItnzrfZCCJ59muD6d7H8/ILikd+S1+7fPnYnpW/3VgnkEakI6R1y6Nz5iRqamp8P9nGbWUA3vn85Px7ih77XWkj7NiWffSHN75Ltfx6EbiKUgkD2p8/e7ajEpzx7CNnWLm16eNP9pgDr6yu3lVeWrqwvLy8iHGexDsC/wHqq7fSQTg4DwAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAARmSURBVFiF3ZhfbBRVFMZ/d2Z3y1aatoCAbVyxahON6AuJPPDQGIIakhojPihqJCIoxBDinxgJTUUSlVcjYTENYNo0UCiKRKrRdFUetJGEWAuE7rZLA+VPg22Fbdk/M8cHtkmtbWfmzu4L3+Pc833nfPfczD0zcAdBFVqwCSnLwdNAPfAIcA8wH7gODAJnBI5Z0LEZdbOQuQtmZjdSacIHwNtA2AVlTMHnQfh0HWqkEDUUxMweZI2CKDBPg/63wBtvotr91mH4IQui9iINCg6hZwRgnoLDUWS7IL4215eZvdAg8BH+O6yAHVHY5ldEC/mjdciPxjSwFazZgDqqQ9YqZB9SkYEE+kdrNgxb8MAm1LBXotYxy8CHFMcIQKUB7+kQPXcmf49cxd3rVxdjOVjk9R7y3Jn8hehoJFDK2Kp2YuvTDGwQMuvTDKw6TCwYZtxFmtIgPOW1Np1jVu8UEChl7OVB+pY8R50RIgKEjBCRJc9Tt3aQuEtDjnmmQsfMw04BTzbTFSrn0enWQhUsrTvA704acnsU8gQdM1VOAZHV1My2ft+z3F+IPFOhY2a+o2iIxX7W81jguqIJXa8E4IZTgJ3hisP6ZRd5/nFdUR46Zq46BQx8S99s6/1HSbrIM+uGTAfPZgS6nGI6X+GJzAjd062lh+mOvcZyF6kc80yFTmc6nQKy44Rbqniwv42YneECkLEzXEgcJNZcxUPWLeY4aSiIeS3M8wTwBTI3ABeBcq9cDxgNQ/WrqJQXkufO5EeMfV55XqCgyasR0Bw0LdgBXNPhusC1HOzUIWqZyY/nW3W4LrBVZ/wHnx9WUaQFeMmPxmTYWK2fRGo2G4ZRUiISTitVEhRROcsIAgRMO5szDFspNR5Kp1NLL10aaQNrgu/XTDlwGljiywWQMW6O7K96JjoauHjLLUdEWUpIBgz59VwymfT9yRtFVnD7NWrqq4h0zN/2VXdZa1JXIAcHfP3QANiIOimwy49G710/nPRhBECZtl3t2wzAFWgA57F+OtwwL18+seCdn/3kt8G2DCNREDONqBywFhdD6GRYKpv97u73j6RVynKOngEiGWWa7clk8kpBzABsRCWAd71wTpc1dwzMOXldM6UInC2xrD2JROIvKMKP8yhyCHjBKW4odObc/qrVBzVSjIvInwQCpxKJxH8u7oCGmBM25VR6ZUBKKmcKyKhU6puFW467FRRROZTExTB6IpHI2VgslpsuruCdAfjMvFRfYVV9PYO+dFbubP2jvKl3Ng0RlTWw+5Vh9NimeS4ej6ed8hbFDMCu4EBLefbe/00HfeHYb0cWrft+Bto4SvUZcD5YWnq2p6cn4yVnMY4ZAGNZ6/WQMbwibFdGJp6lzKGh4wu2/DQ5TmAMkd6AYZx5bNmyeFtbm/abrWidAWgMn1q++NbjvygxgzY569jCt77sLf3xKjCKUnETzr/Y39/bCHYx6ygYts/p+ni3So9vnnuwubamZmVtbW01Rd7EOwL/Ai1BeTIkgAbWAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAQMSURBVFiF3ZnLT1xlGIef78zAMFgCeGscLCGoLEy0myb6B9SIMTXW1IU1Rk3cGF16SYy3xMRUN8aVWkMaY0lDUbS6qbcwKjGmSmKwXKQzMBAoINICMgxnLufnoqWhCJzLzEDSX/Ju5rzved/nu39n4BqSKfULhWqAVuAh4E7gFuAGYA44DwwAXwGnDWap1PlLIqF6oXeEloXkwdJCR4Tqdrr2qyR0SGjOI8R6mxN6ZKcZEDJCrws5AUFWzRF6Tajkw94PzBtFQqy3V3cK5FAJemS9FYQObjdIXRFzxM0uCNUHqcsKyPMKcH3AWDfVAy8GCfQ94S7vIzNANEhCj1oGdvvdh4L0TCteQKpZpos4NuOILDbjfEacKBkPOaqB+wPU5k9Cn7qO+2qlNa8/tZEuqk9RTxvrJ9sB87trIV3q3hBkVSfV7QHmt+2AOe9aiK2xLWFspTzATPqtLcgCYAOVLk5ZFx8bQ8QlVdZg3HyuUpAF4F9XjyzTLs+nPORZ9FjPFQWBmXH1+JqRLZ9/QcpDnq0bpBQSOuY63qNa1kX1bThfLqhPVcp4mDNtfmsL0jPdrh4ZosS4nU7iZBkDsmQZo4M4Me5ghSoPeeJ+CwuyAOwCJoBav7E+tAA0GEzaT5Dvnrl8xDjmN86n2vyCBJYuXZFnynRqngl6ai4G6HCZYA4Hramoa6pQOxA4+XoVKJxobmx+zrKsSESK2sZEKiSTL1gVAOGQk8tblmOMyVTadvquycn5TiisxhcLUwv8ATQVRQEsWUvzB2IPfDQRnljxnF+mYEQqbOnnoVQqFfRyBoDBLABPsKZ1gkhIR+rfPuUHBMAYhbB0Wx6ebGpqaioKBsBgeoB3i3nHd9d929NRcyJVTBkhx2koyacdoTDQA9zjN3Y6NDXVeut9bWmTDty7DjgOHC26ZwAMJg88jpdD6BrlTC738k0vfV4MCFLWhEJdqVRquiQwAAaTBF7wE9Nec/z0L1U9cwFTSjAYKRQ+TCaTZy/VUGIJnQQedfMbqhwYOhB7sCNAioykPsLh3mQy+ffaB+WAudE29nBEkU138WWTTh9sePiDkXDC05FFMnmMErKs/sbGxsF4PJ7fyC8ctOjNZDD/TFqTT8UKsS/ZuLH0ft17p9xAJJOzcEaNZfU74dBQIpGwAUZGNr8qle1D9XjFePue3J7/nQ5+jMZ/fWb3099sEpbBmBELhiuqqwf7+/uzfnKWDWaU0apaq/aveqe+cfW32dDsbGts/9HF0OKVYSJYRjoXtqyBu/ftS3R2dgZe2cr6F0JvtPfevSt7fwopVJEnX3j+5mc//qH6+xlgAWMSIRh+bHT03JvglLOOkulM1Zm3bGNnOnZ1HG9pbt7f0tLSQJkb8ZrQf5kyepAtajIBAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAASoSURBVFiF3VhNbFRVFP7OffMY6EjnvYGMrW2atmijRNyUBJcsTGRFQkJTKwpuXBliSDQxGolVEo0rjAuBhLCRGFuL4AoXTauWaBtNTHHoD/NHImXoOH2vY9+Uzvs5blpSoO37m7rgW777feec794zb867wGMEqnXAYrG4XQhxgIgOAtgNoBHADgAlADMAbjDzD7ZtX00mkwu1zF0zM7quq47jvAfgOIBtHiQVAF8S0Weqquq1qKEmZkql0mEiOgsgEUA+R0Rvqqp6KWwdIoyYmUnTtJNE1IdgRgAgwczfaZr2ITOH2txQZnRdP8nMvQh/wsTMH+u6/kGoIEGFy63VFybGGnCI6LCqqt8HEQcqRNM0hZkzCN5aG4YXQuxSFEXzKwzUZsz8PjbHCACojuO8G0To+2SKxeJ2SZLuwtvrNygqlmU96fd/KOI3ixDiADwYIaJKLBYbk2W5HUADgIJpmlnDMPYxs5u+TpKklwEM+KrND3m5yIMeOJV4PJ6VZXk/gBYAWwC0yLK8Px6Pp4losRZ5HkaQ38xzboRYLDZGRM+vtUZEe2Kx2KhbDGbe7bewIGaeciMst9ZG621uMYjINc/DCGJmhwdOQ8h1ANjpgfMAgpj51wOn4LJ+x0OMsgfOAwhi5q4bwTTNrMt63kMetw15BL7NMPOYG2f59Xt9Hf31SqXyolsMInLN8zB8mxFCDLlxmHnb/Pz806ZpDgO4BaAK4JZpmsPlcvkZx3G2ekg17Lc23xPA7OzsE5FI5G8Acb9aH5ivVqtNDQ0Nhh+R75NJJpMLzHzBr84PiOi8XyNAwKlZ13XVtu1JIkoG0W8EZp6VJOnZ/21qVhRFI6ITQbRuIKITQYwAIT+s5ubmLgJ4NUyM1bBt+5vOzs63hBDRKPO2JaKozEyWLWQAiEiOaQnhENHilqUlY8/t23o/YK/ow5qJA/gTQGsoFwAMw9CPdHefnZmZuedVw0w2MfIRwb9M5vP5UHcAiURiHsDrWLU7QcDM/MXp01f8GAEAIpYgeJcFHGttbW0NZQYAEonECIDPw8T4aWho5PLAQD5ECJIcp6kmlxHMHNE0bQTAPr/au4XCnVe6us4bhhH4dB3AcYBzoU8GAIjIEkIcgbch9D4syzJ7e3sHwhgBc5Uk6VI+ny/UxAwAKIqSAfCOH01/X9/V30dHSwFTMgMTUds+k8lk/gI24eJc07Q+Zu5y401PTU2+1tPzbYAUi8w8jkjkj0wmM7t6oeZmyuXyTsMwpqPRqLpuNZWKcezo0a/y2aynkYWZLBCnWYhUS0vLxPDwsLUWz/ftjBvq6+v/SaVSbzQ2Nl7G2pvF586cueJmhJlMASdHQqSciDSZTqeXACCbXf9TqeYns4Lx8fGLzc3Nj0wHv1679tvbx4//uI5sEURZAUzLdXUTqVSq6ifnppnJ5XJbmXlKUZSWlWelUqnYdejQuYWFhfttwkAFzDcjQtx4Ye/edH9/f+A3W83bbAVtbW33hoaGuuvr638WQsiWZdmfnjo1sGxkHkRpCZjuyeVufgQ4ADCVy21WObXB4ODgJ4VCYfHC+Qtfd7S3v9TR0dGETeyIxwb/Abxf6DIUZxAeAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAS9SURBVFiF3VhNbFRVFP7Ond9OlBnApihJM1N0EqltQzoJLFxAQiKrruhCjXFh3GhcEGowGomiJEhYUJtUiTFCGEJsBX9CU2pQqzZB6WtLOgw0MNN5TUSggtNp6Tw6fe8dNyWp0Pa9d9/Mhm8593zfOd+9J/educAjBCq34MDAwOPBYHAHM7cQ0UYATwJYC+AOgL+J6LJpmj+EQqGz9fX1d8uZu2xmRkdHV8/Pz7/DzG8BqLJBKQLo8Hg8BzZt2jRVjhrKYmZwcHAnER0BsEaC/i8Rvd7c3HzabR3CDZmZSVGUvUTUBTkjALCGmb9RFOV9Zna1ua7MDA8P7wXwIdyfMAHYNzQ09J5bESkstFaXG40lYBLRzubm5m9lyFKFjIyMRAzDyEK+tVZC3u/3b2hsbMw7JUq1ma7r76IyRgBgdalUeluG6PhkFr4jt2Dv+pVFsaqqqsbpd8jrNEswGNwBG0aEEMVYLHYhHA7XEdE6Zr5ZKBTGc7ncZtM0rfihYrH4AoBTTmpz3GbM3GIpKkSxqalpPBKJbCWiWgB+IqqNRCJbGxoaMkIIzUqDiCzzPJTXKYGInrWKicViF4QQzy215vV6G6LR6J9WGsy80WltMhfAU1YB4XC4bqX1SCQSs9IgIss8D0LGzFobhaxzs76AJ2xXtAAZMzNWAcx802L9ho0807YrWoCMmVtWAYVCYXyl9ampKdVGnhU3ZCnImLlgFZDL5Tbrup5aak3X9ZSqqlusNIjIMs+DkLmaf7GKMU2zKpVKPZ3P5/uZeQJAiZkn8vl8fyqVesY0zaANjX6ntTmeANLp9GOapv0FIOyU6wAFn8+3vqmpadYJyfHJ1NfX32Xmr5zyHOJLp0YAyUEzEAjsAzApw7WBSb/f/7EMUcrMwni+S4ZrA7tkxn/A5R8rRVFOAHjJjcZiGIZxsrW19U0hRCDAXDVHFPAxk24IHwB4Pea8LoRJRJp/bm624fr1qW7AuM93ayYM4CKAqCsXADRNm9qze/eRycnJe3Y5zGQQQ/UK/n1MVVVXbwCJRKIA4BUs2h0ZMDMfP3bseydGAICIPRC8QQdejUajUVdmACCRSAwAOOhGQxkcHPj53DnVhQR5THO9azMAMDMzsxeA5Vi/FO7cvn2js6PjVzf5TcA0hMiWxcy2bdt0AC/DxhC6GLquz3/W2XlK0zT5NmUukcdzWlXVm2UxAwCJRCJLRG1OOD/29Z29NDp6RzIlM3AlYBifZ7PZS0AFHs4VRekC0GoVN6GqY3va2r6WSKEx8yi83qFsNvu/D7fjBw0beKNUKm33+/2rlwu4p2mz7e3tZ+wKMpMO4gwLka6trb3S39+vLxVX9pMBgN7e3pbq6urvltHn40ePnuw5c+baShrMNC9g5kiItOnxjGUymTmrvBUxAwA9PT0nampqHpoOLo6M/HFg//6+ZWgaiMYFcNUXCl1Jp9MlJzkr0WYAgFAo9Nr09PTzq1atqr3/W6FQ+OfTw4d/WhzHQBHM17xCXG5MJDLd3d3SN1vFTgYAksnklng8/psQwqfrunH40KEvFEW5BaAAoowHuPpiLnftA8CsZB1lQzKZ/Oj8+fPawU8OJuN1ddvj8fh6VHgTHwn8B/S71Ufd4vUbAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAATTSURBVFiF3VhPTBRXHP7e2xmBTYwgDXVdQ6m2hxrsyaweeoCkSXtQExOZ0JLSQ9NLmx5MbGya1P49NCRoQg9UG1MTA5RZEbegsYemVE1gMU1JBRZhF9dkccHGAkUXZmfe/HooJJTCzs6b5dB+yV7m/b7v9/veezvvNw/4H4EVWjASiWzNZrOvAjhCRHsBBACUA3gE4AGAUQDfA7iuadrjQuYumJm2trYyRVE+YIy9B6AkD0qGMfaVoihfHj16dK4QNRTEjK7rxwCcBbBdgv4HY+zturq6y17r4F7IRMR0XT8FQIecEQDYTkSXOjs7PyIiT5Pr80Kurq7+GMCn8L7CjDFWG4vFrHA4fENaRJa4vLV0LxrrwAZwTNO0bhmyVCHd3d2lpmkmIL+1cmHWNM09DQ0Ns26JUv8Z0zQ/xOYYAYAyRVHelyG6XplIJLLVMIwZ5Pf6lUUGwNNuzyHFbZblA9HRiKIomVAoNBgIBHZzznfYtj2dTqcno9HoASGEE99PRK8A6HJTm8w2O+IUoChK5tChQ5PBYLCGc14JYAvnvDIYDNYcPnw47vP5FguRZy1cmyGiF5xiQqHQoKqq1euNqaq6LxQKRZ00GGN73dYmszI7nQICgcDunAI7dz5biDxrIWOm3FGU8x1expfxVN4Vrei6JQBYcAqwbXs61zgRpfPI82feFS1DxsyMU0A6nZ7MNT41NZXMI0/OCVkPMmYGnQKi0egB0zTvrDeWzWbvDA4OHnTSYIw55lkL12YYYz85xQghSnp6ep5LpVJ9tm3fB5C1bft+KpXq6+3tfV4IUeykQUR9bmtzfWgS0WUALQC25YoTQpT09/fXrHr0zPIvH8wvLS25/r5xvTKapj0mom/d8lzifGNj4xO3JKlG07KszwA8lOHmgYemaX4hQ5Qys9yeH5fh5oHjMu0/4PHDStf1NgCve9FYDSFEx8mTJ9/lnBcVEZUYjBWpRMwSXAUAxWebFuc2Y2xxi2E82Tc1NRcGxArfq5ltAIYAVHlyAcAwjLmW06fPzs7OLuXLIWKCEZIKp5tjyWTS04WGpmnzAN7AqtmRBF27ejXixggAMEY+cNpjAW9WVVVVeTIDAJqm3SKiJi8ao8PDt24PDCQ9SDCfbQc9mwGAioqKUwAc2/r1MD83lw53dv7sJb8N2ILzREHM1NbWWrZtNyCPJnQ1hBDmpXC4yzAM+W1KlGU+3+VkMjldEDMAUF9fnwBwwg0n2t9/PTEx8UgyJREQKxLi60QiMQxswsW5rus6gDqnuOl0eqzlzJlOiRSLRPQbFOWXRCLxj4PbdW/mBMuy3iGil1VVLdsoJmsYTzra23vz1SRiFhjFifORysrKWF9fn7VeXMFXBgDOnTt3pLS09MoG+nStp6fj1s2bE7k0iJjJYd9jnI/YPt9YPB43nPJuihkAaG1tbSsvL/9XdzB+9+7AhfPnf9iAtgjGJjkwrvr9sZGRkaybnAXfZisoLi5+K5PJvOT3+ytXni0sLPz+XXv7j6vjCMiAaELhfPTF/fvj4XBY+s22aSsDAM3NzQeDweANzrkqhBAdFy9+Mzo6OgNgHozFfcD4a/fuTXzy94W5Z2yqGQBoamr6fNeuXSeGfh3qutJ16QIUJTY+Pv4AAG127v80/gIGr+iWe+FGsAAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAToSURBVFiF3VhdbFNlGH7ec05/F6IUE9GLIYgXXYpXJBBZE0xM9EausIl6ObzBGSHRdnEJ1p+RhnBBNF4YY/xJFigNaIwxLpFYB2WwMWCW0bG1W7eEdUBwQ0fb7fy83nQJjK3nnO90F/okvTnf+7zP+/Q75/ve7wP+R6BGJ4xGo+skSXqFmfcAaAHwFIANAO4CmCai64Zh/OT3+3+Nx+PzjdRumJmOjo71zNwB4B0APguUMjN/vri4mDh27NhcI2poiJloNLqXiL4EEBCg/8XMbx05cuS00zpkh3yKxWKHiOgLAH7BHD4iiuzatcvIZDJnnRTjyEw0Gv2QiD6C8xkmInqxtbVVy2QyvcJJRIm1V+ukkxwrwCCivYlE4gcRslAhBw4ceNzj8RQg9o2YYZaInk0kErN2iZKImtvt/gBrYwQA1gN4X4Roe2ai0eg6IroFa8uvKMo+n+9Ju/uQYleltiGaGnG73eVIJNIfDAa3yLK8Udf1mVwuN55MJneoqmrG91er1ZcBnLJVm51gAKjt7HXhdrvLnZ2d46FQaLcsy80A3LIsN4dCod2dnZ15l8tVaYTOcoh8M0GzgEgk0u/xeEIrjXm93m2RSOSiBZ0Wu4WJmHnaLCAYDG6pN97S0rK5ETrLIWJmg1mALMsbnYzX8ITlimoQMfOPWYCu6zMm4yULOn9brqgGETO3zAJyudx4vfFr164VzXIwc90/ZCWImOk3C0gmkzuq1Wp2pbFyuZxNpVI7zXIQkanOcoiY+d0sQFVVX1dX19ZsNpvWdX0SwKKu65NDQ0Ppw4cPP6dpmtcsBzOn7RZme9P0+XynK5XKZwAeqxenqqqvu7t79wOPNtV+VnDPMAzb5xvbM1NrMb6xy7OJr48ePXrfLkmo0SSijwHcFuFawG0i+lSEKGSm1p4fFOFawEGR9h9weLCKxWLdAN5wkuNBMPPxEydOvC1JksfD7Fsg8riYSdMlFwAosqFqkmQQUcW9sHB/282bcylAX+LbXgCWYT+AFwA84zAPVFWdO9PTM+WWpHcBQCeCAoCJICsMAGAQZGaAGZrLhcubNutbGUVF4rMjxWLR8ZE3Fou1AkjDwX0CM/OVwcHvJwqFomgKDfjO6e0MMpnMVDgc9gIIi+YoTU+fyw4NXXFQBpFh3BFaAJbD6/UeAmClrX8ElXK5dOnixT+c6BuAoUtSoSFm4vG4ZhjGm7DQhD5UhGGoAwMDp1RV1c2jVwHzIsny6WKxOOP4NVvC+fPnZ8Ph8F0Ar1rlFPL5X8bHxuo2pXXADIx4df3kjcnJSWANLs5jsdhJAK+Zxd2bmxv5racnKSBRYeY/oSiDhULhoY3b6dL8CDRN209EL8myvH7VGFW9f6Gv72erOZlJA3GeJWm4ubk5l06ntZXiGj4zANDe3r6nqanpx1Xyc/bq1eOjN26M1cvBTKoEY4IkadiQ5ZF8Pr9gprsmZgCgvb29u6mp6ZHuYKZUupDp7e1ZhVYB0bgEjLr8/tzw8PCiHc2Gv2ZLmJ+fb1MUpdXj8TQvPatWq3f6+/rOPBjHQBnMY4okXX9++/Z8KpUSXtnWbGYAYN++fTsDgUAvEbkMw9AvnDv3ValUugXgHojyMjD6+sTEWBwwGqG3pmYAoK2t7ZNAIPDe1OTUqSuXBr6FouRGR0enAfBaa/+n8S8PPeWMetb8+wAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAATISURBVFiF3VhNbBtFGH0z3vXGbqpSikQBKSIOHKgop0quYtMadSsqVfRCoQo9IjiAuAXJ4lB+D0Q5Ig4VQvxIVZREKQhRRNoiNi2VcBECUaUNjmM7VRPHcdP81HGc/ZmPSyKVNMnuzjoHeEfPe9/73s54dnaA/xFYowsmEont0Wj0iBDiGGNsD4BHAOwCMANgEsB1IvrOcZwfDcOoNtK7YWGOHj260zTNNBG9BSDiQVID8Ilt2x8bhjHXiB4aEubQoUPHGWOnATwoIb8D4LWLFy+eDdpHKKCeHT58+BSATwFEJWtEALzc2toqCoXC5SDNBAqj6/q7AN5H8BlmjLHnYrGYnc/nL0kXkRWuLK2+IDXWgWCMHb9w4cI3MmKpRlKp1AOKooxB7j/ihllN09rOnTs361fIZdwURXkHWxMEAHaapvm2jND3zCQSie2RSKQMb9uvLGq2bT/s9z2k+HWJRqNHiMg1iKZptXQ6fTUej8dUVd1tWdZUJpPJd3V1xev1ups+qijK8wAG/PTme5kJIY65cTRNq/X29uaTyWRKVdUWAGFVVVuSyWSqp6cn19TUtOTBytVnLXyHYYw95cZJp9NXt23b9vR6Y83NzXs7OzszHqz2+O1NZgN41I0Qj8djm423t7e3NsJnLWTC7HIjqKq6O8j4Ch7y3NEKZMLcdSNYljXlMl7y4LPguaMVyIQpuxEymUx+s/ErV64UPfhs+kDWg+8wRHTVjdPV1RWvVqvX1hurVqvXuru793uwcvVZC5nd7Gc3Tr1ej3R0dDwxNDRkWJY1DsC0LGvcMAzjxIkTT5qm2eTBx/Ddm19BKpVqVhTlFoAdfrU+MM85f+z8+fOLfkS+Z2bliPGFX50fMMY+9xsEkDxoapr2AYBpGa0HTIfD4Y9khFIfZ6Ojo/VYLDYJ4EUZvQteHxwc/E1GGOjDStf1MwBeCVJjDXqy2eybnHNNI4osM6apRMx2uAoASkhYNueCMbYUXl5e3DsxMdcPOKvioGF2ENGfjLHHg2UAhBBzpVu3TlumWfeqIWIOIxQVTpdHisVi4E9eXdeTAAwEuE8gIpqpVL6uLiwUZUvYwFdBb2eQz+dvtrW1NQF4VrbGUq32y+zMzB8B2mBMiIrUbrYWlmWdAuDlWH8fbMsqzUxPDwXxF4BwOB9rSBjDMGwhxEl4OITeCyKyKpXKgOM4jjt7wyImC4XOFovFqcDLbBWFQmE2FovNAHjBq+buwsIP1fn5TQ+lm4AIGGlynL6/x8fHgS24ONd1vQ/AS248yzRHJm7e7JWwWCKiv6Aov4+Njf3rxe37QsMNtm2/wTnXOec7N+KQEIvlcvl7rzWJmA1GOeJ8uKWl5YZhGPZ6vIbPDAAcOHDgWDgc/naD+jR7+3bP/Nzc6GY1iJjFIQqM82ERCo3kcrllN98tCQMABw8ePKOq6n2ng6Va7dfy5OTgBrIlMJbnQFaNRm8MDw+bfjwbvsxWwRh71XGcZCgUaln9zXGcynSp9NO9PAJqIBpVOL/+zL59uf7+fumdbctmBgASicT+SCRyCYBKRE6lVPqsVquVAcyDsVwIyHYUCqPvAaIRflsaBgCSyeSHmqZ1Lt5dHLhze/pLKMqNbDY7CYC22vs/jX8A/Nff8x41WYEAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAPjSURBVFiF3ZlNbxtVFIafe2cceyZxEitfqiMs1EUWSLDqggXskOiGSqCyoAj+AH8BChISAv5ABahCBaoGJziISAhWMR8LECBQUNo0cZpJpLQNVWMDTZxre+ayMIGQOp7J2DMFXuls5p57zvver7lzBv5HEBHETAMngVPAA8AxYAi4DVwHLgOfAJ8BdyLI3xVkgDeAHUAHsG3gdWDwXpBth9M0Rz6IiIN2G3gqfsp3QwBnAY9wQvbMA14immUfGC/TmYiD9mK89P/GaTqfkYPmAk/GKQKamzbsHvGzLZqHSWx4MwIR++21uISkCX78hrVtoO+oxGQIMScBy8/Jtu2dQqFQVEqta61rSqn16enpomVZ1QA5bODxENyOjPfxGVnbtrcrlcrPugXK5fK8ZVlBZvZCHGK+9yNSKBTmWgnZQz6fnwsg5rs4xFz3I6KUWmsnRinlBBCzcVRiYd64Cuhp56C1rvn4KCFE0idPDfDz+QfCHAC/+znUarWbPu03AuT5LTCjPxFGzKafw+zs7LV27TMzM06APG0HpFt4F5/1blnWTrlcnm+1X7a2tuZTqVTVLwZwPg4xzwcgoi3L2snn83NKKae555UzOTk5F1CIBp6LQ0wfUAlIKKxVgN6jEguzZ+7QXGpR4jzNK00syNA8CKKYlU1ivjUDnOkC8VZ2JiyhTj9TL3aSvAUu5XK5F6SUyaTWlhIimdBaNFyZADANr96Q0hNCVHuU2n5wY6My1fygAzoXMwD8BNzfYRyklJVcNvuWaZq7QftoLVyhcUypv1p0HKcbBYRHgCJgdBBDjwwNvTeQTjth+zfgQicE9rAOpIBHwwbo6+39ejiT+bEDDkJ43q0wR3MrnAW+DdPRNIwbY8PDX3SS3APPlXKlW2IawLMEuITuhxCiPjoy8pEQwvX3PgRa14RhFBzHudmNZbaHMs2KzRNBOwz29386kE63vZS2gdawmHLd/NW1tTWIpoKYB572c0r29Czel81+GCJ+VWs9j2n+sLKy8sv+hijEDAshlrTWh77FpRDb4+Pj55KmGejKorVoIHRJS7mQy+WuFIvFRiu/SGq7hmGccl3340Pi6+FM5tLgwMByuxhai7rEWxVSLniGsVgqlZRf3sgK1YlE4mK9Xr/rdmBb1jfZsbHPD+lWRYhrEpYStn1lYWGhdpScUVbdU1LKq57n5fYeGIZxK5fNvm0Yxl/LRMMOWi+bUl5+6MSJ0tTUVOiTLdJfCJZlPby7u/ul1joBuMdGR9/pte1N4FeEKBmw9Mzq6vIrzQL8vx+pVOpVIUS1v6//g4njxx+bmJgY5x7/h/lP4A+AJ7grnrOyCgAAAABJRU5ErkJggg==",anchor:[.5,1]}],this.options.labels||(this.options.labels={}),Object.keys(t.DefaultLabels).forEach((function(e){o.options.labels.hasOwnProperty(e)||(o.options.labels[e]=t.DefaultLabels[e])})),this.options.defaultStyles||(this.options.defaultStyles={}),Object.keys(t.DefaultStyles).forEach((function(n){if(e.defaultStyles.hasOwnProperty(n)){if("polyFillOpacity"===n&&(e.defaultStyles[n]<0||e.defaultStyles[n]>1))return yr.log("Wrong value ("+e.defaultStyles[n]+") for defaultStyles.polyFillOpactity. Must be between 0 and 1"),void(o.options.defaultStyles[n]=t.DefaultStyles[n]);if("strokeWidth"===n||"polyStrokeWidth"===n){var r=parseInt(e.defaultStyles[n],10);if(isNaN(r)||r<0)return yr.log("Wrong value ("+e.defaultStyles[n]+") for defaultStyles.strokeWidth. Must be a positive interger value."),void(o.options.defaultStyles[n]=t.DefaultStyles[n]);o.options.defaultStyles[n]=r}}else o.options.defaultStyles[n]=t.DefaultStyles[n]})),this.interactionCurrent=null,this.interactionSelectEdit=null,this.stylingOvl=null,this.popupOvl=null,this.layer=null,this.options.layer&&this.options.layer instanceof sr.a&&(this.layer=this.options.layer),this._isDesktop=this._detectSupport(),this.options.popup||(this.options.popup={display:!0,apply:null})},t.prototype._createEmptyLayer=function(){var e=new ir.b,t=new sr.a({source:new d.b({features:e})});t.gpResultLayerId="drawing",this.setLayer(t)},t.prototype.setLayer=function(e){var t=this;if(e)if(e instanceof sr.a){var o=this.getMap().getLayers();if(o){var n=!1;o.forEach((function(t){t===e&&(yr.trace("layer already in map. Not adding."),n=!0)})),n||this.getMap().addLayer(e),e.getSource().getFeatures().forEach((function(e){var t=e.getStyleFunction();if(t){var o=t(e,0);o&&0!==o.length&&e.setStyle(o[0])}})),this.layer=e,this.getMap().getControls().forEach((function(e){if(e instanceof Sn){var o=t.layer.gpLayerId;e._layers[o].title===o&&e.addLayer(t.layer,{title:t.options.layerDescription.title,description:t.options.layerDescription.description})}}))}}else yr.log("no valid layer given for hosting drawn features.");else this.layer=null},t.prototype._detectSupport=function(){var e=!0,t=window.navigator.userAgent.toLowerCase();return-1===t.indexOf("iphone")&&-1===t.indexOf("ipod")&&-1===t.indexOf("ipad")&&-1===t.indexOf("android")&&-1===t.indexOf("mobile")&&-1===t.indexOf("blackberry")&&-1===t.indexOf("tablet")&&-1===t.indexOf("phone")&&-1===t.indexOf("touch")||(e=!1),-1===t.indexOf("msie")&&-1===t.indexOf("trident")||(e=!0),e},t.prototype._initContainer=function(){var e=this._createMainContainerElement(),t=this._showDrawingContainer=this._createShowDrawingElement();e.appendChild(t);var o=this._createShowDrawingPictoElement();e.appendChild(o);var n=this._drawingPanel=this._createDrawingPanelElement(),r=this._drawingPanelHeader=this._createDrawingPanelHeaderElement();n.appendChild(r);for(var i=this._createDrawingToolsSections(),s=0;s<i.length;s++)n.appendChild(i[s]);return e.appendChild(n),e},t.prototype._drawEndFeature=function(e,t){var o=null;switch(t){case"Point":o=new Do.c({image:new Fo.a(this._getIconStyleOptions(this.options.markersList[0]))});break;case"LineString":o=new Do.c({stroke:new zo.a({color:this.options.defaultStyles.strokeColor,width:this.options.defaultStyles.strokeWidth})});break;case"Polygon":o=new Do.c({fill:new Bo.a({color:fr.hexToRgba(this.options.defaultStyles.polyFillColor,this.options.defaultStyles.polyFillOpacity)}),stroke:new zo.a({color:this.options.defaultStyles.polyStrokeColor,width:this.options.defaultStyles.polyStrokeWidth})})}if(e.setStyle(o),this._updateMeasure(e,t),this.options.popup.display){var n=this,r=function(t,o){if(n.getMap().removeOverlay(n.popupOvl),n.popupOvl=null,o&&t&&t.trim().length>0){var r=t.replace(/\n/g,"<br>");e.setProperties({description:r})}},i=null,s=!0,a=this.options.popup.function;a&&"function"==typeof a&&(i=a.call(n,{feature:e,geomType:t,closeFunc:function(){r(null,!1)},saveFunc:function(e){r(e,!0)}}))&&(s=!1,i.tabIndex=-1,i.onblur=function(){n.getMap().removeOverlay(n.popupOvl),n.popupOvl=null}),s&&(i=this._createLabelDiv({applyFunc:r,inputId:this._addUID("att-input"),placeholder:"Saisir une description...",measure:this.options.tools.measure?e.getProperties().measure:null,geomType:t})),this.popupOvl&&(this.getMap().removeOverlay(this.popupOvl),this.popupOvl=null),this.popupOvl=new c.a({element:i,positioning:"top-center"}),this.getMap().addOverlay(this.popupOvl);var l=e.getGeometry().getExtent();this.popupOvl.setPosition([(l[0]+l[2])/2,(l[1]+l[3])/2]),document.getElementById(this._addUID("att-input"))&&document.getElementById(this._addUID("att-input")).focus()}},t.prototype._createRemoveInteraction=function(){var e=this,t=new m.b({layers:[this.layer],style:!1});return t.on("select",(function(t){t&&t.selected&&0!==t.selected.length&&(e.layer.getSource().removeFeature(t.selected[0]),e.getMap().removeInteraction(e.interactionCurrent),e.interactionCurrent=e._createRemoveInteraction(),e.getMap().addInteraction(e.interactionCurrent))})),t},t.prototype._createStylingInteraction=function(){var e=this,t=new m.b({layers:[this.layer],style:!1});return t.on("select",(function(t){if(e.stylingOvl&&e.getMap().removeOverlay(e.stylingOvl),t&&t.selected&&0!==t.selected.length){var o=null,n=null,r=null,i=null,s={};if(t.selected[0].getGeometry()instanceof lr.a){var a=t.selected[0].getProperties().name;t.selected[0].getStyle().getText()&&a?(i="Text",t.selected[0].getStyle().getText().getStroke()&&t.selected[0].getStyle().getText().getStroke().getColor()&&(o=t.selected[0].getStyle().getText().getStroke().getColor(),Array.isArray(o)?(o="rgba("+o.join()+")",n=fr.rgbaToHex(o),s.strokeColor=n.hex,s.strokeOpacity=n.opacity):s.strokeColor=o),t.selected[0].getStyle().getText().getFill()&&t.selected[0].getStyle().getText().getFill().getColor()&&(o=t.selected[0].getStyle().getText().getFill().getColor(),Array.isArray(o)?(o="rgba("+o.join()+")",n=fr.rgbaToHex(o),s.fillColor=n.hex,s.fillOpacity=n.opacity):s.fillColor=o),s.strokeColor=s.hasOwnProperty("strokeColor")?s.strokeColor:e.options.defaultStyles.textStrokeColor,s.fillColor=s.hasOwnProperty("fillColor")?s.fillColor:e.options.defaultStyles.textFillColor):t.selected[0].getStyle()&&t.selected[0].getStyle().getImage()&&(i="Point",t.selected[0].getStyle().getImage().getSrc()?s.markerSrc=t.selected[0].getStyle().getImage().getSrc():s.markerSrc=e.options.markersList[0].src)}else t.selected[0].getGeometry()instanceof cr.a?(i="Line",t.selected[0].getStyle()&&t.selected[0].getStyle().getStroke()&&(t.selected[0].getStyle().getStroke().getWidth()&&(s.strokeWidth=t.selected[0].getStyle().getStroke().getWidth()),t.selected[0].getStyle().getStroke().getColor()&&(o=t.selected[0].getStyle().getStroke().getColor(),Array.isArray(o)?(o="rgba("+o.join()+")",n=fr.rgbaToHex(o),s.strokeColor=n.hex,s.fillOpacity=n.opacity):s.strokeColor=o)),s.strokeWidth=s.hasOwnProperty("strokeWidth")?s.strokeWidth:e.options.defaultStyles.strokeWidth,s.strokeColor=s.hasOwnProperty("strokeColor")?s.strokeColor:e.options.defaultStyles.strokeColor):t.selected[0].getGeometry()instanceof ur.b&&(i="Polygon",t.selected[0].getStyle()&&t.selected[0].getStyle().getStroke()&&(t.selected[0].getStyle().getStroke().getWidth()&&(s.strokeWidth=t.selected[0].getStyle().getStroke().getWidth()),t.selected[0].getStyle().getStroke().getColor()&&(o=t.selected[0].getStyle().getStroke().getColor(),Array.isArray(o)?(o="rgba("+o.join()+")",n=fr.rgbaToHex(o),s.strokeColor=n.hex,s.strokeOpacity=n.opacity):s.strokeColor=o)),t.selected[0].getStyle()&&t.selected[0].getStyle().getFill()&&t.selected[0].getStyle().getFill().getColor()&&(o=t.selected[0].getStyle().getFill().getColor(),Array.isArray(o)&&(o="rgba("+o.join()+")"),n=fr.rgbaToHex(o),s.fillColor=n.hex,s.fillOpacity=n.opacity),s.strokeWidth=s.hasOwnProperty("strokeWidth")?s.strokeWidth:e.options.defaultStyles.polyStrokeWidth,s.strokeColor=s.hasOwnProperty("strokeColor")?s.strokeColor:e.options.defaultStyles.polyStrokeColor,s.fillColor=s.hasOwnProperty("fillColor")?s.fillColor:e.options.defaultStyles.polyFillColor,s.fillOpacity=s.hasOwnProperty("fillOpacity")?s.fillOpacity:e.options.defaultStyles.polyFillOpacity);if(i){var l=e,u=e._createStylingDiv({geomType:i,initValues:s,applyFunc:function(e){if("cancel"!==e){var o="apply"!==e,n=document.getElementById(l._addUID("fillColor")),s=document.getElementById(l._addUID("fillOpacity")),a=document.getElementById(l._addUID("strokeColor")),c=document.getElementById(l._addUID("strokeWidth"));switch(i.toLowerCase()){case"text":o?(l.options.defaultStyles.textStrokeColor=a.value,l.options.defaultStyles.textFillColor=n.value):t.selected[0].setStyle(new Do.c({text:new Uo.a({font:"16px sans",textAlign:"left",text:t.selected[0].getStyle().getText().getText(),fill:new Bo.a({color:n.value}),stroke:new zo.a({color:a.value,width:3})})}));break;case"point":var u=l._getsMarkersOptionsFromSrc(document.querySelector("input[name='marker']:checked").value);if(o){if(l.options.markersList.length>1){var d=l.options.markersList.findIndex((function(e){return e===u}));d>0&&(l.options.markersList.splice(d,1),l.options.markersList.splice(0,0,u))}}else t.selected[0].setStyle(new Do.c({image:new Fo.a(l._getIconStyleOptions(u))}));break;case"line":o?(l.options.defaultStyles.strokeColor=a.value,l.options.defaultStyles.strokeWidth=parseInt(c.value,10)):t.selected[0].setStyle(new Do.c({stroke:new zo.a({width:parseInt(c.value,10),color:a.value})}));break;case"polygon":var h=parseInt(s.value,10)/10;o?(l.options.defaultStyles.polyStrokeColor=a.value,l.options.defaultStyles.polyFillColor=n.value,l.options.defaultStyles.polyFillOpacity=h,l.options.defaultStyles.polyStrokeWidth=parseInt(c.value,10)):t.selected[0].setStyle(new Do.c({stroke:new zo.a({width:parseInt(c.value,10),color:a.value}),fill:new Bo.a({color:fr.hexToRgba(n.value,h)})}))}o||l.getMap().removeOverlay(r)}else l.getMap().removeOverlay(r)}});r=new c.a({element:u,positioning:"top-center"}),e.getMap().addOverlay(r),r.setPosition(t.mapBrowserEvent.coordinate),e.stylingOvl=r,e.getMap().removeInteraction(e.interactionCurrent),e.interactionCurrent=e._createStylingInteraction(),e.getMap().addInteraction(e.interactionCurrent)}else yr.log("Unhandled geometry type for styling.")}})),t},t.prototype._createLabelInteraction=function(){var e=this,t=new m.b({layers:[this.layer],style:!1});return t.on("select",(function(t){if(e.labelOvl&&e.getMap().removeOverlay(e.labelOvl),t&&t.selected&&0!==t.selected.length){var o=null,n=null,r=null,i=null;if(t.selected[0].getGeometry()instanceof lr.a){var s=t.selected[0].getProperties().name;t.selected[0].getStyle()&&t.selected[0].getStyle().getText()&&s?n="Text":t.selected[0].getStyle()&&t.selected[0].getStyle().getImage()&&(n="Point")}else t.selected[0].getGeometry()instanceof cr.a?n="Line":t.selected[0].getGeometry()instanceof ur.b&&(n="Polygon");if(n){if("Text"===n)r=t.selected[0].getStyle().getText().getText();else{var a=t.selected[0].getProperties();a&&a.hasOwnProperty("description")&&(r=a.description),a&&a.hasOwnProperty("measure")&&(i=a.measure)}var l=e,u=e._createLabelDiv({applyFunc:function(e,r){if(l.getMap().removeOverlay(o),r){var i=t.selected[0];if("Text"===n){var s=i.getStyle();return s.getText().setText(e),i.setProperties({name:e}),void i.setStyle(s)}var a=e.replace(/\n/g,"<br>");i.setProperties({description:a})}},inputId:e._addUID("label-input"),placeholder:"Text"===n?"Saisir un label...":"Saisir une description...",text:r,measure:e.options.tools.measure?i:null,geomType:n});o=new c.a({element:u,positioning:"top-center"}),e.getMap().addOverlay(o),o.setPosition(t.mapBrowserEvent.coordinate),document.getElementById(e._addUID("label-input")).focus(),e.labelOvl=o,e.getMap().removeInteraction(e.interactionCurrent),e.interactionCurrent=e._createLabelInteraction(),e.getMap().addInteraction(e.interactionCurrent)}else yr.log("Unhandled geometry type for styling.")}})),t},t.prototype._updateMeasure=function(e,t){yr.log(e);var o=null,n=this.getMap().getView().getProjection();function r(e,t){t=t||2;var o=Math.pow(10,t);return Math.round(e*o)/o}var i=t||e.getProperties().type;switch(i){case"Point":var s=e.getGeometry().getCoordinates(),l=Object(a.E)(s,n,"EPSG:4326");o="lon : ",o+=r(l[0],4)+"Â°",o+=" / ",o+="lat : ",o+=r(l[1],4)+"Â°";break;case"LineString":for(var c=0,u=e.getGeometry().getCoordinates(),d=0,h=u.length-1;d<h;++d){var p=Object(a.E)(u[d],n,"EPSG:4326"),f=Object(a.E)(u[d+1],n,"EPSG:4326");c+=Object(pr.c)(p,f)}o=c>1e3?r(c/1e3,3)+" km":r(c,3)+" m";break;case"Polygon":var m=0,g=e.getGeometry().clone(),y=g.getLinearRing(0).getCoordinates();m=Math.abs(Object(pr.b)(new ur.b([y])));var v=g.getLinearRings();if(v.length>1)for(var _=1;_<v.length;_++){var b=v[_].getCoordinates();m-=Math.abs(Object(pr.b)(new ur.b([b])))}o=m>1e6?r(m/1e6,3)+" km^2":r(m,2)+" m^2"}e.setProperties({measure:o,type:i})},t.prototype._handleToolClick=function(e,t,o){var n=this,r=o.getMap();if(r){switch(In.unset(r,{current:"Drawing"}),o.interactionCurrent&&(r.removeInteraction(o.interactionCurrent),o.interactionCurrent=null),o.interactionSelectEdit&&(r.removeInteraction(o.interactionSelectEdit),o.interactionSelectEdit=null),o.popupOvl&&(o.getMap().removeOverlay(o.popupOvl),o.popupOvl=null),this.layer||this._createEmptyLayer(),t){case this._addUID("drawing-tool-point"):o.dtOptions.points.active&&(o.interactionCurrent=new y.d({stopClick:!0,features:o.layer.getSource().getFeaturesCollection(),style:new Do.c({image:new Fo.a(this._getIconStyleOptions(this.options.markersList[0]))}),type:"Point"}),o.interactionCurrent.on("drawend",(function(e){o._drawEndFeature(e.feature,"Point")}),o));break;case this._addUID("drawing-tool-line"):o.dtOptions.lines.active&&(o.interactionCurrent=new y.d({stopClick:!0,features:o.layer.getSource().getFeaturesCollection(),style:new Do.c({image:new ar.a({radius:this.options.cursorStyle.radius,stroke:new zo.a({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Bo.a({color:this.options.cursorStyle.fillColor})}),stroke:new zo.a({color:this.options.defaultStyles.strokeColor,width:this.options.defaultStyles.strokeWidth})}),type:"LineString"}),o.interactionCurrent.on("drawend",(function(e){o._drawEndFeature(e.feature,"LineString")}),o));break;case this._addUID("drawing-tool-polygon"):o.dtOptions.polygons.active&&(o.interactionCurrent=new y.d({stopClick:!0,features:o.layer.getSource().getFeaturesCollection(),style:new Do.c({image:new ar.a({radius:this.options.cursorStyle.radius,stroke:new zo.a({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Bo.a({color:this.options.cursorStyle.fillColor})}),stroke:new zo.a({color:this.options.defaultStyles.polyStrokeColor,width:this.options.defaultStyles.polyStrokeWidth}),fill:new Bo.a({color:fr.hexToRgba(this.options.defaultStyles.polyFillColor,this.options.defaultStyles.polyFillOpacity)})}),type:"Polygon"}),o.interactionCurrent.on("drawend",(function(e){o._drawEndFeature(e.feature,"Polygon")}),o));break;case this._addUID("drawing-tool-holes"):o.dtOptions.holes.active&&(o.interactionSelectEdit=new m.b({stopClick:!0,condition:hr.o,layers:[this.layer]}),o.interactionSelectEdit.setProperties({name:"Drawing",source:o}),r.addInteraction(o.interactionSelectEdit),o.interactionCurrent=new y.d({stopClick:!0,features:this.interactionSelectEdit.getFeatures(),style:new Do.c({image:new ar.a({radius:this.options.cursorStyle.radius,stroke:new zo.a({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Bo.a({color:this.options.cursorStyle.fillColor})}),stroke:new zo.a({color:this.options.defaultStyles.polyStrokeColor,width:this.options.defaultStyles.polyStrokeWidth}),fill:new Bo.a({color:fr.hexToRgba(this.options.defaultStyles.polyFillColor,this.options.defaultStyles.polyFillOpacity)})}),type:"Polygon"}),o.interactionCurrent.on("drawstart",(function(e){}),o),o.interactionCurrent.on("drawend",(function(e){var t=o.interactionSelectEdit.getFeatures();if(t.getLength()){for(var n=t.item(0),r=e.feature.getGeometry().getCoordinates()[0],i=!0,s=0;s<r.length;s++)if(!n.getGeometry().intersectsCoordinate(r[s])){i=!1;break}if(!i)return;n.getGeometry().appendLinearRing(new dr.a(r)),e.feature=n,o._drawEndFeature(e.feature,"Polygon")}}),o));break;case this._addUID("drawing-tool-text"):o.dtOptions.text.active&&(o.interactionCurrent=new y.d({stopClick:!0,features:o.layer.getSource().getFeaturesCollection(),style:new Do.c({image:new ar.a({radius:this.options.cursorStyle.radius,stroke:new zo.a({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Bo.a({color:this.options.cursorStyle.fillColor})})}),type:"Point"}),o.interactionCurrent.on("drawend",(function(e){var t=null,r=n._createLabelDiv({applyFunc:function(n,r){o.getMap().removeOverlay(t),r?(e.feature.setProperties({name:n}),e.feature.setStyle(new Do.c({image:new Fo.a(o._getIconStyleOptions(o.options.defaultStyles.textIcon1x1)),text:new Uo.a({textAlign:"left",font:"16px sans",text:n,fill:new Bo.a({color:o.options.defaultStyles.textFillColor}),stroke:new zo.a({color:o.options.defaultStyles.textStrokeColor,width:3})})}))):o.layer.getSource().removeFeature(e.feature)},inputId:o._addUID("label-input"),geomType:"Text",placeholder:"Saisir un label..."});t=new c.a({element:r,positioning:"top-center"}),o.getMap().addOverlay(t),t.setPosition(e.feature.getGeometry().getCoordinates()),document.getElementById(n._addUID("label-input")).focus()})));break;case this._addUID("drawing-tool-edit"):o.dtOptions.edit.active&&(o.interactionSelectEdit=new m.b({condition:hr.r,layers:[this.layer]}),o.interactionSelectEdit.setProperties({name:"Drawing",source:o}),r.addInteraction(o.interactionSelectEdit),o.interactionCurrent=new g.b({stopClick:!0,features:this.interactionSelectEdit.getFeatures(),style:new Do.c({image:new ar.a({radius:this.options.cursorStyle.radius,stroke:new zo.a({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Bo.a({color:this.options.cursorStyle.fillColor})})})}),o.interactionCurrent.on("modifyend",(function(e){var t=e.features.item(0);o._updateMeasure(t)})));break;case this._addUID("drawing-tool-display"):o.dtOptions.display.active&&(o.interactionCurrent=this._createStylingInteraction());break;case this._addUID("drawing-tool-tooltip"):o.dtOptions.tooltip.active&&(o.interactionCurrent=this._createLabelInteraction());break;case this._addUID("drawing-tool-remove"):o.dtOptions.remove.active&&(o.interactionCurrent=o._createRemoveInteraction());break;default:yr.trace("unhandled tool type")}o.interactionCurrent&&(o.interactionCurrent.setProperties({name:"Drawing",source:this}),r.addInteraction(o.interactionCurrent)),yr.log("interactions",r.getInteractions())}else yr.trace("Drawing control not attached to any map.")},t.prototype.onShowDrawingClick=function(){var e=this.getMap();for(var t in In.unset(e),this.collapsed=this._showDrawingContainer.checked,this.dispatchEvent("change:collapsed"),this.dtOptions)if(this.dtOptions.hasOwnProperty(t)&&this.dtOptions[t].active){var o=this._addUID("drawing-tool-"+this.dtOptions[t].id);document.getElementById(o).className="drawing-tool",this.dtOptions[t].active=!1}},t.prototype.onExportFeatureClick=function(){var e=this.exportFeatures();if(e){var t=document.createElement("a");if(t.setAttribute("href","data:application/vnd.google-earth.kml+xml;charset=utf-8,"+encodeURIComponent(e)),t.setAttribute("download",this.getExportName()+".kml"),document.createEvent){var o=document.createEvent("MouseEvents");o.initEvent("click",!0,!0),t.dispatchEvent(o)}else t.click()}},t}(mn.a),_r=vr;window.ol&&window.ol.control&&(window.ol.control.Drawing=vr);var br=o("./node_modules/ol/format/GeoJSON.js"),wr=Mo.a.getLogger("LocationSelectorDOM"),Er={_addUID:function(e){return this._uid?e+"-"+this._uid:e},_createMainContainerElement:function(){var e=document.createElement("div");return e.className=this._addUID("GPlocationPoint"),e.className+=" GPwidget",e},_createLocationPointElement:function(e,t){var o=document.createElement("div");return o.id=this._addUID("GPlocationPoint_"+e),o.className=t?"GPflexInput GPlocationStageFlexInput":"GPflexInput GPlocationStageFlexInputHidden",o.style.cssText="",o},_createLocationPointLabelElement:function(e,t){var o=this,n=document.createElement("label");return n.id=this._addUID("GPlocationOriginLabel_"+e),n.htmlFor=this._addUID("GPlocationOrigin_"+e),n.innerHTML=t,n.addEventListener("click",(function(e){for(var t=yn.index(this.id),n=document.getElementsByClassName(o._addUID("GPlocationPoint")),r=0;r<n.length;r++){var i=n[r].childNodes[0].id,s=yn.index(i);document.getElementById(o._addUID("GPlocationPoint_"+s)).style.cssText=""}document.getElementById(o._addUID("GPlocationOriginCoords_"+t)).value="",document.getElementById(o._addUID("GPlocationOrigin_"+t)).value="",document.getElementById(o._addUID("GPlocationPoint_"+t)).style.cssText="",document.getElementById(o._addUID("GPlocationOriginPointer_"+t)).checked=!1,document.getElementById(o._addUID("GPlocationOrigin_"+t)).className="GPlocationOriginVisible",document.getElementById(o._addUID("GPlocationOriginCoords_"+t)).className="GPlocationOriginHidden",document.getElementById(o._addUID("GPlocationStageRemove_"+t))&&(document.getElementById(o._addUID("GPlocationStageRemove_"+t)).className="GPlocationStageRemove"),document.getElementById(o._addUID("GPlocationStageAdd"))&&(document.getElementById(o._addUID("GPlocationStageAdd")).className=""),o.onLocationClearPointClick(e)})),n},_createLocationAutoCompleteteInputElement:function(e){var t=this,o=document.createElement("input");return o.id=this._addUID("GPlocationOrigin_"+e),o.className="GPlocationOriginVisible",o.type="text",o.placeholder="Saisir une adresse",o.autocomplete="off",o.addEventListener("keyup",(function(e){var o=e.which||e.keyCode;if(13!==o&&10!==o&&38!==o&&40!==o){var n=yn.index(this.id);document.getElementById(t._addUID("GPlocationOrigin_"+n)).value.length>2?document.getElementById(t._addUID("GPlocationAutoCompleteList_"+n)).style.display="block":document.getElementById(t._addUID("GPlocationAutoCompleteList_"+n)).style.display="none",t.onAutoCompleteSearchText(e)}})),o.addEventListener("keydown",(function(o){var n=o.which||o.keyCode,r=document.getElementById(t._addUID("GPlocationAutoCompleteList_"+e));if(r){var i=r.getElementsByClassName("GPautoCompleteProposal current"),s=r.getElementsByClassName("GPautoCompleteProposal"),a=s.length;if(a){var l=null;if(!i.length)return(l=s[0]).className="GPautoCompleteProposal current",l.style.color="#000000",void(l.style["background-color"]="#CEDBEF");l=i[0];var c=parseInt(yn.index(l.id),10),u=c===a-1?s[0]:s[c+1],d=0===c?s[a-1]:s[c-1];switch(l.style["background-color"]="",l.style.color="",d.style["background-color"]="",d.style.color="",u.style["background-color"]="",u.style.color="",n){case 38:wr.log("arrow up"),l.className="GPautoCompleteProposal",d.className="GPautoCompleteProposal current",d.style.color="#000000",d.style["background-color"]="#CEDBEF";break;case 40:wr.log("arrow down"),l.className="GPautoCompleteProposal",u.className="GPautoCompleteProposal current",u.style.color="#000000",u.style["background-color"]="#CEDBEF";break;case 13:wr.log("enter"),l.click(o)}l.focus()}}})),o},_createLocationCoordinateInputElement:function(e){var t=this,o=document.createElement("input");return o.id=this._addUID("GPlocationOriginCoords_"+e),o.className="GPlocationOriginHidden",o.type="text",o.disabled=!1,o.addEventListener("click",(function(){var e=yn.index(this.id);document.getElementById(t._addUID("GPlocationOriginLabel_"+e)).click()})),o},_createLocationPointerShowInputElement:function(e){var t=document.createElement("input");return t.id=this._addUID("GPlocationOriginPointer_"+e),t.type="checkbox",t},_createLocationPointerInputElement:function(e){var t=this,o=document.createElement("label");return o.id=this._addUID("GPlocationOriginPointerImg_"+e),o.htmlFor=this._addUID("GPlocationOriginPointer_"+e),o.className="GPlocationOriginPointerImg",o.title="Pointer un lieu sur la carte",o.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation();var o,n,r,i=yn.index(this.id),s=document.getElementsByClassName(t._addUID("GPlocationPoint"));for(o=0;o<s.length;o++)n=s[o].childNodes[0].id,i!==(r=yn.index(n))&&(document.getElementById(t._addUID("GPlocationOriginPointer_"+r)).checked=!1,"Pointer un lieu sur la carte"===document.getElementById(t._addUID("GPlocationOriginCoords_"+r)).value&&(document.getElementById(t._addUID("GPlocationOriginCoords_"+r)).value="",document.getElementById(t._addUID("GPlocationOrigin_"+r)).className="GPlocationOriginVisible",document.getElementById(t._addUID("GPlocationOriginCoords_"+r)).className="GPlocationOriginHidden"));if(document.getElementById(t._addUID("GPlocationOriginPointer_"+i)).checked){for(document.getElementById(t._addUID("GPlocationOriginCoords_"+i)).value="",o=0;o<s.length;o++)n=s[o].childNodes[0].id,r=yn.index(n),document.getElementById(t._addUID("GPlocationPoint_"+r)).style.cssText="";document.getElementById(t._addUID("GPlocationStageRemove_"+i))&&(document.getElementById(t._addUID("GPlocationStageRemove_"+i)).className="GPlocationStageRemove"),document.getElementById(t._addUID("GPlocationStageAdd"))&&(document.getElementById(t._addUID("GPlocationStageAdd")).className=""),document.getElementById(t._addUID("GPlocationOriginPointer_"+i)).checked=!1,document.getElementById(t._addUID("GPlocationOrigin_"+i)).className="GPlocationOriginVisible",document.getElementById(t._addUID("GPlocationOriginCoords_"+i)).className="GPlocationOriginHidden"}else{for(document.getElementById(t._addUID("GPlocationOriginCoords_"+i)).value="Pointer un lieu sur la carte",o=0;o<s.length;o++)n=s[o].childNodes[0].id,i===(r=yn.index(n))?document.getElementById(t._addUID("GPlocationPoint_"+r)).style.cssText="":document.getElementById(t._addUID("GPlocationPoint_"+r)).style.display="none";document.getElementById(t._addUID("GPlocationStageRemove_"+i))&&(document.getElementById(t._addUID("GPlocationStageRemove_"+i)).className="GPlocationOriginHidden"),document.getElementById(t._addUID("GPlocationStageAdd"))&&(document.getElementById(t._addUID("GPlocationStageAdd")).className="GPlocationOriginHidden"),document.getElementById(t._addUID("GPlocationOriginPointer_"+i)).checked=!0,document.getElementById(t._addUID("GPlocationOrigin_"+i)).className="GPlocationOriginHidden",document.getElementById(t._addUID("GPlocationOriginCoords_"+i)).className="GPlocationOriginVisible",document.getElementById(t._addUID("GPlocationOriginCoords_"+i)).disabled=!0}t.onActivateMapPointClick(e)})),o},_createLocationRemovePointElement:function(e){var t=this,o=document.createElement("div");return o.id=this._addUID("GPlocationStageRemove_"+e),o.className="GPlocationStageRemove",o.title="Supprimer l'Ã©tape",o.addEventListener("click",(function(o){var n=document.getElementsByClassName(t._addUID("GPlocationPoint")),r=n.length-1,i=n[0].childNodes[0].id,s=n[r].childNodes[0].id,a=yn.index(i),l=yn.index(s);if(e!==a&&e!==l){var c=yn.index(this.id);document.getElementById(t._addUID("GPlocationPoint_"+c)).className="GPflexInput GPlocationStageFlexInputHidden",document.getElementById(t._addUID("GPlocationOrigin_"+c)).value="",document.getElementById(t._addUID("GPlocationOrigin_"+c)).className="GPlocationOriginVisible",document.getElementById(t._addUID("GPlocationOriginCoords_"+c)).value="",document.getElementById(t._addUID("GPlocationOriginCoords_"+c)).className="GPlocationOriginHidden",document.getElementById(t._addUID("GPlocationStageAdd")).style.display="",t.onLocationRemovePointClick(o)}})),o},_createLocationAddPointElement:function(){var e=this,t=document.createElement("div");return t.id=this._addUID("GPlocationStageAdd"),t.title="Ajouter une Ã©tape",t.addEventListener("click",(function(t){for(var o=1,n=0,r=document.getElementsByClassName(e._addUID("GPlocationPoint")),i=1;i<r.length-1;i++){var s=r[i].childNodes[0].id,a=yn.index(s);document.getElementById(e._addUID("GPlocationPoint_"+a))&&("GPflexInput GPlocationStageFlexInputHidden"===document.getElementById(e._addUID("GPlocationPoint_"+a)).className?1===o&&(o=a):n++)}o<r.length&&(document.getElementById(e._addUID("GPlocationPoint_"+o)).className="GPflexInput GPlocationStageFlexInput"),4===n&&(document.getElementById(e._addUID("GPlocationStageAdd")).style.display="none"),e.onLocationAddPointClick(t)})),t},_createLocationAutoCompleteResultElement:function(e){var t=this,o=document.createElement("div");return o.id=this._addUID("GPlocationAutoCompleteList_"+e),o.className="GPadvancedAutoCompleteList",o.addEventListener?o.addEventListener("click",(function(o){t.onAutoCompletedResultsItemClick(o),document.getElementById(t._addUID("GPlocationAutoCompleteList_"+e)).style.display="none"}),!1):o.attachEvent&&o.attachEvent("onclick",(function(o){t.onAutoCompletedResultsItemClick(o),document.getElementById(t._addUID("GPlocationAutoCompleteList_"+e)).style.display="none"})),o},_createLocationAutoCompletedLocationElement:function(e,t,o){var n=document.getElementById(this._addUID("GPlocationAutoCompleteList_"+e)),r=document.createElement("div");r.id=this._addUID("AutoCompletedLocation_"+o),r.className="GPautoCompleteProposal",r.innerHTML=t.fullText,n.appendChild(r)},GPdisplayCoordinate:function(e){for(var t=document.getElementsByClassName(this._addUID("GPlocationPoint")),o=0;o<t.length;o++){var n=t[o].childNodes[0].id,r=yn.index(n);if(document.getElementById(this._addUID("GPlocationOriginPointer_"+r)).checked){document.getElementById(this._addUID("GPlocationOriginCoords_"+r)).value=e,document.getElementById(this._addUID("GPlocationOriginCoords_"+r)).disabled=!1;for(var i=0;i<t.length;i++){n=t[i].childNodes[0].id;var s=yn.index(n);document.getElementById(this._addUID("GPlocationPoint_"+s)).style.cssText="",document.getElementById(this._addUID("GPlocationStageRemove_"+s))&&(document.getElementById(this._addUID("GPlocationStageRemove_"+s)).className="GPlocationStageRemove")}return document.getElementById(this._addUID("GPlocationOriginPointer_"+r)).checked=!1,void(document.getElementById(this._addUID("GPlocationStageAdd"))&&(document.getElementById(this._addUID("GPlocationStageAdd")).className=""))}}}},Or=Mo.a.getLogger("locationselector"),Sr=function(e){function t(o){if(o=o||{},!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.initialize(o),this._container=this._initContainer(),o.element&&o.element.appendChild&&(o.element.appendChild(this._container),this._container=o.element),e.call(this,{element:this._container,target:o.target,render:o.render})}return e&&(t.__proto__=e),t.prototype=Object.create(e.prototype,{}),Wo.assign(t.prototype,Er),t.prototype.constructor=t,t.prototype.initialize=function(e){this.options={tag:{id:1,groupId:null,label:">",display:!0,addOption:!1,removeOption:!1},displayInfo:!0,autocompleteOptions:{}},Wo.mergeParams(this.options,e),this._uid=this.options.tag.groupId||yn.generate(),this._map=null,this._inputsContainer=null,this._inputLabelContainer=null,this._inputAutoCompleteContainer=null,this._inputShowPointerContainer=null,this._inputShowPointer=null,this._inputCoordinateContainer=null,this._addPointElement=null,this._removePointElement=null,this._coordinate=null,this._suggestedContainer=null,this._suggestedLocations=[],this._currentLocation=null,this._initMarker(),this._resources={},this._noRightManagement=!1,this._checkRightsManagement(),this.listenerKey=null},t.prototype._initMarker=function(){if(this._marker=null,this._markerUrl="",this._markerOffset=[0,0],this.options.tag.markerOpts&&this.options.tag.markerOpts.url){this._markerUrl=this.options.tag.markerOpts.url;var e=this.options.tag.markerOpts.offset;e&&(Array.isArray(e)&&2===e.length?this._markerOffset=e:Or.log("markerOpts.offset should be an array. e.g. : [0,0]"))}else this._markerUrl=An.lightOrange,this._markerOffset=An.defaultOffset},t.prototype.getCoordinate=function(){return this._coordinate},t.prototype.setCoordinate=function(e){var t=this.getMap().getView().getProjection();this._setCoordinate(e,t),this._setMarker([e[0],e[1]],null,!1)},t.prototype.clear=function(){this._clearResults(),this._inputLabelContainer.click()},t.prototype._checkRightsManagement=function(){var e=this.options.autocompleteOptions.filterOptions,t=e?e.type:[];t&&0!==t.length||(t=["PositionOfInterest","StreetAddress"]);var o=Rn({key:this.options.apiKey,resources:t,services:["AutoCompletion"]});o?(this.options.apiKey||(this.options.apiKey=o.key),Wo.assign(this._resources,o)):this._noRightManagement=!0},t.prototype._initContainer=function(){var e=this,t=this.options.tag.id,o=this._createMainContainerElement(),n=this._inputsContainer=this._createLocationPointElement(t,this.options.tag.display);o.appendChild(n);var r=this._inputLabelContainer=this._createLocationPointLabelElement(t,this.options.tag.label);n.appendChild(r);var i=this._inputAutoCompleteContainer=this._createLocationAutoCompleteteInputElement(t);i.addEventListener?i.addEventListener("click",(function(){return e.onAutoCompleteInputClick()})):i.attachEvent&&i.attachEvent("onclick",(function(){return e.onAutoCompleteInputClick()})),n.appendChild(i);var s=this._inputCoordinateContainer=this._createLocationCoordinateInputElement(t);n.appendChild(s);var a=this._inputShowPointerContainer=this._createLocationPointerShowInputElement(t);n.appendChild(a);var l=this._inputShowPointer=this._createLocationPointerInputElement(t);if(n.appendChild(l),this.options.tag.addOption){var c=this._addPointElement=this._createLocationAddPointElement();n.appendChild(c)}if(this.options.tag.removeOption){var u=this._removePointElement=this._createLocationRemovePointElement(t);n.appendChild(u)}var d=this._suggestedContainer=this._createLocationAutoCompleteResultElement(t);return o.appendChild(d),o},t.prototype.onAutoCompleteInputClick=function(){this._inputAutoCompleteContainer&&this._inputAutoCompleteContainer.value.length>2&&this._displaySuggestedLocation()},t.prototype.onAutoCompleteSearchText=function(e){var t=this,o=e.target.value;if(o)if(this._noRightManagement)Or.log("no rights for this service !?");else if(this._currentLocation=o,o.length<3)this._clearSuggestedLocation();else{var n=this;this._requestAutoComplete({text:o,maximumResponses:5,onSuccess:function(e){if(e){var t=e.suggestedLocations;n._fillAutoCompletedLocationListContainer(t)}},onFailure:function(e){n._clearSuggestedLocation(),Or.log(e.message)}});var r=this.getMap();r.on("click",(function(){return t._hideSuggestedLocation()})),r.on("pointerdrag",(function(){return t._hideSuggestedLocation()}))}},t.prototype.onAutoCompletedResultsItemClick=function(e){var t=yn.index(e.target.id);if(t){var o=[this._suggestedLocations[t].position.x,this._suggestedLocations[t].position.y];this._coordinate=o;var n={type:this._suggestedLocations[t].type,fields:this._suggestedLocations[t]},r=this._suggestedLocations[t].fullText;this._setLabel(r);var i=this.getMap().getView().getProjection().getCode();"EPSG:4326"!==i&&(o=Object(a.E)(o,"EPSG:4326",i)),this._setPosition(o),this._setMarker(o,n,this.options.displayInfo)}},t.prototype.onActivateMapPointClick=function(){var e=this,t=this.getMap();this._inputShowPointerContainer.checked?(this._clearResults(),this.listenerKey=t.on("click",(function(t){return e.onMouseMapClick(t)})),this._setCursor("crosshair")):(Object(gn.b)(this.listenerKey),this._setCursor())},t.prototype.onLocationClearPointClick=function(){this._setCursor(),this._clearResults()},t.prototype.onLocationRemovePointClick=function(){this._setCursor(),this._clearResults()},t.prototype.onLocationAddPointClick=function(e){Or.log("onRouteAddPointClick",e)},t.prototype.onMouseMapClick=function(e){var t=e.coordinate;if(e.map&&e.map.getView()){var o=e.map.getView().getProjection();this._setCoordinate(t,o),this._setMarker([t[0],t[1]],null,!1),this.onActivateMapPointClick(e)}},t.prototype._setLabel=function(e){this._inputAutoCompleteContainer.value=e},t.prototype._setCursor=function(e){var t=this.getMap().getTargetElement();t.style.cursor=e||null},t.prototype._setCoordinate=function(e,t){this._coordinate=Object(a.E)(e,t,"EPSG:4326");var o=this._coordinate[0].toFixed(4),n=this._coordinate[1].toFixed(4)+" / "+o;this.GPdisplayCoordinate(n)},t.prototype._setPosition=function(e){this.getMap().getView().setCenter(e)},t.prototype._setMarker=function(e,t,o){var n=this.getMap();if(null!=this._marker&&(n.removeOverlay(this._marker),this._marker=null),e){var r=document.createElement("img");r.src=this._markerUrl,this._marker=new c.a({position:e,offset:this._markerOffset,element:r,stopEvent:!1}),n.addOverlay(this._marker),o&&Or.log("marker information : ",t)}},t.prototype._clearResults=function(){this._currentLocation=null,this._coordinate=null,this._hideSuggestedLocation(),this._clearSuggestedLocation(),this._setMarker(),Object(gn.b)(this.listenerKey)},t.prototype._clearSuggestedLocation=function(){if(this._suggestedLocations=[],this._suggestedContainer)for(;this._suggestedContainer.firstChild;)this._suggestedContainer.removeChild(this._suggestedContainer.firstChild)},t.prototype._hideSuggestedLocation=function(){this._suggestedContainer&&(this._suggestedContainer.style.display="none")},t.prototype._displaySuggestedLocation=function(){this._suggestedContainer&&(this._suggestedContainer.style.display="block")},t.prototype._requestAutoComplete=function(e){if(Or.log("_requestAutoComplete()",e),e&&0!==Object.keys(e).length&&e.text){Or.log(e);var t={};Wo.assign(t,this.options.autocompleteOptions),Wo.assign(t,e);var o=this._resources.AutoCompletion||null;o&&Array.isArray(o)&&(t.filterOptions||(t.filterOptions={}),t.filterOptions.type=o),t.apiKey=t.apiKey||this.options.apiKey,"boolean"!=typeof t.ssl&&("boolean"==typeof this.options.ssl?t.ssl=this.options.ssl:t.ssl=!0),Or.log(t),Ao.Services.autoComplete(t)}},t.prototype._fillAutoCompletedLocationListContainer=function(e){if(e&&0!==e.length){var t=this._suggestedContainer;if(t.childElementCount)for(;t.firstChild;)t.removeChild(t.firstChild);for(var o=0;o<e.length;o++)this._createLocationAutoCompletedLocationElement(this.options.tag.id,e[o],o);this._suggestedLocations=e}},t}(mn.a),xr=Sr;window.ol&&window.ol.control&&(window.ol.control.LocationSelector=Sr);var Cr=Mo.a.getLogger("RouteDOM"),jr={_addUID:function(e){return this._uid?e+"-"+this._uid:e},_createMainContainerElement:function(){var e=document.createElement("div");return e.id=this._addUID("GProute"),e.className="GPwidget",e},_createShowRouteElement:function(){var e=document.createElement("input");return e.id=this._addUID("GPshowRoute"),e.type="checkbox",e},_createShowRoutePictoElement:function(){var e=this,t=document.createElement("label");t.id=this._addUID("GPshowRoutePicto"),t.className="GPshowAdvancedToolPicto",t.htmlFor=this._addUID("GPshowRoute"),t.title="Ouvrir le calcul d'itinÃ©raire",t.addEventListener?t.addEventListener("click",(function(t){e.onShowRoutePanelClick(t)})):t.attachEvent&&t.attachEvent("onclick",(function(t){e.onShowRoutePanelClick(t)}));var o=document.createElement("span");return o.id=this._addUID("GPshowRouteOpen"),o.className="GPshowAdvancedToolOpen",t.appendChild(o),t},_createRoutePanelElement:function(){var e=document.createElement("div");return e.id=this._addUID("GProutePanel"),e.className="GPpanel",e},_createRoutePanelHeaderElement:function(){var e=this,t=document.createElement("div");t.className="GPpanelHeader";var o=document.createElement("div");o.className="GPpanelTitle",o.innerHTML="Calcul d'itinÃ©raire",t.appendChild(o);var n=document.createElement("div");return n.id=this._addUID("GProutePanelClose"),n.className="GPpanelClose",n.title="Masquer le panneau",n.addEventListener?n.addEventListener("click",(function(){document.getElementById(e._addUID("GPshowRoutePicto")).click()}),!1):n.attachEvent&&n.attachEvent("onclick",(function(){document.getElementById(e._addUID("GPshowRoutePicto")).click()})),t.appendChild(n),t},_createRoutePanelFormElement:function(){var e=this,t=document.createElement("form");return t.id=this._addUID("GProuteForm"),t.setAttribute("onkeypress","return event.keyCode != 13;"),t.addEventListener("submit",(function(t){Cr.log(t),t.preventDefault();var o,n=document.getElementsByClassName(e._addUID("GPlocationPoint")),r=n[0].childNodes[0].id,i=n[n.length-1].childNodes[0].id,s=yn.index(r),a=yn.index(i);if(""===document.getElementById(e._addUID("GPlocationOrigin_"+s)).value&&""===document.getElementById(e._addUID("GPlocationOriginCoords_"+s)).value||""===document.getElementById(e._addUID("GPlocationOrigin_"+a)).value&&""===document.getElementById(e._addUID("GPlocationOriginCoords_"+a)).value)return!1;document.getElementById(e._addUID("GProuteResultsStages")).innerHTML="";for(var l=0;l<n.length;l++){var c=n[l].childNodes[0].id;if(o=yn.index(c),"GPflexInput GPlocationStageFlexInput"===document.getElementById(e._addUID("GPlocationPoint_"+o)).className){var u=document.createElement("div");u.className="GProuteResultsStages";var d=document.createElement("div");d.className="GProuteResultStageLabel",d.innerHTML=document.getElementById(e._addUID("GPlocationOriginLabel_"+o)).innerHTML+" :",u.appendChild(d);var h=document.createElement("div");h.className="GProuteResultStageValue";var p=document.getElementById(e._addUID("GPlocationOriginCoords_"+o)),f=p.value,m="GPlocationOriginVisible"===p.className;h.innerHTML=null!==f&&""!==f&&m?f:document.getElementById(e._addUID("GPlocationOrigin_"+o)).value,u.appendChild(h),""!==h.innerHTML&&document.getElementById(e._addUID("GProuteResultsStages")).appendChild(u)}}var g=null;if(document.getElementById(e._addUID("GProuteComputationSelect"))){var y=document.getElementById(e._addUID("GProuteResultsComputationSelect"));y.selectedIndex=document.getElementById(e._addUID("GProuteComputationSelect")).selectedIndex,g=y.options[y.selectedIndex].value}var v=null;document.getElementById(e._addUID("GProuteTransportCar"))&&document.getElementById(e._addUID("GProuteTransportCar")).checked&&(v=document.getElementById(e._addUID("GProuteTransportCar")).value),document.getElementById(e._addUID("GProuteTransportPedestrian"))&&document.getElementById(e._addUID("GProuteTransportPedestrian")).checked&&(v=document.getElementById(e._addUID("GProuteTransportPedestrian")).value);for(var _=[],b=document.getElementsByClassName("GProuteExclusionsOption"),w=0;w<b.length;w++){o=b[w].htmlFor;var E=document.getElementById(o);E.checked||_.push(E.value)}return e.onRouteComputationSubmit({computation:g,transport:v,exclusions:_}),!1})),t},_createRoutePanelResultsElement:function(){var e=document.createElement("div");e.id=this._addUID("GProuteResultsPanel"),e.className="GProuteComponentHidden",e.appendChild(this._createRouteResultsStagesElement()),e.appendChild(this._createRouteResultsElement());var t=document.createElement("div");t.className="GPfakeBorder GPfakeBorderLeft",e.appendChild(t),e.appendChild(this._createRouteShowResultsDetailsElement());var o=document.createElement("label");o.htmlFor=this._addUID("GProuteResultsShowDetails"),o.innerHTML="Afficher le dÃ©tail",e.appendChild(o);var n=document.createElement("label");n.htmlFor=this._addUID("GProuteResultsShowDetails"),n.innerHTML="Masquer le dÃ©tail",e.appendChild(n);var r=document.createElement("div");return r.className="GPfakeBorder",e.appendChild(r),e.appendChild(this._createRouteResultsDetailsElement()),e},_createRouteWaitingElement:function(){var e=document.createElement("div");e.id=this._addUID("GProuteCalcWaitingContainer"),e.className="GProuteCalcWaitingContainerHidden";var t=document.createElement("p");return t.className="GProuteCalcWaiting",t.innerHTML="Calcul en cours...",e.appendChild(t),e},_createRouteResultsStagesElement:function(){var e=document.createElement("div");return e.id=this._addUID("GProuteResultsStages"),e},_createRouteResultsElement:function(){var e=this,t=document.createElement("div");t.id=this._addUID("GProuteResults");var o=document.createElement("div");o.id=this._addUID("GProuteResultsValues"),t.appendChild(o);var n=document.createElement("div");n.id=this._addUID("GProuteResultsMode");var r=document.createElement("select");r.id=this._addUID("GProuteResultsComputationSelect"),r.className="GPinputSelect",r.addEventListener("change",(function(t){e.onRouteModeComputationChangeAndRun(t)}));for(var i=[{code:"fastest",label:"Plus rapide"},{code:"shortest",label:"Plus court"}],s=0;s<i.length;s++){var a=document.createElement("option");a.value=i[s].code,a.text=i[s].label,r.appendChild(a)}n.appendChild(r),t.appendChild(n);var l=document.createElement("div");return l.id=this._addUID("GProuteResultsNew"),l.title="Modifier le calcul",l.addEventListener("click",(function(t){document.getElementById(e._addUID("GProuteResultsPanel")).className="GProuteComponentHidden",document.getElementById(e._addUID("GProuteForm")).className="",e.onShowRouteResultsNewClick(t)})),t.appendChild(l),t},_addRouteResultsValuesElement:function(e,t,o){var n=document.getElementById(this._addUID("GProuteResultsValues"));if(n.childElementCount)for(;n.firstChild;)n.removeChild(n.firstChild);var r=document.createElement("div");r.className="GProuteResultsValue";var i=document.createElement("label");i.className="GProuteResultsValueLabel",i.innerHTML="Distance :",r.appendChild(i);var s=0;if(parseInt(e/1e3,10)){var a=Math.round(e);s=(a/=1e3)+" km"}else s=Math.round(e)+" m";var l=document.createElement("div");l.id=this._addUID("GProuteResultsValueDist"),l.innerHTML=s,r.appendChild(l),n.appendChild(r);var c=document.createElement("div");c.className="GProuteResultsValue";var u=document.createElement("label");u.className="GProuteResultsValueLabel",u.innerHTML="DurÃ©e :",c.appendChild(u);var d=document.createElement("div");return d.id=this._addUID("GProuteResultsValueDist"),d.innerHTML=o(t),c.appendChild(d),n.appendChild(c),n},_createRouteShowResultsDetailsElement:function(){var e=document.createElement("input");return e.id=this._addUID("GProuteResultsShowDetails"),e.type="checkbox",e},_createRouteResultsDetailsElement:function(){var e=document.createElement("div");return e.id=this._addUID("GProuteResultsDetails"),e},_addRouteResultsDetailsElement:function(e,t){var o=this,n=document.getElementById(this._addUID("GProuteResultsDetails"));if(n.childElementCount)for(;n.firstChild;)n.removeChild(n.firstChild);for(var r=0,i=0,s=0;s<e.length;s++){var a=s+1,l=e[s],c=document.createElement("div");c.className="GProuteResultsDetailsNumber",c.innerHTML=a+".",n.appendChild(c),i+=parseFloat(l.duration),r+=parseFloat(l.distance);var u=0;if(parseInt(r/1e3,10)){var d=Math.round(r);u=(d/=1e3)+" km"}else u=Math.round(r)+" m";var h=document.createElement("div");h.className="GProuteResultsDetailsInstruction",h.id=this._addUID("GProuteResultsDetailsInstruction_"+a),h.title="distance : "+u+" / temps : "+t(i),h.innerHTML=l.instruction,h.addEventListener("mouseover",(function(e){o.onRouteResultsDetailsMouseOver(e)})),h.addEventListener("mouseout",(function(e){o.onRouteResultsDetailsMouseOut(e)})),h.addEventListener("click",(function(e){"function"==typeof o.onRouteResultsDetailsClick&&o.onRouteResultsDetailsClick(e)})),n.appendChild(h)}return n},_createRoutePanelFormPointElement:function(e,t,o){var n=this,r=document.createElement("div");r.id="GProutePoint"+e,r.className=o?"GPflexInput GProuteStageFlexInput":"GPflexInput GProuteStageFlexInputHidden";var i=document.createElement("label");i.id="GProuteOriginLabel"+e,i.htmlFor="GProuteOrigin"+e,i.innerHTML=t,i.addEventListener("click",(function(){var e=this.id.charAt(this.id.length-1);document.getElementById("GProuteOriginCoords"+e).value="";for(var t=1;t<8;t++)document.getElementById("GProutePoint"+t).style.display="flex";document.getElementById("GProuteForm").className="",document.getElementById("GProuteOriginPointer"+e).checked=!1,document.getElementById("GProuteOrigin"+e).className="GProuteOriginVisible",document.getElementById("GProuteOriginCoords"+e).className="GProuteOriginHidden"})),r.appendChild(i);var s=document.createElement("input");s.id="GProuteOrigin"+e,s.className="GProuteOriginVisible",s.type="text",s.placeholder="Saisir une adresse",s.addEventListener("keyup",(function(e){var t=e.which||e.keyCode;if(13!==t&&10!==t){var o=this.id.charAt(this.id.length-1);document.getElementById("GProuteOrigin"+o).value.length>2?document.getElementById("GProuteAutoCompleteList"+o).style.display="block":document.getElementById("GProuteAutoCompleteList"+o).style.display="none",n.onAutoCompleteSearchText(e)}})),s.addEventListener("blur",(function(){var e=this.id.charAt(this.id.length-1);document.getElementById("GProuteAutoCompleteList"+e).style.display="none"})),r.appendChild(s);var a=document.createElement("input");a.id="GProuteOriginCoords"+e,a.className="GProuteOriginHidden",a.type="text",a.disabled=!0,r.appendChild(a);var l=document.createElement("input");l.id="GProuteOriginPointer"+e,l.type="checkbox",r.appendChild(l);var c=document.createElement("label");return c.id="GProuteOriginPointerImg"+e,c.htmlFor="GProuteOriginPointer"+e,c.className="GProuteOriginPointerImg",c.title="Pointer un lieu sur la carte",c.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation();var t,o=this.id.charAt(this.id.length-1);for(t=1;t<8;t++)o!==t&&(document.getElementById("GProuteOriginPointer"+t).checked=!1,"Pointer un lieu sur la carte"===document.getElementById("GProuteOriginCoords"+t).value&&(document.getElementById("GProuteOriginCoords"+t).value="",document.getElementById("GProuteOrigin"+t).className="GProuteOriginVisible",document.getElementById("GProuteOriginCoords"+t).className="GProuteOriginHidden"));if(document.getElementById("GProuteOriginPointer"+o).checked){for(document.getElementById("GProuteOriginCoords"+o).value="",t=1;t<8;t++)document.getElementById("GProutePoint"+t).style.display="flex";document.getElementById("GProuteForm").className="",document.getElementById("GProuteOriginPointer"+o).checked=!1,document.getElementById("GProuteOrigin"+o).className="GProuteOriginVisible",document.getElementById("GProuteOriginCoords"+o).className="GProuteOriginHidden"}else{for(document.getElementById("GProuteOriginCoords"+o).value="Pointer un lieu sur la carte",t=1;t<8;t++)document.getElementById("GProutePoint"+t).style.display=o===t?"flex":"none";document.getElementById("GProuteForm").className="GProuteFormMini",document.getElementById("GProuteOriginPointer"+o).checked=!0,document.getElementById("GProuteOrigin"+o).className="GProuteOriginHidden",document.getElementById("GProuteOriginCoords"+o).className="GProuteOriginVisible"}n.onRouteMapPointClick(e)})),r.appendChild(c),r},_createRoutePanelFormRemoveStageElement:function(e){var t=this,o=document.createElement("div");return o.id="GProuteStageRemove"+e,o.className="GProuteStageRemove",o.title="Supprimer l'Ã©tape",1!==e&&7!==e&&o.addEventListener("click",(function(e){var o=this.id.charAt(this.id.length-1);document.getElementById("GProutePoint"+o).className="GPflexInput GProuteStageFlexInputHidden",document.getElementById("GProuteOrigin"+o).value="",document.getElementById("GProuteOrigin"+o).className="GProuteOriginVisible",document.getElementById("GProuteOriginCoords"+o).value="",document.getElementById("GProuteOriginCoords"+o).className="GProuteOriginHidden",document.getElementById("GProuteStageAdd").style.display="",t.onRouteRemovePointClick(e)})),o},_createRoutePanelFormAddStageElement:function(){var e=this,t=document.createElement("div");return t.id="GProuteStageAdd",t.title="Ajouter une Ã©tape",t.addEventListener("click",(function(t){for(var o=1,n=0,r=2;r<7;r++)"GPflexInput GProuteStageFlexInputHidden"===document.getElementById("GProutePoint"+r).className?1===o&&(o=r):n++;o<7&&(document.getElementById("GProutePoint"+o).className="GPflexInput GProuteStageFlexInput"),4===n&&(document.getElementById("GProuteStageAdd").style.display="none"),e.onRouteAddPointClick(t)})),t},_createRoutePanelFormAutoCompleteListElement:function(e){var t=this,o=document.createElement("div");return o.id="GProuteAutoCompleteList"+e,o.className="GPadvancedAutoCompleteList",o.addEventListener?o.addEventListener("click",(function(o){t.onAutoCompletedResultsItemClick(o),document.getElementById("GProuteAutoCompleteList"+e).style.display="none"}),!1):o.attachEvent&&o.attachEvent("onclick",(function(o){t.onAutoCompletedResultsItemClick(o),document.getElementById("GProuteAutoCompleteList"+e).style.display="none"})),o},_createRouteAutoCompletedLocationElement:function(e,t,o){var n=document.getElementById("GProuteAutoCompleteList"+t),r=document.createElement("div");r.id="AutoCompletedLocation"+o,r.className="GPautoCompleteProposal",r.innerHTML=e.fullText,n.appendChild(r)},_createRoutePanelFormModeChoiceElement:function(){var e=document.createElement("div");return e.id=this._addUID("GProuteModeChoice"),e},_createRoutePanelFormModeChoiceTransportElement:function(e){var t=this,o=document.createElement("div");o.id=this._addUID("GProuteTransportChoice");var n=document.createElement("span");n.className="GProuteModeLabel",n.innerHTML="Mode de transport",o.appendChild(n);for(var r=0;r<e.length;r++){var i=e[r];if("Voiture"===i){var s=document.createElement("input");s.id=this._addUID("GProuteTransportCar"),s.type="radio",s.name="GProuteTransport",s.value="Voiture",0===r&&(s.checked=!0),s.addEventListener?s.addEventListener("change",(function(e){t.onRouteModeTransportChange(e)})):s.attachEvent&&s.attachEvent("onchange",(function(e){t.onRouteModeTransportChange(e)})),o.appendChild(s);var a=document.createElement("label");a.className="GProuteTransportImg",a.htmlFor=this._addUID("GProuteTransportCar"),a.title="Voiture",o.appendChild(a)}if("Pieton"===i){var l=document.createElement("input");l.id=this._addUID("GProuteTransportPedestrian"),l.type="radio",l.name="GProuteTransport",l.value="Pieton",0===r&&(l.checked=!0),l.addEventListener?l.addEventListener("change",(function(e){t.onRouteModeTransportChange(e)})):l.attachEvent&&l.attachEvent("onchange",(function(e){t.onRouteModeTransportChange(e)})),o.appendChild(l);var c=document.createElement("label");c.className="GProuteTransportImg",c.htmlFor=this._addUID("GProuteTransportPedestrian"),c.title="PiÃ©ton",o.appendChild(c)}}return o},_createRoutePanelFormModeChoiceComputeElement:function(){var e=this,t=document.createElement("div");t.id=this._addUID("GProuteComputationChoice");var o=document.createElement("label");o.htmlFor=this._addUID("GProuteComputationSelect"),o.innerHTML="Mode de calcul";var n=document.createElement("span");n.className="GProuteModeLabel",n.appendChild(o),t.appendChild(n);var r=document.createElement("select");r.id=this._addUID("GProuteComputationSelect"),r.className="GPinputSelect",r.addEventListener("change",(function(t){e.onRouteModeComputationChange(t)}));for(var i=[{code:"fastest",label:"Plus rapide"},{code:"shortest",label:"Plus court"}],s=0;s<i.length;s++){var a=document.createElement("option");a.value=i[s].code,a.text=i[s].label,r.appendChild(a)}return t.appendChild(r),t},_createShowRouteExclusionsElement:function(){var e=document.createElement("input");return e.id=this._addUID("GPshowRouteExclusions"),e.type="checkbox",e},_createShowRouteExclusionsPictoElement:function(){var e=this,t=document.createElement("label");return t.id=this._addUID("GPshowRouteExclusionsPicto"),t.className="GPshowMoreOptionsImage GPshowMoreOptions GPshowRouteExclusionsPicto",t.htmlFor=this._addUID("GPshowRouteExclusions"),t.title="Exclusions",t.addEventListener?t.addEventListener("click",(function(t){e.onShowRouteExclusionsClick(t)})):t.attachEvent&&t.attachEvent("onclick",(function(t){e.onShowRouteExclusionsClick(t)})),t},_createRoutePanelFormExclusionsElement:function(){var e=document.createElement("div");e.id=this._addUID("GProuteExclusions");var t=document.createElement("span");return t.className="GProuteExclusionsLabel",t.innerHTML="Passages autorisÃ©s",e.appendChild(t),e},_createRoutePanelFormExclusionOptionsElement:function(e){var t=this,o=document.createElement("div");for(var n in o.className="GProuteExclusionsOptions",e)if(e.hasOwnProperty(n)){var r=e[n];switch(n){case"toll":var i=document.createElement("input");i.id=this._addUID("GProuteExclusionsToll"),i.type="checkbox",i.value="Toll",i.checked=!r,i.addEventListener?i.addEventListener("change",(function(e){t.onRouteExclusionsChange(e)})):i.attachEvent&&i.attachEvent("onchange",(function(e){t.onRouteExclusionsChange(e)})),o.appendChild(i);var s=document.createElement("label");s.className="GProuteExclusionsOption",s.htmlFor=this._addUID("GProuteExclusionsToll"),s.innerHTML="PÃ©ages",o.appendChild(s);break;case"tunnel":var a=document.createElement("input");a.id=this._addUID("GProuteExclusionsTunnel"),a.type="checkbox",a.value="Tunnel",a.checked=!r,a.addEventListener?a.addEventListener("change",(function(e){t.onRouteExclusionsChange(e)})):a.attachEvent&&a.attachEvent("onchange",(function(e){t.onRouteExclusionsChange(e)})),o.appendChild(a);var l=document.createElement("label");l.className="GProuteExclusionsOption",l.htmlFor=this._addUID("GProuteExclusionsTunnel"),l.innerHTML="Tunnels",o.appendChild(l);break;case"bridge":var c=document.createElement("input");c.id=this._addUID("GProuteExclusionsBridge"),c.type="checkbox",c.value="Bridge",c.checked=!r,c.addEventListener?c.addEventListener("change",(function(e){t.onRouteExclusionsChange(e)})):c.attachEvent&&c.attachEvent("onchange",(function(e){t.onRouteExclusionsChange(e)})),o.appendChild(c);var u=document.createElement("label");u.className="GProuteExclusionsOption",u.htmlFor=this._addUID("GProuteExclusionsBridge"),u.innerHTML="Ponts",o.appendChild(u)}}return o},_createRouteSubmitFormElement:function(){var e=document.createElement("input");return e.id=this._addUID("GProuteSubmit"),e.className="GPinputSubmit",e.type="submit",e.value="Calculer",e},_createRouteFormResetElement:function(){var e=this,t=document.createElement("div");return t.id=this._addUID("GProuteReset"),t.title="RÃ©initialiser les paramÃ¨tres",t.addEventListener("click",(function(t){e.onRouteResetClick(t)})),t}};function Pr(e){return(Pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Tr=Mo.a.getLogger("route"),Ar=function(e){function t(o){if(o=o||{},!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.initialize(o),this._container=this._createMainContainerElement(),this._containerElement=null,o.element&&o.element.appendChild&&(o.element.appendChild(this._container),this._containerElement=o.element),e.call(this,{element:this._containerElement||this._container,target:o.target,render:o.render})}return e&&(t.__proto__=e),t.prototype=Object.create(e.prototype,{}),Wo.assign(t.prototype,jr),t.prototype.constructor=t,t.prototype.getCollapsed=function(){return this.collapsed},t.prototype.setCollapsed=function(e){void 0!==e?e&&this.collapsed||!e&&!this.collapsed||(e?document.getElementById("GProutePanelClose-"+this._uid).click():document.getElementById("GPshowRoute-"+this._uid).click(),this.collapsed=e):Tr.log("[ERROR] Route:setCollapsed - missing collapsed parameter")},t.prototype.getLayer=function(){return this._geojsonSections},t.prototype.setMap=function(t){t&&(this._container=this._initContainer(t),this.draggable&&zn.dragElement(this._panelRouteContainer,this._panelHeaderRouteContainer,t.getTargetElement())),e.prototype.setMap.call(this,t)},t.prototype.initialize=function(e){this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,graphs:["Voiture","Pieton"],exclusions:{toll:!1,tunnel:!1,bridge:!1},routeOptions:{},autocompleteOptions:{},layerDescription:{title:"ItinÃ©raire",description:"ItinÃ©raire basÃ© sur un graphe"}},Wo.assign(this.options,e);var t={departure:{url:An.red,offset:An.defaultOffset},stages:{url:An.lightOrange,offset:An.defaultOffset},arrival:{url:An.darkOrange,offset:An.defaultOffset}};this.options.markersOpts=Wo.assign(t,e.markersOpts),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=yn.generate(),this._panelRouteContainer=null,this._panelHeaderRouteContainer=null,this._waitingContainer=null,this._formRouteContainer=null,this._resultsRouteContainer=null,this._showRouteExclusionsElement=null,this._currentPoints=[],this._currentTransport=null,this._initTransport(),this._currentComputation=null,this._initComputation(),this._currentExclusions=[],this._initExclusions(),this._waiting=!1,this._timer=null,this._geojsonRoute=null,this._geojsonSections=null,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null,this._resultsSelectInteraction=null,this._resultsHoverInteraction=null,this._defaultFeatureStyle=new Do.c({stroke:new zo.a({color:"rgba(0,183,152,0.9)",width:12})}),this._selectedFeatureStyle=new Do.c({stroke:new zo.a({color:"rgba(255,102,0,0.9)",width:12})}),this._currentRouteInformations=null,this._resources={},this._noRightManagement=!1,this._checkRightsManagement(),this.listenerKey=null},t.prototype._checkInputOptions=function(e){if(e.graphs)if(Array.isArray(e.graphs)&&e.graphs.length)for(var t=0;t<e.graphs.length;t++)"string"==typeof e.graphs[t]?("pieton"===e.graphs[t].toLowerCase()&&(e.graphs[t]="Pieton"),"voiture"===e.graphs[t].toLowerCase()&&(e.graphs[t]="Voiture")):(Tr.log("[ol.control.Route] ERROR : parameter 'graphs' elements should be of type 'string'"),e.graphs[t]=null);else Tr.warn("'graphs' parameter should be an array"),e.graphs=null;"true"===e.collapsed&&(e.collapsed=!0),"false"===e.collapsed&&(e.collapsed=!1)},t.prototype._checkRightsManagement=function(){var e=null,t=[],o=null;o=this.options.routeOptions.apiKey,(t=(e=this.options.routeOptions.filterOptions)?e.type:[])&&0!==t.length||(t=["Voiture","Pieton"]);var n=Rn({key:o||this.options.apiKey,resources:t,services:["Itineraire"]});Tr.log("rightManagementRoute",n),o=this.options.autocompleteOptions.apiKey,(t=(e=this.options.autocompleteOptions.filterOptions)?e.type:[])&&0!==t.length||(t=["PositionOfInterest","StreetAddress"]);var r=Rn({key:o||this.options.apiKey,resources:t,services:["AutoCompletion"]});Tr.log("rightManagementAutoComplete",r),n||r||(this._noRightManagement=!0),r&&(this._resources.AutoCompletion={},this._resources.AutoCompletion.resources=r.AutoCompletion,this._resources.AutoCompletion.key=r.key),n&&(this._resources.Itineraire={},this._resources.Itineraire.resources=n.Itineraire,this._resources.Itineraire.key=n.key)},t.prototype._initContainer=function(e){var t=this,o=this._container,n=this._showRouteContainer=this._createShowRouteElement();o.appendChild(n),this.collapsed||(n.checked=!0);var r=this._createShowRoutePictoElement();o.appendChild(r);var i=this._panelRouteContainer=this._createRoutePanelElement(),s=this._panelHeaderRouteContainer=this._createRoutePanelHeaderElement();i.appendChild(s);for(var a=this._formRouteContainer=this._createRoutePanelFormElement(),l=this._createRoutePanelFormPointsElement(e),c=0;c<l.length;c++)a.appendChild(l[c]);var u=this._createRoutePanelFormModeChoiceElement();u.appendChild(this._createRoutePanelFormModeChoiceTransportElement(this.options.graphs)),u.appendChild(this._createRoutePanelFormModeChoiceComputeElement()),a.appendChild(u),a.appendChild(this._createShowRouteExclusionsElement()),this._showRouteExclusionsElement=this._createShowRouteExclusionsPictoElement(),a.appendChild(this._showRouteExclusionsElement);var d=this._createRoutePanelFormExclusionsElement();d.appendChild(this._createRoutePanelFormExclusionOptionsElement(this.options.exclusions)),a.appendChild(d);var h=this._createRouteFormResetElement();a.appendChild(h);var p=this._createRouteSubmitFormElement();a.appendChild(p),i.appendChild(a);var f=this._resultsRouteContainer=this._createRoutePanelResultsElement();i.appendChild(f);var m=this._waitingContainer=this._createRouteWaitingElement();return i.appendChild(m),o.appendChild(i),o.addEventListener&&o.addEventListener("click",(function(e){return t._hideRouteSuggestedLocations(e)})),o},t.prototype._initTransport=function(){this._currentTransport="Voiture";var e=this.options.graphs;e&&0!==e.length||(this.options.graphs=["Voiture","Pieton"]),Array.isArray(e)&&e.length&&("Voiture"!==e[0]&&"Pieton"!==e[0]||(this._currentTransport=e[0]));var t=this.options.routeOptions;t.graph&&(this._currentTransport=t.graph)},t.prototype._initComputation=function(){this._currentComputation="fastest";var e=this.options.routeOptions;e.routePreference&&(this._currentComputation=e.routePreference)},t.prototype._initExclusions=function(){this._currentExclusions=[];var e=this.options.exclusions;if((!e||"object"===Pr(e)&&0===Object.keys(e).length)&&(this.options.exclusions={toll:!1,tunnel:!1,bridge:!1}),e&&"object"===Pr(e)&&Object.keys(e).length)for(var t in e)e.hasOwnProperty(t)&&e[t]&&this._currentExclusions.push(t);var o=this.options.routeOptions;Array.isArray(o.exclusions)&&(this._currentExclusions=o.exclusions)},t.prototype._initPopupDiv=function(){var e=this,t=document.createElement("div");t.className="gp-feature-info-div";var o=document.createElement("input");return o.type="button",o.className="gp-styling-button closer",o.onclick=function(){return null!=e._popupOverlay&&e._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",t.appendChild(this._popupContent),t.appendChild(o),t},t.prototype._createRoutePanelFormPointsElement=function(e){var t=[],o=1,n=new xr({apiKey:this.options.apiKey||null,tag:{id:o,groupId:this._uid,markerOpts:this.options.markersOpts.departure,label:"DÃ©part",display:!0},autocompleteOptions:this.options.autocompleteOptions||null});for(n.setMap(e),this._addFormPointsEventListeners(n),t.push(n._container),this._currentPoints.push(n),o=2;o<7;o++){var r=new xr({apiKey:this.options.apiKey||null,tag:{id:o,groupId:this._uid,label:"Etape",markerOpts:this.options.markersOpts.stages,display:!1,removeOption:!0},autocompleteOptions:this.options.autocompleteOptions||null});r.setMap(e),this._addFormPointsEventListeners(r),t.push(r._container),this._currentPoints.push(r)}var i=new xr({apiKey:this.options.apiKey||null,tag:{id:o,groupId:this._uid,markerOpts:this.options.markersOpts.arrival,label:"ArrivÃ©e",display:!0,addOption:!0},autocompleteOptions:this.options.autocompleteOptions||null});return i.setMap(e),this._addFormPointsEventListeners(i),t.push(i._container),this._currentPoints.push(i),t},t.prototype._addFormPointsEventListeners=function(e){var t=this;e&&(e._inputLabelContainer.addEventListener?(e._inputLabelContainer.addEventListener("click",(function(e){return t.onRouteOriginLabelClick(e)})),e._inputShowPointer.addEventListener("click",(function(o){return t.onRouteOriginPointerClick(o,e)})),e._removePointElement&&e._removePointElement.addEventListener("click",(function(e){Tr.trace("click on _removePointElement",e)})),e._addPointElement&&e._addPointElement.addEventListener("click",(function(e){Tr.trace("click on _addPointElement",e)}))):e._inputLabelContainer.attachEvent&&(e._inputLabelContainer.attachEvent("onclick",(function(e){return t.onRouteOriginLabelClick(e)})),e._inputShowPointer.attachEvent("onclick",(function(o){return t.onRouteOriginPointerClick(o,e)})),e._removePointElement&&e._removePointElement.attachEvent("onclick",(function(e){})),e._addPointElement&&e._addPointElement.attachEvent("onclick",(function(e){}))))},t.prototype.onRouteComputationSubmit=function(e){Tr.log("onRouteComputationSubmit",e);var t,o,n=this._currentPoints;if(n[0]&&n[0].getCoordinate){var r=n[0].getCoordinate();t={x:r[0],y:r[1]},Tr.log("start",t)}var i=n[n.length-1];if(i&&i.getCoordinate){var s=i.getCoordinate();o={x:s[0],y:s[1]},Tr.log("end",o)}for(var a=[],l=1;l<n.length-1;l++)if(n[l]&&n[l].getCoordinate){var c=n[l].getCoordinate();if(c){var u={x:c[0],y:c[1]};Tr.log("step",u),a.push(u)}}if(!this._noRightManagement){this._currentTransport=e.transport,this._currentComputation=e.computation,this._currentExclusions=e.exclusions;var d=this.options.routeOptions,h=d.protocol||"XHR",p=d.timeOut||0;"JSONP"===h&&0===p&&(p=15e3);var f=this;this._requestRouting({startPoint:t,endPoint:o,viaPoints:a,graph:d.graph||this._currentTransport,routePreference:d.routePreference||this._currentComputation,exclusions:d.exclusions||this._currentExclusions,geometryInInstructions:!0,distanceUnit:"m",timeOut:p,protocol:h,onSuccess:function(e){Tr.log(e),e&&f._fillRouteResultsDetails(e)},onFailure:function(e){f._hideWaitingContainer(),f._clearRouteResultsDetails(),Tr.log(e.message)}})}},t.prototype.onRouteOriginLabelClick=function(){this._formRouteContainer.className="",Object(gn.b)(this.listenerKey),this.dispatchEvent("route:drawend")},t.prototype.onRouteOriginPointerClick=function(e,t){var o=this,n=this.getMap();t._inputShowPointerContainer.checked?(this._formRouteContainer.className="GProuteFormMini",this.listenerKey=n.on("click",(function(){"GProuteFormMini"===o._formRouteContainer.className&&(o._formRouteContainer.className=""),Object(gn.b)(o.listenerKey),o.dispatchEvent("route:drawend")})),this.dispatchEvent("route:drawstart")):(this._formRouteContainer.className="",Object(gn.b)(this.listenerKey),this.dispatchEvent("route:drawend"))},t.prototype.onShowRoutePanelClick=function(e){var t=this.getMap();In.unset(t),this._geojsonSections||this._waiting||this._clear(),this.collapsed=document.getElementById("GPshowRoute-"+this._uid).checked,this.dispatchEvent("change:collapsed")},t.prototype.onRouteModeComputationChange=function(e){var t=e.target.selectedIndex,o=e.target.options[t].value;o&&(Tr.log(o),this._currentComputation=o)},t.prototype.onRouteModeComputationChangeAndRun=function(e){this.onRouteModeComputationChange(e),this._clearRouteResultsDetails(),this._clearRouteResultsGeometry(),this._clearRouteResultsFeatureGeometry(),this.onRouteComputationSubmit({computation:this._currentComputation,transport:this._currentTransport,exclusions:this._currentExclusions})},t.prototype.onRouteModeTransportChange=function(e){var t=e.target.value;t&&(this._currentTransport=t)},t.prototype.onShowRouteExclusionsClick=function(e){Tr.log("onShowRouteExclusionsClick",e)},t.prototype.onRouteExclusionsChange=function(e){var t=e.target.value,o=e.target.checked;if(t&&"string"==typeof t){t=t.toLowerCase();for(var n=!1,r=null,i=0;i<this._currentExclusions.length;i++)this._currentExclusions[i]===t&&(r=i,n=!0);n||o||this._currentExclusions.push(t),n&&o&&this._currentExclusions.splice(r,1)}},t.prototype.onRouteResetClick=function(){for(var e=this._currentPoints,t=0;t<e.length;t++)e[t].clear();this._clear(),this._clearRouteInputOptions()},t.prototype.onShowRouteResultsNewClick=function(){this._clearRouteResultsDetails(),this._clearRouteResultsGeometry(),this._clearRouteResultsFeatureGeometry()},t.prototype.onRouteResultsDetailsMouseOver=function(e){var t=e.target.id,o=t.substring(t.indexOf("_")+1);(e.target.classList&&e.target.classList.add("GProuteResultsDetailsInstructionHighlight"),this._geojsonSections)&&this._geojsonSections.getSource().getFeatureById(parseInt(o,10)).setStyle(this._selectedFeatureStyle)},t.prototype.onRouteResultsDetailsMouseOut=function(e){var t=e.target.id,o=t.substring(t.indexOf("_")+1);(e.target.classList&&e.target.classList.remove("GProuteResultsDetailsInstructionHighlight"),this._geojsonSections)&&this._geojsonSections.getSource().getFeatureById(parseInt(o,10)).setStyle(null)},t.prototype._requestRouting=function(e){if(e&&("object"!==Pr(e)||0!==Object.keys(e).length)&&e.startPoint&&e.endPoint&&!this._noRightManagement&&this._resources.Itineraire){var t=this._resources.Itineraire.resources;if(t&&("object"!==Pr(t)||0!==Object.keys(t).length)){for(var o=this._resources.Itineraire.key,n=!1,r=0;r<t.length;r++)t[r]===e.graph&&(n=!0);n?(e.apiKey=this.options.routeOptions.apiKey||this.options.apiKey||o,"boolean"!=typeof e.ssl&&("boolean"==typeof this.options.ssl?e.ssl=this.options.ssl:e.ssl=!0),Tr.log(e),this._displayWaitingContainer(),Ao.Services.route(e)):Tr.log("no rights for this service !?")}}},t.prototype._fillRouteResultsDetails=function(e){var t=e.totalDistance,o=e.totalTime,n=this._simplifiedInstructions(e.routeInstructions);n&&this._fillRouteResultsDetailsContainer(t,o,n);var r=e.routeGeometry;r&&this._fillRouteResultsDetailsGeometry(r,this._defaultFeatureStyle),n&&n[0].geometry&&this._fillRouteResultsDetailsFeatureGeometry(n,this._defaultFeatureStyle);var i=e.bbox;if(i){var s=this.getMap(),l=[i.left,i.bottom,i.right,i.top],c=s.getView().getProjection().getCode();"EPSG:4326"!==c&&(l=Object(a.F)(l,"EPSG:4326",c)),s.getView().fit(l,s.getSize())}this._currentRouteInformations=e,this._formRouteContainer.className="GProuteComponentHidden",this._hideWaitingContainer(),this._resultsRouteContainer.className=""},t.prototype._fillRouteResultsDetailsContainer=function(e,t,o){this._resultsRouteValuesContainer=this._addRouteResultsValuesElement(e,t,this._convertSecondsToTime),this._resultsRouteDetailsContainer=this._addRouteResultsDetailsElement(o,this._convertSecondsToTime)},t.prototype._fillRouteResultsDetailsGeometry=function(e,t){this._clearRouteResultsGeometry();var o=this.getMap();if(e){var n={type:"Feature",crs:{type:"name",properties:{name:"EPSG:4326"}},geometry:e},r=new br.a({defaultDataProjection:"EPSG:4326"}).readFeatures(n,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});this._geojsonRoute=new sr.a({source:new d.b({features:r}),style:t}),o.addLayer(this._geojsonRoute)}},t.prototype._fillRouteResultsDetailsFeatureGeometry=function(e,t){var o=this;this._clearRouteResultsFeatureGeometry();for(var n=this.getMap(),r={type:"FeatureCollection",crs:{type:"name",properties:{name:"EPSG:4326"}},features:[]},i=0;i<e.length;i++){for(var s=e[i],a=i+1,l=s.geometry.coordinates,c=0;c<l.length;c++)"string"==typeof l[c][0]&&(l[c][0]=parseFloat(l[c][0]),l[c][1]=parseFloat(l[c][1]));r.features.push({type:"Feature",geometry:s.geometry,properties:{popupContent:"("+a+") distance : "+this._convertDistance(s.distance)+" / temps : "+this._convertSecondsToTime(s.duration)},id:a})}Tr.log(r);var u,h=new br.a({defaultDataProjection:"EPSG:4326"}),p=this.getMap().getView().getProjection().getCode(),f=h.readFeatures(r,{dataProjection:"EPSG:4326",featureProjection:p});this._geojsonSections=new sr.a({source:new d.b({features:f}),style:t,opacity:.9}),"Pieton"===this._currentTransport?(u="piÃ©ton",this._geojsonSections.gpResultLayerId="Pieton$OGC:OPENLS;Itineraire"):(u="voiture",this._geojsonSections.gpResultLayerId="Voiture$OGC:OPENLS;Itineraire"),n.addLayer(this._geojsonSections),n.getControls().forEach((function(e){if(e instanceof Sn){var t=o._geojsonSections.gpLayerId;e._layers[t].title===t&&e.addLayer(o._geojsonSections,{title:o.options.layerDescription.title+" ("+u+")",description:o.options.layerDescription.description})}}),this),this._resultsHoverInteraction=new m.b({condition:hr.o,layers:[this._geojsonSections],style:this._selectedFeatureStyle}),this._resultsHoverInteraction.on("select",(function(e){return o._onResultsFeatureMouseOver(e)})),n.addInteraction(this._resultsHoverInteraction),this._resultsSelectInteraction=new m.b({layers:[this._geojsonSections],style:this._selectedFeatureStyle}),this._resultsSelectInteraction.on("select",(function(e){return o._onResultsFeatureSelect(e)})),n.addInteraction(this._resultsSelectInteraction)},t.prototype._onResultsFeatureMouseOver=function(e){if(0!==e.selected.length){var t=e.selected[0],o=document.getElementById("GProuteResultsDetailsInstruction_"+t.getId()+"-"+this._uid);o&&o.classList&&o.classList.add("GProuteResultsDetailsInstructionHighlight")}if(0!==e.deselected.length){var n=e.deselected[0],r=document.getElementById("GProuteResultsDetailsInstruction_"+n.getId()+"-"+this._uid);r&&r.classList&&r.classList.remove("GProuteResultsDetailsInstructionHighlight")}},t.prototype._onResultsFeatureSelect=function(e){var t=this.getMap();if(0!==e.selected.length){var o=e.selected[0];this._popupContent.innerHTML=o.getProperties().popupContent,this._popupOverlay?this._popupOverlay.setPosition(e.mapBrowserEvent.coordinate):(this._popupOverlay=new c.a({element:this._popupDiv,positioning:"bottom-center",position:e.mapBrowserEvent.coordinate}),t.addOverlay(this._popupOverlay))}else null!=this._popupOverlay&&this._popupOverlay.setPosition(void 0)},t.prototype._clear=function(){this._currentTransport=null,this._currentExclusions=[],this._currentComputation=null,this._clearRouteResultsDetails(),this._clearRouteResultsGeometry(),this._clearRouteResultsFeatureGeometry();for(var e=0;e<this._currentPoints.length;e++)this._currentPoints[e].clear();this._removeRouteStepLocations()},t.prototype._clearRouteInputOptions=function(){var e;this._initTransport(),this._initComputation(),this._initExclusions(),"Pieton"===this._currentTransport?(e=document.getElementById("GProuteTransportPedestrian-"+this._uid))&&(e.checked="true"):(e=document.getElementById("GProuteTransportCar-"+this._uid))&&(e.checked="true");var t=document.getElementById("GProuteComputationSelect-"+this._uid);t&&(t.value=this._currentComputation);var o=document.getElementById("GProuteExclusionsToll-"+this._uid);o&&(-1!==this._currentExclusions.indexOf("toll")?o.checked=!1:o.checked=!0);var n=document.getElementById("GProuteExclusionsTunnel-"+this._uid);n&&(-1!==this._currentExclusions.indexOf("tunnel")?n.checked=!1:n.checked=!0);var r=document.getElementById("GProuteExclusionsBridge-"+this._uid);r&&(-1!==this._currentExclusions.indexOf("bridge")?r.checked=!1:r.checked=!0)},t.prototype._removeRouteStepLocations=function(){var e=document.querySelectorAll('div[id^="GPlocationPoint"]');if(0!==e.length){for(var t=[],o=0;o<e.length;o++)-1!==e[o].id.indexOf(this._uid)&&t.push(e[o]);for(var n=1;n<t.length-1;n++){var r=t[n].classList;if(0!==r.length)for(var i=0;i<r.length;i++)"GPlocationStageFlexInput"===r[i]&&document.getElementById(this._addUID("GPlocationStageRemove_"+(n+1))).click()}}},t.prototype._clearRouteResultsDetails=function(){if(this._currentRouteInformations=null,this._resultsRouteDetailsContainer){var e=this._resultsRouteDetailsContainer;if(e.childElementCount)for(;e.firstChild;)e.removeChild(e.firstChild)}if(this._resultsRouteValuesContainer){var t=this._resultsRouteValuesContainer;if(t.childElementCount)for(;t.firstChild;)t.removeChild(t.firstChild)}},t.prototype._clearRouteResultsGeometry=function(){var e=this.getMap();null!=this._geojsonRoute&&(e.removeLayer(this._geojsonRoute),this._geojsonRoute=null)},t.prototype._clearRouteResultsFeatureGeometry=function(){var e=this.getMap();null!=this._geojsonSections&&(e.removeLayer(this._geojsonSections),this._geojsonSections=null),null!=this._popupOverlay&&(e.removeOverlay(this._popupOverlay),this._popupOverlay=null),null!=this._resultsSelectInteraction&&(e.removeInteraction(this._resultsSelectInteraction),this._resultsSelectInteraction=null),null!=this._resultsHoverInteraction&&(e.removeInteraction(this._resultsHoverInteraction),this._resultsHoverInteraction=null)},t.prototype._hideRouteSuggestedLocations=function(e){if(e.target&&e.target.id&&-1!==e.target.id.indexOf("GPlocationOrigin_"))for(var t=parseInt(e.target.id.split("_")[1][0],10)-1,o=0;o<this._currentPoints.length;o++)o!==parseInt(t,10)&&this._currentPoints[o]._hideSuggestedLocation();else for(var n=0;n<this._currentPoints.length;n++)this._currentPoints[n]._hideSuggestedLocation()},t.prototype._displayWaitingContainer=function(){this._waitingContainer.className="GProuteCalcWaitingContainerVisible",this._waiting=!0;var e=this.options.routeOptions;if(e&&e.timeOut){this._timer&&(clearTimeout(this._timer),this._timer=null);var t=this;this._timer=setTimeout((function(){!0===t._waiting?t._hideWaitingContainer():t._timer&&clearTimeout(t._timer)}),16e3)}},t.prototype._hideWaitingContainer=function(){if(this._waiting){this._waitingContainer.className="GProuteCalcWaitingContainerHidden",this._waiting=!1;var e=this.options.routeOptions;e&&e.timeOut&&(clearTimeout(this._timer),this._timer=null)}},t.prototype._simplifiedInstructions=function(e){var t=[],o=e[0];1===e.length&&t.push(o);for(var n=1;n<e.length;n++){var r=e[n];if(r.instruction===o.instruction){o.distance=(parseFloat(r.distance)+parseFloat(o.distance)).toString(),o.duration=(parseFloat(r.duration)+parseFloat(o.duration)).toString();for(var i=1;i<r.geometry.coordinates.length;i++)o.geometry.coordinates.push(r.geometry.coordinates[i])}else t.push(o),o=r,n===e.length-1&&(t.push(r),o=null)}return Tr.log(t),t},t.prototype._convertSecondsToTime=function(e){var t="";e=Math.round(e);var o=Math.floor(e/3600),n=e%3600;return o&&(t=o+"h "),t+=Math.floor(n/60)+" min"},t.prototype._convertDistance=function(e){var t=parseInt(e/1e3,10);return t?t+" km":parseInt(e,10)+" m"},t}(mn.a),Mr=Ar;window.ol&&window.ol.control&&(window.ol.control.Route=Ar);var Ir={_addUID:function(e){return this._uid?e+"-"+this._uid:e},_createMainContainerElement:function(){var e=document.createElement("div");return e.id=this._addUID("GPisochron"),e.className="GPwidget",e},_createShowIsoElement:function(){var e=document.createElement("input");return e.id=this._addUID("GPshowIsochron"),e.type="checkbox",e},_createShowIsoPictoElement:function(){var e=this,t=document.createElement("label");t.id=this._addUID("GPshowIsochronPicto"),t.className="GPshowAdvancedToolPicto",t.htmlFor=this._addUID("GPshowIsochron"),t.title="Calculer une isochrone",t.addEventListener?t.addEventListener("click",(function(t){e.onShowIsoPanelClick(t)})):t.attachEvent&&t.attachEvent("onclick",(function(t){e.onShowIsoPanelClick(t)}));var o=document.createElement("span");return o.id=this._addUID("GPshowIsochronOpen"),o.className="GPshowAdvancedToolOpen",t.appendChild(o),t},_createIsoPanelElement:function(){var e=document.createElement("div");return e.id=this._addUID("GPisochronPanel"),e.className="GPpanel",e},_createIsoPanelHeaderElement:function(){var e=this,t=document.createElement("div");t.className="GPpanelHeader";var o=document.createElement("div");o.className="GPpanelTitle",o.innerHTML="Calcul d'isochrone",t.appendChild(o);var n=document.createElement("div");return n.id=this._addUID("GPisochronPanelClose"),n.className="GPpanelClose",n.title="Fermer le panneau",n.addEventListener?n.addEventListener("click",(function(){document.getElementById(e._addUID("GPshowIsochronPicto")).click()}),!1):n.attachEvent&&n.attachEvent("onclick",(function(){document.getElementById(e._addUID("GPshowIsochronPicto")).click()})),t.appendChild(n),t},_createIsoPanelFormElement:function(){var e=this,t=document.createElement("form");return t.id=this._addUID("GPisochronForm"),t.addEventListener("submit",(function(t){return t.preventDefault(),e.onIsoComputationSubmit(t),!1})),t},_createIsoWaitingElement:function(){var e=document.createElement("div");e.id=this._addUID("GPisochronCalcWaitingContainer"),e.className="GPisochronCalcWaitingContainerHidden";var t=document.createElement("p");return t.className="GPisochronCalcWaiting",t.innerHTML="Calcul en cours...",e.appendChild(t),e},_createIsoPanelFormTypeChoiceElement:function(){var e=document.createElement("div");return e.id=this._addUID("GPisochronChoice"),e},_createIsoPanelFormTypeChoiceChronElement:function(e){var t=this,o=document.createElement("div");o.className="GPisochronChoiceAlt";var n=document.createElement("input");n.id=this._addUID("GPisochronChoiceAltChron"),n.name="GPisochronChoiceMode",n.type="radio",n.checked=!!e,n.addEventListener?n.addEventListener("change",(function(e){document.getElementById(t._addUID("GPisochronValueChron")).className="GPflexInput",document.getElementById(t._addUID("GPisochronValueDist")).className="GPisochronValueHidden",t.onIsoTypeChoiceChange(e)}),!1):n.attachEvent&&n.attachEvent("onchange",(function(){document.getElementById(t._addUID("GPisochronValueChron")).className="GPflexInput",document.getElementById(t._addUID("GPisochronValueDist")).className="GPisochronValueHidden",t.onIsoTypeChoiceChange()})),n.value="isochron",o.appendChild(n);var r=document.createElement("label");r.className="GPisochronChoiceAltImg",r.htmlFor=this._addUID("GPisochronChoiceAltChron"),o.appendChild(r);var i=document.createElement("span");return i.id=this._addUID("GPisochronChoiceAltChronTxt"),i.innerHTML="isochrone",i.addEventListener?i.addEventListener("click",(function(){document.getElementById(t._addUID("GPisochronChoiceAltChron")).click()}),!1):i.attachEvent&&i.attachEvent("onclick",(function(){document.getElementById(t._addUID("GPisochronChoiceAltChron")).click()})),o.appendChild(i),o},_createIsoPanelFormTypeChoiceDistElement:function(e){var t=this,o=document.createElement("div");o.className="GPisochronChoiceAlt";var n=document.createElement("input");n.id=this._addUID("GPisochronChoiceAltDist"),n.name="GPisochronChoiceMode",n.type="radio",n.checked=!!e,n.addEventListener?n.addEventListener("change",(function(e){document.getElementById(t._addUID("GPisochronValueDist")).className="GPflexInput",document.getElementById(t._addUID("GPisochronValueChron")).className="GPisochronValueHidden",t.onIsoTypeChoiceChange(e)}),!1):n.attachEvent&&n.attachEvent("onchange",(function(){document.getElementById(t._addUID("GPisochronValueDist")).className="GPflexInput",document.getElementById(t._addUID("GPisochronValueChron")).className="GPisochronValueHidden",t.onIsoTypeChoiceChange()})),n.value="isodistance",o.appendChild(n);var r=document.createElement("label");r.className="GPisochronChoiceAltImg",r.htmlFor=this._addUID("GPisochronChoiceAltDist"),o.appendChild(r);var i=document.createElement("span");return i.id=this._addUID("GPisochronChoiceAltDistTxt"),i.innerHTML="isodistance",i.addEventListener?i.addEventListener("click",(function(){document.getElementById(t._addUID("GPisochronChoiceAltDist")).click()}),!1):i.attachEvent&&i.attachEvent("onclick",(function(){document.getElementById(t._addUID("GPisochronChoiceAltDist")).click()})),o.appendChild(i),o},_createIsoPanelFormValueIsochronElement:function(e){var t=this,o=document.createElement("div");o.id=this._addUID("GPisochronValueChron"),o.className=e?"GPflexInput":"GPisochronValueHidden";var n=document.createElement("label");n.id=this._addUID("GPisochronValueChronLabel"),n.htmlFor=this._addUID("GPisochronValueChronInput"),n.innerHTML="Temps",o.appendChild(n);var r=document.createElement("input");r.id=this._addUID("GPisochronValueChronInput1"),r.min="0",r.step="1",r.value="0",r.type="number",r.addEventListener?r.addEventListener("change",(function(e){"function"==typeof t.onIsoValueChronTimeMinuteChange&&t.onIsoValueChronTimeHourChange(e)})):r.attachEvent&&r.attachEvent("onchange",(function(e){"function"==typeof t.onIsoValueChronTimeMinuteChange&&t.onIsoValueChronTimeHourChange(e)})),o.appendChild(r);var i=document.createElement("label");i.innerHTML="h",o.appendChild(i);var s=document.createElement("input");s.id=this._addUID("GPisochronValueChronInput2"),s.min="0",s.max="59",s.step="1",s.value="0",s.type="number",s.addEventListener?s.addEventListener("change",(function(e){"function"==typeof t.onIsoValueChronTimeMinuteChange&&t.onIsoValueChronTimeMinuteChange(e)})):s.attachEvent&&s.attachEvent("onchange",(function(e){"function"==typeof t.onIsoValueChronTimeMinuteChange&&t.onIsoValueChronTimeMinuteChange(e)})),o.appendChild(s);var a=document.createElement("label");return a.innerHTML="min",o.appendChild(a),o},_createIsoPanelFormValueIsodistanceElement:function(e){var t=this,o=document.createElement("div");o.id=this._addUID("GPisochronValueDist"),o.className=e?"GPflexInput":"GPisochronValueHidden";var n=document.createElement("label");n.id=this._addUID("GPisochronValueDistLabel"),n.htmlFor=this._addUID("GPisochronValueDistInput"),n.innerHTML="Distance",o.appendChild(n);var r=document.createElement("input");r.id=this._addUID("GPisochronValueDistInput"),r.min="0",r.step="any",r.value="0",r.type="number",r.addEventListener?r.addEventListener("change",(function(e){"function"==typeof t.onIsoValueDistChange&&t.onIsoValueDistChange(e)})):r.attachEvent&&r.attachEvent("onchange",(function(e){"function"==typeof t.onIsoValueDistChange&&t.onIsoValueDistChange(e)})),o.appendChild(r);var i=document.createElement("label");return i.innerHTML="km",o.appendChild(i),o},_createIsoPanelFormModeChoiceElement:function(){var e=document.createElement("div");return e.id=this._addUID("GPisochronModeChoice"),e},_createIsoPanelFormModeChoiceTransportElement:function(e){var t=this,o=document.createElement("div");o.id=this._addUID("GPisochronTransportChoice");var n=document.createElement("span");n.className="GPisochronModeLabel",n.innerHTML="Mode de transport",o.appendChild(n);for(var r=0;r<e.length;r++){var i=e[r];if("Voiture"===i){var s=document.createElement("input");s.id=this._addUID("GPisochronTransportCar"),s.type="radio",s.name="GPisochronTransport",0===r&&(s.checked=!0),s.addEventListener?s.addEventListener("change",(function(e){t.onIsoModeTransportChange(e)})):s.attachEvent&&s.attachEvent("onchange",(function(e){t.onIsoModeTransportChange(e)})),s.value="Voiture",o.appendChild(s);var a=document.createElement("label");a.className="GPisochronTransportImg",a.htmlFor=this._addUID("GPisochronTransportCar"),a.title="Voiture",o.appendChild(a)}if("Pieton"===i){var l=document.createElement("input");l.id=this._addUID("GPisochronTransportPedestrian"),l.type="radio",l.name="GPisochronTransport",0===r&&(l.checked=!0),l.addEventListener?l.addEventListener("change",(function(e){t.onIsoModeTransportChange(e)})):l.attachEvent&&l.attachEvent("onchange",(function(e){t.onIsoModeTransportChange(e)})),l.value="Pieton",o.appendChild(l);var c=document.createElement("label");c.className="GPisochronTransportImg",c.htmlFor=this._addUID("GPisochronTransportPedestrian"),c.title="PiÃ©ton",o.appendChild(c)}}return o},_createIsoPanelFormModeChoiceDirectionElement:function(e){var t=this,o=document.createElement("div");o.id=this._addUID("GPisochronDirectionChoice");var n=document.createElement("span");n.className="GPisochronModeLabel",n.innerHTML="Sens de parcours",o.appendChild(n);var r=document.createElement("select");r.id=this._addUID("GPisochronDirectionSelect"),r.className="GPinputSelect",r.addEventListener("change",(function(e){t.onIsoModeDirectionChange(e)}));for(var i=0;i<e.length;i++){var s=e[i];if("departure"===s.toLowerCase()){var a=document.createElement("option");0===i&&(a.selected="selected"),a.value="departure",a.text="DÃ©part",r.appendChild(a)}if("arrival"===s.toLowerCase()){var l=document.createElement("option");0===i&&(l.selected="selected"),l.value="arrival",l.text="ArrivÃ©e",r.appendChild(l)}}return o.appendChild(r),o},_createShowIsoExclusionsElement:function(){var e=document.createElement("input");return e.id=this._addUID("GPshowIsoExclusions"),e.type="checkbox",e},_createShowIsoExclusionsPictoElement:function(){var e=document.createElement("label");return e.id=this._addUID("GPshowIsoExclusionsPicto"),e.className="GPshowMoreOptionsImage GPshowMoreOptions GPshowIsoExclusionsPicto",e.htmlFor=this._addUID("GPshowIsoExclusions"),e.title="Exclusions",e.style.top="240px",e},_createIsoPanelFormExclusionsElement:function(){var e=document.createElement("div");e.id=this._addUID("GPisoExclusions");var t=document.createElement("span");return t.className="GPisoExclusionsLabel",t.innerHTML="Passages autorisÃ©s",e.appendChild(t),e},_createIsoPanelFormExclusionOptionsElement:function(e){var t=this,o=document.createElement("div");for(var n in o.className="GPisoExclusionsOptions",e)if(e.hasOwnProperty(n)){var r=e[n];switch(n){case"toll":var i=document.createElement("input");i.id=this._addUID("GPisoExclusionsToll"),i.type="checkbox",i.checked=!r,i.addEventListener?i.addEventListener("change",(function(e){t.onIsoExclusionsChange(e)})):i.attachEvent&&i.attachEvent("onchange",(function(e){t.onIsoExclusionsChange(e)})),i.value="Toll",o.appendChild(i);var s=document.createElement("label");s.className="GPisoExclusionsOption",s.htmlFor=this._addUID("GPisoExclusionsToll"),s.innerHTML="PÃ©ages",o.appendChild(s);break;case"tunnel":var a=document.createElement("input");a.id=this._addUID("GPisoExclusionsTunnel"),a.type="checkbox",a.checked=!r,a.addEventListener?a.addEventListener("change",(function(e){t.onIsoExclusionsChange(e)})):a.attachEvent&&a.attachEvent("onchange",(function(e){t.onIsoExclusionsChange(e)})),a.value="Tunnel",o.appendChild(a);var l=document.createElement("label");l.className="GPisoExclusionsOption",l.htmlFor=this._addUID("GPisoExclusionsTunnel"),l.innerHTML="Tunnels",o.appendChild(l);break;case"bridge":var c=document.createElement("input");c.id=this._addUID("GPisoExclusionsBridge"),c.type="checkbox",c.checked=!r,c.addEventListener?c.addEventListener("change",(function(e){t.onIsoExclusionsChange(e)})):c.attachEvent&&c.attachEvent("onchange",(function(e){t.onIsoExclusionsChange(e)})),c.value="Bridge",o.appendChild(c);var u=document.createElement("label");u.className="GPisoExclusionsOption",u.htmlFor=this._addUID("GPisoExclusionsBridge"),u.innerHTML="Ponts",o.appendChild(u)}}return o},_createIsoSubmitFormElement:function(){var e=document.createElement("input");return e.id=this._addUID("GPisochronSubmit"),e.className="GPinputSubmit",e.type="submit",e.value="Calculer",e},_createIsoFormResetElement:function(){var e=this,t=document.createElement("div");return t.id=this._addUID("GPisochronReset"),t.title="RÃ©initialiser les paramÃ¨tres",t.addEventListener("click",(function(t){e.onIsoResetClick(t)})),t}};function Rr(e){return(Rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Lr=Mo.a.getLogger("isocurve"),kr=function(e){function t(o){if(o=o||{},!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.initialize(o),this._container=this._createMainContainerElement(),this._containerElement=null,o.element&&o.element.appendChild&&(o.element.appendChild(this._container),this._containerElement=o.element),e.call(this,{element:this._containerElement||this._container,target:o.target,render:o.render})}return e&&(t.__proto__=e),t.prototype=Object.create(e.prototype,{}),Wo.assign(t.prototype,Ir),t.prototype.constructor=t,t.prototype.getCollapsed=function(){return this.collapsed},t.prototype.setCollapsed=function(e){void 0!==e?e&&this.collapsed||!e&&!this.collapsed||(e?document.getElementById("GPisochronPanelClose-"+this._uid).click():document.getElementById("GPshowIsochronPicto-"+this._uid).click(),this.collapsed=e):Lr.log("[ERROR] Isocurve:setCollapsed - missing collapsed parameter")},t.prototype.getLayer=function(){return this._geojsonLayer},t.prototype.setMap=function(t){t&&(this._container=this._initContainer(t),this.draggable&&zn.dragElement(this._IsoPanelContainer,this._IsoPanelHeaderContainer,t.getTargetElement())),e.prototype.setMap.call(this,t)},t.prototype.compute=function(e,t,o){if(this._clear(),this._showIsoContainer.checked||this._pictoIsoContainer.click(),this.getMap()){var n={direction:"departure",method:"time",transport:"Voiture",exclusions:[]};Wo.assign(n,o),this._originPoint.setCoordinate(e);var r=this._originPoint.getCoordinate();if(document.getElementById("GPlocationOrigin_1-"+this._uid).value=r[0].toFixed(4)+" / "+r[1].toFixed(4),this._currentTransport=n.transport,"Voiture"===n.transport?document.getElementById("GPisochronTransportCar-"+this._uid).checked=!0:document.getElementById("GPisochronTransportPedestrian-"+this._uid).checked=!0,this._currentExclusions=n.exclusions,this._currentComputation=n.method,"time"===n.method){var i=t.split(".");this._currentTimeHour=i[0]||0,document.getElementById("GPisochronValueChronInput1-"+this._uid).value=this._currentTimeHour,this._currentTimeMinute=i[1]||0,document.getElementById("GPisochronValueChronInput2-"+this._uid).value=this._currentTimeMinute,document.getElementById("GPisochronChoiceAltChron-"+this._uid).click()}else this._currentDistance=t,document.getElementById("GPisochronValueDistInput-"+this._uid).value=this._currentDistance,document.getElementById("GPisochronChoiceAltDist-"+this._uid).click();this._currentDirection=n.direction,document.getElementById("GPisochronDirectionSelect-"+this._uid).selectedIndex="departure"===n.direction?0:1,this.onIsoComputationSubmit()}},t.prototype.initialize=function(e){this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,methods:["time","distance"],graphs:["Voiture","Pieton"],exclusions:{toll:!1,tunnel:!1,bridge:!1},directions:["departure","arrival"],markerOpts:{url:An.lightOrange,offset:An.defaultOffset},isocurveOptions:{},autocompleteOptions:{},layerDescription:{title:"Isochrone/Isodistance",description:"isochrones/isodistance basÃ© sur un graphe"}},Wo.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=yn.generate(),this._currentTransport=null,this._initTransport(),this._currentComputation=null,this._initComputation(),this._currentExclusions=[],this._initExclusions(),this._currentDirection=null,this._initDirection(),this._originPoint=null,this._showIsoContainer=null,this._pictoIsoContainer=null,this._waitingContainer=null,this._formContainer=null,this._IsoPanelContainer=null,this._IsoPanelHeaderContainer=null,this._currentIsoResults=null,this._geojsonLayer=null,this._waiting=!1,this._timer=null,this._defaultFeatureStyle=new Do.c({fill:new Bo.a({color:"rgba(0, 183, 152, 0.7)"})}),this._resources={},this._noRightManagement=!1,this._checkRightsManagement(),this.listenerKey=null},t.prototype._checkInputOptions=function(e){var t;if(e.methods)if(Array.isArray(e.methods))if(0===e.methods.length)e.methods=null;else for(t=0;t<e.methods.length;t++)"string"!=typeof e.methods[t]&&Lr.log("[ol.control.Isocurve] ERROR : parameter 'methods' elements should be of type 'string'");else Lr.warn("'methods' parameter should be an array"),e.methods=null;if(e.graphs)if(Array.isArray(e.graphs))if(0===e.graphs.length)e.graphs=null;else for(t=0;t<e.graphs.length;t++)"string"!=typeof e.graphs[t]?Lr.log("[ol.control.Isocurve] ERROR : parameter 'graphs' elements should be of type 'string'"):("pieton"===e.graphs[t].toLowerCase()&&(e.graphs[t]="Pieton"),"voiture"===e.graphs[t].toLowerCase()&&(e.graphs[t]="Voiture"));else Lr.warn("'graphs' parameter should be an array"),e.graphs=null;if(e.directions)if(Array.isArray(e.directions))if(0===e.directions.length)e.directions=null;else for(t=0;t<e.directions.length;t++)"string"!=typeof e.directions[t]&&Lr.log("[ol.control.Isocurve] ERROR : parameter 'directions' elements should be of type 'string'");else Lr.warn("'directions' parameter should be an array"),e.directions=null;"true"===e.collapsed&&(e.collapsed=!0),"false"===e.collapsed&&(e.collapsed=!1)},t.prototype._initTransport=function(){this._currentTransport="Voiture";var e=this.options.graphs;e&&0!==e.length||(this.options.graphs=["Voiture","Pieton"]),Array.isArray(e)&&e.length&&("Voiture"!==e[0]&&"Pieton"!==e[0]||(this._currentTransport=e[0]));var t=this.options.isocurveOptions;t.graph&&(this._currentTransport=t.graph)},t.prototype._initComputation=function(){this._currentComputation="time";var e=this.options.methods;e&&0!==e.length||(this.options.methods=["time","distance"]),Array.isArray(e)&&e.length&&("time"!==e[0]&&"distance"!==e[0]||(this._currentComputation=e[0]));var t=this.options.isocurveOptions;t.method&&(this._currentComputation=t.method),t.time&&(this._currentComputation="time"),t.distance&&(this._currentComputation="distance")},t.prototype._initDirection=function(){this._currentDirection="departure";var e=this.options.directions;e&&0!==e.length||(this.options.directions=["departure","arrival"]),Array.isArray(e)&&e.length&&("departure"!==e[0]&&"arrival"!==e[0]||(this._currentDirection=e[0]));var t=this.options.isocurveOptions;t.reverse||(this._currentDirection="departure"),!0===t.reverse&&(this._currentDirection="arrival",this.options.directions=["arrival","departure"])},t.prototype._initExclusions=function(){this._currentExclusions=[];var e=this.options.exclusions;if((!e||"object"===Rr(e)&&0===Object.keys(e).length)&&(this.options.exclusions={toll:!1,tunnel:!1,bridge:!1}),e&&"object"===Rr(e)&&Object.keys(e).length)for(var t in e)e.hasOwnProperty(t)&&e.k&&this._currentExclusions.push(t);var o=this.options.isocurveOptions;Array.isArray(o.exclusions)&&(this._currentExclusions=o.exclusions)},t.prototype._checkRightsManagement=function(){var e=null,t=[],o=null;o=this.options.isocurveOptions.apiKey,(t=(e=this.options.isocurveOptions.filterOptions)?e.type:[])&&0!==t.length||(t=["Voiture","Pieton"]);var n=Rn({key:o||this.options.apiKey,resources:t,services:["Isochrone"]});Lr.log("rightManagementIsocurve",n),o=this.options.autocompleteOptions.apiKey,(t=(e=this.options.autocompleteOptions.filterOptions)?e.type:[])&&0!==t.length||(t=["PositionOfInterest","StreetAddress"]);var r=Rn({key:o||this.options.apiKey,resources:t,services:["AutoCompletion"]});Lr.log("rightManagementAutoComplete",r),n||r||(this._noRightManagement=!0),r&&(this._resources.AutoCompletion={},this._resources.AutoCompletion.resources=r.AutoCompletion,this._resources.AutoCompletion.key=r.key),n&&(this._resources.Isocurve={},this._resources.Isocurve.resources=n.Isochrone,this._resources.Isocurve.key=n.key)},t.prototype._initContainer=function(e){var t=this,o=this._container,n=this._showIsoContainer=this._createShowIsoElement();o.appendChild(n),this.collapsed||(n.checked=!0);var r=this._pictoIsoContainer=this._createShowIsoPictoElement();o.appendChild(r);var i=this._IsoPanelContainer=this._createIsoPanelElement(),s=this._IsoPanelHeaderContainer=this._createIsoPanelHeaderElement();i.appendChild(s);var a=this._formContainer=this._createIsoPanelFormElement(),l=this._createIsoPanelFormPointElement(e);a.appendChild(l);for(var c=!1,u=!1,d=this._createIsoPanelFormTypeChoiceElement(),h=0;h<this.options.methods.length;h++)"time"===this.options.methods[h]&&(c=0===h,d.appendChild(this._createIsoPanelFormTypeChoiceChronElement(c))),"distance"===this.options.methods[h]&&(u=0===h,d.appendChild(this._createIsoPanelFormTypeChoiceDistElement(u)));a.appendChild(d),a.appendChild(this._createIsoPanelFormValueIsochronElement(c)),a.appendChild(this._createIsoPanelFormValueIsodistanceElement(u));var p=this._createIsoPanelFormModeChoiceElement();if(p.appendChild(this._createIsoPanelFormModeChoiceTransportElement(this.options.graphs)),p.appendChild(this._createIsoPanelFormModeChoiceDirectionElement(this.options.directions)),a.appendChild(p),this.options.exclusions&&"object"===Rr(this.options.exclusions)&&0!==Object.keys(this.options.exclusions).length){a.appendChild(this._createShowIsoExclusionsElement()),a.appendChild(this._createShowIsoExclusionsPictoElement());var f=this._createIsoPanelFormExclusionsElement();f.appendChild(this._createIsoPanelFormExclusionOptionsElement(this.options.exclusions)),a.appendChild(f)}var m=this._createIsoFormResetElement();a.appendChild(m);var g=this._submitContainer=this._createIsoSubmitFormElement();a.appendChild(g),i.appendChild(a);var y=this._waitingContainer=this._createIsoWaitingElement();return i.appendChild(y),o.appendChild(i),o.addEventListener&&o.addEventListener("click",(function(e){return t._hideIsoSuggestedLocations(e)})),o},t.prototype._createIsoPanelFormPointElement=function(e){this._originPoint=new xr({apiKey:this.options.apiKey||null,tag:{id:1,groupId:this._uid,markerOpts:this.options.markerOpts,label:"DÃ©part",display:!0},autocompleteOptions:this.options.autocompleteOptions||null}),this._originPoint.setMap(e);var t=this;return document.getElementById("GPlocationOriginPointerImg_1-"+this._uid).onclick=function(){t._clearGeojsonLayer();var e=t.getMap();t._originPoint._inputShowPointerContainer.checked?(t._formContainer.className="GPisochronFormMini",this.listenerKey=e.on("click",(function(){t._formContainer.className="",t.dispatchEvent("isocurve:drawend")}))):(t._formContainer.className="",Object(gn.b)(this.listenerKey)),t.dispatchEvent("isocurve:drawstart")},document.getElementById("GPlocationOriginLabel_1-"+this._uid).onclick=function(){t._clearGeojsonLayer(),t._formContainer.className="",e.un("click",(function(){t._formContainer.className=""})),t.dispatchEvent("isocurve:drawend")},document.getElementById("GPlocationOrigin_1-"+this._uid).onclick=function(){t._clearGeojsonLayer(),t.dispatchEvent("isocurve:drawend")},this._originPoint._container},t.prototype.onIsoComputationSubmit=function(){if(this._originPoint&&this._originPoint.getCoordinate&&this._originPoint.getCoordinate()){var e,t,o=this._originPoint.getCoordinate(),n={x:o[0],y:o[1]};if(Lr.log("origin : ",n),"time"===this._currentComputation.toLowerCase()){var r=document.getElementById("GPisochronValueChronInput1-"+this._uid),i=parseInt(r.value,10);isNaN&&isNaN(i)&&(i=0);var s=document.getElementById("GPisochronValueChronInput2-"+this._uid),a=parseInt(s.value,10);isNaN&&isNaN(a)&&(a=0),e=3600*i+60*a,Lr.log("time : "+e)}if("distance"===this._currentComputation.toLowerCase()){var l=document.getElementById("GPisochronValueDistInput-"+this._uid);t=1e3*parseFloat(l.value),Lr.log("distance : "+t)}if(e||t)if(this._noRightManagement)Lr.log("[Isocurve] no rights for this service");else{var c=this.options.isocurveOptions||{},u=c.protocol||"XHR",d=c.timeOut||0;"JSONP"===u&&0===d&&(d=15e3);var h=this,p={position:n,graph:c.graph||this._currentTransport,exclusions:c.exclusions||this._currentExclusions,method:c.method||this._currentComputation,smoothing:c.smoothing||!0,timeOut:d,protocol:u,onSuccess:function(e){Lr.log(e),e&&h._drawIsoResults(e)},onFailure:function(e){h._hideWaitingContainer(),Lr.log(e.message)}};("arrival"===this._currentDirection.toLowerCase()||c.reverse)&&(p.reverse=!0),e&&(p.time=e),t&&(p.distance=t),this._requestIsoCurve(p)}else Lr.log("[Isocurve] Missing time or distance parameter to submit isocurve request")}else Lr.log("[Isocurve] Missing position parameter to submit isocurve request")},t.prototype.onShowIsoPanelClick=function(){var e=this.getMap();In.unset(e),this.collapsed=this._showIsoContainer.checked,this.dispatchEvent("change:collapsed")},t.prototype.onIsoTypeChoiceChange=function(e){var t=e.target.value;t&&("isodistance"===t&&(this._currentComputation="distance"),"isochron"===t&&(this._currentComputation="time"))},t.prototype.onIsoModeTransportChange=function(e){var t=e.target.value;t&&(this._currentTransport=t)},t.prototype.onIsoModeDirectionChange=function(e){var t=e.target.value;t&&("arrival"===t.toLowerCase()?this._originPoint._inputLabelContainer.innerHTML="ArrivÃ©e":this._originPoint._inputLabelContainer.innerHTML="DÃ©part",this._currentDirection=t)},t.prototype.onIsoExclusionsChange=function(e){var t=e.target.value,o=e.target.checked;if(t){for(var n=!1,r=null,i=0;i<this._currentExclusions.length;i++)this._currentExclusions[i]===t&&(r=i,n=!0);n||o||this._currentExclusions.push(t),n&&o&&(this._currentExclusions[r]=null)}},t.prototype.onIsoResetClick=function(){this._clear()},t.prototype._requestIsoCurve=function(e){if(e&&("object"!==Rr(e)||0!==Object.keys(e).length)&&e.position)if(!this._noRightManagement&&this._resources.Isocurve){var t=this._resources.Isocurve.resources;if(!t||"object"===Rr(t)&&0===Object.keys(t).length)Lr.log("no rights for this service");else{for(var o=!1,n=0;n<t.length;n++)t[n]===e.graph&&(o=!0);if(o){var r=this._resources.Isocurve.key;e.apiKey=this.options.isocurveOptions.apiKey||this.options.apiKey||r,"boolean"!=typeof e.ssl&&("boolean"==typeof this.options.ssl?e.ssl=this.options.ssl:e.ssl=!0),Lr.log(e),this._clearGeojsonLayer(),this._displayWaitingContainer(),Ao.Services.isoCurve(e)}else Lr.log("no rights for this service !?")}}else Lr.log("no rights for this service")},t.prototype._drawIsoResults=function(e){var t=this;if(this._currentIsoResults=e,this._hideWaitingContainer(),e.geometry){var o,n=this.getMap(),r={type:"Feature",crs:{type:"name",properties:{name:"EPSG:4326"}},geometry:e.geometry},i=new br.a({defaultDataProjection:"EPSG:4326"}),s=n.getView().getProjection().getCode(),a=i.readFeatures(r,{dataProjection:"EPSG:4326",featureProjection:s});if(this._geojsonLayer=new sr.a({source:new d.b({features:a}),style:this._defaultFeatureStyle,opacity:.9}),"Pieton"===this._currentTransport?(o="piÃ©ton",this._geojsonLayer.gpResultLayerId="Pieton$GEOPORTAIL:GPP:Isocurve"):(o="voiture",this._geojsonLayer.gpResultLayerId="Voiture$GEOPORTAIL:GPP:Isocurve"),n.addLayer(this._geojsonLayer),a[0]&&a[0].getGeometry()&&a[0].getGeometry().getExtent()){var l=a[0].getGeometry().getExtent();n.getView().fit(l,n.getSize())}var c="time"===this._currentComputation?"Isochrone":"Isodistance";n.getControls().forEach((function(e){if(e instanceof Sn){var n=t._geojsonLayer.gpLayerId;e._layers[n].title===n&&e.addLayer(t._geojsonLayer,{title:t.options.layerDescription.title+" ("+c+"/"+o+")",description:t.options.layerDescription.description})}}))}},t.prototype._clear=function(){this._clearIsoInputs(),this._originPoint.clear(),this._clearGeojsonLayer(),this._currentIsoResults=null},t.prototype._clearIsoInputs=function(){var e=document.getElementById("GPisochronValueChronInput1-"+this._uid);e&&(e.value="0");var t=document.getElementById("GPisochronValueChronInput2-"+this._uid);t&&(t.value="0");var o,n,r=document.getElementById("GPisochronValueDistInput-"+this._uid);r&&(r.value="0"),this._initTransport(),this._initComputation(),this._initDirection(),this._initExclusions(),"Pieton"===this._currentTransport?(o=document.getElementById("GPisochronTransportPedestrian-"+this._uid))&&(o.checked="true"):(o=document.getElementById("GPisochronTransportCar-"+this._uid))&&(o.checked="true"),"distance"===this._currentComputation.toLowerCase()?((n=document.getElementById("GPisochronChoiceAltDist-"+this._uid))&&(n.checked="true"),document.getElementById("GPisochronValueDist-"+this._uid)&&(document.getElementById("GPisochronValueDist-"+this._uid).className="GPflexInput"),document.getElementById("GPisochronValueChron-"+this._uid)&&(document.getElementById("GPisochronValueChron-"+this._uid).className="GPisochronValueHidden")):((n=document.getElementById("GPisochronChoiceAltChron-"+this._uid))&&(n.checked="true"),document.getElementById("GPisochronValueChron-"+this._uid)&&(document.getElementById("GPisochronValueChron-"+this._uid).className="GPflexInput"),document.getElementById("GPisochronValueDist-"+this._uid)&&(document.getElementById("GPisochronValueDist-"+this._uid).className="GPisochronValueHidden"));var i=document.getElementById("GPisochronDirectionSelect-"+this._uid);i&&(i.value=this._currentDirection),"arrival"===this._currentDirection?this._originPoint._inputLabelContainer.innerHTML="ArrivÃ©e":this._originPoint._inputLabelContainer.innerHTML="DÃ©part";var s=document.getElementById("GPisoExclusionsToll-"+this._uid);s&&(-1!==this._currentExclusions.indexOf("toll")?s.checked=!1:s.checked=!0);var a=document.getElementById("GPisoExclusionsTunnel-"+this._uid);a&&(-1!==this._currentExclusions.indexOf("tunnel")?a.checked=!1:a.checked=!0);var l=document.getElementById("GPisoExclusionsBridge-"+this._uid);l&&(-1!==this._currentExclusions.indexOf("bridge")?l.checked=!1:l.checked=!0)},t.prototype._clearGeojsonLayer=function(){var e=this.getMap();this._geojsonLayer&&(e.removeLayer(this._geojsonLayer),this._geojsonLayer=null)},t.prototype._hideIsoSuggestedLocations=function(e){e.target&&e.target.id&&-1!==e.target.id.indexOf("GPlocationOrigin_")||this._originPoint._hideSuggestedLocation()},t.prototype._displayWaitingContainer=function(){this._waitingContainer.className="GPisochronCalcWaitingContainerVisible",this._waiting=!0;var e=this.options.isocurveOptions;if(e&&e.timeOut){this._timer&&(clearTimeout(this._timer),this._timer=null);var t=this;this._timer=setTimeout((function(){!0===t._waiting?t._hideWaitingContainer():t._timer&&clearTimeout(t._timer)}),16e3)}},t.prototype._hideWaitingContainer=function(){if(this._waiting){this._waitingContainer.className="GPisochronCalcWaitingContainerHidden",this._waiting=!1;var e=this.options.isocurveOptions;e&&e.timeOut&&(clearTimeout(this._timer),this._timer=null)}},t}(mn.a),Gr=kr;window.ol&&window.ol.control&&(window.ol.control.Isocurve=kr);var Nr=o("./node_modules/ol/Feature.js"),Dr={_addUID:function(e){return this._uid?e+"-"+this._uid:e},_createMainContainerElement:function(){var e=document.createElement("div");return e.id=this._addUID("GPreverseGeocoding"),e.className="GPwidget",e},_createShowReverseGeocodingElement:function(){var e=document.createElement("input");return e.id=this._addUID("GPshowReverseGeocoding"),e.type="checkbox",e},_createShowReverseGeocodingPictoElement:function(){var e=this,t=document.createElement("label");t.id=this._addUID("GPshowReverseGeocodingPicto"),t.className="GPshowAdvancedToolPicto",t.htmlFor=this._addUID("GPshowReverseGeocoding"),t.title="Ouvrir la recherche inverse",t.addEventListener?t.addEventListener("click",(function(){e.onShowReverseGeocodingClick()})):t.attachEvent&&t.attachEvent("onclick",(function(){e.onShowReverseGeocodingClick()}));var o=document.createElement("span");return o.id=this._addUID("GPshowReverseGeocodingOpen"),o.className="GPshowAdvancedToolOpen",t.appendChild(o),t},_createReverseGeocodingWaitingElement:function(){var e=document.createElement("div");e.id=this._addUID("GPreverseGeocodingCalcWaitingContainer"),e.className="GPreverseGeocodingCalcWaitingContainerHidden";var t=document.createElement("p");return t.className="GPreverseGeocodingCalcWaiting",t.innerHTML="Recherche en cours...",e.appendChild(t),e},_createReverseGeocodingResultsPanelElement:function(){var e=document.createElement("div");return e.id=this._addUID("GPreverseGeocodingResultsPanel"),e.className="GPpanel GPreverseGeocodingComponentHidden",e},_createReverseGeocodingResultsListElement:function(){var e=document.createElement("div");return e.id=this._addUID("GPreverseGeocodingResultsList"),e},_createReverseGeocodingResultElement:function(e,t){var o=this,n=document.getElementById(this._addUID("GPreverseGeocodingResultsList")),r=document.createElement("div");r.id=this._addUID("ReverseGeocodedLocation_"+t),r.className="GPautoCompleteProposal",r.innerHTML=e,r.title=e,r.addEventListener?(r.addEventListener("mouseover",(function(e){o.onReverseGeocodingResultMouseOver(e)})),r.addEventListener("mouseout",(function(e){o.onReverseGeocodingResultMouseOut(e)})),r.addEventListener("click",(function(e){"function"==typeof o.onReverseGeocodingResultClick&&o.onReverseGeocodingResultClick(e)}))):r.attachEvent&&(r.attachEvent("onmouseover",(function(e){o.onReverseGeocodingResultMouseOver(e)})),r.attachEvent("onmouseout",(function(e){o.onReverseGeocodingResultMouseOut(e)})),r.attachEvent("onclick",(function(e){"function"==typeof o.onReverseGeocodingResultClick&&o.onReverseGeocodingResultClick(e)}))),n.appendChild(r)},_createReverseGeocodingPanelElement:function(){var e=document.createElement("div");return e.id=this._addUID("GPreverseGeocodingPanel"),e.className="GPpanel",e},_createReverseGeocodingPanelHeaderElement:function(){var e=document.createElement("div");return e.className="GPpanelHeader",e},_createReverseGeocodingPanelReturnPictoElement:function(){var e=this,t=document.createElement("div");return t.id=this._addUID("GPreverseGeocodingReturnPicto"),t.title="Nouvelle recherche",t.className="GPreverseGeocodingReturnPictoHidden",t.addEventListener?t.addEventListener("click",(function(t){document.getElementById(e._addUID("GPreverseGeocodingResultsPanel")).className="GProuteComponentHidden",document.getElementById(e._addUID("GPreverseGeocodingForm")).className="",document.getElementById(e._addUID("GPreverseGeocodingHeaderTitle")).innerHTML="Recherche inverse",document.getElementById(e._addUID("GPreverseGeocodingReturnPicto")).className="GPreverseGeocodingReturnPictoHidden",e.onGPreverseGeocodingReturnPictoClick(t)})):t.attachEvent&&t.attachEvent("onclick",(function(t){document.getElementById(e._addUID("GPreverseGeocodingResultsPanel")).className="GProuteComponentHidden",document.getElementById(e._addUID("GPreverseGeocodingForm")).className="",document.getElementById(e._addUID("GPreverseGeocodingHeaderTitle")).innerHTML="Recherche inverse",document.getElementById(e._addUID("GPreverseGeocodingReturnPicto")).className="GPreverseGeocodingReturnPictoHidden",e.onGPreverseGeocodingReturnPictoClick(t)})),t},_createReverseGeocodingPanelTitleElement:function(){var e=document.createElement("div");return e.className="GPpanelTitle",e.id=this._addUID("GPreverseGeocodingHeaderTitle"),e.innerHTML="Recherche inverse",e},_createReverseGeocodingPanelCloseElement:function(){var e=this,t=document.createElement("div");return t.id=this._addUID("GPreverseGeocodingPanelClose"),t.className="GPpanelClose",t.title="Fermer le panneau",t.addEventListener?t.addEventListener("click",(function(){document.getElementById(e._addUID("GPshowReverseGeocodingPicto")).click()}),!1):t.attachEvent&&t.attachEvent("onclick",(function(){document.getElementById(e._addUID("GPshowReverseGeocodingPicto")).click()})),t},_createReverseGeocodingPanelFormElement:function(){var e=this,t=document.createElement("form");return t.id=this._addUID("GPreverseGeocodingForm"),t.addEventListener?t.addEventListener("submit",(function(t){t.preventDefault(),e.onReverseGeocodingSubmit()})):t.attachEvent&&t.attachEvent("onsubmit",(function(t){t.preventDefault(),e.onReverseGeocodingSubmit()})),t},_createReverseGeocodingFormModeChoiceGeocodingTypeElement:function(e){var t=this,o=document.createElement("div");o.className="GPflexInput";var n=document.createElement("label");n.className="GPreverseGeocodingCodeLabel",n.innerHTML="Recherche par",n.title="Recherche par",o.appendChild(n);var r=document.createElement("select");r.className="GPreverseGeocodingCode",r.addEventListener?r.addEventListener("change",(function(e){t.onReverseGeocodingTypeChange(e)})):r.attachEvent&&r.attachEvent("onchange",(function(e){t.onReverseGeocodingTypeChange(e)})),e&&Array.isArray(e)||(e=["StreetAddress","PositionOfInterest","CadastralParcel"]);for(var i=0;i<e.length;i++)switch(e[i]){case"PositionOfInterest":var s=document.createElement("option");s.value="PositionOfInterest",s.text="Lieux/toponymes",r.appendChild(s);break;case"StreetAddress":var a=document.createElement("option");a.value="StreetAddress",a.text="Adresses",r.appendChild(a);break;case"CadastralParcel":var l=document.createElement("option");l.value="CadastralParcel",l.text="Parcelles cadastrales",r.appendChild(l);break;case"Administratif":var c=document.createElement("option");c.value="Administratif",c.text="UnitÃ©s administratives",r.appendChild(c)}return o.appendChild(r),o},_createReverseGeocodingFormModeChoiceGeocodingDelimitationElement:function(e){var t=this,o=document.createElement("div");o.className="GPflexInput";var n=document.createElement("label");n.className="GPreverseGeocodingCodeLabel",n.innerHTML="DÃ©limitation",n.title="DÃ©limitation",o.appendChild(n);var r=document.createElement("select");r.className="GPreverseGeocodingCode",r.addEventListener?r.addEventListener("change",(function(e){t.onReverseGeocodingDelimitationChange(e)})):r.attachEvent&&r.attachEvent("onchange",(function(e){t.onReverseGeocodingDelimitationChange(e)})),e&&Array.isArray(e)||(e=["Point","Circle","Extent"]);for(var i=0;i<e.length;i++)switch(e[i].toLowerCase()){case"point":var s=document.createElement("option");s.value="point",s.text="Pointer un lieu",r.appendChild(s);break;case"circle":var a=document.createElement("option");a.value="circle",a.text="Dessiner un cercle",r.appendChild(a);break;case"extent":var l=document.createElement("option");l.value="extent",l.text="Dessiner une emprise",r.appendChild(l)}return o.appendChild(r),o},_createReverseGeocodingSubmitFormElement:function(){var e=document.createElement("input");return e.id=this._addUID("GPreverseGeocodingSubmit"),e.className="GPinputSubmit",e.type="submit",e.value="Rechercher",e}},Fr=Mo.a.getLogger("reversegeocoding"),Ur=function(e){function t(o){if(o=o||{},!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.initialize(o),this._container=this._initContainer(),this._containerElement=null,o.element&&o.element.appendChild&&(o.element.appendChild(this._container),this._containerElement=o.element),e.call(this,{element:this._containerElement||this._container,target:o.target,render:o.render})}return e&&(t.__proto__=e),t.prototype=Object.create(e.prototype,{}),Wo.assign(t.prototype,Dr),t.prototype.constructor=t,t.prototype.getCollapsed=function(){return this.collapsed},t.prototype.setCollapsed=function(e){void 0!==e?e&&this.collapsed||!e&&!this.collapsed||(e?document.getElementById("GPreverseGeocodingPanelClose-"+this._uid).click():document.getElementById("GPshowReverseGeocoding-"+this._uid).click(),this.collapsed=e):Fr.log("[ERROR] ReverseGeocode:setCollapsed - missing collapsed parameter")},t.prototype.setMap=function(t){if(t)this._activateMapInteraction(t),this.draggable&&zn.dragElement(this._panelContainer,this._panelHeaderContainer,t.getTargetElement());else{var o=this.getMap();this._clearResults(),this._clearInputFeatures(),this._removeMapInteraction(o),null!=this._inputFeaturesLayer&&(o.removeLayer(this._inputFeaturesLayer),this._inputFeaturesLayer=null,this._inputFeaturesSources=null,this._inputFeatures=null)}e.prototype.setMap.call(this,t)},t.prototype.initialize=function(e){this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,resources:["StreetAddress","PositionOfInterest","CadastralParcel"],delimitations:["Point","Circle","Extent"],reverseGeocodeOptions:{},layerDescription:{title:"Saisie (recherche inverse)",description:"Couche de saisie d'une zone de recherche pour la recherche inverse"}},Wo.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=yn.generate(),this._servicesRightManagement={},this._noRightManagement=!1,this._checkRightsManagement(),this._currentGeocodingType=null,this._initGeocodingType(),this._currentGeocodingDelimitation=null,this._initGeocodingDelimitation(),this._showReverseGeocodingInput=null,this._panelContainer=null,this._panelHeaderContainer=null,this._panelTitleContainer=null,this._returnPictoContainer=null,this._formContainer=null,this._resultsContainer=null,this._resultsListContainer=null,this._waitingContainer=null,this._inputFeatures=null,this._inputFeaturesSource=null,this._inputFeaturesLayer=null,this._mapInteraction=null,this._requestOptions=null,this._requestPosition=null,this._requestCircleFilter=null,this._requestBboxFilter=null,this._waiting=!1,this._timer=null,this._reverseGeocodingLocations=[],this._reverseGeocodingLocationsMarkers=[],this._resultsDefaultStyle=new Do.c({image:new Fo.a({src:An.lightOrange,anchor:[.5,1]})}),this._resultsSelectedStyle=new Do.c({image:new Fo.a({src:An.red,anchor:[.5,1]})}),this._resultsHoverInteraction=null,this._resultsSelectInteraction=null,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null},t.prototype._checkInputOptions=function(e){var t,o;if(e.resources){var n=e.resources;if(Array.isArray(n)){var r=["StreetAddress","PositionOfInterest","CadastralParcel","Administratif"],i=[];for(t=0;t<n.length;t++)-1===r.indexOf(n[t])&&(i.push(t),Fr.log("[ReverseGeocode] options.resources : "+n[t]+" is not a resource for reverse geocode"));if(0!==i.length)for(o=0;o<i.length;o++)n.splice(i[o],1)}else Fr.log("[ReverseGeocode] 'options.resources' parameter should be an array"),n=null}if(e.delimitations){var s=e.delimitations;if(Array.isArray(s)){var a=["Circle","Point","Extent"],l=[];for(t=0;t<s.length;t++)-1===a.indexOf(s[t])&&(l.push(t),Fr.log("[ReverseGeocode] options.delimitations : "+s[t]+" is not a delimitation for reverse geocode"));if(0!==l.length)for(o=0;o<l.length;o++)s.splice(l[o],1)}else Fr.log("[ReverseGeocode] 'options.delimitations' parameter should be an array"),s=null}},t.prototype._initGeocodingType=function(){this._currentGeocodingType="StreetAddress";var e=this.options.resources;if(e&&0!==e.length||(this.options.resources=["StreetAddress","PositionOfInterest","CadastralParcel"]),!this._noRightManagement){if(Array.isArray(e)&&e.length){for(var t=[],o=0;o<e.length;o++)this._servicesRightManagement.Geocode.indexOf(e[o])<0&&(t.push(o),Fr.log("[ReverseGeocode] no rights for options.resources : "+e[o]));if(0!==t.length)for(var n=0;n<t.length;n++)e.splice(t[n],1);"StreetAddress"!==e[0]&&"PositionOfInterest"!==e[0]&&"CadastralParcel"!==e[0]&&"Administratif"!==e[0]||(this._currentGeocodingType=e[0])}var r=this.options.reverseGeocodeOptions;r.filterOptions&&Array.isArray(r.filterOptions.type)&&0!==r.filterOptions.type.length&&(this._currentGeocodingType=r.filterOptions.type[0])}},t.prototype._initGeocodingDelimitation=function(){this._currentGeocodingDelimitation="Point";var e=this.options.delimitations;if(e&&0!==e.length||(this.options.delimitations=["Point","Circle","Extent"]),Array.isArray(e)&&e.length){var t=e[0].toLowerCase();"point"!==t&&"circle"!==t&&"extent"!==t||(this._currentGeocodingDelimitation=e[0])}},t.prototype._initPopupDiv=function(){var e=this,t=document.createElement("div");t.className="gp-feature-info-div";var o=document.createElement("input");return o.type="button",o.className="gp-styling-button closer",o.onclick=function(){return null!=e._popupOverlay&&e._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",t.appendChild(this._popupContent),t.appendChild(o),t},t.prototype._checkRightsManagement=function(){var e,t,o=[];e=this.options.reverseGeocodeOptions.apiKey,(o=(t=this.options.reverseGeocodeOptions.filterOptions)?t.type:[])&&0!==o.length||(o=this.options.resources),o&&0!==o.length||(o=["StreetAddress","PositionOfInterest"]);var n=Rn({key:e||this.options.apiKey,resources:o,services:["Geocode"]});Fr.log("rightManagementGeocode",n),n?(this.options.apiKey||(this.options.apiKey=n.key),this._servicesRightManagement.Geocode=n.Geocode):this._noRightManagement=!0},t.prototype._initContainer=function(){var e=this._createMainContainerElement(),t=this._showReverseGeocodingInput=this._createShowReverseGeocodingElement();e.appendChild(t),this.collapsed||(t.checked=!0);var o=this._createShowReverseGeocodingPictoElement();e.appendChild(o);var n=this._panelContainer=this._createReverseGeocodingPanelElement(),r=this._panelHeaderContainer=this._createReverseGeocodingPanelHeaderElement(),i=this._returnPictoContainer=this._createReverseGeocodingPanelReturnPictoElement();r.appendChild(i);var s=this._panelTitleContainer=this._createReverseGeocodingPanelTitleElement();r.appendChild(s);var a=this._createReverseGeocodingPanelCloseElement();r.appendChild(a),n.appendChild(r);var l=this._formContainer=this._createReverseGeocodingPanelFormElement();l.appendChild(this._createReverseGeocodingFormModeChoiceGeocodingTypeElement(this.options.resources)),l.appendChild(this._createReverseGeocodingFormModeChoiceGeocodingDelimitationElement(this.options.delimitations));var c=this._createReverseGeocodingSubmitFormElement();l.appendChild(c),n.appendChild(l);var u=this._waitingContainer=this._createReverseGeocodingWaitingElement();n.appendChild(u);var d=this._resultsContainer=this._createReverseGeocodingResultsPanelElement(),h=this._resultsListContainer=this._createReverseGeocodingResultsListElement();return d.appendChild(h),n.appendChild(d),e.appendChild(n),Fr.log(e),e},t.prototype._activateMapInteraction=function(e){var t=this;if(!this.collapsed){switch(null==this._inputFeaturesLayer&&(this._inputFeatures=new ir.b,this._inputFeaturesSource=new d.b({features:this._inputFeatures}),this._inputFeaturesLayer=new sr.a({source:this._inputFeaturesSource,style:new Do.c({fill:new Bo.a({color:"rgba(0, 183, 152, 0.3)"}),stroke:new zo.a({color:"rgba(0, 183, 152, 0.8)",width:3}),image:new Fo.a({src:An.turquoiseBlue,anchor:[.5,1]})})}),this._inputFeaturesLayer.gpResultLayerId="reverseGeocoding",e.addLayer(this._inputFeaturesLayer)),this._currentGeocodingDelimitation.toLowerCase()){case"point":this._activatePointInteraction(e);break;case"circle":this._activateCircleInteraction(e);break;case"extent":this._activateBoxInteraction(e)}e.getControls().forEach((function(e){if(e instanceof Sn){var o=t._inputFeaturesLayer.gpLayerId;e._layers[o].title===o&&(e.addLayer(t._inputFeaturesLayer,{title:t.options.layerDescription.title,description:t.options.layerDescription.description}),e.setRemovable(t._inputFeaturesLayer,!1))}}))}},t.prototype._activatePointInteraction=function(e){var t=this;this._mapInteraction=new y.d({style:new Do.c({image:new ar.a({radius:0,fill:new Bo.a({color:"rgba(0, 183, 152, 0.8)"})})}),type:"Point",source:this._inputFeaturesSource}),this._mapInteraction.on("drawstart",(function(e){Fr.log("on drawstart ",e),t._inputFeatures.clear(),t._onDrawStart(e,"point")})),e.addInteraction(this._mapInteraction),this._setCursor("crosshair",e)},t.prototype._activateCircleInteraction=function(e){var t=this;this._mapInteraction=new y.d({style:new Do.c({fill:new Bo.a({color:"rgba(0, 183, 152, 0.3)"}),stroke:new zo.a({color:"rgba(0, 183, 152, 0.8)",width:3}),image:new ar.a({radius:4,fill:new Bo.a({color:"rgba(0, 183, 152, 0.8)"})})}),type:"Circle",source:this._inputFeaturesSource}),this._mapInteraction.on("drawstart",(function(e){Fr.log("on drawstart ",e),t._inputFeatures.clear(),t._onDrawStart(e,"circle")})),this._mapInteraction.on("drawend",(function(e){if(Fr.log("on drawend",e),e.feature&&e.feature.getGeometry){var o=e.feature.getGeometry().getRadius();t._requestCircleFilter={},t._requestCircleFilter.radius=o,t._requestPosition&&(t._requestCircleFilter.x=t._requestPosition.x,t._requestCircleFilter.y=t._requestPosition.y),Fr.log("circle radius : ",o)}})),e.addInteraction(this._mapInteraction)},t.prototype._activateBoxInteraction=function(e){var t=this;this._mapInteraction=new y.d({style:new Do.c({fill:new Bo.a({color:"rgba(0, 183, 152, 0.3)"}),stroke:new zo.a({color:"rgba(0, 183, 152, 0.8)",width:3}),image:new ar.a({radius:4,fill:new Bo.a({color:"rgba(0, 183, 152, 0.8)"})})}),type:"LineString",source:this._inputFeaturesSource,maxPoints:2,geometryFunction:function(e,t){t||(t=new ur.b([]));var o=e[0],n=e[1];return t.setCoordinates([[o,[o[0],n[1]],n,[n[0],o[1]],o]]),t}}),this._mapInteraction.on("drawstart",(function(e){Fr.log("on drawstart",e),t._inputFeatures.clear()})),this._mapInteraction.on("drawend",(function(e){Fr.log("on drawend",e),t._onBoxDrawEnd(e)})),e.addInteraction(this._mapInteraction)},t.prototype._removeMapInteraction=function(e){null!=this._mapInteraction&&(e.removeInteraction(this._mapInteraction),this._mapInteraction=null),this._setCursor()},t.prototype._onDrawStart=function(e,t){var o;if(e.feature&&e.feature.getGeometry){var n=e.feature.getGeometry();"point"===t&&(o=n.getCoordinates()),"circle"===t&&(o=n.getCenter())}if(o){var r;if(this.options.reverseGeocodeOptions&&this.options.reverseGeocodeOptions.srs)r=this.options.reverseGeocodeOptions.srs;else{var i=this.getMap();if(!i||!i.getView())return;r=i.getView().getProjection()}var s=Object(a.E)(o,r,"EPSG:4326");this._requestPosition={x:s[0],y:s[1]},Fr.log("position coordinates : ",this._requestPosition)}},t.prototype._onBoxDrawEnd=function(e){if(e.feature&&e.feature.getGeometry){var t,o=e.feature.getGeometry().getCoordinates()[0],n=o[0],r=o[2];if(this.options.reverseGeocodeOptions&&this.options.reverseGeocodeOptions.srs)t=this.options.reverseGeocodeOptions.srs;else{var i=this.getMap();if(!i||!i.getView())return;t=i.getView().getProjection()}var s=Object(a.E)(n,t,"EPSG:4326"),l=Object(a.E)(r,t,"EPSG:4326");this._requestPosition={},this._requestBboxFilter={},s[0]<l[0]?(this._requestBboxFilter.left=s[0],this._requestBboxFilter.right=l[0]):(this._requestBboxFilter.left=l[0],this._requestBboxFilter.right=s[0]),s[1]<l[1]?(this._requestBboxFilter.bottom=s[1],this._requestBboxFilter.top=l[1]):(this._requestBboxFilter.bottom=l[1],this._requestBboxFilter.top=s[1]),this._requestPosition.x=(s[0]+l[0])/2,this._requestPosition.y=(s[1]+l[1])/2,Fr.log("bbox filter : ",this._requestBboxFilter),Fr.log("center coordinates : ",this._requestPosition)}},t.prototype._setCursor=function(e,t){if(t=t||this.getMap()){var o=t.getTargetElement();o.style.cursor=e||null}},t.prototype._reverseGeocodingRequest=function(){var e=this.getMap();this._requestOptions=this._getReverseGeocodingRequestOptions(),this._removeMapInteraction(e),this._displayWaitingContainer(),Ao.Services.reverseGeocode(this._requestOptions)},t.prototype._getReverseGeocodingRequestOptions=function(){var e=this.getMap(),t=this.options.reverseGeocodeOptions,o=this;"boolean"!=typeof this.options.ssl&&(this.options.ssl=!0);var n={apiKey:t.apiKey||this.options.apiKey,ssl:this.options.ssl,position:this._requestPosition,filterOptions:{type:[this._currentGeocodingType]},srs:"CRS:84",returnFreeForm:!1,maximumResponses:t.maximumResponses||25,timeOut:t.timeOut||3e4,protocol:t.protocol||"XHR",onSuccess:function(e){e.locations&&(Fr.log("reverseGeocode results : ",e.locations),o._displayGeocodedLocations(e.locations))},onFailure:function(t){o._hideWaitingContainer(),o._clearResults(),o._clearInputFeatures(),o._activateMapInteraction(e),Fr.log(t.message)}};return"circle"===this._currentGeocodingDelimitation.toLowerCase()&&this._requestCircleFilter&&(this._requestCircleFilter.radius>1e3&&(Fr.log("INFO : initial circle radius ("+this._requestCircleFilter.radius+") limited to 1000m."),this._requestCircleFilter.radius=1e3),n.filterOptions.circle=this._requestCircleFilter),"extent"===this._currentGeocodingDelimitation.toLowerCase()&&this._requestBboxFilter&&(n.filterOptions.bbox=this._requestBboxFilter),Fr.log("reverseGeocode request options : ",n),n},t.prototype._displayGeocodedLocations=function(e){this._clearResults(),this._reverseGeocodingLocations=e,this._formContainer.className="GPreverseGeocodingComponentHidden",this._hideWaitingContainer(),this._panelTitleContainer.innerHTML="RÃ©sultats de la recherche",this._returnPictoContainer.className="",this._resultsContainer.className="GPpanel",this._fillGeocodedLocationListContainer(e),this._displayGeocodedLocationsOnMap(e)},t.prototype._fillGeocodedLocationListContainer=function(e){for(var t=0;t<e.length;t++){var o=e[t];Fr.log(o);var n=this._fillGeocodedLocationDescription(o);0!==n.length&&this._createReverseGeocodingResultElement(n,t)}},t.prototype._fillGeocodedLocationDescription=function(e){if(e&&e.placeAttributes){var t=e.placeAttributes,o="";switch(e.type){case"StreetAddress":t.street&&(o+=t.number?t.number+" ":"",o+=t.street+", "),o+=t.postalCode+" "+t.commune;break;case"PositionOfInterest":"City"===e.matchType&&t.commune?(o+=t.commune,o+=t.postalCode?", "+t.postalCode:""):"DÃ©partement"===e.matchType&&t.municipality?(o+=t.municipality,o+=t.postalCode?", "+t.postalCode:""):"Toponym"===e.matchType&&t.municipality?(o+=t.municipality,o+=t.postalCode?", "+t.postalCode:"",o+=t.commune?" "+t.commune:""):o+=t.municipality?t.municipality:"",o+=t.nature?" ("+t.nature+") ":"";break;case"CadastralParcel":o+=t.cadastralParcel?t.cadastralParcel:"",o+=t.municipality?" ("+t.municipality+")":"";break;case"Administratif":o+=t.municipality?t.municipality:"",t.inseeDepartment?o+="(DÃ©partement)":t.inseeRegion&&(o+="(RÃ©gion)");break;default:o+=t.municipality?t.municipality:""}return o}},t.prototype._displayGeocodedLocationsOnMap=function(e){var t=this;if(0!==this._reverseGeocodingLocations.length){var o=this.getMap();this._createResultsLayer();for(var n=0;n<e.length;n++)this._addResultFeature(e[n],n);if(this._resultsFeatures.getLength()>1){if(this._resultsFeaturesSource&&this._resultsFeaturesSource.getExtent){var r=this._resultsFeaturesSource.getExtent();o.getView().fit(r,o.getSize())}}else{var i=this._resultsFeatures.item(0).getGeometry().getCoordinates();o.getView().setCenter(i),o.getView().setZoom(17)}this._resultsHoverInteraction=new m.b({condition:hr.o,layers:[this._resultsFeaturesLayer]}),this._resultsHoverInteraction.on("select",(function(e){return t._onResultsFeatureMouseOver(e)})),o.addInteraction(this._resultsHoverInteraction),this._resultsSelectInteraction=new m.b({layers:[this._resultsFeaturesLayer]}),this._resultsSelectInteraction.on("select",(function(e){return t._onResultsFeatureSelect(e)})),o.addInteraction(this._resultsSelectInteraction);var s="";switch(this._currentGeocodingType){case"StreetAddress":s="adresses";break;case"PositionOfInterest":s="toponymes";break;case"CadastralParcel":s="parcelles cadastrales";break;case"Administratif":s="unitÃ©s administratives"}o.getControls().forEach((function(e){if(e instanceof Sn){var o=t._resultsFeaturesLayer.gpLayerId;e._layers[o].title===o&&(e.addLayer(t._resultsFeaturesLayer,{title:"RÃ©sultats de la recherche inverse",description:"RÃ©sultats de la recherche inverse sur les "+s}),e.setRemovable(t._resultsFeaturesLayer,!1))}}))}},t.prototype._createResultsLayer=function(){var e=this.getMap();this._resultsFeatures=new ir.b,this._resultsFeaturesSource=new d.b({features:this._resultsFeatures}),this._resultsFeaturesLayer=new sr.a({source:this._resultsFeaturesSource}),this._resultsFeaturesLayer.gpResultLayerId="reverseGeocodingResults",e.addLayer(this._resultsFeaturesLayer)},t.prototype._addResultFeature=function(e,t){var o=this.getMap(),n=[e.position.x,e.position.y];if(0!==n.length){var r=o.getView().getProjection().getCode();"EPSG:4326"!==r&&(n=Object(a.E)(n,"EPSG:4326",r));var i=new Nr.b({geometry:new lr.a(n)});i.setStyle(this._resultsDefaultStyle),i.setId(t),i.setProperties({popupContent:this._fillPopupContent(e)}),this._resultsFeatures.push(i)}},t.prototype._fillPopupContent=function(e){var t="<ul>",o=e.placeAttributes;for(var n in o)o.hasOwnProperty(n)&&"bbox"!==n&&(t+="<li>",t+='<span class="gp-attname-others-span">'+n.toUpperCase()+" : </span>",t+=o[n],t+=" </li>");return t+=" </ul>"},t.prototype._onResultsFeatureMouseOver=function(e){var t;if(0!==e.selected.length){if((t=e.selected[0]).setStyle(this._resultsSelectedStyle),null!=t.getId()){var o=document.getElementById("ReverseGeocodedLocation_"+t.getId()+"-"+this._uid);o&&o.classList&&o.classList.add("GPreverseGeocodedLocationHighlight")}document.getElementById("ReverseGeocodedLocation_"+t.getId()+"-"+this._uid)}if(0!==e.deselected.length){(t=e.deselected[0]).setStyle(this._resultsDefaultStyle);var n=document.getElementById("ReverseGeocodedLocation_"+t.getId()+"-"+this._uid);n&&n.classList&&n.classList.remove("GPreverseGeocodedLocationHighlight")}},t.prototype._onResultsFeatureSelect=function(e){var t=this.getMap();if(0!==e.selected.length){var o=e.selected[0];this._popupContent.innerHTML=o.getProperties().popupContent,this._popupOverlay?this._popupOverlay.setPosition(e.mapBrowserEvent.coordinate):(this._popupOverlay=new c.a({element:this._popupDiv,positioning:"bottom-center",position:e.mapBrowserEvent.coordinate}),t.addOverlay(this._popupOverlay))}else null!=this._popupOverlay&&this._popupOverlay.setPosition(void 0)},t.prototype.onShowReverseGeocodingClick=function(){var e=this.getMap();In.unset(e),this.collapsed=this._showReverseGeocodingInput.checked,this.dispatchEvent("change:collapsed"),this._waiting||this._reverseGeocodingLocations.length||(this.collapsed?(this._clearResults(),this._clearInputFeatures(),this._removeMapInteraction(e),null!=this._inputFeaturesLayer&&(e.removeLayer(this._inputFeaturesLayer),this._inputFeaturesLayer=null,this._inputFeaturesSources=null,this._inputFeatures=null)):this._activateMapInteraction(e))},t.prototype.onReverseGeocodingTypeChange=function(e){var t=e.target.selectedIndex,o=e.target.options[t].value;o&&(Fr.log(o),this._currentGeocodingType=o)},t.prototype.onReverseGeocodingDelimitationChange=function(e){var t=e.target.selectedIndex,o=e.target.options[t].value;if(o){Fr.log(o),this._currentGeocodingDelimitation=o;var n=this.getMap();this._clearInputFeatures(),this._removeMapInteraction(n),this._activateMapInteraction(n)}},t.prototype.onGPreverseGeocodingReturnPictoClick=function(){this._clearResults(),this._clearInputFeatures(),this._activateMapInteraction(this.getMap())},t.prototype.onReverseGeocodingSubmit=function(){this._requestPosition?this._noRightManagement||this._reverseGeocodingRequest():Fr.log("missing position")},t.prototype.onReverseGeocodingResultClick=function(e){Fr.log("onReverseGeocodingResultClick",e)},t.prototype.onReverseGeocodingResultMouseOver=function(e){var t=e.target.id,o=t.substring(t.indexOf("_")+1);(e.target.classList&&e.target.classList.add("GPreverseGeocodedLocationHighlight"),this._resultsFeaturesSource)&&this._resultsFeaturesSource.getFeatureById(parseInt(o,10)).setStyle(this._resultsSelectedStyle)},t.prototype.onReverseGeocodingResultMouseOut=function(e){var t=e.target.id,o=t.substring(t.indexOf("_")+1);(e.target.classList&&e.target.classList.remove("GPreverseGeocodedLocationHighlight"),this._resultsFeaturesSource)&&this._resultsFeaturesSource.getFeatureById(parseInt(o,10)).setStyle(this._resultsDefaultStyle)},t.prototype._clearResults=function(){var e=this.getMap();if(this._reverseGeocodingLocations=[],this._resultsListContainer)for(;this._resultsListContainer.firstChild;)this._resultsListContainer.removeChild(this._resultsListContainer.firstChild);this._resultsFeaturesLayer&&(e.removeLayer(this._resultsFeaturesLayer),this._resultsFeaturesLayer=null),null!=this._popupOverlay&&(e.removeOverlay(this._popupOverlay),this._popupOverlay=null),null!=this._resultsSelectInteraction&&(e.removeInteraction(this._resultsSelectInteraction),this._resultsSelectInteraction=null),null!=this._resultsHoverInteraction&&(e.removeInteraction(this._resultsHoverInteraction),this._resultsHoverInteraction=null)},t.prototype._clearInputFeatures=function(){this._inputFeatures&&this._inputFeatures.clear(),this._requestPosition=null,this._requestCircleFilter=null,this._requestBboxFilter=null},t.prototype._displayWaitingContainer=function(){this._waitingContainer.className="GProuteCalcWaitingContainerVisible",this._waiting=!0,this._timer&&(clearTimeout(this._timer),this._timer=null);var e=this;this._timer=setTimeout((function(){!0===e._waiting?e._hideWaitingContainer():e._timer&&clearTimeout(e._timer)}),16e3)},t.prototype._hideWaitingContainer=function(){this._waiting&&(this._waitingContainer.className="GProuteCalcWaitingContainerHidden",this._waiting=!1,clearTimeout(this._timer),this._timer=null)},t}(mn.a),Br=Ur;window.ol&&window.ol.control&&(window.ol.control.ReverseGeocode=Ur);var zr=o("./node_modules/ol/tilegrid.js"),Vr=o("./node_modules/ol/format/MVT.js"),Wr=o("./node_modules/ol/format/GPX.js"),qr=o("./node_modules/ol/format/WMSCapabilities.js"),Hr=o("./node_modules/ol/format/WMTSCapabilities.js"),Yr=o("./node_modules/ol/layer/VectorTile.js"),Xr=o("./node_modules/ol/source/TileJSON.js"),Zr=o("./node_modules/ol-mapbox-style/dist/index.js"),Kr=o("./node_modules/eventbusjs/lib/eventbus.min.js"),Jr=o.n(Kr),Qr={onloaded:"editor:onloaded",layer:{onclickvisibility:"editor:layer:onclickvisibility",onclickclone:"editor:layer:onclickclone",onclickremove:"editor:layer:onclickremove"},legend:{onclickedition:"editor:legend:onclickedition",onchangevalue:"editor:legend:onchangevalue"},group:{oncollapse:"editor:group:oncollapse"},style:{oneditjson:"editor:style:oneditjson",scale:{onchangemin:"editor:style:scale:onchangemin",onchangemax:"editor:style:scale:onchangemax"}},filter:{oneditjson:"editor:filter:oneditjson"},themes:{onclickimage:"editor:themes:onclickimage",onclicktitle:"editor:themes:onclicktitle"}},$r=Mo.a.getLogger("editor-style");function ei(e){if($r.trace("[constructor] Style",e),this.options=e||{target:null,position:0,tools:null,title:null,obj:null},!(this instanceof ei))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}ei.prototype.constructor=ei,ei.prototype._initialize=function(){this.id=this.options.id||null,this.options.target,this.options.position||(this.options.position=0);var e={scale:!0,edition:!1};this.options.tools||(this.options.tools=e),Wo.mergeParams(this.options.tools,e,!1),this.options.obj||(this.options.obj={paint:{},layout:{}}),this.options.title||(this.options.title="JSON Styles :"),this.container=null,this.name={target:"GPEditorMapBoxStyleTarget",container:"GPEditorMapBoxStyleContainer",containerjson:"GPEditorMapBoxStyleJsonContainer",jsonlabel:"GPEditorMapBoxStyleJsonTitle",jsondisplay:"GPEditorMapBoxStyleJsonDisplay",containertoolsscale:"GPEditorMapBoxStyleToolsScaleContainer",scaletitle:"GPEditorMapBoxStyleScaleTitle",containertoolsminscale:"GPEditorMapBoxStyleToolsScaleMinContainer",scalelabelmin:"GPEditorMapBoxStyleScaleLabelMin",scaleinputmin:"GPEditorMapBoxStyleScaleInputMin",containertoolsmaxscale:"GPEditorMapBoxStyleToolsScaleMaxContainer",scalelabelmax:"GPEditorMapBoxStyleScaleLabelMax",scaleinputmax:"GPEditorMapBoxStyleScaleInputMax",containertoolsedit:"GPEditorMapBoxStyleToolsEditionContainer"}},ei.prototype._initContainer=function(){var e=this,t=!1,o=JSON.parse(JSON.stringify(this.options.obj)),n={};o.paint&&(t=!0,n.paint=o.paint,0===Object.keys(o.paint).length&&$r.info("tag 'paint' is empty !")),o.layout&&(t=!0,n.layout=o.layout,o.layout.visibility&&delete n.visibility,0===Object.keys(o.layout).length&&$r.info("tag 'layout' is empty !"));var r=document.createElement("div");r.className=this.name.container;var i=null;if(t){var s=JSON.stringify(n,null,4);i=this._syntaxHighlight(s)}var a=document.createElement("div");a.className=this.name.containerjson;var l=document.createElement("label");l.className=this.name.jsonlabel,l.innerHTML=this.options.title,a.appendChild(l);var c=document.createElement("pre");c.className=this.name.jsondisplay,c.innerHTML=i,c.addEventListener?c.addEventListener("click",(function(t){e.options.tools.edition&&e.onEditJsonStyleMapBox(t)})):c.attachEvent&&c.attachEvent("onclick",(function(t){e.options.tools.edition&&e.onEditJsonStyleMapBox(t)})),a.appendChild(c),r.appendChild(a),this.options.tools.scale&&r.appendChild(this._createElementToolsScale({min:n.layout?n.layout.minzoom:0,max:n.layout?n.layout.maxzoom:21})),this.options.tools.edition&&r.appendChild(this._createElementToolsEdition()),this.container=r},ei.prototype._createElementToolsScale=function(e){$r.trace("_createElementToolsScale");var t=this,o=this.options.obj,n=document.createElement("div");n.className=this.name.containertoolsscale;var r=document.createElement("div");r.className=this.name.containertoolsminscale;var i=document.createElement("label");i.className=this.name.scalelabelmin,i.innerHTML="min :",r.appendChild(i);var s=document.createElement("input");s.className=this.name.scaleinputmin,s.type="range",s.value=e.min||0,s.title=e.min||0,s.disabled=!1,s.min=0,s.max=21,s.data=o,s.addEventListener?s.addEventListener("change",(function(e){t.onChangeStyleScaleMinMapBox(e)})):s.appendChild&&s.appendChild("onchange",(function(e){t.onChangeStyleScaleMinMapBox(e)})),r.appendChild(s),n.appendChild(r);var a=document.createElement("div");a.className=this.name.containertoolsmaxscale;var l=document.createElement("label");l.className=this.name.scalelabelmax,l.innerHTML="max :",a.appendChild(l);var c=document.createElement("input");return c.className=this.name.scaleinputmin,c.type="range",c.value=e.max||21,c.title=e.max||21,c.disabled=!1,c.min=0,c.max=21,c.data=o,c.addEventListener?c.addEventListener("change",(function(e){t.onChangeStyleScaleMaxMapBox(e)})):c.appendChild&&c.appendChild("onchange",(function(e){t.onChangeStyleScaleMaxMapBox(e)})),a.appendChild(c),n.appendChild(a),n},ei.prototype._createElementToolsEdition=function(){$r.warn("_createElementToolsEdition, it's not yet implemented !");var e=document.createElement("div");return e.className=this.name.containertoolsedit,e},ei.prototype._syntaxHighlight=function(e){return(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+-]?\d+)?)/g,(function(e){var t="gp-json-number";return/^"/.test(e)?t=/:$/.test(e)?"gp-json-key":"gp-json-string":/true|false/.test(e)?t="gp-json-boolean":/null/.test(e)&&(t="gp-json-null"),"<span class='"+t+"'>"+e+"</span>"}))},ei.prototype.add=function(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target,(document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0]).appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this},ei.prototype.display=function(e){return $r.trace("display()",e),void 0!==e&&(this.container.style.display=e?"flex":"none"),"flex"===this.container.style.display},ei.prototype.getContainer=function(){return this.container},ei.prototype.onEditJsonStyleMapBox=function(e){$r.trace("onEditJsonStyleMapBox",e),e.editorID=this.id,e.data=this.options,Jr.a.dispatch(Qr.style.oneditjson,e)},ei.prototype.onChangeStyleScaleMinMapBox=function(e){$r.trace("onChangeStyleScaleMinMapBox",e),e.editorID=this.id,e.data=this.options,Jr.a.dispatch(Qr.style.scale.onchangemin,e)},ei.prototype.onChangeStyleScaleMaxMapBox=function(e){$r.trace("onChangeStyleScaleMaxMapBox",e),e.editorID=this.id,e.data=this.options,Jr.a.dispatch(Qr.style.scale.onchangemax,e)};var ti=ei,oi=Mo.a.getLogger("editor-themes");function ni(e){if(oi.trace("[constructor] Themes",e),this.options=e||{},!(this instanceof ni))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}ni.prototype.constructor=ni,ni.prototype._initialize=function(){this.id=this.options.id||null,this.options.target;var e={thumbnails:!0,button:{visible:!0,type:"radio"}};this.options.tools&&0!==Object.keys(this.options.tools).length||(this.options.tools=e),Wo.mergeParams(this.options.tools,e,!1),void 0!==this.options.obj&&null!==this.options.obj&&this.options.obj||(this.options.obj={themesSummary:"",themes:[]}),this.container=null,this.name={target:"GPEditorMapBoxThemeTarget",container:"GPEditorMapBoxThemesContainer",containertheme:"GPEditorMapBoxThemeContainer",containerthemeID:"GPEditorMapBoxThemeContainer_ID_",input:"GPEditorMapBoxThemeInput",inputID:"GPEditorMapBoxThemeInput_ID_",label:"GPEditorMapBoxThemeTitle",labelID:"GPEditorMapBoxThemeTitle_ID_",image:"GPEditorMapBoxThemeImage",imageID:"GPEditorMapBoxThemeImage_ID_",message:"GPEditorMapBoxThemeMessage"}},ni.prototype._initContainer=function(){var e=this,t=this.options.obj,o=this.id||yn.generate(),n=document.createElement("div");n.className=this.name.container,n.title=t.themesSummary||"";var r=t.themes;if(r)for(var i=0;i<r.length;i++){var s=r[i],a=document.createElement("div");a.id=this.name.containerthemeID+i+"_"+o,a.className=this.name.containertheme,a.tabIndex=i;var l=s.url,c=s.selected||!1;if(l){var u=this.options.tools.button;if(u.visible){var d="checkbox"===u.type?"checkbox":"radio",h=document.createElement("input");h.type=d,h.id=this.name.inputID+i+"_"+o,h.className=this.name.input,h.name=o,h.checked=c,h.data=l,h.addEventListener?h.addEventListener("click",(function(t){e.onClickThemeTitleMapBox(t)})):h.attachEvent&&h.attachEvent("onclick",(function(t){e.onClickThemeTitleMapBox(t)})),a.appendChild(h)}if(this.options.tools.thumbnails&&s.thumbnail){var p=document.createElement("img");p.id=this.name.imageID+i+"_"+o,p.className=this.name.image,p.src=s.thumbnail,p.alt=s.thumbnail,p.title=s.description||"",p.data=l,p.addEventListener?p.addEventListener("click",(function(t){e.onClickThemeImageMapBox(t);var o=t.target.parentElement.childNodes;if(o){var n=o[0];"input"===n.tagName.toLowerCase()&&(n.checked=!n.checked)}})):p.attachEvent&&p.attachEvent("onclick",(function(t){e.onClickThemeImageMapBox(t);var o=t.target.parentElement.childNodes;if(o){var n=o[0];"input"===n.tagName.toLowerCase()&&(n.checked=!n.checked)}})),a.appendChild(p)}if(s.name){var f=document.createElement("label");f.id=this.name.labelID+i+"_"+o,this.options.tools.button.visible&&(f.htmlFor=h.id),f.className=this.name.label,f.innerHTML=s.name,f.title=s.description||"",f.data=l,this.options.tools.button.visible||(f.addEventListener?f.addEventListener("click",(function(t){e.onClickThemeTitleMapBox(t)})):f.attachEvent&&f.attachEvent("onclick",(function(t){e.onClickThemeTitleMapBox(t)}))),a.appendChild(f)}}else{var m=document.createElement("label");m.className=this.name.message,m.innerHTML="ThÃ¨me non disponible...",a.appendChild(m)}n.appendChild(a)}this.container=n},ni.prototype.add=function(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target,(document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0]).appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this},ni.prototype.display=function(e){return oi.trace("display()",e),void 0!==e&&(this.container.style.display=e?"flex":"none"),"flex"===this.container.style.display},ni.prototype.getContainer=function(){return this.container},ni.prototype.onClickThemeImageMapBox=function(e){if(oi.trace("onClickThemeImageMapBox",e),e.editorID=this.id,e.data=this.options,"checkbox"===this.options.tools.button.type)for(var t=e.target.previousSibling.id.substring(e.target.previousSibling.id.lastIndexOf("_")+1),o=document.getElementsByClassName(this.name.input),n=0;n<o.length;n++){var r=o[n];if(r.id!==e.target.previousSibling.id)r.id.substring(r.id.lastIndexOf("_")+1)===t&&(r.checked=!1)}Jr.a.dispatch(Qr.themes.onclickimage,e)},ni.prototype.onClickThemeTitleMapBox=function(e){if(oi.trace("onClickThemeTitleMapBox",e),e.editorID=this.id,e.data=this.options,"checkbox"===this.options.tools.button.type)for(var t=e.target.id.substring(e.target.id.lastIndexOf("_")+1),o=document.getElementsByClassName(this.name.input),n=0;n<o.length;n++){var r=o[n];if(r.id!==e.target.id)r.id.substring(r.id.lastIndexOf("_")+1)===t&&(r.checked=!1)}Jr.a.dispatch(Qr.themes.onclicktitle,e)};var ri=ni,ii=Mo.a.getLogger("editor-filter");function si(e){if(ii.trace("[constructor] Filter",e),this.options=e||{target:null,position:0,tools:null,title:null,obj:null},!(this instanceof si))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}si.prototype.constructor=si,si.prototype._initialize=function(){this.id=this.options.id||null,this.options.target,this.options.position||(this.options.position=0);var e={edition:!1};this.options.tools||(this.options.tools=e),Wo.mergeParams(this.options.tools,e,!1),this.options.obj||(this.options.obj={filter:[]}),this.options.title||(this.options.title="JSON Filtres :"),this.container=null,this.name={target:"GPEditorMapBoxFilterTarget",container:"GPEditorMapBoxFilterContainer",containerjson:"GPEditorMapBoxFilterJsonContainer",jsonlabel:"GPEditorMapBoxFilterTitleJson",jsondisplay:"GPEditorMapBoxFilterDisplayJson",containertoolsedit:"GPEditorMapBoxFilterToolsEditionContainer"}},si.prototype._initContainer=function(){var e=this,t=!1,o=JSON.parse(JSON.stringify(this.options.obj));o.filter&&(t=!0,0===o.filter.length&&ii.info("tag 'filter' is empty !"));var n=document.createElement("div");n.className=this.name.container;var r=null;t&&(r=JSON.stringify(o.filter,null,4));var i=document.createElement("div");i.className=this.name.containerjson;var s=document.createElement("label");s.className=this.name.jsonlabel,s.innerHTML=this.options.title,i.appendChild(s);var a=document.createElement("pre");if(a.className=this.name.jsondisplay,a.innerHTML=r,a.addEventListener?a.addEventListener("click",(function(t){e.options.tools.edition&&e.onEditJsonFilterMapBox(t)})):a.attachEvent&&a.attachEvent("onclick",(function(t){e.options.tools.edition&&e.onEditJsonFilterMapBox(t)})),i.appendChild(a),n.appendChild(i),this.options.tools.edition){var l=document.createElement("div");l.className=this.name.containertoolsedit,n.appendChild(l)}this.container=n},si.prototype.add=function(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target,(document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0]).appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this},si.prototype.display=function(e){return ii.trace("display()",e),void 0!==e&&(this.container.style.display=e?"flex":"none"),"flex"===this.container.style.display},si.prototype.getContainer=function(){return this.container},si.prototype.onEditJsonFilterMapBox=function(e){ii.trace("onEditJsonFilterMapBox",e),e.editorID=this.id,e.data=this.options,Jr.a.dispatch(Qr.filter.oneditjson,e)};var ai=si;function li(e){return(li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ci=Mo.a.getLogger("editor-legend");function ui(e){if(ci.trace("[constructor] Legend",e),this.options=e||{target:null,position:0,sprites:null,obj:null},!(this instanceof ui))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}ui.prototype.constructor=ui,ui.prototype._initialize=function(){this.id=this.options.id||null,this.options.target,this.options.position||(this.options.position=0),this.options.obj||(this.options.obj={title:"vide...",editable:!0,paint:{"fill-color":"#FFFFFF"}});var e=this.options.obj.editable;this.editable=void 0!==e&&e,this.legendRender={type:"fill",values:{width:1,stroke:"#FFFFFF",color:"#000000",opacity:1,icon:null}},this.container=null,this.rendercontainer=null,this.toolscontainer=null,this.name={target:"GPEditorMapBoxLegendTarget",container:"GPEditorMapBoxLegendContainer",containerlegendrender:"GPEditorMapBoxLegendRenderContainer",legendrender:"GPEditorMapBoxLegendRender",legendeditable:"GPEditorMapBoxLegendEditable",legendtitle:"GPEditorMapBoxLegendTitle",containerlegendtools:"GPEditorMapBoxLegendToolsContainer"},this.labels={"line-color":"Couleur du trait","line-width":"Epaisseur du trait","line-opacity":"OpacitÃ© du trait","fill-color":"Couleur de remplissage","fill-opacity":"OpacitÃ© du remplissage"}},ui.prototype._initContainer=function(){var e=this.options.obj,t=document.createElement("div");t.className=this.name.container;var o=!1,n={};if(e.paint&&e.layout?(o=!0,Object.assign(n,e.paint,e.layout)):e.paint?(o=!0,Object.assign(n,e.paint)):e.layout?(o=!0,Object.assign(n,e.layout)):o=!1,o){var r=Object.keys(n);0===r.length&&ci.info("tag 'paint' or 'layout' is empty !");for(var i={},s=!1,a=0;a<r.length;a++){var l=r[a];if(/fill-/.test(l)||/line-/.test(l)||/circle-/.test(l)||/background-/.test(l)||/text-/.test(l)||/icon-/.test(l)){s=!0;var c=e.title||"",u=l.split("-")[0];"text"!==u&&"icon"!==u||(u="symbol"),this._getValues(u,n)&&(i={edit:this.editable,title:c,type:this.legendRender.type,values:this.legendRender.values},t.appendChild(this._createElementIconLegend(i)));break}}}s||this._getValues("fill",n)&&(i={edit:this.editable,title:e.title||"",type:this.legendRender.type,values:this.legendRender.values},t.appendChild(this._createElementIconLegend(i))),this.toolscontainer=this._createElementEditionLegend(i),t.appendChild(this.toolscontainer),this.container=t},ui.prototype._getValues=function(e,t){ci.trace("_getValues():",e,t);var o=null,n=null,r=null,i=null,s=this.legendRender.values.color,a=this.legendRender.values.stroke,l=this.legendRender.values.width,c=this.legendRender.values.opacity,u=null;if("symbol"===e){var d=t["text-field"],h=t["icon-image"];"unknow"===(e=d&&h?"icon":d?"text":h?"icon":"unknow")&&(ci.warn("_getValues() - Type inconnu :",e,t),e="text")}switch(e){case"line":if(o=t["line-color"],Array.isArray(o)||"object"===li(o)){s=null;break}s=o||s,r=t["line-width"],l=Array.isArray(r)||"object"===li(r)?l:r||l,i=t["line-opacity"],c=Array.isArray(i)||"object"===li(i)?c:i||c;break;case"text":if(o=t["text-color"],Array.isArray(o)||"object"===li(o)){s=null;break}s=o||s;break;case"icon":var p=!1;if(t["icon-image"]&&this.options.sprites&&Object.keys(this.options.sprites).length&&this.options.sprites.json&&this.options.sprites.json[t["icon-image"]]&&(p=!0),p)u=t["icon-image"];else{if(o=t["icon-color"],Array.isArray(o)||"object"===li(o)){s=null;break}s=o||s}break;case"circle":if(o=t["circle-color"],Array.isArray(o)||"object"===li(o)){s=null;break}s=o||s,n=t["circle-stroke-color"],a=Array.isArray(n)||"object"===li(n)?a:n||a,i=t["circle-opacity"],c=Array.isArray(i)||"object"===li(i)?c:i||c,r=t["circle-stroke-width"],l=Array.isArray(r)||"object"===li(r)?l:r||l;break;case"background":if(o=t["background-color"],Array.isArray(o)||"object"===li(o)){s=null;break}s=o||s;break;case"fill":if(o=t["fill-color"],Array.isArray(o)||"object"===li(o)){s=null;break}s=o||s,i=t["fill-opacity"],c=Array.isArray(i)||"object"===li(i)?c:i||c}return this.legendRender={type:e,values:{color:s,stroke:a,width:l,opacity:c,icon:u}},!0},ui.prototype._setValues=function(e,t){var o=this.rendercontainer;if(!o)return!1;var n=t.color||this.legendRender.values.color,r=t.stroke||this.legendRender.values.stroke,i=t.width||this.legendRender.values.width,s=t.opacity||this.legendRender.values.opacity,a=t.icon||this.legendRender.values.icon,l="",c=null;switch(e){case"text":l="font-size: 5em;font-weight: bold;",c="url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><text x='50' y='50' fill='%color%' fill-opacity='%opacity%'  text-anchor='middle' alignment-baseline='central' style='%style%'> T </text></svg>\")",o.style.background=c.replace("%color%",0===n.indexOf("rgb")?n:fr.hexToRgba(n,1)).replace("%opacity%",s).replace("%style%",l);break;case"icon":if(a){c="<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' width='27px' height='27px' x='0' y='0' viewBox='%x% %y% %w% %h%'><image width='%W%px' height='%H%px' href='%URL%'/></svg>".replace("%x%",this.options.sprites.json[a].x).replace("%y%",this.options.sprites.json[a].y).replace(/%w%/g,this.options.sprites.json[a].width).replace(/%h%/g,this.options.sprites.json[a].height).replace("%W%",this.options.sprites.size.w).replace("%H%",this.options.sprites.size.h).replace("%URL%",this.options.sprites.url),o.innerHTML=c}else l="fill: transparent;stroke-width: 10;",c="url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><path d='M 50,20 80,82.5 20,82.5 z' stroke='%color%' style='%style%'/></svg>\")",o.style.background=c.replace("%color%",0===n.indexOf("rgb")?n:fr.hexToRgba(n,1)).replace("%style%",l);break;case"background":o.style["background-color"]=n;break;case"line":c="url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><path d='M0 99 L99 0 L100 1 L1 100' stroke='%color%' stroke-width='%width%' stroke-opacity='%opacity%' /></svg>\")",o.style.background=c.replace("%color%",0===n.indexOf("rgb")?n:fr.hexToRgba(n,1)).replace("%opacity%",s).replace("%width%",10*i);break;case"circle":c="url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><circle cx='50' cy='50' r='40' stroke='%stroke%' stroke-width='%width%' stroke-opacity='%opacity%' fill='%color%' fill-opacity='%opacity%' /></svg>\")",o.style.background=c.replace("%color%",0===n.indexOf("rgb")?n:fr.hexToRgba(n,1)).replace("%opacity%",s).replace("%stroke%",0===r.indexOf("rgb")?r:fr.hexToRgba(r,1)).replace("%width%",10*i);break;case"fill":c="url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><rect x='0' y='0' width='100' height='100' rx='5' ry='5' fill='%color%' fill-opacity='%opacity%' /></svg>\")",o.style.background=c.replace("%color%",0===n.indexOf("rgb")?n:fr.hexToRgba(n,1)).replace("%opacity%",s);break;default:return!1}return this.legendRender={type:e,values:{color:n,stroke:r,width:i,opacity:s,icon:a}},!0},ui.prototype._createElementIconLegend=function(e){var t=this,o=document.createElement("div");o.className=this.name.containerlegendrender;var n=this.rendercontainer=document.createElement("div");n.className=this.name.legendrender,e.edit&&(n.className+=" ",n.className+=this.name.legendeditable,n.addEventListener?n.addEventListener("click",(function(e){t.onEditionLegendMapBox(e)})):n.attachEvent&&n.attachEvent("onclick",(function(e){t.onEditionLegendMapBox(e)})));var r=e.values.color,i=e.values.stroke,s=e.values.width,a=e.values.opacity,l=e.type;r?this._setValues(l,{color:r,stroke:i,width:s,opacity:a})?n.className+=e.edit?" legend-"+l:" legend-"+l+"-not-editable":n.className+=" legend-unknow":n.className+=" legend-not-implemented",o.appendChild(n);var c=document.createElement("span");return c.className=this.name.legendtitle,c.innerHTML=e.title||"",o.appendChild(c),o},ui.prototype._createElementEditionLegend=function(e){var t=this,o=document.createElement("div");if(o.className=this.name.containerlegendtools,!e.edit)return o;if("line"===e.type){var n=document.createElement("div");n.className="legend-styling-div";var r=document.createElement("label");r.htmlFor="line-color",r.innerHTML=this.labels["line-color"];var i=document.createElement("input");i.className="legend-styling",i.id="line-color",i.title="Selectionner une couleur de trait",i.type="color",i.value=e.values.color,i.addEventListener?i.addEventListener("change",(function(o){t._setValues(e.type,{color:o.target.value}),t.onChangeValueLegendMapBox(o)})):i.attachEvent&&i.attachEvent("onchange",(function(o){t._setValues(e.type,{color:o.target.value}),t.onChangeValueLegendMapBox(o)})),n.appendChild(r),n.appendChild(i),o.appendChild(n);var s=document.createElement("div");s.className="legend-styling-div";var a=document.createElement("label");a.htmlFor="line-width",a.innerHTML=this.labels["line-width"];var l=document.createElement("input");l.className="legend-styling",l.id="line-width",l.title=e.values.width,l.type="range",l.min="0",l.max="10",l.step="1",l.defaultValue=e.values.width,l.addEventListener?l.addEventListener("change",(function(o){ci.trace(o),o.target.title=o.target.value,t._setValues(e.type,{width:o.target.value}),t.onChangeValueLegendMapBox(o)})):l.attachEvent&&l.attachEvent("onchange",(function(o){ci.trace(o),o.target.title=o.target.value,t._setValues(e.type,{width:o.target.value}),t.onChangeValueLegendMapBox(o)})),s.appendChild(a),s.appendChild(l),o.appendChild(s);var c=document.createElement("div");c.className="legend-styling-div";var u=document.createElement("label");u.htmlFor="line-opacity",u.innerHTML=this.labels["line-opacity"];var d=document.createElement("input");d.className="legend-styling",d.id="line-opacity",d.title=e.values.opacity,d.type="range",d.min="0",d.max="1",d.step="0.1",d.defaultValue=e.values.opacity,d.addEventListener?d.addEventListener("change",(function(o){ci.trace(o),o.target.title=o.target.value,t._setValues(e.type,{opacity:o.target.value}),t.onChangeValueLegendMapBox(o)})):d.attachEvent&&d.attachEvent("onchange",(function(o){ci.trace(o),o.target.title=o.target.value,t._setValues(e.type,{opacity:o.target.value}),t.onChangeValueLegendMapBox(o)})),c.appendChild(u),c.appendChild(d),o.appendChild(c)}if("fill"===e.type){var h=document.createElement("div");h.className="legend-styling-div";var p=document.createElement("label");p.htmlFor="fill-color",p.innerHTML=this.labels["fill-color"];var f=document.createElement("input");f.className="legend-styling",f.id="fill-color",f.title="Selectionner une couleur de remplissage",f.type="color",f.value=e.values.color,f.addEventListener?f.addEventListener("change",(function(o){t._setValues(e.type,{color:o.target.value}),t.onChangeValueLegendMapBox(o)})):f.attachEvent&&f.attachEvent("onchange",(function(o){t._setValues(e.type,{color:o.target.value}),t.onChangeValueLegendMapBox(o)})),h.appendChild(p),h.appendChild(f),o.appendChild(h);var m=document.createElement("div");m.className="legend-styling-div";var g=document.createElement("label");g.htmlFor="fill-opacity",g.innerHTML=this.labels["fill-opacity"];var y=document.createElement("input");y.className="legend-styling",y.id="fill-opacity",y.title=e.values.opacity,y.type="range",y.min="0",y.max="1",y.step="0.1",y.defaultValue=e.values.opacity,y.addEventListener?y.addEventListener("change",(function(o){o.target.title=o.target.value,t._setValues(e.type,{opacity:o.target.value}),t.onChangeValueLegendMapBox(o)})):y.attachEvent&&y.attachEvent("onchange",(function(o){o.target.title=o.target.value,t._setValues(e.type,{opacity:o.target.value}),t.onChangeValueLegendMapBox(o)})),m.appendChild(g),m.appendChild(y),o.appendChild(m)}return o},ui.prototype.add=function(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target,(document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0]).appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this},ui.prototype.display=function(e){return ci.trace("display()",e),void 0!==e&&(this.container.style.display=e?"flex":"none"),"flex"===this.container.style.display},ui.prototype.isEditable=function(){return this.editable},ui.prototype.getRenderContainer=function(){return this.rendercontainer},ui.prototype.getToolsContainer=function(){return this.toolscontainer},ui.prototype.getContainer=function(){return this.container},ui.prototype.onEditionLegendMapBox=function(e){ci.trace("onEditionLegendMapBox",e),e.editorID=this.id,e.data=this.options,Jr.a.dispatch(Qr.legend.onclickedition,e)},ui.prototype.onChangeValueLegendMapBox=function(e){ci.trace("onChangeValueLegendMapBox",e),e.editorID=this.id,e.data=this.options,Jr.a.dispatch(Qr.legend.onchangevalue,e)};var di=ui;function hi(e){return(hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var pi=Mo.a.getLogger("editor-layer");function fi(e){if(pi.trace("[constructor] Layer",e),this.options=e||{},!(this instanceof fi))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}fi.prototype.constructor=fi,fi.prototype._initialize=function(){this.id=this.options.id||null,this.options.target,this.options.position||(this.options.position=0);var e={visibility:!0,icon:{image:!0,anchor:"end"},type:!0,pin:!0,remove:!1,clone:!1};this.options.tools||(this.options.tools=e),Wo.mergeParams(this.options.tools,e,!1);var t={id:"",type:"",source:"","source-layer":""};this.options.obj||(this.options.obj=t),Wo.mergeParams(this.options.obj,t,!1),this.bSlotLegend=!1,this.oFilter=null,this.oStyle=null,this.oLegend=null,this.container=null,this.DomVisibility=null,this.DomToggle=null,this.name={target:"GPEditorMapBoxLayerTarget",container:"GPEditorMapBoxLayerContainer",containerlegend:"GPEditorMapBoxLayerLegendContainer",containertitle:"GPEditorMapBoxLayerTitleContainer",imagelabelinput:"GPEditorMapBoxLayerImageInput",imagelabel:"GPEditorMapBoxLayerImageLabel",typeimg:"GPEditorMapBoxLayerTypeImage",titleinput:"GPEditorMapBoxLayerTitleInput",titlelabel:"GPEditorMapBoxLayerTitleLabel",containertools:"GPEditorMapBoxToolsContainer",visibilityinput:"GPEditorMapBoxToolsVisibilityInput",visibilitylabel:"GPEditorMapBoxToolsVisibilityLabel",visibilityinputdisable:"GPEditorMapBoxToolsVisibilityInputDisable",visibilitylabeldisable:"GPEditorMapBoxToolsVisibilityLabelDisable"}},fi.prototype._initContainer=function(){var e=this,t=this.options.obj,o=document.createElement("div");o.className=this.name.container;var n=document.createElement("div");if(n.id=this.name.containertitle+"-"+this.options.position,n.className=this.name.containertitle,this.options.tools.pin){var r=document.createElement("input");r.id=this.name.imagelabelinput+"-"+this.options.position,r.className=this.name.imagelabelinput,r.type="checkbox",n.appendChild(r);var i=document.createElement("label");i.className=this.name.imagelabel,i.htmlFor=r.id,i.addEventListener?i.addEventListener("click",(function(t){e.onClickLayerMapBox(t)})):i.attachEvent&&i.attachEvent("onclick",(function(t){e.onClickLayerMapBox(t)})),n.appendChild(i)}var s=function(){var t=document.createElement("div");if(t.id=this.name.containertools+"-"+this.options.position,t.className=this.name.containertools,this.options.tools.visibility){var n=document.createElement("input");n.id=this.name.visibilityinput+"-"+this.options.position,n.className=this.options.tools.icon.image?this.name.visibilityinput:this.name.visibilityinputdisable,n.type="checkbox",n.checked="checked",n.addEventListener?n.addEventListener("click",(function(t){e.onVisibilityLayerMapBox(t)})):n.attachEvent&&n.attachEvent("onclick",(function(t){e.onVisibilityLayerMapBox(t)})),t.appendChild(n),this.DomVisibility=n;var r=document.createElement("label");r.htmlFor=this.name.visibilityinput+"-"+this.options.position,r.id=this.name.visibilitylabel+"-"+this.options.position,r.className=this.options.tools.icon.image?this.name.visibilitylabel:this.name.visibilitylabeldisable,r.title="Afficher/masquer la couche",t.appendChild(r),o.appendChild(t)}this.options.tools.clone&&pi.warn("Dom for tools clone, it's not yet implemented !"),this.options.tools.remove&&pi.warn("Dom for tools remove, it's not yet implemented !")};if("start"===this.options.tools.icon.anchor&&s.apply(this),this.options.tools.type&&t.type){var a=document.createElement("img");switch(a.className=this.name.typeimg,t.type.toUpperCase()){case"SYMBOL-ICON":a.style["background-position"]="0px 0";break;case"SYMBOL-TEXT":a.style["background-position"]="-194px 0";break;case"SYMBOL":a.style["background-position"]="-84px 0";break;case"LINE":a.style["background-position"]="-28px 0";break;case"FILL":a.style["background-position"]="-56px 0";break;case"BACKGROUND":a.style["background-position"]="-140px 0";break;case"CIRCLE":a.style["background-position"]="-168px 0";break;default:a.style["background-position"]="-112px 0"}n.appendChild(a)}var l=document.createElement("div");l.id=this.name.containerlegend+"-"+this.options.position,l.className=this.name.containerlegend,n.appendChild(l);var c=document.createElement("input");c.id=this.name.titleinput+"-"+this.options.position,c.className=this.name.titleinput,c.type="checkbox",n.appendChild(c);var u=document.createElement("label");u.className=this.name.titlelabel,u.htmlFor=c.id,u.innerHTML=t.id||t["source-layer"]||t.source,u.title=t["source-layer"]||t.source||t.id,u.addEventListener?u.addEventListener("click",(function(t){e.onClickLayerMapBox(t)})):u.attachEvent&&u.attachEvent("onclick",(function(t){e.onClickLayerMapBox(t)})),n.appendChild(u),this.DomToggle=u,o.appendChild(n),"end"===this.options.tools.icon.anchor&&s.apply(this),this.container=o},fi.prototype.add=function(){if(pi.trace("add()"),!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target,(document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0]).appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this},fi.prototype.addStyle=function(e){pi.trace("addStyle()",e),e&&"object"===hi(e)&&e instanceof ti&&(this.oStyle=e,this.oStyle.display(!1))},fi.prototype.addFilter=function(e){pi.trace("addFilter()",e),e&&"object"===hi(e)&&e instanceof ai&&(this.oFilter=e,this.oFilter.display(!1))},fi.prototype.addLegend=function(e){pi.trace("addLegend()",e),e&&"object"===hi(e)&&e instanceof di&&(this.oLegend=e,this.oLegend.display(!1))},fi.prototype.slotLegend=function(){var e=this.oLegend;if(e){var t=null,o=this.container.childNodes;if(o.length)for(var n=o["start"===this.options.tools.icon.anchor?1:0].childNodes,r=0;r<n.length;r++){var i=n[r];-1!==i.id.indexOf(this.name.containerlegend)&&(t=i)}if(t){var s=e.getRenderContainer();s&&(t.appendChild(s),this.bSlotLegend=!0)}}},fi.prototype.visibility=function(e){if(pi.trace("visibility()",e),this.options.tools.visibility)return void 0!==e&&(this.DomVisibility.checked=e?"checked":""),this.DomVisibility.checked},fi.prototype.collapse=function(){pi.trace("collapse()"),this.DomToggle.click()},fi.prototype.visible=function(){pi.trace("visible()"),this.options.tools.visibility&&this.DomVisibility.click()},fi.prototype.display=function(e){pi.trace("display()",e);var t=document.getElementById(this.DomToggle.htmlFor).checked;return void 0!==e&&(this.container.style.display=e?"inline-flex":"none",this.oStyle&&this.oStyle.display(e&&t),this.oFilter&&this.oFilter.display(e&&t),this.oLegend&&this.oLegend.display(e&&t)),t},fi.prototype.active=function(e){return pi.trace("active()",e),void 0!==e&&(this.container.className=e?this.name.container:this.name.container+" disabled"),this.container.className===this.name.container},fi.prototype.getContainer=function(){return this.container},fi.prototype.onClickLayerMapBox=function(e){pi.trace("onClickLayerMapBox",e);var t=e.target.htmlFor.substring(e.target.htmlFor.indexOf("-")),o=document.getElementById(e.target.htmlFor).checked;e.target.htmlFor===this.name.imagelabelinput+t&&(document.getElementById(this.name.titleinput+t).checked=!o),e.target.htmlFor===this.name.titleinput+t&&document.getElementById(this.name.imagelabelinput+t)&&(document.getElementById(this.name.imagelabelinput+t).checked=!o),this.oStyle&&this.oStyle.display(!o),this.oFilter&&this.oFilter.display(!o),this.oLegend&&this.oLegend.isEditable()&&this.oLegend.display(!o)},fi.prototype.onVisibilityLayerMapBox=function(e){pi.trace("onVisibilityLayerMapBox",e),e.editorID=this.id,e.data=this.options,Jr.a.dispatch(Qr.layer.onclickvisibility,e)},fi.prototype.onCloneLayerMapBox=function(e){pi.trace("onCloneLayerMapBox",e),e.editorID=this.id,e.data=this.options,Jr.a.dispatch(Qr.layer.onclickclone,e)},fi.prototype.onRemoveLayerMapBox=function(e){pi.trace("onRemoveLayerMapBox",e),e.editorID=this.id,e.data=this.options,Jr.a.dispatch(Qr.layer.onclickremove,e)};var mi=fi,gi=Mo.a.getLogger("editor-group");function yi(e){if(gi.trace("[constructor] Group",e),this.options=e||{},!(this instanceof yi))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}yi.prototype.constructor=yi,yi.prototype._initialize=function(){this.id=this.options.id||null,this.options.target,this.options.title||(this.options.title="DÃ©tails du groupe..."),void 0===this.options.collapse&&(this.options.collapse=!0),this.container=null,this.name={target:"GPEditorMapBoxGroupTarget",container:"GPEditorMapBoxGroupContainer",details:"GPEditorMapBoxGroupDetails",summary:"GPEditorMapBoxGroupSummary"}},yi.prototype._initContainer=function(){var e=document.createElement("div");e.className=this.name.container;var t=document.createElement("details");t.className=this.name.details,t.open=!this.options.collapse,e.appendChild(t);var o=document.createElement("summary");o.className=this.name.summary,o.innerHTML=this.options.title,t.appendChild(o),this.container=e},yi.prototype.add=function(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target,(document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0]).appendChild(e)}this.options.target=document.getElementById(this.name.target)}this.container&&this.options.target.appendChild(this.container)},yi.prototype.display=function(e){this.container.style.display=e?"flex":"none"},yi.prototype.getContainer=function(){var e=this.container.childNodes;return e.length?e[0]:this.container},yi.prototype.onCollapseGroupMapBox=function(e){gi.trace("onCollapseGroupMapBox",e),e.editorID=this.id,e.data=this.options,Jr.a.dispatch(Qr.group.oncollapse,e)};var vi=yi,_i={_addUID:function(e){return this._uid?e+"-"+this._uid:e}};function bi(e){return(bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var wi=Mo.a.getLogger("editor");function Ei(e){if(wi.trace("[constructor] Editor",e),this.options=e||{},!(this instanceof Ei))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize()}Wo.assign(Ei.prototype,_i),Ei.prototype.constructor=Ei,Ei.prototype._initialize=function(){if(this.options.target||wi.info("La 'target' n'est pas renseignÃ©e (options.target)."),this.options.style){this.options.events?this._initEvents():wi.warn("Les 'handlers' ne sont pas renseignÃ©s (options.events) !"),this.options.themes||wi.info("Les 'themes' MapBox ne sont pas renseignÃ©s (options.themes).");var e={themes:!1,layers:!0,style:!1,filter:!1,legend:!1,group:!1,sort:!0,title:!0,type:!0,pin:!0,visibility:!0,icon:{image:!0,anchor:"end"},editable:!0};this.options.tools||(wi.trace("Utilisation des outils MapBox par dÃ©faut (options.tools)."),this.options.tools=e),Wo.mergeParams(this.options.tools,e,!1),this.id=this.options.id||yn.generate(),this.layers=[],this.container=null,this.name={target:"GPEditorMapBoxTarget",container:"GPEditorMapBoxContainer",containerID:"GPEditorMapBoxContainer_ID_",containerLayers:"GPEditorMapBoxLayersContainer",titleLayers:"GPEditorMapBoxLayersTitle",titleLayersID:"GPEditorMapBoxLayersTitle_ID_",titleThemes:"GPEditorMapBoxThemesTitle",titleThemesID:"GPEditorMapBoxThemesTitle_ID_",sep:"GPEditorMapBoxSep"},this.mapbox={},this.sprites={}}else wi.error("Le 'style' MapBox n'est pas renseignÃ© (options.style) !")},Ei.prototype._initEvents=function(){var e=this.options.scope||this,t=this.options.events;if(t)for(var o in t)if(t.hasOwnProperty(o)){var n=t[o];n&&(Jr.a.hasEventListener(o,n,e)||Jr.a.addEventListener(o,n,e))}},Ei.prototype._initContainer=function(){wi.trace(this.mapbox);var e=document.createElement("div");e.id=this.name.containerID+this.id,e.className=this.name.container;var t=this.options.tools.themes;if(t&&this.options.themes){if(this.options.tools.title){var o=document.createElement("div");o.id=this.name.titleThemesID+this.id,o.className=this.name.titleThemes,o.innerHTML="Liste des 'thÃ¨mes'",e.appendChild(o)}new ri({id:this.id,target:e,tools:"object"===bi(t)?t:{},obj:this.options.themes}).add()}for(var n in this.mapbox.sources)if(this.mapbox.sources.hasOwnProperty(n)){if(this.options.tools.layers){var r=Object.keys(this.mapbox.sources).length>1?1:0;if(r){var i=document.createElement("hr");i.className=this.name.sep,e.appendChild(i)}if(this.options.tools.title){var s=document.createElement("div");s.id=this.name.titleLayersID+this.id,s.className=this.name.titleLayers,s.innerHTML=r?"Liste des 'couches' ("+n+")":"Liste des 'couches'",e.appendChild(s)}}var a=this.mapbox.layers.slice();a.forEach((function(e,t){var o=e.metadata;o?o["geoportail:order"]=t:e.metadata={"geoportail:order":t}})),this.options.tools.sort&&a.sort((function(e,t){var o=null,n=null;return e.metadata&&e.metadata["geoportail:group"]&&t.metadata&&t.metadata["geoportail:group"]?(o=e.metadata["geoportail:group"],n=t.metadata["geoportail:group"]):(o=e.id,n=t.id),o<n?-1:o>n?1:0})),wi.trace("Layers : ",a);var l={};a.forEach((function(e){var t=e.metadata;if(t&&t["geoportail:group"]){var o=t["geoportail:group"];l[o]=l[o]?l[o]+1:1}else{var n=e.id,r=n.search(/_|-|:|=/),i=-1!==r?n.substring(0,r).trim():n;l[i]=l[i]?l[i]+1:1,t?t["geoportail:group"]=i:e.metadata={"geoportail:group":i}}})),wi.trace("Groups : ",l);var c=document.createElement("div");c.className=this.name.containerLayers,e.appendChild(c);for(var u=c,d=-1,h=0;h<a.length;h++){var p=a[h];if(d++,p.source===n){if(this.options.tools.group)if(p.metadata){var f=p.metadata["geoportail:group"];if(f)if(l[f]>1){l[f]=-1;var m=new vi({id:this.id,target:c,title:f,collapse:!0});m.add(),u=m.getContainer()}else 1===l[f]&&(u=c);else u=c}else u=c;if(this.options.tools.layers){var g=new mi({id:this.id,target:u,position:d+"_"+this.id,tools:{visibility:this.options.tools.visibility,icon:this.options.tools.icon,type:this.options.tools.type,pin:this.options.tools.pin},obj:{id:p.id,type:p.type,source:p.source,"source-layer":p["source-layer"]}});g.add(),p.layout&&p.layout.visibility&&"none"===p.layout.visibility&&g.visibility(!1),this.layers.push(g)}if(this.options.tools.legend){var y=this.options.tools.editable;void 0===y&&(y=p.editable);var v=new di({id:this.id,target:u,sprites:this.sprites,obj:{id:p.id,source:p.source,title:p.id,editable:void 0!==y&&y,paint:p.paint,layout:p.layout}});v.add(),v.display(!1),g&&(g.addLegend(v),g.slotLegend())}if(this.options.tools.style){var _=new ti({id:this.id,target:u,position:d+"_"+this.id,obj:{id:p.id,source:p.source,layout:p.layout,paint:p.paint}});_.add(),_.display(!1),g&&g.addStyle(_),p.layout&&p.layout.visibility&&"none"===p.layout.visibility&&g.visibility(!1)}if(this.options.tools.filter){var b=new ai({id:this.id,target:u,position:d+"_"+this.id,obj:{id:p.id,source:p.source,filter:p.Filter}});b.add(),b.display(!1),g&&g.addFilter(b)}}else d>=0&&d--}}if(this.container=e,!this.options.target){if(!document.getElementById(this.name.target)){var w=document.createElement("div");w.id=this.name.target,(document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0]||document.documentElement).appendChild(w)}this.options.target=document.getElementById(this.name.target)}this.container&&this.options.target.appendChild(this.container),Jr.a.dispatch(Qr.onloaded,this)},Ei.prototype._getSprites=function(e){var t=this;if(e&&e.startsWith("mapbox://"))return new Promise((function(e,o){wi.info("Protocole mapbox:// non gÃ©rÃ© !"),e(t)}));if(!e)return new Promise((function(e,o){wi.info("Auncun sprites disponibles !"),e(t)}));var o;return Promise.all([(o=e+".png",fetch(o,{credentials:"same-origin"}).then((function(e){if(e.ok)return e.blob().then((function(e){t.sprites.url=o;var n=new Image;return n.src=o,n.decode().then((function(){t.sprites.size={},t.sprites.size.h=n.height,t.sprites.size.w=n.width}))})).catch((function(e){wi.warn("fetch image sprites exception :",e)}))})).catch((function(e){wi.warn("fetch sprites exception :",e)}))),fetch(e+".json",{credentials:"same-origin"}).then((function(e){if(e.ok)return e.json().then((function(e){t.sprites.json=e})).catch((function(e){wi.warn("fetch json sprites exception :",e)}))})).catch((function(e){wi.warn("fetch sprites exception :",e)}))])},Ei.prototype.createElement=function(){var e=this;return"object"===bi(this.options.style)?(this.mapbox=this.options.style,this.options.tools.legend?this._getSprites(this.mapbox.sprite).then((function(){return e._initContainer(),e})).catch((function(e){wi.warn("fetch sprites exception :",e)})):new Promise((function(t,o){e._initContainer(),t(e)}))):"string"==typeof this.options.style?fetch(this.options.style,{credentials:"same-origin"}).then((function(t){return t.json().then((function(t){e.mapbox=t})).then((function(){return e.options.tools.legend?e._getSprites(e.mapbox.sprite).then((function(){return e._initContainer(),e})).catch((function(e){wi.warn("fetch sprites exception :",e)})):new Promise((function(t,o){e._initContainer(),t(e)}))})).catch((function(e){wi.error("json exception :",e)}))})).catch((function(e){wi.error("fetch exception :",e)})):void 0},Ei.prototype.display=function(e){this.container.style.display=e?"block":"none"},Ei.prototype.getID=function(){return this.id},Ei.prototype.getContainer=function(){return this.container},Ei.prototype.getStyle=function(){return this.mapbox},Ei.prototype.getStyleLayer=function(e){for(var t=null,o=this.getLayer(e).options.obj.id,n=0;n<this.mapbox.layers.length;n++){var r=this.mapbox.layers[n];if(r.id===o){t=r;break}}return t},Ei.prototype.getLayerFromStyle=function(e){for(var t=null,o=this.mapbox.layers[e],n=0;n<this.getLayers().length;n++){var r=this.getLayer(n);if(o.id===r.options.obj.id){t=r;break}}return t},Ei.prototype.getLayers=function(){return this.layers},Ei.prototype.getLayer=function(e){return this.layers[e]};var Oi=Ei;window.ol&&window.ol.style&&(window.ol.style.Editor=Ei);var Si={_addUID:function(e){return this._uid?e+"-"+this._uid:e},_createLoadingElement:function(){var e=document.createElement("div");return e.id="GPmapLoading",e.className="",e},_createMainContainerElement:function(){var e=document.createElement("div");return e.id=this._addUID("GPimport"),e.className="GPwidget",e},_createShowImportElement:function(){var e=document.createElement("input");return e.id=this._addUID("GPshowImport"),e.type="checkbox",e},_createShowImportPictoElement:function(){var e=this,t=document.createElement("label");t.id=this._addUID("GPshowImportPicto"),t.className="GPshowAdvancedToolPicto",t.htmlFor=this._addUID("GPshowImport"),t.title="Ouvrir l'import de couches",t.addEventListener?t.addEventListener("click",(function(){e._onShowImportClick()})):t.attachEvent&&t.attachEvent("onclick",(function(){e._onShowImportClick()}));var o=document.createElement("span");return o.id=this._addUID("GPshowImportOpen"),o.className="GPshowAdvancedToolOpen",t.appendChild(o),t},_createImportPanelElement:function(){var e=document.createElement("div");return e.id=this._addUID("GPimportPanel"),e.className="GPpanel",e},_createImportPanelHeaderElement:function(){var e=document.createElement("div");e.className="GPpanelHeader";var t=this._createImportPanelTitleElement();e.appendChild(t);var o=this._createImportPanelCloseElement();return e.appendChild(o),e},_createImportPanelTitleElement:function(){var e=document.createElement("div");return e.className="GPpanelTitle",e.innerHTML="Import de donnÃ©es",e},_createImportPanelCloseElement:function(){var e=this,t=document.createElement("div");return t.id=this._addUID("GPimportPanelClose"),t.className="GPpanelClose",t.title="Fermer le panneau",t.addEventListener?t.addEventListener("click",(function(){document.getElementById(e._addUID("GPshowImportPicto")).click()}),!1):t.attachEvent&&t.attachEvent("onclick",(function(){document.getElementById(e._addUID("GPshowImportPicto")).click()})),t},_createImportPanelFormElement:function(){var e=this,t=document.createElement("form");return t.id=this._addUID("GPimportForm"),t.className="map-tool-box",t.addEventListener?t.addEventListener("submit",(function(t){t.preventDefault(),e._onImportSubmit()})):t.attachEvent&&t.attachEvent("onsubmit",(function(t){t.preventDefault(),e._onImportSubmit()})),t},_createImportTypeLineElement:function(e){var t=this,o=document.createElement("div");o.id=this._addUID("GPimportTypeLine"),o.className="GPimportInputLine";var n=document.createElement("label");n.htmlFor=this._addUID("GPimportType"),n.className="GPimportLabel",n.innerHTML="Type de donnÃ©e",n.title="Type de donnÃ©e",o.appendChild(n);var r,i=document.createElement("select");i.className="GPimportSelect",i.addEventListener?i.addEventListener("change",(function(e){"KML"===this.value||"GPX"===this.value||"GeoJSON"===this.value||"MAPBOX"===this.value?(document.getElementById(t._addUID("GPimportStaticParams")).className="GPimportVisibleParams",document.getElementById(t._addUID("GPimportServiceParams")).className="GPimportHiddenParams"):"WMS"!==this.value&&"WMTS"!==this.value&&"WFS"!==this.value||(document.getElementById(t._addUID("GPimportServiceParams")).className="GPimportVisibleParams",document.getElementById(t._addUID("GPimportStaticParams")).className="GPimportHiddenParams"),t._onImportTypeChange(e)})):i.attachEvent&&i.attachEvent("onchange",(function(){"KML"===this.value||"GPX"===this.value||"GeoJSON"===this.value||"MAPBOX"===this.value?(document.getElementById(t._addUID("GPimportStaticParams")).className="GPimportVisibleParams",document.getElementById(t._addUID("GPimportServiceParams")).className="GPimportHiddenParams"):"WMS"!==this.value&&"WMTS"!==this.value&&"WFS"!==this.value||(document.getElementById(t._addUID("GPimportServiceParams")).className="GPimportVisibleParams",document.getElementById(t._addUID("GPimportStaticParams")).className="GPimportHiddenParams"),t._onImportTypeChange()})),i.id=this._addUID("GPimportType"),e&&Array.isArray(e)||(e=["KML","GPX","GeoJSON","MAPBOX","WMS","WMTS","WFS"]);for(var s=0;s<e.length;s++)(r=document.createElement("option")).value=e[s],r.text="MAPBOX"===e[s]?"Vecteur tuilÃ©":e[s],i.appendChild(r);return o.appendChild(i),o},_createImportWaitingElement:function(){var e=document.createElement("div");e.id=this._addUID("GPimportWaitingContainer"),e.className="GPimportWaitingContainerHidden";var t=document.createElement("p");return t.className="GPimportWaiting",t.innerHTML="Recherche en cours...",e.appendChild(t),e},_createImportStaticParamsContainer:function(e){var t=document.createElement("div");return t.id=this._addUID("GPimportStaticParams"),t.className="KML"===e||"GPX"===e||"GeoJSON"===e||"MAPBOX"===e?"GPimportVisibleParams":"GPimportHiddenParams",t},_createStaticNameLabel:function(){var e=document.createElement("div");e.className="GPimportInputLine";var t=document.createElement("label");t.className="GPimportLabel",t.htmlFor=this._addUID("GPimportName"),t.innerHTML="Nom",t.title="Nom",e.appendChild(t);var o=document.createElement("input");return o.type="text",o.id=this._addUID("GPimportName"),o.className="GPimportInput",e.appendChild(o),e},_createStaticModeChoiceDiv:function(){var e=document.createElement("div");return e.id=this._addUID("GPimportChoice"),e},_createStaticLocalChoiceDiv:function(){var e=this,t=document.createElement("div");t.className="GPimportChoiceAlt";var o=document.createElement("input");o.type="radio",o.addEventListener?o.addEventListener("change",(function(t){document.getElementById(e._addUID("GPimportValueLocal")).className="GPimportInputLine",document.getElementById(e._addUID("GPimportValueUrl")).className="GPimportValueHidden",e._onStaticImportTypeChange(t)})):o.appendChild&&o.appendChild("onchange",(function(){document.getElementById(e._addUID("GPimportValueLocal")).className="GPimportInputLine",document.getElementById(e._addUID("GPimportValueUrl")).className="GPimportValueHidden",e._onStaticImportTypeChange()})),o.name="GPimportChoiceMode",o.value="local",o.checked=!0,o.id=this._addUID("GPimportChoiceAltLocal"),t.appendChild(o);var n=document.createElement("label");return n.className="GPimportChoiceAltTxt",n.htmlFor=this._addUID("GPimportChoiceAltLocal"),n.innerHTML="par fichier local",n.title="par fichier local",t.appendChild(n),t},_createStaticUrlChoiceDiv:function(){var e=this,t=document.createElement("div");t.className="GPimportChoiceAlt";var o=document.createElement("input");o.type="radio",o.addEventListener?o.addEventListener("change",(function(t){document.getElementById(e._addUID("GPimportValueUrl")).className="GPimportInputLine",document.getElementById(e._addUID("GPimportValueLocal")).className="GPimportValueHidden",e._onStaticImportTypeChange(t)})):o.appendChild&&o.appendChild("onchange",(function(){document.getElementById(e._addUID("GPimportValueUrl")).className="GPimportInputLine",document.getElementById(e._addUID("GPimportValueLocal")).className="GPimportValueHidden",e._onStaticImportTypeChange()})),o.id=this._addUID("GPimportChoiceAltUrl"),o.name="GPimportChoiceMode",o.value="url",o.checked=!1,t.appendChild(o);var n=document.createElement("label");return n.className="GPimportChoiceAltTxt",n.htmlFor=this._addUID("GPimportChoiceAltUrl"),n.innerHTML="par URL",n.title="par URL",t.appendChild(n),t},_createStaticLocalInputDiv:function(){var e=document.createElement("div");return e.id=this._addUID("GPimportValueLocal"),e.className="GPimportInputLine",e},_createStaticLocalInputLabel:function(){var e=document.createElement("label");return e.className="GPimportLabel",e.htmlFor=this._addUID("GPimportFile"),e.innerHTML="Fichier local",e.title="Fichier local",e},_createStaticLocalInput:function(){var e=document.createElement("input");return e.type="file",e.id=this._addUID("GPimportFile"),e.className="GPimportInputFile",e},_createStaticUrlInputDiv:function(){var e=document.createElement("div");return e.id=this._addUID("GPimportValueUrl"),e.className="GPimportValueHidden",e},_createStaticUrlInputLabel:function(){var e=document.createElement("label");return e.className="GPimportLabel",e.htmlFor=this._addUID("GPimportUrl"),e.innerHTML="URL",e.title="URL",e},_createStaticUrlInput:function(){var e=document.createElement("input");return e.type="text",e.id=this._addUID("GPimportUrl"),e.className="GPimportInput",e},_createServiceParamsContainer:function(e){var t=document.createElement("div");return t.id=this._addUID("GPimportServiceParams"),t.className="WMS"===e||"WMTS"===e||"WFS"===e?"GPimportVisibleParams":"GPimportHiddenParams",t},_createServiceUrlDiv:function(){var e=document.createElement("div");return e.className="GPimportInputLine",e},_createServiceUrlInputLabel:function(){var e=document.createElement("label");return e.className="GPimportLabel",e.htmlFor=this._addUID("GPimportServiceUrl"),e.innerHTML="URL du service",e.title="URL du service",e},_createServiceUrlInput:function(){var e=document.createElement("input");return e.type="text",e.id=this._addUID("GPimportServiceUrl"),e.className="GPimportInput",e},_createImportSubmitFormElement:function(){var e=document.createElement("input");return e.id=this._addUID("GPimportSubmit"),e.className="GPinputSubmit tool-form-submit",e.type="submit",e.value="Importer",e},_createImportGetCapPanelElement:function(){var e=document.createElement("div");return e.id=this._addUID("GPimportGetCapPanel"),e.className="GPpanel",e},_createImportGetCapPanelHeaderElement:function(){var e=this,t=document.createElement("div");t.className="GPpanelHeader";var o=document.createElement("div");o.className="GPpanelTitle",o.innerHTML="Couches accessibles",o.title="Couches accessibles",t.appendChild(o);var n=document.createElement("div");return n.addEventListener?n.addEventListener("click",(function(){document.getElementById(e._addUID("GPimportGetCapPanel")).style.display="none",document.getElementById(e._addUID("GPimportPanel")).style.display="",e._onGetCapPanelClose()})):n.attachEvent&&n.attachEvent("click",(function(){document.getElementById(e._addUID("GPimportGetCapPanel")).style.display="none",document.getElementById(e._addUID("GPimportPanel")).style.display="",e._onGetCapPanelClose()})),n.className="GPpanelClose",n.title="Fermer le panneau",n.id=this._addUID("GPimportGetCapPanelClose"),t.appendChild(n),t},_createImportGetCapResultsContainer:function(){var e=document.createElement("div");return e.className="GPimportGetCapRoot",e.id=this._addUID("GPimportGetCapResults"),e},_addImportGetCapResultListRubrique:function(e,t){var o=document.createElement("ul");return o.className="GPimportGetCapListRubrique",o.title=e,t.appendChild(o),t},_addImportGetCapResultRubrique:function(e,t){var o=document.createElement("li");o.className="GPimportGetCapRubrique";var n=document.createElement("input");n.id="GPimportGetCapRubrique-"+yn.generate(),n.className="GPimportGetCapRubrique",n.type="checkbox",o.appendChild(n);var r=document.createElement("label");return r.className="GPimportGetCapRubriqueTitle",r.htmlFor=n.id,r.innerHTML=e,r.title=e,o.appendChild(r),t.appendChild(o),t},_addImportGetCapResultListLayer:function(e){var t=document.createElement("ul");return t.className="GPimportGetCapListLayer",e.appendChild(t),e},_addImportGetCapResultLayer:function(e,t,o){var n=document.createElement("li");n.className="GPimportGetCapProposal",n.innerHTML=e.content,n.title=e.title,n.id="GPimportGetCapProposal_"+t;var r=this;return n.addEventListener?n.addEventListener("click",(function(e){r._onGetCapResponseLayerClick(e)})):n.attachEvent&&n.attachEvent("onclick",(function(){r._onGetCapResponseLayerClick()})),o.appendChild(n),o},_createImportMapBoxPanelElement:function(){var e=document.createElement("div");return e.id=this._addUID("GPimportMapBoxPanel"),e.className="GPpanel",e},_createImportMapBoxPanelHeaderElement:function(){var e=this,t=document.createElement("div");t.className="GPpanelHeader";var o=document.createElement("div");o.id=this._addUID("GPimportMapBoxPanelReturnPicto"),o.title="Masquer le panneau",o.className="",o.addEventListener?o.addEventListener("click",(function(t){e._onMapBoxReturnPictoClick(t)})):o.attachEvent&&o.attachEvent("onclick",(function(t){e._onMapBoxReturnPictoClick(t)})),t.appendChild(o);var n=document.createElement("div");n.className="GPpanelTitle",n.innerHTML="Edition des styles",n.title="Edition des styles",t.appendChild(n);var r=document.createElement("div");return r.addEventListener?r.addEventListener("click",(function(){document.getElementById(e._addUID("GPimportMapBoxPanel")).style.display="none",document.getElementById(e._addUID("GPimportPanel")).style.display="",e._onMapBoxPanelClose()})):r.attachEvent&&r.attachEvent("click",(function(){document.getElementById(e._addUID("GPimportMapBoxPanel")).style.display="none",document.getElementById(e._addUID("GPimportPanel")).style.display="",e._onMapBoxPanelClose()})),r.className="GPpanelClose",r.title="Fermer le panneau",r.id=this._addUID("GPimportMapBoxPanelClose"),t.appendChild(r),t},_createImportMapBoxResultsContainer:function(){var e=document.createElement("div");return e.className="GPimportMapBoxpRoot",e.id=this._addUID("GPimportMapBoxResults"),e}};function xi(e){return(xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ci=Mo.a.getLogger("layerimport"),ji=function(e){function t(o){if(o=o||{},!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(o);var n=this._container=this._initContainer(o);e.call(this,{element:n,target:o.target,render:o.render})}return e&&(t.__proto__=e),t.DefaultStyles={image:new Fo.a({src:An.lightOrange,anchor:[25.5,38],anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels"}),stroke:new zo.a({color:"rgba(0,42,80,0.8)",width:4}),fill:new Bo.a({color:"rgba(0, 183, 152, 0.5)"}),text:new Uo.a({font:"16px Sans",textAlign:"left",fill:new Bo.a({color:"rgba(255, 255, 255, 1)"}),stroke:new zo.a({color:"rgba(0, 0, 0, 1)",width:2})})},t.prototype=Object.create(e.prototype,{}),Wo.assign(t.prototype,Si),t.prototype.constructor=t,t.prototype.setMap=function(t){t&&(t.getLayers().on("remove",(function(e){"layerimport:MapBox"===e.element.gpResultLayerId&&this._mapBoxLayerId&&this._mapBoxLayerId===e.element.id&&this._mapBoxPanel&&this._mapBoxPanel.style.display&&(this.cleanMapBoxResultsList(),this._mapBoxPanel.style.display="none",this._importPanel.style.display="")}),this),this.draggable&&(zn.dragElement(this._importPanel,this._importPanelHeader,t.getTargetElement()),zn.dragElement(this._getCapPanel,null,t.getTargetElement()),zn.dragElement(this._mapBoxPanel,null,t.getTargetElement()))),e.prototype.setMap.call(this,t)},t.prototype.getCollapsed=function(){return this.collapsed},t.prototype.setCollapsed=function(e){void 0!==e?e&&this.collapsed||!e&&!this.collapsed||(e?document.getElementById("GPimportPanelClose-"+this._uid).click():document.getElementById("GPshowImport-"+this._uid).click(),this.collapsed=e):Ci.error("[ERROR] LayerImport:setCollapsed - missing collapsed parameter")},t.prototype.getStaticImportContent=function(){return this.contentStatic},t.prototype.getServiceImportContent=function(){return this.contentService},t.prototype._initialize=function(e){if(this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,layerTypes:["KML","GPX","GeoJSON","WMS","WMTS","MAPBOX"],webServicesOptions:{},vectorStyleOptions:{KML:{extractStyles:!0,showPointNames:!0,defaultStyle:{}},GPX:{defaultStyle:{}},GeoJSON:{defaultStyle:{}},MapBox:{defaultStyle:{},tools:{filter:!1,style:!1}}}},e.vectorStyleOptions&&e.vectorStyleOptions.KML&&e.vectorStyleOptions.KML.extractStyles&&(this.options.vectorStyleOptions.KML.extractStyles=e.vectorStyleOptions.KML.extractStyles),e.vectorStyleOptions&&e.vectorStyleOptions.KML&&e.vectorStyleOptions.KML.showPointNames&&(this.options.vectorStyleOptions.KML.showPointNames=e.vectorStyleOptions.KML.showPointNames),e.vectorStyleOptions&&e.vectorStyleOptions.KML&&e.vectorStyleOptions.KML.defaultStyle?this.options.vectorStyleOptions.KML.defaultStyle=e.vectorStyleOptions.KML.defaultStyle:this.options.vectorStyleOptions.KML.defaultStyle=new Do.c({image:t.DefaultStyles.image,stroke:t.DefaultStyles.stroke,fill:t.DefaultStyles.fill,text:t.DefaultStyles.text}),e.vectorStyleOptions&&e.vectorStyleOptions.GPX&&e.vectorStyleOptions.GPX.defaultStyle?this.options.vectorStyleOptions.GPX.defaultStyle=e.vectorStyleOptions.GPX.defaultStyle:this.options.vectorStyleOptions.GPX.defaultStyle=new Do.c({image:t.DefaultStyles.image,stroke:t.DefaultStyles.stroke,fill:t.DefaultStyles.fill}),e.vectorStyleOptions&&e.vectorStyleOptions.GeoJSON&&e.vectorStyleOptions.GeoJSON.defaultStyle?this.options.vectorStyleOptions.GeoJSON.defaultStyle=e.vectorStyleOptions.GeoJSON.defaultStyle:this.options.vectorStyleOptions.GeoJSON.defaultStyle=new Do.c({image:t.DefaultStyles.image,stroke:t.DefaultStyles.stroke,fill:t.DefaultStyles.fill}),e.vectorStyleOptions&&e.vectorStyleOptions.MapBox&&e.vectorStyleOptions.MapBox.defaultStyle?this.options.vectorStyleOptions.MapBox.defaultStyle=e.vectorStyleOptions.MapBox.defaultStyle:this.options.vectorStyleOptions.MapBox.defaultStyle=new Do.c({image:t.DefaultStyles.image,stroke:t.DefaultStyles.stroke,fill:t.DefaultStyles.fill,text:t.DefaultStyles.text}),Array.isArray(e.layerTypes)){for(var o=[],n=0;n<e.layerTypes.length;n++)o.push(e.layerTypes[n]);this.options.layerTypes=o}Wo.mergeParams(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=yn.generate(),this._waiting=!1,this._timer=null,this._initImportTypes(),this._initDefaultStyles(),this._showImportInput=null,this._importPanel=null,this._importPanelHeader=null,this._formContainer=null,this._staticLocalImportInput=null,this._staticUrlImportInput=null,this._serviceUrlImportInput=null,this._getCapPanel=null,this._getCapResultsListContainer=null,this._mapBoxPanel=null,this._mapBoxResultsListContainer=null,this._waitingContainer=null,this._loadingContainer=null,this._getCapRequestUrl=null,this._getCapResponseWMS=null,this._getCapResponseWMSLayers=[],this._getCapResponseWMTS=null,this._getCapResponseWMTSLayers=[],this.editor=null,this._mapBoxObj=null,this._mapBoxLayerId=null,this.contentStatic=null,this._url=null,this._file=null},t.prototype._checkInputOptions=function(e){if(e.layerTypes){var t=e.layerTypes;if(Array.isArray(t)){for(var o=["KML","GPX","GEOJSON","WMS","WMTS","WFS","MAPBOX"],n=[],r=0;r<t.length;r++)"string"!=typeof t[r]?(n.push(r),Ci.warn("[ol.control.LayerImport] 'options.layerTypes' elements should be of type string ("+t[r]+")")):(t[r]=t[r].toUpperCase(),-1===o.indexOf(t[r])&&(n.push(r),Ci.log("[ol.control.LayerImport] options.layerTypes : "+t[r]+" is not a supported type")),"GEOJSON"===t[r]&&(t[r]="GeoJSON"),"MAPBOX"===t[r]&&(t[r]="MAPBOX"));if(0!==n.length)for(var i=n.length-1;i>=0;i--)t.splice(n[i],1)}else Ci.warn('[ol.control.LayerImport] \'options.layerTypes\' parameter should be an array. Set default values ["KML", "GPX", "GeoJSON", "WMS", "WMTS"]'),e.layerTypes=["KML","GPX","GeoJSON","WMS","WMTS","MAPBOX"]}},t.prototype._initDefaultStyles=function(){var e=this.options.vectorStyleOptions.KML.defaultStyle;this._defaultKMLStyle=new Do.c({image:e.image,stroke:e.stroke,fill:e.fill,text:e.text});var t=this.options.vectorStyleOptions.GPX.defaultStyle;this._defaultGPXStyle=new Do.c({image:t.image,stroke:t.stroke,fill:t.fill});var o=this.options.vectorStyleOptions.GeoJSON.defaultStyle;this._defaultGeoJSONStyle=new Do.c({image:o.image,stroke:o.stroke,fill:o.fill});var n=this.options.vectorStyleOptions.MapBox.defaultStyle;this._defaultMapBoxStyle=new Do.c({image:n.image,stroke:n.stroke,fill:n.fill,text:n.text})},t.prototype._initImportTypes=function(){this._currentImportType=this.options.layerTypes[0]||"KML","KML"===this._currentImportType||"GPX"===this._currentImportType||"GeoJSON"===this._currentImportType||"MAPBOX"===this._currentImportType?this._isCurrentImportTypeStatic=!0:"WMS"!==this._currentImportType&&"WMTS"!==this._currentImportType&&"WFS"!==this._currentImportType||(this._isCurrentImportTypeStatic=!1),this._currentStaticImportType="local"},t.prototype._initContainer=function(){var e=this._createMainContainerElement(),t=this._showImportInput=this._createShowImportElement();e.appendChild(t),this.collapsed||(t.checked=!0);var o=this._createShowImportPictoElement();e.appendChild(o);var n=this._importPanel=this._createImportPanelElement(),r=this._importPanelHeader=this._createImportPanelHeaderElement();n.appendChild(r);var i=this._formContainer=this._initInputFormElement();n.appendChild(i),e.appendChild(n);var s=this._getCapPanel=this._createImportGetCapPanelElement(),a=this._createImportGetCapPanelHeaderElement();s.appendChild(a);var l=this._getCapResultsListContainer=this._createImportGetCapResultsContainer();s.appendChild(l),e.appendChild(s);var c=this._mapBoxPanel=this._createImportMapBoxPanelElement(),u=this._createImportMapBoxPanelHeaderElement();c.appendChild(u);var d=this._mapBoxResultsListContainer=this._createImportMapBoxResultsContainer();c.appendChild(d);var h=this._loadingContainer=this._createLoadingElement();c.appendChild(h),e.appendChild(c);var p=this._waitingContainer=this._createImportWaitingElement();return e.appendChild(p),e},t.prototype._initInputFormElement=function(){var e=this._createImportPanelFormElement(),t=this._createImportTypeLineElement(this.options.layerTypes);e.appendChild(t);var o=this._createImportStaticParamsContainer(this.options.layerTypes[0]),n=this._createStaticNameLabel();o.appendChild(n);var r=this._createStaticModeChoiceDiv(),i=this._createStaticLocalChoiceDiv();r.appendChild(i);var s=this._createStaticUrlChoiceDiv();r.appendChild(s),o.appendChild(r);var a=this._createStaticLocalInputDiv();a.appendChild(this._createStaticLocalInputLabel()),this._staticLocalImportInput=this._createStaticLocalInput(),a.appendChild(this._staticLocalImportInput),o.appendChild(a);var l=this._createStaticUrlInputDiv();l.appendChild(this._createStaticUrlInputLabel()),this._staticUrlImportInput=this._createStaticUrlInput(),l.appendChild(this._staticUrlImportInput),o.appendChild(l),e.appendChild(o);var c=this._createServiceParamsContainer(this.options.layerTypes[0]),u=this._createServiceUrlDiv();u.appendChild(this._createServiceUrlInputLabel()),this._serviceUrlImportInput=this._createServiceUrlInput(),u.appendChild(this._serviceUrlImportInput),c.appendChild(u),e.appendChild(c);var d=this._createImportSubmitFormElement();return e.appendChild(d),e},t.prototype._onShowImportClick=function(){var e=this.getMap();In.unset(e),this._mapBoxObj&&(this._mapBoxPanel.style.display="block"),this.collapsed=this._showImportInput.checked,this.dispatchEvent("change:collapsed")},t.prototype._onImportTypeChange=function(e){this._currentImportType=e.target.value,"KML"===this._currentImportType||"GPX"===this._currentImportType||"GeoJSON"===this._currentImportType||"MAPBOX"===this._currentImportType?this._isCurrentImportTypeStatic=!0:"WMS"!==this._currentImportType&&"WMTS"!==this._currentImportType&&"WFS"!==this._currentImportType||(this._isCurrentImportTypeStatic=!1)},t.prototype._onStaticImportTypeChange=function(e){this._currentStaticImportType=e.target.value},t.prototype._onGetCapPanelClose=function(){"WMS"!==this._currentImportType&&"WMTS"!==this._currentImportType&&"WFS"!==this._currentImportType||this.cleanGetCapResultsList()},t.prototype._onMapBoxPanelClose=function(){this.cleanMapBoxResultsList(),this._loadingContainer.className=""},t.prototype._onMapBoxReturnPictoClick=function(e){this._mapBoxPanel.style.display="none",this._showImportInput.checked=!1,this._loadingContainer.className=""},t.prototype._onImportSubmit=function(){Ci.log("import d'une couche de type : "+this._currentImportType),this.contentStatic=null,this.contentService=null,this._isCurrentImportTypeStatic?this._importStaticLayer():this._importServiceLayers()},t.prototype._importStaticLayer=function(){var e,t=document.getElementById(this._addUID("GPimportName"));t&&(e=t.value||"",Ci.log("import layer name : "+e)),"local"===this._currentStaticImportType?(Ci.log("import static layer from local file"),this._importStaticLayerFromLocalFile(e)):"url"===this._currentStaticImportType&&(Ci.log("import static layer from url"),this._importStaticLayerFromUrl(e))},t.prototype._importStaticLayerFromUrl=function(e){e=e||"";var t=this._staticUrlImportInput.value;if(Ci.log("url : ",t),0!==t.length)if(t.trim&&(t=t.trim()),this._url=t,this.options.webServicesOptions&&(this.options.webServicesOptions.proxyUrl||this.options.webServicesOptions.noProxyDomains)){t=Io.proxifyUrl(t,this.options.webServicesOptions);var o=this;Ao.Protocols.XHR.call({url:t,method:"GET",timeOut:15e3,onResponse:function(t){o._hideWaitingContainer(),o._addFeaturesFromImportStaticLayer(t,e)},onFailure:function(e){o._hideWaitingContainer(),Ci.error("[ol.control.LayerImport] KML/GPX/GeoJSON/MapBox request failed : ",e)}})}else Ci.error("[ol.control.LayerImport] options.webServicesOptions.proxyUrl parameter is mandatory to request resources on another domain (cross-domain)");else Ci.error("[ol.control.LayerImport] url parameter is mandatory")},t.prototype._importStaticLayerFromLocalFile=function(e){var t=this._staticLocalImportInput.files[0];if(t){this._file=t;var o=new FileReader,n=this;o.onerror=function(e){n._hideWaitingContainer(),Ci.error("error fileReader : ",e)},o.onprogress=function(){Ci.log("onprogress")},o.onloadstart=function(){n._displayWaitingContainer(),Ci.log("onloadstart")},o.onabort=function(){n._hideWaitingContainer(),Ci.log("onabort")},o.onloadend=function(e){Ci.log("onloadend : ",e)},o.onload=function(t){Ci.log("fileReader onload - file content : ",t.target.result),n._hideWaitingContainer(),n._addFeaturesFromImportStaticLayer(t.target.result,e)},o.readAsText(t)}else Ci.warn("[ol.control.LayerImport] missing file")},t.prototype._addFeaturesFromImportStaticLayer=function(e,t){var o=this.getMap();if(o&&e){var n=null,r=null,i=null,s=null;if(this.contentStatic=e,"MAPBOX"===this._currentImportType){var l=this,c=this._mapBoxObj=JSON.parse(e),h=c.sources,p=Object.keys(h).length>1?1:0;for(var f in h)if(h.hasOwnProperty(f)){var m="",g="",y=null,v=null,_=null,b=null;if(c.metadata)for(var w in c.metadata)if(c.metadata.hasOwnProperty(w)){var E=w.split(":");if("geoportail"===E[0]){var O=E[1];if("title"===O){m=c.metadata[w];continue}if("description"===O){g=c.metadata[w];continue}if("quicklookUrl"===O){y=c.metadata[w];continue}if("legends"===O){v=c.metadata[w];continue}if("metadata"===O){_=c.metadata[w];continue}if("originators"===O){b=c.metadata[w];continue}}}m||(m="Couche MapBox"),g||(g="Couche MapBox"),m=p?m+"("+f+")":m;var S=h[f],x=S.type;if("vector"===x){var C=S.url,j=S.tiles,P=c.sprite;if(C&&0===C.indexOf("mapbox://")){var T=this._url;if(T){if(j=["a","b","c","d"].map((function(e){return"https://"+e+".tiles.mapbox.com/v4/"+C.replace("mapbox://","")+"/{z}/{x}/{y}.vector.pbf?"+T.split("?")[1]})),0===P.indexOf("mapbox://")){var A=T.split("?");c.sprite=A[0]+"/sprite?"+A[1]}}else Ci.warn("Not yet implemented, can't use the local import scheme with a 'mapbox://' in the file.!")}if(j)i=new Vr.a,(r=new u.a({attributions:S.attribution,format:i,tileGrid:Object(zr.c)({extent:S.bounds,maxZoom:S.maxzoom||22,minZoom:S.minzoom||1,tileSize:S.tileSize||256}),urls:j}))._title=m,r._description=g,r._quicklookUrl=y,r._metadata=_,r._legends=v,r._originators=b,r.on("tileloadstart",(function(e){l._loadingContainer.className="GPmapLoadingVisible"})),r.on("tileloadend",(function(e){l._loadingContainer.className=""})),r.on("tileloaderror",(function(e){l._loadingContainer.className=""})),n=new Yr.a({source:r,visible:!1,declutter:!0}),this._mapBoxLayerId=n.id=f,n.gpResultLayerId="layerimport:"+this._currentImportType;else if(C){i=new Vr.a,n=new Yr.a({visible:!1,declutter:!0}),this._mapBoxLayerId=n.id=f,n.gpResultLayerId="layerimport:"+this._currentImportType;var M=new Xr.a({url:C}),I=M.on("change",(function(){if("ready"===M.getState()){for(var e=M.getTileJSON(),t=Array.isArray(e.tiles)?e.tiles:[e.tiles],o=0;o<t.length;o++){var s=t[o];0!==s.indexOf("http")&&(t[o]=C+s)}(r=new u.a({attributions:M.getAttributions()||e.attribution,format:i,tileGrid:Object(zr.c)({extent:S.bounds,maxZoom:e.maxzoom||S.maxzoom||22,minZoom:e.minzoom||S.minzoom||0,tileSize:e.tileSize||S.tileSize||256}),urls:t}))._title=m,r._description=g,r._quicklookUrl=y,r._metadata=_,r._legends=v,r._originators=b,r.on("tileloadstart",(function(e){l._loadingContainer.className="GPmapLoadingVisible"})),r.on("tileloadend",(function(e){l._loadingContainer.className=""})),n.setSource(r),n.set("mapbox-extension",e.vector_layers),Object(gn.b)(I)}}))}}else{if("geojson"!==x)return void Ci.warn("Type MapBox format unknown !");var R=S.data;i=new br.a,(r=new u.a({attributions:S.attribution,format:i,url:R}))._title=m,r._description=g,r._quicklookUrl=y,r._metadata=_,r._legends=v,r._originators=b,n=new Yr.a({source:r,visible:!1,declutter:!0}),this._mapBoxLayerId=n.id=f,n.gpResultLayerId="layerimport:"+this._currentImportType}!function(e){var t=function(){Object(Zr.a)(e.layer,e.styles,e.id).then((function(){e.layer.setVisible(!0);e.layer.setOpacity(1)})).then((function(){var t=o.getView().getProjection().getCode();o.getView()&&e.styles.center&&e.styles.center.length&&o.getView().setCenter(Object(a.E)(e.styles.center,"EPSG:4326",t)),o.getView()&&(e.styles.zoom||0===e.styles.zoom)&&o.getView().setZoom(e.styles.zoom);var n=e.layer.getSource();if(o.getView()&&o.getSize()&&n.getExtent){var r=n.getExtent();r&&r[0]!==1/0&&o.getView().fit(n.getExtent(),o.getSize())}})).then((function(){})).catch((function(e){Ci.error(e)}))};Ci.warn(e.layer);var n=o.get("mapbox-styles")||{};n[e.id]=e.styles,o.set("mapbox-styles",n);for(var r=[],i=e.styles.layers,s=0;s<i.length;s++){var l=i[s];l.source!==e.id||r.push(l)}e.layer.set("mapbox-styles",r),o.addLayer(e.layer),e.layer.getSource()?t():e.layer.once("change:source",t),o.getControls().forEach((function(t){t instanceof Sn&&t.addLayer(e.layer,e.options)}))}({id:f,styles:c,layer:n,options:{title:t||m,description:g,quicklookUrl:y,metadata:_,legends:v,originators:b}})}this._importPanel.style.display="none",this._mapBoxPanel.style.display="block",this.editor=new Oi({target:this._mapBoxResultsListContainer,style:this._mapBoxObj,scope:this,events:{"editor:layer:onclickvisibility":this._onChangeVisibilitySourceMapBox,"editor:style:scale:onchangemin":this._onChangeScaleMinSourceMapBox,"editor:style:scale:onchangemax":this._onChangeScaleMaxSourceMapBox,"editor:legend:onchangevalue":this._onChangeLegendValueSourceMapBox},tools:{themes:!1,layers:!0,style:this.options.vectorStyleOptions.MapBox.tools.style,filter:this.options.vectorStyleOptions.MapBox.tools.filter,legend:!0,group:!1}}),this.editor.createElement()}else{"KML"===this._currentImportType?(i=new Xo({showPointNames:this.options.vectorStyleOptions.KML.showPointNames,extractStyles:this.options.vectorStyleOptions.KML.extractStyles,defaultStyle:[this.options.vectorStyleOptions.KML.defaultStyle]}),s=this.options.vectorStyleOptions.KML.defaultStyle):"GPX"===this._currentImportType?(i=new Wr.a,s=this.options.vectorStyleOptions.GPX.defaultStyle):"GeoJSON"===this._currentImportType&&(i=new br.a,s=this.options.vectorStyleOptions.GeoJSON.defaultStyle);var L,k=i.readProjection(e),G=this._getMapProjectionCode();if(L=i.readFeatures(e,{dataProjection:k,featureProjection:G}),Ci.log("loaded features : ",L),(r=new d.b({features:new ir.b})).addFeatures(L),Ci.trace(r),t?r._title=r._description=t:i.readName&&i.readName(e)?r._title=r._description=i.readName(e):(r._title=r._description="Import "+this._currentImportType,Ci.log('[ol.control.LayerImport] set default name "Import '+this._currentImportType+'"')),(n=new sr.a({source:r,style:s})).gpResultLayerId="layerimport:"+this._currentImportType,o.addLayer(n),o.getView()&&o.getSize()&&r.getExtent){var N=r.getExtent();N&&N[0]!==1/0&&o.getView().fit(r.getExtent(),o.getSize())}}}},t.prototype._addFeaturesFromImportStaticLayerUrl=function(e,t){var o,n,r,i=this.getMap();if(i&&e&&("MAPBOX"===this._currentImportType?Ci.trace("Not yet implemented !"):("KML"===this._currentImportType?r=new Xo({showPointNames:!0,extractStyles:this.options.vectorStyleOptions.KML.extractStyles,defaultStyle:[this.options.vectorStyleOptions.KML.defaultStyle]}):"GPX"===this._currentImportType?r=new Wr.a:"GeoJSON"===this._currentImportType&&(r=new br.a),o=new d.b({url:e,format:r}),"GPX"===this._currentImportType&&o.forEachFeature((function(e){null==e.getStyle()&&(Ci.log("[ol.control.LayerImport] set default style for GPX feature"),e.setStyle(this.options.vectorStyleOptions.GPX.defaultStyle))})),"GeoJSON"===this._currentImportType&&o.forEachFeature((function(e){null==e.getStyle()&&(Ci.log("[ol.control.LayerImport] set default style for GeoJSON feature"),e.setStyle(this.options.vectorStyleOptions.GeoJSON.defaultStyle))})),o._title=o._description=t||"Import "+this._currentImportType,n=new sr.a({source:o})),n.gpResultLayerId="layerimport:"+this._currentImportType,i.addLayer(n),i.getView()&&i.getSize()&&o.getExtent)){var s=o.getExtent();s&&s[0]!==1/0&&i.getView().fit(o.getExtent(),i.getSize())}},t.prototype._onChangeVisibilitySourceMapBox=function(e){var t=this,o=e.target.data.obj,n=e.target.srcElement;this.getMap().getLayers().forEach((function(e){if(e.get("mapbox-source")===o.source){for(var r=t._mapBoxObj.layers,i=0;i<r.length;i++)if(r[i].id===o.id){var s=r[i].layout;s?s.visibility=n.checked?"visible":"none":r[i].layout={visibility:n.checked?"visible":"none"};break}Object(Zr.a)(e,t._mapBoxObj,o.source).then((function(){})).catch((function(e){Ci.error(e)}))}}))},t.prototype._onChangeScaleMinSourceMapBox=function(e){var t=this,o=e.target.data.obj,n=e.target.srcElement;this.getMap().getLayers().forEach((function(e){if(e.get("mapbox-source")===o.source){for(var r=t._mapBoxObj.layers,i=0;i<r.length;i++)if(r[i].id===o.id){r[i].minzoom=n.value,n.title=n.value;break}Object(Zr.a)(e,t._mapBoxObj,o.source).then((function(){})).catch((function(e){Ci.error(e)}))}}))},t.prototype._onChangeScaleMaxSourceMapBox=function(e){var t=this,o=e.target.data.obj,n=e.target.srcElement;this.getMap().getLayers().forEach((function(e){if(e.get("mapbox-source")===o.source){for(var r=t._mapBoxObj.layers,i=0;i<r.length;i++)if(r[i].id===o.id){r[i].maxzoom=n.value,n.title=n.value;break}Object(Zr.a)(e,t._mapBoxObj,o.source).then((function(){})).catch((function(e){Ci.error(e)}))}}))},t.prototype._onChangeLegendValueSourceMapBox=function(e){var t=this,o=e.target.data.obj,n=e.target.srcElement;this.getMap().getLayers().forEach((function(e){if(e.get("mapbox-source")===o.source){for(var r=t._mapBoxObj.layers,i=0;i<r.length;i++)if(r[i].id===o.id){var s=r[i].paint;s&&(s[n.id]=n.value);break}Object(Zr.a)(e,t._mapBoxObj,o.source).then((function(){})).catch((function(e){Ci.error(e)}))}}))},t.prototype._importServiceLayers=function(){if("WFS"!==this._currentImportType){this.cleanGetCapResultsList();var e=this._getCapRequestUrl=this._serviceUrlImportInput.value;if(e){Ci.log("url : ",e),e.trim&&(e=e.trim());var t=e.indexOf("?");if(t<0?e+="?SERVICE="+this._currentImportType+"&REQUEST=GetCapabilities":t===e.length-1&&(e+="SERVICE="+this._currentImportType+"&REQUEST=GetCapabilities"),this.options.webServicesOptions&&(this.options.webServicesOptions.proxyUrl||this.options.webServicesOptions.noProxyDomains)){var o=this.options.webServicesOptions.proxyUrl,n=this.options.webServicesOptions.noProxyDomains,r=!1;if(n&&Array.isArray(n)&&n.length>0)for(var i in n)Ci.log("analyzing "+n[i]),-1!==e.indexOf(n[i])&&(Ci.log(e+" found in noProxyDomains list ("+n[i]+")."),r=!0);!1===r&&(e=o+encodeURIComponent(e)),this._displayWaitingContainer();var s=this;Ao.Protocols.XHR.call({url:e,method:"GET",timeOut:15e3,onResponse:function(e){s._hideWaitingContainer(),s._displayGetCapResponseLayers(e)},onFailure:function(e){s._hideWaitingContainer(),Ci.error("[ol.control.LayerImport] getCapabilities request failed : ",e)}})}else Ci.error("[ol.control.LayerImport] options.webServicesOptions.proxyUrl parameter is mandatory to request web service layers (getcapabilities request)")}else Ci.error("[ol.control.LayerImport] url parameter is mandatory")}else Ci.warn("[ol.control.LayerImport] WFS layer import is not implemented yet")},t.prototype._displayGetCapResponseLayers=function(e){var t,o,n,r={content:null,title:null};if(this._getCapResponseWMSLayers=[],this.contentService=e,this._importPanel.style.display="none",this._getCapPanel.style.display="block","WMS"===this._currentImportType){t=new qr.a;var i=this._getCapResponseWMS=t.read(e);if(Ci.log("getCapabilities response : ",i),i&&i.Capability&&i.Capability.Layer){var s=i.Capability.Layer;if(Array.isArray(s))for(var l=0;l<s.length;l++)this._displayGetCapResponseWMSLayer(s[l]);else this._displayGetCapResponseWMSLayer(s)}}else if("WMTS"===this._currentImportType){t=new Hr.a;var c=this._getCapResponseWMTS=t.read(e);if(Ci.log("getCapabilities response : ",c),c&&c.Contents&&c.Contents.Layer&&(o=c.Contents.Layer,Array.isArray(o))){this._getCapResponseWMTSLayers=o;for(var u=0;u<o.length;u++)if((n=this._getWMTSLayerProjection(o[u],c))&&"string"==typeof n){if(!Object(a.t)(n)&&!Object(a.t)(n.toUpperCase())){Ci.warn("[ol.control.LayerImport] wmts layer cannot be added to map : unknown projection",o[u]);continue}r={content:o[u].Title,title:o[u].Abstract||o[u].Title},this._getCapResultsListContainer&&this._addImportGetCapResultLayer(r,u,this._getCapResultsListContainer)}}}},t.prototype._displayGetCapResponseWMSLayer=function(e,t){if(e){Ci.log("[ol.control.LayerImport] _displayGetCapResponseWMSLayer - layerObj : ",e);var o,n=this._getMapProjectionCode(),r={content:null,title:null};if(t){var i,s,a=["CRS","Style"];for(s=0;s<a.length;s++)if(i=a[s],Array.isArray(t[i])&&0!==t[i].length)if(Array.isArray(e[i])&&0!==e[i].length)for(var l=0;l<t[i].length;l++)-1===e[i].indexOf(t[i][l])&&e[i].push(t[i][l]);else e[i]=t[i];var c=["BoundingBox","EX_GeographicBoundingBox","MaxScaleDenominator","MinScaleDenominator","Attribution","Dimension","queryable","cascaded","opaque","noSubsets","fixedWidth","fixedHeight"];for(s=0;s<c.length;s++)t[i=c[s]]&&!e[i]&&(e[i]=t[i])}else e._isRootLayer=!0,e._container=this._getCapResultsListContainer,e.Title||(e.Title="Liste des couches");if(e.Layer){if(Array.isArray(e.Layer)){var u=e?e._container:t._container,d=e?e.Title:t.Title;e._container=this._addImportGetCapResultListRubrique(d,u).lastChild;for(var h=0;h<e.Layer.length;h++){for(var p=!1,f=e._container.getElementsByClassName("GPimportGetCapRubriqueTitle"),m=0;m<f.length;m++)f[m].title===e.Title&&(p=!0,e.Layer[h]._container=f[m].parentElement);p||(e.Layer[h]._container=this._addImportGetCapResultRubrique(e.Title,e._container).lastChild),this._displayGetCapResponseWMSLayer(e.Layer[h],e)}}}else{var g=this._getCapResponseWMSLayers.length;if(o=this._getWMSLayerProjection(e,n)){e._projection=o,r={content:e.Title,title:e.Abstract||e.Title};var y=e._container;"ul"===y.localName&&(y=y.lastChild),this._addImportGetCapResultLayer(r,g,y),this._getCapResponseWMSLayers[g]=e}else Ci.warn("[ol.control.LayerImport] wms layer cannot be added to map : unknown projection",e)}}else Ci.warn("[ol.control.LayerImport] _displayGetCapResponseWMSLayer : getCapabilities layer object not found")},t.prototype._onGetCapResponseLayerClick=function(e){if(e.target&&e.target.id){var t,o=parseInt(e.target.id.substr(23),10);if(isNaN(o))return;"WMS"===this._currentImportType?(t=this._getCapResponseWMSLayers[o],this._addGetCapWMSLayer(t)):"WMTS"===this._currentImportType&&(t=this._getCapResponseWMTSLayers[o],this._addGetCapWMTSLayer(t))}},t.prototype._addGetCapWMSLayer=function(e){var t=this.getMap();if(t)if(e){var o=this._getMapProjectionCode(),n={},r=this._getWMSLayerGetMapUrl();if(r)n.url=r;else{var i=this._getCapRequestUrl.indexOf("?");n.url=-1!==i?this._getCapRequestUrl.substring(0,i):this._getCapRequestUrl}if(n.params={},e.Name){n.params.LAYERS=e.Name,n.params.SERVICE="WMS",this._getCapResponseWMS.version&&(n.params.VERSION=this._getCapResponseWMS.version);var s=e._projection;if(s){var a;if(s!==o&&(n.projection=s),e.Style&&Array.isArray(e.Style)){var l=e.Style[0];n.params.STYLES=l.Name,l.LegendURL&&Array.isArray(l.LegendURL)&&0!==l.LegendURL.length&&(a=l.LegendURL[0].OnlineResource)}var c=new h.a(n);this._getWMSLayerInfoForLayerSwitcher(e,a,c);var u={};u.source=c,this._getWMSLayerMinMaxResolution(e,o,u),this._getWMSLayerExtent(e,o,u);var d=new ln.a(u);d.gpResultLayerId="layerimport:WMS",e.queryable&&(d.gpGFIparams={queryable:!0},this._getCapResponseWMS&&this._getCapResponseWMS.Capability&&this._getCapResponseWMS.Capability.Request&&this._getCapResponseWMS.Capability.Request.GetFeatureInfo&&this._getCapResponseWMS.Capability.Request.GetFeatureInfo.Format&&Array.isArray(this._getCapResponseWMS.Capability.Request.GetFeatureInfo.Format)&&(d.gpGFIparams.formats=this._getCapResponseWMS.Capability.Request.GetFeatureInfo.Format)),t.addLayer(d)}else Ci.warn("[ol.control.LayerImport] wms layer cannot be added to map : unknown projection")}else Ci.warn("[ol.control.LayerImport] unable to add wms layer : mandatory layer 'name' parameter cannot be found",e)}else Ci.warn("[ol.control.LayerImport] _addGetCapWMSLayer error : layerInfo is not defined");else Ci.warn("[ol.control.LayerImport] _addGetCapWMSLayer error : map is not defined")},t.prototype._getWMSLayerGetMapUrl=function(){var e;if(this._getCapResponseWMS&&this._getCapResponseWMS.Capability&&this._getCapResponseWMS.Capability.Request&&this._getCapResponseWMS.Capability.Request.GetMap){var t=this._getCapResponseWMS.Capability.Request.GetMap;if(t.DCPType&&Array.isArray(t.DCPType)&&0!==t.DCPType.length){var o=t.DCPType[0];o&&o.HTTP&&o.HTTP.Get&&(e=o.HTTP.Get.OnlineResource)}}return e},t.prototype._getWMSLayerProjection=function(e,t){var o;if(e&&"object"===xi(e)){var n=e.CRS;if(Array.isArray(n))for(var r=0;r<n.length;r++){var i=n[r];if(i===t){o=i;break}if(i&&"string"==typeof i&&(Object(a.t)(i)||Object(a.t)(i.toUpperCase()))){o=i;break}}return o}Ci.warn("missing layer information (from getCapabilities)")},t.prototype._getWMSLayerMinMaxResolution=function(e,t,o){var n=Object(a.t)(t).getUnits();if("m"===n)e.MinScaleDenominator&&(o.minResolution=28e-5*e.MinScaleDenominator),e.MaxScaleDenominator&&(o.maxResolution=28e-5*e.MaxScaleDenominator);else if("degrees"===n){var r=28e-5*180/(6378137*Math.PI);e.MinScaleDenominator&&(o.minResolution=e.MinScaleDenominator*r),e.MaxScaleDenominator&&(o.maxResolution=e.MaxScaleDenominator*r)}},t.prototype._getWMSLayerExtent=function(e,t,o){if(e){var n=e.EX_GeographicBoundingBox,r=e.BoundingBox;if(n&&Array.isArray(n))o.extent="EPSG:4326"===t?n:Object(a.F)(n,"EPSG:4326",t);else if(r&&Array.isArray(r))for(var i,s,l=0;l<r.length;l++)if(i=r[l].crs,s=r[l].extent,i){if(i===t){o.extent=s;break}if("string"==typeof i){var c=Object(a.t)(i)?Object(a.t)(i):Object(a.t)(i.toUpperCase());if(c){if("degrees"===c.getUnits()&&0===i.toUpperCase().indexOf("EPSG")){var u=[s[1],s[0],s[3],s[2]];o.extent=Object(a.F)(u,c,t)}else o.extent=Object(a.F)(s,c,t);break}}}}else Ci.warn("[ol.control.LayerImport] _getWMSLayerExtent error : layerInfo is not defined")},t.prototype._getWMSLayerInfoForLayerSwitcher=function(e,t,o){if(e.Title?(o._title=e.Title,o._description=e.Abstract?e.Abstract:e.Title):(o._title=e.Name,o._description=e.Abstract?e.Abstract:e.Name),t&&(o._legends=[{url:t}]),e.MetadataURL&&Array.isArray(e.MetadataURL)){o._metadata=[];for(var n=0;n<e.MetadataURL.length;n++){var r=e.MetadataURL[n].OnlineResource;r&&o._metadata.push({url:r})}}if(e.Attribution){var i=e.Attribution;o._originators={},i.OnlineResource&&(o._originators.url=i.OnlineResource),i.Title&&(o._originators.name=o._originators.attribution=i.Title),i.LogoURL&&i.LogoURL.OnlineResource&&(o._originators.logo=i.LogoURL.OnlineResource)}},t.prototype._addGetCapWMTSLayer=function(e){if(e&&e.Identifier){var t=this.getMap();if(t){var o={};o.layer=e.Identifier,this._getCapResponseWMTS.version&&(o.version=this._getCapResponseWMTS.version);var n=this._getWMTSLayerGetTileUrl();if(n)o.url=n;else{var r=this._getCapRequestUrl.indexOf("?");o.url=-1!==r?this._getCapRequestUrl.substring(0,r):this._getCapRequestUrl}var i,s,a,l=this._getTMSParams(e);if(o.matrixSet=l.tms,o.projection=l.projCode,o.tileGrid=new Qo.b({resolutions:l.resolutions,matrixIds:l.matrixIds,origin:l.origin}),e.Style&&Array.isArray(e.Style))for(var c,u=0;u<e.Style.length&&(i=(c=e.Style[u]).Identifier,!c.isDefault);u++)c.LegendURL&&Array.isArray(c.LegendURL)&&0!==c.LegendURL.length&&(s=c.LegendURL[0].href);null==i&&Ci.warn("[ol.control.LayerImport] style information not found in getCapabilities response for layer "+e.Identifier),o.style=i,e.Format&&Array.isArray(e.Format)&&(a=e.Format[0]),null==a&&Ci.warn("[ol.control.LayerImport] format information not found in getCapabilities response for layer "+e.Identifier),o.format=a;var d=new p.a(o);e.Title?(d._title=e.Title,d._description=e.Abstract?e.Abstract:e.Title):(d._title=e.Identifier,d._description=e.Abstract?e.Abstract:e.Identifier),s&&(d._legends=[{url:s}]);var h,f={};f.source=d,f.extent=this._getWMTSLayerExtent(e);try{h=new ln.a(f)}catch(e){return void Ci.warn("[ol.control.LayerImport] an error occured while trying to create ol.layer.Tile from getCapabilities information. error : ",e)}h.gpResultLayerId="layerimport:WMTS",t.addLayer(h)}}else Ci.warn("[ol.control.LayerImport] layer information not found in getCapabilities response for layer ")},t.prototype._getWMTSLayerGetTileUrl=function(){var e;if(this._getCapResponseWMTS&&this._getCapResponseWMTS.OperationsMetadata&&this._getCapResponseWMTS.OperationsMetadata.GetTile){var t=this._getCapResponseWMTS.OperationsMetadata.GetTile;t.DCP&&t.DCP.HTTP&&t.DCP.HTTP.Get&&Array.isArray(t.DCP.HTTP.Get)&&0!==t.DCP.HTTP.Get.length&&(e=t.DCP.HTTP.Get[0].href)}return e},t.prototype._getWMTSLayerProjection=function(e,t){var o;if(e&&"object"===xi(e)){if(t&&"object"===xi(t)){if(e.TileMatrixSetLink&&Array.isArray(e.TileMatrixSetLink)){var n,r=e.TileMatrixSetLink[0].TileMatrixSet;if(t.Contents&&Array.isArray(t.Contents.TileMatrixSet))for(var i=t.Contents.TileMatrixSet,s=0;s<i.length;s++)if(i[s].Identifier===r&&i[s].TileMatrix){(n=i[s].SupportedCRS)&&"string"==typeof n&&(Object(a.t)(n)||Object(a.t)(n.toUpperCase()))&&(o=n);break}}return o}Ci.warn("missing getCapabilities response")}else Ci.warn("missing layer information (from getCapabilities)")},t.prototype._getTMSParams=function(e){var t,o,n,r={},i=[],s=[],l=[];if(this.getMap()&&e.TileMatrixSetLink&&Array.isArray(e.TileMatrixSetLink)){if(t=e.TileMatrixSetLink[0].TileMatrixSet,this._getCapResponseWMTS.Contents&&Array.isArray(this._getCapResponseWMTS.Contents.TileMatrixSet)){for(var c=this._getCapResponseWMTS.Contents.TileMatrixSet,u=0;u<c.length;u++)if(c[u].Identifier===t&&c[u].TileMatrix){var d,h,p,f,m,g=c[u];if(g.SupportedCRS&&(o=g.SupportedCRS,n=Object(a.t)(o)),n&&n.getUnits&&(m=n.getUnits()),Array.isArray(g.TileMatrix))for(var y=0;y<g.TileMatrix.length;y++)null!=(d=g.TileMatrix[y]).Identifier&&(h=parseInt(d.Identifier,10),i.push(h)),p=d.ScaleDenominator,f="degrees"===m?28e-5*p*180/(6378137*Math.PI):28e-5*p,s.push(f),l=d.TopLeftCorner;void 0!==s.sort&&s.sort((function(e,t){return t-e})),void 0!==i.sort&&i.sort((function(e,t){return e-t}))}}else Ci.warn("[ol.control.LayerImport] TileMatrixSet data not found in getCapabilities response for layer "+e.Identifier);return r.tms=t,r.projCode=o,r.matrixIds=i,r.resolutions=s,r.origin=l,r}},t.prototype._getWMTSLayerExtent=function(e){var t,o=this._getMapProjectionCode();return e.WGS84BoundingBox&&Array.isArray(e.WGS84BoundingBox)&&(t=Object(a.F)(e.WGS84BoundingBox,"EPSG:4326",o)),t},t.prototype._getMapProjectionCode=function(){var e=this.getMap();if(e&&e.getView&&e.getView().getProjection)return e.getView().getProjection().getCode();Ci.warn("unable to get layerimport's map")},t.prototype._displayWaitingContainer=function(){this._waitingContainer.className="GPimportWaitingContainerVisible",this._waiting=!0,this._timer&&(clearTimeout(this._timer),this._timer=null);var e=this;this._timer=setTimeout((function(){!0===e._waiting?e._hideWaitingContainer():e._timer&&clearTimeout(e._timer)}),16e3)},t.prototype._hideWaitingContainer=function(){this._waiting&&(this._waitingContainer.className="GPimportWaitingContainerHidden",this._waiting=!1,clearTimeout(this._timer),this._timer=null)},t.prototype.cleanGetCapResultsList=function(){if(this._getCapRequestUrl=null,this._getCapResponseWMS=null,this._getCapResponseWMTS=null,this._getCapResponseWMSLayers=null,this._getCapResponseWMTSLayers=null,this._getCapResultsListContainer)for(;this._getCapResultsListContainer.firstChild;)this._getCapResultsListContainer.removeChild(this._getCapResultsListContainer.firstChild)},t.prototype.cleanMapBoxResultsList=function(){if(this.editor=null,this._mapBoxObj=null,this._mapBoxResultsListContainer)for(;this._mapBoxResultsListContainer.firstChild;)this._mapBoxResultsListContainer.removeChild(this._mapBoxResultsListContainer.firstChild)},t}(mn.a),Pi=ji;window.ol&&window.ol.control&&(window.ol.control.LayerImport=ji);var Ti=o("./node_modules/ol/control/Attribution.js"),Ai=Mo.a.getLogger("geoportalattribution"),Mi=function(e){function t(o){if(o=o||{},!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");o.collapsible=!0,e.call(this,o)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype,{}),t.prototype.constructor=t,t.prototype.setMap=function(o){var n=this;if(null!=o){var r=o.getControls();r.forEach((function(e){if(!(e instanceof t)&&e)for(var o=e.element.classList,n=0;n<o.length;n++)if("ol-attribution"===o[n]){r.remove(e);break}})),this._updateAttributions(o),o.on("moveend",(function(){n._updateAttributions(o)})),o.getLayers().on("add",(function(){n._updateAttributions(o)})),o.getLayers().on("remove",(function(){n._updateAttributions(o)}))}e.prototype.setMap.call(this,o)},t.prototype._updateAttributions=function(e){for(var t=this,o={},n=e.getView(),r=n.calculateExtent(e.getSize()),i=n.getProjection().getCode(),s=Object(a.F)(r,i,"EPSG:4326"),l=[s[3],s[0],s[1],s[2]],c=n.getZoom(),u=e.getLayers().getArray(),d=0;d<u.length;d++)if(u[d].getSource)this._updateLayerAttributions(u[d],o,l,i,c);else if(u[d].getLayers){u[d].getLayers().forEach((function(e){e.getSource?t._updateLayerAttributions(e,o,l,i,c):Ai.log("cannot find layer source in layergroup ",u[d])}))}},t.prototype._updateLayerAttributions=function(e,t,o,n,r){if(e){var i=e.getSource();if(i){t||(t={});var s=[],a=e.getVisible(),l=i._originators;if(void 0!==l&&i.setAttributions(),l&&a){for(var c=en.getAttributions({extent:o,crs:n,zoom:r,visibility:a,originators:l}),u=0;u<c.length;u++){var d=c[u];t.hasOwnProperty(d)||(s.push(d),t[d]=!0)}0!==s.length&&(i.setAttributions(s),this.dispatchEvent({type:"attributions:update",attributions:s}))}}else Ai.trace("source is not yet loaded !")}else Ai.trace("layer is null !?")},t}(Ti.a),Ii=Mi;window.ol&&window.ol.control&&(window.ol.control.GeoportalAttribution=Mi);var Ri=o("./node_modules/ol/style/Image.js"),Li={_toolboxId:"GPtoolbox-measure-main",_buttonId:"GPtoolbox-measure-button",_widgetId:"GPtoolbox-measure-widget",getToolBoxID:function(e){return e?this._toolboxId+"-"+e:this._toolboxId},getButtonID:function(e){return e?this._buttonId+"-"+e:this._buttonId},getWidgetID:function(e){return e?this._widgetId+"-"+e:this._widgetId},_createToolBoxContainerElement:function(e){var t=document.createElement("div");t.id=this.getToolBoxID(e),t.className="GPshowAdvancedToolPicto";var o=document.createElement("button");o.id=this.getButtonID(e);var n=this;o.addEventListener("click",(function(){this.blur();var t=document.getElementById(n.getWidgetID(e));"block"===t.style.display?t.style.display="none":t.style.display="block"})),t.appendChild(o);var r=document.createElement("div");return r.id=this.getWidgetID(e),r.addEventListener("click",(function(){}),!1),t.appendChild(r),t}},ki=Mo.a.getLogger("toolbox"),Gi={_toolbox:{},add:function(e,t){if(ki.trace("ToolBox.add()",t),e){var o="undefined"!=typeof window?window:"undefined"!=typeof self?self:null;o&&(this._toolbox=o.gpShareMeasureToolBox||{});var n=e.getTargetElement(),r=n.ownerDocument,i=n.id;this._toolbox&&0!==Object.keys(this._toolbox).length?this._toolbox[i]||(this._toolbox[i]=yn.generate()):(this._toolbox={},this._toolbox[i]=yn.generate());var s=this._toolbox[i];if(!r.getElementById(this.getToolBoxID(s))){ki.trace("create toolbox !");var a=this._createToolBoxContainerElement(s);a.style.pointerEvents="auto",n.getElementsByClassName("ol-overlaycontainer-stopevent")[0].appendChild(a)}var l=r.getElementById(this.getWidgetID(s));t.setTarget(l),o&&(o.gpShareMeasureToolBox=this._toolbox),ki.trace("add control to toolbox !")}else ki.trace("map doesn't exist !?")}};Wo.assign(Gi,Li);var Ni=Gi,Di=Mo.a.getLogger("measures"),Fi={DEFAULT_POINTER_STYLE:new ar.a({radius:5,stroke:new zo.a({color:"#002A50",width:2}),fill:new Bo.a({color:"rgba(255, 155, 0, 0.7)"})}),DEFAULT_DRAW_START_STYLE:new Do.c({fill:new Bo.a({color:"rgba(0, 183, 152, 0.2)"}),stroke:new zo.a({color:"#002A50",lineDash:[10,10],width:2})}),DEFAULT_DRAW_FINISH_STYLE:new Do.c({fill:new Bo.a({color:"rgba(0, 183, 152, 0.3)"}),stroke:new zo.a({color:"#002A50",width:3})}),tools:{MeasureLength:[],MeasureArea:[],MeasureAzimuth:[]},measureDraw:null,measureSource:null,measureVector:null,sketch:null,measureTooltipElement:null,measureTooltip:null,helpTooltipElement:null,helpTooltip:null,clean:function(){var e=this.CLASSNAME;Di.trace("["+e+"] deactived tool !"),this.clearMeasure(),this.clearMeasureToolTip(),this.removeMeasureEvents(),this._showContainer.checked=!1},onPointerMoveHandler:function(e){if(!e.dragging){var t=e.coordinate;if(this.sketch){var o,n=this.sketch.getGeometry();if(o=this.format(n),"LineString"===n.getType())t=n.getLastCoordinate();else{if("Polygon"!==n.getType())return;t=n.getInteriorPoint().getCoordinates()}this.measureTooltipElement.innerHTML=o,this.measureTooltip.setPosition(t)}}},onShowMeasureClick:function(e,t){var o=this.getMap(),n=o.getTargetElement().id,r="undefined"!=typeof window?window:"undefined"!=typeof self?self:null;r&&(this.tools=r.gpShareMeasures||{});var i=this.CLASSNAME;for(var s in this.tools)if(this.tools.hasOwnProperty(s))for(var a=this.tools[s],l=0;l<a.length;l++){var c=a[l];c&&c.active&&s!==i&&c.map===n&&(c.active=!1,null!==c.instance&&c.instance.clean())}if(In.unset(o,{current:"Measures"}),this._showContainer.checked){this.clearMeasure(),this.clearMeasureToolTip(),this.removeMeasureEvents();for(var u=0;u<this.tools[i].length;u++)this.tools[i][u].map===n&&(this.tools[i][u].active=!1)}else{this.addMeasureEvents(),this.initMeasureInteraction(),this.addMeasureInteraction(t);for(var d=0;d<this.tools[i].length;d++)this.tools[i][d].map===n&&(this.tools[i][d].active=!0)}},clearMeasureToolTip:function(){var e=this.getMap();if(e)for(var t=e.getTargetElement().getElementsByClassName("ol-overlaycontainer-stopevent"),o=0;o<t.length;o++){for(var n=t[o],r=n.children.length,i=[],s=0;s<r;s++){var a=n.children[s];if(0!==a.children.length){var l=a.children[0];"GPmeasureTooltip GPmeasureTooltip-static"!==l.className&&"GPmeasureTooltip GPmeasureTooltip-measure"!==l.className||i.push(a)}}for(var c=0;c<i.length;c++)n.removeChild(i[c])}},clearMeasure:function(){var e=this.getMap();this.measureVector&&(e.removeLayer(this.measureVector),this.measureVector=null),this.measureDraw&&(e.removeInteraction(this.measureDraw),this.measureDraw=null)},createMeasureTooltip:function(e){this.measureTooltipElement&&this.measureTooltipElement.parentNode.removeChild(this.measureTooltipElement),this.measureTooltipElement=document.createElement("div"),this.measureTooltipElement.className="GPmeasureTooltip GPmeasureTooltip-measure",this.measureTooltip=new c.a({element:this.measureTooltipElement,offset:[0,-15],positioning:"bottom-center"}),e.addOverlay(this.measureTooltip)},createHelpTooltip:function(e){this.helpTooltipElement&&this.helpTooltipElement.parentNode.removeChild(this.helpTooltipElement),this.helpTooltipElement=document.createElement("div"),this.helpTooltipElement.className="tooltip hidden",this.helpTooltip=new c.a({element:this.helpTooltipElement,offset:[15,0],positioning:"center-left"}),e.addOverlay(this.helpTooltip)},createStylingMeasureInteraction:function(e){this.options.styles=e||{},Di.trace("style start",this.options.styles.start);var t={image:Fi.DEFAULT_POINTER_STYLE,fill:Fi.DEFAULT_DRAW_START_STYLE.getFill(),stroke:Fi.DEFAULT_DRAW_START_STYLE.getStroke()};this.options.styles.hasOwnProperty("pointer")&&this.options.styles.pointer instanceof Image&&(t.image=this.options.styles.pointer),this.options.styles.hasOwnProperty("start")&&this.options.styles.start instanceof Do.c&&(null!=this.options.styles.start.getFill()&&(t.fill=this.options.styles.start.getFill()),null!=this.options.styles.start.getStroke()&&(t.stroke=this.options.styles.start.getStroke())),this.options.styles.start=new Do.c(t),Di.trace("style finish",this.options.styles.finish);var o={fill:Fi.DEFAULT_DRAW_FINISH_STYLE.getFill(),stroke:Fi.DEFAULT_DRAW_FINISH_STYLE.getStroke()};this.options.styles.hasOwnProperty("finish")&&this.options.styles.finish instanceof Do.c&&(null!=this.options.styles.finish.getFill()&&(o.fill=this.options.styles.finish.getFill()),null!=this.options.styles.finish.getStroke()&&(o.stroke=this.options.styles.finish.getStroke())),this.options.styles.finish=new Do.c(o)},addMeasureInteraction:function(e){var t=this.getMap(),o=this;this.measureDraw=new y.d({source:this.measureSource,condition:function(e){return!e.originalEvent.ctrlKey||(o.sketch&&this.removeLastPoint(),!1)},type:e,style:this.options.styles.start||Fi.DEFAULT_DRAW_START_STYLE}),this.measureDraw.setProperties({name:"Measures",source:this}),t.addInteraction(this.measureDraw),this.createMeasureTooltip(t),this.measureDraw.on("drawstart",(function(e){o.sketch=e.feature})),this.measureDraw.on("drawend",(function(){if(o.sketch){var e,n,r=o.sketch.getGeometry();if(e=o.format(r),"LineString"===r.getType())n=r.getLastCoordinate();else{if("Polygon"!==r.getType())return;n=r.getInteriorPoint().getCoordinates()}o.measureTooltipElement.innerHTML=e,o.measureTooltip.setPosition(n)}o.measureTooltipElement.className="GPmeasureTooltip GPmeasureTooltip-static",o.measureTooltip.setOffset([0,-7]),o.sketch=null,o.measureTooltipElement=null,o.createMeasureTooltip(t)}))},initMeasureInteraction:function(){var e=this,t=this.getMap();this.measureSource=new d.b,this.measureVector=new sr.a({source:this.measureSource,style:this.options.styles.finish||Fi.DEFAULT_DRAW_FINISH_STYLE}),this.measureVector.gpResultLayerId="measure",t.addLayer(this.measureVector),t.getControls().forEach((function(t){if(t instanceof Sn){var o=e.measureVector.gpLayerId;t._layers[o].title===o&&t.addLayer(e.measureVector,{title:e.options.layerDescription.title,description:e.options.layerDescription.description})}}))}},Ui=Fi,Bi={_addUID:function(e){return this._uid?e+"-"+this._uid:e},_createMainContainerElement:function(){var e=document.createElement("div");return e.id=this._addUID("GPelevationPath"),e.className="GPwidget",e},_createShowElevationPathElement:function(){var e=document.createElement("input");return e.id=this._addUID("GPshowElevationPath"),e.type="checkbox",e},_createShowElevationPathPictoElement:function(){var e=this,t=document.createElement("label");t.id=this._addUID("GPshowElevationPathPicto"),t.className="GPshowAdvancedToolPicto",t.htmlFor=this._addUID("GPshowElevationPath"),t.title="Calculer un profil",t.addEventListener?t.addEventListener("click",(function(t){e.onShowElevationPathClick(t)})):t.attachEvent&&t.attachEvent("onclick",(function(t){e.onShowElevationPathClick(t)}));var o=document.createElement("span");return o.id=this._addUID("GPshowElevationPathOpen"),o.className="GPshowAdvancedToolOpen",t.appendChild(o),t},_createElevationPathPanelElement:function(){var e=document.createElement("div");return e.id=this._addUID("GPelevationPathPanel"),e.className="GPpanel",e},_createElevationPathPanelHeaderElement:function(){var e=this,t=document.createElement("div");t.className="GPpanelHeader";var o=document.createElement("div");o.id=this._addUID("GPelevationPathPanelInfo"),o.className="GPpanelInfo",o.title="Informations",o.addEventListener?o.addEventListener("click",(function(){e.onOpenElevationPathInfoClick()})):o.attachEvent&&o.attachEvent("onclick",(function(){e.onOpenElevationPathInfoClick()})),t.appendChild(o);var n=document.createElement("div");n.className="GPpanelTitle",n.innerHTML="Profil AltimÃ©trique",t.appendChild(n);var r=document.createElement("div");r.id=this._addUID("GPelevationPathPanelReduce"),r.className="GPpanelReduce",r.title="Masquer le panneau",r.addEventListener?r.addEventListener("click",(function(){"function"==typeof e.onReduceElevationPathPanelClick&&(document.getElementById(e._addUID("GPshowElevationPath")).checked=!1,e.onReduceElevationPathPanelClick())}),!1):r.attachEvent&&r.attachEvent("onclick",(function(){"function"==typeof e.onReduceElevationPathPanelClick&&(document.getElementById(e._addUID("GPshowElevationPath")).checked=!1,e.onReduceElevationPathPanelClick())})),t.appendChild(r);var i=document.createElement("div");return i.id=this._addUID("GPelevationPathPanelClose"),i.className="GPpanelClose",i.title="Fermer le panneau",i.addEventListener?i.addEventListener("click",(function(){document.getElementById(e._addUID("GPshowElevationPathPicto")).click()}),!1):i.attachEvent&&i.attachEvent("onclick",(function(){document.getElementById(e._addUID("GPshowElevationPathPicto")).click()})),t.appendChild(i),t},_createElevationPathPanelProfilElement:function(){var e=document.createElement("div");return e.id="GPelevationPathProfil",e},_createElevationPathWaitingElement:function(){var e=document.createElement("div");e.id=this._addUID("GPelevationPathCalcWaitingContainer"),e.className="GPelevationPathCalcWaitingContainerHidden";var t=document.createElement("p");return t.className="GPelevationPathCalcWaiting",t.innerHTML="Calcul en cours...",e.appendChild(t),e},_createElevationPathInformationsElement:function(){var e=document.createElement("div");e.id=this._addUID("GPelevationPathInformationsContainer"),e.className="GPelevationPathInformationsContainerHidden";var t=document.createElement("p");return t.className="GPelevationPathInformations",t.innerHTML="Aucune information...",e.appendChild(t),e},_addElevationPathInformationsItem:function(e){var t=document.getElementById(this._addUID("GPelevationPathInformationsContainer"));if(t){var o=document.createElement("p");o.className="GPelevationPathInformations",o.innerHTML=e,t.appendChild(o)}return t}},zi={_getCssProperty:function(e,t){return window.getComputedStyle(e,null).getPropertyValue(t)},_getTextWidth:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=this.canvas||(this.canvas=document.createElement("canvas")),r=n.getContext("2d");r.font=null===o?"".concat(this._getCssProperty(t,"font-weight")," ").concat(this._getCssProperty(t,"font-size")," ").concat(this._getCssProperty(t,"font-family")):o;var i=r.measureText(e);return i.width},_dataZToSvgY:function(e,t,o,n){return t-(e-o)*n-.5},_dataDistToSvgX:function(e,t,o,n){return t-o+e*n},_svgXToDataDist:function(e,t,o,n){return(e+o-t)/n},_arrayBisect:function(e,t){var o;if(0===e.length)return 0;for(o=0;o<e.length;o++)if(t<e[o].dist)return o;return o-1},displayProfileByDefault:function(e,t,o,n){var r=o;if(t&&e){for(;t.firstChild;)t.removeChild(t.firstChild);var i=25,s=15,a=10,l=10,c=r.options.displayProfileOptions,u=e.points,d=JSON.parse(JSON.stringify(u));d.sort((function(e,t){return e.z-t.z}));var h=d[0].z,p=d[d.length-1].z,f=e.distance,m="m",g=document.createElement("div");g.id="profileElevationByDefault",t.appendChild(g);var y=t.clientHeight-i-a,v=t.clientWidth-l-s,_=this._getTextWidth(Math.round(p).toLocaleString()+",88",t,"400 10 Verdana"),b=this._getTextWidth(Math.round(f).toLocaleString()+",5",t),w=y-17-15,E=v-17-_,O=document.createElementNS("http://www.w3.org/2000/svg","svg");O.id="profileElevationByDefaultSvg",O.setAttribute("style","display: block; margin: auto; overflow: visible; position: absolute; left: 10px;"),O.setAttribute("viewBox","0 0 ".concat(t.clientWidth," ").concat(t.clientHeight)),O.setAttribute("width","100%"),O.setAttribute("height","100%");var S,x=Math.floor(w/15);S=p===h?.1:Math.pow(10,Math.ceil(Math.log((p-h)/x)/Math.log(10)))/2;var C=Math.floor(h/S)*S,j=Math.ceil(p/S)*S;j===p&&(j+=S),C=Math.round(100*C)/100,j=Math.round(100*j)/100;var P=Math.round((j-C)/S);P+1>x&&(S=Math.pow(10,Math.ceil(Math.log((p-h)/x)/Math.log(10))),C=Math.floor(h/S)*S,(j=Math.ceil(p/S)*S)===p&&(j+=S),C=Math.round(100*C)/100,j=Math.round(100*j)/100,P=Math.floor((j-C)/S)),P=Math.max(Math.round(P),1);var T=document.createElementNS("http://www.w3.org/2000/svg","g");T.setAttribute("class","profile-z-vertical");var A,M,I,R,L,k,G=document.createElementNS("http://www.w3.org/2000/svg","g"),N=w/P,D=w/(j-C);D=p===h?w/.2:w/(j-C);for(var F=0;F<=P;F++)(A=document.createElementNS("http://www.w3.org/2000/svg","text")).setAttribute("class","profile-z-graduation"),A.setAttribute("font-family","Verdana"),A.setAttribute("font-size","10px"),A.setAttribute("fill","#5E5E5E"),A.textContent=(Math.round(100*(C+F*S))/100).toLocaleString(),M=w-F*N,A.setAttribute("transform","translate(".concat(17+_-8,", ").concat(M+5,")")),A.setAttribute("text-anchor","end"),T.appendChild(A),I=Math.round(M)-.5,R=document.createElementNS("http://www.w3.org/2000/svg","g"),(L=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("cs","100,100"),L.setAttribute("stroke-width","1"),0!==F?L.setAttribute("stroke-opacity","0.2"):L.setAttribute("stroke-opacity","1"),L.setAttribute("stroke","#000000"),L.setAttribute("fill","none"),L.setAttribute("d","M".concat(17+_,",").concat(I," L").concat(E+17+_,",").concat(I)),(k=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("cs","100,100"),k.setAttribute("stroke-width","1"),k.setAttribute("stroke-opacity","1"),k.setAttribute("stroke","#000000"),k.setAttribute("fill","none"),k.setAttribute("d","M".concat(17+_,",").concat(I," L").concat(17+_+5,",").concat(I)),k.setAttribute("transform","translate(-5, 0)"),R.appendChild(k),R.appendChild(L),G.appendChild(R);var U=document.createElementNS("http://www.w3.org/2000/svg","text");U.setAttribute("class","profile-z-legend"),U.setAttribute("font-family","Verdana"),U.setAttribute("font-size","11px"),U.setAttribute("fill","#5E5E5E"),U.textContent="Altitude (m)",U.setAttribute("transform","translate(".concat(9,", ").concat(Math.round(w/2),") rotate(-90)")),U.setAttribute("text-anchor","middle"),T.appendChild(U),O.appendChild(T),O.appendChild(G),f>2e3&&(f/=1e3,m="km");var B=Math.floor(E/b),z=Math.pow(10,Math.ceil(Math.log(f/B)/Math.log(10)))/2,V=f,W=Math.floor(V/z);W>B?(z=Math.pow(10,Math.ceil(Math.log(f/B)/Math.log(10))),W=Math.floor(V/z)):W<1&&(z=Math.pow(10,Math.ceil(Math.log(f/B)/Math.log(10))-1),W=Math.floor(V/z));var q=z*(W=Math.max(W,1)),H=document.createElementNS("http://www.w3.org/2000/svg","g");H.setAttribute("class","profile-x-vertical");for(var Y,X,Z,K,J,Q,$=document.createElementNS("http://www.w3.org/2000/svg","g"),ee=E/V,te=(V-q)*ee,oe=Math.round((E-te)/W),ne=0;ne<=W+1;ne++)(Y=document.createElementNS("http://www.w3.org/2000/svg","text")).setAttribute("class","profile-x-graduation"),Y.setAttribute("font-family","Verdana"),Y.setAttribute("font-size","10px"),Y.setAttribute("fill","#5E5E5E"),ne!==W+1&&(Y.textContent=(Math.round(100*ne*z)/100).toLocaleString()),X=17+_+ne*oe,ne===W+1&&(X=17+_+E),Y.setAttribute("transform","translate(".concat(X,", ").concat(w+15+5,")")),Y.setAttribute("text-anchor","middle"),H.appendChild(Y),Z=X-.5,K=document.createElementNS("http://www.w3.org/2000/svg","g"),(J=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("cs","100,100"),J.setAttribute("stroke-width","1"),0!==ne?J.setAttribute("stroke-opacity","0.2"):J.setAttribute("stroke-opacity","1"),J.setAttribute("stroke","#000000"),J.setAttribute("fill","none"),J.setAttribute("d","M".concat(Z,",").concat(w," L").concat(Z,",0")),(Q=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("cs","100,100"),Q.setAttribute("stroke-width","1"),Q.setAttribute("stroke-opacity","1"),Q.setAttribute("stroke","#000000"),Q.setAttribute("fill","none"),Q.setAttribute("d","M".concat(Z,",").concat(w," L").concat(Z,",").concat(w-5)),Q.setAttribute("transform","translate(0, 5)"),K.appendChild(Q),K.appendChild(J),$.appendChild(K);var re=document.createElementNS("http://www.w3.org/2000/svg","text");re.setAttribute("class","profile-x-legend"),re.setAttribute("font-family","Verdana"),re.setAttribute("font-size","11px"),re.setAttribute("fill","#5E5E5E"),re.textContent="Distance (".concat(m,")"),re.setAttribute("transform","translate(".concat(17+_+E/2,", ").concat(w+15+17+3,")")),re.setAttribute("text-anchor","middle"),H.appendChild(re),O.appendChild(H),O.appendChild($);var ie=document.createElementNS("http://www.w3.org/2000/svg","g"),se=1;"km"===m&&(se=1e3);for(var ae=this._dataDistToSvgX(u[0].dist/se,v,E,ee),le=this._dataZToSvgY(u[0].z,w,C,D),ce="M".concat(ae,",").concat(le),ue=1;ue<u.length;ue++)ae=this._dataDistToSvgX(u[ue].dist/se,v,E,ee),le=this._dataZToSvgY(u[ue].z,w,C,D),ce+=" L".concat(ae,",").concat(le);var de=document.createElementNS("http://www.w3.org/2000/svg","path");de.setAttribute("cs","100,100"),de.setAttribute("stroke-width","1"),de.setAttribute("stroke-opacity","1"),de.setAttribute("stroke","#0B6BA7"),de.setAttribute("fill","none"),de.setAttribute("d",ce),ce+=" L".concat(ae,",").concat(w),ce+=" L".concat(v-E,",").concat(w);var he=document.createElementNS("http://www.w3.org/2000/svg","path");he.setAttribute("cs","100,100"),he.setAttribute("stroke-width","1"),he.setAttribute("stroke-opacity","0"),he.setAttribute("stroke","#000000"),he.setAttribute("fill","#00B798"),he.setAttribute("fill-opacity","0.4"),he.setAttribute("d",ce),ie.appendChild(de),ie.appendChild(he),O.appendChild(ie);var pe=document.createElementNS("http://www.w3.org/2000/svg","g"),fe=document.createElementNS("http://www.w3.org/2000/svg","rect");fe.setAttribute("width",E),fe.setAttribute("height",w),fe.setAttribute("transform","translate(".concat(v-E,",0)")),fe.setAttribute("visibility","hidden"),fe.setAttribute("pointer-events","all");var me=JSON.parse(JSON.stringify(u));me.sort((function(e,t){return e.dist-t.dist}));var ge=document.createElementNS("http://www.w3.org/2000/svg","line");ge.setAttribute("id","focusLineX"),ge.setAttribute("class","focusLine-default"),ge.setAttribute("fill","none"),ge.setAttribute("stroke","#F90"),ge.setAttribute("stroke-width","0.5px"),ge.setAttribute("visibility","hidden");var ye=document.createElementNS("http://www.w3.org/2000/svg","line");ye.setAttribute("id","focusLineY"),ye.setAttribute("class","focusLine-default"),ye.setAttribute("fill","none"),ye.setAttribute("stroke","#F90"),ye.setAttribute("stroke-width","0.5px"),ye.setAttribute("visibility","hidden");var ve=document.createElementNS("http://www.w3.org/2000/svg","circle");ve.setAttribute("id","focusCircle"),ve.setAttribute("r",4),ve.setAttribute("class","circle-default focusCircle-default"),ve.setAttribute("fill","#F90"),ve.setAttribute("visibility","hidden"),pe.appendChild(ve),pe.appendChild(ge),pe.appendChild(ye);var _e=document.createElementNS("http://www.w3.org/2000/svg","text"),be=document.createElementNS("http://www.w3.org/2000/svg","tspan"),we=document.createElementNS("http://www.w3.org/2000/svg","tspan"),Ee=document.createElementNS("http://www.w3.org/2000/svg","tspan");_e.setAttribute("style","text-align:center; max-width:220px; font-size:10px; color:#000000; font-family:Verdana; z-index:50;"),_e.style.pointerEvents="none",_e.style.position="fixed",_e.setAttribute("class","tooltipInit"),_e.setAttribute("text-anchor","middle"),g.appendChild(_e),be.setAttribute("class","altiPathValue"),be.setAttribute("x","0"),be.setAttribute("dy","-.7em"),we.setAttribute("class","altiPathValue"),we.setAttribute("x","0"),we.setAttribute("dy","1em"),Ee.setAttribute("class","altiPathCoords"),Ee.setAttribute("x","0"),Ee.setAttribute("dy","1em"),_e.appendChild(be),c.currentSlope&&_e.appendChild(we),_e.appendChild(Ee);var Oe=document.createElementNS("http://www.w3.org/2000/svg","g");pe.appendChild(Oe);var Se=document.createElementNS("http://www.w3.org/2000/svg","path");Se.setAttribute("cs","100,100"),Se.setAttribute("fill","#FFFFFF"),Se.setAttribute("stroke","#CCCCCC"),Se.setAttribute("fill-opacity","0.8"),Se.setAttribute("stroke-width","1"),Se.setAttribute("stroke-opacity","1");var xe=document.createElementNS("http://www.w3.org/2000/svg","path");return xe.setAttribute("cs","100,100"),xe.setAttribute("fill","#FFFFFF"),xe.setAttribute("stroke","#000000"),xe.setAttribute("fill-opacity","0"),xe.setAttribute("stroke-width","1"),xe.setAttribute("stroke-opacity","0.4"),xe.setAttribute("transform","translate(1,1)"),Oe.appendChild(xe),Oe.appendChild(Se),Oe.appendChild(_e),Oe.setAttribute("class","tooltipInit"),Oe.style.pointerEvents="none",fe.addEventListener("mouseover",(function(){ge.setAttribute("visibility","visible"),ye.setAttribute("visibility","visible"),ve.setAttribute("visibility","visible"),n.__createProfileMarker(r,u[0]),_e.setAttribute("class","tooltipFadeIn"),Oe.setAttribute("class","tooltipFadeIn")})),fe.addEventListener("mouseout",(function(){ge.setAttribute("visibility","hidden"),ye.setAttribute("visibility","hidden"),ve.setAttribute("visibility","hidden"),n.__removeProfileMarker(r),_e.setAttribute("class","tooltipFadeOut"),Oe.setAttribute("class","tooltipFadeOut")})),fe.addEventListener("mousemove",function(e){var t=O.createSVGPoint();t.x=e.clientX,t.y=e.clientY;var o=t.matrixTransform(O.getScreenCTM().inverse()),i=this._svgXToDataDist(o.x,v,E,ee)*se,s=Math.max(1,this._arrayBisect(me,i)),a=u[s-1],l=u[s],c=a;i-a.dist>l.dist-i&&(c=l);var d=this._dataDistToSvgX(c.dist/se,v,E,ee),h=this._dataZToSvgY(c.z,w,C,D);ve.setAttribute("cx",d),ve.setAttribute("cy",h),ge.setAttribute("x1",d),ge.setAttribute("y1",w),ge.setAttribute("x2",d),ge.setAttribute("y2",0),ye.setAttribute("x1",17+_),ye.setAttribute("y1",h),ye.setAttribute("x2",E+17+_),ye.setAttribute("y2",h),n.__updateProfileMarker(r,c);var p="Altitude : ".concat(c.z.toLocaleString()," m"),m="Pente : ".concat(c.slope," %"),g="(lat : ".concat(c.lat.toLocaleString()," / lon : ").concat(c.lon.toLocaleString(),")");be.innerHTML=p,we.innerHTML=m,Ee.innerHTML=g;var y,b=Math.max(this._getTextWidth(g,Ee),this._getTextWidth(p,be));c.dist>f*se/2?(y="M -0.5 -0.5 l -6 6 l 0 16 l -".concat(b+10," 0 l 0 -44 l ").concat(b+10," 0 l 0 16 l 6 6"),_e.setAttribute("transform","translate(".concat(-(b/2+12),",0)"))):c.dist<=f*se/2&&(y="M -0.5 -0.5 l 6 6 l 0 16 l ".concat(b+10," 0 l 0 -44 l -").concat(b+10," 0 l 0 16 l -6 6"),_e.setAttribute("transform","translate(".concat(b/2+12,",0)"))),Se.setAttribute("d",y),xe.setAttribute("d",y),Oe.setAttribute("transform","translate(".concat(d,",").concat(h,")")),Oe.style.transform="translate(".concat(d,"px,").concat(h,"px)")}.bind(this)),pe.appendChild(fe),O.appendChild(pe),g.appendChild(O),t}},displayProfileRaw:function(e,t,o,n){if(t){for(;t.firstChild;)t.removeChild(t.firstChild);var r=e&&e.points?e.points:{},i=document.createElement("textarea");return i.id="profilElevationResults",i.rows=10,i.cols=50,i.style.width="100%",i.innerHTML=JSON.stringify(r,void 0,4),i.addEventListener("mouseover",(function(e){n.__customRawProfileMouseOverEvent(o,e)})),t.appendChild(i),t}},displayProfileLibD3:function(e,t,o,n){var r=o;if(t&&e){for(;t.firstChild;)t.removeChild(t.firstChild);var i=e.points;if(e.distance>2e3){e.unit="km";for(var s=0;s<i.length;s++)i[s].dist/=1e3}var a=r.options.displayProfileOptions,l=20,c=20,u=30,d=40,h=t.clientWidth-d-c,p=t.clientHeight-l-u,f=d3.scale.linear().range([0,h]),m=d3.scale.linear().range([p,0]),g=d3.svg.axis().scale(f).orient("bottom").ticks(5),y=d3.svg.axis().scale(m).orient("left").ticks(5),v=d3.svg.line().interpolate("basis").x((function(e){return f(e.dist)})).y((function(e){return m(e.z)})),_=d3.svg.area().interpolate("basis").x((function(e){return f(e.dist)})).y0(p).y1((function(e){return m(e.z)})),b=d3.select(t).append("svg").attr("width",h+d+c).attr("height",p+l+u).append("g").attr("transform","translate("+d+","+l+")"),w=d3.extent(i,(function(e){return e.dist}));f.domain(w);var E=[0,d3.max(i,(function(e){return e.z}))];m.domain(E),b.append("path").datum(i).attr("class","area-d3").attr("d",_),b.append("g").attr("class","x axis-d3").attr("transform","translate(0,"+p+")").call(g).append("text").attr("y",-15).attr("dy",".71em").attr("x",h).text("Distance ("+e.unit+")"),b.append("g").attr("class","y axis-d3").call(y).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").text("Altitude (m)"),b.append("g").attr("class","grid-d3 vertical").attr("transform","translate(0,"+p+")").call(g.orient("bottom").tickSize(-p,0,0).tickFormat("")),b.append("g").attr("class","grid-d3 horizontal").call(y.orient("left").tickSize(-h,0,0).tickFormat("")),b.append("path").datum(i).attr("class","line-d3").attr("d",v),b.selectAll("circle").data(i).enter().append("circle").attr("cx",(function(e){return f(e.dist)})).attr("cy",(function(e){return m(e.z)})).attr("r",0).attr("class","circle-d3");var O=b.append("g").style("display","none");O.append("line").attr("id","focusLineX").attr("class","focusLine-d3"),O.append("line").attr("id","focusLineY").attr("class","focusLine-d3"),O.append("circle").attr("id","focusCircle").attr("r",4).attr("class","circle-d3 focusCircle-d3");var S=d3.select(t).append("div").attr("class","tooltip-d3").style("opacity",0),x=d3.bisector((function(e){return e.dist})).left;return b.append("rect").attr("class","overlay-d3").attr("width",h).attr("height",p).on("mouseover",(function(){O.style("display",null),n.__createProfileMarker(r,i[0])})).on("mouseout",(function(){O.style("display","none"),n.__removeProfileMarker(r),S.transition().duration(500).style("opacity",0)})).on("mousemove",(function(){var e=d3.mouse(this),t=f.invert(e[0]),o=Math.max(1,x(i,t)),s=i[o-1],l=i[o],c=t-s[0]>l[0]-t?l:s,u=f(c.dist),d=m(c.z);O.select("#focusCircle").attr("cx",u).attr("cy",d),O.select("#focusLineX").attr("x1",u).attr("y1",m(E[0])).attr("x2",u).attr("y2",m(E[1])),O.select("#focusLineY").attr("x1",f(w[0])).attr("y1",d).attr("x2",f(w[1])).attr("y2",d),n.__updateProfileMarker(r,c),S.transition().duration(200).style("opacity",.9);var h="";h+=" Altitude : "+c.z+" m",a.currentSlope&&(h+="<br/> Pente : "+c.slope+" %"),h+="<br/> (Lat : "+c.lat+"/ Lon : "+c.lon+")",S.html(h).style("left",d3.event.pageX+"px").style("top",d3.event.pageY-28+"px")})),b}},displayProfileLibAmCharts:function(e,t,o,n){var r=o;if(t&&e){var i=e.points,s="<span class='altiPathValue'>[[title]] : [[value]]m</span><br/>";if(r.options.displayProfileOptions.currentSlope&&(s+="<span class='altiPathValue'>Pente : [[slope]] %</span><br/>"),s+="<span class='altiPathCoords'>(Lat: [[lat]] / Lon:[[lon]])</span>",AmCharts.addInitHandler((function(){})),e.distance>2e3){e.unit="km";for(var a=0;a<i.length;a++)i[a].dist/=1e3}for(var l=0;l<i.length;l++){var c=i[l].dist,u=100;c>100?u=1:c>10&&(u=10),c=Math.round(c*u)/u,i[l].dist=c}var d={type:"serial",pathToImages:"http://cdn.amcharts.com/lib/3/images/",categoryField:"dist",autoMarginOffset:0,marginRight:10,marginTop:10,startDuration:0,color:"#5E5E5E",fontSize:8,theme:"light",thousandsSeparator:"",numberFormatter:{precision:-1,decimalSeparator:",",thousandsSeparator:" "},categoryAxis:{color:"#5E5E5E",gridPosition:"start",minHorizontalGap:40,tickPosition:"start",title:"Distance ("+e.unit+")",titleColor:"#5E5E5E",labelOffset:0,startOnAxis:!0},chartCursor:{animationDuration:0,bulletsEnabled:!0,bulletSize:10,categoryBalloonEnabled:!1,cursorColor:"#F90",graphBulletAlpha:1,graphBulletSize:1,zoomable:!1},trendLines:[],graphs:[{balloonColor:"#CCCCCC",balloonText:s,bullet:"round",bulletAlpha:0,bulletBorderColor:"#FFF",bulletBorderThickness:2,bulletColor:"#F90",bulletSize:6,hidden:!1,id:"AmGraph-1",fillAlphas:.4,fillColors:"#C77A04",lineAlpha:1,lineColor:"#C77A04",lineThickness:1,title:"Altitude",valueField:"z"}],guides:[],valueAxes:[{id:"ValueAxis-1",minVerticalGap:20,title:"Altitude (m)"}],balloon:{borderColor:"#CCCCCC",borderThickness:1,fillColor:"#FFFFFF",showBullet:!0},titles:[],allLabels:[],dataProvider:i},h=AmCharts.makeChart(t,d);return h.addListener("changed",(function(e){var t=e.chart.dataProvider[e.index];n.__updateProfileMarker(r,t)})),h}}};function Vi(e){return(Vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Wi=Mo.a.getLogger("elevationpath"),qi=function(e){function t(o){if(Wi.trace("ElevationPath()"),o=o||{},!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.CLASSNAME="ElevationPath",this._uid=yn.generate(),this._showContainer=null,this._pictoContainer=null,this._panelContainer=null,this._profileContainer=null,this._waitingContainer=null,this._infoContainer=null,this._timerHdlr=null,this._drawStyleStart=null,this._drawStyleFinish=null,this._markerStyle=null,this._profile=null,this._data={},this._measureSource=null,this._measureVector=null,this._measureDraw=null,this._lastSketch=null,this._currentSketch=null,this._marker=null,this._noRightManagement=!1,this._initialize(o),this._checkRightsManagement(),this._container=o.element?o.element:this._initializeContainer(),e.call(this,{element:this._container,target:o.target,render:o.render})}return e&&(t.__proto__=e),t.prototype=Object.create(e.prototype,{}),Wo.assign(t.prototype,Bi),t.__removeProfileMarker=function(e){var t=e;t._marker&&(t._measureSource.removeFeature(t._marker),t._marker=null)},t.__createProfileMarker=function(e,t){var o=e;o._marker&&(o._measureSource.removeFeature(o._marker),o._marker=null);var n=o.getMap().getView().getProjection(),r=Object(a.E)([t.lon,t.lat],"EPSG:4326",n),i=o._measureSource.getFeatures()[0].getGeometry().getClosestPoint(r),s=new lr.a(i);o._marker=new Nr.b({geometry:s}),Wi.trace(s),o._marker.setStyle(o._markerStyle),o._measureSource.addFeature(o._marker)},t.__updateProfileMarker=function(e,o){var n=e;t.__removeProfileMarker(n),t.__createProfileMarker(n,o)},t.__customRawProfileOperation=function(e,o){Wi.log("__customRawProfileOperation");for(var n=e,r=o.points,i=n.getMap().getView().getProjection(),s=0;s<r.length;s++){var l=r[s],c=Object(a.E)([l.lon,l.lat],"EPSG:4326",i),u=new lr.a(c);n._marker=new Nr.b({geometry:u}),Wi.trace(u);var d=t.DEFAULT_STYLES.RESULTS,h=new ar.a({radius:d.imageRadius,stroke:new zo.a({color:d.imageStrokeColor,width:d.imageStrokeWidth}),fill:new Bo.a({color:d.imageFillColor})});n._marker.setStyle(new Do.c({image:h})),n._measureSource.addFeature(n._marker)}},t.__customRawProfileMouseOverEvent=function(e,t){Wi.log("__customRawProfileMouseOverEvent",e,t)},t.DISPLAY_PROFILE_LIB_AMCHARTS=function(e,o,n){if(Wi.trace("ElevationPath.DISPLAY_PROFILE_LIB_AMCHARTS"),"undefined"!=typeof AmCharts){var r=zi.displayProfileLibAmCharts(e,o,n,t);r&&(this._profile=r)}else Wi.log("Lib. AmCharts is not loaded !")},t.DISPLAY_PROFILE_LIB_D3=function(e,o,n){if(Wi.trace("ElevationPath.DISPLAY_PROFILE_LIB_D3"),"undefined"!=typeof d3){var r=zi.displayProfileLibD3(e,o,n,t);r&&(this._profile=r)}else Wi.log("Lib. D3 is not loaded !")},t.DISPLAY_PROFILE_RAW=function(e,o,n){Wi.trace("ElevationPath.DISPLAY_PROFILE_RAW");var r=zi.displayProfileRaw(e,o,n,t);r&&(this._profile=r)},t.DISPLAY_PROFILE_BY_DEFAULT=function(e,o,n){Wi.trace("ElevationPath.DISPLAY_PROFILE_BY_DEFAULT");var r=zi.displayProfileByDefault(e,o,n,t);r&&(this._profile=r)},t.DEFAULT_STYLES={MARKER:new Fo.a({src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAsCAYAAAAATWqyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABTtJREFUeNq8WGtsFUUU/rb3gtdCAykFG9AUDTQUKimhxUewEusrJYoBo4FfEgoqotHERH6oP9TGmJhIrIlWAf9hjAaEiME2pgFfVVpFii8sWqIQLLSx3EJLW7p+Z2Z2b2l7d/b23vZLTmZ2duacb2fmnDk7DlKA67rXs1hJKacsohRQppjXFygnKT9TDlH2O47zFzIFGnco91EOuqnjoBnr2Ow4FhIlLN6m3DykFTh3BGj/Doj/CfSe082xPCDnBmDWTUBeyXDVjZTHOUNHUiZCEs+weI0ySTV0/w0c2wa07gIungn+vOx8YN46oPhpYOp1Xms/5TmSeSMUERKImFnYqBoGuPRNL5LEW8BgX2rrmjWZZLYApS8BUW8r4T0zO5eTEjFr+S6lSjV0HgPqVwNdf6S30abNB+7aDeQWey3bKZtIxvU5DxvyrE/izJfAvuXpkxCIDtElOjWqjK2RM8LZWMbiG0oEnUc5kB7a14WMYvI04H56du5ieZKluZWz8r0/IyQh5TuKRH8cqFuTeRIC0Sm6xYbYok1j21+ahyhLVO3wC8D5VowbRLfY0FhibOulIavDLEoRZyD8sJDeMWBXKG5ZsIobsdDsg+OMq3u1m1u9KQo8zP45EqjRxOUpk6i50IRl4FuGjpZtwUoiMYa314GFj/EzIsN8n8v+C1e4kfvwcm+wnhsZY27xQ8oiWZpKrWRQB6tAElfxpKnjsCdGklDzG9HvpI/0DYLYEpsalVnmAAM6fgR62oMHl70C5N9mn3rpI32DILbEpkZ5ljlFgbPNFtebzij5VPhNKX1lTBASNtXSzPZ3cxCuvVOH7FTCu4yxeZDGbCES0z5+PniQ3uGpwTYmYTOWCPGTpgYP6u9OnYhtzBCbQkSH0NiM4EEdP6VOxDYmYbNLiJxQ1elFwYPaG3XQCn3QHddjgpCweUKI6K2bvzw4YROf//rJob6fZl/H2FRoFiINfqo3qyzYwD8MVIeYLw32J+8j76SP9A2C2BKbGg1CZL+EF/W4YKP9a3/fCeyhkrY9DOOXEu1SlzZ5J31sSNjqURm/OfQkY9qgvkYOvXhbuH0g505Oga7HT9rPF9+t5+pDL0ulwzt46FV5ROax+JUSRRtP0LoHMK64+xNg7iqVEVOKSKRVxRGpsKhRnaRD4SPjR0J0axKCGmP7ilQxm4X8d8xXmfvHJZlPkCR3WfODl9FLMlxCIhevSJ5Nwzo1XdKxYpe3hpmB6BKdmoS43VqPxIgsni+aWOg8biZ3f+nLmSMiuvKWek/P01az7QdLyNVT7lC/l59WAKcb0iMxhzpW1nvmvpDtSiKD1l9OkpnDgv8UyMWFU9wvTP8vdY6NhJwnD1JVtso2OiiLSeL0iJUbNfg6zikVVwRTyOn2HWOfjfLtHgnBhtFIJCViyNDZUatdmnGlaFPqJIoe1WM1aqlz71ivJbLNobgAA9zgu7nZ/vstHAk5WVdzaPRqmGC5lER6kjpV4OWJdq+1kkshSk4VH9izcy/bV66qSPQZV+0J9G7rTY6+XNmqHmYwyJVV24kse1X31dhKHdasygkzy+a64oC4nWr47F4e858nSbLv4V/KAe9JKpVDrx/SImLIXMOiRUKdujESl+49O8xVZxpXzVc/C/I/RxL/hgq8YYkYhev9q6kVO4d9B+sr3vdICNaHJTHWW8Ya/87wqy2uWwstUk/gTYw3aCRGOarMDfS67kfFWqSuIe9imAjQEC272nJHixYNaSvGRIIGN49ywbsZEw1zI11N6TZSHeaGORn+F2AAJtRIMx4t+hUAAAAASUVORK5CYII=",anchor:[.5,1],snapToPixel:!0}),RESULTS:{imageRadius:5,imageFillColor:"rgba(128, 128, 128, 0.2)",imageStrokeColor:"rgba(0, 0, 0, 0.7)",imageStrokeWidth:2}},t.prototype.constructor=t,t.prototype.setMap=function(t){Wi.trace("ElevationPath::setMap"),t&&(this.options.active&&(null===this._profile&&(this._panelContainer.style.display="none"),this._initMeasureInteraction(t),this._addMeasureInteraction(t)),this.options.target||Ni.add(t,this)),e.prototype.setMap.call(this,t)},t.prototype.getActive=function(){return Wi.trace("ElevationPath::getActive"),this.options.active},t.prototype.setActive=function(e){Wi.trace("ElevationPath::setActive"),this.options.active=e},t.prototype.clean=function(){Wi.trace("ElevationPath::clean");var e=this.getMap();this._panelContainer.style.display="none",this._showContainer.checked=!1,this._removeProfile(),this._removeMeasure(),this._removeMeasureInteraction(e)},t.prototype._removeMeasure=function(){if(this._lastSketch=null,this._currentSketch=null,this._measureSource){this._marker&&(this._measureSource.removeFeature(this._marker),this._marker=null);for(var e=this._measureSource.getFeatures(),t=0;t<e.length;t++)this._measureSource.removeFeature(e[t])}},t.prototype._removeProfile=function(){if(this._profile=null,this._profileContainer)for(;this._profileContainer.firstChild;)this._profileContainer.removeChild(this._profileContainer.firstChild)},t.prototype._initialize=function(e){Wi.trace("ElevationPath::_initialize : ",e),this.options={target:null,render:null,active:!1,apiKey:null,elevationOptions:{},layerDescription:{title:"Profil altimÃ©trique",description:"Mon profil altimÃ©trique"},displayProfileOptions:{totalDistance:!0,greaterSlope:!0,meanSlope:!0,ascendingElevation:!0,descendingElevation:!0,currentSlope:!0,apply:null,target:null},stylesOptions:{profile:null,draw:null,marker:null}},Wo.mergeParams(this.options,e),this.options.target=e.target||null,this.options.apiKey=e.apiKey;var o=e.displayProfileOptions||{},n=o.apply;this.options.displayProfileOptions.apply="function"==typeof n?n:t.DISPLAY_PROFILE_BY_DEFAULT;var r=o.target;this.options.displayProfileOptions.target=void 0!==r?r:null;var i=e.stylesOptions||{};this.options.stylesOptions.draw=i.draw||{},this._createStylingDraw(),this.options.stylesOptions.marker=i.marker||{},this._createStylingMarker()},t.prototype._initializeContainer=function(){Wi.trace("ElevationPath::_initializeContainer : ",this._uid);var e=this._createMainContainerElement(),t=this._showContainer=this._createShowElevationPathElement();e.appendChild(t);var o=this._pictoContainer=this._createShowElevationPathPictoElement();e.appendChild(o),this.options.active&&(this._showContainer.checked=!0);var n=this._panelContainer=this._createElevationPathPanelElement(),r=this._createElevationPathPanelHeaderElement();n.appendChild(r);var i=this._profileContainer=this._createElevationPathPanelProfilElement();n.appendChild(i);var s=this._waitingContainer=this._createElevationPathWaitingElement();n.appendChild(s);var a=this._infoContainer=this._createElevationPathInformationsElement();return n.appendChild(a),null===this.options.displayProfileOptions.target&&e.appendChild(n),e},t.prototype._checkRightsManagement=function(){Wi.trace("ElevationPath::_checkRightsManagement");var e=Rn({key:this.options.apiKey,resources:["SERVICE_CALCUL_ALTIMETRIQUE_RSC"],services:["Elevation"]});e?this.options.apiKey||(this.options.apiKey=e.key):this._noRightManagement=!0},t.prototype._createStylingMarker=function(){Wi.trace("ElevationPath::_createStylingMarker ");var e=t.DEFAULT_STYLES.MARKER;Wi.trace("style marker",e),this.options.stylesOptions.marker instanceof Ri.a&&(e=this.options.stylesOptions.marker),this._markerStyle=new Do.c({image:e})},t.prototype._createStylingDraw=function(){Wi.trace("ElevationPath::_createStylingDraw");var e=this.options.stylesOptions.draw;Wi.trace("style start",e.start);var t={image:Ui.DEFAULT_POINTER_STYLE,stroke:Ui.DEFAULT_DRAW_START_STYLE.getStroke()};e.hasOwnProperty("pointer")&&e.pointer instanceof Ri.a&&(t.image=e.pointer),e.hasOwnProperty("start")&&e.start instanceof zo.a&&(t.stroke=e.start),this._drawStyleStart=new Do.c(t),Wi.trace("style finish",e.finish);var o={stroke:Ui.DEFAULT_DRAW_FINISH_STYLE.getStroke()};e.hasOwnProperty("finish")&&e.finish instanceof zo.a&&(o.stroke=e.finish),this._drawStyleFinish=new Do.c(o)},t.prototype._createStylingProfile=function(){Wi.trace("ElevationPath::_createStylingProfile");var e=this.options.stylesOptions.profile;Wi.trace("style profile",e);var o=t.DEFAULT_STYLES.PROFILE;Object.keys(o).forEach((function(t){if(e.hasOwnProperty(t)){var n=o[t];"object"===Vi(n)&&(Wo.mergeParams(n,e[t]),e[t]=n)}else e[t]=o[t]}))},t.prototype._initMeasureInteraction=function(e){var t=this;Wi.trace("ElevationPath::_initMeasureInteraction()"),e&&(this._measureSource=new d.b,this._measureVector=new sr.a({source:this._measureSource,style:this._drawStyleFinish}),this._measureVector.gpResultLayerId="measure",e.addLayer(this._measureVector),e.getControls().forEach((function(e){if(e instanceof Sn){var o=t._measureVector.gpLayerId;e._layers[o].title===o&&e.addLayer(t._measureVector,{title:t.options.layerDescription.title,description:t.options.layerDescription.description})}})))},t.prototype._addMeasureInteraction=function(e){var t=this;Wi.trace("ElevationPath::_addMeasureInteraction()"),e&&(this._measureDraw=new y.d({source:this._measureSource,type:"LineString",style:this._drawStyleStart,stopClick:!0}),this._measureDraw.setProperties({name:"ElevationPath",source:this}),e.addInteraction(this._measureDraw),this._measureDraw.on("drawstart",(function(e){Wi.trace("drawstart",e),null!==t._marker&&(t._measureSource.removeFeature(t._marker),t._marker=null),null!==t._lastSketch&&(t._measureSource.removeFeature(t._lastSketch),t._lastSketch=null),t._currentSketch=e.feature;for(var o=t._measureSource.getFeatures(),n=0;n<o.length;n++)t._measureSource.removeFeature(o[n]);t.dispatchEvent("elevationpath:drawstart")})),this._measureDraw.on("drawend",(function(e){Wi.trace("drawend",e),t.dispatchEvent("elevationpath:drawend"),t._lastSketch=t._currentSketch,void 0===t.options.elevationOptions.onSuccess&&null===t.options.displayProfileOptions.target&&(t._panelContainer.style.display="block"),t._measureDraw.setActive(!1),t._requestService()})))},t.prototype._removeMeasureInteraction=function(e){Wi.trace("ElevationPath::_removeMeasureInteraction()"),e&&(this._measureVector&&(e.removeLayer(this._measureVector),this._measureVector=null),this._measureDraw&&(e.removeInteraction(this._measureDraw),this._measureDraw=null))},t.prototype._getGeometry=function(){if(null!==this._currentSketch){for(var e=[],t=this.getMap().getView().getProjection(),o=this._currentSketch.getGeometry().getCoordinates(),n=0;n<o.length;n++){var r=o[n],i=r;"EPSG:4326"!==t&&(i=Object(a.E)(r,t,"EPSG:4326")),e.push({lon:Math.round(1e8*i[0])/1e8,lat:Math.round(1e8*i[1])/1e8})}return e}Wi.warn("Current Feature undefined !?")},t.prototype._getLength=function(){if(null!==this._currentSketch){for(var e=0,t=this.getMap().getView().getProjection(),o=this._currentSketch.getGeometry().getCoordinates(),n=0,r=o.length-1;n<r;++n){var i=Object(a.E)(o[n],t,"EPSG:4326"),s=Object(a.E)(o[n+1],t,"EPSG:4326");i[0]=Math.round(1e8*i[0])/1e8,i[1]=Math.round(1e8*i[1])/1e8,s[0]=Math.round(1e8*s[0])/1e8,s[1]=Math.round(1e8*s[1])/1e8,e+=Object(pr.c)(i,s)}return e}Wi.warn("Current Feature undefined !?")},t.prototype._getSketchCoords=function(){if(null!==this._currentSketch){for(var e=this.getMap().getView().getProjection(),t=[],o=this._currentSketch.getGeometry().getCoordinates(),n=0;n<o.length;n++){var r=Object(a.E)(o[n],e,"EPSG:4326");r[0]=Math.round(1e8*r[0])/1e8,r[1]=Math.round(1e8*r[1])/1e8,t.push(r)}return t}Wi.warn("Current Feature undefined !?")},t.prototype._requestService=function(){Wi.trace("ElevationPath::_requestService");var e=this._getGeometry();if(Wi.trace("geometry",e),e)if(this._noRightManagement)Wi.warn("no rights to this service !");else{var t={};Wo.mergeParams(t,this.options.elevationOptions),Wo.mergeParams(t,{apiKey:t.apiKey||this.options.apiKey}),"boolean"!=typeof t.ssl&&("boolean"==typeof this.options.ssl?t.ssl=this.options.ssl:t.ssl=!0),Wo.mergeParams(t,{ssl:t.ssl});var o=this;if(Wo.mergeParams(t,{onSuccess:this.options.elevationOptions.onSuccess||function(e){Wi.trace(e),e&&(o._panelContainer.style.display="block",o._displayProfile(e.elevations),o._waitingContainer.className="GPelevationPathCalcWaitingContainerHidden",o._waiting=!1,o._measureDraw.setActive(!0))},onFailure:this.options.elevationOptions.onFailure||function(e){o._panelContainer.style.display="none",Wi.error(e.message),o._waitingContainer.className="GPelevationPathCalcWaitingContainerHidden",o._waiting=!1,o._measureDraw.setActive(!0)}}),!t.sampling){var n,r=this._getLength();Wi.trace("length",r);var i=Math.max(50,Math.floor(r)/5);n=i>200?200:Math.floor(i),this._getSketchCoords().length>100&&(n=0)}n>0&&Wo.mergeParams(t,{sampling:n}),Wo.mergeParams(t,{positions:e}),Wi.trace("options du service",t),this._waitingContainer.className="GPelevationPathCalcWaitingContainerVisible",Ao.Services.getAltitude(t)}else Wi.warn("missing geometry !?")},t.prototype._computeElevationMeasure=function(e){Wi.trace("ElevationPath::_computeElevationMeasure",e);var t=e,o=this._getSketchCoords(),n=0,r=0,i=o[1];t[0].dist=0,t[0].slope=0,t[0].lat=Math.round(1e4*t[0].lat)/1e4,t[0].lon=Math.round(1e4*t[0].lon)/1e4;for(var s=0,a=0,l=0,c=0,u=0,d=0,h=[],p=1;p<t.length;p++){var f=[t[p].lon,t[p].lat],m=r+Object(pr.c)(f,o[n]),g=m-u;f[0]===i[0]&&f[1]===i[1]&&(n++,r=m,p!==t.length-1&&(i=o[n+1]));var y=t[p].z,v=t[p-1].z;y<0&&(y=0),v<0&&(v=0);var _=y-v;_<0?(s+=g,c+=_):_>0&&(a+=g,l+=_),u=m,t[p].dist=m,h.push(m),d+=_?Math.abs(Math.round(_/g*100)):0,t[p].slope=_?Math.abs(Math.round(_/g*100)):0;var b=t[p].slope;t[p].color=b>15&&b<30?"#005b4c":b>30&&b<45?"#00362d":b>45?"#00120f":"#00B798",t[p].lat=Math.round(1e4*t[p].lat)/1e4,t[p].lon=Math.round(1e4*t[p].lon)/1e4}Wi.trace("List Distances",h);for(var w=t[0].z,E=t[0].z,O=t[0].slope,S=0;S<t.length;S++){var x=t[S];x.z<-100&&(x.z=0),x.z>E&&(E=x.z),x.z<w&&(w=x.z),x.slope>O&&(O=x.slope)}return{greaterSlope:O,meanSlope:Math.round(d/t.length),distancePlus:a,distanceMinus:s,ascendingElevation:l,descendingElevation:c,altMin:w.toLocaleString(),altMax:E.toLocaleString(),distance:this._getLength(),unit:"m",points:t}},t.prototype._displayProfile=function(e){Wi.trace("ElevationPath::_displayProfile",e),this._data&&(this._data={});var t=this._data=this._computeElevationMeasure(e);this._updateInfoContainer();var o=this.options.displayProfileOptions.target;o&&o.appendChild(this._panelContainer),o=this._profileContainer;this.options.displayProfileOptions.apply.call(this,t,o,this);var n=this.options.displayProfileOptions,r=document.getElementById("GPelevationPathPanelInfo-"+this._uid);r&&(n.totalDistance||n.greaterSlope||n.meanSlope||n.ascendingElevation||n.descendingElevation)&&(r.style.display="block")},t.prototype._updateInfoContainer=function(){Wi.trace("ElevationPath::_updateInfoContainer");var e=this.options.displayProfileOptions.totalDistance,t=this.options.displayProfileOptions.meanSlope,o=this.options.displayProfileOptions.greaterSlope,n=this.options.displayProfileOptions.ascendingElevation,r=this.options.displayProfileOptions.descendingElevation,i=this._infoContainer;if(i.childElementCount)for(;i.firstChild;)i.removeChild(i.firstChild);e&&this._addElevationPathInformationsItem("Distance totale : "+Math.round(this._data.distance).toLocaleString()+" m"),n&&this._addElevationPathInformationsItem("DÃ©nivelÃ© positif : "+this._data.ascendingElevation.toLocaleString()+" m"),r&&this._addElevationPathInformationsItem("DÃ©nivelÃ© nÃ©gatif : "+this._data.descendingElevation.toLocaleString()+" m"),t&&this._addElevationPathInformationsItem("Pente moyenne : "+this._data.meanSlope.toLocaleString()+" %"),o&&this._addElevationPathInformationsItem("Plus forte pente : "+this._data.greaterSlope.toLocaleString()+" %")},t.prototype.onShowElevationPathClick=function(){var e=this.getMap();In.unset(e,{current:"ElevationPath"}),this._showContainer.checked?(this._panelContainer.style.display="none",this._removeMeasure(),this._removeProfile(),this._removeMeasureInteraction(e)):(null===this._profile&&(this._panelContainer.style.display="none"),this._initMeasureInteraction(e),this._addMeasureInteraction(e))},t.prototype.onOpenElevationPathInfoClick=function(){var e=this._infoContainer;"GPelevationPathInformationsContainerVisible"===e.className?(clearTimeout(this._timerHdlr),e.className="GPelevationPathInformationsContainerHidden"):e.className="GPelevationPathInformationsContainerVisible",this._timerHdlr=setTimeout((function(){e.className="GPelevationPathInformationsContainerHidden"}),4e3)},t}(mn.a),Hi=qi;window.ol&&window.ol.control&&(window.ol.control.ElevationPath=qi);var Yi={_addUID:function(e){return this._uid?e+"-"+this._uid:e},_createMainContainerElement:function(){var e=document.createElement("div");return e.id=this._addUID("GPmeasureLength"),e.className="GPwidget",e},_createShowMeasureLengthElement:function(){var e=document.createElement("input");return e.id=this._addUID("GPshowMeasureLength"),e.type="checkbox",e},_createShowMeasureLengthPictoElement:function(){var e=this,t=document.createElement("label");t.id=this._addUID("GPshowMeasureLengthPicto"),t.className="GPshowAdvancedToolPicto",t.htmlFor=this._addUID("GPshowMeasureLength"),t.title="Mesurer une distance",t.addEventListener?t.addEventListener("click",(function(t){e.onShowMeasureLengthClick(t)})):t.attachEvent&&t.attachEvent("onclick",(function(t){e.onShowMeasureLengthClick(t)}));var o=document.createElement("span");return o.id=this._addUID("GPshowMeasureLengthOpen"),o.className="GPshowAdvancedToolOpen",t.appendChild(o),t}},Xi=Mo.a.getLogger("measurelength"),Zi=function(e){function t(o){if(o=o||{},!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.CLASSNAME="MeasureLength",this._uid=yn.generate(),this._showContainer=null,this._pictoContainer=null,this._initialize(o);var n=o.element?o.element:this._initializeContainer();e.call(this,{element:n,target:o.target,render:o.render})}return e&&(t.__proto__=e),t.prototype=Object.create(e.prototype,{}),Wo.assign(t.prototype,Ui),Wo.assign(t.prototype,Yi),t.prototype.constructor=t,t.prototype.setMap=function(t){Xi.trace("setMap()");var o=this.CLASSNAME;t?this.options.target||Ni.add(t,this):this.clean(),this.tools[o].push({instance:t?this:null,active:!1,map:t?t.getTargetElement().id:null});var n="undefined"!=typeof window?window:"undefined"!=typeof self?self:null;n&&(n.gpShareMeasures||(n.gpShareMeasures={}),n.gpShareMeasures[o]=this.tools[o]),e.prototype.setMap.call(this,t)},t.prototype._initialize=function(e){Xi.trace("call MeasureLength::_initialize() : ",e),this.options={},this.options.geodesic=void 0===e.geodesic||e.geodesic,this.options.target=void 0!==e.target?e.target:null,this.options.render=void 0!==e.render?e.render:null,this.options.layerDescription=void 0!==e.layerDescription?e.layerDescription:{title:"Mesures de distance",description:"Mes mesures"},this.createStylingMeasureInteraction(e.styles)},t.prototype._initializeContainer=function(){Xi.trace("call MeasureLength::_initializeContainer() : ",this._uid);var e=this._createMainContainerElement(),t=this._showContainer=this._createShowMeasureLengthElement();e.appendChild(t),this._showContainer.checked=!1;var o=this._pictoContainer=this._createShowMeasureLengthPictoElement();return e.appendChild(o),e},t.prototype.addMeasureEvents=function(){var e=this;Xi.trace("call MeasureLength::addMeasureEvents()");var t=this.getMap();t.on("singleclick",(function(t){return e.onPointerMoveHandler(t)})),t.on("pointermove",(function(t){return e.onPointerMoveHandler(t)}))},t.prototype.removeMeasureEvents=function(){var e=this;Xi.trace("call MeasureLength::removeMeasureEvents()");var t=this.getMap();t.un("singleclick",(function(t){return e.onPointerMoveHandle(t)})),t.un("pointermove",(function(t){return e.onPointerMoveHandler(t)}))},t.prototype.format=function(e){Xi.trace("call MeasureLength::format()");var t,o=this.getMap();if(this.options.geodesic){var n=e.getCoordinates();t=0;for(var r=o.getView().getProjection(),i=0,s=n.length-1;i<s;++i){var l=Object(a.E)(n[i],r,"EPSG:4326"),c=Object(a.E)(n[i+1],r,"EPSG:4326");t+=Object(pr.c)(l,c)}}else t=Math.round(100*e.getLength())/100;return t>1e3?Math.round(t/1e3*100)/100+" km":Math.round(100*t)/100+" m"},t.prototype.onShowMeasureLengthClick=function(e){Xi.trace("call MeasureLength::onShowMeasureLengthClick()",e),this.onShowMeasureClick(e,"LineString")},t}(mn.a),Ki=Zi;window.ol&&window.ol.control&&(window.ol.control.MeasureLength=Zi);var Ji={_addUID:function(e){return this._uid?e+"-"+this._uid:e},_createMainContainerElement:function(){var e=document.createElement("div");return e.id=this._addUID("GPmeasureArea"),e.className="GPwidget",e},_createShowMeasureAreaElement:function(){var e=document.createElement("input");return e.id=this._addUID("GPshowMeasureArea"),e.type="checkbox",e},_createShowMeasureAreaPictoElement:function(){var e=this,t=document.createElement("label");t.id=this._addUID("GPshowMeasureAreaPicto"),t.className="GPshowAdvancedToolPicto",t.htmlFor=this._addUID("GPshowMeasureArea"),t.title="Mesurer une surface",t.addEventListener?t.addEventListener("click",(function(t){e.onShowMeasureAreaClick(t)})):t.attachEvent&&t.attachEvent("onclick",(function(t){e.onShowMeasureAreaClick(t)}));var o=document.createElement("span");return o.id=this._addUID("GPshowMeasureAreaOpen"),o.className="GPshowAdvancedToolOpen",t.appendChild(o),t}},Qi=Mo.a.getLogger("measurearea"),$i=function(e){function t(o){if(o=o||{},!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.CLASSNAME="MeasureArea",this._uid=yn.generate(),this._showContainer=null,this._pictoContainer=null,this._initialize(o);var n=o.element?o.element:this._initializeContainer();e.call(this,{element:n,target:o.target,render:o.render})}return e&&(t.__proto__=e),t.prototype=Object.create(e.prototype,{}),Wo.assign(t.prototype,Ui),Wo.assign(t.prototype,Ji),t.prototype.constructor=t,t.prototype.setMap=function(t){Qi.trace("setMap()");var o=this.CLASSNAME;t?this.options.target||Ni.add(t,this):this.clean(),this.tools[o].push({instance:t?this:null,active:!1,map:t?t.getTargetElement().id:null});var n="undefined"!=typeof window?window:"undefined"!=typeof self?self:null;n&&(n.gpShareMeasures||(n.gpShareMeasures={}),n.gpShareMeasures[o]=this.tools[o]),e.prototype.setMap.call(this,t)},t.prototype._initialize=function(e){Qi.trace("call MeasureArea::_initialize() : ",e),this.options={},this.options.geodesic=void 0===e.geodesic||e.geodesic,this.options.target=void 0!==e.target?e.target:null,this.options.render=void 0!==e.render?e.render:null,this.options.layerDescription=void 0!==e.layerDescription?e.layerDescription:{title:"Mesures de surface",description:"Mes mesures"},this.createStylingMeasureInteraction(e.styles)},t.prototype._initializeContainer=function(){Qi.trace("call MeasureArea::_initializeContainer() : ",this._uid);var e=this._createMainContainerElement(),t=this._showContainer=this._createShowMeasureAreaElement();e.appendChild(t),this._showContainer.checked=!1;var o=this._pictoContainer=this._createShowMeasureAreaPictoElement();return e.appendChild(o),e},t.prototype.addMeasureEvents=function(){var e=this;Qi.trace("call MeasureArea::addMeasureEvents()");var t=this.getMap();t.on("singleclick",(function(t){return e.onPointerMoveHandler(t)})),t.on("pointermove",(function(t){return e.onPointerMoveHandler(t)}))},t.prototype.removeMeasureEvents=function(){var e=this;Qi.trace("call MeasureArea::removeMeasureEvents()");var t=this.getMap();t.un("singleclick",(function(t){return e.onPointerMoveHandler(t)})),t.un("pointermove",(function(t){return e.onPointerMoveHandler(t)}))},t.prototype.format=function(e){var t;if(Qi.trace("call MeasureArea::format()"),this.options.geodesic){var o=e.clone().getLinearRing(0).getCoordinates();t=Math.abs(Object(pr.b)(new ur.b([o])))}else t=e.getArea();return t>1e6?Math.round(t/1e6*100)/100+" km<sup>2</sup>":t>1e5?Math.round(t/1e6*1e3)/1e3+" km<sup>2</sup>":t>1e3?10*Math.round(t/10)+" m<sup>2</sup>":Math.round(100*t)/100+" m<sup>2</sup>"},t.prototype.onShowMeasureAreaClick=function(e){Qi.trace("call MeasureArea::onShowMeasureAreaClick()",e),this.onShowMeasureClick(e,"Polygon")},t}(mn.a),es=$i;window.ol&&window.ol.control&&(window.ol.control.MeasureArea=$i);var ts={_addUID:function(e){return this._uid?e+"-"+this._uid:e},_createMainContainerElement:function(){var e=document.createElement("div");return e.id=this._addUID("GPmeasureAzimuth"),e.className="GPwidget",e},_createShowMeasureAzimuthElement:function(){var e=document.createElement("input");return e.id=this._addUID("GPshowMeasureAzimuth"),e.type="checkbox",e},_createShowMeasureAzimuthPictoElement:function(){var e=this,t=document.createElement("label");t.id=this._addUID("GPshowMeasureAzimuthPicto"),t.className="GPshowAdvancedToolPicto",t.htmlFor=this._addUID("GPshowMeasureAzimuth"),t.title="Mesurer un azimut",t.addEventListener?t.addEventListener("click",(function(t){e.onShowMeasureAzimuthClick(t)})):t.attachEvent&&t.attachEvent("onclick",(function(t){e.onShowMeasureAzimuthClick(t)}));var o=document.createElement("span");return o.id=this._addUID("GPshowMeasureAzimuthOpen"),o.className="GPshowAdvancedToolOpen",t.appendChild(o),t}},os=Mo.a.getLogger("measureazimut"),ns=function(e){function t(o){if(o=o||{},!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.CLASSNAME="MeasureAzimuth",this._uid=yn.generate(),this._showContainer=null,this._pictoContainer=null,this._initialize(o);var n=o.element?o.element:this._initializeContainer();e.call(this,{element:n,target:o.target,render:o.render})}return e&&(t.__proto__=e),t.prototype=Object.create(e.prototype,{}),Wo.assign(t.prototype,Ui),Wo.assign(t.prototype,ts),t.prototype.constructor=t,t.prototype.setMap=function(t){os.trace("setMap()");var o=this.CLASSNAME;t?this.options.target||Ni.add(t,this):this.clean(),this.tools[o].push({instance:t?this:null,active:!1,map:t?t.getTargetElement().id:null});var n="undefined"!=typeof window?window:"undefined"!=typeof self?self:null;n&&(n.gpShareMeasures||(n.gpShareMeasures={}),n.gpShareMeasures[o]=this.tools[o]),e.prototype.setMap.call(this,t)},t.prototype.setGeodesic=function(e){this.options.geodesic=void 0!==e&&e},t.prototype.isGeodesic=function(){return this.options.geodesic},t.prototype._initialize=function(e){os.trace("call MeasureAzimuth::_initialize() : ",e),this.options={},this.options.geodesic=void 0!==e.geodesic&&e.geodesic,this.options.target=void 0!==e.target?e.target:null,this.options.render=void 0!==e.render?e.render:null,this.options.layerDescription=void 0!==e.layerDescription?e.layerDescription:{title:"Mesures d'azimuth",description:"Mes mesures"},this.createStylingMeasureInteraction(e.styles)},t.prototype._initializeContainer=function(){os.trace("call MeasureAzimuth::_initializeContainer() : ",this._uid);var e=this._createMainContainerElement(),t=this._showContainer=this._createShowMeasureAzimuthElement();e.appendChild(t),this._showContainer.checked=!1;var o=this._pictoContainer=this._createShowMeasureAzimuthPictoElement();return e.appendChild(o),e},t.prototype.addMeasureEvents=function(){var e=this;os.trace("call MeasureAzimuth::addMeasureEvents()");var t=this.getMap();t.on("singleclick",(function(t){return e.onPointerMoveAzimutHandler(t)})),t.on("pointermove",(function(t){return e.onPointerMoveAzimutHandler(t)}))},t.prototype.removeMeasureEvents=function(){var e=this;os.trace("call MeasureAzimuth::removeMeasureEvents()");var t=this.getMap();t.un("singleclick",(function(t){return e.onPointerMoveAzimutHandler(t)})),t.un("pointermove",(function(t){return e.onPointerMoveAzimutHandler(t)}))},t.prototype.format=function(e){os.trace("call MeasureAzimuth::format()");var t=this.getMap().getView().getProjection(),o=Object(a.E)(e.getFirstCoordinate(),t,"EPSG:4326"),n=Object(a.E)(e.getLastCoordinate(),t,"EPSG:4326");if(!this.options.geodesic){var r=Object(pr.c)(o,n);if(os.trace("measure between 2 points with geodesic method",r),r>500){var i=500/r;os.trace("%",i),n=Object(a.E)(e.getCoordinateAt(i),t,"EPSG:4326")}}var s=Math.PI/180,l=180/Math.PI,c=s*o[0],u=s*n[0],d=s*o[1],h=s*n[1],p=Math.sin(u-c)*Math.cos(h),f=Math.cos(d)*Math.sin(h)-Math.sin(d)*Math.cos(h)*Math.cos(u-c),m=l*Math.atan2(p,f);return os.trace("azimut",m),m<0&&(m+=360),Math.round(100*m)/100+" Â°"},t.prototype.onShowMeasureAzimuthClick=function(e){os.trace("call MeasureAzimuth::onShowMeasureAzimuthClick()",e),this.onShowMeasureClick(e,"LineString")},t.prototype.onPointerMoveAzimutHandler=function(e){(this.onPointerMoveHandler(e),this.sketch)&&(this.sketch.getGeometry().getCoordinates().length>2&&this.measureDraw.finishDrawing())},t}(mn.a),rs=ns;function is(e){return(is="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.ol&&window.ol.control&&(window.ol.control.MeasureAzimuth=ns),function(){var e=document.getElementsByTagName("script"),t=e[e.length-1].getAttribute("data-key");if(t){var o=t.split(/;|,|\|/);if(o.length>1){for(var n=[],r=0;r<o.length;r++)n.push(o[r]);t=n}}var i=e[e.length-1].getAttribute("data-url"),s=e[e.length-1].getAttribute("data-timeout");if(t||i){var a={apiKey:t,onSuccess:function(){},onFailure:function(e){throw new Error("Configuration load failed : "+e.message)}};i&&(a.serverUrl=i,a.callbackSuffix=""),s&&(a.timeOut=s),Ao.Config||Ao.Services.getConfig(a)}}(),Qn.loadByDefault(),Qn.overload();var ss=Ao.Services,as=Ao.Error,ls=Ao.Helper,cs=Ao.Protocols,us=Ao.servicesDate,ds=Ao.servicesVersion,hs=l.olExtVersion||l.version,ps=l.date;function fs(e,t){return function e(t,o){for(var n in t)t.hasOwnProperty(n)&&(o.hasOwnProperty(n)?"object"===is(t[n])&&e(t[n],o[n]):o[n]=t[n])}(e,t)}var ms={};ms.gp={},ms.gp.GfiUtils=Go,ms.includeProjections=Qn.load,ms.style=ms.style||{},ms.style.Editor=Oi,ms.style.editor=ms.style.editor||{},ms.style.editor.Style=ti,ms.style.editor.Filter=ai,ms.style.editor.Layer=mi,ms.style.editor.Legend=di,ms.style.editor.Group=vi,ms.style.editor.Themes=ri,ms.format=ms.format||{},ms.format.KMLExtended=Xo,ms.source=ms.source||{},ms.source.WMTSExtended=Jo,ms.source.GeoportalWMTS=nn,ms.source.GeoportalWMS=an,ms.layer=ms.layer||{},ms.layer.GeoportalWMTS=un,ms.layer.GeoportalWMS=pn,ms.control=ms.control||{},ms.control.LayerSwitcher=Sn,ms.control.GeoportalAttribution=Ii,ms.control.GetFeatureInfo=Tn,ms.control.SearchEngine=Fn,ms.control.Route=Mr,ms.control.Isocurve=Gr,ms.control.GeoportalMousePosition=rr,ms.control.Drawing=_r,ms.control.ReverseGeocode=Br,ms.control.LayerImport=Pi,ms.control.MeasureLength=Ki,ms.control.MeasureArea=es,ms.control.MeasureAzimuth=rs,ms.control.DefaultMarkers=An,ms.control.ElevationPath=Hi,ms.control.LocationSelector=xr,window.ol&&(fs(ms,window.ol),fs(window.ol,ms));function gs(e){if(!(this instanceof gs))throw new TypeError("IMap constructor cannot be called as a function.");for(var t in this._opts=e,this.logger=i.getLogger("IMap"),this.logger.trace("[Constructeur IMap (options)]"),this._layers=[],this._layersRemoved=[],this._controls=[],this._events={},this._markers=[],this._isConfLoaded=!1,this._opts.mapOptions&&(this.apiKey=this._opts.mapOptions.apiKey),this.div=this._opts.div,this.mapOptions=Object.create(gs.DEFAULTOPTIONS),this._opts.mapOptions)this._opts.mapOptions.hasOwnProperty(t)&&(this.mapOptions[t]=this._opts.mapOptions[t],this.logger.trace("option "+t+" rÃ©cupÃ©rÃ©e"));this._initMap()}gs.DEFAULTOPTIONS={projection:"EPSG:3857",center:{x:0,y:0,projection:"EPSG:4326",geolocate:!1,location:null,locationType:["StreetAddress","PositionOfInterest"]},azimuth:0,enableRotation:!0,tilt:90,zoom:10,minZoom:0,maxZoom:21,reloadConfig:!0,controlsOptions:{draggable:!0,keyboard:!0,selectable:!1},mapEventsOptions:{},noProxyDomains:["wxs.ign.fr"]},gs.DEFAULTLAYER=function(e){return{"ORTHOIMAGERY.ORTHOPHOTOS::GEOPORTAIL:OGC:WMTS":{minZoom:0,maxZoom:19,queryable:!0,opacity:1,format:"wmts",position:0,title:"Photographies aÃ©riennes",description:"Photographies aÃ©riennes",url:"https://wxs.ign.fr/"+e+"/geoportail/wmts",layer:"ORTHOIMAGERY.ORTHOPHOTOS",projection:"EPSG:3857",tileMatrixSet:"PM",topLeftCorner:{x:-20037508,y:20037508},resolutions:[156543.033928041,78271.51696402048,39135.758482010235,19567.87924100512,9783.93962050256,4891.96981025128,2445.98490512564,1222.99245256282,611.49622628141,305.7481131407048,152.8740565703525,76.43702828517624,38.21851414258813,19.10925707129406,9.554628535647032,4.777314267823516,2.388657133911758,1.194328566955879,.5971642834779395,.2985821417389697,.1492910708694849,.0746455354347424],matrixIds:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21"],styleName:"normal",outputFormat:"image/jpeg",originators:[{name:"IGN",attribution:"Institut National de l'Information GÃ©ographique et ForestiÃ¨re",url:"https://www.ign.fr"}],quicklookUrl:"https://wxs.ign.fr/static/pictures/ign_ortho.jpg",metadata:[{url:""},{format:"xml",url:"https://wxs.ign.fr/geoportail/csw?service=CSW&version=2.0.2&request=GetRecordById&Id=IGNF_BDORTHOr_2-0.xml"},{format:"xml",url:"https://wxs.ign.fr/geoportail/csw?service=CSW&version=2.0.2&request=GetRecordById&Id=SPOT5.xml"},{format:"xml",url:"https://wxs.ign.fr/geoportail/csw?service=CSW&version=2.0.2&request=GetRecordById&Id=NCL-DITTT-ORTHO.xml"},{format:"xml",url:"https://wxs.ign.fr/geoportail/csw?service=CSW&version=2.0.2&request=GetRecordById&Id=IGNF_BDORTHOr_2-0.xml"},{format:"xml",url:"https://wxs.ign.fr/geoportail/csw?service=CSW&version=2.0.2&request=GetRecordById&Id=IGNF_ORTHOHR_1-0.xml"}],legends:[{format:"application/pdf",url:"https://www.geoportail.gouv.fr/depot/fiches/photographiesaeriennes/geoportail_dates_des_prises_de_vues_aeriennes.pdf",minScaleDenominator:null}]}}},gs.prototype={constructor:gs,_afterInitMap:function(){var e=this.mapOptions.mapEventsOptions;if(e)for(var t in e)this.listen(t,e[t],this);this.listen("layerChanged",this._onLayerChanged,this),"2d"===this.getViewMode()&&this.setXYCenter(this.mapOptions.center);var o="undefined"!=typeof window?window:{},n=o.Gp?o.Gp.Config:void 0,r=!1;this.apiKey&&!this.mapOptions.reloadConfig?r=!1:this.apiKey||this.mapOptions.configUrl||this.mapOptions.autoconfUrl?r=this.mapOptions.reloadConfig||!n||!n.isConfLoaded(Array.isArray(this.apiKey)?this.apiKey[0]:this.apiKey):n&&(this.apiKey=Object.keys(n.generalOptions.apiKeys));var i=this;if(r){var s=this.mapOptions.callbackSuffix;(this.mapOptions.configUrl||this.mapOptions.autoconfUrl)&&(s=s||""),ss.getConfig({apiKey:this.apiKey,serverUrl:this.mapOptions.configUrl||this.mapOptions.autoconfUrl,callbackSuffix:s,onSuccess:function(e){i._afterGetConfig(e)},onFailure:function(e){this.logger.error(e),i._afterGetConfig(null)}})}else setTimeout((function(){i._afterGetConfig(n)}))},_afterGetConfig:function(e){this.logger.trace("[IMap] : Autoconfiguration chargÃ©e ... ou pas"),this._isConfLoaded=!(void 0===e);var t=gs.CustomEvent("configured",{detail:{config:e}});if(this.div.dispatchEvent(t),this.mapOptions.hasOwnProperty("layersOptions")||(this._isConfLoaded?this.mapOptions.layersOptions={"ORTHOIMAGERY.ORTHOPHOTOS":{}}:this.mapOptions.layersOptions=gs.DEFAULTLAYER(this.apiKey)),this._isConfLoaded&&(!this.mapOptions.center.hasOwnProperty("x")||0===this.mapOptions.center.x)&&(!this.mapOptions.center.hasOwnProperty("y")||0===this.mapOptions.center.y)){var o,n=e.getTerritories();for(var r in n)n[r].isDefault&&(o=n[r].geoCenter);this.logger.trace("[IMap] : _afterGetConfig : setting default map center to ("+o.lon+", "+o.lat+")"),this.mapOptions.center.x=o.lon,this.mapOptions.center.y=o.lat,this.mapOptions.center.projection="EPSG:4326"}(this.mapOptions.center.location||this.mapOptions.center.geolocate)&&this.setCenter(this.mapOptions.center),this.mapOptions.hasOwnProperty("markersOptions")&&this.setMarkersOptions(this.mapOptions.markersOptions),this.addLayers(this.mapOptions.layersOptions),this.addControls(this._getDefaultControls()),this.addControls(this.mapOptions.controlsOptions);var i=gs.CustomEvent("mapLoaded",{detail:{map:this}});this.div.dispatchEvent(i)},_initMap:function(){this.logger.trace("[IMap] : _initMap")},setProxy:function(e){return Io.proxifyUrl(e,this.mapOptions)},getViewMode:function(){return this.mapOptions.viewMode},getLibMap:function(){return{}},destroyMap:function(){}},gs.DEFAULT_VECTORLAYERS_STYLES={markerSrc:"data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAARDSURBVFiF3ZndaxxVGMZ/Z/YjX00Nadpo1qrFBgu56D9QbAtiLoRC7ywSNK1NURRREBKRFlSwFBW0gnSrJXY1CmISgyjFiyYSFC9ajE3MmpjdjWlMUtNos9lN9mteLzbRuCbZmTMTBB+Yi51znvd5n3nPnjnnjBIR/i/wuh4xpCpI0ojiENAA1AE1wCzwKzCE0EM5l2iShJvSyrXKnFVb8dOK4hmg3AIjifAmaU7ztMy7kYI7Zs6rQwjvka+AXcyiOMZx6XGahuE0AEHVitCFnhGAGoQugqrVaSrOKpNP4FWnSaxCGy1yWpesbyY/tLpwo7p/w0RxWHfI6Zk5q7ZSwhj6Q2sjzJLiXp1JQe+p+mllc4wA1CzHtw37lQmpCha5gbXpVxdJythh9z1kvzJJGrFixPBmOXixl+Z4mONmguZ4mIMXezG8WQsq5cs6tmDfTP7NXiSqN0vTzBD1TQfwbdmDUhX4tuyhvukATTNDlgxZ0SmUtUsgv0TZGPsv9FNSvXfNtpLqvey/0O+KTgF0zNQV7XHP4dsdtVvVKYCOmeqiPbwVOx21W9UpgI6ZWNEe2cSEo3arOgWwb0YYLp5G17Sjdqs6BdCZzYqL9B3dR2puYM221NwAfUf3uaJTAB0zaye5GmbWS6i2gdFQL5mFMCIJMgthRkO9hGobMLPFN4VWdAoptlcAQeUDRoG77YrZwDhQT4tk7JDsV6ZFMggv2+bZwyt2jYDuQnOa94GIFrc4IkzRrkPUM3NKsijatLjF0copsbJ++xec7TTPqw6EI/oB/glT+PC+13Y/aSQNv/Is+tNer09lMn7DMHwAYppp8fvTIpISkVQsFrslqww4M9OuqkgzANzl1MhCyrjZGAycm573pK1yFCyi5FoWvo/FYlPOT2fOqftRXMbB9lkEs+3zbe2f/FD5i3YMj2p3vn8/IV8DZ5yE+Gqkot+JEQCPada5dRhxEriiQ5ya90w+272916F+KpnJDLhjpkUy5HgESNqhZU2Vfr5ne+dSFtOBeso06J6cnEy6d0z0hPwEPGeH8sGVykvfjpfe1NZUci2+mHg7Go2G8z/d/goQVJ9B8S1veMYffujduo/thl+ZwUzDuBqJRGZWt7n/FcDH46lFNVLilar1uiTTxsJTnTssH/QpJVlMNQa5wbGJiWERya3Vz30zzfLb3OveY3dU5j5dp4e80Xdbd3TOu/H/yyAtpjnqgeGS8crRQRks+v5xf5gtY/KM/6NAVebhwvv90bLvHu2o/XId2pJSMmIaxo/RaHRMxN6yZtPM0K5K/7hl/FxVZgZWbs0mPDceeKcuGE95/kpSKUmaImHDNIfHrl+PiIj2zOb+MFvBY7IUOVl2ZG9g6bJH4ckJuRe/2NYZT3myKIkrGM4pNRyLjY+LW09URDb1+uaF0pfm3zJ+7zhRGdq1c9eDuwOBOzdLa/OG2X+APwE8DU64Y/5gfAAAAABJRU5ErkJggg==",markerXAnchor:25.5,markerYAnchor:38,pointColor:"#002A50",pointOpacity:.9,pointRadius:6,strokeColor:"#002A50",strokeWidth:4,strokeOpacity:.8,polyFillColor:"#00B798",polyFillOpacity:.5,textStrokeColor:"#000000",textColor:"#FFFFFF"},gs.WMTSDEFAULTS={"EPSG:3857":{resolutions:[156543.033928041,78271.51696402048,39135.758482010235,19567.87924100512,9783.93962050256,4891.96981025128,2445.98490512564,1222.99245256282,611.49622628141,305.7481131407048,152.8740565703525,76.43702828517624,38.21851414258813,19.10925707129406,9.554628535647032,4.777314267823516,2.388657133911758,1.194328566955879,.5971642834779395,.2985821417389697,.1492910708694849,.0746455354347424],scales:{0:559082264,1:279541132,2:139770566,3:69885283,4:34942642,5:17471321,6:8735660,7:4367830,8:2183915,9:1091958,10:545979,11:272989,12:136495,13:68247,14:34124,15:17062,16:8531,17:4265,18:2133,19:1066,20:533,21:267},threshold:1e-7,topLeftCorner:{x:-20037508,y:20037508}},"EPSG:4326":{resolutions:[1.40625,.703125,.3515625,.17578125,.087890625,.0439453125,.02197265625,.010986328125,.0054931640625,.00274658203125,.001373291015625,.0006866455078125,.00034332275390625,.000171661376953126,858306884765628e-19,429153442382813e-19,214576721191407e-19,107288360595703e-19,536441802978517e-20,268220901489259e-20,13411045074463e-19,6.70552253723145e-7,3.3527612686157e-7],threshold:1e-10,topLeftCorner:{x:90,y:-180}},"EPSG:2154":{resolutions:[104579.22454989408,52277.53235379051,26135.487078595408,13066.891381800004,6533.228604113456,3266.5595244626675,1633.2660045974187,816.6295549860224,408.31391467683596,204.15674151090204,102.07831678324082,51.0391448966112,25.519569074269395,12.759783693647506,6.379891635966491,3.18994576530532,1.5949728694977277,.7974864315474559,.398743214900604,.19937160727567999,.099685803696052,.049842901818919996],threshold:1e-8,topLeftCorner:{x:0,y:12e6}}},gs.prototype.getLayersOptions=function(e){(!e||Array.isArray(e)&&0===e.length)&&(e=[],this._layers.forEach((function(t){e.push(t.id)}),this));var t={};return this._layers.sort((function(e,t){return e.options.position-t.options.position})),Array.isArray(e)||(e=[e]),this._layers.forEach((function(o){e.indexOf(o.id)<0||(t[o.id]=o.options)}),this),t},gs.prototype.addLayers=function(e){if(e){this.listen("layerChanged",this._onLayerChanged,this);var t=null;for(t in e)if(this._getLayersObj([t]).length>0)this.logger.info("Layer ["+t+"] already added to map.");else{this.logger.trace("[IMap] addLayers : adding : ["+t+"]");var o=e[t],n={};n[t]=o;var r="undefined"!=typeof window?window:{},i=r.Gp?r.Gp.Config:void 0;if(!o.hasOwnProperty("url")&&i){var s=null;o.format&&(s=o.format);var a=null;switch(null!=s&&"WMTS"!==s.toUpperCase()||(a=i.getLayerConf(t+"$GEOPORTAIL:OGC:WMTS"))&&(s="WMTS"),null!=s&&"WMS"!==s.toUpperCase()||((a=i.getLayerConf(t+"$GEOPORTAIL:OGC:WMS"))||(a=i.getLayerConf(t+"$INSPIRE:OGC:WMS")))&&(s="WMS"),null!=s&&"MAPBOX"!==s.toUpperCase()||(a=i.getLayerConf(t+"$GEOPORTAIL:GPP:TMS"))&&(s="MAPBOX"),a&&(this.logger.trace("[IMap] addLayers : ["+t+"] is a geoportalLayer. Adding inner properties."),n[t].format=s,n[t].originators=n[t].originators||a.originators,n[t]=this._layerOptions2layerConf(a,n[t])),s){case"MAPBOX":case"WMTS":case"WMS":this._addGeoportalLayer(n,a);continue;default:this.logger.trace("[IMap] addLayers : ["+t+"] is not a Geoportal Layer")}}if(o.hasOwnProperty("format")&&"string"==typeof o.format)if(o.hasOwnProperty("url")&&"string"==typeof o.url)if(this._checkLayerParams(o))switch(o.format.toUpperCase()){case"GEORSS":break;case"KML":case"GPX":case"GEOJSON":case"WFS":case"DRAWING":this._addVectorLayer(n);break;case"MAPBOX":this._addMapBoxLayer(n);break;case"WMS":case"WMTS":case"OSM":this._addRasterLayer(n);break;default:this.logger.info("Impossible to add layer ["+t+"] : unhandled format ["+o.format+"]")}else this.logger.info("Impossible to add layer ["+t+"] : unsufficient or inadapted parameters given");else this.logger.info("Impossible to add layer ["+t+"] : no url given");else this.logger.info("Impossible to add layer ["+t+"] : no format given")}this._resetLayerChangedEvent()}else this.logger.trace("[IMap] addLayers : no layers to add")},gs.prototype.removeLayers=function(e){return!e||Array.isArray(e)&&0===e.length?(this.logger.info("removeLayers : nothing to remove !"),!1):(Array.isArray(e)||(e=[e]),!0)},gs.prototype.modifyLayers=function(e){return e?0!==Object.keys(e).length||(this.logger.info("modifyLayers : wrong format for layersOptions !"),!1):(this.logger.info("modifyLayers : nothing to modify !"),!1)},gs.prototype._getWMTSDefaultOpts=function(){this.logger.trace("[IMap] : _getWMTSDefaultOpts");for(var e={version:"1.0.0",outputFormat:"image/jpeg"},t=[],o=0;o<=20;o++)t.push(""+o);e.matrixIds=t;var n=null,r=null,i=this.getProjection();return"string"!=typeof i||["EPSG:3857"].indexOf(i.toUpperCase())>=0?(n=gs.WMTSDEFAULTS["EPSG:3857"].resolutions,r=gs.WMTSDEFAULTS["EPSG:3857"].topLeftCorner):["EPSG:4326","CRS:84"].indexOf(i.toUpperCase())>=0?(n=gs.WMTSDEFAULTS["EPSG:4326"].resolution7s,r=gs.WMTSDEFAULTS["EPSG:4326"].topLeftCorner):["EPSG:2154"].indexOf(i.toUpperCase())>=0&&(n=gs.WMTSDEFAULTS["EPSG:2154"].resolution7s,r=gs.WMTSDEFAULTS["EPSG:2154"].topLeftCorner),n&&(e.resolutions=n,e.topLeftCorner=r),e},gs.prototype._getLayersObj=function(e){var t=[];return this._layers.forEach((function(o,n,r){e.indexOf(o.id)<0?this.logger.trace("[IMap] _getLayersObj : "+o.id+" not found."):(this.logger.trace("[IMap] _getLayersObj : found obj for : "+o.id),t.push(o))}),this),t},gs.prototype._addMarkers=function(e){this.logger.trace("[IMap] _addMarkers : generic function")},gs.prototype._removeMarkers=function(){this.logger.trace("[IMap] _removeMarkers : generic function")},gs.prototype.getMarkersOptions=function(){this.logger.trace("[IMap] getMarkersOptions : generic function")},gs.prototype.setMarkersOptions=function(e){this.logger.trace("[IMap] setMarkersOptions : generic function")},gs.prototype._checkLayerParams=function(e){var t=[];switch(e.format.toUpperCase()){case"WMS":e.hasOwnProperty("layers")&&e.layers instanceof Array||t.push("layers");break;case"WMTS":e.hasOwnProperty("layer")&&"string"==typeof e.layer||t.push("layer"),e.hasOwnProperty("tileMatrixSet")&&"string"==typeof e.tileMatrixSet||t.push("tileMatrixSet"),e.hasOwnProperty("styleName")&&"string"==typeof e.styleName||t.push("styleName");break;case"WFS":e.hasOwnProperty("typeNames")&&"string"==typeof e.typeNames||t.push("typeNames")}return!(t.length>0)||(this.logger.info("Impossible to add "+e.format+" layer : missing mandatory parameter(s) : "+t.toString()),!1)},gs.prototype._addRasterLayer=function(e){},gs.prototype._addVectorLayer=function(e){},gs.prototype._addMapBoxLayer=function(e){},gs.prototype._addGeoportalLayer=function(e,t){},gs.prototype._applyCommonLayerParams=function(e){return{}},gs.prototype._getLayerIndexByLayerOpts=function(e){if(!e)return-1;for(var t=0;t<this._layers.length;t++){var o=this._layers[t];if(e.hasOwnProperty(o.id))return t}return-1},gs.prototype._getLayerIndexByLayerId=function(e){for(var t=0;t<this._layers.length;t++){if(e===this._layers[t].id)return t}return-1},gs.prototype._filterEmptyMetadata=function(e){if(!e||!Array.isArray(e))return e;for(var t=[],o=0;o<e.length;o++)e[o].url&&e[o].url.trim().length>0&&t.push(e[o]);return t},gs.prototype._layerOptions2layerConf=function(e,t){var o=t||{};return o.title=o.title||e.title,o.description=o.description||e.description,o.quicklookUrl=o.quicklookUrl||e.quicklookUrl,o.legends=o.legends||e.legends,o.metadata=o.metadata||e.metadata,o.metadata=this._filterEmptyMetadata(o.metadata),o},gs.prototype._setSelectedMapboxStyle=function(e,t){for(var o=0;o<e.length;o++)e[o].selected=!1,o===t&&(e[o].selected=!0);return e},gs.prototype._changeLayerColor=function(e,t){},gs.DEFAULT_AUTOPAN_OPTIONS={autoPan:!0,duration:250,margin:5},gs.DEFAULT_MEAS_STYLES={pointer:{strokeColor:"#002A50",strokeWidth:2,radius:5,fillColor:"rgba(255, 155, 0, 0.7)"},start:{strokeColor:"#002A50",strokeWidth:2,strokeLineDash:"[10, 10]",fillColor:"rgba(0, 183, 152, 0.2)"},finish:{strokeColor:"#002A50",strokeWidth:3,fillColor:"rgba(0, 183, 152, 0.3)"}},gs.prototype._hexToRgba=function(e,t){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,o,n){return t+t+o+o+n+n}));var o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return(o=o?{r:parseInt(o[1],16),g:parseInt(o[2],16),b:parseInt(o[3],16)}:null)?"rgba("+o.r+", "+o.g+", "+o.b+", "+t+")":null},gs.prototype.getControlsOptions=function(e){(!e||Array.isArray(e)&&0===e.length)&&(e=[],this._controls.forEach((function(t){e.push(t.id)}),this));var t={};return Array.isArray(e)||(e=[e]),this._controls.forEach((function(o){e.indexOf(o.id)<0||(t[o.id]=o.options)}),this),t},gs.prototype.getLibMapControl=function(e){return null},gs.prototype.addControls=function(e){this.logger.trace("[IMap] addControls");var t=null;for(t in e){var o=null,n=e[t],r=this.getLibMapControl(t);if(!(this._findRegisteredControl(t)>=0||r)||(this.logger.info("[IMap] addControls : ["+t+"] dÃ©jÃ  prÃ©sent."),this.removeControls([t]),null!=n)){switch(this.logger.trace("[IMap] addControls : adding : ["+t+"]"),t.toLowerCase()){case"draggable":o=this.setDraggable(n);break;case"keyboard":o=this.setKeyboard(n);break;case"selectable":o=this.setSelectable(n);break;case"zoom":o=this.addZoomControl(n);break;case"zoombox":o=this._addZoomBoxControl(n);break;case"overview":o=this.addOverviewControl(n);break;case"orientation":o=this.addOrientationControl(n);break;case"graphicscale":o=this.addGraphicScaleControl(n);break;case"boostrelief":o=this.addBoostReliefControl(n);break;case"mouseposition":o=this.addMousePositionControl(n);break;case"route":o=this.addRouteControl(n);break;case"isocurve":o=this.addIsocurveControl(n);break;case"graticule":o=this.addGraticuleControl(n);break;case"layerswitcher":o=this.addLayerSwitcherControl(n);break;case"layerimport":o=this.addLayerImportControl(n);break;case"length":o=this.addLengthControl(n);break;case"area":o=this.addAreaControl(n);break;case"azimuth":o=this.addAzimuthControl(n);break;case"elevationpath":o=this.addElevationPathControl(n);break;case"search":o=this.addSearchControl(n);break;case"reversesearch":o=this.addReverseSearchControl(n);break;case"drawing":o=this.addDrawingControl(n);break;case"attributions":o=this.addAttributionsControl(n);break;case"camera":o=this.addCameraControl(n);break;case"getfeatureinfo":o=this.addGetFeatureInfoControl(n);break;default:this.logger.info("Controle "+t+"inconnu.");continue}this.logger.trace("[IMap] addControls : registering : ["+t+"]"),this._controls.push({obj:o||"2D-only-control",id:t.toLowerCase(),options:n})}}},gs.prototype.removeControls=function(e){},gs.prototype.modifyControls=function(e){this.logger.trace("[IMap] : modifyControls ... ");var t=Object.keys(e);if(0!==t.length){for(var o=null,n=0;n<t.length;n++){o=t[n];var r=this.getLibMapControl(o),i=this._findRegisteredControl(o);if(i>=0){if(!r){this.logger.trace("[IMap] : modifyControls : removing control : "+o),this.removeControls([o]),delete e[o];continue}var s=this._controls[i].options;for(var a in e[o])s[a]=e[o][a];e[o]=s}else if(!r){delete e[o];continue}}this.addControls(e)}else this.logger.info("No control to modify.")},gs.prototype.addZoomControl=function(e){},gs.prototype.addZoomBoxControl=function(e){},gs.prototype.addOverviewControl=function(e){},gs.prototype.addOrientationControl=function(e){},gs.prototype.addGraphicScaleControl=function(e){},gs.prototype.addMousePositionControl=function(e){},gs.prototype.addRouteControl=function(e){},gs.prototype.addIsocurveControl=function(e){},gs.prototype.addGraticuleControl=function(e){},gs.prototype.addLayerSwitcherControl=function(e){},gs.prototype.addLayerImportControl=function(e){},gs.prototype.addLengthControl=function(e){},gs.prototype.addAreaControl=function(e){},gs.prototype.addAzimuthControl=function(e){},gs.prototype.addElevationPathControl=function(e){},gs.prototype.addSearchControl=function(e){},gs.prototype.addReverseSearchControl=function(e){},gs.prototype.addDrawingControl=function(e){},gs.prototype.addAttributionsControl=function(e){},gs.prototype.addBoostReliefControl=function(e){},gs.prototype.addCameraControl=function(e){},gs.prototype.addGetFeatureInfoControl=function(e){},gs.prototype.getLSLayerContainerDivId=function(e){return null},gs.prototype._getDefaultControls=function(){return{draggable:!0,keyboard:!0,selectable:!1,zoom:{},attributions:{maximised:!1}}},gs.prototype._findRegisteredControl=function(e){if(!e||"string"!=typeof e)return this.logger.warn("[IMap] _findRegisteredControl : controlId is not a straight string"),-1;for(var t=0;t<this._controls.length;t++)if(this._controls[t].id.toLowerCase()===e.toLowerCase())return this.logger.trace("[IMap] _findRegisteredControl : found control "+e+" at index : "+t),t;return this.logger.trace("[IMap] _findRegisteredControl : control "+e+" not found."),-1},gs.prototype._addLayerConfToLayerSwitcher=function(e,t){},gs.CustomEvent=function(e,t){if("function"==typeof CustomEvent)return t.bubbles=!1,t.cancelable=!0,new CustomEvent(e,t);var o=document.createEvent("CustomEvent");return o.initCustomEvent(e,!1,!0,t.detail),o},gs.prototype.setDraggable=function(e){},gs.prototype.setKeyboard=function(e){},gs.prototype.setSelectable=function(e){},gs.prototype.listen=function(e,t,o){if("function"!=typeof t)return this.logger.error("no action provided for the event : "+e),!1;t.name&&"anomynous"!==t.name||this.logger.warn("the action provided for the event : "+e+" should be named so that it can be remove later"),o=o||this;switch(e){case"mapFailure":break;case"mapLoaded":case"geolocated":case"located":case"configured":this.logger.trace("[IMap] listening event : ["+e+"]");var n=function(e){t.call(o,e.detail)},r=this._registerEvent(n,e,t,o);r.eventOrigin=this.div,r.eventType=e,r.eventOrigin.addEventListener(r.eventType,n,this);break;case"centerChanged":case"zoomChanged":case"azimuthChanged":case"tiltChanged":case"layerChanged":break;case"projectionChanged":case"controlChanged":break;default:return this.logger.info("unhandled event : "+e),!1}return!0},gs.prototype.forget=function(e,t){if("function"!=typeof t)return this.logger.info("no action provided for event : "+e),!1;switch(e){case"mapLoaded":case"geolocated":case"located":case"configured":case"pickFeature":var o=this._events[e];if(!o)return this.logger.info("nothing to forget for  : "+e),!1;for(var n=null,r=o.length-1;r>=0;r--)if(o[r].action===t){if(!o[r].eventOrigin)continue;n=o[r].key;var i=o[r].eventOrigin,s=o[r].eventType;if(!n)return this.logger.info("action to forget not found for  : "+e),!1;o.splice(r,1),this.logger.trace("[IT]  : forgetting  : "+e+" ("+n+")"),i.removeEventListener(s,n)}if(!n)return this.logger.info("action to forget not found for  : "+e),!1;break;case"mapFailure":case"centerChanged":case"zoomChanged":case"azimuthChanged":case"tiltChanged":case"projectionChanged":case"layerChanged":case"controlChanged":break;default:return this.logger.info("unhandled event : "+e),!1}return!0},gs.prototype.forgetAllListeners=function(){for(var e in this._events)for(;this._events[e].length>0;)this.forget(e,this._events[e][0].action)},gs.prototype._onLayerChanged=function(e){var t=null,o=-1,n=null;if(e.hasOwnProperty("layerAdded"))t=e.layerAdded,o=this._getLayerIndexByLayerOpts(t),this.logger.trace("[IMap] _onLayerChanged : layerAdded : "+o),o>=0&&o<this._layers.length?(n=this._layers[o].id,this._layers[o].options.position=e.position,this.logger.trace("[IMap] _onLayerChanged : setting position value to "+e.position+" for layer : "+n)):this.logger.warn("[IMap] _onLayerChanged : layerOpts ("+Object.keys(t)[0]+") not found for layerAdded Event");else if(e.hasOwnProperty("layerRemoved"))if(t=e.layerRemoved,(o=this._getLayerIndexByLayerOpts(t))>=0&&o<this._layers.length){this.logger.trace("[IMap] _onLayerChanged : removing layer at index "+o);var r={};r.id=this._layers[o].id,r.options=this._layers[o].options,r.obj=this._layers[o].obj,this._layersRemoved.push(r),this._layers.splice(o,1),this.logger.trace("[IMap] _onLayerChanged : #(layers) == "+this._layers.length)}else this.logger.warn("[IMap] _onLayerChanged : layerOpts not found for layerRemoved Event");else if(e.hasOwnProperty("layerChanged")){t=e.layerChanged;var i=this._getLayerIndexByLayerOpts(t);i>=0&&i<this._layers.length?(n=this._layers[i].id,"mapbox-status"===e.property?(this._layers[i].options.styles=this._setSelectedMapboxStyle(this._layers[i].options.styles,parseInt(e.newValue.theme.index)),this.logger.trace("[IMap] _onLayerChanged : setting selected style key to "+e.newValue.theme.key+" for layer : "+n)):(this._layers[i].options[e.property]=e.newValue,this.logger.trace("[IMap] _onLayerChanged : setting "+e.property+" value to "+e.newValue+" for layer : "+n))):this.logger.warn("[IMap] _onLayerChanged : layerOpts ("+Object.keys(t)[0]+") not found for layerChanged Event")}},gs.prototype._registerEvent=function(e,t,o,n){return this.logger.trace("[IMap] : listen registering : "+e),e&&(this._events.hasOwnProperty(t)||(this._events[t]=[]),this._events[t].push({action:o,key:e,context:n})),this._events[t][this._events[t].length-1]},gs.prototype._resetLayerChangedEvent=function(){if(this._events.hasOwnProperty("layerChanged")){var e=[],t=[];this._events.layerChanged.forEach((function(o){e.indexOf(o.action)<0&&(e.push(o.action),t.push(o.context))}),this);for(var o=0;o<e.length;++o)this.forget("layerChanged",e[o]),this.listen("layerChanged",e[o],t[o])}},gs.prototype._setSelectedMapboxStyle=function(e,t){for(var o=0;o<e.length;o++)e[o].selected=!1,o===t&&(e[o].selected=!0);return e},gs.prototype.centerGeocode=function(e){var t="undefined"!=typeof window?window:{},o=t.Gp?t.Gp.Config:void 0;if(o&&this.apiKey){for(var n=o.getLayersId(this.apiKey),r=e.locationType||["StreetAddress","PositionOfInterest"],i={type:[]};r.length>0;){var s=r.pop();n.indexOf(s+"$OGC:OPENLS;Geocode")>=0&&(this.logger.trace("[IMap] centerGeocode : found rights for "+s),i.type.push(s))}if(0!==i.type.length){var a=this;ss.geocode({apiKey:this.apiKey,location:e.location,filterOptions:i,onSuccess:function(e){a.logger.trace("[IMap] found center by geocoding ("+e.locations[0].position.x+", "+e.locations[0].position.y+")");var t={x:e.locations[0].position.y,y:e.locations[0].position.x,projection:"EPSG:4326"};a.setAutoCenter(t);var o=gs.CustomEvent("located",{detail:{position:t}});a.div.dispatchEvent(o)},onFailure:function(){this.logger.info("Erreur du service de gÃ©ocodage !!!")}})}else this.logger.info("no rights for geocoding services")}else this.logger.info("no rights for geocoding services")},gs.prototype.centerGeolocate=function(){var e=this;navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){e.logger.trace("[IMap] found center by geolocation ("+t.coords.longitude+", "+t.coords.latitude+")");var o={x:t.coords.longitude,y:t.coords.latitude,projection:"EPSG:4326"};e.setAutoCenter(o,17);var n=gs.CustomEvent("geolocated",{detail:{position:o}});e.div.dispatchEvent(n)}),(function(t){var o="Erreur lors de la gÃ©olocalisation : ";switch(t.code){case t.TIMEOUT:o+="Timeout !";break;case t.PERMISSION_DENIED:o+="Vous nâavez pas donnÃ© la permission";break;case t.POSITION_UNAVAILABLE:o+="La position nâa pu Ãªtre dÃ©terminÃ©e";break;case t.UNKNOWN_ERROR:o+="Erreur inconnue"}e.logger.info(o)})):this.logger.info("Geolocate impossible")},gs.prototype.getCenter=function(){return{}},gs.prototype.setCenter=function(e){this.logger.trace("[IMap] : setCenter"),e&&(e.hasOwnProperty("x")&&e.hasOwnProperty("y")&&(this.logger.trace("[IMap] : setCenter - x, y"),this.setXYCenter(e)),e.geolocate&&(this.logger.trace("[IMap] : setCenter - geolocate"),this.centerGeolocate()),e.location&&e.location.trim().length>0&&(this.logger.trace("[IMap] : setCenter - geocode"),this.centerGeocode(e)))},gs.prototype.setXYCenter=function(e){},gs.prototype.setAutoCenter=function(e){},gs.prototype.getViewExtent=function(){return{}},gs.prototype.getProjection=function(){return""},gs.prototype.setProjection=function(e){},gs.prototype.getTilt=function(){return 90},gs.prototype.setTilt=function(e){},gs.prototype.getAzimuth=function(){return 0},gs.prototype.setAzimuth=function(e){},gs.prototype.getZoom=function(){return 0},gs.prototype.setZoom=function(e){},gs.prototype.zoomIn=function(){},gs.prototype.zoomOut=function(){},gs.prototype.getResolution=function(){return 0},gs.prototype.setResolution=function(e){},gs.prototype._getZoomFromResolution=function(e,t){this.logger.trace("[IMap] : _getZoomFromResolution");for(var o=this.getProjection(),n=gs.WMTSDEFAULTS[t]||gs.WMTSDEFAULTS[o]||gs.WMTSDEFAULTS["EPSG:3857"],r=0,i=Math.abs(n.resolutions[0]-e),s=1;s<n.resolutions.length;s++){var a=Math.abs(n.resolutions[s]-e);if(a>=i)break;r=s,i=a}return r},gs.prototype._getResolutionFromZoomLevel=function(e,t){this.logger.trace("[IMap] : _getResolutionFromZoomLevel");var o=this.getProjection(),n=gs.WMTSDEFAULTS[t]||gs.WMTSDEFAULTS[o]||gs.WMTSDEFAULTS["EPSG:3857"],r=-1;return e>=0&&e<n.resolutions.length?r=n.resolutions[e]:this.logger.info("unhandled zoom level : "+e),r};var ys=o("./node_modules/ol/View.js"),vs=o("./node_modules/ol/Map.js");function _s(e){if(!(this instanceof _s))throw new TypeError("OlMap constructor cannot be called as a function.");this.CLASSNAME="OlMap",e.mapOptions||(e.mapOptions={}),e.mapOptions.viewMode||(e.mapOptions.viewMode="2d"),gs.apply(this,arguments),this.logger=i.getLogger("OlMap"),this.logger.trace("[Constructeur OlMap (options)]")}_s.prototype=Object.create(gs.prototype,{}),_s.prototype.constructor=_s,_s.prototype._initMap=function(){this.logger.trace("[OlMap] : _initMap");var e={enableRotation:this.mapOptions.enableRotation,zoom:this.mapOptions.zoom,minZoom:this.mapOptions.minZoom,maxZoom:this.mapOptions.maxZoom,projection:this.mapOptions.projection,rotation:this.mapOptions.azimuth*Math.PI/180};this.mapOptions.extent&&(e.extent=this.mapOptions.extent);var t=new ys.d(e);this.libMap=new vs.a({target:this.div,view:t}),this._afterInitMap()},_s.prototype.getLibMap=function(){return this.libMap},_s.prototype.destroyMap=function(){this.forgetAllListeners(),this.libMap.setTarget(null)};var bs=o("./node_modules/ol/layer/Image.js"),ws=o("./node_modules/ol/source/OSM.js"),Es=o("./node_modules/ol/format/GML2.js"),Os=o("./node_modules/ol/format/GML3.js"),Ss=o("./node_modules/ol/loadingstrategy.js");_s.LAYERPROPERTIES={visible:"visibility",opacity:"opacity",zIndex:"position",grayScaled:"grayScaled",minResolution:"maxZoom",maxResolution:"minZoom"},_s.LAYERPROPERTIES["mapbox-status"]="mapbox-status",_s.prototype.removeLayers=function(e){if(gs.prototype.removeLayers.apply(this,arguments)){var t=this._getLayersObj(e);t.forEach((function(e,t,o){this.libMap.removeLayer(e.obj)}),this)}},_s.prototype.modifyLayers=function(e){if(gs.prototype.modifyLayers.apply(this,arguments)){var t=Object.keys(e),o=this._getLayersObj(t);o.forEach((function(t){this.logger.trace("[modifyLayers] : modifying : ["+t.id+"]");var o=this._applyCommonLayerParams(e[t.id]);o.hasOwnProperty("opacity")&&(this.logger.trace("[modifyLayers] : setting opacity of : ["+t.id+"] to : "+o.opacity),t.obj.setOpacity(o.opacity)),o.hasOwnProperty("visible")&&(this.logger.trace("[modifyLayers] : setting visible of : ["+t.id+"] to : "+o.visible),t.obj.setVisible(o.visible)),o.hasOwnProperty("zIndex")&&(this.logger.trace("[modifyLayers] : setting zIndex of : ["+t.id+"] to : "+o.zIndex),t.obj.setZIndex(o.zIndex),0===o.zIndex&&(t.obj._forceNullzIndex=!0),0!==o.zIndex&&t.obj._forceNullzIndex&&(t.obj._forceNullzIndex=!1)),o.hasOwnProperty("minResolution")&&(this.logger.trace("[modifyLayers] : setting minResolution of : ["+t.id+"] to : "+o.minResolution),t.obj.setMinResolution(o.minResolution)),o.hasOwnProperty("maxResolution")&&(this.logger.trace("[modifyLayers] : setting maxResolution of : ["+t.id+"] to : "+o.maxResolution),t.obj.setMaxResolution(o.maxResolution)),o.hasOwnProperty("grayScaled")&&(this.logger.trace("[modifyLayers] : setting grayScaled of : ["+t.id+"] to : "+o.grayScaled),this._changeLayerColor(t.id,o.grayScaled))}),this)}},_s.prototype._addRasterLayer=function(e){var t=Object.keys(e)[0],o=e[t];if("elevation"!==o.type){var n=this._applyCommonLayerParams(o);switch(o.format.toUpperCase()){case"WMS":this.logger.trace("[_addRasterLayer] : ajout d'une couche WMS");var r={};r.LAYERS=o.layers.join(","),o.version&&(r.VERSION=o.version),o.stylesNames=o.stylesNames||o.stylesName,o.stylesNames&&(Array.isArray(o.stylesNames)?r.STYLES=o.stylesNames.join():this.logger.info("[_addRasterLayer] : 'stylesNames' parameter should be an array of style names (string)")),o.outputFormat&&(r.FORMAT=o.outputFormat),o.backgroundColor?(r.BGCOLOR=o.backgroundColor,r.TRANSPARENT="FALSE"):r.TRANSPARENT="TRUE";var i={url:o.url,params:r};o.hasOwnProperty("projection")&&(i.projection=o.projection),o.hasOwnProperty("tiled")&&!0===o.tiled?n.source=new h.a(i):n.source=new f.a(i);break;case"WMTS":this.logger.trace("[_addRasterLayer] : ajout d'une couche WMTS");var s=this._getWMTSDefaultOpts();for(var a in o)s[a]=o[a];var l={url:(o=s).url,layer:o.layer,matrixSet:o.tileMatrixSet,format:o.outputFormat,version:o.version,style:o.styleName,tileGrid:new Qo.b({origin:[o.topLeftCorner.x,o.topLeftCorner.y],resolutions:o.resolutions,matrixIds:o.matrixIds})};o.url.indexOf("{TileMatrixSet}")>0||o.url.indexOf("{TileRow}")>0||o.url.indexOf("{TileCol}")>0?l.requestEncoding="REST":l.requestEncoding="KVP",n.source=new ms.source.WMTSExtended(l);break;case"OSM":this.logger.trace("[_addRasterLayer] : ajout d'une couche OSM"),n.source=new ws.b({url:o.url})}if(n.hasOwnProperty("source")){o.hasOwnProperty("originators")&&(n.source._originators=o.originators);var c=null;c="WMS"!==o.format.toUpperCase()||o.hasOwnProperty("tiled")&&!0===o.tiled?new ln.a(n):new bs.a(n),n.hasOwnProperty("zIndex")&&0===n.zIndex&&(c._forceNullzIndex=!0);var u={id:t,obj:c,options:o};o.hasOwnProperty("grayScaled")&&o.grayScaled&&this._colorGrayscaleLayerSwitch(u,!0),this._layers.push(u),this.libMap.addLayer(u.obj),this._addLayerConfToLayerSwitcher(u.obj,o)}}else{var d={id:t,obj:"3D-only-layer",options:o};this._3Dlayers||(this._3Dlayers=[]),this._3Dlayers.push(d)}},_s.prototype._addVectorLayer=function(e){var t=this,o=Object.keys(e)[0],n=e[o],r=this._applyCommonLayerParams(n),i=n.styleOptions||{},s=this.mapOptions.defaultFeaturesStyle||{},a=gs.DEFAULT_VECTORLAYERS_STYLES,l={};l.image=new Fo.a({src:i.markerSrc||s.markerSrc||a.markerSrc,anchor:[i.markerXAnchor||s.markerXAnchor||a.markerXAnchor,i.markerYAnchor||s.markerYAnchor||a.markerYAnchor],anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels"}),l.stroke=new zo.a({color:gs.prototype._hexToRgba.call(this,i.strokeColor||s.strokeColor||a.strokeColor,i.strokeOpacity||s.strokeOpacity||a.strokeOpacity),width:i.strokeWidth||s.strokeWidth||a.strokeWidth}),l.fill=new Bo.a({color:gs.prototype._hexToRgba.call(this,i.polyFillColor||s.polyFillColor||a.polyFillColor,i.polyFillOpacity||s.polyFillOpacity||a.polyFillOpacity)}),l.text=new Uo.a({font:"16px Sans",textAlign:"left",fill:new Bo.a({color:gs.prototype._hexToRgba.call(this,i.textColor||s.textColor||a.textColor,1)})}),i.textStrokeColor&&(l.text.stroke=new zo.a({color:gs.prototype._hexToRgba.call(this,i.textStrokeColor||s.textStrokeColor||a.textStrokeColor,1),width:1}));var c=new Do.c(l);switch(n.format.toUpperCase()){case"KML":this.logger.trace("[_addVectorLayer] : ajout d'une couche KML");var u=this.setProxy(n.url),h=new ms.format.KMLExtended({extractStyles:n.extractStyles,showPointNames:n.showPointNames,defaultStyle:[c]});r.source=new d.b({features:new ir.b,loader:function(e,o,n){cs.XHR.call({url:u,method:"GET",timeOut:15e3,onResponse:function(e){var t=h.readProjection(e),o=h.readFeatures(e,{dataProjection:t,featureProjection:n});o.length>0&&r.source.addFeatures(o)},onFailure:function(e){t.logger.info("[_addVectorLayer] : Kml request failed : ",e)}})}});break;case"GPX":this.logger.trace("[_addVectorLayer] : ajout d'une couche GPX"),r.source=new d.b({url:this.setProxy(n.url),format:new Wr.a}),r.style=c;break;case"GEORSS":break;case"GEOJSON":this.logger.trace("[_addVectorLayer] : ajout d'une couche GeoJSON"),r.source=new d.b({url:this.setProxy(n.url),format:new br.a}),r.style=c;break;case"WFS":this.logger.trace("[_addVectorLayer] : ajout d'une couche WFS");var p="",f="";n.version||(n.version="2.0.0"),n.outputFormat||(n.outputFormat="application/json"),n.maxFeatures&&(p=parseInt(n.version.charAt(0))<2?"&maxFeatures="+n.maxFeatures:"&count="+n.maxFeatures),n.sld&&(f="&sld="+n.sld);var m=this.setProxy(n.url),g=n.outputFormat.toLowerCase(),y=null,v={};n.projection&&(v.defaultDataProjection=n.projection,v.srsName=n.projection),y=g.indexOf("gml")>0||g.indexOf("xml")>0?g.indexOf("2.1")>0||g.indexOf("gml2")>0?new Es.a(v):new Os.a(v):new br.a(v),r.source=new d.b({format:y,url:function(e,t,o){return m+"?service=WFS&request=GetFeature&version="+n.version+"&typename="+n.typeNames+"&outputFormat="+n.outputFormat+"&srsname="+o.getCode()+"&bbox="+e.join(",")+","+o.getCode()+p+f},strategy:Ss.b});break;case"DRAWING":this.logger.trace("[_addVectorLayer] : ajout d'une couche de dessin"),r.source=new d.b({})}if(r.hasOwnProperty("source")){n.hasOwnProperty("originators")&&(r.source._originators=n.originators);var _=new sr.a(r);this._layers.push({id:o,obj:_,options:n}),this.libMap.addLayer(_),this._addLayerConfToLayerSwitcher(_,n);var b=this.libMap,w=r.source;if(b.getView()&&b.getSize()&&w.getExtent)if(n.zoomToExtent||!1){var E=w.on("change",(function(){var e=w.getExtent();"ready"===w.getState()&&e[0]!==1/0&&(Object(gn.b)(E),b.getView().fit(e,{maxZoom:18}))}));setTimeout((function(){w.dispatchEvent("change")}),100)}}},_s.prototype._addGeoportalLayer=function(e,t){var o=Object.keys(e)[0],n=e[o],r={};n.hasOwnProperty("opacity")&&(r.opacity=n.opacity),n.hasOwnProperty("visibility")&&(r.visible=n.visibility),n.hasOwnProperty("position")&&(r.zIndex=n.position),n.hasOwnProperty("styleName")&&(r.sourceParams={},r.sourceParams.style=n.styleName),n.hasOwnProperty("styleNames")&&(r.sourceParams={},r.sourceParams.params={},r.sourceParams.params.STYLES=n.styleNames[0]),n.hasOwnProperty("minZoom")&&n.minZoom>=0&&n.minZoom<=28&&(r.maxResolution=this._getResolutionFromZoomLevel(n.minZoom),this.logger.trace("[_addGeoportalLayer] : apply MaxResolution : "+r.maxResolution)),n.hasOwnProperty("maxZoom")&&n.maxZoom>=0&&n.maxZoom<=28&&(r.minResolution=this._getResolutionFromZoomLevel(n.maxZoom),this.logger.trace("[_addGeoportalLayer] : apply minResolution : "+r.minResolution));var i,s,a=null;switch(n.format.toUpperCase()){case"MAPBOX":if(this.logger.info("[_addGeoportalLayer] --\x3e [_addMapBoxLayer]..."),t)for(var l=!0,c=0;c<t.styles.length;c++){var u=t.styles[c];u.current?(n.hasOwnProperty("url")||(e[o].url=u.url),n.hasOwnProperty("defaultStyleName")||(e[o].defaultStyleName=u.name),n.hasOwnProperty("defaultStyleDescription")||(e[o].defaultStyleDescription=u.title),n.hasOwnProperty("defaultStyleThumbnail")||(e[o].defaultStyleThumbnail=u.thumbnail)):(i=n.hasOwnProperty("styles"),s=l,!i&&!s||i&&s||(l=!1,e[o].styles||(e[o].styles=[]),e[o].styles.push({thumbnail:u.thumbnail,name:u.name,description:u.title,url:u.url})))}this._addMapBoxLayer(e);break;case"WMTS":a=ms.layer.GeoportalWMTS;break;case"WMS":a=ms.layer.GeoportalWMS;break;default:this.logger.info("[_addGeoportalLayer] : no class found for "+n.format)}if(null!==a){var d={layer:o,olParams:r};this._isConfLoaded||(d.apiKey=this.apiKey);var h=new a(d);n.hasOwnProperty("originators")&&(h.getSource()._originators=n.originators),r.hasOwnProperty("zIndex")&&0===r.zIndex&&(h._forceNullzIndex=!0),this._layers.push({id:o,obj:h,options:n}),this.libMap.addLayer(h),this._addLayerConfToLayerSwitcher(h,n)}},_s.prototype._getLayerOpts=function(e,t){var o=null;t=t||this._layers;for(var n=0;n<t.length;n++){var r=t[n];if(r.obj===e){(o={})[r.id]=r.options;break}}return o},_s.prototype._registerUnknownLayer=function(e){var t="unknownLayer";e.hasOwnProperty("gpResultLayerId")&&(t=e.gpResultLayerId);var o={};if(0===(t+="-"+Date.now()).indexOf("drawing-"))o.format="drawing";else if(0===t.indexOf("layerimport:KML"))o.format="KML";else if(0===t.indexOf("layerimport:GPX"))o.format="GPX";else if(0===t.indexOf("layerimport:GeoJSON"))o.format="GeoJSON";else if(0===t.indexOf("layerimport:WMS")){if(o.format="WMS",e.gpGFIparams&&(e.gpGFIparams.queryable&&(o.queryable=!0),Array.isArray(e.gpGFIparams.formats))){o.gfiFormat=e.gpGFIparams.formats[0];for(var n=0;n<e.gpGFIparams.formats.length;n++)if("text/html"===e.gpGFIparams.formats[n]){o.gfiFormat="text/html";break}}}else 0===t.indexOf("layerimport:WMTS")?o.format="WMTS":0===t.indexOf("layerimport:MAPBOX")&&(o.format="MAPBOX");this._layers.push({id:t,obj:e,options:o});var r={};return r[t]={},r},_s.prototype._checkLayerParams=function(e){return!!gs.prototype._checkLayerParams.apply(this,arguments)},_s.prototype._changeLayerColor=function(e,t){var o=this._getLayerIndexByLayerId(e),n=this._layers[o];switch(n.options.format.toUpperCase()){case"MAPBOX":case"KML":case"GPX":case"WFS":case"DRAWING":return void this.logger.warn("[_changeLayerColor] : _changeLayerColor not allowed on vector layers (layer id: "+e+")")}this._colorGrayscaleLayerSwitch(n,t);var r=gs.CustomEvent("change:grayScaled",{detail:{oldValue:!t,newValue:t}});Object.defineProperty(r,"target",{writable:!0}),n.obj.dispatchEvent(r)},_s.prototype._colorGrayscaleLayerSwitch=function(e,t){function o(e,t){var o=function(e){e.crossOrigin="anonymous";var t=document.createElement("canvas"),o=t.getContext("2d");e.width=e.width||256,e.height=e.height||256,t.width=e.width,t.height=e.height,o.drawImage(e,0,0);for(var n=o.getImageData(0,0,e.width,e.height),r=n.data,i=0;i<r.length;i+=4){var s=(r[i]+r[i+1]+r[i+2])/3;r[i]=s,r[i+1]=s,r[i+2]=s}return o.putImageData(n,0,0),t.toDataURL()}(e);e.src="",e.onload=function(){t.changed()},e.src=o}var n=e.obj.getSource();t?n instanceof f.a?(n.loadstartListenerKey=n.on("imageloadstart",(function(e){e.image.getImage().crossOrigin="Anonymous"})),n.loadendListenerKey=n.on("imageloadend",(function(e){o(e.image.getImage(),e.target)}))):(n.loadstartListenerKey=n.on("tileloadstart",(function(e){e.tile.getImage().crossOrigin="Anonymous"})),n.loadendListenerKey=n.on("tileloadend",(function(e){o(e.tile.getImage(),e.target)}))):(Object(gn.b)(n.loadstartListenerKey),Object(gn.b)(n.loadendListenerKey),n.loadstartListenerKey=null,n.loadendListenerKey=null),n.refresh()},_s.prototype._applyCommonLayerParams=function(e){var t={};if(this.logger.trace("[_applyCommonLayerParams] : _applyCommonLayerParams "),e.hasOwnProperty("opacity")&&(this.logger.trace("[_applyCommonLayerParams] : _applyCommonLayerParams - opacity : "+e.opacity),t.opacity=e.opacity),e.hasOwnProperty("visibility")&&(this.logger.trace("[_applyCommonLayerParams] : _applyCommonLayerParams - visibility : "+e.visibility),t.visible=e.visibility),e.hasOwnProperty("position")&&(this.logger.trace("[_applyCommonLayerParams] : _applyCommonLayerParams - position : "+e.position),t.zIndex=e.position),e.hasOwnProperty("maxZoom")&&e.maxZoom>=0&&e.maxZoom<=20){var o=this._getResolutionFromZoomLevel(e.maxZoom);this.logger.trace("[_applyCommonLayerParams] : _applyCommonLayerParams - minRes : "+o),t.minResolution=o}if(e.hasOwnProperty("minZoom")&&e.minZoom>=0&&e.minZoom<=20){var n=this._getResolutionFromZoomLevel(e.minZoom);this.logger.trace("[_applyCommonLayerParams] : _applyCommonLayerParams - maxRes : "+n),t.maxResolution=n}return e.hasOwnProperty("grayScaled")&&(this.logger.trace("[_applyCommonLayerParams] : _applyCommonLayerParams - grayScaled : "+e.grayScaled),t.grayScaled=e.grayScaled),t},_s.prototype._addMarkers=function(e){if(this.logger.trace("[OlMap] : _addMarkers"),Array.isArray(e)){var t=null,o=this,n=0,r=function(e){var n=o.getLibMap().getEventPixel(e);o.logger.trace("[OlMap] : _addMarkers : display content : "+t.content),ms.gp.GfiUtils.displayInfo(o.getLibMap(),o.getLibMap().getCoordinateFromPixel([n[0]+this.mo.ppoffset[0],n[1]+this.mo.ppoffset[1]]),this.mo.content,this.mo.contentType,this.mo.autoPanOptions)};for(n=0;n<e.length;n++){(t=e[n]).hasOwnProperty("content")||(t.content=""),t.hasOwnProperty("url")||(t.url=ms.control.DefaultMarkers.lightOrange),t.hasOwnProperty("offset")||(t.offset=ms.control.DefaultMarkers.defaultOffset),this.logger.trace("[OlMap] : _addMarkers : offset ["+t.offset[0]+","+t.offset[1]+"]"),t.hasOwnProperty("ppoffset")||(t.ppoffset=[0,-15]);var i=!1;t.hasOwnProperty("position")||(t.position={x:this.libMap.getView().getCenter()[0],y:this.libMap.getView().getCenter()[1]},i=!0),t.hasOwnProperty("contentType")||(t.contentType="text/html"),t.hasOwnProperty("autoPanOptions")||(t.autoPanOptions={autoPan:gs.DEFAULT_AUTOPAN_OPTIONS.autoPan,autoPanAnimation:{duration:gs.DEFAULT_AUTOPAN_OPTIONS.duration},autoPanMargin:gs.DEFAULT_AUTOPAN_OPTIONS.margin});var s=[t.position.x,t.position.y];t.position.hasOwnProperty("projection")&&(s=Object(a.E)(s,t.position.projection,this.getProjection())),this.logger.trace("[OlMap] : _addMarkers : coords ["+s[0]+", "+s[1]+"]");var l=document.createElement("img");l.src=t.url,l.mo=t;var u=new c.a({position:s,offset:t.offset,element:l});if(this.libMap.addOverlay(u),this._markers.push(t),!0===i){var d=this,h=function(e){var t=[e.position.x,e.position.y];e.position.hasOwnProperty("projection")&&(t=Object(a.E)(t,e.position.projection,d.getProjection())),this.setPosition(t)};this.listen("located",h,u),this.listen("geolocated",h,u)}l.addEventListener("click",r,!0),l.addEventListener("touchend",r,!0)}}else this.logger.info("Can not process markersOptions. It is not an Array.")},_s.prototype._removeMarkers=function(){for(var e=this.libMap.getOverlays().getArray();e.length>0;)this.libMap.removeOverlay(e[0]);this._markers=[]},_s.prototype.getMarkersOptions=function(){return this._markers},_s.prototype.setMarkersOptions=function(e){this._removeMarkers(),this._addMarkers(e)};var xs=function(e){function t(e){if(e>255)throw new Error("'"+e+"'' is greater than 255(0xff);");return("0"+Number(e).toString(16)).slice(-2)}var o=JSON.stringify(e).replace(/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(0?.?\d+)\s*)?\)/gm,(function(e,o,n,r,i){return"#"+(t(o)+t(n)+t(r))})).replace(/"#([a-f\d])([a-f\d])([a-f\d])"/gim,(function(e,t,o,n,r){return'"#'+(t+t+o+o+n+n)+'"'})).replace(/#([a-f\d]{2}[a-f\d]{2}[a-f\d]{2})/gim,(function(e,t,o){var n,r;return"#"+(n=parseInt(t,16),((r=.2126*(n>>16)+.7152*(n>>8&255)+.0722*(255&n)&255)<<16|r<<8|r).toString(16))}));try{return JSON.parse(o)}catch(e){return null}},Cs=function(e,t,o,n,r){var i=function(e,t,o,n,r){for(var i=RegExp("__"+t+"__"),s=0;s<n.length;s++){var a=e.layers[n[s]];if(a&&a.id===o[s]&&a.filter)for(var l=0;l<a.filter.length;l++)if(Array.isArray(a.filter[l]))for(var c=0;c<a.filter[l].length;c++){var u=a.filter[l][c];-1!==u.indexOf(t)&&(!0,r?i.test(u)&&(a.filter[l][c]=t):a.filter[l][c]="__"+t+"__")}else{var d=a.filter[l];-1!==d.indexOf(t)&&(!0,r?i.test(d)&&(a.filter[l]=t):a.filter[l]="__"+t+"__")}}},s=function(e,t,o,n){var r=null,i=e.toLowerCase();switch(i){case"string":case"text":case(i.match(/^character/)||{}).input:r=[n||"in",t,o];break;case"numeric":case"integer":r=[n||"<=",t,parseInt(o,10)];break;default:r=[]}return r},a=function(e){var t=null,o=("#"+Math.floor(16777215*Math.random()).toString(16)).padEnd(7,"f");switch(e.toUpperCase()){case"MULTIPOLYGON":case"POLYGON":t={"fill-color":o,"fill-opacity":.5,"fill-width":1};break;case"MULTILINE":case"LINE":case"LINESTRING":t={"line-color":o,"line-width":1};break;case"MULTIPOINT":case"POINT":t={"circle-color":o,"circle-radius":5,"circle-stroke-color":"#FFFFFF","circle-stroke-width":2};break;default:t={}}return t},l=function(e){var t=null;switch(e.toUpperCase()){case"MULTIPOLYGON":case"POLYGON":t="fill";break;case"MULTILINE":case"LINE":case"LINESTRING":t="line";break;case"MULTIPOINT":case"POINT":t="circle";break;default:t="symbol"}return t},c={version:8};c.name=o.filterName,c.center=n.center||[],c.bounds=n.bounds||[],c.layers=[],c.sources={},c.sources[e]={type:"vector",tiles:[t]};var u=n.vector_layers;if(u)for(var d=!1,h=0;h<u.length&&!d;h++){var p=u[h];for(var f in p.fields)if(p.fields.hasOwnProperty(f)&&f===o.propertyName){var m=p.id,g=p.geometry,y=p.fields[f].type,v=p.fields[f].values;if(v&&v.sort(),o.tableName&&m!==o.tableName)continue;for(var _=[],b=[],w=r.layers.length,E=0;E<w;E++){var O=r.layers[E];if(O["source-layer"]&&O["source-layer"]===m){if(O.metadata&&O.metadata["geoportail:entry"]&&O.metadata["geoportail:index"])continue;if(1===w&&0===o.type){O.filter||(O.filter=[],O.filter.push("in"),O.filter.push(o.propertyName));for(var S=0;S<v.length;S++){var x=v[S];-1===O.filter.indexOf(x)&&O.filter.push(x)}}_.push(O.id),b.push(E)}}if(!_){console.warn("Filtres utilisateurs : auncune association possible ("+o.filterName+") !?");break}if(d=!0,!v){console.warn("Filtres utilisateurs : auncune valeurs ("+o.filterName+") !?");continue}for(var C=0;C<v.length;C++){var j=v[C],P=null,T=s(y,f,j),A="visible",M=0,I=o.filterName;0===o.type?o.selected&&o.selected.length&&i(r,j,_,b,o.selected[C]):1===o.type?(A="none",P=a(g),M=1):2===o.type&&(A="none",M=2,o.selected&&o.selected.length),o.selected&&o.selected.length&&(A=o.selected[C]?"visible":"none"),c.layers.push({id:j,type:l(g),source:e,"source-layer":m,metadata:{"geoportail:category":I,"geoportail:filter":M,"geoportail:group":null,"geoportail:entry":_,"geoportail:index":b,"geoportail:order":null},layout:{visibility:A},paint:P,filter:T})}if(d)break}}return 0===c.layers.length&&console.warn("Filtres utilisateurs : aucun 'layers' ("+o.filterName+") !?"),c};_s.MAPBOXPROPERTIES={filters:"mapbox-filters",status:"mapbox-status",themes:"mapbox-themes",styles:"mapbox-styles",layers:"mapbox-layers",source:"mapbox-source",extensions:"mapbox-extensions",loaded:"mapbox-loaded"},_s.prototype._callbackMapBoxObservableFilters=function(e){this.logger.warn("DEBUG:ObservableFilters",e,e.target.get(_s.MAPBOXPROPERTIES.filters))},_s.prototype._callbackMapBoxObservableStatus=function(e){this.logger.warn("DEBUG:ObservableStatus",e,e.target.get(_s.MAPBOXPROPERTIES.status))},_s.prototype._callbackMapBoxObservableThemes=function(e){this.logger.warn("DEBUG:ObservableThemes",e,e.target.get(_s.MAPBOXPROPERTIES.themes))},_s.prototype._callbackMapBoxObservableStyles=function(e){this.logger.warn("DEBUG:ObservableStyles",e,e.target.get(_s.MAPBOXPROPERTIES.styles))},_s.prototype._callbackMapBoxObservableMapStyles=function(e){this.logger.warn("DEBUG:ObservableMapStyles",e,e.target.get(_s.MAPBOXPROPERTIES.styles))},_s.prototype._callbackMapBoxObservableExtensions=function(e){this.logger.warn("DEBUG:ObservableExtensions",e,e.target.get(_s.MAPBOXPROPERTIES.extensions))},_s.prototype._callbackMapBoxObservableLoaded=function(e){this.logger.warn("DEBUG:ObservableLoaded",e,e.target.get(_s.MAPBOXPROPERTIES.loaded))},_s.prototype._addMapBoxLayer=function(e){var t=this.libMap,o=this;return function(e){var n=Object.keys(e)[0],r=e[n],i=o.setProxy(r.url);if(Array.isArray(r.styles)){for(var s=!1,l=!1,c=0;c<r.styles.length;c++){var d=r.styles[c];d.url===r.url&&(s=!0),d.selected&&(i=d.url,l=!0)}if(!s){var h=r.url,p=r.defaultStyleThumbnail||null,f=r.defaultStyleName||"Style par dÃ©faut",m=r.defaultStyleDescription||"Style par dÃ©faut";r.styles.unshift({thumbnail:p,name:f,url:h,description:m,selected:!l})}}return Array.isArray(r.filters),fetch(i,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw new Error("HTTP error ("+e.url+") = "+e.status+" ("+e.statusText+")");e.json().then((function(e){var s=r.mapboxOptions;if(s&&Object.keys(s).length){var l=s.layers;if(l)for(var c=e.layers.reduce((function(e,t){return e[t.id]=t,e}),{}),d=0;d<l.length;d++)c[l[d].id]&&Wo.mergeParams(c[l[d].id],l[d])}var h=e.sources,p=Object.keys(h).length>1?1:0;for(var f in h){var m=null,g=null,y=null,v=null;if(h.hasOwnProperty(f)){var _,b,w="",E="",O=null,S=null,x=null,C=null,j=null,P=null;if(e.metadata)for(var T in e.metadata)if(e.metadata.hasOwnProperty(T)){var A=T.split(":");if("geoportail"===A[0]){var M=A[1];if("title"===M&&!r.title){w=r.title=e.metadata[T];continue}if("description"===M&&!r.description){E=r.description=e.metadata[T];continue}if("quicklookUrl"===M&&!r.quicklookUrl){O=r.quicklookUrl=e.metadata[T];continue}if("legends"===M&&!r.legends){S=r.legends=e.metadata[T];continue}if("metadata"===M&&!r.metadata){x=r.metadata=e.metadata[T];continue}if("originators"===M&&!r.originators){C=r.originators=e.metadata[T];continue}if("styles"===M&&!r.styles){j=r.styles=e.metadata[T];continue}if("filters"===M&&!r.filters){P=r.filters=e.metadata[T];continue}}}r.title||(r.title="Couche MapBox"),r.description||(r.description="Couche MapBox"),w=p?r.title+"("+f+")":r.title,E=r.description,O=r.quicklookUrl,x=r.metadata,S=r.legends,C=r.originators,_=r.position,b=void 0===r.queryable||r.queryable;var I={};if(Array.isArray(r.styles)){j=r.styles;for(var R=null,L=null,k=0;k<r.styles.length;k++){var G=r.styles[k];G.selected&&(R=k,L=G.url.match(/([^/]+)(?=\.\w+$)/)[1],I={index:R,key:L})}}var N=[];if(Array.isArray(r.filters)){P=r.filters;for(var D=0;D<r.filters.length;D++){var F=r.filters[D],U=[];F.configuration&&F.configuration.selected&&Array.isArray(F.configuration.selected)&&F.configuration.selected.length&&(U=F.configuration.selected),N.push({k:F.filterName,v:U})}}var B=[],z=h[f],V=z.type;if("vector"===V){var W=z.url,q=z.tiles,H=e.sprite;if(W&&0===W.indexOf("mapbox://")&&(q=["a","b","c","d"].map((function(e){return"https://"+e+".tiles.mapbox.com/v4/"+W.replace("mapbox://","")+"/{z}/{x}/{y}.vector.pbf?"+i.split("?")[1]})),0===H.indexOf("mapbox://"))){var Y=i.split("?");e.sprite=Y[0]+"/sprite?"+Y[1]}if(q)m=new Vr.a({}),(g=new u.a({attributions:z.attribution,format:m,tileGrid:Object(zr.c)({extent:z.bounds,maxZoom:z.maxzoom||22,minZoom:z.minzoom||1,tileSize:z.tileSize||256}),urls:q}))._title=w,g._description=E,g._quicklookUrl=O,g._metadata=x,g._legends=S,g._originators=C,(y=new Yr.a({source:g,visible:!1,zIndex:_,declutter:!0})).id=f;else if(W){m=new Vr.a({}),(y=new Yr.a({visible:!1,zIndex:_,declutter:!0})).id=f,v=new Xr.a({url:W}),y.set(_s.MAPBOXPROPERTIES.loaded,!1),y.dispatchEvent("change:"+_s.MAPBOXPROPERTIES.loaded),y.on("change:"+_s.MAPBOXPROPERTIES.loaded,o._callbackMapBoxObservableLoaded.bind(o));var X=v.on("change",(function(t){if("error"===v.getState()&&(console.error("HTTP TileJSON error (metadata.json)"),y.set(_s.MAPBOXPROPERTIES.loaded,!0)),"ready"===v.getState()){var n=v.getTileJSON();y.set(_s.MAPBOXPROPERTIES.extensions,n),y.on("change:"+_s.MAPBOXPROPERTIES.extensions,o._callbackMapBoxObservableExtensions.bind(o)),y.dispatchEvent("change:"+_s.MAPBOXPROPERTIES.extensions);for(var i=Array.isArray(n.tiles)?n.tiles:[n.tiles],s=0;s<i.length;s++){var a=i[s];0!==a.indexOf("http")&&(i[s]=W+a)}if((g=new u.a({attributions:v.getAttributions()||n.attribution,format:m,tileGrid:Object(zr.c)({extent:z.bounds,maxZoom:n.maxzoom||z.maxzoom||22,minZoom:n.minzoom||z.minzoom||0,tileSize:n.tileSize||z.tileSize||256}),urls:i}))._title=w,g._description=E,g._quicklookUrl=O,g._metadata=x,g._legends=S,g._originators=C,y.setSource(g),Array.isArray(r.filters)){for(var l=0;l<r.filters.length;l++){var c=r.filters[l],d=c.configuration||{},h=d.selected?d.selected:[],p=d.type?d.type:0,_={tableName:null,propertyName:c.propertyName,filterName:c.filterName,selected:h,type:p};if(-1!==_.propertyName.indexOf(".")){var b=_.propertyName.split(".");_.tableName=b[0],_.propertyName=b[1]}var j=null;y.getSource()&&(j=y.getSource().urls);var P=Cs(f,j,_,n,e);if(!P.layers)break;for(var T=JSON.parse(JSON.stringify(e)),A=T.layers,M=0;M<A.length;M++){var I=A[M];I.source===f?I.metadata&&I.metadata.hasOwnProperty("geoportail:category")&&I.metadata.hasOwnProperty("geoportail:filter")&&(A.splice(M,1),M--):(A.splice(M,1),M--)}y.set(_s.MAPBOXPROPERTIES.styles,T);for(var R=0;R<P.layers.length;R++)e.layers.push(P.layers[R]);c.style=P}y.set(_s.MAPBOXPROPERTIES.filters,{filtersSummary:r.filtersSummary,filters:r.filters})}y.set(_s.MAPBOXPROPERTIES.loaded,!0),Object(gn.b)(X)}}))}}else{if("geojson"!==V)return;var Z=z.data;m=new br.a,(g=new u.a({attributions:z.attribution,format:m,url:Z}))._title=w,g._description=E,g._quicklookUrl=O,g._metadata=x,g._legends=S,g._originators=C,(y=new Yr.a({source:g,visible:!1,zIndex:_,declutter:!0})).id=f}y.set(_s.MAPBOXPROPERTIES.themes,{}),y.on("change:"+_s.MAPBOXPROPERTIES.themes,o._callbackMapBoxObservableThemes.bind(o)),y.dispatchEvent("change:"+_s.MAPBOXPROPERTIES.themes),y.set(_s.MAPBOXPROPERTIES.styles,{}),y.on("change:"+_s.MAPBOXPROPERTIES.styles,o._callbackMapBoxObservableStyles.bind(o)),y.dispatchEvent("change:"+_s.MAPBOXPROPERTIES.styles),y.set(_s.MAPBOXPROPERTIES.filters,{}),y.on("change:"+_s.MAPBOXPROPERTIES.filters,o._callbackMapBoxObservableFilters.bind(o)),y.dispatchEvent("change:"+_s.MAPBOXPROPERTIES.filters),y.set(_s.MAPBOXPROPERTIES.status,{}),y.on("change:"+_s.MAPBOXPROPERTIES.status,o._callbackMapBoxObservableStatus.bind(o)),y.dispatchEvent("change:"+_s.MAPBOXPROPERTIES.status);var K=function(){var i={visibility:r.visibility,queryable:b,opacity:r.opacity,grayScaled:r.grayScaled,position:_,zoomToExtent:r.zoomToExtent,url:r.url,defaultStyleName:r.defaultStyleName,defaultStyleThumbnail:r.defaultStyleThumbnail,defaultStyleDescription:r.defaultStyleDescription,format:r.format,mapboxOptions:r.mapboxOptions,stylesSummary:r.stylesSummary,styles:j,filtersSummary:r.filtersSummary,filters:P,title:w,description:E,quicklookUrl:O,metadata:x,legends:S,originators:C};Wo.mergeParams(i,r,!1),function(e){var i=function(){Object(Zr.a)(e.layer,e.styles,e.id).then((function(){var t=void 0===r.visibility||r.visibility;e.layer.setVisible(t),e.layer.setOpacity(r.opacity||1)})).then((function(){if(e.options.zoomToExtent||!1){var o=e.layer.getSource();if(t.getView()&&o&&o.getExtent){var n=o.on("change",(function(){var e=o.getExtent();"ready"===o.getState()&&e[0]!==1/0&&(Object(gn.b)(n),t.getView().fit(e,{maxZoom:18}))}));setTimeout((function(){o.dispatchEvent("change")}),100)}else{var r=t.getView().getProjection().getCode();t.getView()&&e.styles.center&&e.styles.center.length&&t.getView().setCenter(Object(a.E)(e.styles.center,"EPSG:4326",r)),t.getView()&&(e.styles.zoom||0===e.styles.zoom)&&t.getView().setZoom(e.styles.zoom)}}})).then((function(){var t=o.getLibMapControl("GetFeatureInfo");if(t&&t.isActive()){var n=t.getLayers();if(!0===e.options.queryable){for(var r=!1,i=0;i<n.length;i++)n[i].obj===e.layer&&(r=!0);r||n.push({obj:e.layer,event:"singleclick",infoFormat:""})}if(!1===e.options.queryable){for(var s=[],a=0;a<n.length;a++)n[a].obj!==e.layer&&s.push(n[a]);t.setLayers(s)}}})).then((function(){})).catch((function(e){o.logger.warn("DEBUG:Apply Style error = "+e.message)}))};if((s=p?n+"-"+e.id:n)===n&&o._getLayersObj([n]).length>0)o.logger.info("Layer ["+n+"] already added to map.");else{var s=p?n+"-"+e.id:n;o._layers.push({id:s,obj:e.layer,options:e.options}),t.addLayer(e.layer);var l=t.get(_s.MAPBOXPROPERTIES.styles)||{};l[s]=e.styles,t.set(_s.MAPBOXPROPERTIES.styles,l),t.on("change:"+_s.MAPBOXPROPERTIES.styles,o._callbackMapBoxObservableMapStyles.bind(o)),t.dispatchEvent("change:"+_s.MAPBOXPROPERTIES.styles);for(var c=JSON.parse(JSON.stringify(e.styles)),u=c.layers,d=0;d<u.length;d++){var h=u[d];h.source===e.id?h.metadata&&h.metadata.hasOwnProperty("geoportail:category")&&h.metadata.hasOwnProperty("geoportail:filter")&&(u.splice(d,1),d--):(u.splice(d,1),d--)}e.layer.set(_s.MAPBOXPROPERTIES.styles,c),e.layer.set(_s.MAPBOXPROPERTIES.themes,{stylesSummary:e.options.stylesSummary,styles:e.options.styles}),e.layer.set(_s.MAPBOXPROPERTIES.filters,{filtersSummary:e.options.filtersSummary,filters:e.options.filters}),e.layer.set(_s.MAPBOXPROPERTIES.status,{theme:e.selectedTheme,layers:e.selectedLayers,filters:e.selectedFilters}),e.options.grayScaled&&(e.styles=xs(c),e.styles||console.error("Erreur de transformation en N/B !?")),e.layer.getSource()?i():e.layer.once("change:source",i);for(var f=0;f<o._layers.length&&o._layers.length===Object.keys(o.mapOptions.layersOptions).length;f++){var m=o._layers[f].id;o.mapOptions.layersOptions&&o.mapOptions.layersOptions[m]&&void 0!==o.mapOptions.layersOptions[m].position&&(o._layers[f].options.position=o.mapOptions.layersOptions[m].position,o._layers[f].obj.setZIndex(o._layers[f].options.position))}o._addLayerConfToLayerSwitcher(e.layer,e.options),o._resetLayerChangedEvent()}}({id:f,styles:e,layer:y,selectedTheme:I,selectedFilters:N,selectedLayers:B,options:i})};v?(o.logger.warn("tilejson loading!"),y.once("change:"+_s.MAPBOXPROPERTIES.loaded,K)):(o.logger.warn("loaded!"),K())}}})).catch((function(e){throw new Error("Parsing JSON error = "+e.message)}))})).catch((function(e){}))}(e)},_s.prototype._updateStyleMapBoxLayer=function(e,t,o){var n=this;return fetch(o.url,{credentials:"same-origin"}).then((function(r){if(r.ok)return r.json().then((function(r){var i=e.get(_s.MAPBOXPROPERTIES.source);return Object(Zr.a)(e,r,i).then((function(){for(var t=JSON.parse(JSON.stringify(r)),o=t.layers,n=0;n<o.length;n++){var i=o[n];i.source===e.id?i.metadata&&i.metadata.hasOwnProperty("geoportail:category")&&i.metadata.hasOwnProperty("geoportail:filter")&&(o.splice(n,1),n--):(o.splice(n,1),n--)}e.set(_s.MAPBOXPROPERTIES.styles,t)})).then((function(){var o=n.getLibMap(),s=e.get(_s.MAPBOXPROPERTIES.extensions),a=e.getSource().urls,l=e.get(_s.MAPBOXPROPERTIES.filters),c=JSON.parse(JSON.stringify(o.get(_s.MAPBOXPROPERTIES.styles)))||{},u=Object.assign({},r);c[t]=function(e,t,o,n,r){if(Array.isArray(o))for(var i=0;i<o.length;i++){var s=o[i],a=s.configuration||{},l={tableName:null,propertyName:s.propertyName,filterName:s.filterName,selected:a.selected?a.selected:[],type:a.type?a.type:0};if(-1!==l.propertyName.indexOf(".")){var c=l.propertyName.split(".");l.tableName=c[0],l.propertyName=c[1]}var u=Cs(e,t,l,n,r);if(!u.layers)break;for(var d=0;d<u.layers.length;d++)r.layers.push(u.layers[d]);s.style=u}return r}(i,a,l.filters,s,u),o.set(_s.MAPBOXPROPERTIES.styles,c)})).then((function(){var t=JSON.parse(JSON.stringify(e.get(_s.MAPBOXPROPERTIES.filters)));t&&e.set(_s.MAPBOXPROPERTIES.filters,t)})).then((function(){var t=JSON.parse(JSON.stringify(e.get(_s.MAPBOXPROPERTIES.themes)));if(t){for(var n=0;n<t.styles.length;n++){var r=t.styles[n];r.selected&&delete r.selected,parseInt(o.index,10)===n&&(r.selected=!0)}e.set(_s.MAPBOXPROPERTIES.themes,t)}})).then((function(){var t=JSON.parse(JSON.stringify(e.get(_s.MAPBOXPROPERTIES.filters))),n=JSON.parse(JSON.stringify(e.get(_s.MAPBOXPROPERTIES.status)));if(n){var r=[];if(t.filters)for(var i=0;i<t.filters.length;i++){var s=t.filters[i];r.push({k:s.filterName,v:s.configuration&&s.configuration.selected?s.configuration.selected:[]})}var a={theme:{index:o.index,key:o.url.match(/([^/]+)(?=\.\w+$)/)[1]},layers:n.layers,filters:r};e.set(_s.MAPBOXPROPERTIES.status,a)}})).catch((function(e){n.logger.error(e)}))}))})).catch((function(e){}))},_s.prototype._updateFilterMapBoxLayer=function(e,t,o){var n=this,r=this.getLibMap(),i=e.get(_s.MAPBOXPROPERTIES.source),s=r.get(_s.MAPBOXPROPERTIES.styles)[t];if(i!==o.data.source)return new Promise((function(e,t){t()}));for(var a=s.layers,l=0;l<a.length;l++)if(a[l].id===o.data.id){var c=a[l].metadata;if(c&&c.hasOwnProperty("geoportail:category")&&o.category===c["geoportail:category"]){var u=a[l],d=u.id,h=RegExp("__"+d+"__");if(c.hasOwnProperty("geoportail:filter")&&0===c["geoportail:filter"]){for(var p=c.hasOwnProperty("geoportail:entry")?c["geoportail:entry"]:[],f=c.hasOwnProperty("geoportail:index")?c["geoportail:index"]:[],m=[],g=0;g<p.length;g++){var y=a[f[g]];if(y&&y.id===p[g]&&y.filter)for(var v=0;v<y.filter.length;v++)if(Array.isArray(y.filter[v]))for(var _=null,b=0;b<y.filter[v].length;b++)-1!==(_=y.filter[v][b]).indexOf(d)&&(!0,m.push(y.id),o.active?h.test(_)&&(y.filter[v][b]=d):y.filter[v][b]="__"+d+"__");else-1!==(_=y.filter[v]).indexOf(d)&&(!0,m.push(y.id),o.active?h.test(_)&&(y.filter[v]=d):y.filter[v]="__"+d+"__")}var w=u.layout;w&&w.visibility?w.visibility=o.active?"visible":"none":u.layout={visibility:o.active?"visible":"none"}}if(c.hasOwnProperty("geoportail:filter")&&1===c["geoportail:filter"]){var E=u.layout;E&&E.visibility?E.visibility=o.active?"visible":"none":u.layout={visibility:o.active?"visible":"none"}}c.hasOwnProperty("geoportail:filter")&&c["geoportail:filter"];break}}return Object(Zr.a)(e,s,i).then((function(){var t=JSON.parse(JSON.stringify(e.get(_s.MAPBOXPROPERTIES.filters)));if(t){if(t.filters)for(var n=0;n<t.filters.length;n++){var r=t.filters[n];if(r.filterName===o.category){r.configuration&&r.configuration.selected?r.configuration.selected=o.status:r.configuration={selected:o.status,type:0};break}}e.set(_s.MAPBOXPROPERTIES.filters,t)}})).then((function(){for(var t=JSON.parse(JSON.stringify(s)),o=t.layers,n=0;n<o.length;n++){var r=o[n];r.source===i?r.metadata&&r.metadata.hasOwnProperty("geoportail:category")&&r.metadata.hasOwnProperty("geoportail:filter")&&(o.splice(n,1),n--):(o.splice(n,1),n--)}e.set(_s.MAPBOXPROPERTIES.styles,t)})).then((function(){var e=JSON.parse(JSON.stringify(r.get(_s.MAPBOXPROPERTIES.styles)||{}));e[t]=s,r.set(_s.MAPBOXPROPERTIES.styles,e)})).then((function(){var t=JSON.parse(JSON.stringify(e.get(_s.MAPBOXPROPERTIES.status)));if(t){for(var n=0;n<t.filters.length;n++)t.filters[n].k===o.category&&(t.filters[n].v=[],t.filters[n].v=o.status);var r={theme:t.theme,layers:t.layers,filters:t.filters};e.set(_s.MAPBOXPROPERTIES.status,r)}})).catch((function(e){n.logger.error(e)}))},_s.prototype._updateGrayScaledMapBoxLayer=function(e,t,o){var n=this,r=this.getLibMap(),i=e.get(_s.MAPBOXPROPERTIES.source),s=r.get(_s.MAPBOXPROPERTIES.styles)[t];this._layers.forEach((function(e){e.id===t&&(e.options.grayScaled=o.active)}));var a=null;if(o.active){if(!(a=xs(s)))return new Promise((function(e,t){t()}))}else a=s;return Object(Zr.a)(e,a,i).then((function(){})).catch((function(e){n.logger.error(e)}))};var js=o("./node_modules/ol/interaction/Pointer.js"),Ps=o("./node_modules/ol/interaction/MouseWheelZoom.js"),Ts=o("./node_modules/ol/interaction/DoubleClickZoom.js"),As=o("./node_modules/ol/interaction/KeyboardPan.js"),Ms=o("./node_modules/ol/interaction/KeyboardZoom.js"),Is=o("./node_modules/ol/control/Zoom.js"),Rs=o("./node_modules/ol/control/OverviewMap.js"),Ls=o("./node_modules/ol/control/Rotate.js"),ks=o("./node_modules/ol/control/ScaleLine.js"),Gs=o("./node_modules/ol/layer/Graticule.js");function Ns(e){return(Ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}_s.CONTROLPROPERTIES={maximised:"collapsed"},_s.CONTROLSCLASSES={draggable:[js.b,Ps.a,Ts.a],keyboard:[As.a,Ms.a],scrollwheel:null,selectable:[m.b],zoom:Is.a,zoombox:null,overview:Rs.a,orientation:Ls.a,graphicscale:ks.a,getfeatureinfo:ms.control.GetFeatureInfo,mouseposition:ms.control.GeoportalMousePosition,route:ms.control.Route,layerswitcher:ms.control.LayerSwitcher,layerimport:ms.control.LayerImport,isocurve:ms.control.Isocurve,length:ms.control.MeasureLength,area:ms.control.MeasureArea,azimuth:ms.control.MeasureAzimuth,elevationpath:ms.control.ElevationPath,graticule:Gs.a,search:ms.control.SearchEngine,reversesearch:ms.control.ReverseGeocode,drawing:ms.control.Drawing,attributions:ms.control.GeoportalAttribution,camera:null},_s.prototype.addZoomControl=function(e){var t=new Is.a({target:e.div});return this.libMap.addControl(t),t},_s.prototype.addZoomBoxControl=function(e){return null},_s.prototype.addOverviewControl=function(e){var t=this;this.logger.trace("[OlMap] addOverviewControl : ... ");var o={};if(e.div&&(o.target=e.div),o.collapsed=!e.maximised,e.layers&&Array.isArray(e.layers)){var n=this._getLayersObj(e.layers),r=[];if(n.forEach((function(e){t.logger.trace("[OlMap] addOverviewControl : adding "+e.id+" to map"),r.push(e.obj)}),this),0===r.length&&e.layers.length>0)for(var i=0;i<e.layers.length;i++){this.logger.trace("[OlMap] addOverviewControl : adding geoportal layer : "+e.layers[i]+" to map");var s=!1;"object"===Ns(e.layers[i])?0===Object.keys(e.layers[i]).length&&(s=!0):s=!0;var a={};if(this._isConfLoaded||(a.apiKey=this.apiKey),s){a.layer=e.layers[i];var l=new ms.layer.GeoportalWMTS(a);r.push(l)}else{var c=e.layers[i],u=this._applyCommonLayerParams(c),d=this._getWMTSDefaultOpts();Object.assign(a,u,d,c);var h={url:a.url,layer:a.layer,matrixSet:a.tileMatrixSet,format:a.outputFormat,version:a.version,style:a.styleName,tileGrid:new Qo.b({origin:[a.topLeftCorner.x,a.topLeftCorner.y],resolutions:a.resolutions,matrixIds:a.matrixIds})};a.source=new ms.source.WMTSExtended(h);var p=new ln.a(a);r.push(p)}}r.length>0&&(o.layers=r)}var f={},m=!1;e.hasOwnProperty("minZoom")&&(f.minZoom=e.minZoom,m=!0),e.hasOwnProperty("maxZoom")&&(f.maxZoom=e.maxZoom,m=!0),e.hasOwnProperty("projection")&&(f.projection=e.projection,m=!0),m&&(o.view=new ys.d(f));var g=new Rs.a(o);return this.libMap.addControl(g),g},_s.prototype.addOrientationControl=function(e){var t=new Ls.a({target:e.div,autoHide:e.autoHide||!1});return this.libMap.addControl(t),t},_s.prototype.addGraphicScaleControl=function(e){var t=e.units;t&&"deg"===e.units.toLowerCase()?t="degrees":t&&"m"===e.units.toLowerCase()&&(t="metric"),this.logger.trace("[OlMap] addGraphicScaleControl : setting graphicscale units to "+t);var o=new ks.a({target:e.div,units:t,minWidth:e.minWidth});return this.libMap.addControl(o),o},_s.prototype.addGraticuleControl=function(e){var t=e||{};if(!t.strokeStyle){t.strokeColor=t.strokeColor||"#000000",t.strokeOpacity=t.strokeOpacity||.2,t.strokeWidth=t.strokeWidth||1;var o=gs.prototype._hexToRgba.call(this,t.strokeColor,t.strokeOpacity);t.strokeStyle=new zo.a({color:o,width:t.strokeWidth})}var n=new Gs.a(t);return n.setMap(this.libMap),this.libMap.graticule=n,n},_s.prototype.addMousePositionControl=function(e){var t={};if(e.div&&(t.target=e.div),t.collapsed=!e.maximised,this._isConfLoaded||(t.apiKey=this.apiKey),e.systems&&Array.isArray(e.systems)&&e.systems.length>0)for(var o=0;o<e.systems.length;o++)t.systems||(t.systems=[]),t.systems.push(e.systems[o]);if(e.units&&Array.isArray(e.units)&&e.units.length>0){t.units=[];for(var n=0;n<e.units.length;n++)"string"==typeof e.units[n]&&(this.logger.trace("[OlMap] addMousePositionControl : adding unit   ["+e.units[n].toUpperCase()),t.units.push(e.units[n]))}t.displayAltitude=e.displayAltitude,t.displayCoordinates=e.displayCoordinates,e.altitude&&(t.altitude=e.altitude),t.editCoordinates=e.editCoordinates,t.positionMarker=e.positionMarker;var r=new ms.control.GeoportalMousePosition(t);return this.libMap.addControl(r),r},_s.prototype.addRouteControl=function(e){var t={};e.div&&(t.target=e.div),t.collapsed=!e.maximised,this._isConfLoaded||(t.apiKey=this.apiKey),e.graphs&&(t.graphs=e.graphs),e.exclusions&&(t.exclusions=e.exclusions),e.markersOpts&&(t.markersOpts={},e.markersOpts.departure&&(t.markersOpts.departure=e.markersOpts.departure),e.markersOpts.stages&&(t.markersOpts.stages=e.markersOpts.stages),e.markersOpts.arrival&&(t.markersOpts.arrival=e.markersOpts.arrival)),e.routeOptions&&(t.routeOptions=e.routeOptions),e.autocompleteOptions&&(t.autocompleteOptions=e.autocompleteOptions);var o=new ms.control.Route(t);return this.libMap.addControl(o),o},_s.prototype.addIsocurveControl=function(e){var t={};e.div&&(t.target=e.div),t.collapsed=!e.maximised,this._isConfLoaded||(t.apiKey=this.apiKey),e.graphs&&(t.graphs=e.graphs),e.exclusions&&(t.exclusions=e.exclusions),e.methods&&(t.methods=e.methods),e.directions&&(t.directions=e.directions),e.markerOpts&&(t.markerOpts=e.markerOpts),e.isocurveOptions&&(t.isocurveOptions=e.isocurveOptions),e.autocompleteOptions&&(t.autocompleteOptions=e.autocompleteOptions);var o=new ms.control.Isocurve(t);return this.libMap.addControl(o),o},_s.prototype.addLayerImportControl=function(e){var t={};if(e.div&&(t.target=e.div),t.collapsed=!e.maximised,e.layerTypes&&(t.layerTypes=e.layerTypes),t.webServicesOptions={},e.webServicesOptions?t.webServicesOptions=e.webServicesOptions:(this.mapOptions&&this.mapOptions.proxyUrl&&(t.webServicesOptions.proxyUrl=this.mapOptions.proxyUrl),this.mapOptions&&this.mapOptions.noProxyDomains&&(t.webServicesOptions.noProxyDomains=this.mapOptions.noProxyDomains)),e.defaultStyles){t.vectorStyleOptions={};var o,n,r,i,s="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAARDSURBVFiF3ZndaxxVGMZ/Z/YjX00Nadpo1qrFBgu56D9QbAtiLoRC7ywSNK1NURRREBKRFlSwFBW0gnSrJXY1CmISgyjFiyYSFC9ajE3MmpjdjWlMUtNos9lN9mteLzbRuCbZmTMTBB+Yi51znvd5n3nPnjnnjBIR/i/wuh4xpCpI0ojiENAA1AE1wCzwKzCE0EM5l2iShJvSyrXKnFVb8dOK4hmg3AIjifAmaU7ztMy7kYI7Zs6rQwjvka+AXcyiOMZx6XGahuE0AEHVitCFnhGAGoQugqrVaSrOKpNP4FWnSaxCGy1yWpesbyY/tLpwo7p/w0RxWHfI6Zk5q7ZSwhj6Q2sjzJLiXp1JQe+p+mllc4wA1CzHtw37lQmpCha5gbXpVxdJythh9z1kvzJJGrFixPBmOXixl+Z4mONmguZ4mIMXezG8WQsq5cs6tmDfTP7NXiSqN0vTzBD1TQfwbdmDUhX4tuyhvukATTNDlgxZ0SmUtUsgv0TZGPsv9FNSvXfNtpLqvey/0O+KTgF0zNQV7XHP4dsdtVvVKYCOmeqiPbwVOx21W9UpgI6ZWNEe2cSEo3arOgWwb0YYLp5G17Sjdqs6BdCZzYqL9B3dR2puYM221NwAfUf3uaJTAB0zaye5GmbWS6i2gdFQL5mFMCIJMgthRkO9hGobMLPFN4VWdAoptlcAQeUDRoG77YrZwDhQT4tk7JDsV6ZFMggv2+bZwyt2jYDuQnOa94GIFrc4IkzRrkPUM3NKsijatLjF0copsbJ++xec7TTPqw6EI/oB/glT+PC+13Y/aSQNv/Is+tNer09lMn7DMHwAYppp8fvTIpISkVQsFrslqww4M9OuqkgzANzl1MhCyrjZGAycm573pK1yFCyi5FoWvo/FYlPOT2fOqftRXMbB9lkEs+3zbe2f/FD5i3YMj2p3vn8/IV8DZ5yE+Gqkot+JEQCPada5dRhxEriiQ5ya90w+272916F+KpnJDLhjpkUy5HgESNqhZU2Vfr5ne+dSFtOBeso06J6cnEy6d0z0hPwEPGeH8sGVykvfjpfe1NZUci2+mHg7Go2G8z/d/goQVJ9B8S1veMYffujduo/thl+ZwUzDuBqJRGZWt7n/FcDH46lFNVLilar1uiTTxsJTnTssH/QpJVlMNQa5wbGJiWERya3Vz30zzfLb3OveY3dU5j5dp4e80Xdbd3TOu/H/yyAtpjnqgeGS8crRQRks+v5xf5gtY/KM/6NAVebhwvv90bLvHu2o/XId2pJSMmIaxo/RaHRMxN6yZtPM0K5K/7hl/FxVZgZWbs0mPDceeKcuGE95/kpSKUmaImHDNIfHrl+PiIj2zOb+MFvBY7IUOVl2ZG9g6bJH4ckJuRe/2NYZT3myKIkrGM4pNRyLjY+LW09URDb1+uaF0pfm3zJ+7zhRGdq1c9eDuwOBOzdLa/OG2X+APwE8DU64Y/5gfAAAAABJRU5ErkJggg==";if(e.defaultStyles.KML){var a=e.defaultStyles.KML,l={};l.image=new Fo.a({src:a.markerSrc||s,anchor:[a.markerXAnchor||25.5,a.markerYAnchor||38],anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels"}),o=a.strokeOpacity||.8,n=a.strokeColor||"#002A50",l.stroke=new zo.a({color:gs.prototype._hexToRgba.call(this,n,o),width:a.strokeWidth||4}),r=a.polyFillOpacity||.5,i=a.polyFillColor||"#00B798",l.fill=new Bo.a({color:gs.prototype._hexToRgba.call(this,i,r)});var c=new Do.c(l);t.vectorStyleOptions.KML={defaultStyle:c}}if(e.defaultStyles.GPX){var u=e.defaultStyles.GPX,d={};d.image=new Fo.a({src:u.markerSrc||s,anchor:[u.markerXAnchor||25.5,u.markerYAnchor||38],anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels"}),o=u.strokeOpacity||.8,n=u.strokeColor||"#002A50",d.stroke=new zo.a({color:gs.prototype._hexToRgba.call(this,n,o),width:u.strokeWidth||4});var h=new Do.c(d);t.vectorStyleOptions.GPX={defaultStyle:h}}if(e.defaultStyles.GeoJSON){var p=e.defaultStyles.GeoJSON,f={};f.image=new Fo.a({src:p.markerSrc||s,anchor:[p.markerXAnchor||25.5,p.markerYAnchor||38],anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels"}),o=p.strokeOpacity||.8,n=p.strokeColor||"#002A50",f.stroke=new zo.a({color:gs.prototype._hexToRgba.call(this,n,o),width:p.strokeWidth||4}),r=p.polyFillOpacity||.5,i=p.polyFillColor||"#00B798",f.fill=new Bo.a({color:gs.prototype._hexToRgba.call(this,n,o)});var m=new Do.c(f);t.vectorStyleOptions.GeoJSON={defaultStyle:m}}}var g=new ms.control.LayerImport(t);return this.libMap.addControl(g),g},_s.prototype.addLayerSwitcherControl=function(e){this.logger.trace("[OlMap] : addLayerSwitcherControl ... ");var t={layers:[],options:{collapsed:!(e&&e.maximised)}};e&&e.div&&(t.options.target=e.div);for(var o=0;o<this._layers.length;o++){var n=this._layers[o];this.logger.trace("[OlMap] : layerSwitcher : configuring layer : "+n.id);var r={layer:n.obj,config:{}};n.options.title&&(this.logger.trace("[OlMap] : layerSwitcher : setting title to ["+n.options.title+"] for layer "+n.id),r.config.title=n.options.title),n.options.description&&(this.logger.trace("[OlMap] : layerSwitcher : setting description to ["+n.options.description+"] for layer "+n.id),r.config.description=n.options.description),n.options.quicklookUrl&&(this.logger.trace("[OlMap] : layerSwitcher : setting quicklookUrl to ["+n.options.quicklookUrl+"] for layer "+n.id),r.config.quicklookUrl=n.options.quicklookUrl),n.options.legends&&(this.logger.trace("[OlMap] : layerSwitcher : setting legends to ["+n.options.legends+"] for layer "+n.id),r.config.legends=n.options.legends),n.options.metadata&&(this.logger.trace("[OlMap] : layerSwitcher : setting metadata to ["+n.options.metadata+"] for layer "+n.id),r.config.metadata=this._filterEmptyMetadata(n.options.metadata)),t.layers.push(r)}this.logger.trace("[OlMap] : layerSwitcher Opts : ... ");var i=new ms.control.LayerSwitcher(t);return this.libMap.addControl(i),i},_s.prototype.addLengthControl=function(e){var t={};if(e.div&&(t.target=e.div),e.hasOwnProperty("styles")){if(t.styles={},e.styles.hasOwnProperty("pointer")&&(t.styles.pointer=this._fillPointerStyles(e.styles.pointer)),e.styles.hasOwnProperty("start")){var o={};o.stroke=this._fillStrokeStyles(e.styles.start),e.styles.start.hasOwnProperty("fillColor")&&(o.fill=new Bo.a({color:e.styles.start.fillColor})),t.styles.start=new Do.c(o)}if(e.styles.hasOwnProperty("finish")){var n={};n.stroke=this._fillStrokeStyles(e.styles.finish),e.styles.finish.hasOwnProperty("fillColor")&&(n.fill=new Bo.a({color:e.styles.finish.fillColor})),t.styles.finish=new Do.c(n)}}e.hasOwnProperty("geodesic")&&(t.geodesic=e.geodesic);var r=new ms.control.MeasureLength(t);return this.libMap.addControl(r),r},_s.prototype.addAreaControl=function(e){this.logger.trace("[OlMap] addAreaControl : ... ");var t={};if(e.div&&(t.target=e.div),e.hasOwnProperty("styles")){if(t.styles={},e.styles.hasOwnProperty("pointer")&&(t.styles.pointer=this._fillPointerStyles(e.styles.pointer)),e.styles.hasOwnProperty("start")){var o={};o.stroke=this._fillStrokeStyles(e.styles.start),e.styles.start.hasOwnProperty("fillColor")&&(o.fill=new Bo.a({color:e.styles.start.fillColor})),t.styles.start=new Do.c(o)}if(e.styles.hasOwnProperty("finish")){var n={};n.stroke=this._fillStrokeStyles(e.styles.finish),e.styles.finish.hasOwnProperty("fillColor")&&(n.fill=new Bo.a({color:e.styles.finish.fillColor})),t.styles.finish=new Do.c(n)}}e.hasOwnProperty("geodesic")&&(t.geodesic=e.geodesic);var r=new ms.control.MeasureArea(t);return this.libMap.addControl(r),r},_s.prototype.addAzimuthControl=function(e){var t={};if(e.div&&(t.target=e.div),e.hasOwnProperty("styles")){if(t.styles={},e.styles.hasOwnProperty("pointer")&&(t.styles.pointer=this._fillPointerStyles(e.styles.pointer)),e.styles.hasOwnProperty("start")){var o={};o.stroke=this._fillStrokeStyles(e.styles.start),e.styles.start.hasOwnProperty("fillColor")&&(o.fill=new Bo.a({color:e.styles.start.fillColor})),t.styles.start=new Do.c(o)}if(e.styles.hasOwnProperty("finish")){var n={};n.stroke=this._fillStrokeStyles(e.styles.finish),e.styles.finish.hasOwnProperty("fillColor")&&(n.fill=new Bo.a({color:e.styles.finish.fillColor})),t.styles.finish=new Do.c(n)}}e.hasOwnProperty("geodesic")&&(t.geodesic=e.geodesic);var r=new ms.control.MeasureAzimuth(t);return this.libMap.addControl(r),r},_s.prototype.addElevationPathControl=function(e){var t={};if(this.logger.trace("[OlMap] addElevationPathControl : ... "),e.div&&(t.target=e.div),this._isConfLoaded||(t.apiKey=this.apiKey),e.styles&&(t.stylesOptions={},e.styles.hasOwnProperty("pointer")&&(t.stylesOptions.draw={},t.stylesOptions.draw.pointer=this._fillPointerStyles(e.styles.pointer)),e.styles.hasOwnProperty("start")&&(t.stylesOptions.draw||(t.stylesOptions.draw={}),t.stylesOptions.draw.start=this._fillStrokeStyles(e.styles.start)),e.styles.hasOwnProperty("finish")&&(t.stylesOptions.draw||(t.stylesOptions.draw={}),t.stylesOptions.draw.finish=this._fillStrokeStyles(e.styles.finish)),e.styles.hasOwnProperty("marker"))){var o={};e.styles.marker.src&&(o.src=e.styles.marker.src,o.anchor=[e.styles.marker.xAnchor?e.styles.marker.xAnchor:0,e.styles.marker.yAnchor?e.styles.marker.yAnchor:0]),Object.keys(o).length>0&&(t.stylesOptions.marker=new Fo.a(o))}e.elevationPathOptions&&(t.elevationPathOptions=e.elevationPathOptions),e.displayProfileOptions&&(t.displayProfileOptions=e.displayProfileOptions);var n=new ms.control.ElevationPath(t);return this.libMap.addControl(n),n},_s.prototype.addSearchControl=function(e){var t={};e.div&&(t.target=e.div),t.collapsed=!e.maximised,this._isConfLoaded||(t.apiKey=this.apiKey),t.zoomTo=e.zoomTo||null,e.hasOwnProperty("resources")&&(t.resources={},e.resources.hasOwnProperty("geocode")&&(t.resources.geocode=e.resources.geocode),e.resources.hasOwnProperty("autocomplete")&&(t.resources.autocomplete=e.resources.autocomplete)),t.displayAdvancedSearch=e.hasOwnProperty("displayAdvancedSearch")&&e.displayAdvancedSearch,e.hasOwnProperty("advancedSearch")&&(t.advancedSearch=e.advancedSearch),e.hasOwnProperty("geocodeOptions")&&(t.geocodeOptions=e.geocodeOptions),e.hasOwnProperty("autocompleteOptions")&&(t.autocompleteOptions=e.autocompleteOptions);var o=new ms.control.SearchEngine(t);return this.libMap.addControl(o),o},_s.prototype.addReverseSearchControl=function(e){var t={};e.div&&(t.target=e.div),t.collapsed=!e.maximised,this._isConfLoaded||(t.apiKey=this.apiKey),e.hasOwnProperty("resources")&&(t.resources=e.resources),e.hasOwnProperty("reverseGeocodeOptions")&&(t.reverseGeocodeOptions=e.reverseGeocodeOptions),e.hasOwnProperty("delimitations")&&(t.delimitations=e.delimitations);var o=new ms.control.ReverseGeocode(t);return this.libMap.addControl(o),o},_s.prototype.addDrawingControl=function(e){var t={};if(e.div&&(t.target=e.div),t.collapsed=!e.maximised,e.hasOwnProperty("tools")&&(t.tools=e.tools),e.hasOwnProperty("labels")&&(t.labels=e.labels),e.hasOwnProperty("defaultStyles")&&(t.defaultStyles=e.defaultStyles),e.hasOwnProperty("cursorStyle")&&(t.cursorStyle=e.cursorStyle),e.hasOwnProperty("markersList")&&Array.isArray(e.markersList)&&e.markersList.length>0){t.markersList=[];for(var o=0;o<e.markersList.length;o++){var n=e.markersList[o];if(n.src){var r={src:n.src};n.xAnchor&&n.yAnchor&&(r.anchor=[n.xAnchor,n.yAnchor]),t.markersList.push(r)}}}if(e.layer){var i=this._getLayersObj([e.layer]);i&&i.length>0&&(t.layer=i[0])}var s=new ms.control.Drawing(t);return this.libMap.addControl(s),s},_s.prototype.addAttributionsControl=function(e){var t={};e.div&&(t.target=e.div),t.collapsed=!e.maximised;var o=new ms.control.GeoportalAttribution(t);return this.libMap.addControl(o),o},_s.prototype.addCameraControl=function(e){return null},_s.prototype.addGetFeatureInfoControl=function(e){var t={options:{}};for(var o in e.hasOwnProperty("options")&&(e.options.hasOwnProperty("auto")&&(t.options.auto=e.options.auto),e.options.hasOwnProperty("active")&&(t.options.active=e.options.active),e.options.hasOwnProperty("hidden")&&(t.options.hidden=e.options.hidden),e.options.hasOwnProperty("defaultEvent")&&(t.options.defaultEvent=e.options.defaultEvent),e.options.hasOwnProperty("defaultInfoFormat")&&(t.options.defaultInfoFormat=e.options.defaultInfoFormat),e.options.hasOwnProperty("cursorStyle")&&(t.options.cursorStyle=e.options.cursorStyle),e.options.hasOwnProperty("autoPanOptions")||(e.options.autoPanOptions=gs.DEFAULT_AUTOPAN_OPTIONS),t.options.autoPan=e.options.autoPanOptions.autoPan,t.options.autoPanAnimation={duration:e.options.autoPanOptions.duration},t.options.autoPanMargin=e.options.autoPanOptions.margin),this.mapOptions&&this.mapOptions.proxyUrl&&(t.options.proxyUrl=this.mapOptions.proxyUrl),this.mapOptions&&this.mapOptions.noProxyDomains&&(t.options.noProxyDomains=this.mapOptions.noProxyDomains),t.layers=[],e.layers)for(var n=e.layers[o],r=0;r<this._layers.length;++r){var i=this._layers[r];if(o===i.id){var s=i.options.format.toLowerCase();if(i.options.queryable||"kml"===s||"geojson"===s||"gpx"===s||"georss"===s||"wfs"===s||"drawing"===s){var a={obj:i.obj};n.event&&(a.event=n.event),i.options.gfiFormat&&(a.infoFormat=i.options.gfiFormat),t.layers.push(a);break}this.logger.info("GetFeatureInfo layer '"+o+"' has not been added to control because this layer is not queryable.");break}}var l=new ms.control.GetFeatureInfo(t);return this.libMap.addControl(l),l},_s.prototype.removeControls=function(e){if(this.logger.trace("[OlMap] : removeControls ... "),!e||Array.isArray(e)&&0===e.length)this.logger.info("No control to remove.");else{Array.isArray(e)||(e=[e]);for(var t=null,o=0;o<e.length;o++){t=e[o];var n=this._findRegisteredControl(t);n>=0&&(this.logger.trace("[OlMap] : removeControls : removing ["+t+"] from register."),this._controls.splice(n,1));var r=this.getLibMapControl(t);if(r)if("graticule"!==t.toLowerCase()){if(Array.isArray(r))return;this.logger.trace("[OlMap] : removeControls : removing ["+t+"] from Map."),this.libMap.removeControl(r)}else r.setMap(null),delete this.getLibMap().graticule;else this.logger.info("Impossible to remove control ["+t+"] : not found or unhandled")}}},_s.prototype.getLibMapControl=function(e){var t=this,o=null;if(!_s.CONTROLSCLASSES.hasOwnProperty(e.toLowerCase())||!_s.CONTROLSCLASSES[e.toLowerCase()])return this.logger.trace("[OlMap] getLibMapControl : control "+e+" non implÃ©mentÃ©."),o;var n=_s.CONTROLSCLASSES[e.toLowerCase()];if(Array.isArray(n)){this.logger.trace("[OlMap] getLibMapControl : searching interactions.");var r=[];return this.getLibMap().getInteractions().forEach((function(e){for(var o=0;o<n.length;o++)if(e instanceof n[o]){t.logger.trace("[OlMap] getLibMapControl : found interaction : "+n[o].name),r.push(e);break}})),r.length>0?r:null}if("graticule"===e.toLowerCase())return this.getLibMap().hasOwnProperty("graticule")?this.getLibMap().graticule:null;this.logger.trace("[OlMap] getLibMapControl : controlClass : "+n.name);var i=this.getLibMap().getControls().getArray();if(0===i.length)return this.logger.trace("[OlMap] getLibMapControl : no control found on map"),o;for(var s=0;s<i.length;s++){var a=i[s];if(this.logger.trace("[OlMap] getLibMapControl : analyzing : "+Ns(a)),a instanceof n){o=a,this.logger.trace("[OlMap] getLibMapControl : found ! ");break}}return o},_s.prototype._fillStrokeStyles=function(e){var t={},o=null;return e.hasOwnProperty("strokeLineDash")&&(t.lineDash=e.strokeLineDash),e.hasOwnProperty("strokeColor")&&(t.color=e.strokeColor),e.hasOwnProperty("strokeWidth")&&(t.width=e.strokeWidth),Object.keys(t).length>0&&(o=new zo.a(t)),o},_s.prototype._fillPointerStyles=function(e){var t={};return e.hasOwnProperty("radius")&&(t.radius=e.radius),t.stroke=this._fillStrokeStyles(e),e.hasOwnProperty("fillColor")&&(t.fill=new Bo.a({color:e.fillColor})),new ar.a(t)},_s.prototype._addLayerConfToLayerSwitcher=function(e,t){this.logger.trace("[OlMap] : _addLayerConfToLayerSwitcher ... ");var o=this.getLibMapControl("layerswitcher");o&&o.addLayer(e,this._layerOptions2layerConf(t))},_s.prototype.getLSLayerContainerDivId=function(e){var t=this._findRegisteredControl("layerswitcher");if(t<0)return this.logger.trace("[OlMap] : getLSLayerContainerDivId : no layerswitcher on map !"),null;var o=this._getLayersObj([e]);return o.length>0?this._controls[t].obj.getLayerDOMId(o[0].obj):(this.logger.trace("[OlMap] : getLSLayerContainerDivId : layer ["+e+"] not found on map !"),null)},_s.prototype.listen=function(e,t,o){var n=this;if(this.logger.trace("[OlMap] : listen..."),gs.prototype.listen.apply(this,arguments)){o=o||this;var r=this,i=null;switch(e){case"mapLoaded":case"mapFailure":case"located":case"geolocated":case"configured":break;case"centerChanged":var s=function(e){var n={};e.oldValue&&(n.oldCenter={x:e.oldValue[0],y:e.oldValue[1]}),n.newCenter={x:this.libMap.getView().getCenter()[0],y:this.libMap.getView().getCenter()[1]},t.call(o,n)}.bind(this);i=this.libMap.getView().on("change:center",s);break;case"zoomChanged":var a=function(e){t.call(o,{oldZoom:this._getZoomFromResolution(e.oldValue),newZoom:this._getZoomFromResolution(this.libMap.getView().getResolution())})}.bind(this);i=this.libMap.getView().on("change:resolution",a);break;case"azimuthChanged":var l=function(e){t.call(o,{oldAzimuth:180*e.oldValue/Math.PI,newAzimuth:180*this.libMap.getView().getRotation()/Math.PI})}.bind(this);i=this.libMap.getView().on("change:rotation",l);break;case"tiltChanged":case"projectionChanged":break;case"layerChanged":var c=function(e){var n=e.element,i=this._getLayerOpts(n);i||(r.logger.trace("[OlMap] listen : enregistrement d'une couche 'inconnue'."),i=this._registerUnknownLayer(n)),t.call(o,{layerAdded:i,position:n.getZIndex()})}.bind(this);i=this.libMap.getLayers().on("add",c),this._registerEvent(i,e,t,o);var u=function(e){var n=e.element,r=this._getLayerOpts(n)||this._getLayerOpts(n,this._layersRemoved),i=o.getLibMap();i.featuresOverlay&&r[i.featuresOverlay.getId()]&&(i.removeOverlay(i.featuresOverlay),i.featuresOverlay=null),t.call(o,{layerRemoved:r}),setTimeout((function(){o._resetLayerChangedEvent()}),0)}.bind(this);for(var d in i=this.libMap.getLayers().on("remove",u),this._registerEvent(i,e,t,o),_s.LAYERPROPERTIES)r.logger.trace("[OlMap] listen : abonnement layerProperty : "+d),this.libMap.getLayers().forEach((function(s,a,l){var c=n._getLayerOpts(s);if("grayScaled"===d){var u=function(e){t.call(o,{property:"grayScaled",oldValue:e.detail.oldValue,newValue:e.detail.newValue,layerChanged:c})},h=r._registerEvent(u,e,t,o);h.eventOrigin=s,h.eventType="change:"+d,h.eventOrigin.addEventListener(h.eventType,u,n)}else{i=s.on("change:"+d,(function(e){var n={};n[e.key]=e.oldValue;var i=r._getCommonLayerParams(n),a={};a[e.key]=s.get(e.key);var l=r._getCommonLayerParams(a);t.call(o,{property:_s.LAYERPROPERTIES[e.key],oldValue:i[_s.LAYERPROPERTIES[e.key]],newValue:l[_s.LAYERPROPERTIES[e.key]],layerChanged:c})})),n._registerEvent(i,e,t,o)}}),r);i=null;break;case"controlChanged":break;default:this.logger.info("unhandled event : "+e)}i&&this._registerEvent(i,e,t,o)}},_s.prototype.forget=function(e,t){if(this.logger.trace("[OlMap] : forget..."),gs.prototype.forget.apply(this,arguments)){var o=this._events[e];if(o)for(var n=null,r=o.length-1;r>=0;r--)o[r].action===t&&(n=o[r].key,o.splice(r,1),this.logger.trace("[OlMap] : forgetting : "+e+" ("+n+")"),Object(gn.b)(n));else this.logger.info("nothing to forget for : "+e)}},_s.prototype.setDraggable=function(e){return this._toggleInteractions("draggable",e)},_s.prototype.setKeyboard=function(e){return this._toggleInteractions("keyboard",e)},_s.prototype.setSelectable=function(e){return this._toggleInteractions("selectable",e)},_s.prototype._toggleInteractions=function(e,t){var o=this.getLibMapControl(e);if(null==o){o=[];for(var n=0;n<_s.CONTROLSCLASSES[e].length;n++){this.logger.trace("[OlMap] : adding interaction "+_s.CONTROLSCLASSES[e][n].name+" to the map.");var r=new _s.CONTROLSCLASSES[e][n];this.libMap.addInteraction(r),o.push(r)}}for(var i=0;i<o.length;i++){var s=o[i];this.logger.trace("[OlMap] : setting interaction to "+t+" for control : "+e),s.setActive(t)}return o},_s.prototype._getCommonLayerParams=function(e){var t={};if(this.logger.trace("[OlMap] : _getCommonLayerParams "),e.hasOwnProperty("opacity")&&(this.logger.trace("[OlMap] : _getCommonLayerParams - opacity : "+e.opacity),t.opacity=e.opacity),e.hasOwnProperty("visible")&&(this.logger.trace("[OlMap] : _getCommonLayerParams - visibility : "+e.visible),t.visibility=e.visible),e.hasOwnProperty("zIndex")&&(this.logger.trace("[OlMap] : _getCommonLayerParams - position : "+e.zIndex),t.position=e.zIndex),e.hasOwnProperty("mapbox-status")&&(this.logger.trace("[OlMap] : _getCommonLayerParams - mapbox-status : "+e["mapbox-status"]),t["mapbox-status"]=e["mapbox-status"]),e.hasOwnProperty("maxResolution")){var o=this._getZoomFromResolution(e.maxResolution);this.logger.trace("[OlMap] : _getCommonLayerParams - minZoom : "+o),t.minZoom=o}if(e.hasOwnProperty("minResolution")){var n=this._getZoomFromResolution(e.minResolution);this.logger.trace("[OlMap] : _getCommonLayerParams - maxZoom : "+n),t.maxZoom=n}return t},_s.prototype.getProjection=function(){return this.libMap.getView().getProjection().getCode()},_s.prototype.getCenter=function(){return{x:this.libMap.getView().getCenter()[0],y:this.libMap.getView().getCenter()[1]}},_s.prototype.getViewExtent=function(e){var t={};if(this.libMap&&this.libMap.getView()){var o=this.libMap.getView().calculateExtent(this.libMap.getSize()),n=this.libMap.getView().getProjection().getCode();e&&e!==n&&(o=Object(a.F)(o,n,e)),t.left=o[0],t.right=o[2],t.bottom=o[1],t.top=o[3]}return t},_s.prototype.getAzimuth=function(){return 180*this.libMap.getView().getRotation()/Math.PI},_s.prototype.getZoom=function(){return this._getZoomFromResolution(this.getResolution())},_s.prototype.getResolution=function(){return this.libMap.getView().getResolution()},_s.prototype.setProjection=function(e){var t=new ys.d({center:this.libMap.getView().getCenter(),projection:e,rotation:this.libMap.getView().getRotation(),zoom:this.getZoom()});this.libMap.setView(t)},_s.prototype.setXYCenter=function(e){if(this.logger.trace("[OlMap] - setXYCenter"),e.hasOwnProperty("x")&&e.hasOwnProperty("y")){var t=[e.x,e.y],o=this.libMap.getView().getProjection().getCode();e.projection&&e.projection!==o&&(t=Object(a.E)(t,e.projection,o)),this.libMap.getView().setCenter(t),this.logger.trace("[OlMap] - setXYCenter("+e.x+","+e.y+"), projection Map : "+o)}else this.logger.info("no valid coordinates for map center")},_s.prototype.setAutoCenter=function(e,t){this.logger.trace("[IT] - setAutoCenter"),this.setXYCenter(e,t)},_s.prototype.setAzimuth=function(e){this.libMap.getView().setRotation(e*Math.PI/180)},_s.prototype.setZoom=function(e){this.libMap.getView().setZoom(e)},_s.prototype.setResolution=function(e){this.libMap.getView().setResolution(e)},_s.prototype.zoomIn=function(){this.libMap.getView().setZoom(this.getZoom()+1)},_s.prototype.zoomOut=function(){this.libMap.getView().setZoom(this.getZoom()-1)};o("./src/OpenLayers/CSS/OlMap.css");var Ds=o("./src/Utils/dist-openlayers/index.js-exposed"),Fs=o.n(Ds);function Us(e){return(Us="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bs(e,t){return function e(t,o){for(var n in t)t.hasOwnProperty(n)&&(o.hasOwnProperty(n)?"object"===Us(t[n])&&e(t[n],o[n]):o[n]=t[n])}(e,t)}i.getLogger("SDK2D").log("Chargement SDK 2D..."),Bs(ms,Fs.a),Bs(Fs.a,ms),s.__class2d=_s;var zs=n.SDK2DVersion,Vs=n.date;window&&window.ol&&(window.ol=Fs.a)},"./src/Utils/dist-openlayers/index.js-exposed":function(e,t,o){(function(t){e.exports=t.ol=o("./node_modules/eslint-loader/dist/cjs.js?!./src/Utils/dist-openlayers/index.js")}).call(this,o("./node_modules/webpack/buildin/global.js"))},0:function(e,t,o){o("./node_modules/whatwg-fetch/fetch.js"),o("./node_modules/ol/ol.css"),o("./node_modules/geoportal-extensions-openlayers/dist/GpPluginOpenLayers-src.css"),e.exports=o("./src/SDK2D.js")},1:function(e,t){},2:function(e,t){},3:function(e,t){},4:function(e,t){},"node-fetch":function(t,o){t.exports=e},xmldom:function(e,o){e.exports=t}})}));